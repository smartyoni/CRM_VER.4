(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();var Df={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function d1(){if(ry)return Gl;ry=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,h){var d=null;if(h!==void 0&&(d=""+h),o.key!==void 0&&(d=""+o.key),"key"in o){h={};for(var p in o)p!=="key"&&(h[p]=o[p])}else h=o;return o=h.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:h}}return Gl.Fragment=e,Gl.jsx=i,Gl.jsxs=i,Gl}var ay;function m1(){return ay||(ay=1,Df.exports=d1()),Df.exports}var E=m1(),Nf={exports:{}},Ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function p1(){if(ly)return Ot;ly=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.iterator;function D(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,lt={};function z(C,O,tt){this.props=C,this.context=O,this.refs=lt,this.updater=tt||G}z.prototype.isReactComponent={},z.prototype.setState=function(C,O){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,O,"setState")},z.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function nt(){}nt.prototype=z.prototype;function J(C,O,tt){this.props=C,this.context=O,this.refs=lt,this.updater=tt||G}var ot=J.prototype=new nt;ot.constructor=J,Z(ot,z.prototype),ot.isPureReactComponent=!0;var dt=Array.isArray,mt={H:null,A:null,T:null,S:null,V:null},_t=Object.prototype.hasOwnProperty;function V(C,O,tt,L,et,ct){return tt=ct.ref,{$$typeof:r,type:C,key:O,ref:tt!==void 0?tt:null,props:ct}}function b(C,O){return V(C.type,O,void 0,void 0,void 0,C.props)}function x(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function j(C){var O={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(tt){return O[tt]})}var I=/\/+/g;function M(C,O){return typeof C=="object"&&C!==null&&C.key!=null?j(""+C.key):O.toString(36)}function R(){}function ht(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(R,R):(C.status="pending",C.then(function(O){C.status==="pending"&&(C.status="fulfilled",C.value=O)},function(O){C.status==="pending"&&(C.status="rejected",C.reason=O)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function K(C,O,tt,L,et){var ct=typeof C;(ct==="undefined"||ct==="boolean")&&(C=null);var ft=!1;if(C===null)ft=!0;else switch(ct){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(C.$$typeof){case r:case e:ft=!0;break;case A:return ft=C._init,K(ft(C._payload),O,tt,L,et)}}if(ft)return et=et(C),ft=L===""?"."+M(C,0):L,dt(et)?(tt="",ft!=null&&(tt=ft.replace(I,"$&/")+"/"),K(et,O,tt,"",function(Rt){return Rt})):et!=null&&(x(et)&&(et=b(et,tt+(et.key==null||C&&C.key===et.key?"":(""+et.key).replace(I,"$&/")+"/")+ft)),O.push(et)),1;ft=0;var St=L===""?".":L+":";if(dt(C))for(var Tt=0;Tt<C.length;Tt++)L=C[Tt],ct=St+M(L,Tt),ft+=K(L,O,tt,ct,et);else if(Tt=D(C),typeof Tt=="function")for(C=Tt.call(C),Tt=0;!(L=C.next()).done;)L=L.value,ct=St+M(L,Tt++),ft+=K(L,O,tt,ct,et);else if(ct==="object"){if(typeof C.then=="function")return K(ht(C),O,tt,L,et);throw O=String(C),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return ft}function P(C,O,tt){if(C==null)return C;var L=[],et=0;return K(C,L,"","",function(ct){return O.call(tt,ct,et++)}),L}function X(C){if(C._status===-1){var O=C._result;O=O(),O.then(function(tt){(C._status===0||C._status===-1)&&(C._status=1,C._result=tt)},function(tt){(C._status===0||C._status===-1)&&(C._status=2,C._result=tt)}),C._status===-1&&(C._status=0,C._result=O)}if(C._status===1)return C._result.default;throw C._result}var rt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Et(){}return Ot.Children={map:P,forEach:function(C,O,tt){P(C,function(){O.apply(this,arguments)},tt)},count:function(C){var O=0;return P(C,function(){O++}),O},toArray:function(C){return P(C,function(O){return O})||[]},only:function(C){if(!x(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ot.Component=z,Ot.Fragment=i,Ot.Profiler=o,Ot.PureComponent=J,Ot.StrictMode=a,Ot.Suspense=_,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mt,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(C){return mt.H.useMemoCache(C)}},Ot.cache=function(C){return function(){return C.apply(null,arguments)}},Ot.cloneElement=function(C,O,tt){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var L=Z({},C.props),et=C.key,ct=void 0;if(O!=null)for(ft in O.ref!==void 0&&(ct=void 0),O.key!==void 0&&(et=""+O.key),O)!_t.call(O,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&O.ref===void 0||(L[ft]=O[ft]);var ft=arguments.length-2;if(ft===1)L.children=tt;else if(1<ft){for(var St=Array(ft),Tt=0;Tt<ft;Tt++)St[Tt]=arguments[Tt+2];L.children=St}return V(C.type,et,void 0,void 0,ct,L)},Ot.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:h,_context:C},C},Ot.createElement=function(C,O,tt){var L,et={},ct=null;if(O!=null)for(L in O.key!==void 0&&(ct=""+O.key),O)_t.call(O,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(et[L]=O[L]);var ft=arguments.length-2;if(ft===1)et.children=tt;else if(1<ft){for(var St=Array(ft),Tt=0;Tt<ft;Tt++)St[Tt]=arguments[Tt+2];et.children=St}if(C&&C.defaultProps)for(L in ft=C.defaultProps,ft)et[L]===void 0&&(et[L]=ft[L]);return V(C,ct,void 0,void 0,null,et)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(C){return{$$typeof:p,render:C}},Ot.isValidElement=x,Ot.lazy=function(C){return{$$typeof:A,_payload:{_status:-1,_result:C},_init:X}},Ot.memo=function(C,O){return{$$typeof:v,type:C,compare:O===void 0?null:O}},Ot.startTransition=function(C){var O=mt.T,tt={};mt.T=tt;try{var L=C(),et=mt.S;et!==null&&et(tt,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(Et,rt)}catch(ct){rt(ct)}finally{mt.T=O}},Ot.unstable_useCacheRefresh=function(){return mt.H.useCacheRefresh()},Ot.use=function(C){return mt.H.use(C)},Ot.useActionState=function(C,O,tt){return mt.H.useActionState(C,O,tt)},Ot.useCallback=function(C,O){return mt.H.useCallback(C,O)},Ot.useContext=function(C){return mt.H.useContext(C)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(C,O){return mt.H.useDeferredValue(C,O)},Ot.useEffect=function(C,O,tt){var L=mt.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return L.useEffect(C,O)},Ot.useId=function(){return mt.H.useId()},Ot.useImperativeHandle=function(C,O,tt){return mt.H.useImperativeHandle(C,O,tt)},Ot.useInsertionEffect=function(C,O){return mt.H.useInsertionEffect(C,O)},Ot.useLayoutEffect=function(C,O){return mt.H.useLayoutEffect(C,O)},Ot.useMemo=function(C,O){return mt.H.useMemo(C,O)},Ot.useOptimistic=function(C,O){return mt.H.useOptimistic(C,O)},Ot.useReducer=function(C,O,tt){return mt.H.useReducer(C,O,tt)},Ot.useRef=function(C){return mt.H.useRef(C)},Ot.useState=function(C){return mt.H.useState(C)},Ot.useSyncExternalStore=function(C,O,tt){return mt.H.useSyncExternalStore(C,O,tt)},Ot.useTransition=function(){return mt.H.useTransition()},Ot.version="19.1.1",Ot}var oy;function fd(){return oy||(oy=1,Nf.exports=p1()),Nf.exports}var Dt=fd(),If={exports:{}},Fl={},Vf={exports:{}},Mf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function g1(){return uy||(uy=1,(function(r){function e(P,X){var rt=P.length;P.push(X);t:for(;0<rt;){var Et=rt-1>>>1,C=P[Et];if(0<o(C,X))P[Et]=X,P[rt]=C,rt=Et;else break t}}function i(P){return P.length===0?null:P[0]}function a(P){if(P.length===0)return null;var X=P[0],rt=P.pop();if(rt!==X){P[0]=rt;t:for(var Et=0,C=P.length,O=C>>>1;Et<O;){var tt=2*(Et+1)-1,L=P[tt],et=tt+1,ct=P[et];if(0>o(L,rt))et<C&&0>o(ct,L)?(P[Et]=ct,P[et]=rt,Et=et):(P[Et]=L,P[tt]=rt,Et=tt);else if(et<C&&0>o(ct,rt))P[Et]=ct,P[et]=rt,Et=et;else break t}}return X}function o(P,X){var rt=P.sortIndex-X.sortIndex;return rt!==0?rt:P.id-X.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var _=[],v=[],A=1,w=null,D=3,G=!1,Z=!1,lt=!1,z=!1,nt=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ot=typeof setImmediate<"u"?setImmediate:null;function dt(P){for(var X=i(v);X!==null;){if(X.callback===null)a(v);else if(X.startTime<=P)a(v),X.sortIndex=X.expirationTime,e(_,X);else break;X=i(v)}}function mt(P){if(lt=!1,dt(P),!Z)if(i(_)!==null)Z=!0,_t||(_t=!0,M());else{var X=i(v);X!==null&&K(mt,X.startTime-P)}}var _t=!1,V=-1,b=5,x=-1;function j(){return z?!0:!(r.unstable_now()-x<b)}function I(){if(z=!1,_t){var P=r.unstable_now();x=P;var X=!0;try{t:{Z=!1,lt&&(lt=!1,J(V),V=-1),G=!0;var rt=D;try{e:{for(dt(P),w=i(_);w!==null&&!(w.expirationTime>P&&j());){var Et=w.callback;if(typeof Et=="function"){w.callback=null,D=w.priorityLevel;var C=Et(w.expirationTime<=P);if(P=r.unstable_now(),typeof C=="function"){w.callback=C,dt(P),X=!0;break e}w===i(_)&&a(_),dt(P)}else a(_);w=i(_)}if(w!==null)X=!0;else{var O=i(v);O!==null&&K(mt,O.startTime-P),X=!1}}break t}finally{w=null,D=rt,G=!1}X=void 0}}finally{X?M():_t=!1}}}var M;if(typeof ot=="function")M=function(){ot(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ht=R.port2;R.port1.onmessage=I,M=function(){ht.postMessage(null)}}else M=function(){nt(I,0)};function K(P,X){V=nt(function(){P(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(P){switch(D){case 1:case 2:case 3:var X=3;break;default:X=D}var rt=D;D=X;try{return P()}finally{D=rt}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var rt=D;D=P;try{return X()}finally{D=rt}},r.unstable_scheduleCallback=function(P,X,rt){var Et=r.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?Et+rt:Et):rt=Et,P){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=rt+C,P={id:A++,callback:X,priorityLevel:P,startTime:rt,expirationTime:C,sortIndex:-1},rt>Et?(P.sortIndex=rt,e(v,P),i(_)===null&&P===i(v)&&(lt?(J(V),V=-1):lt=!0,K(mt,rt-Et))):(P.sortIndex=C,e(_,P),Z||G||(Z=!0,_t||(_t=!0,M()))),P},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(P){var X=D;return function(){var rt=D;D=X;try{return P.apply(this,arguments)}finally{D=rt}}}})(Mf)),Mf}var cy;function y1(){return cy||(cy=1,Vf.exports=g1()),Vf.exports}var Of={exports:{}},Qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function _1(){if(hy)return Qe;hy=1;var r=fd();function e(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(_,v,A){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:_,containerInfo:v,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Qe.createPortal=function(_,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return h(_,v,null,A)},Qe.flushSync=function(_){var v=d.T,A=a.p;try{if(d.T=null,a.p=2,_)return _()}finally{d.T=v,a.p=A,a.d.f()}},Qe.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,a.d.C(_,v))},Qe.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},Qe.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var A=v.as,w=p(A,v.crossOrigin),D=typeof v.integrity=="string"?v.integrity:void 0,G=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;A==="style"?a.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:w,integrity:D,fetchPriority:G}):A==="script"&&a.d.X(_,{crossOrigin:w,integrity:D,fetchPriority:G,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Qe.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var A=p(v.as,v.crossOrigin);a.d.M(_,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&a.d.M(_)},Qe.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var A=v.as,w=p(A,v.crossOrigin);a.d.L(_,A,{crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Qe.preloadModule=function(_,v){if(typeof _=="string")if(v){var A=p(v.as,v.crossOrigin);a.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else a.d.m(_)},Qe.requestFormReset=function(_){a.d.r(_)},Qe.unstable_batchedUpdates=function(_,v){return _(v)},Qe.useFormState=function(_,v,A){return d.H.useFormState(_,v,A)},Qe.useFormStatus=function(){return d.H.useHostTransitionStatus()},Qe.version="19.1.1",Qe}var fy;function v1(){if(fy)return Of.exports;fy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Of.exports=_1(),Of.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function E1(){if(dy)return Fl;dy=1;var r=y1(),e=fd(),i=v1();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(h(t)!==t)throw Error(a(188))}function _(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,l=n;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return p(c),t;if(f===l)return p(c),n;f=f.sibling}throw Error(a(188))}if(s.return!==l.return)s=c,l=f;else{for(var y=!1,T=c.child;T;){if(T===s){y=!0,s=c,l=f;break}if(T===l){y=!0,l=c,s=f;break}T=T.sibling}if(!y){for(T=f.child;T;){if(T===s){y=!0,s=f,l=c;break}if(T===l){y=!0,l=f,s=c;break}T=T.sibling}if(!y)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,w=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),lt=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),ot=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function ht(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Z:return"Fragment";case z:return"Profiler";case lt:return"StrictMode";case mt:return"Suspense";case _t:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case ot:return(t.displayName||"Context")+".Provider";case J:return(t._context.displayName||"Context")+".Consumer";case dt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return n=t.displayName||null,n!==null?n:ht(t.type)||"Memo";case b:n=t._payload,t=t._init;try{return ht(t(n))}catch{}}return null}var K=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt={pending:!1,data:null,method:null,action:null},Et=[],C=-1;function O(t){return{current:t}}function tt(t){0>C||(t.current=Et[C],Et[C]=null,C--)}function L(t,n){C++,Et[C]=t.current,t.current=n}var et=O(null),ct=O(null),ft=O(null),St=O(null);function Tt(t,n){switch(L(ft,n),L(ct,t),L(et,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Mg(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Mg(n),t=Og(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}tt(et),L(et,t)}function Rt(){tt(et),tt(ct),tt(ft)}function Mt(t){t.memoizedState!==null&&L(St,t);var n=et.current,s=Og(n,t.type);n!==s&&(L(ct,t),L(et,s))}function pn(t){ct.current===t&&(tt(et),tt(ct)),St.current===t&&(tt(St),Ll._currentValue=rt)}var Dr=Object.prototype.hasOwnProperty,Ms=r.unstable_scheduleCallback,Nr=r.unstable_cancelCallback,Dc=r.unstable_shouldYield,La=r.unstable_requestPaint,en=r.unstable_now,go=r.unstable_getCurrentPriorityLevel,be=r.unstable_ImmediatePriority,Ne=r.unstable_UserBlockingPriority,di=r.unstable_NormalPriority,Nc=r.unstable_LowPriority,za=r.unstable_IdlePriority,Ic=r.log,Os=r.unstable_setDisableYieldValue,ki=null,He=null;function gn(t){if(typeof Ic=="function"&&Os(t),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(ki,t)}catch{}}var Ze=Math.clz32?Math.clz32:_o,Vc=Math.log,yo=Math.LN2;function _o(t){return t>>>=0,t===0?32:31-(Vc(t)/yo|0)|0}var Hn=256,Li=4194304;function In(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function yn(t,n,s){var l=t.pendingLanes;if(l===0)return 0;var c=0,f=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?c=In(l):(y&=T,y!==0?c=In(y):s||(s=T&~t,s!==0&&(c=In(s))))):(T=l&~f,T!==0?c=In(T):y!==0?c=In(y):s||(s=l&~t,s!==0&&(c=In(s)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,s=n&-n,f>=s||f===32&&(s&4194048)!==0)?n:c}function zi(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Ir(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(){var t=Hn;return Hn<<=1,(Hn&4194048)===0&&(Hn=256),t}function Bi(){var t=Li;return Li<<=1,(Li&62914560)===0&&(Li=4194304),t}function Vr(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function fe(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vo(t,n,s,l,c,f){var y=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,N=t.expirationTimes,H=t.hiddenUpdates;for(s=y&~s;0<s;){var $=31-Ze(s),it=1<<$;T[$]=0,N[$]=-1;var F=H[$];if(F!==null)for(H[$]=null,$=0;$<F.length;$++){var Q=F[$];Q!==null&&(Q.lane&=-536870913)}s&=~it}l!==0&&qi(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(y&~n))}function qi(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Ze(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function Hi(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-Ze(s),c=1<<l;c&n|t[l]&n&&(t[l]|=n),s&=~c}}function qa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ha(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mi(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:Wg(t.type))}function Mc(t,n){var s=X.p;try{return X.p=t,n()}finally{X.p=s}}var Gn=Math.random().toString(36).slice(2),de="__reactFiber$"+Gn,Ue="__reactProps$"+Gn,pi="__reactContainer$"+Gn,js="__reactEvents$"+Gn,Us="__reactListeners$"+Gn,Oc="__reactHandles$"+Gn,Vn="__reactResources$"+Gn,Gi="__reactMarker$"+Gn;function Mr(t){delete t[de],delete t[Ue],delete t[js],delete t[Us],delete t[Oc]}function Fn(t){var n=t[de];if(n)return n;for(var s=t.parentNode;s;){if(n=s[pi]||s[de]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=kg(t);t!==null;){if(s=t[de])return s;t=kg(t)}return n}t=s,s=t.parentNode}return null}function Qn(t){if(t=t[de]||t[pi]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Fi(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Qi(t){var n=t[Vn];return n||(n=t[Vn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function me(t){t[Gi]=!0}var Eo=new Set,Ps={};function Yn(t,n){Kn(t,n),Kn(t+"Capture",n)}function Kn(t,n){for(Ps[t]=n,t=0;t<n.length;t++)Eo.add(n[t])}var ks=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xn={},Or={};function jc(t){return Dr.call(Or,t)?!0:Dr.call(Xn,t)?!1:ks.test(t)?Or[t]=!0:(Xn[t]=!0,!1)}function Ls(t,n,s){if(jc(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function zs(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function _n(t,n,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+l)}}var Bs,jr;function gi(t){if(Bs===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Bs=n&&n[1]||"",jr=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bs+t+jr}var Ur=!1;function Pr(t,n){if(!t||Ur)return"";Ur=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Q){var F=Q}Reflect.construct(t,[],it)}else{try{it.call()}catch(Q){F=Q}t.call(it.prototype)}}else{try{throw Error()}catch(Q){F=Q}(it=t())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),y=f[0],T=f[1];if(y&&T){var N=y.split(`
`),H=T.split(`
`);for(c=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;c<H.length&&!H[c].includes("DetermineComponentFrameRoot");)c++;if(l===N.length||c===H.length)for(l=N.length-1,c=H.length-1;1<=l&&0<=c&&N[l]!==H[c];)c--;for(;1<=l&&0<=c;l--,c--)if(N[l]!==H[c]){if(l!==1||c!==1)do if(l--,c--,0>c||N[l]!==H[c]){var $=`
`+N[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=c);break}}}finally{Ur=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?gi(s):""}function Uc(t){switch(t.tag){case 26:case 27:case 5:return gi(t.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return Pr(t.type,!1);case 11:return Pr(t.type.render,!1);case 1:return Pr(t.type,!0);case 31:return gi("Activity");default:return""}}function Mn(t){try{var n="";do n+=Uc(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function le(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function qs(t){var n=Yi(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(y){l=""+y,f.call(this,y)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ki(t){t._valueTracker||(t._valueTracker=qs(t))}function Zt(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=Yi(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function yi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Hs=/[\n"\\]/g;function Ie(t){return t.replace(Hs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ga(t,n,s,l,c,f,y,T){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),n!=null?y==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+le(n)):t.value!==""+le(n)&&(t.value=""+le(n)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),n!=null?Qa(t,y,le(n)):s!=null?Qa(t,y,le(s)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+le(T):t.removeAttribute("name")}function Fa(t,n,s,l,c,f,y,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;s=s!=null?""+le(s):"",n=n!=null?""+le(n):s,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y)}function Qa(t,n,s){n==="number"&&yi(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Xi(t,n,s,l){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&l&&(t[s].defaultSelected=!0)}else{for(s=""+le(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function To(t,n,s){if(n!=null&&(n=""+le(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+le(s):""}function Ao(t,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(K(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=le(n),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function vn(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var _i=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ya(t,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,s):typeof s!="number"||s===0||_i.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function Ka(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&s[c]!==l&&Ya(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&Ya(t,f,n[f])}function kr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),So=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function On(t){return So.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Xa=null;function Za(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zi=null,$e=null;function xo(t){var n=Qn(t);if(n&&(t=n.stateNode)){var s=t[Ue]||null;t:switch(t=n.stateNode,n.type){case"input":if(Ga(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ie(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var c=l[Ue]||null;if(!c)throw Error(a(90));Ga(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===t.form&&Zt(l)}break t;case"textarea":To(t,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&Xi(t,!!s.multiple,n,!1)}}}var Gs=!1;function Fs(t,n,s){if(Gs)return t(n,s);Gs=!0;try{var l=t(n);return l}finally{if(Gs=!1,(Zi!==null||$e!==null)&&(mu(),Zi&&(n=Zi,t=$e,$e=Zi=null,xo(n),t)))for(n=0;n<t.length;n++)xo(t[n])}}function $i(t,n){var s=t.stateNode;if(s===null)return null;var l=s[Ue]||null;if(l===null)return null;s=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Je=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vi=!1;if(Je)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){vi=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{vi=!1}var En=null,ee=null,Lr=null;function Ro(){if(Lr)return Lr;var t,n=ee,s=n.length,l,c="value"in En?En.value:En.textContent,f=c.length;for(t=0;t<s&&n[t]===c[t];t++);var y=s-t;for(l=1;l<=y&&n[s-l]===c[f-l];l++);return Lr=c.slice(t,1<l?1-l:void 0)}function Qs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ys(){return!0}function $a(){return!1}function Se(t){function n(s,l,c,f,y){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ys:$a,this.isPropagationStopped=$a,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),n}var Ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=Se(Ge),Xs=A({},Ge,{view:0,detail:0}),Zs=Se(Xs),zr,$s,Zn,Js=A({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zn&&(Zn&&t.type==="mousemove"?(zr=t.screenX-Zn.screenX,$s=t.screenY-Zn.screenY):$s=zr=0,Zn=t),zr)},movementY:function(t){return"movementY"in t?t.movementY:$s}}),Ws=Se(Js),Pc=A({},Js,{dataTransfer:0}),wo=Se(Pc),tr=A({},Xs,{relatedTarget:0}),Br=Se(tr),Co=A({},Ge,{animationName:0,elapsedTime:0,pseudoElement:0}),Ja=Se(Co),Wa=A({},Ge,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Do=Se(Wa),qr=A({},Ge,{data:0}),tl=Se(qr),No={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ei={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Io={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Io[t])?!!n[t]:!1}function Hr(){return Vo}var Mo=A({},Xs,{key:function(t){if(t.key){var n=No[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ei[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(t){return t.type==="keypress"?Qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gr=Se(Mo),We=A({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=Se(We),Oo=A({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),Wi=Se(Oo),u=A({},Ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Se(u),g=A({},Js,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S=Se(g),q=A({},Ge,{newState:0,oldState:0}),Y=Se(q),ut=[9,13,27,32],It=Je&&"CompositionEvent"in window,ie=null;Je&&"documentMode"in document&&(ie=document.documentMode);var Yt=Je&&"TextEvent"in window&&!ie,pe=Je&&(!It||ie&&8<ie&&11>=ie),ln=" ",$n=!1;function jn(t,n){switch(t){case"keyup":return ut.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pn=!1;function nl(t,n){switch(t){case"compositionend":return Un(n);case"keypress":return n.which!==32?null:($n=!0,ln);case"textInput":return t=n.data,t===ln&&$n?null:t;default:return null}}function z0(t,n){if(Pn)return t==="compositionend"||!It&&jn(t,n)?(t=Ro(),Lr=ee=En=null,Pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return pe&&n.locale!=="ko"?null:n.data;default:return null}}var B0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!B0[t.type]:n==="textarea"}function Kd(t,n,s,l){Zi?$e?$e.push(l):$e=[l]:Zi=l,n=Eu(n,"onChange"),0<n.length&&(s=new Ks("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var il=null,sl=null;function q0(t){Cg(t,0)}function jo(t){var n=Fi(t);if(Zt(n))return t}function Xd(t,n){if(t==="change")return n}var Zd=!1;if(Je){var kc;if(Je){var Lc="oninput"in document;if(!Lc){var $d=document.createElement("div");$d.setAttribute("oninput","return;"),Lc=typeof $d.oninput=="function"}kc=Lc}else kc=!1;Zd=kc&&(!document.documentMode||9<document.documentMode)}function Jd(){il&&(il.detachEvent("onpropertychange",Wd),sl=il=null)}function Wd(t){if(t.propertyName==="value"&&jo(sl)){var n=[];Kd(n,sl,t,Za(t)),Fs(q0,n)}}function H0(t,n,s){t==="focusin"?(Jd(),il=n,sl=s,il.attachEvent("onpropertychange",Wd)):t==="focusout"&&Jd()}function G0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jo(sl)}function F0(t,n){if(t==="click")return jo(n)}function Q0(t,n){if(t==="input"||t==="change")return jo(n)}function Y0(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var on=typeof Object.is=="function"?Object.is:Y0;function rl(t,n){if(on(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!Dr.call(n,c)||!on(t[c],n[c]))return!1}return!0}function tm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function em(t,n){var s=tm(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=tm(s)}}function nm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?nm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function im(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=yi(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=yi(t.document)}return n}function zc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var K0=Je&&"documentMode"in document&&11>=document.documentMode,Fr=null,Bc=null,al=null,qc=!1;function sm(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;qc||Fr==null||Fr!==yi(l)||(l=Fr,"selectionStart"in l&&zc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),al&&rl(al,l)||(al=l,l=Eu(Bc,"onSelect"),0<l.length&&(n=new Ks("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=Fr)))}function er(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Qr={animationend:er("Animation","AnimationEnd"),animationiteration:er("Animation","AnimationIteration"),animationstart:er("Animation","AnimationStart"),transitionrun:er("Transition","TransitionRun"),transitionstart:er("Transition","TransitionStart"),transitioncancel:er("Transition","TransitionCancel"),transitionend:er("Transition","TransitionEnd")},Hc={},rm={};Je&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function nr(t){if(Hc[t])return Hc[t];if(!Qr[t])return t;var n=Qr[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in rm)return Hc[t]=n[s];return t}var am=nr("animationend"),lm=nr("animationiteration"),om=nr("animationstart"),X0=nr("transitionrun"),Z0=nr("transitionstart"),$0=nr("transitioncancel"),um=nr("transitionend"),cm=new Map,Gc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gc.push("scrollEnd");function kn(t,n){cm.set(t,n),Yn(n,[t])}var hm=new WeakMap;function Tn(t,n){if(typeof t=="object"&&t!==null){var s=hm.get(t);return s!==void 0?s:(n={value:t,source:n,stack:Mn(n)},hm.set(t,n),n)}return{value:t,source:n,stack:Mn(n)}}var An=[],Yr=0,Fc=0;function Uo(){for(var t=Yr,n=Fc=Yr=0;n<t;){var s=An[n];An[n++]=null;var l=An[n];An[n++]=null;var c=An[n];An[n++]=null;var f=An[n];if(An[n++]=null,l!==null&&c!==null){var y=l.pending;y===null?c.next=c:(c.next=y.next,y.next=c),l.pending=c}f!==0&&fm(s,c,f)}}function Po(t,n,s,l){An[Yr++]=t,An[Yr++]=n,An[Yr++]=s,An[Yr++]=l,Fc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Qc(t,n,s,l){return Po(t,n,s,l),ko(t)}function Kr(t,n){return Po(t,null,null,n),ko(t)}function fm(t,n,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var c=!1,f=t.return;f!==null;)f.childLanes|=s,l=f.alternate,l!==null&&(l.childLanes|=s),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-Ze(s),t=f.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=s|536870912),f):null}function ko(t){if(50<Il)throw Il=0,Jh=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Xr={};function J0(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,n,s,l){return new J0(t,n,s,l)}function Yc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ti(t,n){var s=t.alternate;return s===null?(s=un(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function dm(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Lo(t,n,s,l,c,f){var y=0;if(l=t,typeof t=="function")Yc(t)&&(y=1);else if(typeof t=="string")y=t1(t,s,et.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case x:return t=un(31,s,n,c),t.elementType=x,t.lanes=f,t;case Z:return ir(s.children,c,f,n);case lt:y=8,c|=24;break;case z:return t=un(12,s,n,c|2),t.elementType=z,t.lanes=f,t;case mt:return t=un(13,s,n,c),t.elementType=mt,t.lanes=f,t;case _t:return t=un(19,s,n,c),t.elementType=_t,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nt:case ot:y=10;break t;case J:y=9;break t;case dt:y=11;break t;case V:y=14;break t;case b:y=16,l=null;break t}y=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=un(y,s,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function ir(t,n,s,l){return t=un(7,t,l,n),t.lanes=s,t}function Kc(t,n,s){return t=un(6,t,null,n),t.lanes=s,t}function Xc(t,n,s){return n=un(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Zr=[],$r=0,zo=null,Bo=0,bn=[],Sn=0,sr=null,Ai=1,bi="";function rr(t,n){Zr[$r++]=Bo,Zr[$r++]=zo,zo=t,Bo=n}function mm(t,n,s){bn[Sn++]=Ai,bn[Sn++]=bi,bn[Sn++]=sr,sr=t;var l=Ai;t=bi;var c=32-Ze(l)-1;l&=~(1<<c),s+=1;var f=32-Ze(n)+c;if(30<f){var y=c-c%5;f=(l&(1<<y)-1).toString(32),l>>=y,c-=y,Ai=1<<32-Ze(n)+c|s<<c|l,bi=f+t}else Ai=1<<f|s<<c|l,bi=t}function Zc(t){t.return!==null&&(rr(t,1),mm(t,1,0))}function $c(t){for(;t===zo;)zo=Zr[--$r],Zr[$r]=null,Bo=Zr[--$r],Zr[$r]=null;for(;t===sr;)sr=bn[--Sn],bn[Sn]=null,bi=bn[--Sn],bn[Sn]=null,Ai=bn[--Sn],bn[Sn]=null}var tn=null,ce=null,Ft=!1,ar=null,Jn=!1,Jc=Error(a(519));function lr(t){var n=Error(a(418,""));throw ul(Tn(n,t)),Jc}function pm(t){var n=t.stateNode,s=t.type,l=t.memoizedProps;switch(n[de]=t,n[Ue]=l,s){case"dialog":kt("cancel",n),kt("close",n);break;case"iframe":case"object":case"embed":kt("load",n);break;case"video":case"audio":for(s=0;s<Ml.length;s++)kt(Ml[s],n);break;case"source":kt("error",n);break;case"img":case"image":case"link":kt("error",n),kt("load",n);break;case"details":kt("toggle",n);break;case"input":kt("invalid",n),Fa(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ki(n);break;case"select":kt("invalid",n);break;case"textarea":kt("invalid",n),Ao(n,l.value,l.defaultValue,l.children),Ki(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||Vg(n.textContent,s)?(l.popover!=null&&(kt("beforetoggle",n),kt("toggle",n)),l.onScroll!=null&&kt("scroll",n),l.onScrollEnd!=null&&kt("scrollend",n),l.onClick!=null&&(n.onclick=Tu),n=!0):n=!1,n||lr(t)}function gm(t){for(tn=t.return;tn;)switch(tn.tag){case 5:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:tn=tn.return}}function ll(t){if(t!==tn)return!1;if(!Ft)return gm(t),Ft=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||pf(t.type,t.memoizedProps)),s=!s),s&&ce&&lr(t),gm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){ce=zn(t.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}ce=null}}else n===27?(n=ce,ps(t.type)?(t=vf,vf=null,ce=t):ce=n):ce=tn?zn(t.stateNode.nextSibling):null;return!0}function ol(){ce=tn=null,Ft=!1}function ym(){var t=ar;return t!==null&&(rn===null?rn=t:rn.push.apply(rn,t),ar=null),t}function ul(t){ar===null?ar=[t]:ar.push(t)}var Wc=O(null),or=null,Si=null;function ts(t,n,s){L(Wc,n._currentValue),n._currentValue=s}function xi(t){t._currentValue=Wc.current,tt(Wc)}function th(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function eh(t,n,s,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var y=c.child;f=f.firstContext;t:for(;f!==null;){var T=f;f=c;for(var N=0;N<n.length;N++)if(T.context===n[N]){f.lanes|=s,T=f.alternate,T!==null&&(T.lanes|=s),th(f.return,s,t),l||(y=null);break t}f=T.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(a(341));y.lanes|=s,f=y.alternate,f!==null&&(f.lanes|=s),th(y,s,t),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===t){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function cl(t,n,s,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(a(387));if(y=y.memoizedProps,y!==null){var T=c.type;on(c.pendingProps.value,y.value)||(t!==null?t.push(T):t=[T])}}else if(c===St.current){if(y=c.alternate,y===null)throw Error(a(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Ll):t=[Ll])}c=c.return}t!==null&&eh(n,t,s,l),n.flags|=262144}function qo(t){for(t=t.firstContext;t!==null;){if(!on(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ur(t){or=t,Si=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Fe(t){return _m(or,t)}function Ho(t,n){return or===null&&ur(t),_m(t,n)}function _m(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Si===null){if(t===null)throw Error(a(308));Si=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Si=Si.next=n;return s}var W0=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},tE=r.unstable_scheduleCallback,eE=r.unstable_NormalPriority,xe={$$typeof:ot,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nh(){return{controller:new W0,data:new Map,refCount:0}}function hl(t){t.refCount--,t.refCount===0&&tE(eE,function(){t.controller.abort()})}var fl=null,ih=0,Jr=0,Wr=null;function nE(t,n){if(fl===null){var s=fl=[];ih=0,Jr=af(),Wr={status:"pending",value:void 0,then:function(l){s.push(l)}}}return ih++,n.then(vm,vm),n}function vm(){if(--ih===0&&fl!==null){Wr!==null&&(Wr.status="fulfilled");var t=fl;fl=null,Jr=0,Wr=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function iE(t,n){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<s.length;c++)(0,s[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var Em=P.S;P.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&nE(t,n),Em!==null&&Em(t,n)};var cr=O(null);function sh(){var t=cr.current;return t!==null?t:ne.pooledCache}function Go(t,n){n===null?L(cr,cr.current):L(cr,n.pool)}function Tm(){var t=sh();return t===null?null:{parent:xe._currentValue,pool:t}}var dl=Error(a(460)),Am=Error(a(474)),Fo=Error(a(542)),rh={then:function(){}};function bm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Qo(){}function Sm(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Qo,Qo),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Rm(t),t;default:if(typeof n.status=="string")n.then(Qo,Qo);else{if(t=ne,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Rm(t),t}throw ml=n,dl}}var ml=null;function xm(){if(ml===null)throw Error(a(459));var t=ml;return ml=null,t}function Rm(t){if(t===dl||t===Fo)throw Error(a(483))}var es=!1;function ah(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function is(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=ko(t),fm(t,null,s),n}return Po(t,l,n,s),ko(t)}function pl(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Hi(t,s)}}function oh(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?c=f=y:f=f.next=y,s=s.next}while(s!==null);f===null?c=f=n:f=f.next=n}else c=f=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var uh=!1;function gl(){if(uh){var t=Wr;if(t!==null)throw t}}function yl(t,n,s,l){uh=!1;var c=t.updateQueue;es=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,T=c.shared.pending;if(T!==null){c.shared.pending=null;var N=T,H=N.next;N.next=null,y===null?f=H:y.next=H,y=N;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==y&&(T===null?$.firstBaseUpdate=H:T.next=H,$.lastBaseUpdate=N))}if(f!==null){var it=c.baseState;y=0,$=H=N=null,T=f;do{var F=T.lane&-536870913,Q=F!==T.lane;if(Q?(Bt&F)===F:(l&F)===F){F!==0&&F===Jr&&(uh=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Ct=t,bt=T;F=n;var Wt=s;switch(bt.tag){case 1:if(Ct=bt.payload,typeof Ct=="function"){it=Ct.call(Wt,it,F);break t}it=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=bt.payload,F=typeof Ct=="function"?Ct.call(Wt,it,F):Ct,F==null)break t;it=A({},it,F);break t;case 2:es=!0}}F=T.callback,F!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=c.callbacks,Q===null?c.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(H=$=Q,N=it):$=$.next=Q,y|=F;if(T=T.next,T===null){if(T=c.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,c.lastBaseUpdate=Q,c.shared.pending=null}}while(!0);$===null&&(N=it),c.baseState=N,c.firstBaseUpdate=H,c.lastBaseUpdate=$,f===null&&(c.shared.lanes=0),hs|=y,t.lanes=y,t.memoizedState=it}}function wm(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Cm(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)wm(s[t],n)}var ta=O(null),Yo=O(0);function Dm(t,n){t=Vi,L(Yo,t),L(ta,n),Vi=t|n.baseLanes}function ch(){L(Yo,Vi),L(ta,ta.current)}function hh(){Vi=Yo.current,tt(ta),tt(Yo)}var ss=0,jt=null,$t=null,ve=null,Ko=!1,ea=!1,hr=!1,Xo=0,_l=0,na=null,sE=0;function ge(){throw Error(a(321))}function fh(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!on(t[s],n[s]))return!1;return!0}function dh(t,n,s,l,c,f){return ss=f,jt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=t===null||t.memoizedState===null?fp:dp,hr=!1,f=s(l,c),hr=!1,ea&&(f=Im(n,s,l,c)),Nm(t),f}function Nm(t){P.H=eu;var n=$t!==null&&$t.next!==null;if(ss=0,ve=$t=jt=null,Ko=!1,_l=0,na=null,n)throw Error(a(300));t===null||Ve||(t=t.dependencies,t!==null&&qo(t)&&(Ve=!0))}function Im(t,n,s,l){jt=t;var c=0;do{if(ea&&(na=null),_l=0,ea=!1,25<=c)throw Error(a(301));if(c+=1,ve=$t=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}P.H=hE,f=n(s,l)}while(ea);return f}function rE(){var t=P.H,n=t.useState()[0];return n=typeof n.then=="function"?vl(n):n,t=t.useState()[0],($t!==null?$t.memoizedState:null)!==t&&(jt.flags|=1024),n}function mh(){var t=Xo!==0;return Xo=0,t}function ph(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function gh(t){if(Ko){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ko=!1}ss=0,ve=$t=jt=null,ea=!1,_l=Xo=0,na=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?jt.memoizedState=ve=t:ve=ve.next=t,ve}function Ee(){if($t===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var n=ve===null?jt.memoizedState:ve.next;if(n!==null)ve=n,$t=t;else{if(t===null)throw jt.alternate===null?Error(a(467)):Error(a(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},ve===null?jt.memoizedState=ve=t:ve=ve.next=t}return ve}function yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(t){var n=_l;return _l+=1,na===null&&(na=[]),t=Sm(na,t,n),n=jt,(ve===null?n.memoizedState:ve.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?fp:dp),t}function Zo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vl(t);if(t.$$typeof===ot)return Fe(t)}throw Error(a(438,String(t)))}function _h(t){var n=null,s=jt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=jt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=yh(),jt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),l=0;l<t;l++)s[l]=j;return n.index++,s}function Ri(t,n){return typeof n=="function"?n(t):n}function $o(t){var n=Ee();return vh(n,$t,t)}function vh(t,n,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var T=y=null,N=null,H=n,$=!1;do{var it=H.lane&-536870913;if(it!==H.lane?(Bt&it)===it:(ss&it)===it){var F=H.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),it===Jr&&($=!0);else if((ss&F)===F){H=H.next,F===Jr&&($=!0);continue}else it={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(T=N=it,y=f):N=N.next=it,jt.lanes|=F,hs|=F;it=H.action,hr&&s(f,it),f=H.hasEagerState?H.eagerState:s(f,it)}else F={lane:it,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(T=N=F,y=f):N=N.next=F,jt.lanes|=it,hs|=it;H=H.next}while(H!==null&&H!==n);if(N===null?y=f:N.next=T,!on(f,t.memoizedState)&&(Ve=!0,$&&(s=Wr,s!==null)))throw s;t.memoizedState=f,t.baseState=y,t.baseQueue=N,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Eh(t){var n=Ee(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,c=s.pending,f=n.memoizedState;if(c!==null){s.pending=null;var y=c=c.next;do f=t(f,y.action),y=y.next;while(y!==c);on(f,n.memoizedState)||(Ve=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),s.lastRenderedState=f}return[f,l]}function Vm(t,n,s){var l=jt,c=Ee(),f=Ft;if(f){if(s===void 0)throw Error(a(407));s=s()}else s=n();var y=!on(($t||c).memoizedState,s);y&&(c.memoizedState=s,Ve=!0),c=c.queue;var T=jm.bind(null,l,c,t);if(El(2048,8,T,[t]),c.getSnapshot!==n||y||ve!==null&&ve.memoizedState.tag&1){if(l.flags|=2048,ia(9,Jo(),Om.bind(null,l,c,s,n),null),ne===null)throw Error(a(349));f||(ss&124)!==0||Mm(l,n,s)}return s}function Mm(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=jt.updateQueue,n===null?(n=yh(),jt.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function Om(t,n,s,l){n.value=s,n.getSnapshot=l,Um(n)&&Pm(t)}function jm(t,n,s){return s(function(){Um(n)&&Pm(t)})}function Um(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!on(t,s)}catch{return!0}}function Pm(t){var n=Kr(t,2);n!==null&&mn(n,t,2)}function Th(t){var n=nn();if(typeof t=="function"){var s=t;if(t=s(),hr){gn(!0);try{s()}finally{gn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:t},n}function km(t,n,s,l){return t.baseState=s,vh(t,$t,typeof l=="function"?l:Ri)}function aE(t,n,s,l,c){if(tu(t))throw Error(a(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};P.T!==null?s(!0):f.isTransition=!1,l(f),s=n.pending,s===null?(f.next=n.pending=f,Lm(n,f)):(f.next=s.next,n.pending=s.next=f)}}function Lm(t,n){var s=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=P.T,y={};P.T=y;try{var T=s(c,l),N=P.S;N!==null&&N(y,T),zm(t,n,T)}catch(H){Ah(t,n,H)}finally{P.T=f}}else try{f=s(c,l),zm(t,n,f)}catch(H){Ah(t,n,H)}}function zm(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Bm(t,n,l)},function(l){return Ah(t,n,l)}):Bm(t,n,s)}function Bm(t,n,s){n.status="fulfilled",n.value=s,qm(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,Lm(t,s)))}function Ah(t,n,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,qm(n),n=n.next;while(n!==l)}t.action=null}function qm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Hm(t,n){return n}function Gm(t,n){if(Ft){var s=ne.formState;if(s!==null){t:{var l=jt;if(Ft){if(ce){e:{for(var c=ce,f=Jn;c.nodeType!==8;){if(!f){c=null;break e}if(c=zn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){ce=zn(c.nextSibling),l=c.data==="F!";break t}}lr(l)}l=!1}l&&(n=s[0])}}return s=nn(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hm,lastRenderedState:n},s.queue=l,s=up.bind(null,jt,l),l.dispatch=s,l=Th(!1),f=wh.bind(null,jt,!1,l.queue),l=nn(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,s=aE.bind(null,jt,c,f,s),c.dispatch=s,l.memoizedState=t,[n,s,!1]}function Fm(t){var n=Ee();return Qm(n,$t,t)}function Qm(t,n,s){if(n=vh(t,n,Hm)[0],t=$o(Ri)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=vl(n)}catch(y){throw y===dl?Fo:y}else l=n;n=Ee();var c=n.queue,f=c.dispatch;return s!==n.memoizedState&&(jt.flags|=2048,ia(9,Jo(),lE.bind(null,c,s),null)),[l,f,t]}function lE(t,n){t.action=n}function Ym(t){var n=Ee(),s=$t;if(s!==null)return Qm(n,s,t);Ee(),n=n.memoizedState,s=Ee();var l=s.queue.dispatch;return s.memoizedState=t,[n,l,!1]}function ia(t,n,s,l){return t={tag:t,create:s,deps:l,inst:n,next:null},n=jt.updateQueue,n===null&&(n=yh(),jt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t),t}function Jo(){return{destroy:void 0,resource:void 0}}function Km(){return Ee().memoizedState}function Wo(t,n,s,l){var c=nn();l=l===void 0?null:l,jt.flags|=t,c.memoizedState=ia(1|n,Jo(),s,l)}function El(t,n,s,l){var c=Ee();l=l===void 0?null:l;var f=c.memoizedState.inst;$t!==null&&l!==null&&fh(l,$t.memoizedState.deps)?c.memoizedState=ia(n,f,s,l):(jt.flags|=t,c.memoizedState=ia(1|n,f,s,l))}function Xm(t,n){Wo(8390656,8,t,n)}function Zm(t,n){El(2048,8,t,n)}function $m(t,n){return El(4,2,t,n)}function Jm(t,n){return El(4,4,t,n)}function Wm(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function tp(t,n,s){s=s!=null?s.concat([t]):null,El(4,4,Wm.bind(null,n,t),s)}function bh(){}function ep(t,n){var s=Ee();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&fh(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function np(t,n){var s=Ee();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&fh(n,l[1]))return l[0];if(l=t(),hr){gn(!0);try{t()}finally{gn(!1)}}return s.memoizedState=[l,n],l}function Sh(t,n,s){return s===void 0||(ss&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=rg(),jt.lanes|=t,hs|=t,s)}function ip(t,n,s,l){return on(s,n)?s:ta.current!==null?(t=Sh(t,s,l),on(t,n)||(Ve=!0),t):(ss&42)===0?(Ve=!0,t.memoizedState=s):(t=rg(),jt.lanes|=t,hs|=t,n)}function sp(t,n,s,l,c){var f=X.p;X.p=f!==0&&8>f?f:8;var y=P.T,T={};P.T=T,wh(t,!1,n,s);try{var N=c(),H=P.S;if(H!==null&&H(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=iE(N,l);Tl(t,n,$,dn(t))}else Tl(t,n,l,dn(t))}catch(it){Tl(t,n,{then:function(){},status:"rejected",reason:it},dn())}finally{X.p=f,P.T=y}}function oE(){}function xh(t,n,s,l){if(t.tag!==5)throw Error(a(476));var c=rp(t).queue;sp(t,c,n,rt,s===null?oE:function(){return ap(t),s(l)})}function rp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:rt,baseState:rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:rt},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function ap(t){var n=rp(t).next.queue;Tl(t,n,{},dn())}function Rh(){return Fe(Ll)}function lp(){return Ee().memoizedState}function op(){return Ee().memoizedState}function uE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=dn();t=ns(s);var l=is(n,t,s);l!==null&&(mn(l,n,s),pl(l,n,s)),n={cache:nh()},t.payload=n;return}n=n.return}}function cE(t,n,s){var l=dn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},tu(t)?cp(n,s):(s=Qc(t,n,s,l),s!==null&&(mn(s,t,l),hp(s,n,l)))}function up(t,n,s){var l=dn();Tl(t,n,s,l)}function Tl(t,n,s,l){var c={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(tu(t))cp(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,T=f(y,s);if(c.hasEagerState=!0,c.eagerState=T,on(T,y))return Po(t,n,c,0),ne===null&&Uo(),!1}catch{}finally{}if(s=Qc(t,n,c,l),s!==null)return mn(s,t,l),hp(s,n,l),!0}return!1}function wh(t,n,s,l){if(l={lane:2,revertLane:af(),action:l,hasEagerState:!1,eagerState:null,next:null},tu(t)){if(n)throw Error(a(479))}else n=Qc(t,s,l,2),n!==null&&mn(n,t,2)}function tu(t){var n=t.alternate;return t===jt||n!==null&&n===jt}function cp(t,n){ea=Ko=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function hp(t,n,s){if((s&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Hi(t,s)}}var eu={readContext:Fe,use:Zo,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge},fp={readContext:Fe,use:Zo,useCallback:function(t,n){return nn().memoizedState=[t,n===void 0?null:n],t},useContext:Fe,useEffect:Xm,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,Wo(4194308,4,Wm.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Wo(4194308,4,t,n)},useInsertionEffect:function(t,n){Wo(4,2,t,n)},useMemo:function(t,n){var s=nn();n=n===void 0?null:n;var l=t();if(hr){gn(!0);try{t()}finally{gn(!1)}}return s.memoizedState=[l,n],l},useReducer:function(t,n,s){var l=nn();if(s!==void 0){var c=s(n);if(hr){gn(!0);try{s(n)}finally{gn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=cE.bind(null,jt,t),[l.memoizedState,t]},useRef:function(t){var n=nn();return t={current:t},n.memoizedState=t},useState:function(t){t=Th(t);var n=t.queue,s=up.bind(null,jt,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:bh,useDeferredValue:function(t,n){var s=nn();return Sh(s,t,n)},useTransition:function(){var t=Th(!1);return t=sp.bind(null,jt,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var l=jt,c=nn();if(Ft){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),ne===null)throw Error(a(349));(Bt&124)!==0||Mm(l,n,s)}c.memoizedState=s;var f={value:s,getSnapshot:n};return c.queue=f,Xm(jm.bind(null,l,f,t),[t]),l.flags|=2048,ia(9,Jo(),Om.bind(null,l,f,s,n),null),s},useId:function(){var t=nn(),n=ne.identifierPrefix;if(Ft){var s=bi,l=Ai;s=(l&~(1<<32-Ze(l)-1)).toString(32)+s,n="«"+n+"R"+s,s=Xo++,0<s&&(n+="H"+s.toString(32)),n+="»"}else s=sE++,n="«"+n+"r"+s.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:Rh,useFormState:Gm,useActionState:Gm,useOptimistic:function(t){var n=nn();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=wh.bind(null,jt,!0,s),s.dispatch=n,[t,n]},useMemoCache:_h,useCacheRefresh:function(){return nn().memoizedState=uE.bind(null,jt)}},dp={readContext:Fe,use:Zo,useCallback:ep,useContext:Fe,useEffect:Zm,useImperativeHandle:tp,useInsertionEffect:$m,useLayoutEffect:Jm,useMemo:np,useReducer:$o,useRef:Km,useState:function(){return $o(Ri)},useDebugValue:bh,useDeferredValue:function(t,n){var s=Ee();return ip(s,$t.memoizedState,t,n)},useTransition:function(){var t=$o(Ri)[0],n=Ee().memoizedState;return[typeof t=="boolean"?t:vl(t),n]},useSyncExternalStore:Vm,useId:lp,useHostTransitionStatus:Rh,useFormState:Fm,useActionState:Fm,useOptimistic:function(t,n){var s=Ee();return km(s,$t,t,n)},useMemoCache:_h,useCacheRefresh:op},hE={readContext:Fe,use:Zo,useCallback:ep,useContext:Fe,useEffect:Zm,useImperativeHandle:tp,useInsertionEffect:$m,useLayoutEffect:Jm,useMemo:np,useReducer:Eh,useRef:Km,useState:function(){return Eh(Ri)},useDebugValue:bh,useDeferredValue:function(t,n){var s=Ee();return $t===null?Sh(s,t,n):ip(s,$t.memoizedState,t,n)},useTransition:function(){var t=Eh(Ri)[0],n=Ee().memoizedState;return[typeof t=="boolean"?t:vl(t),n]},useSyncExternalStore:Vm,useId:lp,useHostTransitionStatus:Rh,useFormState:Ym,useActionState:Ym,useOptimistic:function(t,n){var s=Ee();return $t!==null?km(s,$t,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:_h,useCacheRefresh:op},sa=null,Al=0;function nu(t){var n=Al;return Al+=1,sa===null&&(sa=[]),Sm(sa,t,n)}function bl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function iu(t,n){throw n.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function mp(t){var n=t._init;return n(t._payload)}function pp(t){function n(k,U){if(t){var B=k.deletions;B===null?(k.deletions=[U],k.flags|=16):B.push(U)}}function s(k,U){if(!t)return null;for(;U!==null;)n(k,U),U=U.sibling;return null}function l(k){for(var U=new Map;k!==null;)k.key!==null?U.set(k.key,k):U.set(k.index,k),k=k.sibling;return U}function c(k,U){return k=Ti(k,U),k.index=0,k.sibling=null,k}function f(k,U,B){return k.index=B,t?(B=k.alternate,B!==null?(B=B.index,B<U?(k.flags|=67108866,U):B):(k.flags|=67108866,U)):(k.flags|=1048576,U)}function y(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function T(k,U,B,W){return U===null||U.tag!==6?(U=Kc(B,k.mode,W),U.return=k,U):(U=c(U,B),U.return=k,U)}function N(k,U,B,W){var gt=B.type;return gt===Z?$(k,U,B.props.children,W,B.key):U!==null&&(U.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===b&&mp(gt)===U.type)?(U=c(U,B.props),bl(U,B),U.return=k,U):(U=Lo(B.type,B.key,B.props,null,k.mode,W),bl(U,B),U.return=k,U)}function H(k,U,B,W){return U===null||U.tag!==4||U.stateNode.containerInfo!==B.containerInfo||U.stateNode.implementation!==B.implementation?(U=Xc(B,k.mode,W),U.return=k,U):(U=c(U,B.children||[]),U.return=k,U)}function $(k,U,B,W,gt){return U===null||U.tag!==7?(U=ir(B,k.mode,W,gt),U.return=k,U):(U=c(U,B),U.return=k,U)}function it(k,U,B){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Kc(""+U,k.mode,B),U.return=k,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return B=Lo(U.type,U.key,U.props,null,k.mode,B),bl(B,U),B.return=k,B;case G:return U=Xc(U,k.mode,B),U.return=k,U;case b:var W=U._init;return U=W(U._payload),it(k,U,B)}if(K(U)||M(U))return U=ir(U,k.mode,B,null),U.return=k,U;if(typeof U.then=="function")return it(k,nu(U),B);if(U.$$typeof===ot)return it(k,Ho(k,U),B);iu(k,U)}return null}function F(k,U,B,W){var gt=U!==null?U.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return gt!==null?null:T(k,U,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case D:return B.key===gt?N(k,U,B,W):null;case G:return B.key===gt?H(k,U,B,W):null;case b:return gt=B._init,B=gt(B._payload),F(k,U,B,W)}if(K(B)||M(B))return gt!==null?null:$(k,U,B,W,null);if(typeof B.then=="function")return F(k,U,nu(B),W);if(B.$$typeof===ot)return F(k,U,Ho(k,B),W);iu(k,B)}return null}function Q(k,U,B,W,gt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return k=k.get(B)||null,T(U,k,""+W,gt);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case D:return k=k.get(W.key===null?B:W.key)||null,N(U,k,W,gt);case G:return k=k.get(W.key===null?B:W.key)||null,H(U,k,W,gt);case b:var Ut=W._init;return W=Ut(W._payload),Q(k,U,B,W,gt)}if(K(W)||M(W))return k=k.get(B)||null,$(U,k,W,gt,null);if(typeof W.then=="function")return Q(k,U,B,nu(W),gt);if(W.$$typeof===ot)return Q(k,U,B,Ho(U,W),gt);iu(U,W)}return null}function Ct(k,U,B,W){for(var gt=null,Ut=null,vt=U,xt=U=0,Oe=null;vt!==null&&xt<B.length;xt++){vt.index>xt?(Oe=vt,vt=null):Oe=vt.sibling;var Gt=F(k,vt,B[xt],W);if(Gt===null){vt===null&&(vt=Oe);break}t&&vt&&Gt.alternate===null&&n(k,vt),U=f(Gt,U,xt),Ut===null?gt=Gt:Ut.sibling=Gt,Ut=Gt,vt=Oe}if(xt===B.length)return s(k,vt),Ft&&rr(k,xt),gt;if(vt===null){for(;xt<B.length;xt++)vt=it(k,B[xt],W),vt!==null&&(U=f(vt,U,xt),Ut===null?gt=vt:Ut.sibling=vt,Ut=vt);return Ft&&rr(k,xt),gt}for(vt=l(vt);xt<B.length;xt++)Oe=Q(vt,k,xt,B[xt],W),Oe!==null&&(t&&Oe.alternate!==null&&vt.delete(Oe.key===null?xt:Oe.key),U=f(Oe,U,xt),Ut===null?gt=Oe:Ut.sibling=Oe,Ut=Oe);return t&&vt.forEach(function(Es){return n(k,Es)}),Ft&&rr(k,xt),gt}function bt(k,U,B,W){if(B==null)throw Error(a(151));for(var gt=null,Ut=null,vt=U,xt=U=0,Oe=null,Gt=B.next();vt!==null&&!Gt.done;xt++,Gt=B.next()){vt.index>xt?(Oe=vt,vt=null):Oe=vt.sibling;var Es=F(k,vt,Gt.value,W);if(Es===null){vt===null&&(vt=Oe);break}t&&vt&&Es.alternate===null&&n(k,vt),U=f(Es,U,xt),Ut===null?gt=Es:Ut.sibling=Es,Ut=Es,vt=Oe}if(Gt.done)return s(k,vt),Ft&&rr(k,xt),gt;if(vt===null){for(;!Gt.done;xt++,Gt=B.next())Gt=it(k,Gt.value,W),Gt!==null&&(U=f(Gt,U,xt),Ut===null?gt=Gt:Ut.sibling=Gt,Ut=Gt);return Ft&&rr(k,xt),gt}for(vt=l(vt);!Gt.done;xt++,Gt=B.next())Gt=Q(vt,k,xt,Gt.value,W),Gt!==null&&(t&&Gt.alternate!==null&&vt.delete(Gt.key===null?xt:Gt.key),U=f(Gt,U,xt),Ut===null?gt=Gt:Ut.sibling=Gt,Ut=Gt);return t&&vt.forEach(function(f1){return n(k,f1)}),Ft&&rr(k,xt),gt}function Wt(k,U,B,W){if(typeof B=="object"&&B!==null&&B.type===Z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case D:t:{for(var gt=B.key;U!==null;){if(U.key===gt){if(gt=B.type,gt===Z){if(U.tag===7){s(k,U.sibling),W=c(U,B.props.children),W.return=k,k=W;break t}}else if(U.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===b&&mp(gt)===U.type){s(k,U.sibling),W=c(U,B.props),bl(W,B),W.return=k,k=W;break t}s(k,U);break}else n(k,U);U=U.sibling}B.type===Z?(W=ir(B.props.children,k.mode,W,B.key),W.return=k,k=W):(W=Lo(B.type,B.key,B.props,null,k.mode,W),bl(W,B),W.return=k,k=W)}return y(k);case G:t:{for(gt=B.key;U!==null;){if(U.key===gt)if(U.tag===4&&U.stateNode.containerInfo===B.containerInfo&&U.stateNode.implementation===B.implementation){s(k,U.sibling),W=c(U,B.children||[]),W.return=k,k=W;break t}else{s(k,U);break}else n(k,U);U=U.sibling}W=Xc(B,k.mode,W),W.return=k,k=W}return y(k);case b:return gt=B._init,B=gt(B._payload),Wt(k,U,B,W)}if(K(B))return Ct(k,U,B,W);if(M(B)){if(gt=M(B),typeof gt!="function")throw Error(a(150));return B=gt.call(B),bt(k,U,B,W)}if(typeof B.then=="function")return Wt(k,U,nu(B),W);if(B.$$typeof===ot)return Wt(k,U,Ho(k,B),W);iu(k,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,U!==null&&U.tag===6?(s(k,U.sibling),W=c(U,B),W.return=k,k=W):(s(k,U),W=Kc(B,k.mode,W),W.return=k,k=W),y(k)):s(k,U)}return function(k,U,B,W){try{Al=0;var gt=Wt(k,U,B,W);return sa=null,gt}catch(vt){if(vt===dl||vt===Fo)throw vt;var Ut=un(29,vt,null,k.mode);return Ut.lanes=W,Ut.return=k,Ut}finally{}}}var ra=pp(!0),gp=pp(!1),xn=O(null),Wn=null;function rs(t){var n=t.alternate;L(Re,Re.current&1),L(xn,t),Wn===null&&(n===null||ta.current!==null||n.memoizedState!==null)&&(Wn=t)}function yp(t){if(t.tag===22){if(L(Re,Re.current),L(xn,t),Wn===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Wn=t)}}else as()}function as(){L(Re,Re.current),L(xn,xn.current)}function wi(t){tt(xn),Wn===t&&(Wn=null),tt(Re)}var Re=O(0);function su(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||_f(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Ch(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:A({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Dh={enqueueSetState:function(t,n,s){t=t._reactInternals;var l=dn(),c=ns(l);c.payload=n,s!=null&&(c.callback=s),n=is(t,c,l),n!==null&&(mn(n,t,l),pl(n,t,l))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=dn(),c=ns(l);c.tag=1,c.payload=n,s!=null&&(c.callback=s),n=is(t,c,l),n!==null&&(mn(n,t,l),pl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=dn(),l=ns(s);l.tag=2,n!=null&&(l.callback=n),n=is(t,l,s),n!==null&&(mn(n,t,s),pl(n,t,s))}};function _p(t,n,s,l,c,f,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,y):n.prototype&&n.prototype.isPureReactComponent?!rl(s,l)||!rl(c,f):!0}function vp(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&Dh.enqueueReplaceState(n,n.state,null)}function fr(t,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(t=t.defaultProps){s===n&&(s=A({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}var ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ep(t){ru(t)}function Tp(t){console.error(t)}function Ap(t){ru(t)}function au(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function bp(t,n,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Nh(t,n,s){return s=ns(s),s.tag=3,s.payload={element:null},s.callback=function(){au(t,n)},s}function Sp(t){return t=ns(t),t.tag=3,t}function xp(t,n,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){bp(n,s,l)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){bp(n,s,l),typeof c!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function fE(t,n,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&cl(n,s,c,!0),s=xn.current,s!==null){switch(s.tag){case 13:return Wn===null?tf():s.alternate===null&&he===0&&(he=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===rh?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),nf(t,l,c)),!1;case 22:return s.flags|=65536,l===rh?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),nf(t,l,c)),!1}throw Error(a(435,s.tag))}return nf(t,l,c),tf(),!1}if(Ft)return n=xn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==Jc&&(t=Error(a(422),{cause:l}),ul(Tn(t,s)))):(l!==Jc&&(n=Error(a(423),{cause:l}),ul(Tn(n,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=Tn(l,s),c=Nh(t.stateNode,l,c),oh(t,c),he!==4&&(he=2)),!1;var f=Error(a(520),{cause:l});if(f=Tn(f,s),Nl===null?Nl=[f]:Nl.push(f),he!==4&&(he=2),n===null)return!0;l=Tn(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=Nh(s.stateNode,l,t),oh(s,t),!1;case 1:if(n=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(fs===null||!fs.has(f))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Sp(c),xp(c,t,s,l),oh(s,c),!1}s=s.return}while(s!==null);return!1}var Rp=Error(a(461)),Ve=!1;function Pe(t,n,s,l){n.child=t===null?gp(n,null,s,l):ra(n,t.child,s,l)}function wp(t,n,s,l,c){s=s.render;var f=n.ref;if("ref"in l){var y={};for(var T in l)T!=="ref"&&(y[T]=l[T])}else y=l;return ur(n),l=dh(t,n,s,y,f,c),T=mh(),t!==null&&!Ve?(ph(t,n,c),Ci(t,n,c)):(Ft&&T&&Zc(n),n.flags|=1,Pe(t,n,l,c),n.child)}function Cp(t,n,s,l,c){if(t===null){var f=s.type;return typeof f=="function"&&!Yc(f)&&f.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=f,Dp(t,n,f,l,c)):(t=Lo(s.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!kh(t,c)){var y=f.memoizedProps;if(s=s.compare,s=s!==null?s:rl,s(y,l)&&t.ref===n.ref)return Ci(t,n,c)}return n.flags|=1,t=Ti(f,l),t.ref=n.ref,t.return=n,n.child=t}function Dp(t,n,s,l,c){if(t!==null){var f=t.memoizedProps;if(rl(f,l)&&t.ref===n.ref)if(Ve=!1,n.pendingProps=l=f,kh(t,c))(t.flags&131072)!==0&&(Ve=!0);else return n.lanes=t.lanes,Ci(t,n,c)}return Ih(t,n,s,l,c)}function Np(t,n,s){var l=n.pendingProps,c=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=f!==null?f.baseLanes|s:s,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~l}else n.childLanes=0,n.child=null;return Ip(t,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Go(n,f!==null?f.cachePool:null),f!==null?Dm(n,f):ch(),yp(n);else return n.lanes=n.childLanes=536870912,Ip(t,n,f!==null?f.baseLanes|s:s,s)}else f!==null?(Go(n,f.cachePool),Dm(n,f),as(),n.memoizedState=null):(t!==null&&Go(n,null),ch(),as());return Pe(t,n,c,s),n.child}function Ip(t,n,s,l){var c=sh();return c=c===null?null:{parent:xe._currentValue,pool:c},n.memoizedState={baseLanes:s,cachePool:c},t!==null&&Go(n,null),ch(),yp(n),t!==null&&cl(t,n,l,!0),null}function lu(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function Ih(t,n,s,l,c){return ur(n),s=dh(t,n,s,l,void 0,c),l=mh(),t!==null&&!Ve?(ph(t,n,c),Ci(t,n,c)):(Ft&&l&&Zc(n),n.flags|=1,Pe(t,n,s,c),n.child)}function Vp(t,n,s,l,c,f){return ur(n),n.updateQueue=null,s=Im(n,l,s,c),Nm(t),l=mh(),t!==null&&!Ve?(ph(t,n,f),Ci(t,n,f)):(Ft&&l&&Zc(n),n.flags|=1,Pe(t,n,s,f),n.child)}function Mp(t,n,s,l,c){if(ur(n),n.stateNode===null){var f=Xr,y=s.contextType;typeof y=="object"&&y!==null&&(f=Fe(y)),f=new s(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Dh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},ah(n),y=s.contextType,f.context=typeof y=="object"&&y!==null?Fe(y):Xr,f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Ch(n,s,y,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&Dh.enqueueReplaceState(f,f.state,null),yl(n,l,f,c),gl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var T=n.memoizedProps,N=fr(s,T);f.props=N;var H=f.context,$=s.contextType;y=Xr,typeof $=="object"&&$!==null&&(y=Fe($));var it=s.getDerivedStateFromProps;$=typeof it=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||H!==y)&&vp(n,f,l,y),es=!1;var F=n.memoizedState;f.state=F,yl(n,l,f,c),gl(),H=n.memoizedState,T||F!==H||es?(typeof it=="function"&&(Ch(n,s,it,l),H=n.memoizedState),(N=es||_p(n,s,N,l,F,H,y))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=H),f.props=l,f.state=H,f.context=y,l=N):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,lh(t,n),y=n.memoizedProps,$=fr(s,y),f.props=$,it=n.pendingProps,F=f.context,H=s.contextType,N=Xr,typeof H=="object"&&H!==null&&(N=Fe(H)),T=s.getDerivedStateFromProps,(H=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==it||F!==N)&&vp(n,f,l,N),es=!1,F=n.memoizedState,f.state=F,yl(n,l,f,c),gl();var Q=n.memoizedState;y!==it||F!==Q||es||t!==null&&t.dependencies!==null&&qo(t.dependencies)?(typeof T=="function"&&(Ch(n,s,T,l),Q=n.memoizedState),($=es||_p(n,s,$,l,F,Q,N)||t!==null&&t.dependencies!==null&&qo(t.dependencies))?(H||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Q,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Q,N)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Q),f.props=l,f.state=Q,f.context=N,l=$):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,lu(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=ra(n,t.child,null,c),n.child=ra(n,null,s,c)):Pe(t,n,s,c),n.memoizedState=f.state,t=n.child):t=Ci(t,n,c),t}function Op(t,n,s,l){return ol(),n.flags|=256,Pe(t,n,s,l),n.child}var Vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mh(t){return{baseLanes:t,cachePool:Tm()}}function Oh(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=Rn),t}function jp(t,n,s){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=t!==null&&t.memoizedState===null?!1:(Re.current&2)!==0),y&&(c=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ft){if(c?rs(n):as(),Ft){var T=ce,N;if(N=T){t:{for(N=T,T=Jn;N.nodeType!==8;){if(!T){T=null;break t}if(N=zn(N.nextSibling),N===null){T=null;break t}}T=N}T!==null?(n.memoizedState={dehydrated:T,treeContext:sr!==null?{id:Ai,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},N=un(18,null,null,0),N.stateNode=T,N.return=n,n.child=N,tn=n,ce=null,N=!0):N=!1}N||lr(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return _f(T)?n.lanes=32:n.lanes=536870912,null;wi(n)}return T=l.children,l=l.fallback,c?(as(),c=n.mode,T=ou({mode:"hidden",children:T},c),l=ir(l,c,s,null),T.return=n,l.return=n,T.sibling=l,n.child=T,c=n.child,c.memoizedState=Mh(s),c.childLanes=Oh(t,y,s),n.memoizedState=Vh,l):(rs(n),jh(n,T))}if(N=t.memoizedState,N!==null&&(T=N.dehydrated,T!==null)){if(f)n.flags&256?(rs(n),n.flags&=-257,n=Uh(t,n,s)):n.memoizedState!==null?(as(),n.child=t.child,n.flags|=128,n=null):(as(),c=l.fallback,T=n.mode,l=ou({mode:"visible",children:l.children},T),c=ir(c,T,s,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,ra(n,t.child,null,s),l=n.child,l.memoizedState=Mh(s),l.childLanes=Oh(t,y,s),n.memoizedState=Vh,n=c);else if(rs(n),_f(T)){if(y=T.nextSibling&&T.nextSibling.dataset,y)var H=y.dgst;y=H,l=Error(a(419)),l.stack="",l.digest=y,ul({value:l,source:null,stack:null}),n=Uh(t,n,s)}else if(Ve||cl(t,n,s,!1),y=(s&t.childLanes)!==0,Ve||y){if(y=ne,y!==null&&(l=s&-s,l=(l&42)!==0?1:qa(l),l=(l&(y.suspendedLanes|s))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Kr(t,l),mn(y,t,l),Rp;T.data==="$?"||tf(),n=Uh(t,n,s)}else T.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=N.treeContext,ce=zn(T.nextSibling),tn=n,Ft=!0,ar=null,Jn=!1,t!==null&&(bn[Sn++]=Ai,bn[Sn++]=bi,bn[Sn++]=sr,Ai=t.id,bi=t.overflow,sr=n),n=jh(n,l.children),n.flags|=4096);return n}return c?(as(),c=l.fallback,T=n.mode,N=t.child,H=N.sibling,l=Ti(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,H!==null?c=Ti(H,c):(c=ir(c,T,s,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,T=t.child.memoizedState,T===null?T=Mh(s):(N=T.cachePool,N!==null?(H=xe._currentValue,N=N.parent!==H?{parent:H,pool:H}:N):N=Tm(),T={baseLanes:T.baseLanes|s,cachePool:N}),c.memoizedState=T,c.childLanes=Oh(t,y,s),n.memoizedState=Vh,l):(rs(n),s=t.child,t=s.sibling,s=Ti(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,t!==null&&(y=n.deletions,y===null?(n.deletions=[t],n.flags|=16):y.push(t)),n.child=s,n.memoizedState=null,s)}function jh(t,n){return n=ou({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function ou(t,n){return t=un(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Uh(t,n,s){return ra(n,t.child,null,s),t=jh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Up(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),th(t.return,n,s)}function Ph(t,n,s,l,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=s,f.tailMode=c)}function Pp(t,n,s){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(Pe(t,n,l.children,s),l=Re.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Up(t,s,n);else if(t.tag===19)Up(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(L(Re,l),c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&su(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),Ph(n,!1,c,s,f);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&su(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}Ph(n,!0,s,null,f);break;case"together":Ph(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ci(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),hs|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(cl(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Ti(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Ti(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function kh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&qo(t)))}function dE(t,n,s){switch(n.tag){case 3:Tt(n,n.stateNode.containerInfo),ts(n,xe,t.memoizedState.cache),ol();break;case 27:case 5:Mt(n);break;case 4:Tt(n,n.stateNode.containerInfo);break;case 10:ts(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(rs(n),n.flags|=128,null):(s&n.child.childLanes)!==0?jp(t,n,s):(rs(n),t=Ci(t,n,s),t!==null?t.sibling:null);rs(n);break;case 19:var c=(t.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(cl(t,n,s,!1),l=(s&n.childLanes)!==0),c){if(l)return Pp(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),L(Re,Re.current),l)break;return null;case 22:case 23:return n.lanes=0,Np(t,n,s);case 24:ts(n,xe,t.memoizedState.cache)}return Ci(t,n,s)}function kp(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ve=!0;else{if(!kh(t,s)&&(n.flags&128)===0)return Ve=!1,dE(t,n,s);Ve=(t.flags&131072)!==0}else Ve=!1,Ft&&(n.flags&1048576)!==0&&mm(n,Bo,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Yc(l)?(t=fr(l,t),n.tag=1,n=Mp(null,n,l,t,s)):(n.tag=0,n=Ih(null,n,l,t,s));else{if(l!=null){if(c=l.$$typeof,c===dt){n.tag=11,n=wp(null,n,l,t,s);break t}else if(c===V){n.tag=14,n=Cp(null,n,l,t,s);break t}}throw n=ht(l)||l,Error(a(306,n,""))}}return n;case 0:return Ih(t,n,n.type,n.pendingProps,s);case 1:return l=n.type,c=fr(l,n.pendingProps),Mp(t,n,l,c,s);case 3:t:{if(Tt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var f=n.memoizedState;c=f.element,lh(t,n),yl(n,l,null,s);var y=n.memoizedState;if(l=y.cache,ts(n,xe,l),l!==f.cache&&eh(n,[xe],s,!0),gl(),l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Op(t,n,l,s);break t}else if(l!==c){c=Tn(Error(a(424)),n),ul(c),n=Op(t,n,l,s);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ce=zn(t.firstChild),tn=n,Ft=!0,ar=null,Jn=!0,s=gp(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ol(),l===c){n=Ci(t,n,s);break t}Pe(t,n,l,s)}n=n.child}return n;case 26:return lu(t,n),t===null?(s=qg(n.type,null,n.pendingProps,null))?n.memoizedState=s:Ft||(s=n.type,t=n.pendingProps,l=Au(ft.current).createElement(s),l[de]=n,l[Ue]=t,Le(l,s,t),me(l),n.stateNode=l):n.memoizedState=qg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Mt(n),t===null&&Ft&&(l=n.stateNode=Lg(n.type,n.pendingProps,ft.current),tn=n,Jn=!0,c=ce,ps(n.type)?(vf=c,ce=zn(l.firstChild)):ce=c),Pe(t,n,n.pendingProps.children,s),lu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Ft&&((c=l=ce)&&(l=BE(l,n.type,n.pendingProps,Jn),l!==null?(n.stateNode=l,tn=n,ce=zn(l.firstChild),Jn=!1,c=!0):c=!1),c||lr(n)),Mt(n),c=n.type,f=n.pendingProps,y=t!==null?t.memoizedProps:null,l=f.children,pf(c,f)?l=null:y!==null&&pf(c,y)&&(n.flags|=32),n.memoizedState!==null&&(c=dh(t,n,rE,null,null,s),Ll._currentValue=c),lu(t,n),Pe(t,n,l,s),n.child;case 6:return t===null&&Ft&&((t=s=ce)&&(s=qE(s,n.pendingProps,Jn),s!==null?(n.stateNode=s,tn=n,ce=null,t=!0):t=!1),t||lr(n)),null;case 13:return jp(t,n,s);case 4:return Tt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ra(n,null,l,s):Pe(t,n,l,s),n.child;case 11:return wp(t,n,n.type,n.pendingProps,s);case 7:return Pe(t,n,n.pendingProps,s),n.child;case 8:return Pe(t,n,n.pendingProps.children,s),n.child;case 12:return Pe(t,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,ts(n,n.type,l.value),Pe(t,n,l.children,s),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,ur(n),c=Fe(c),l=l(c),n.flags|=1,Pe(t,n,l,s),n.child;case 14:return Cp(t,n,n.type,n.pendingProps,s);case 15:return Dp(t,n,n.type,n.pendingProps,s);case 19:return Pp(t,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},t===null?(s=ou(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Ti(t.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return Np(t,n,s);case 24:return ur(n),l=Fe(xe),t===null?(c=sh(),c===null&&(c=ne,f=nh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=s),c=f),n.memoizedState={parent:l,cache:c},ah(n),ts(n,xe,c)):((t.lanes&s)!==0&&(lh(t,n),yl(n,null,null,s),gl()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),ts(n,xe,l)):(l=f.cache,ts(n,xe,l),l!==c.cache&&eh(n,[xe],s,!0))),Pe(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Di(t){t.flags|=4}function Lp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Yg(n)){if(n=xn.current,n!==null&&((Bt&4194048)===Bt?Wn!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||n!==Wn))throw ml=rh,Am;t.flags|=8192}}function uu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Bi():536870912,t.lanes|=n,ua|=n)}function Sl(t,n){if(!Ft)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function oe(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function mE(t,n,s){var l=n.pendingProps;switch($c(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(n),null;case 1:return oe(n),null;case 3:return s=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),xi(xe),Rt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ll(n)?Di(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ym())),oe(n),null;case 26:return s=n.memoizedState,t===null?(Di(n),s!==null?(oe(n),Lp(n,s)):(oe(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Di(n),oe(n),Lp(n,s)):(oe(n),n.flags&=-16777217):(t.memoizedProps!==l&&Di(n),oe(n),n.flags&=-16777217),null;case 27:pn(n),s=ft.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Di(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return oe(n),null}t=et.current,ll(n)?pm(n):(t=Lg(c,l,s),n.stateNode=t,Di(n))}return oe(n),null;case 5:if(pn(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Di(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return oe(n),null}if(t=et.current,ll(n))pm(n);else{switch(c=Au(ft.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(s,{is:l.is}):c.createElement(s)}}t[de]=n,t[Ue]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(Le(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Di(n)}}return oe(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Di(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=ft.current,ll(n)){if(t=n.stateNode,s=n.memoizedProps,l=null,c=tn,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[de]=n,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Vg(t.nodeValue,s)),t||lr(n)}else t=Au(t).createTextNode(l),t[de]=n,n.stateNode=t}return oe(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=ll(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[de]=n}else ol(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;oe(n),c=!1}else c=ym(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(wi(n),n):(wi(n),null)}if(wi(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),uu(n,n.updateQueue),oe(n),null;case 4:return Rt(),t===null&&cf(n.stateNode.containerInfo),oe(n),null;case 10:return xi(n.type),oe(n),null;case 19:if(tt(Re),c=n.memoizedState,c===null)return oe(n),null;if(l=(n.flags&128)!==0,f=c.rendering,f===null)if(l)Sl(c,!1);else{if(he!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=su(t),f!==null){for(n.flags|=128,Sl(c,!1),t=f.updateQueue,n.updateQueue=t,uu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)dm(s,t),s=s.sibling;return L(Re,Re.current&1|2),n.child}t=t.sibling}c.tail!==null&&en()>fu&&(n.flags|=128,l=!0,Sl(c,!1),n.lanes=4194304)}else{if(!l)if(t=su(f),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,uu(n,t),Sl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Ft)return oe(n),null}else 2*en()-c.renderingStartTime>fu&&s!==536870912&&(n.flags|=128,l=!0,Sl(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=en(),n.sibling=null,t=Re.current,L(Re,l?t&1|2:t&1),n):(oe(n),null);case 22:case 23:return wi(n),hh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(oe(n),n.subtreeFlags&6&&(n.flags|=8192)):oe(n),s=n.updateQueue,s!==null&&uu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),t!==null&&tt(cr),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),xi(xe),oe(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function pE(t,n){switch($c(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return xi(xe),Rt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return pn(n),null;case 13:if(wi(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));ol()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return tt(Re),null;case 4:return Rt(),null;case 10:return xi(n.type),null;case 22:case 23:return wi(n),hh(),t!==null&&tt(cr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return xi(xe),null;case 25:return null;default:return null}}function zp(t,n){switch($c(n),n.tag){case 3:xi(xe),Rt();break;case 26:case 27:case 5:pn(n);break;case 4:Rt();break;case 13:wi(n);break;case 19:tt(Re);break;case 10:xi(n.type);break;case 22:case 23:wi(n),hh(),t!==null&&tt(cr);break;case 24:xi(xe)}}function xl(t,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&t)===t){l=void 0;var f=s.create,y=s.inst;l=f(),y.destroy=l}s=s.next}while(s!==c)}}catch(T){te(n,n.return,T)}}function ls(t,n,s){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var y=l.inst,T=y.destroy;if(T!==void 0){y.destroy=void 0,c=n;var N=s,H=T;try{H()}catch($){te(c,N,$)}}}l=l.next}while(l!==f)}}catch($){te(n,n.return,$)}}function Bp(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{Cm(n,s)}catch(l){te(t,t.return,l)}}}function qp(t,n,s){s.props=fr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){te(t,n,l)}}function Rl(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(c){te(t,n,c)}}function ti(t,n){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){te(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){te(t,n,c)}else s.current=null}function Hp(t){var n=t.type,s=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){te(t,t.return,c)}}function Lh(t,n,s){try{var l=t.stateNode;UE(l,t.type,s,n),l[Ue]=n}catch(c){te(t,t.return,c)}}function Gp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ps(t.type)||t.tag===4}function zh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Gp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ps(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Tu));else if(l!==4&&(l===27&&ps(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Bh(t,n,s),t=t.sibling;t!==null;)Bh(t,n,s),t=t.sibling}function cu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(l===27&&ps(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(cu(t,n,s),t=t.sibling;t!==null;)cu(t,n,s),t=t.sibling}function Fp(t){var n=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Le(n,l,s),n[de]=t,n[Ue]=s}catch(f){te(t,t.return,f)}}var Ni=!1,ye=!1,qh=!1,Qp=typeof WeakSet=="function"?WeakSet:Set,Me=null;function gE(t,n){if(t=t.containerInfo,df=Cu,t=im(t),zc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break t}var y=0,T=-1,N=-1,H=0,$=0,it=t,F=null;e:for(;;){for(var Q;it!==s||c!==0&&it.nodeType!==3||(T=y+c),it!==f||l!==0&&it.nodeType!==3||(N=y+l),it.nodeType===3&&(y+=it.nodeValue.length),(Q=it.firstChild)!==null;)F=it,it=Q;for(;;){if(it===t)break e;if(F===s&&++H===c&&(T=y),F===f&&++$===l&&(N=y),(Q=it.nextSibling)!==null)break;it=F,F=it.parentNode}it=Q}s=T===-1||N===-1?null:{start:T,end:N}}else s=null}s=s||{start:0,end:0}}else s=null;for(mf={focusedElem:t,selectionRange:s},Cu=!1,Me=n;Me!==null;)if(n=Me,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Me=t;else for(;Me!==null;){switch(n=Me,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,s=n,c=f.memoizedProps,f=f.memoizedState,l=s.stateNode;try{var Ct=fr(s.type,c,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Ct,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(bt){te(s,s.return,bt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)yf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":yf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,Me=t;break}Me=n.return}}function Yp(t,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:os(t,s),l&4&&xl(5,s);break;case 1:if(os(t,s),l&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(y){te(s,s.return,y)}else{var c=fr(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(y){te(s,s.return,y)}}l&64&&Bp(s),l&512&&Rl(s,s.return);break;case 3:if(os(t,s),l&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Cm(t,n)}catch(y){te(s,s.return,y)}}break;case 27:n===null&&l&4&&Fp(s);case 26:case 5:os(t,s),n===null&&l&4&&Hp(s),l&512&&Rl(s,s.return);break;case 12:os(t,s);break;case 13:os(t,s),l&4&&Zp(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=xE.bind(null,s),HE(t,s))));break;case 22:if(l=s.memoizedState!==null||Ni,!l){n=n!==null&&n.memoizedState!==null||ye,c=Ni;var f=ye;Ni=l,(ye=n)&&!f?us(t,s,(s.subtreeFlags&8772)!==0):os(t,s),Ni=c,ye=f}break;case 30:break;default:os(t,s)}}function Kp(t){var n=t.alternate;n!==null&&(t.alternate=null,Kp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Mr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ae=null,sn=!1;function Ii(t,n,s){for(s=s.child;s!==null;)Xp(t,n,s),s=s.sibling}function Xp(t,n,s){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(ki,s)}catch{}switch(s.tag){case 26:ye||ti(s,n),Ii(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ye||ti(s,n);var l=ae,c=sn;ps(s.type)&&(ae=s.stateNode,sn=!1),Ii(t,n,s),jl(s.stateNode),ae=l,sn=c;break;case 5:ye||ti(s,n);case 6:if(l=ae,c=sn,ae=null,Ii(t,n,s),ae=l,sn=c,ae!==null)if(sn)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(s.stateNode)}catch(f){te(s,n,f)}else try{ae.removeChild(s.stateNode)}catch(f){te(s,n,f)}break;case 18:ae!==null&&(sn?(t=ae,Pg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Hl(t)):Pg(ae,s.stateNode));break;case 4:l=ae,c=sn,ae=s.stateNode.containerInfo,sn=!0,Ii(t,n,s),ae=l,sn=c;break;case 0:case 11:case 14:case 15:ye||ls(2,s,n),ye||ls(4,s,n),Ii(t,n,s);break;case 1:ye||(ti(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&qp(s,n,l)),Ii(t,n,s);break;case 21:Ii(t,n,s);break;case 22:ye=(l=ye)||s.memoizedState!==null,Ii(t,n,s),ye=l;break;default:Ii(t,n,s)}}function Zp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Hl(t)}catch(s){te(n,n.return,s)}}function yE(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Qp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Qp),n;default:throw Error(a(435,t.tag))}}function Hh(t,n){var s=yE(t);n.forEach(function(l){var c=RE.bind(null,t,l);s.has(l)||(s.add(l),l.then(c,c))})}function cn(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],f=t,y=n,T=y;t:for(;T!==null;){switch(T.tag){case 27:if(ps(T.type)){ae=T.stateNode,sn=!1;break t}break;case 5:ae=T.stateNode,sn=!1;break t;case 3:case 4:ae=T.stateNode.containerInfo,sn=!0;break t}T=T.return}if(ae===null)throw Error(a(160));Xp(f,y,c),ae=null,sn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)$p(n,t),n=n.sibling}var Ln=null;function $p(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:cn(n,t),hn(t),l&4&&(ls(3,t,t.return),xl(3,t),ls(5,t,t.return));break;case 1:cn(n,t),hn(t),l&512&&(ye||s===null||ti(s,s.return)),l&64&&Ni&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=Ln;if(cn(n,t),hn(t),l&512&&(ye||s===null||ti(s,s.return)),l&4){var f=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){t:{l=t.type,s=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Gi]||f[de]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),Le(f,l,s),f[de]=t,me(f),l=f;break t;case"link":var y=Fg("link","href",c).get(l+(s.href||""));if(y){for(var T=0;T<y.length;T++)if(f=y[T],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(T,1);break e}}f=c.createElement(l),Le(f,l,s),c.head.appendChild(f);break;case"meta":if(y=Fg("meta","content",c).get(l+(s.content||""))){for(T=0;T<y.length;T++)if(f=y[T],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(T,1);break e}}f=c.createElement(l),Le(f,l,s),c.head.appendChild(f);break;default:throw Error(a(468,l))}f[de]=t,me(f),l=f}t.stateNode=l}else Qg(c,t.type,t.stateNode);else t.stateNode=Gg(c,l,t.memoizedProps);else f!==l?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,l===null?Qg(c,t.type,t.stateNode):Gg(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Lh(t,t.memoizedProps,s.memoizedProps)}break;case 27:cn(n,t),hn(t),l&512&&(ye||s===null||ti(s,s.return)),s!==null&&l&4&&Lh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(cn(n,t),hn(t),l&512&&(ye||s===null||ti(s,s.return)),t.flags&32){c=t.stateNode;try{vn(c,"")}catch(Q){te(t,t.return,Q)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,Lh(t,c,s!==null?s.memoizedProps:c)),l&1024&&(qh=!0);break;case 6:if(cn(n,t),hn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(Q){te(t,t.return,Q)}}break;case 3:if(xu=null,c=Ln,Ln=bu(n.containerInfo),cn(n,t),Ln=c,hn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Hl(n.containerInfo)}catch(Q){te(t,t.return,Q)}qh&&(qh=!1,Jp(t));break;case 4:l=Ln,Ln=bu(t.stateNode.containerInfo),cn(n,t),hn(t),Ln=l;break;case 12:cn(n,t),hn(t);break;case 13:cn(n,t),hn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Xh=en()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Hh(t,l)));break;case 22:c=t.memoizedState!==null;var N=s!==null&&s.memoizedState!==null,H=Ni,$=ye;if(Ni=H||c,ye=$||N,cn(n,t),ye=$,Ni=H,hn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(s===null||N||Ni||ye||dr(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){N=s=n;try{if(f=N.stateNode,c)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=N.stateNode;var it=N.memoizedProps.style,F=it!=null&&it.hasOwnProperty("display")?it.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Q){te(N,N.return,Q)}}}else if(n.tag===6){if(s===null){N=n;try{N.stateNode.nodeValue=c?"":N.memoizedProps}catch(Q){te(N,N.return,Q)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Hh(t,s))));break;case 19:cn(n,t),hn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Hh(t,l)));break;case 30:break;case 21:break;default:cn(n,t),hn(t)}}function hn(t){var n=t.flags;if(n&2){try{for(var s,l=t.return;l!==null;){if(Gp(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var c=s.stateNode,f=zh(t);cu(t,f,c);break;case 5:var y=s.stateNode;s.flags&32&&(vn(y,""),s.flags&=-33);var T=zh(t);cu(t,T,y);break;case 3:case 4:var N=s.stateNode.containerInfo,H=zh(t);Bh(t,H,N);break;default:throw Error(a(161))}}catch($){te(t,t.return,$)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Jp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Jp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function os(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Yp(t,n.alternate,n),n=n.sibling}function dr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ls(4,n,n.return),dr(n);break;case 1:ti(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&qp(n,n.return,s),dr(n);break;case 27:jl(n.stateNode);case 26:case 5:ti(n,n.return),dr(n);break;case 22:n.memoizedState===null&&dr(n);break;case 30:dr(n);break;default:dr(n)}t=t.sibling}}function us(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:us(c,f,s),xl(4,f);break;case 1:if(us(c,f,s),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(H){te(l,l.return,H)}if(l=f,c=l.updateQueue,c!==null){var T=l.stateNode;try{var N=c.shared.hiddenCallbacks;if(N!==null)for(c.shared.hiddenCallbacks=null,c=0;c<N.length;c++)wm(N[c],T)}catch(H){te(l,l.return,H)}}s&&y&64&&Bp(f),Rl(f,f.return);break;case 27:Fp(f);case 26:case 5:us(c,f,s),s&&l===null&&y&4&&Hp(f),Rl(f,f.return);break;case 12:us(c,f,s);break;case 13:us(c,f,s),s&&y&4&&Zp(c,f);break;case 22:f.memoizedState===null&&us(c,f,s),Rl(f,f.return);break;case 30:break;default:us(c,f,s)}n=n.sibling}}function Gh(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&hl(s))}function Fh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&hl(t))}function ei(t,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Wp(t,n,s,l),n=n.sibling}function Wp(t,n,s,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ei(t,n,s,l),c&2048&&xl(9,n);break;case 1:ei(t,n,s,l);break;case 3:ei(t,n,s,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&hl(t)));break;case 12:if(c&2048){ei(t,n,s,l),t=n.stateNode;try{var f=n.memoizedProps,y=f.id,T=f.onPostCommit;typeof T=="function"&&T(y,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){te(n,n.return,N)}}else ei(t,n,s,l);break;case 13:ei(t,n,s,l);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?ei(t,n,s,l):wl(t,n):f._visibility&2?ei(t,n,s,l):(f._visibility|=2,aa(t,n,s,l,(n.subtreeFlags&10256)!==0)),c&2048&&Gh(y,n);break;case 24:ei(t,n,s,l),c&2048&&Fh(n.alternate,n);break;default:ei(t,n,s,l)}}function aa(t,n,s,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,y=n,T=s,N=l,H=y.flags;switch(y.tag){case 0:case 11:case 15:aa(f,y,T,N,c),xl(8,y);break;case 23:break;case 22:var $=y.stateNode;y.memoizedState!==null?$._visibility&2?aa(f,y,T,N,c):wl(f,y):($._visibility|=2,aa(f,y,T,N,c)),c&&H&2048&&Gh(y.alternate,y);break;case 24:aa(f,y,T,N,c),c&&H&2048&&Fh(y.alternate,y);break;default:aa(f,y,T,N,c)}n=n.sibling}}function wl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,l=n,c=l.flags;switch(l.tag){case 22:wl(s,l),c&2048&&Gh(l.alternate,l);break;case 24:wl(s,l),c&2048&&Fh(l.alternate,l);break;default:wl(s,l)}n=n.sibling}}var Cl=8192;function la(t){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)tg(t),t=t.sibling}function tg(t){switch(t.tag){case 26:la(t),t.flags&Cl&&t.memoizedState!==null&&n1(Ln,t.memoizedState,t.memoizedProps);break;case 5:la(t);break;case 3:case 4:var n=Ln;Ln=bu(t.stateNode.containerInfo),la(t),Ln=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Cl,Cl=16777216,la(t),Cl=n):la(t));break;default:la(t)}}function eg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Dl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Me=l,ig(l,t)}eg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ng(t),t=t.sibling}function ng(t){switch(t.tag){case 0:case 11:case 15:Dl(t),t.flags&2048&&ls(9,t,t.return);break;case 3:Dl(t);break;case 12:Dl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,hu(t)):Dl(t);break;default:Dl(t)}}function hu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Me=l,ig(l,t)}eg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ls(8,n,n.return),hu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,hu(n));break;default:hu(n)}t=t.sibling}}function ig(t,n){for(;Me!==null;){var s=Me;switch(s.tag){case 0:case 11:case 15:ls(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Me=l;else t:for(s=t;Me!==null;){l=Me;var c=l.sibling,f=l.return;if(Kp(l),l===s){Me=null;break t}if(c!==null){c.return=f,Me=c;break t}Me=f}}}var _E={getCacheForType:function(t){var n=Fe(xe),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},vE=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ne=null,Pt=null,Bt=0,Xt=0,fn=null,cs=!1,oa=!1,Qh=!1,Vi=0,he=0,hs=0,mr=0,Yh=0,Rn=0,ua=0,Nl=null,rn=null,Kh=!1,Xh=0,fu=1/0,du=null,fs=null,ke=0,ds=null,ca=null,ha=0,Zh=0,$h=null,sg=null,Il=0,Jh=null;function dn(){if((Kt&2)!==0&&Bt!==0)return Bt&-Bt;if(P.T!==null){var t=Jr;return t!==0?t:af()}return mi()}function rg(){Rn===0&&(Rn=(Bt&536870912)===0||Ft?Ba():536870912);var t=xn.current;return t!==null&&(t.flags|=32),Rn}function mn(t,n,s){(t===ne&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)&&(fa(t,0),ms(t,Bt,Rn,!1)),fe(t,s),((Kt&2)===0||t!==ne)&&(t===ne&&((Kt&2)===0&&(mr|=s),he===4&&ms(t,Bt,Rn,!1)),ni(t))}function ag(t,n,s){if((Kt&6)!==0)throw Error(a(327));var l=!s&&(n&124)===0&&(n&t.expiredLanes)===0||zi(t,n),c=l?AE(t,n):ef(t,n,!0),f=l;do{if(c===0){oa&&!l&&ms(t,n,0,!1);break}else{if(s=t.current.alternate,f&&!EE(s)){c=ef(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;t:{var T=t;c=Nl;var N=T.current.memoizedState.isDehydrated;if(N&&(fa(T,y).flags|=256),y=ef(T,y,!1),y!==2){if(Qh&&!N){T.errorRecoveryDisabledLanes|=f,mr|=f,c=4;break t}f=rn,rn=c,f!==null&&(rn===null?rn=f:rn.push.apply(rn,f))}c=y}if(f=!1,c!==2)continue}}if(c===1){fa(t,0),ms(t,n,0,!0);break}t:{switch(l=t,f=c,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:ms(l,n,Rn,!cs);break t;case 2:rn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=Xh+300-en(),10<c)){if(ms(l,n,Rn,!cs),yn(l,0,!0)!==0)break t;l.timeoutHandle=jg(lg.bind(null,l,s,rn,du,Kh,n,Rn,mr,ua,cs,f,2,-0,0),c);break t}lg(l,s,rn,du,Kh,n,Rn,mr,ua,cs,f,0,-0,0)}}break}while(!0);ni(t)}function lg(t,n,s,l,c,f,y,T,N,H,$,it,F,Q){if(t.timeoutHandle=-1,it=n.subtreeFlags,(it&8192||(it&16785408)===16785408)&&(kl={stylesheets:null,count:0,unsuspend:e1},tg(n),it=i1(),it!==null)){t.cancelPendingCommit=it(mg.bind(null,t,n,f,s,l,c,y,T,N,$,1,F,Q)),ms(t,f,y,!H);return}mg(t,n,f,s,l,c,y,T,N)}function EE(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],f=c.getSnapshot;c=c.value;try{if(!on(f(),c))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ms(t,n,s,l){n&=~Yh,n&=~mr,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-Ze(c),y=1<<f;l[f]=-1,c&=~y}s!==0&&qi(t,s,n)}function mu(){return(Kt&6)===0?(Vl(0),!1):!0}function Wh(){if(Pt!==null){if(Xt===0)var t=Pt.return;else t=Pt,Si=or=null,gh(t),sa=null,Al=0,t=Pt;for(;t!==null;)zp(t.alternate,t),t=t.return;Pt=null}}function fa(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,kE(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Wh(),ne=t,Pt=s=Ti(t.current,null),Bt=n,Xt=0,fn=null,cs=!1,oa=zi(t,n),Qh=!1,ua=Rn=Yh=mr=hs=he=0,rn=Nl=null,Kh=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-Ze(l),f=1<<c;n|=t[c],l&=~f}return Vi=n,Uo(),s}function og(t,n){jt=null,P.H=eu,n===dl||n===Fo?(n=xm(),Xt=3):n===Am?(n=xm(),Xt=4):Xt=n===Rp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,fn=n,Pt===null&&(he=1,au(t,Tn(n,t.current)))}function ug(){var t=P.H;return P.H=eu,t===null?eu:t}function cg(){var t=P.A;return P.A=_E,t}function tf(){he=4,cs||(Bt&4194048)!==Bt&&xn.current!==null||(oa=!0),(hs&134217727)===0&&(mr&134217727)===0||ne===null||ms(ne,Bt,Rn,!1)}function ef(t,n,s){var l=Kt;Kt|=2;var c=ug(),f=cg();(ne!==t||Bt!==n)&&(du=null,fa(t,n)),n=!1;var y=he;t:do try{if(Xt!==0&&Pt!==null){var T=Pt,N=fn;switch(Xt){case 8:Wh(),y=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(n=!0);var H=Xt;if(Xt=0,fn=null,da(t,T,N,H),s&&oa){y=0;break t}break;default:H=Xt,Xt=0,fn=null,da(t,T,N,H)}}TE(),y=he;break}catch($){og(t,$)}while(!0);return n&&t.shellSuspendCounter++,Si=or=null,Kt=l,P.H=c,P.A=f,Pt===null&&(ne=null,Bt=0,Uo()),y}function TE(){for(;Pt!==null;)hg(Pt)}function AE(t,n){var s=Kt;Kt|=2;var l=ug(),c=cg();ne!==t||Bt!==n?(du=null,fu=en()+500,fa(t,n)):oa=zi(t,n);t:do try{if(Xt!==0&&Pt!==null){n=Pt;var f=fn;e:switch(Xt){case 1:Xt=0,fn=null,da(t,n,f,1);break;case 2:case 9:if(bm(f)){Xt=0,fn=null,fg(n);break}n=function(){Xt!==2&&Xt!==9||ne!==t||(Xt=7),ni(t)},f.then(n,n);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:bm(f)?(Xt=0,fn=null,fg(n)):(Xt=0,fn=null,da(t,n,f,7));break;case 5:var y=null;switch(Pt.tag){case 26:y=Pt.memoizedState;case 5:case 27:var T=Pt;if(!y||Yg(y)){Xt=0,fn=null;var N=T.sibling;if(N!==null)Pt=N;else{var H=T.return;H!==null?(Pt=H,pu(H)):Pt=null}break e}}Xt=0,fn=null,da(t,n,f,5);break;case 6:Xt=0,fn=null,da(t,n,f,6);break;case 8:Wh(),he=6;break t;default:throw Error(a(462))}}bE();break}catch($){og(t,$)}while(!0);return Si=or=null,P.H=l,P.A=c,Kt=s,Pt!==null?0:(ne=null,Bt=0,Uo(),he)}function bE(){for(;Pt!==null&&!Dc();)hg(Pt)}function hg(t){var n=kp(t.alternate,t,Vi);t.memoizedProps=t.pendingProps,n===null?pu(t):Pt=n}function fg(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=Vp(s,n,n.pendingProps,n.type,void 0,Bt);break;case 11:n=Vp(s,n,n.pendingProps,n.type.render,n.ref,Bt);break;case 5:gh(n);default:zp(s,n),n=Pt=dm(n,Vi),n=kp(s,n,Vi)}t.memoizedProps=t.pendingProps,n===null?pu(t):Pt=n}function da(t,n,s,l){Si=or=null,gh(n),sa=null,Al=0;var c=n.return;try{if(fE(t,c,n,s,Bt)){he=1,au(t,Tn(s,t.current)),Pt=null;return}}catch(f){if(c!==null)throw Pt=c,f;he=1,au(t,Tn(s,t.current)),Pt=null;return}n.flags&32768?(Ft||l===1?t=!0:oa||(Bt&536870912)!==0?t=!1:(cs=t=!0,(l===2||l===9||l===3||l===6)&&(l=xn.current,l!==null&&l.tag===13&&(l.flags|=16384))),dg(n,t)):pu(n)}function pu(t){var n=t;do{if((n.flags&32768)!==0){dg(n,cs);return}t=n.return;var s=mE(n.alternate,n,Vi);if(s!==null){Pt=s;return}if(n=n.sibling,n!==null){Pt=n;return}Pt=n=t}while(n!==null);he===0&&(he=5)}function dg(t,n){do{var s=pE(t.alternate,t);if(s!==null){s.flags&=32767,Pt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){Pt=t;return}Pt=t=s}while(t!==null);he=6,Pt=null}function mg(t,n,s,l,c,f,y,T,N){t.cancelPendingCommit=null;do gu();while(ke!==0);if((Kt&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=Fc,vo(t,s,f,y,T,N),t===ne&&(Pt=ne=null,Bt=0),ca=n,ds=t,ha=s,Zh=f,$h=c,sg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,wE(di,function(){return vg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,c=X.p,X.p=2,y=Kt,Kt|=4;try{gE(t,n,s)}finally{Kt=y,X.p=c,P.T=l}}ke=1,pg(),gg(),yg()}}function pg(){if(ke===1){ke=0;var t=ds,n=ca,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=P.T,P.T=null;var l=X.p;X.p=2;var c=Kt;Kt|=4;try{$p(n,t);var f=mf,y=im(t.containerInfo),T=f.focusedElem,N=f.selectionRange;if(y!==T&&T&&T.ownerDocument&&nm(T.ownerDocument.documentElement,T)){if(N!==null&&zc(T)){var H=N.start,$=N.end;if($===void 0&&($=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min($,T.value.length);else{var it=T.ownerDocument||document,F=it&&it.defaultView||window;if(F.getSelection){var Q=F.getSelection(),Ct=T.textContent.length,bt=Math.min(N.start,Ct),Wt=N.end===void 0?bt:Math.min(N.end,Ct);!Q.extend&&bt>Wt&&(y=Wt,Wt=bt,bt=y);var k=em(T,bt),U=em(T,Wt);if(k&&U&&(Q.rangeCount!==1||Q.anchorNode!==k.node||Q.anchorOffset!==k.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var B=it.createRange();B.setStart(k.node,k.offset),Q.removeAllRanges(),bt>Wt?(Q.addRange(B),Q.extend(U.node,U.offset)):(B.setEnd(U.node,U.offset),Q.addRange(B))}}}}for(it=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&it.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<it.length;T++){var W=it[T];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Cu=!!df,mf=df=null}finally{Kt=c,X.p=l,P.T=s}}t.current=n,ke=2}}function gg(){if(ke===2){ke=0;var t=ds,n=ca,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=P.T,P.T=null;var l=X.p;X.p=2;var c=Kt;Kt|=4;try{Yp(t,n.alternate,n)}finally{Kt=c,X.p=l,P.T=s}}ke=3}}function yg(){if(ke===4||ke===3){ke=0,La();var t=ds,n=ca,s=ha,l=sg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ke=5:(ke=0,ca=ds=null,_g(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(fs=null),Ha(s),n=n.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(ki,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=P.T,c=X.p,X.p=2,P.T=null;try{for(var f=t.onRecoverableError,y=0;y<l.length;y++){var T=l[y];f(T.value,{componentStack:T.stack})}}finally{P.T=n,X.p=c}}(ha&3)!==0&&gu(),ni(t),c=t.pendingLanes,(s&4194090)!==0&&(c&42)!==0?t===Jh?Il++:(Il=0,Jh=t):Il=0,Vl(0)}}function _g(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,hl(n)))}function gu(t){return pg(),gg(),yg(),vg()}function vg(){if(ke!==5)return!1;var t=ds,n=Zh;Zh=0;var s=Ha(ha),l=P.T,c=X.p;try{X.p=32>s?32:s,P.T=null,s=$h,$h=null;var f=ds,y=ha;if(ke=0,ca=ds=null,ha=0,(Kt&6)!==0)throw Error(a(331));var T=Kt;if(Kt|=4,ng(f.current),Wp(f,f.current,y,s),Kt=T,Vl(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(ki,f)}catch{}return!0}finally{X.p=c,P.T=l,_g(t,n)}}function Eg(t,n,s){n=Tn(s,n),n=Nh(t.stateNode,n,2),t=is(t,n,2),t!==null&&(fe(t,2),ni(t))}function te(t,n,s){if(t.tag===3)Eg(t,t,s);else for(;n!==null;){if(n.tag===3){Eg(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(fs===null||!fs.has(l))){t=Tn(s,t),s=Sp(2),l=is(n,s,2),l!==null&&(xp(s,l,n,t),fe(l,2),ni(l));break}}n=n.return}}function nf(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new vE;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(Qh=!0,c.add(s),t=SE.bind(null,t,n,s),n.then(t,t))}function SE(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,ne===t&&(Bt&s)===s&&(he===4||he===3&&(Bt&62914560)===Bt&&300>en()-Xh?(Kt&2)===0&&fa(t,0):Yh|=s,ua===Bt&&(ua=0)),ni(t)}function Tg(t,n){n===0&&(n=Bi()),t=Kr(t,n),t!==null&&(fe(t,n),ni(t))}function xE(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Tg(t,s)}function RE(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),Tg(t,s)}function wE(t,n){return Ms(t,n)}var yu=null,ma=null,sf=!1,_u=!1,rf=!1,pr=0;function ni(t){t!==ma&&t.next===null&&(ma===null?yu=ma=t:ma=ma.next=t),_u=!0,sf||(sf=!0,DE())}function Vl(t,n){if(!rf&&_u){rf=!0;do for(var s=!1,l=yu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var y=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ze(42|t)+1)-1,f&=c&~(y&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,xg(l,f))}else f=Bt,f=yn(l,l===ne?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||zi(l,f)||(s=!0,xg(l,f));l=l.next}while(s);rf=!1}}function CE(){Ag()}function Ag(){_u=sf=!1;var t=0;pr!==0&&(PE()&&(t=pr),pr=0);for(var n=en(),s=null,l=yu;l!==null;){var c=l.next,f=bg(l,n);f===0?(l.next=null,s===null?yu=c:s.next=c,c===null&&(ma=s)):(s=l,(t!==0||(f&3)!==0)&&(_u=!0)),l=c}Vl(t)}function bg(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var y=31-Ze(f),T=1<<y,N=c[y];N===-1?((T&s)===0||(T&l)!==0)&&(c[y]=Ir(T,n)):N<=n&&(t.expiredLanes|=T),f&=~T}if(n=ne,s=Bt,s=yn(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===n&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Nr(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||zi(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(l!==null&&Nr(l),Ha(s)){case 2:case 8:s=Ne;break;case 32:s=di;break;case 268435456:s=za;break;default:s=di}return l=Sg.bind(null,t),s=Ms(s,l),t.callbackPriority=n,t.callbackNode=s,n}return l!==null&&l!==null&&Nr(l),t.callbackPriority=2,t.callbackNode=null,2}function Sg(t,n){if(ke!==0&&ke!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(gu()&&t.callbackNode!==s)return null;var l=Bt;return l=yn(t,t===ne?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ag(t,l,n),bg(t,en()),t.callbackNode!=null&&t.callbackNode===s?Sg.bind(null,t):null)}function xg(t,n){if(gu())return null;ag(t,n,!0)}function DE(){LE(function(){(Kt&6)!==0?Ms(be,CE):Ag()})}function af(){return pr===0&&(pr=Ba()),pr}function Rg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:On(""+t)}function wg(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function NE(t,n,s,l,c){if(n==="submit"&&s&&s.stateNode===c){var f=Rg((c[Ue]||null).action),y=l.submitter;y&&(n=(n=y[Ue]||null)?Rg(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var T=new Ks("action","action",null,l,c);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(pr!==0){var N=y?wg(c,y):new FormData(c);xh(s,{pending:!0,data:N,method:c.method,action:f},null,N)}}else typeof f=="function"&&(T.preventDefault(),N=y?wg(c,y):new FormData(c),xh(s,{pending:!0,data:N,method:c.method,action:f},f,N))},currentTarget:c}]})}}for(var lf=0;lf<Gc.length;lf++){var of=Gc[lf],IE=of.toLowerCase(),VE=of[0].toUpperCase()+of.slice(1);kn(IE,"on"+VE)}kn(am,"onAnimationEnd"),kn(lm,"onAnimationIteration"),kn(om,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(X0,"onTransitionRun"),kn(Z0,"onTransitionStart"),kn($0,"onTransitionCancel"),kn(um,"onTransitionEnd"),Kn("onMouseEnter",["mouseout","mouseover"]),Kn("onMouseLeave",["mouseout","mouseover"]),Kn("onPointerEnter",["pointerout","pointerover"]),Kn("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ME=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function Cg(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],c=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var y=l.length-1;0<=y;y--){var T=l[y],N=T.instance,H=T.currentTarget;if(T=T.listener,N!==f&&c.isPropagationStopped())break t;f=T,c.currentTarget=H;try{f(c)}catch($){ru($)}c.currentTarget=null,f=N}else for(y=0;y<l.length;y++){if(T=l[y],N=T.instance,H=T.currentTarget,T=T.listener,N!==f&&c.isPropagationStopped())break t;f=T,c.currentTarget=H;try{f(c)}catch($){ru($)}c.currentTarget=null,f=N}}}}function kt(t,n){var s=n[js];s===void 0&&(s=n[js]=new Set);var l=t+"__bubble";s.has(l)||(Dg(n,t,2,!1),s.add(l))}function uf(t,n,s){var l=0;n&&(l|=4),Dg(s,t,l,n)}var vu="_reactListening"+Math.random().toString(36).slice(2);function cf(t){if(!t[vu]){t[vu]=!0,Eo.forEach(function(s){s!=="selectionchange"&&(ME.has(s)||uf(s,!1,t),uf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[vu]||(n[vu]=!0,uf("selectionchange",!1,n))}}function Dg(t,n,s,l){switch(Wg(n)){case 2:var c=a1;break;case 8:c=l1;break;default:c=Sf}s=c.bind(null,n,s,t),c=void 0,!vi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function hf(t,n,s,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var T=l.stateNode.containerInfo;if(T===c)break;if(y===4)for(y=l.return;y!==null;){var N=y.tag;if((N===3||N===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;T!==null;){if(y=Fn(T),y===null)return;if(N=y.tag,N===5||N===6||N===26||N===27){l=f=y;continue t}T=T.parentNode}}l=l.return}Fs(function(){var H=f,$=Za(s),it=[];t:{var F=cm.get(t);if(F!==void 0){var Q=Ks,Ct=t;switch(t){case"keypress":if(Qs(s)===0)break t;case"keydown":case"keyup":Q=Gr;break;case"focusin":Ct="focus",Q=Br;break;case"focusout":Ct="blur",Q=Br;break;case"beforeblur":case"afterblur":Q=Br;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Wi;break;case am:case lm:case om:Q=Ja;break;case um:Q=m;break;case"scroll":case"scrollend":Q=Zs;break;case"wheel":Q=S;break;case"copy":case"cut":case"paste":Q=Do;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=el;break;case"toggle":case"beforetoggle":Q=Y}var bt=(n&4)!==0,Wt=!bt&&(t==="scroll"||t==="scrollend"),k=bt?F!==null?F+"Capture":null:F;bt=[];for(var U=H,B;U!==null;){var W=U;if(B=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||B===null||k===null||(W=$i(U,k),W!=null&&bt.push(Ol(U,W,B))),Wt)break;U=U.return}0<bt.length&&(F=new Q(F,Ct,null,s,$),it.push({event:F,listeners:bt}))}}if((n&7)===0){t:{if(F=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",F&&s!==Xa&&(Ct=s.relatedTarget||s.fromElement)&&(Fn(Ct)||Ct[pi]))break t;if((Q||F)&&(F=$.window===$?$:(F=$.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(Ct=s.relatedTarget||s.toElement,Q=H,Ct=Ct?Fn(Ct):null,Ct!==null&&(Wt=h(Ct),bt=Ct.tag,Ct!==Wt||bt!==5&&bt!==27&&bt!==6)&&(Ct=null)):(Q=null,Ct=H),Q!==Ct)){if(bt=Ws,W="onMouseLeave",k="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(bt=el,W="onPointerLeave",k="onPointerEnter",U="pointer"),Wt=Q==null?F:Fi(Q),B=Ct==null?F:Fi(Ct),F=new bt(W,U+"leave",Q,s,$),F.target=Wt,F.relatedTarget=B,W=null,Fn($)===H&&(bt=new bt(k,U+"enter",Ct,s,$),bt.target=B,bt.relatedTarget=Wt,W=bt),Wt=W,Q&&Ct)e:{for(bt=Q,k=Ct,U=0,B=bt;B;B=pa(B))U++;for(B=0,W=k;W;W=pa(W))B++;for(;0<U-B;)bt=pa(bt),U--;for(;0<B-U;)k=pa(k),B--;for(;U--;){if(bt===k||k!==null&&bt===k.alternate)break e;bt=pa(bt),k=pa(k)}bt=null}else bt=null;Q!==null&&Ng(it,F,Q,bt,!1),Ct!==null&&Wt!==null&&Ng(it,Wt,Ct,bt,!0)}}t:{if(F=H?Fi(H):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var gt=Xd;else if(Yd(F))if(Zd)gt=Q0;else{gt=G0;var Ut=H0}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&kr(H.elementType)&&(gt=Xd):gt=F0;if(gt&&(gt=gt(t,H))){Kd(it,gt,s,$);break t}Ut&&Ut(t,F,H),t==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Qa(F,"number",F.value)}switch(Ut=H?Fi(H):window,t){case"focusin":(Yd(Ut)||Ut.contentEditable==="true")&&(Fr=Ut,Bc=H,al=null);break;case"focusout":al=Bc=Fr=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,sm(it,s,$);break;case"selectionchange":if(K0)break;case"keydown":case"keyup":sm(it,s,$)}var vt;if(It)t:{switch(t){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else Pn?jn(t,s)&&(xt="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(xt="onCompositionStart");xt&&(pe&&s.locale!=="ko"&&(Pn||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Pn&&(vt=Ro()):(En=$,ee="value"in En?En.value:En.textContent,Pn=!0)),Ut=Eu(H,xt),0<Ut.length&&(xt=new tl(xt,t,null,s,$),it.push({event:xt,listeners:Ut}),vt?xt.data=vt:(vt=Un(s),vt!==null&&(xt.data=vt)))),(vt=Yt?nl(t,s):z0(t,s))&&(xt=Eu(H,"onBeforeInput"),0<xt.length&&(Ut=new tl("onBeforeInput","beforeinput",null,s,$),it.push({event:Ut,listeners:xt}),Ut.data=vt)),NE(it,t,H,s,$)}Cg(it,n)})}function Ol(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Eu(t,n){for(var s=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=$i(t,s),c!=null&&l.unshift(Ol(t,c,f)),c=$i(t,n),c!=null&&l.push(Ol(t,c,f))),t.tag===3)return l;t=t.return}return[]}function pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ng(t,n,s,l,c){for(var f=n._reactName,y=[];s!==null&&s!==l;){var T=s,N=T.alternate,H=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||H===null||(N=H,c?(H=$i(s,f),H!=null&&y.unshift(Ol(s,H,N))):c||(H=$i(s,f),H!=null&&y.push(Ol(s,H,N)))),s=s.return}y.length!==0&&t.push({event:n,listeners:y})}var OE=/\r\n?/g,jE=/\u0000|\uFFFD/g;function Ig(t){return(typeof t=="string"?t:""+t).replace(OE,`
`).replace(jE,"")}function Vg(t,n){return n=Ig(n),Ig(t)===n}function Tu(){}function Jt(t,n,s,l,c,f){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||vn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&vn(t,""+l);break;case"className":zs(t,"class",l);break;case"tabIndex":zs(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zs(t,s,l);break;case"style":Ka(t,l,f);break;case"data":if(n!=="object"){zs(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=On(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(n!=="input"&&Jt(t,n,"name",c.name,c,null),Jt(t,n,"formEncType",c.formEncType,c,null),Jt(t,n,"formMethod",c.formMethod,c,null),Jt(t,n,"formTarget",c.formTarget,c,null)):(Jt(t,n,"encType",c.encType,c,null),Jt(t,n,"method",c.method,c,null),Jt(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=On(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Tu);break;case"onScroll":l!=null&&kt("scroll",t);break;case"onScrollEnd":l!=null&&kt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=On(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":kt("beforetoggle",t),kt("toggle",t),Ls(t,"popover",l);break;case"xlinkActuate":_n(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":_n(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":_n(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":_n(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":_n(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":_n(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":_n(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":_n(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":_n(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ls(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=bo.get(s)||s,Ls(t,s,l))}}function ff(t,n,s,l,c,f){switch(s){case"style":Ka(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?vn(t,l):(typeof l=="number"||typeof l=="bigint")&&vn(t,""+l);break;case"onScroll":l!=null&&kt("scroll",t);break;case"onScrollEnd":l!=null&&kt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ps.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),n=s.slice(2,c?s.length-7:void 0),f=t[Ue]||null,f=f!=null?f[s]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,l,c);break t}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Ls(t,s,l)}}}function Le(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",t),kt("load",t);var l=!1,c=!1,f;for(f in s)if(s.hasOwnProperty(f)){var y=s[f];if(y!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Jt(t,n,f,y,s,null)}}c&&Jt(t,n,"srcSet",s.srcSet,s,null),l&&Jt(t,n,"src",s.src,s,null);return;case"input":kt("invalid",t);var T=f=y=c=null,N=null,H=null;for(l in s)if(s.hasOwnProperty(l)){var $=s[l];if($!=null)switch(l){case"name":c=$;break;case"type":y=$;break;case"checked":N=$;break;case"defaultChecked":H=$;break;case"value":f=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,n));break;default:Jt(t,n,l,$,s,null)}}Fa(t,f,T,N,H,y,c,!1),Ki(t);return;case"select":kt("invalid",t),l=y=f=null;for(c in s)if(s.hasOwnProperty(c)&&(T=s[c],T!=null))switch(c){case"value":f=T;break;case"defaultValue":y=T;break;case"multiple":l=T;default:Jt(t,n,c,T,s,null)}n=f,s=y,t.multiple=!!l,n!=null?Xi(t,!!l,n,!1):s!=null&&Xi(t,!!l,s,!0);return;case"textarea":kt("invalid",t),f=c=l=null;for(y in s)if(s.hasOwnProperty(y)&&(T=s[y],T!=null))switch(y){case"value":l=T;break;case"defaultValue":c=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Jt(t,n,y,T,s,null)}Ao(t,l,c,f),Ki(t);return;case"option":for(N in s)if(s.hasOwnProperty(N)&&(l=s[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Jt(t,n,N,l,s,null)}return;case"dialog":kt("beforetoggle",t),kt("toggle",t),kt("cancel",t),kt("close",t);break;case"iframe":case"object":kt("load",t);break;case"video":case"audio":for(l=0;l<Ml.length;l++)kt(Ml[l],t);break;case"image":kt("error",t),kt("load",t);break;case"details":kt("toggle",t);break;case"embed":case"source":case"link":kt("error",t),kt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in s)if(s.hasOwnProperty(H)&&(l=s[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Jt(t,n,H,l,s,null)}return;default:if(kr(n)){for($ in s)s.hasOwnProperty($)&&(l=s[$],l!==void 0&&ff(t,n,$,l,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(l=s[T],l!=null&&Jt(t,n,T,l,s,null))}function UE(t,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,y=null,T=null,N=null,H=null,$=null;for(Q in s){var it=s[Q];if(s.hasOwnProperty(Q)&&it!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":N=it;default:l.hasOwnProperty(Q)||Jt(t,n,Q,null,l,it)}}for(var F in l){var Q=l[F];if(it=s[F],l.hasOwnProperty(F)&&(Q!=null||it!=null))switch(F){case"type":f=Q;break;case"name":c=Q;break;case"checked":H=Q;break;case"defaultChecked":$=Q;break;case"value":y=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,n));break;default:Q!==it&&Jt(t,n,F,Q,l,it)}}Ga(t,y,T,N,H,$,f,c);return;case"select":Q=y=T=F=null;for(f in s)if(N=s[f],s.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":Q=N;default:l.hasOwnProperty(f)||Jt(t,n,f,null,l,N)}for(c in l)if(f=l[c],N=s[c],l.hasOwnProperty(c)&&(f!=null||N!=null))switch(c){case"value":F=f;break;case"defaultValue":T=f;break;case"multiple":y=f;default:f!==N&&Jt(t,n,c,f,l,N)}n=T,s=y,l=Q,F!=null?Xi(t,!!s,F,!1):!!l!=!!s&&(n!=null?Xi(t,!!s,n,!0):Xi(t,!!s,s?[]:"",!1));return;case"textarea":Q=F=null;for(T in s)if(c=s[T],s.hasOwnProperty(T)&&c!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Jt(t,n,T,null,l,c)}for(y in l)if(c=l[y],f=s[y],l.hasOwnProperty(y)&&(c!=null||f!=null))switch(y){case"value":F=c;break;case"defaultValue":Q=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==f&&Jt(t,n,y,c,l,f)}To(t,F,Q);return;case"option":for(var Ct in s)if(F=s[Ct],s.hasOwnProperty(Ct)&&F!=null&&!l.hasOwnProperty(Ct))switch(Ct){case"selected":t.selected=!1;break;default:Jt(t,n,Ct,null,l,F)}for(N in l)if(F=l[N],Q=s[N],l.hasOwnProperty(N)&&F!==Q&&(F!=null||Q!=null))switch(N){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Jt(t,n,N,F,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in s)F=s[bt],s.hasOwnProperty(bt)&&F!=null&&!l.hasOwnProperty(bt)&&Jt(t,n,bt,null,l,F);for(H in l)if(F=l[H],Q=s[H],l.hasOwnProperty(H)&&F!==Q&&(F!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,n));break;default:Jt(t,n,H,F,l,Q)}return;default:if(kr(n)){for(var Wt in s)F=s[Wt],s.hasOwnProperty(Wt)&&F!==void 0&&!l.hasOwnProperty(Wt)&&ff(t,n,Wt,void 0,l,F);for($ in l)F=l[$],Q=s[$],!l.hasOwnProperty($)||F===Q||F===void 0&&Q===void 0||ff(t,n,$,F,l,Q);return}}for(var k in s)F=s[k],s.hasOwnProperty(k)&&F!=null&&!l.hasOwnProperty(k)&&Jt(t,n,k,null,l,F);for(it in l)F=l[it],Q=s[it],!l.hasOwnProperty(it)||F===Q||F==null&&Q==null||Jt(t,n,it,F,l,Q)}var df=null,mf=null;function Au(t){return t.nodeType===9?t:t.ownerDocument}function Mg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Og(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function pf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var gf=null;function PE(){var t=window.event;return t&&t.type==="popstate"?t===gf?!1:(gf=t,!0):(gf=null,!1)}var jg=typeof setTimeout=="function"?setTimeout:void 0,kE=typeof clearTimeout=="function"?clearTimeout:void 0,Ug=typeof Promise=="function"?Promise:void 0,LE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ug<"u"?function(t){return Ug.resolve(null).then(t).catch(zE)}:jg;function zE(t){setTimeout(function(){throw t})}function ps(t){return t==="head"}function Pg(t,n){var s=n,l=0,c=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(0<l&&8>l){s=l;var y=t.ownerDocument;if(s&1&&jl(y.documentElement),s&2&&jl(y.body),s&4)for(s=y.head,jl(s),y=s.firstChild;y;){var T=y.nextSibling,N=y.nodeName;y[Gi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&y.rel.toLowerCase()==="stylesheet"||s.removeChild(y),y=T}}if(c===0){t.removeChild(f),Hl(n);return}c--}else s==="$"||s==="$?"||s==="$!"?c++:l=s.charCodeAt(0)-48;else l=0;s=f}while(s);Hl(n)}function yf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":yf(s),Mr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function BE(t,n,s,l){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Gi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=zn(t.nextSibling),t===null)break}return null}function qE(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=zn(t.nextSibling),t===null))return null;return t}function _f(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function HE(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function zn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var vf=null;function kg(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function Lg(t,n,s){switch(n=Au(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function jl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Mr(t)}var wn=new Map,zg=new Set;function bu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mi=X.d;X.d={f:GE,r:FE,D:QE,C:YE,L:KE,m:XE,X:$E,S:ZE,M:JE};function GE(){var t=Mi.f(),n=mu();return t||n}function FE(t){var n=Qn(t);n!==null&&n.tag===5&&n.type==="form"?ap(n):Mi.r(t)}var ga=typeof document>"u"?null:document;function Bg(t,n,s){var l=ga;if(l&&typeof n=="string"&&n){var c=Ie(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),zg.has(c)||(zg.add(c),t={rel:t,crossOrigin:s,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),Le(n,"link",t),me(n),l.head.appendChild(n)))}}function QE(t){Mi.D(t),Bg("dns-prefetch",t,null)}function YE(t,n){Mi.C(t,n),Bg("preconnect",t,n)}function KE(t,n,s){Mi.L(t,n,s);var l=ga;if(l&&t&&n){var c='link[rel="preload"][as="'+Ie(n)+'"]';n==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Ie(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Ie(s.imageSizes)+'"]')):c+='[href="'+Ie(t)+'"]';var f=c;switch(n){case"style":f=ya(t);break;case"script":f=_a(t)}wn.has(f)||(t=A({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),wn.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Ul(f))||n==="script"&&l.querySelector(Pl(f))||(n=l.createElement("link"),Le(n,"link",t),me(n),l.head.appendChild(n)))}}function XE(t,n){Mi.m(t,n);var s=ga;if(s&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Ie(l)+'"][href="'+Ie(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=_a(t)}if(!wn.has(f)&&(t=A({rel:"modulepreload",href:t},n),wn.set(f,t),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Pl(f)))return}l=s.createElement("link"),Le(l,"link",t),me(l),s.head.appendChild(l)}}}function ZE(t,n,s){Mi.S(t,n,s);var l=ga;if(l&&t){var c=Qi(l).hoistableStyles,f=ya(t);n=n||"default";var y=c.get(f);if(!y){var T={loading:0,preload:null};if(y=l.querySelector(Ul(f)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},s),(s=wn.get(f))&&Ef(t,s);var N=y=l.createElement("link");me(N),Le(N,"link",t),N._p=new Promise(function(H,$){N.onload=H,N.onerror=$}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Su(y,n,l)}y={type:"stylesheet",instance:y,count:1,state:T},c.set(f,y)}}}function $E(t,n){Mi.X(t,n);var s=ga;if(s&&t){var l=Qi(s).hoistableScripts,c=_a(t),f=l.get(c);f||(f=s.querySelector(Pl(c)),f||(t=A({src:t,async:!0},n),(n=wn.get(c))&&Tf(t,n),f=s.createElement("script"),me(f),Le(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function JE(t,n){Mi.M(t,n);var s=ga;if(s&&t){var l=Qi(s).hoistableScripts,c=_a(t),f=l.get(c);f||(f=s.querySelector(Pl(c)),f||(t=A({src:t,async:!0,type:"module"},n),(n=wn.get(c))&&Tf(t,n),f=s.createElement("script"),me(f),Le(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function qg(t,n,s,l){var c=(c=ft.current)?bu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=ya(s.href),s=Qi(c).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=ya(s.href);var f=Qi(c).hoistableStyles,y=f.get(t);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,y),(f=c.querySelector(Ul(t)))&&!f._p&&(y.instance=f,y.state.loading=5),wn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},wn.set(t,s),f||WE(c,t,s,y.state))),n&&l===null)throw Error(a(528,""));return y}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=_a(s),s=Qi(c).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ya(t){return'href="'+Ie(t)+'"'}function Ul(t){return'link[rel="stylesheet"]['+t+"]"}function Hg(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function WE(t,n,s,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Le(n,"link",s),me(n),t.head.appendChild(n))}function _a(t){return'[src="'+Ie(t)+'"]'}function Pl(t){return"script[async]"+t}function Gg(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Ie(s.href)+'"]');if(l)return n.instance=l,me(l),l;var c=A({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),me(l),Le(l,"style",c),Su(l,s.precedence,t),n.instance=l;case"stylesheet":c=ya(s.href);var f=t.querySelector(Ul(c));if(f)return n.state.loading|=4,n.instance=f,me(f),f;l=Hg(s),(c=wn.get(c))&&Ef(l,c),f=(t.ownerDocument||t).createElement("link"),me(f);var y=f;return y._p=new Promise(function(T,N){y.onload=T,y.onerror=N}),Le(f,"link",l),n.state.loading|=4,Su(f,s.precedence,t),n.instance=f;case"script":return f=_a(s.src),(c=t.querySelector(Pl(f)))?(n.instance=c,me(c),c):(l=s,(c=wn.get(f))&&(l=A({},s),Tf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),me(c),Le(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Su(l,s.precedence,t));return n.instance}function Su(t,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,y=0;y<l.length;y++){var T=l[y];if(T.dataset.precedence===n)f=T;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Ef(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Tf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var xu=null;function Fg(t,n,s){if(xu===null){var l=new Map,c=xu=new Map;c.set(s,l)}else c=xu,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var f=s[c];if(!(f[Gi]||f[de]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=t+y;var T=l.get(y);T?T.push(f):l.set(y,[f])}}return l}function Qg(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function t1(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Yg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var kl=null;function e1(){}function n1(t,n,s){if(kl===null)throw Error(a(475));var l=kl;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=ya(s.href),f=t.querySelector(Ul(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Ru.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=f,me(f);return}f=t.ownerDocument||t,s=Hg(s),(c=wn.get(c))&&Ef(s,c),f=f.createElement("link"),me(f);var y=f;y._p=new Promise(function(T,N){y.onload=T,y.onerror=N}),Le(f,"link",s),n.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Ru.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function i1(){if(kl===null)throw Error(a(475));var t=kl;return t.stylesheets&&t.count===0&&Af(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&Af(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Ru(){if(this.count--,this.count===0){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wu=null;function Af(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wu=new Map,n.forEach(s1,t),wu=null,Ru.call(t))}function s1(t,n){if(!(n.state.loading&4)){var s=wu.get(t);if(s)var l=s.get(null);else{s=new Map,wu.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var y=c[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),l=y)}l&&s.set(null,l)}c=n.instance,y=c.getAttribute("data-precedence"),f=s.get(y)||l,f===l&&s.set(null,c),s.set(y,c),this.count++,l=Ru.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Ll={$$typeof:ot,Provider:null,Consumer:null,_currentValue:rt,_currentValue2:rt,_threadCount:0};function r1(t,n,s,l,c,f,y,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.hiddenUpdates=Vr(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Kg(t,n,s,l,c,f,y,T,N,H,$,it){return t=new r1(t,n,s,y,T,N,H,it),n=1,f===!0&&(n|=24),f=un(3,null,null,n),t.current=f,f.stateNode=t,n=nh(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:s,cache:n},ah(f),t}function Xg(t){return t?(t=Xr,t):Xr}function Zg(t,n,s,l,c,f){c=Xg(c),l.context===null?l.context=c:l.pendingContext=c,l=ns(n),l.payload={element:s},f=f===void 0?null:f,f!==null&&(l.callback=f),s=is(t,l,n),s!==null&&(mn(s,t,n),pl(s,t,n))}function $g(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function bf(t,n){$g(t,n),(t=t.alternate)&&$g(t,n)}function Jg(t){if(t.tag===13){var n=Kr(t,67108864);n!==null&&mn(n,t,67108864),bf(t,67108864)}}var Cu=!0;function a1(t,n,s,l){var c=P.T;P.T=null;var f=X.p;try{X.p=2,Sf(t,n,s,l)}finally{X.p=f,P.T=c}}function l1(t,n,s,l){var c=P.T;P.T=null;var f=X.p;try{X.p=8,Sf(t,n,s,l)}finally{X.p=f,P.T=c}}function Sf(t,n,s,l){if(Cu){var c=xf(l);if(c===null)hf(t,n,l,Du,s),ty(t,l);else if(u1(c,t,n,s,l))l.stopPropagation();else if(ty(t,l),n&4&&-1<o1.indexOf(t)){for(;c!==null;){var f=Qn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=In(f.pendingLanes);if(y!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;y;){var N=1<<31-Ze(y);T.entanglements[1]|=N,y&=~N}ni(f),(Kt&6)===0&&(fu=en()+500,Vl(0))}}break;case 13:T=Kr(f,2),T!==null&&mn(T,f,2),mu(),bf(f,2)}if(f=xf(l),f===null&&hf(t,n,l,Du,s),f===c)break;c=f}c!==null&&l.stopPropagation()}else hf(t,n,l,null,s)}}function xf(t){return t=Za(t),Rf(t)}var Du=null;function Rf(t){if(Du=null,t=Fn(t),t!==null){var n=h(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=d(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Du=t,null}function Wg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(go()){case be:return 2;case Ne:return 8;case di:case Nc:return 32;case za:return 268435456;default:return 32}default:return 32}}var wf=!1,gs=null,ys=null,_s=null,zl=new Map,Bl=new Map,vs=[],o1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ty(t,n){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(n.pointerId)}}function ql(t,n,s,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Qn(n),n!==null&&Jg(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function u1(t,n,s,l,c){switch(n){case"focusin":return gs=ql(gs,t,n,s,l,c),!0;case"dragenter":return ys=ql(ys,t,n,s,l,c),!0;case"mouseover":return _s=ql(_s,t,n,s,l,c),!0;case"pointerover":var f=c.pointerId;return zl.set(f,ql(zl.get(f)||null,t,n,s,l,c)),!0;case"gotpointercapture":return f=c.pointerId,Bl.set(f,ql(Bl.get(f)||null,t,n,s,l,c)),!0}return!1}function ey(t){var n=Fn(t.target);if(n!==null){var s=h(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){t.blockedOn=n,Mc(t.priority,function(){if(s.tag===13){var l=dn();l=qa(l);var c=Kr(s,l);c!==null&&mn(c,s,l),bf(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=xf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Xa=l,s.target.dispatchEvent(l),Xa=null}else return n=Qn(s),n!==null&&Jg(n),t.blockedOn=s,!1;n.shift()}return!0}function ny(t,n,s){Nu(t)&&s.delete(n)}function c1(){wf=!1,gs!==null&&Nu(gs)&&(gs=null),ys!==null&&Nu(ys)&&(ys=null),_s!==null&&Nu(_s)&&(_s=null),zl.forEach(ny),Bl.forEach(ny)}function Iu(t,n){t.blockedOn===n&&(t.blockedOn=null,wf||(wf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,c1)))}var Vu=null;function iy(t){Vu!==t&&(Vu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Vu===t&&(Vu=null);for(var n=0;n<t.length;n+=3){var s=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(Rf(l||s)===null)continue;break}var f=Qn(s);f!==null&&(t.splice(n,3),n-=3,xh(f,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function Hl(t){function n(N){return Iu(N,t)}gs!==null&&Iu(gs,t),ys!==null&&Iu(ys,t),_s!==null&&Iu(_s,t),zl.forEach(n),Bl.forEach(n);for(var s=0;s<vs.length;s++){var l=vs[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<vs.length&&(s=vs[0],s.blockedOn===null);)ey(s),s.blockedOn===null&&vs.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],f=s[l+1],y=c[Ue]||null;if(typeof f=="function")y||iy(s);else if(y){var T=null;if(f&&f.hasAttribute("formAction")){if(c=f,y=f[Ue]||null)T=y.formAction;else if(Rf(c)!==null)continue}else T=y.action;typeof T=="function"?s[l+1]=T:(s.splice(l,3),l-=3),iy(s)}}}function Cf(t){this._internalRoot=t}Mu.prototype.render=Cf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=dn();Zg(s,l,t,n,null,null)},Mu.prototype.unmount=Cf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Zg(t.current,2,null,t,null,null),mu(),n[pi]=null}};function Mu(t){this._internalRoot=t}Mu.prototype.unstable_scheduleHydration=function(t){if(t){var n=mi();t={blockedOn:null,target:t,priority:n};for(var s=0;s<vs.length&&n!==0&&n<vs[s].priority;s++);vs.splice(s,0,t),s===0&&ey(t)}};var sy=e.version;if(sy!=="19.1.1")throw Error(a(527,sy,"19.1.1"));X.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var h1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{ki=Ou.inject(h1),He=Ou}catch{}}return Fl.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,l="",c=Ep,f=Tp,y=Ap,T=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=Kg(t,1,!1,null,null,s,l,c,f,y,T,null),t[pi]=n.current,cf(t),new Cf(n)},Fl.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var l=!1,c="",f=Ep,y=Tp,T=Ap,N=null,H=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(N=s.unstable_transitionCallbacks),s.formState!==void 0&&(H=s.formState)),n=Kg(t,1,!0,n,s??null,l,c,f,y,T,N,H),n.context=Xg(null),s=n.current,l=dn(),l=qa(l),c=ns(l),c.callback=null,is(s,c,l),s=l,n.current.lanes=s,fe(n,s),ni(n),t[pi]=n.current,cf(t),new Mu(n)},Fl.version="19.1.1",Fl}var my;function T1(){if(my)return If.exports;my=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),If.exports=E1(),If.exports}var A1=T1();const b1="modulepreload",S1=function(r){return"/CRM_VER.4/"+r},py={},x1=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let v=function(A){return Promise.all(A.map(w=>Promise.resolve(w).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};var d=v;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),_=p?.nonce||p?.getAttribute("nonce");o=v(i.map(A=>{if(A=S1(A),A in py)return;py[A]=!0;const w=A.endsWith(".css"),D=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${D}`))return;const G=document.createElement("link");if(G.rel=w?"stylesheet":b1,w||(G.as="script"),G.crossOrigin="",G.href=A,_&&G.setAttribute("nonce",_),document.head.appendChild(G),w)return new Promise((Z,lt)=>{G.addEventListener("load",Z),G.addEventListener("error",()=>lt(new Error(`Unable to preload CSS for ${A}`)))})}))}function h(p){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=p,window.dispatchEvent(_),!_.defaultPrevented)throw p}return o.then(p=>{for(const _ of p||[])_.status==="rejected"&&h(_.reason);return e().catch(h)})},gy=["네이버광고","블로그","워킹","지인소개","기존고객","기타"],yy=["매매","월세","전세","상가","사무실","지식산업센터","아파트"],R1=["신규","진행중","장기관리고객","보류"],M_=["매물제안예정","매물제안중","미팅예정","접수후대기중"],va=["확인전","확인중","볼수있음","오늘못봄","계약됨"],w1=({activeFilter:r,onFilterChange:e,customers:i,meetings:a,activities:o,isMobileOpen:h,onMobileClose:d})=>{const[p,_]=Dt.useState(!1),v=D=>{const G=new Date;return G.setHours(0,0,0,0),D==="전체"?i.length:D==="집중고객"?i.filter(Z=>Z.isFavorite).length:D==="장기관리고객"?i.filter(Z=>Z.status==="장기관리고객").length:D==="오늘미팅"?i.filter(Z=>a.filter(z=>z.customerId===Z.id).some(z=>{const nt=new Date(z.date);return nt.setHours(0,0,0,0),nt.getTime()===G.getTime()})).length:D==="미팅일확정"?i.filter(Z=>a.filter(z=>z.customerId===Z.id).some(z=>{const nt=new Date(z.date);return nt.setHours(0,0,0,0),nt>G})).length:D==="오늘연락"?i.filter(Z=>o.filter(z=>z.customerId===Z.id).some(z=>{const nt=new Date(z.date);return nt.setHours(0,0,0,0),nt.getTime()===G.getTime()})).length:D==="어제연락"?i.filter(Z=>o.filter(z=>z.customerId===Z.id).some(z=>{const nt=new Date(z.date);nt.setHours(0,0,0,0);const J=new Date(G);return J.setDate(J.getDate()-1),nt.getTime()===J.getTime()})).length:D==="연락할고객"?i.filter(Z=>{if(Z.status==="보류")return!1;const lt=o.filter(J=>J.customerId===Z.id),z=new Date(G),nt=new Date(G);return nt.setDate(nt.getDate()-1),!lt.some(J=>{const ot=new Date(J.date);return ot.setHours(0,0,0,0),ot.getTime()===z.getTime()||ot.getTime()===nt.getTime()})}).length:i.filter(Z=>Z.status===D).length},A=["전체","보류","신규","진행중","장기관리고객","집중고객","오늘미팅","미팅일확정","오늘연락","어제연락","연락할고객"],w=D=>{e(D),d()};return E.jsxs("aside",{className:`filter-sidebar ${p?"collapsed":""} ${h?"mobile-open":""}`,children:[E.jsxs("div",{className:"filter-header",children:[!p&&E.jsx("h4",{children:"필터"}),E.jsx("button",{onClick:()=>_(!p),className:"btn-close desktop-only",children:p?"☰":"✕"}),E.jsx("button",{onClick:d,className:"btn-close mobile-only",children:"✕"})]}),!p&&E.jsx("ul",{className:"filter-list",children:A.map(D=>E.jsxs("li",{className:`filter-item ${r===D?"active":""}`,onClick:()=>w(D),children:[E.jsx("span",{children:D}),E.jsx("span",{className:"count-badge",children:v(D)})]},D))})]})},C1=({customers:r,onSelectCustomer:e,onEdit:i,onDelete:a,selectedCustomerId:o,activeFilter:h,activeProgressFilter:d,onProgressFilterChange:p,allCustomers:_,onFavoriteCustomer:v})=>{const[A,w]=Dt.useState(""),[D,G]=Dt.useState({visible:!1,x:0,y:0,selectedCustomer:null}),[Z,lt]=Dt.useState({key:"createdAt",direction:"desc"}),z=Dt.useMemo(()=>[...r.filter(X=>X.name.toLowerCase().includes(A.toLowerCase())||X.phone.includes(A))].sort((X,rt)=>{if(X.isFavorite&&!rt.isFavorite)return-1;if(!X.isFavorite&&rt.isFavorite)return 1;const Et=X[Z.key],C=rt[Z.key];if(Et==null&&C==null)return 0;if(Et==null)return 1;if(C==null)return-1;if(Z.key==="hopefulDeposit"||Z.key==="hopefulMonthlyRent"){const L=Number(Et)||0,et=Number(C)||0;return Z.direction==="asc"?L-et:et-L}const O=String(Et).toLowerCase(),tt=String(C).toLowerCase();return O<tt?Z.direction==="asc"?-1:1:O>tt?Z.direction==="asc"?1:-1:0}),[r,A,Z]),nt=(K,P)=>{K.preventDefault(),G({visible:!0,x:K.pageX,y:K.pageY,selectedCustomer:P})},J=()=>{G({...D,visible:!1})},ot=()=>{D.selectedCustomer&&v(D.selectedCustomer),J()},dt=K=>_.filter(P=>(h==="전체"||P.status===h)&&P.progress===K).length,mt=h==="신규"||h==="진행중",_t=K=>{lt(P=>({key:K,direction:P.key===K&&P.direction==="asc"?"desc":"asc"}))},V=K=>Z.key!==K?" ↕":Z.direction==="asc"?" ↑":" ↓",b=K=>{switch(K){case"매매":return"rgba(229, 57, 53, 0.12)";case"전세":return"rgba(67, 160, 71, 0.12)";case"월세":return"rgba(255, 179, 0, 0.12)";default:return"transparent"}},x=K=>{if(!K)return"";const P=new Date(K),X=P.getMonth()+1,rt=P.getDate();return`${X}월${rt}일`},j=K=>{const P=x(K);return z.filter(X=>x(X.createdAt)===P).length},I=(K,P)=>{if(P>0){const Et=z[P-1];if(x(K.createdAt)===x(Et.createdAt))return 0}const X=x(K.createdAt);let rt=1;for(let Et=P+1;Et<z.length&&x(z[Et].createdAt)===X;Et++)rt++;return rt},M=(K,P)=>{let X=0;for(let rt=0;rt<P;rt++)(rt===0||x(z[rt].createdAt)!==x(z[rt-1].createdAt))&&X++;return X},R=K=>K%2===0?"#fafafa":"#f0f4ff",ht=(K,P)=>{if(P===0)return{};const X=x(K.createdAt);return x(z[P-1].createdAt)!==X?{borderTop:"12px solid white"}:{}};return E.jsxs("div",{className:"table-container",onClick:J,children:[E.jsx("div",{style:{marginBottom:"15px"},children:E.jsx("input",{type:"text",placeholder:"고객명, 연락처 검색...",value:A,onChange:K=>w(K.target.value),style:{width:"100%",padding:"8px"}})}),E.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"15px",fontSize:"13px",alignItems:"center"},children:[E.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:"매물 종류:"}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[E.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(229, 57, 53, 0.12)",border:"1px solid rgba(229, 57, 53, 0.3)",borderRadius:"3px"}}),E.jsx("span",{children:"매매"})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[E.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(67, 160, 71, 0.12)",border:"1px solid rgba(67, 160, 71, 0.3)",borderRadius:"3px"}}),E.jsx("span",{children:"전세"})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[E.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(255, 179, 0, 0.12)",border:"1px solid rgba(255, 179, 0, 0.3)",borderRadius:"3px"}}),E.jsx("span",{children:"월세"})]})]}),mt&&E.jsxs("div",{className:"progress-tabs",style:{marginBottom:"15px"},children:[E.jsxs("button",{className:`progress-tab ${d?"":"active"}`,onClick:()=>p(null),children:["전체 (",_.filter(K=>h==="전체"||K.status===h).length,")"]}),M_.map(K=>E.jsxs("button",{className:`progress-tab ${d===K?"active":""} progress-${K}`,onClick:()=>p(K),children:[K," (",dt(K),")"]},K))]}),E.jsxs("table",{className:"customer-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsxs("th",{onClick:()=>_t("createdAt"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["접수일",V("createdAt")]}),E.jsxs("th",{onClick:()=>_t("name"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["고객명",V("name")]}),E.jsx("th",{children:"연락처"}),E.jsxs("th",{onClick:()=>_t("moveInDate"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["입주희망일",V("moveInDate")]}),E.jsxs("th",{onClick:()=>_t("hopefulDeposit"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["희망보증금",V("hopefulDeposit")]}),E.jsxs("th",{onClick:()=>_t("hopefulMonthlyRent"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["희망월세",V("hopefulMonthlyRent")]}),E.jsx("th",{children:"금액 지역 상세정보"}),E.jsx("th",{children:"매물종류"})]})}),E.jsx("tbody",{children:z.map((K,P)=>{const X=I(K,P),rt=M(K,P),Et=ht(K,P);return E.jsxs("tr",{className:o===K.id?"selected":"",onClick:()=>e(K),onContextMenu:C=>nt(C,K),style:{backgroundColor:K.isFavorite?"rgba(156, 39, 176, 0.15)":b(K.propertyType),borderLeft:K.isFavorite?"3px solid #9C27B0":"none",boxShadow:K.isFavorite?"0 2px 4px rgba(156, 39, 176, 0.3)":"none",...Et},children:[X>0&&E.jsxs("td",{rowSpan:X,style:{verticalAlign:"middle",textAlign:"center",backgroundColor:R(rt),fontWeight:"500"},children:[x(K.createdAt),"(",j(K.createdAt),"명)"]}),E.jsxs("td",{className:"customer-name",title:K.name,children:[K.isFavorite&&E.jsx("span",{style:{marginRight:"6px",color:"#9C27B0"},children:"⭐"}),K.name]}),E.jsx("td",{children:E.jsx("a",{href:`sms:${K.phone}`,children:K.phone})}),E.jsx("td",{children:K.moveInDate}),E.jsx("td",{children:K.hopefulDeposit?`${K.hopefulDeposit}만원`:"-"}),E.jsx("td",{children:K.hopefulMonthlyRent?`${K.hopefulMonthlyRent}만원`:"-"}),E.jsx("td",{className:"preferred-area",title:K.preferredArea,children:K.preferredArea}),E.jsx("td",{children:K.propertyType})]},K.id)})})]}),D.visible&&E.jsx("div",{style:{top:D.y,left:D.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:E.jsx("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:E.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:ot,children:D.selectedCustomer?.isFavorite?"⭐ 즐겨찾기 취소":"☆ 즐겨찾기 추가"})})})]})},D1=r=>!r.name||r.name.trim()===""?(alert("고객명은 필수 입력 항목입니다."),!1):r.phone&&!N1(r.phone)?(alert("연락처는 010-xxxx-xxxx 형식으로 입력하세요."),!1):!0,N1=r=>r?/^010-\d{4}-\d{4}$/.test(r):!0,Sa=()=>"_"+Math.random().toString(36).substr(2,9),O_=r=>{if(!r)return"";try{return new Date(r).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date-time:",r,e),""}},I1=({isOpen:r,onClose:e,onSave:i,editData:a})=>{const o=()=>({id:a?.id||null,name:a?.name||"",phone:a?.phone||"",source:a?.source||gy[0],propertyType:a?.propertyType||yy[0],preferredArea:a?.preferredArea||"",hopefulDeposit:a?.hopefulDeposit||"",hopefulMonthlyRent:a?.hopefulMonthlyRent||"",moveInDate:a?.moveInDate||"",memo:a?.memo||"",status:a?.status||"신규",progress:a?.progress||"매물제안예정",createdAt:a?.createdAt||new Date().toISOString()}),[h,d]=Dt.useState(o());if(Dt.useEffect(()=>{d(o())},[a,r]),!r)return null;const p=A=>{const{name:w,value:D}=A.target;d(G=>({...G,[w]:D}))},_=A=>{let w=A.target.value.replace(/[^0-9]/g,"");w.length>3&&w.length<=7?w=`${w.slice(0,3)}-${w.slice(3)}`:w.length>7&&(w=`${w.slice(0,3)}-${w.slice(3,7)}-${w.slice(7,11)}`),d(D=>({...D,phone:w}))},v=()=>{const A={...h,id:h.id||Sa(),hopefulDeposit:parseInt(h.hopefulDeposit,10)||0,hopefulMonthlyRent:parseInt(h.hopefulMonthlyRent,10)||0};D1(A)&&(i(A),e())};return E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content",children:[E.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",paddingBottom:"10px"},children:[E.jsx("h3",{children:a?"고객 수정":"고객 추가"}),E.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[E.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:"경로"}),E.jsx("select",{name:"source",value:h.source,onChange:p,style:{fontSize:"14px"},children:gy.map(A=>E.jsx("option",{value:A,children:A},A))}),E.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:"종류"}),E.jsx("select",{name:"propertyType",value:h.propertyType,onChange:p,style:{fontSize:"14px"},children:yy.map(A=>E.jsx("option",{value:A,children:A},A))}),E.jsx("button",{onClick:e,className:"btn-close",children:"✕"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"고객명 *"}),E.jsx("input",{type:"text",name:"name",value:h.name,onChange:p,placeholder:"성별 선호매물 특징",required:!0})]}),E.jsxs("div",{className:"form-grid",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"연락처"}),E.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:_,placeholder:"010-xxxx-xxxx"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"입주희망일"}),E.jsx("input",{type:"date",name:"moveInDate",value:h.moveInDate,onChange:p})]})]}),E.jsxs("div",{className:"form-grid",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"희망보증금 (만원)"}),E.jsx("input",{type:"number",name:"hopefulDeposit",value:h.hopefulDeposit,onChange:p})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"희망월세 (만원)"}),E.jsx("input",{type:"number",name:"hopefulMonthlyRent",value:h.hopefulMonthlyRent,onChange:p})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"금액 지역 입주시기 상세정보"}),E.jsx("textarea",{name:"preferredArea",value:h.preferredArea,onChange:p,rows:"2"})]}),E.jsxs("div",{className:"modal-footer",children:[E.jsx("button",{onClick:e,className:"btn-secondary",children:"취소"}),E.jsx("button",{onClick:v,className:"btn-primary",children:"저장"})]})]})})},V1=({customer:r,onUpdateCustomer:e,activities:i=[],meetings:a=[],onTabChange:o})=>{const[h,d]=Dt.useState(!1),[p,_]=Dt.useState(r.preferredArea||"");if(!r)return null;Dt.useEffect(()=>{_(r.preferredArea||""),d(!1)},[r.id]);const v=()=>{e({...r,preferredArea:p}),d(!1)},A=()=>{_(r.preferredArea||""),d(!1)},w=J=>{J.key==="Enter"&&J.ctrlKey?h&&v():J.key==="Escape"&&h&&A()},D=i.filter(J=>J.customerId===r.id).sort((J,ot)=>new Date(ot.date)-new Date(J.date)),G=a.filter(J=>J.customerId===r.id).sort((J,ot)=>new Date(ot.date)-new Date(J.date)),Z=D.slice(0,3),lt=G.slice(0,3),z=G.find(J=>new Date(J.date)>new Date),nt=(J,ot=40)=>J?J.length>ot?J.slice(0,ot)+"...":J:"-";return E.jsxs("div",{className:"basic-info-container",children:[E.jsxs("div",{className:"info-section",children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"15px",flexWrap:"wrap"},children:[E.jsx("h4",{style:{margin:0},children:"기본 정보"}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[E.jsx("span",{style:{fontWeight:"bold",color:"#555",fontSize:"12px"},children:"고객명"}),E.jsx("p",{style:{margin:0,fontWeight:"bold",fontSize:"14px",color:"#2196F3"},children:r.name})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px"},children:[E.jsx("span",{style:{color:"#888"},children:"경로:"}),E.jsx("span",{style:{fontWeight:"bold"},children:r.source})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px"},children:[E.jsx("span",{style:{color:"#888"},children:"매물종류:"}),E.jsx("span",{style:{fontWeight:"bold"},children:r.propertyType})]})]}),E.jsxs("div",{className:"info-grid",children:[E.jsxs("div",{children:[E.jsx("span",{children:"연락처"}),E.jsx("p",{children:E.jsx("a",{href:`sms:${r.phone}`,style:{color:"#2196F3",textDecoration:"none",cursor:"pointer"},children:r.phone})})]}),E.jsxs("div",{children:[E.jsx("span",{children:"입주희망일"}),E.jsx("p",{children:r.moveInDate})]}),E.jsxs("div",{children:[E.jsx("span",{children:"희망보증금"}),E.jsx("p",{children:r.hopefulDeposit?`${r.hopefulDeposit}만원`:"-"})]}),E.jsxs("div",{children:[E.jsx("span",{children:"희망월세"}),E.jsx("p",{children:r.hopefulMonthlyRent?`${r.hopefulMonthlyRent}만원`:"-"})]})]})]}),E.jsxs("div",{className:"info-section",children:[E.jsx("h4",{children:"금액 지역 입주시기 상세정보"}),h?E.jsxs("div",{children:[E.jsx("textarea",{value:p,onChange:J=>_(J.target.value),onKeyDown:w,placeholder:"금액, 지역, 입주시기 등 상세정보를 입력하세요... (Ctrl+Enter로 저장, Esc로 취소)",style:{width:"100%",minHeight:"80px",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontFamily:"inherit",fontSize:"14px",resize:"vertical"},autoFocus:!0}),E.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[E.jsx("button",{onClick:v,style:{padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"저장"}),E.jsx("button",{onClick:A,style:{padding:"6px 12px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"취소"})]})]}):E.jsx("p",{onClick:()=>d(!0),style:{cursor:"pointer",padding:"8px",borderRadius:"4px",backgroundColor:"#f5f5f5",minHeight:"40px",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",transition:"background-color 0.2s"},onMouseEnter:J=>J.currentTarget.style.backgroundColor="#efefef",onMouseLeave:J=>J.currentTarget.style.backgroundColor="#f5f5f5",children:r.preferredArea||"(클릭하여 추가)"})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px",margin:"15px"},children:[E.jsxs("div",{onClick:()=>o&&o("활동 내역"),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:J=>{J.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",J.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:J=>{J.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",J.currentTarget.style.transform="translateY(0)"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[E.jsx("span",{style:{fontSize:"20px"},children:"📊"}),E.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:"활동 내역"})]}),E.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:["총 ",E.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:D.length}),"건의 활동",D.length>0&&E.jsxs("span",{style:{color:"#888",marginLeft:"8px"},children:["(최근: ",D[0].date,")"]})]}),Z.length>0?E.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:Z.map((J,ot)=>E.jsxs("div",{style:{padding:"6px 0",borderTop:ot>0?"1px solid #f0f0f0":"none",color:"#555"},children:[E.jsx("span",{style:{color:"#999",marginRight:"4px"},children:J.date}),nt(J.content,30)]},ot))}):E.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:"활동이 없습니다"})]}),E.jsxs("div",{onClick:()=>o&&o("미팅 내역"),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:J=>{J.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",J.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:J=>{J.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",J.currentTarget.style.transform="translateY(0)"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[E.jsx("span",{style:{fontSize:"20px"},children:"📅"}),E.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:"미팅 내역"})]}),E.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:["총 ",E.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:G.length}),"건의 미팅",z&&E.jsxs("span",{style:{color:"#16a085",marginLeft:"8px",fontWeight:"bold"},children:["(다음: ",z.date.slice(0,10),")"]})]}),lt.length>0?E.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:lt.map((J,ot)=>E.jsxs("div",{style:{padding:"6px 0",borderTop:ot>0?"1px solid #f0f0f0":"none",color:"#555"},children:[E.jsx("span",{style:{color:"#999",marginRight:"4px"},children:J.date.slice(0,10)}),E.jsxs("span",{style:{color:"#2196F3",fontWeight:"bold"},children:[J.properties?.length||0,"개 매물"]})]},ot))}):E.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:"미팅이 없습니다"})]})]})]})},M1=({customerId:r,activities:e,onSaveActivity:i,onDeleteActivity:a})=>{const[o,h]=Dt.useState(!1),[d,p]=Dt.useState(null),[_,v]=Dt.useState(null),[A,w]=Dt.useState({visible:!1,x:0,y:0,selectedActivity:null}),D=e.filter(b=>b.customerId===r).sort((b,x)=>new Date(x.date)-new Date(b.date)),G=b=>{i(b),h(!1),p(null)},Z=(b,x)=>{b.preventDefault(),w({visible:!0,x:b.pageX,y:b.pageY,selectedActivity:x})},lt=()=>{w({...A,visible:!1})},z=()=>{A.selectedActivity&&p(A.selectedActivity),lt()},nt=()=>{A.selectedActivity&&a(A.selectedActivity.id),lt()},J=b=>{if(!b)return"";if(b.includes(" ")){const x=b.split(" "),j=x[0].slice(5),I=x[1];return`${j} ${I}`}return b.length===10?b.slice(5,10):b},ot=b=>b.followUps&&b.followUps.length>0?[...b.followUps].sort((j,I)=>new Date(I.date)-new Date(j.date))[0].content:"",dt=(b,x=50)=>b?b.length>x?b.slice(0,x)+"...":b:"-",mt=({activity:b,onClose:x})=>{const[j,I]=Dt.useState(b.followUps||[]),[M,R]=Dt.useState(null),[ht,K]=Dt.useState(""),[P,X]=Dt.useState(null),rt=()=>{if(!ht.trim())return;const L={id:Sa(),date:new Date().toISOString(),content:ht,createdAt:new Date().toISOString()},et=[...j,L],ct={...b,followUps:et};G(ct),I(et),K("")},Et=L=>{L.key==="Enter"&&L.ctrlKey&&rt()},C=L=>{if(confirm("이 후속 기록을 삭제하시겠습니까?")){const et=j.filter(ft=>ft.id!==L),ct={...b,followUps:et};G(ct),I(et)}},O=(L,et)=>{const ct=j.map(St=>St.id===L?{...St,content:et}:St),ft={...b,followUps:ct};G(ft),I(ct),R(null)},tt=[...j].sort((L,et)=>new Date(et.date)-new Date(L.date));return E.jsx("div",{className:"modal-overlay",onClick:x,children:E.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),style:{maxWidth:"700px"},children:[E.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsx("h3",{style:{margin:0},children:"활동 상세"}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[E.jsx("span",{style:{fontSize:"16px",color:"#2c3e50",fontWeight:"500"},children:b.date}),E.jsx("button",{className:"btn-close",onClick:x,children:"×"})]})]}),E.jsxs("div",{style:{padding:"20px 0"},children:[E.jsx("div",{style:{marginBottom:"25px"},children:E.jsx("p",{style:{margin:0,fontSize:"16px",whiteSpace:"pre-line",lineHeight:"1.6",fontWeight:"bold"},children:b.content})}),E.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px",marginBottom:"25px"},children:[E.jsx("div",{style:{marginBottom:"15px"},children:E.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["📝 후속 기록 (",j.length,")"]})}),E.jsxs("div",{style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"5px",padding:"10px",marginBottom:"15px"},children:[E.jsx("textarea",{value:ht,onChange:L=>K(L.target.value),onKeyDown:Et,placeholder:"후속 기록을 입력하세요... (Ctrl+Enter로 입력)",style:{width:"100%",padding:"8px",minHeight:"60px",border:"none",outline:"none",resize:"vertical",fontFamily:"inherit"}}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[E.jsxs("div",{style:{display:"flex",gap:"8px"},children:[E.jsx("button",{onClick:()=>K(L=>L?L+`
[나] `:"[나] "),style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#e3f2fd",color:"#2196F3",border:"1px solid #2196F3",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"나"}),E.jsx("button",{onClick:()=>K(L=>L?L+`
[고객] `:"[고객] "),style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#f3e5f5",color:"#9c27b0",border:"1px solid #9c27b0",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"고객"})]}),E.jsxs("div",{style:{display:"flex",gap:"8px"},children:[E.jsx("button",{onClick:rt,className:"btn-primary",style:{fontSize:"12px",padding:"6px 16px"},children:"입력"}),E.jsx("button",{onClick:()=>K(""),style:{fontSize:"12px",padding:"6px 16px",backgroundColor:"#f5f5f5",color:"#666",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"초기화"})]})]})]}),tt.length>0?tt.map(L=>E.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"5px",marginBottom:"10px",borderLeft:"3px solid var(--primary-blue)"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[E.jsx("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:O_(L.date)}),E.jsxs("div",{style:{display:"flex",gap:"5px"},children:[E.jsx("button",{onClick:()=>R(L.id),style:{fontSize:"11px",padding:"3px 8px"},children:"수정"}),E.jsx("button",{onClick:()=>C(L.id),className:"btn-secondary",style:{fontSize:"11px",padding:"3px 8px"},children:"삭제"})]})]}),M===L.id?E.jsx("div",{children:E.jsx("textarea",{defaultValue:L.content,onBlur:et=>O(L.id,et.target.value),style:{width:"100%",padding:"8px",minHeight:"60px"},autoFocus:!0})}):E.jsx("p",{style:{margin:0,fontSize:"14px",whiteSpace:"pre-line",lineHeight:"1.5"},children:L.content})]},L.id)):E.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"후속 기록이 없습니다."})]}),b.images&&b.images.length>0&&E.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px"},children:[E.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["첨부 이미지 (",b.images.length,")"]}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px",marginTop:"10px"},children:b.images.map((L,et)=>E.jsx("div",{style:{position:"relative"},children:E.jsx("img",{src:L.url,alt:`활동 이미지 ${et+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"5px",cursor:"pointer",border:"1px solid #e0e0e0"},onClick:()=>X(L.url)})},et))})]}),P&&E.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},onClick:()=>X(null),children:[E.jsx("img",{src:P,alt:"확대 이미지",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain"},onClick:L=>L.stopPropagation()}),E.jsx("button",{onClick:()=>X(null),style:{position:"absolute",top:"20px",right:"20px",background:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"24px",cursor:"pointer",color:"#333"},children:"×"})]})]}),E.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between"},children:[E.jsx("button",{onClick:()=>{confirm("이 활동을 삭제하시겠습니까?")&&(a(b.id),x())},className:"btn-secondary",style:{backgroundColor:"#f44336"},children:"삭제"}),E.jsxs("div",{style:{display:"flex",gap:"10px"},children:[E.jsx("button",{onClick:x,className:"btn-secondary",children:"닫기"}),E.jsx("button",{onClick:()=>{p(b),x()},className:"btn-primary",children:"수정"})]})]})]})})},_t=({activity:b,onCancel:x})=>{const j=()=>{if(b&&b.date)return b.date;const C=new Date,O=C.getFullYear(),tt=String(C.getMonth()+1).padStart(2,"0"),L=String(C.getDate()).padStart(2,"0"),et=String(C.getHours()).padStart(2,"0"),ct=String(C.getMinutes()).padStart(2,"0");return`${O}-${tt}-${L} ${et}:${ct}`},[I,M]=Dt.useState(b||{date:j(),content:"",images:[]}),[R,ht]=Dt.useState(!1),K=C=>{const{name:O,value:tt}=C.target;M(L=>({...L,[O]:tt}))},P=C=>new Promise((O,tt)=>{const L=new FileReader;L.onload=()=>O(L.result),L.onerror=tt,L.readAsDataURL(C)}),X=async C=>{const O=Array.from(C.target.files);if(O.length===0)return;ht(!0);const tt=[];for(const L of O){if(!L.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다.");continue}if(L.size>1024*1024){alert(`${L.name}은(는) 1MB보다 큽니다. 더 작은 이미지를 사용해주세요.`);continue}try{const et=await P(L);tt.push({url:et,name:L.name})}catch(et){console.error("이미지 변환 실패:",et),alert("이미지 처리에 실패했습니다.")}}M(L=>({...L,images:[...L.images||[],...tt]})),ht(!1),C.target.value=""},rt=C=>{M(O=>({...O,images:O.images.filter((tt,L)=>L!==C)}))},Et=()=>{const C={...I,id:I.id||Sa(),customerId:r,date:I.date};G(C)};return E.jsx("div",{className:"modal-overlay",onClick:x,children:E.jsxs("div",{className:"modal-content",onClick:C=>C.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsx("h3",{style:{margin:0},children:"활동 기록"}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[E.jsx("input",{type:"text",name:"date",value:I.date,onChange:K,placeholder:"YYYY-MM-DD HH:mm",style:{padding:"6px 8px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",width:"160px"}}),E.jsx("button",{className:"btn-close",onClick:x,children:"×"})]})]}),E.jsxs("div",{className:"form-grid",children:[E.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1",display:"none"},children:[E.jsx("label",{children:"활동일 *"}),E.jsx("input",{type:"date",name:"date",value:I.date,onChange:K})]}),E.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[E.jsx("label",{children:"활동 내용 *"}),E.jsx("textarea",{name:"content",value:I.content,onChange:K,placeholder:`활동 내용을 자유롭게 입력하세요
예: 전화 통화, 매물 3개 제안함`})]}),E.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[E.jsx("label",{children:"이미지 첨부"}),E.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,onChange:X,disabled:R}),R&&E.jsx("p",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:"업로드 중..."}),I.images&&I.images.length>0&&E.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",marginTop:"10px"},children:I.images.map((C,O)=>E.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[E.jsx("img",{src:C.url,alt:`첨부 ${O+1}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}),E.jsx("button",{type:"button",onClick:()=>rt(O),style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",cursor:"pointer",padding:0},children:"×"})]},O))})]})]}),E.jsxs("div",{className:"modal-footer",children:[E.jsx("button",{onClick:x,className:"btn-secondary",children:"취소"}),E.jsx("button",{onClick:Et,className:"btn-primary",disabled:R,children:"저장"})]})]})})},V=_?D.find(b=>b.id===_.id):null;return E.jsxs("div",{className:"activity-tab",children:[E.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!o&&!d&&E.jsx("button",{onClick:()=>h(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 활동 추가"})}),o&&E.jsx(_t,{onCancel:()=>h(!1)}),d?E.jsx(_t,{activity:d,onCancel:()=>p(null)}):D.length>0?E.jsx("div",{onClick:lt,children:E.jsxs("table",{className:"customer-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{style:{width:"80px"},children:"활동일"}),E.jsx("th",{style:{width:"360px"},children:"활동 내용"}),E.jsx("th",{style:{width:"720px"},children:"후속기록"})]})}),E.jsx("tbody",{children:D.map(b=>E.jsxs("tr",{onContextMenu:x=>Z(x,b),style:{cursor:"context-menu"},children:[E.jsx("td",{style:{fontSize:"13px"},children:J(b.date)}),E.jsxs("td",{onClick:()=>v(b),style:{cursor:"pointer",fontSize:"13px",width:"360px",maxWidth:"360px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:b.content,children:[dt(b.content||"",30),b.followUps&&b.followUps.length>0&&E.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#7f8c8d"},children:["💬",b.followUps.length]}),b.images&&b.images.length>0&&E.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#7f8c8d"},children:["📷",b.images.length]})]}),E.jsx("td",{onClick:()=>v(b),style:{cursor:"pointer",fontSize:"13px",width:"720px",maxWidth:"720px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:ot(b),children:dt(ot(b),50)})]},b.id))})]})}):E.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 활동이 없습니다."}),V&&E.jsx(mt,{activity:V,onClose:()=>v(null)}),A.visible&&E.jsx("div",{style:{top:A.y,left:A.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:E.jsxs("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:[E.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:z,children:"수정"}),E.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:nt,children:"삭제"}),E.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:lt,children:"취소"})]})})]})},O1=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");return e.length>=2?e[1].trim():""},j1=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");return e.length>=7?e[6].trim():""},U1=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");if(e.length>0){const i=e[e.length-1].trim(),a=/(\d{2,3}[-\s]?\d{3,4}[-\s]?\d{4})/,o=i.match(a);if(o)return o[0].trim();const h=i.replace(/[^\d-]/g,"");if(h.length>=9)return h}return""},_y=r=>({propertyName:O1(r),agencyName:j1(r),contactNumber:U1(r)}),P1=({customerId:r,customerName:e,meetings:i,onSaveMeeting:a,onDeleteMeeting:o})=>{const[h,d]=Dt.useState(!1),[p,_]=Dt.useState(null),[v,A]=Dt.useState(null),w=i.filter(nt=>nt.customerId===r),D=({onCancel:nt,meetingData:J})=>{const ot=()=>{if(J){const ht=J.date||new Date().toISOString().slice(0,16);return{...J,date:ht.slice(0,10),time:J.time||ht.slice(11,16)}}return{date:new Date().toISOString().slice(0,10),time:"12:00",properties:[]}},[dt,mt]=Dt.useState(ot()),[_t,V]=Dt.useState(!1),[b,x]=Dt.useState(null),j=ht=>{mt({...dt,[ht.target.name]:ht.target.value})},I=ht=>{if(confirm("정말 이 매물을 삭제하시겠습니까?")){const K=dt.properties.filter((P,X)=>X!==ht);mt({...dt,properties:K})}},M=()=>{const ht={...dt,id:dt.id||Sa(),customerId:r,date:`${dt.date}T${dt.time}:00`};a(ht),d(!1),_(null),nt()},R=({onClose:ht,propertyToEdit:K,editIndex:P})=>{const[X,rt]=Dt.useState(K||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",status:va[0]}),Et=O=>{const tt=O.target.value,{propertyName:L,agencyName:et,contactNumber:ct}=_y(tt);rt({...X,info:tt,roomName:L||X.roomName,agency:et||X.agency,agencyPhone:ct||X.agencyPhone})},C=()=>{if(P!=null){const O=[...dt.properties];O[P]={...X},mt({...dt,properties:O})}else mt({...dt,properties:[...dt.properties,{...X,id:Sa()}]});ht()};return E.jsx("div",{className:"modal-overlay",onClick:ht,children:E.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsx("h3",{children:P!=null?"매물 수정":"매물 추가"}),E.jsx("button",{className:"btn-close",onClick:ht,children:"×"})]}),E.jsxs("div",{className:"form-grid",children:[E.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[E.jsx("label",{children:"매물정보 (전체 텍스트 붙여넣기)"}),E.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:X.info,onChange:Et}),E.jsx("p",{className:"form-hint",children:"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다."})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"호실명"}),E.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:X.roomName,onChange:O=>rt({...X,roomName:O.target.value})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"연락처"}),E.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:X.agencyPhone,onChange:O=>rt({...X,agencyPhone:O.target.value})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"방문시간"}),E.jsx("input",{type:"time",value:X.visitTime,onChange:O=>rt({...X,visitTime:O.target.value})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"준비상태"}),E.jsx("select",{value:X.status,onChange:O=>rt({...X,status:O.target.value}),children:va.map(O=>E.jsx("option",{value:O,children:O},O))})]}),E.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[E.jsx("label",{children:"부동산"}),E.jsx("input",{type:"text",value:X.agency,onChange:O=>rt({...X,agency:O.target.value})})]})]}),E.jsxs("div",{className:"modal-footer",children:[E.jsx("button",{onClick:ht,className:"btn-secondary",children:"취소"}),E.jsx("button",{onClick:C,className:"btn-primary",children:P!=null?"수정":"추가"})]})]})})};return E.jsx("div",{className:"modal-overlay",onClick:nt,children:E.jsxs("div",{className:"modal-content",onClick:ht=>ht.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsxs("h3",{children:["미팅 추가 - ",e?e.slice(0,30):""]}),E.jsx("button",{className:"btn-close",onClick:nt,children:"×"})]}),E.jsxs("div",{className:"form-grid",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"미팅 날짜"}),E.jsx("input",{type:"date",name:"date",value:dt.date,onChange:j})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"미팅 시간"}),E.jsx("input",{type:"time",name:"time",value:dt.time,onChange:j})]})]}),E.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:"매물 준비"}),dt.properties.length===0?E.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"준비된 매물이 없습니다."}):dt.properties.map((ht,K)=>E.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[E.jsxs("div",{className:"property-card-header",children:[E.jsxs("div",{className:"property-room-name",children:["🏠 ",ht.roomName||"미지정"]}),E.jsx("select",{className:`property-status-badge status-${ht.status}`,value:ht.status,onChange:P=>{const X=[...dt.properties];X[K]={...X[K],status:P.target.value},mt({...dt,properties:X})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:va.map(P=>E.jsx("option",{value:P,children:P},P))})]}),E.jsxs("div",{className:"property-card-body",children:[E.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),E.jsx("div",{className:"property-info-content",children:ht.info})]}),E.jsxs("div",{className:"property-card-footer",children:[E.jsxs("span",{className:"property-detail",children:["🏢 ",ht.agency]}),E.jsxs("span",{className:"property-detail",children:["📞 ",ht.agencyPhone?E.jsx("a",{href:`sms:${ht.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:ht.agencyPhone}):""]}),E.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["🕐",E.jsx("input",{type:"time",value:ht.visitTime||"",onChange:P=>{const X=[...dt.properties];X[K]={...X[K],visitTime:P.target.value},mt({...dt,properties:X})},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),"방문"]})]}),E.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[E.jsx("button",{onClick:()=>{x(K),V(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),E.jsx("button",{onClick:()=>I(K),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},ht.id||K)),E.jsx("div",{style:{textAlign:"center",margin:"20px 0",borderTop:"1px dashed #ccc",paddingTop:"20px"},children:E.jsx("button",{onClick:()=>{x(null),V(!0)},className:"btn-primary",children:"+ 매물 추가"})}),E.jsxs("div",{className:"modal-footer",children:[E.jsx("button",{onClick:nt,className:"btn-secondary",children:"취소"}),E.jsx("button",{onClick:M,className:"btn-primary",children:"저장"})]}),_t&&E.jsx(R,{onClose:()=>{V(!1),x(null)},propertyToEdit:b!==null?dt.properties[b]:null,editIndex:b})]})})},G=nt=>{if(!nt)return"";const[J,ot]=nt.split(":"),dt=parseInt(J),mt=dt<12?"오전":"오후",_t=dt===0?12:dt>12?dt-12:dt;return`${mt} ${_t}:${ot}`},Z=nt=>nt?nt.slice(0,10):"",lt=nt=>{if(!nt)return"";const J=nt.slice(11,16);return G(J)},z=({meeting:nt,onClose:J})=>{const[ot,dt]=Dt.useState(null),[mt,_t]=Dt.useState(!1),V=nt.properties?nt.properties.map((M,R)=>({prop:M,originalIndex:R})).sort((M,R)=>M.prop.visitTime?R.prop.visitTime?M.prop.visitTime.localeCompare(R.prop.visitTime):-1:1):[],b=M=>{dt(M),_t(!0)},x=M=>{if(confirm("이 매물을 삭제하시겠습니까?")){const R=nt.properties.filter((K,P)=>P!==M),ht={...nt,properties:R};a(ht),A(ht)}},j=(M,R)=>{const ht=[...nt.properties];R!=null?ht[R]=M:ht.push({...M,id:Sa()});const K={...nt,properties:ht};a(K),A(K),_t(!1),dt(null)},I=({propertyToEdit:M,editIndex:R,onClose:ht})=>{const[K,P]=Dt.useState(M||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",status:va[0]}),X=rt=>{const Et=rt.target.value,{propertyName:C,agencyName:O,contactNumber:tt}=_y(Et);P({...K,info:Et,roomName:C||K.roomName,agency:O||K.agency,agencyPhone:tt||K.agencyPhone})};return E.jsx("div",{className:"modal-overlay",onClick:ht,style:{zIndex:1100},children:E.jsxs("div",{className:"modal-content",onClick:rt=>rt.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsx("h3",{children:"매물 수정"}),E.jsx("button",{className:"btn-close",onClick:ht,children:"×"})]}),E.jsxs("div",{className:"form-grid",children:[E.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[E.jsx("label",{children:"매물정보 (전체 텍스트 붙여넣기)"}),E.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:K.info,onChange:X}),E.jsx("p",{className:"form-hint",children:"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다."})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"호실명"}),E.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:K.roomName,onChange:rt=>P({...K,roomName:rt.target.value})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"연락처"}),E.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:K.agencyPhone,onChange:rt=>P({...K,agencyPhone:rt.target.value})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"방문시간"}),E.jsx("input",{type:"time",value:K.visitTime,onChange:rt=>P({...K,visitTime:rt.target.value})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"준비상태"}),E.jsx("select",{value:K.status,onChange:rt=>P({...K,status:rt.target.value}),children:va.map(rt=>E.jsx("option",{value:rt,children:rt},rt))})]}),E.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[E.jsx("label",{children:"부동산"}),E.jsx("input",{type:"text",value:K.agency,onChange:rt=>P({...K,agency:rt.target.value})})]})]}),E.jsxs("div",{className:"modal-footer",children:[E.jsx("button",{onClick:ht,className:"btn-secondary",children:"취소"}),E.jsx("button",{onClick:()=>j(K,R),className:"btn-primary",children:"수정"})]})]})})};return E.jsx("div",{className:"modal-overlay",onClick:J,children:E.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsxs("h3",{children:["미팅 매물 - ",O_(nt.date)]}),E.jsx("button",{className:"btn-close",onClick:J,children:"×"})]}),E.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:V.length>0?V.map(({prop:M,originalIndex:R})=>E.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[E.jsxs("div",{className:"property-card-header",children:[E.jsxs("div",{className:"property-room-name",children:["🏠 ",M.roomName||"미지정"]}),E.jsx("select",{className:`property-status-badge status-${M.status}`,value:M.status,onChange:ht=>{const K=[...nt.properties];K[R]={...K[R],status:ht.target.value};const P={...nt,properties:K};a(P),A(P)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:va.map(ht=>E.jsx("option",{value:ht,children:ht},ht))})]}),E.jsxs("div",{className:"property-card-body",children:[E.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),E.jsx("div",{className:"property-info-content",children:M.info})]}),E.jsxs("div",{className:"property-card-footer",children:[E.jsxs("span",{className:"property-detail",children:["🏢 ",M.agency]}),E.jsxs("span",{className:"property-detail",children:["📞 ",M.agencyPhone?E.jsx("a",{href:`sms:${M.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:M.agencyPhone}):""]}),E.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["🕐",E.jsx("input",{type:"time",value:M.visitTime||"",onChange:ht=>{const K=[...nt.properties];K[R]={...K[R],visitTime:ht.target.value};const P={...nt,properties:K};a(P),A(P)},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),"방문"]})]}),E.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[E.jsx("button",{onClick:()=>b(R),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),E.jsx("button",{onClick:()=>x(R),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},M.id)):E.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 매물이 없습니다."})}),E.jsx("div",{className:"modal-footer",children:E.jsx("button",{onClick:J,className:"btn-primary",children:"닫기"})}),mt&&E.jsx(I,{propertyToEdit:ot!==null?nt.properties[ot]:null,editIndex:ot,onClose:()=>{_t(!1),dt(null)}})]})})};return E.jsxs("div",{className:"meeting-tab",children:[E.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!h&&!p&&E.jsx("button",{onClick:()=>d(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 미팅 추가"})}),h&&E.jsx(D,{onCancel:()=>d(!1)}),p?E.jsx(D,{meetingData:p,onCancel:()=>_(null)},p.id):w.length>0?E.jsxs("table",{className:"customer-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"미팅날짜"}),E.jsx("th",{children:"미팅시간"}),E.jsx("th",{children:"매물수"}),E.jsx("th",{children:"액션"})]})}),E.jsx("tbody",{children:w.map(nt=>E.jsxs("tr",{children:[E.jsx("td",{children:Z(nt.date)}),E.jsx("td",{children:lt(nt.date)}),E.jsxs("td",{onClick:()=>A(nt),style:{cursor:"pointer",color:"var(--primary-blue)",textDecoration:"underline"},children:[nt.properties?.length||0,"개 매물"]}),E.jsxs("td",{children:[E.jsx("button",{onClick:()=>_(nt),style:{fontSize:"12px",padding:"4px 8px",marginRight:"5px"},children:"수정"}),E.jsx("button",{onClick:()=>o(nt.id),className:"btn-secondary",style:{fontSize:"12px",padding:"4px 8px"},children:"삭제"})]})]},nt.id))})]}):E.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 미팅이 없습니다."}),v&&E.jsx(z,{meeting:v,onClose:()=>A(null)})]})},k1=({selectedCustomer:r,onClose:e,onEditCustomer:i,onUpdateCustomer:a,onDeleteCustomer:o,activities:h,onSaveActivity:d,onDeleteActivity:p,meetings:_,onSaveMeeting:v,onDeleteMeeting:A})=>{const[w,D]=Dt.useState("기본정보");Dt.useEffect(()=>{r&&D("기본정보")},[r?.id]);const G=!!r,Z=z=>{const nt={...r,status:z,progress:z==="보류"?null:r.progress};a(nt)},lt=z=>{const nt={...r,progress:z};a(nt)};return E.jsx("aside",{className:`detail-panel ${G?"open":""}`,children:G&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"panel-header",children:[E.jsxs("div",{children:[E.jsx("h3",{children:"고객 상세"}),E.jsxs("span",{className:"created-date",children:["접수일자: ",new Date(r.createdAt).toLocaleDateString()]})]}),E.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[E.jsx("button",{onClick:z=>{z.stopPropagation(),i(r)},className:"btn-primary",style:{padding:"8px 16px"},children:"수정"}),E.jsx("button",{onClick:z=>{z.stopPropagation(),o(r)},className:"btn-secondary",style:{padding:"8px 16px"},children:"삭제"}),E.jsx("button",{onClick:e,className:"btn-close",children:"✕"})]})]}),E.jsx("div",{style:{padding:"15px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f8f9fa"},children:E.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap"},children:[E.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[E.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:"상태"}),E.jsx("div",{style:{display:"flex",gap:"5px"},children:R1.map(z=>E.jsx("button",{type:"button",onClick:()=>Z(z),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:r.status===z?"#4CAF50":"white",color:r.status===z?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:z},z))})]}),(r.status==="신규"||r.status==="진행중")&&E.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[E.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:"진행상황"}),E.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:M_.map(z=>E.jsx("button",{type:"button",onClick:()=>lt(z),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:r.progress===z?"#2196F3":"white",color:r.progress===z?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:z},z))})]})]})}),E.jsxs("div",{className:"panel-content",children:[E.jsx("div",{style:{display:"flex",gap:"4px",padding:"12px 15px",backgroundColor:"#e3f2fd",borderRadius:"8px",marginBottom:"15px",border:"1px solid #bbdefb"},children:["기본정보","활동 내역","미팅 내역"].map((z,nt)=>E.jsx("button",{onClick:()=>D(z),style:{flex:1,padding:"10px 16px",fontSize:"14px",fontWeight:"700",border:"none",borderRadius:"6px",backgroundColor:w===z?"white":"transparent",color:"#1a1a1a",cursor:"pointer",transition:"all 0.2s ease",boxShadow:w===z?"0 2px 8px rgba(33, 150, 243, 0.15)":"none",border:w===z?"1px solid #e0e0e0":"1px solid transparent"},onMouseEnter:J=>{w!==z&&(J.target.style.backgroundColor="#f9f9f9")},onMouseLeave:J=>{w!==z&&(J.target.style.backgroundColor="transparent")},children:z},z))}),E.jsxs("div",{className:"tab-content",children:[w==="기본정보"&&E.jsx(V1,{customer:r,onUpdateCustomer:a,activities:h,meetings:_,onTabChange:D}),w==="활동 내역"&&E.jsx(M1,{customerId:r.id,activities:h,onSaveActivity:d,onDeleteActivity:p}),w==="미팅 내역"&&E.jsx(P1,{customerId:r.id,customerName:r.name,meetings:_,onSaveMeeting:v,onDeleteMeeting:A})]})]})]})})},L1=()=>{};var vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},z1=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const h=r[i++];e[a++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=r[i++],d=r[i++],p=r[i++],_=((o&7)<<18|(h&63)<<12|(d&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(_>>10)),e[a++]=String.fromCharCode(56320+(_&1023))}else{const h=r[i++],d=r[i++];e[a++]=String.fromCharCode((o&15)<<12|(h&63)<<6|d&63)}}return e.join("")},U_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const h=r[o],d=o+1<r.length,p=d?r[o+1]:0,_=o+2<r.length,v=_?r[o+2]:0,A=h>>2,w=(h&3)<<4|p>>4;let D=(p&15)<<2|v>>6,G=v&63;_||(G=64,d||(D=64)),a.push(i[A],i[w],i[D],i[G])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(j_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):z1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const h=i[r.charAt(o++)],p=o<r.length?i[r.charAt(o)]:0;++o;const v=o<r.length?i[r.charAt(o)]:64;++o;const w=o<r.length?i[r.charAt(o)]:64;if(++o,h==null||p==null||v==null||w==null)throw new B1;const D=h<<2|p>>4;if(a.push(D),v!==64){const G=p<<4&240|v>>2;if(a.push(G),w!==64){const Z=v<<6&192|w;a.push(Z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class B1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q1=function(r){const e=j_(r);return U_.encodeByteArray(e,!0)},Ku=function(r){return q1(r).replace(/\./g,"")},H1=function(r){try{return U_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=()=>G1().__FIREBASE_DEFAULTS__,Q1=()=>{if(typeof process>"u"||typeof vy>"u")return;const r=vy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Y1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&H1(r[1]);return e&&JSON.parse(e)},dd=()=>{try{return L1()||F1()||Q1()||Y1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},K1=r=>dd()?.emulatorHosts?.[r],P_=r=>{const e=K1(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},k_=()=>dd()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Ku(JSON.stringify(i)),Ku(JSON.stringify(d)),""].join(".")}const Zl={};function Z1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Zl))Zl[e]?r.emulator.push(e):r.prod.push(e);return r}function $1(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let Ey=!1;function B_(r,e){if(typeof window>"u"||typeof document>"u"||!hc(window.location.host)||Zl[r]===e||Zl[r]||Ey)return;Zl[r]=e;function i(D){return`__firebase__banner__${D}`}const a="__firebase__banner",h=Z1().prod.length>0;function d(){const D=document.getElementById(a);D&&D.remove()}function p(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function _(D,G){D.setAttribute("width","24"),D.setAttribute("id",G),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{Ey=!0,d()},D}function A(D,G){D.setAttribute("id",G),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function w(){const D=$1(a),G=i("text"),Z=document.getElementById(G)||document.createElement("span"),lt=i("learnmore"),z=document.getElementById(lt)||document.createElement("a"),nt=i("preprendIcon"),J=document.getElementById(nt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ot=D.element;p(ot),A(z,lt);const dt=v();_(J,nt),ot.append(J,Z,z,dt),document.body.appendChild(ot)}h?(Z.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W1(){const r=dd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tT(){return!W1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eT(){try{return typeof indexedDB=="object"}catch{return!1}}function nT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="FirebaseError";class Sr extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=iT,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,q_.prototype.create)}}class q_{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],d=h?sT(h,a):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new Sr(o,p,a)}}function sT(r,e){return r.replace(rT,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const rT=/\{\$([^}]+)}/g;function Xu(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const h=r[o],d=e[o];if(Ty(h)&&Ty(d)){if(!Xu(h,d))return!1}else if(h!==d)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function Ty(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new X1;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oT(e))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});a.resolve(h)}catch{}}}}clearInstance(e=gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gr){return this.instances.has(e)}getOptions(e=gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(h);a===p&&d.resolve(o)}return o}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const h=this.instances.get(a);return h&&e(h,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:lT(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=gr){return this.component?this.component.multipleInstances?e:gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lT(r){return r===gr?void 0:r}function oT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new aT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ht||(Ht={}));const cT={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},hT=Ht.INFO,fT={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},dT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=fT[e];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H_{constructor(e){this.name=e,this._logLevel=hT,this._logHandler=dT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...e),this._logHandler(this,Ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...e),this._logHandler(this,Ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...e),this._logHandler(this,Ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...e),this._logHandler(this,Ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...e),this._logHandler(this,Ht.ERROR,...e)}}const mT=(r,e)=>e.some(i=>r instanceof i);let Ay,by;function pT(){return Ay||(Ay=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gT(){return by||(by=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G_=new WeakMap,Ff=new WeakMap,F_=new WeakMap,jf=new WeakMap,md=new WeakMap;function yT(r){const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{i(As(r.result)),o()},d=()=>{a(r.error),o()};r.addEventListener("success",h),r.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&G_.set(i,r)}).catch(()=>{}),md.set(e,r),e}function _T(r){if(Ff.has(r))return;const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{i(),o()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});Ff.set(r,e)}let Qf={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return Ff.get(r);if(e==="objectStoreNames")return r.objectStoreNames||F_.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return As(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vT(r){Qf=r(Qf)}function ET(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(Uf(this),e,...i);return F_.set(a,e.sort?e.sort():[e]),As(a)}:gT().includes(r)?function(...e){return r.apply(Uf(this),e),As(G_.get(this))}:function(...e){return As(r.apply(Uf(this),e))}}function TT(r){return typeof r=="function"?ET(r):(r instanceof IDBTransaction&&_T(r),mT(r,pT())?new Proxy(r,Qf):r)}function As(r){if(r instanceof IDBRequest)return yT(r);if(jf.has(r))return jf.get(r);const e=TT(r);return e!==r&&(jf.set(r,e),md.set(e,r)),e}const Uf=r=>md.get(r);function AT(r,e,{blocked:i,upgrade:a,blocking:o,terminated:h}={}){const d=indexedDB.open(r,e),p=As(d);return a&&d.addEventListener("upgradeneeded",_=>{a(As(d.result),_.oldVersion,_.newVersion,As(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),p.then(_=>{h&&_.addEventListener("close",()=>h()),o&&_.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const bT=["get","getKey","getAll","getAllKeys","count"],ST=["put","add","delete","clear"],Pf=new Map;function Sy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pf.get(e))return Pf.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=ST.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||bT.includes(i)))return;const h=async function(d,...p){const _=this.transaction(d,o?"readwrite":"readonly");let v=_.store;return a&&(v=v.index(p.shift())),(await Promise.all([v[i](...p),o&&_.done]))[0]};return Pf.set(e,h),h}vT(r=>({...r,get:(e,i,a)=>Sy(e,i)||r.get(e,i,a),has:(e,i)=>!!Sy(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(RT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function RT(r){return r.getComponent()?.type==="VERSION"}const Yf="@firebase/app",xy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new H_("@firebase/app"),wT="@firebase/app-compat",CT="@firebase/analytics-compat",DT="@firebase/analytics",NT="@firebase/app-check-compat",IT="@firebase/app-check",VT="@firebase/auth",MT="@firebase/auth-compat",OT="@firebase/database",jT="@firebase/data-connect",UT="@firebase/database-compat",PT="@firebase/functions",kT="@firebase/functions-compat",LT="@firebase/installations",zT="@firebase/installations-compat",BT="@firebase/messaging",qT="@firebase/messaging-compat",HT="@firebase/performance",GT="@firebase/performance-compat",FT="@firebase/remote-config",QT="@firebase/remote-config-compat",YT="@firebase/storage",KT="@firebase/storage-compat",XT="@firebase/firestore",ZT="@firebase/ai",$T="@firebase/firestore-compat",JT="firebase",WT="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="[DEFAULT]",tA={[Yf]:"fire-core",[wT]:"fire-core-compat",[DT]:"fire-analytics",[CT]:"fire-analytics-compat",[IT]:"fire-app-check",[NT]:"fire-app-check-compat",[VT]:"fire-auth",[MT]:"fire-auth-compat",[OT]:"fire-rtdb",[jT]:"fire-data-connect",[UT]:"fire-rtdb-compat",[PT]:"fire-fn",[kT]:"fire-fn-compat",[LT]:"fire-iid",[zT]:"fire-iid-compat",[BT]:"fire-fcm",[qT]:"fire-fcm-compat",[HT]:"fire-perf",[GT]:"fire-perf-compat",[FT]:"fire-rc",[QT]:"fire-rc-compat",[YT]:"fire-gcs",[KT]:"fire-gcs-compat",[XT]:"fire-fst",[$T]:"fire-fst-compat",[ZT]:"fire-vertex","fire-js":"fire-js",[JT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,eA=new Map,Xf=new Map;function Ry(r,e){try{r.container.addComponent(e)}catch(i){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function eo(r){const e=r.name;if(Xf.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Xf.set(e,r);for(const i of Zu.values())Ry(i,r);for(const i of eA.values())Ry(i,r);return!0}function Q_(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function Y_(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new q_("app","Firebase",nA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=WT;function X_(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a={name:Kf,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw bs.create("bad-app-name",{appName:String(o)});if(i||(i=k_()),!i)throw bs.create("no-options");const h=Zu.get(o);if(h){if(Xu(i,h.options)&&Xu(a,h.config))return h;throw bs.create("duplicate-app",{appName:o})}const d=new uT(o);for(const _ of Xf.values())d.addComponent(_);const p=new iA(i,a,d);return Zu.set(o,p),p}function Z_(r=Kf){const e=Zu.get(r);if(!e&&r===Kf&&k_())return X_();if(!e)throw bs.create("no-app",{appName:r});return e}function Ss(r,e,i){let a=tA[r]??r;i&&(a+=`-${i}`);const o=a.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(d.join(" "));return}eo(new wa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firebase-heartbeat-database",rA=1,no="firebase-heartbeat-store";let kf=null;function $_(){return kf||(kf=AT(sA,rA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(no)}catch(i){console.warn(i)}}}}).catch(r=>{throw bs.create("idb-open",{originalErrorMessage:r.message})})),kf}async function aA(r){try{const i=(await $_()).transaction(no),a=await i.objectStore(no).get(J_(r));return await i.done,a}catch(e){if(e instanceof Sr)Oi.warn(e.message);else{const i=bs.create("idb-get",{originalErrorMessage:e?.message});Oi.warn(i.message)}}}async function wy(r,e){try{const a=(await $_()).transaction(no,"readwrite");await a.objectStore(no).put(e,J_(r)),await a.done}catch(i){if(i instanceof Sr)Oi.warn(i.message);else{const a=bs.create("idb-set",{originalErrorMessage:i?.message});Oi.warn(a.message)}}}function J_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=1024,oA=30;class uA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new hA(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Cy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>oA){const o=fA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Oi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Cy(),{heartbeatsToSend:i,unsentEntries:a}=cA(this._heartbeatsCache.heartbeats),o=Ku(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Oi.warn(e),""}}}function Cy(){return new Date().toISOString().substring(0,10)}function cA(r,e=lA){const i=[];let a=r.slice();for(const o of r){const h=i.find(d=>d.agent===o.agent);if(h){if(h.dates.push(o.date),Dy(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Dy(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class hA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eT()?nT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await aA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return wy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return wy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Dy(r){return Ku(JSON.stringify({version:2,heartbeats:r})).length}function fA(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(r){eo(new wa("platform-logger",e=>new xT(e),"PRIVATE")),eo(new wa("heartbeat",e=>new uA(e),"PRIVATE")),Ss(Yf,xy,r),Ss(Yf,xy,"esm2020"),Ss("fire-js","")}dA("");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,W_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,b){function x(){}x.prototype=b.prototype,V.F=b.prototype,V.prototype=new x,V.prototype.constructor=V,V.D=function(j,I,M){for(var R=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)R[ht-2]=arguments[ht];return b.prototype[I].apply(j,R)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,b,x){x||(x=0);const j=Array(16);if(typeof b=="string")for(var I=0;I<16;++I)j[I]=b.charCodeAt(x++)|b.charCodeAt(x++)<<8|b.charCodeAt(x++)<<16|b.charCodeAt(x++)<<24;else for(I=0;I<16;++I)j[I]=b[x++]|b[x++]<<8|b[x++]<<16|b[x++]<<24;b=V.g[0],x=V.g[1],I=V.g[2];let M=V.g[3],R;R=b+(M^x&(I^M))+j[0]+3614090360&4294967295,b=x+(R<<7&4294967295|R>>>25),R=M+(I^b&(x^I))+j[1]+3905402710&4294967295,M=b+(R<<12&4294967295|R>>>20),R=I+(x^M&(b^x))+j[2]+606105819&4294967295,I=M+(R<<17&4294967295|R>>>15),R=x+(b^I&(M^b))+j[3]+3250441966&4294967295,x=I+(R<<22&4294967295|R>>>10),R=b+(M^x&(I^M))+j[4]+4118548399&4294967295,b=x+(R<<7&4294967295|R>>>25),R=M+(I^b&(x^I))+j[5]+1200080426&4294967295,M=b+(R<<12&4294967295|R>>>20),R=I+(x^M&(b^x))+j[6]+2821735955&4294967295,I=M+(R<<17&4294967295|R>>>15),R=x+(b^I&(M^b))+j[7]+4249261313&4294967295,x=I+(R<<22&4294967295|R>>>10),R=b+(M^x&(I^M))+j[8]+1770035416&4294967295,b=x+(R<<7&4294967295|R>>>25),R=M+(I^b&(x^I))+j[9]+2336552879&4294967295,M=b+(R<<12&4294967295|R>>>20),R=I+(x^M&(b^x))+j[10]+4294925233&4294967295,I=M+(R<<17&4294967295|R>>>15),R=x+(b^I&(M^b))+j[11]+2304563134&4294967295,x=I+(R<<22&4294967295|R>>>10),R=b+(M^x&(I^M))+j[12]+1804603682&4294967295,b=x+(R<<7&4294967295|R>>>25),R=M+(I^b&(x^I))+j[13]+4254626195&4294967295,M=b+(R<<12&4294967295|R>>>20),R=I+(x^M&(b^x))+j[14]+2792965006&4294967295,I=M+(R<<17&4294967295|R>>>15),R=x+(b^I&(M^b))+j[15]+1236535329&4294967295,x=I+(R<<22&4294967295|R>>>10),R=b+(I^M&(x^I))+j[1]+4129170786&4294967295,b=x+(R<<5&4294967295|R>>>27),R=M+(x^I&(b^x))+j[6]+3225465664&4294967295,M=b+(R<<9&4294967295|R>>>23),R=I+(b^x&(M^b))+j[11]+643717713&4294967295,I=M+(R<<14&4294967295|R>>>18),R=x+(M^b&(I^M))+j[0]+3921069994&4294967295,x=I+(R<<20&4294967295|R>>>12),R=b+(I^M&(x^I))+j[5]+3593408605&4294967295,b=x+(R<<5&4294967295|R>>>27),R=M+(x^I&(b^x))+j[10]+38016083&4294967295,M=b+(R<<9&4294967295|R>>>23),R=I+(b^x&(M^b))+j[15]+3634488961&4294967295,I=M+(R<<14&4294967295|R>>>18),R=x+(M^b&(I^M))+j[4]+3889429448&4294967295,x=I+(R<<20&4294967295|R>>>12),R=b+(I^M&(x^I))+j[9]+568446438&4294967295,b=x+(R<<5&4294967295|R>>>27),R=M+(x^I&(b^x))+j[14]+3275163606&4294967295,M=b+(R<<9&4294967295|R>>>23),R=I+(b^x&(M^b))+j[3]+4107603335&4294967295,I=M+(R<<14&4294967295|R>>>18),R=x+(M^b&(I^M))+j[8]+1163531501&4294967295,x=I+(R<<20&4294967295|R>>>12),R=b+(I^M&(x^I))+j[13]+2850285829&4294967295,b=x+(R<<5&4294967295|R>>>27),R=M+(x^I&(b^x))+j[2]+4243563512&4294967295,M=b+(R<<9&4294967295|R>>>23),R=I+(b^x&(M^b))+j[7]+1735328473&4294967295,I=M+(R<<14&4294967295|R>>>18),R=x+(M^b&(I^M))+j[12]+2368359562&4294967295,x=I+(R<<20&4294967295|R>>>12),R=b+(x^I^M)+j[5]+4294588738&4294967295,b=x+(R<<4&4294967295|R>>>28),R=M+(b^x^I)+j[8]+2272392833&4294967295,M=b+(R<<11&4294967295|R>>>21),R=I+(M^b^x)+j[11]+1839030562&4294967295,I=M+(R<<16&4294967295|R>>>16),R=x+(I^M^b)+j[14]+4259657740&4294967295,x=I+(R<<23&4294967295|R>>>9),R=b+(x^I^M)+j[1]+2763975236&4294967295,b=x+(R<<4&4294967295|R>>>28),R=M+(b^x^I)+j[4]+1272893353&4294967295,M=b+(R<<11&4294967295|R>>>21),R=I+(M^b^x)+j[7]+4139469664&4294967295,I=M+(R<<16&4294967295|R>>>16),R=x+(I^M^b)+j[10]+3200236656&4294967295,x=I+(R<<23&4294967295|R>>>9),R=b+(x^I^M)+j[13]+681279174&4294967295,b=x+(R<<4&4294967295|R>>>28),R=M+(b^x^I)+j[0]+3936430074&4294967295,M=b+(R<<11&4294967295|R>>>21),R=I+(M^b^x)+j[3]+3572445317&4294967295,I=M+(R<<16&4294967295|R>>>16),R=x+(I^M^b)+j[6]+76029189&4294967295,x=I+(R<<23&4294967295|R>>>9),R=b+(x^I^M)+j[9]+3654602809&4294967295,b=x+(R<<4&4294967295|R>>>28),R=M+(b^x^I)+j[12]+3873151461&4294967295,M=b+(R<<11&4294967295|R>>>21),R=I+(M^b^x)+j[15]+530742520&4294967295,I=M+(R<<16&4294967295|R>>>16),R=x+(I^M^b)+j[2]+3299628645&4294967295,x=I+(R<<23&4294967295|R>>>9),R=b+(I^(x|~M))+j[0]+4096336452&4294967295,b=x+(R<<6&4294967295|R>>>26),R=M+(x^(b|~I))+j[7]+1126891415&4294967295,M=b+(R<<10&4294967295|R>>>22),R=I+(b^(M|~x))+j[14]+2878612391&4294967295,I=M+(R<<15&4294967295|R>>>17),R=x+(M^(I|~b))+j[5]+4237533241&4294967295,x=I+(R<<21&4294967295|R>>>11),R=b+(I^(x|~M))+j[12]+1700485571&4294967295,b=x+(R<<6&4294967295|R>>>26),R=M+(x^(b|~I))+j[3]+2399980690&4294967295,M=b+(R<<10&4294967295|R>>>22),R=I+(b^(M|~x))+j[10]+4293915773&4294967295,I=M+(R<<15&4294967295|R>>>17),R=x+(M^(I|~b))+j[1]+2240044497&4294967295,x=I+(R<<21&4294967295|R>>>11),R=b+(I^(x|~M))+j[8]+1873313359&4294967295,b=x+(R<<6&4294967295|R>>>26),R=M+(x^(b|~I))+j[15]+4264355552&4294967295,M=b+(R<<10&4294967295|R>>>22),R=I+(b^(M|~x))+j[6]+2734768916&4294967295,I=M+(R<<15&4294967295|R>>>17),R=x+(M^(I|~b))+j[13]+1309151649&4294967295,x=I+(R<<21&4294967295|R>>>11),R=b+(I^(x|~M))+j[4]+4149444226&4294967295,b=x+(R<<6&4294967295|R>>>26),R=M+(x^(b|~I))+j[11]+3174756917&4294967295,M=b+(R<<10&4294967295|R>>>22),R=I+(b^(M|~x))+j[2]+718787259&4294967295,I=M+(R<<15&4294967295|R>>>17),R=x+(M^(I|~b))+j[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,V.g[2]=V.g[2]+I&4294967295,V.g[3]=V.g[3]+M&4294967295}a.prototype.v=function(V,b){b===void 0&&(b=V.length);const x=b-this.blockSize,j=this.C;let I=this.h,M=0;for(;M<b;){if(I==0)for(;M<=x;)o(this,V,M),M+=this.blockSize;if(typeof V=="string"){for(;M<b;)if(j[I++]=V.charCodeAt(M++),I==this.blockSize){o(this,j),I=0;break}}else for(;M<b;)if(j[I++]=V[M++],I==this.blockSize){o(this,j),I=0;break}}this.h=I,this.o+=b},a.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;b=this.o*8;for(var x=V.length-8;x<V.length;++x)V[x]=b&255,b/=256;for(this.v(V),V=Array(16),b=0,x=0;x<4;++x)for(let j=0;j<32;j+=8)V[b++]=this.g[x]>>>j&255;return V};function h(V,b){var x=p;return Object.prototype.hasOwnProperty.call(x,V)?x[V]:x[V]=b(V)}function d(V,b){this.h=b;const x=[];let j=!0;for(let I=V.length-1;I>=0;I--){const M=V[I]|0;j&&M==b||(x[I]=M,j=!1)}this.g=x}var p={};function _(V){return-128<=V&&V<128?h(V,function(b){return new d([b|0],b<0?-1:0)}):new d([V|0],V<0?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return w;if(V<0)return z(v(-V));const b=[];let x=1;for(let j=0;V>=x;j++)b[j]=V/x|0,x*=4294967296;return new d(b,0)}function A(V,b){if(V.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(V.charAt(0)=="-")return z(A(V.substring(1),b));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=v(Math.pow(b,8));let j=w;for(let M=0;M<V.length;M+=8){var I=Math.min(8,V.length-M);const R=parseInt(V.substring(M,M+I),b);I<8?(I=v(Math.pow(b,I)),j=j.j(I).add(v(R))):(j=j.j(x),j=j.add(v(R)))}return j}var w=_(0),D=_(1),G=_(16777216);r=d.prototype,r.m=function(){if(lt(this))return-z(this).m();let V=0,b=1;for(let x=0;x<this.g.length;x++){const j=this.i(x);V+=(j>=0?j:4294967296+j)*b,b*=4294967296}return V},r.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(Z(this))return"0";if(lt(this))return"-"+z(this).toString(V);const b=v(Math.pow(V,6));var x=this;let j="";for(;;){const I=dt(x,b).g;x=nt(x,I.j(b));let M=((x.g.length>0?x.g[0]:x.h)>>>0).toString(V);if(x=I,Z(x))return M+j;for(;M.length<6;)M="0"+M;j=M+j}},r.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function Z(V){if(V.h!=0)return!1;for(let b=0;b<V.g.length;b++)if(V.g[b]!=0)return!1;return!0}function lt(V){return V.h==-1}r.l=function(V){return V=nt(this,V),lt(V)?-1:Z(V)?0:1};function z(V){const b=V.g.length,x=[];for(let j=0;j<b;j++)x[j]=~V.g[j];return new d(x,~V.h).add(D)}r.abs=function(){return lt(this)?z(this):this},r.add=function(V){const b=Math.max(this.g.length,V.g.length),x=[];let j=0;for(let I=0;I<=b;I++){let M=j+(this.i(I)&65535)+(V.i(I)&65535),R=(M>>>16)+(this.i(I)>>>16)+(V.i(I)>>>16);j=R>>>16,M&=65535,R&=65535,x[I]=R<<16|M}return new d(x,x[x.length-1]&-2147483648?-1:0)};function nt(V,b){return V.add(z(b))}r.j=function(V){if(Z(this)||Z(V))return w;if(lt(this))return lt(V)?z(this).j(z(V)):z(z(this).j(V));if(lt(V))return z(this.j(z(V)));if(this.l(G)<0&&V.l(G)<0)return v(this.m()*V.m());const b=this.g.length+V.g.length,x=[];for(var j=0;j<2*b;j++)x[j]=0;for(j=0;j<this.g.length;j++)for(let I=0;I<V.g.length;I++){const M=this.i(j)>>>16,R=this.i(j)&65535,ht=V.i(I)>>>16,K=V.i(I)&65535;x[2*j+2*I]+=R*K,J(x,2*j+2*I),x[2*j+2*I+1]+=M*K,J(x,2*j+2*I+1),x[2*j+2*I+1]+=R*ht,J(x,2*j+2*I+1),x[2*j+2*I+2]+=M*ht,J(x,2*j+2*I+2)}for(V=0;V<b;V++)x[V]=x[2*V+1]<<16|x[2*V];for(V=b;V<2*b;V++)x[V]=0;return new d(x,0)};function J(V,b){for(;(V[b]&65535)!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function ot(V,b){this.g=V,this.h=b}function dt(V,b){if(Z(b))throw Error("division by zero");if(Z(V))return new ot(w,w);if(lt(V))return b=dt(z(V),b),new ot(z(b.g),z(b.h));if(lt(b))return b=dt(V,z(b)),new ot(z(b.g),b.h);if(V.g.length>30){if(lt(V)||lt(b))throw Error("slowDivide_ only works with positive integers.");for(var x=D,j=b;j.l(V)<=0;)x=mt(x),j=mt(j);var I=_t(x,1),M=_t(j,1);for(j=_t(j,2),x=_t(x,2);!Z(j);){var R=M.add(j);R.l(V)<=0&&(I=I.add(x),M=R),j=_t(j,1),x=_t(x,1)}return b=nt(V,I.j(b)),new ot(I,b)}for(I=w;V.l(b)>=0;){for(x=Math.max(1,Math.floor(V.m()/b.m())),j=Math.ceil(Math.log(x)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),M=v(x),R=M.j(b);lt(R)||R.l(V)>0;)x-=j,M=v(x),R=M.j(b);Z(M)&&(M=D),I=I.add(M),V=nt(V,R)}return new ot(I,V)}r.B=function(V){return dt(this,V).h},r.and=function(V){const b=Math.max(this.g.length,V.g.length),x=[];for(let j=0;j<b;j++)x[j]=this.i(j)&V.i(j);return new d(x,this.h&V.h)},r.or=function(V){const b=Math.max(this.g.length,V.g.length),x=[];for(let j=0;j<b;j++)x[j]=this.i(j)|V.i(j);return new d(x,this.h|V.h)},r.xor=function(V){const b=Math.max(this.g.length,V.g.length),x=[];for(let j=0;j<b;j++)x[j]=this.i(j)^V.i(j);return new d(x,this.h^V.h)};function mt(V){const b=V.g.length+1,x=[];for(let j=0;j<b;j++)x[j]=V.i(j)<<1|V.i(j-1)>>>31;return new d(x,V.h)}function _t(V,b){const x=b>>5;b%=32;const j=V.g.length-x,I=[];for(let M=0;M<j;M++)I[M]=b>0?V.i(M+x)>>>b|V.i(M+x+1)<<32-b:V.i(M+x);return new d(I,V.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,W_=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=A,xs=d}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tv,Ql,ev,Bu,Zf,nv,iv,sv;(function(){var r,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var g=a;u=u.split(".");for(var S=0;S<u.length-1;S++){var q=u[S];if(!(q in g))break t;g=g[q]}u=u[u.length-1],S=g[u],m=m(S),m!=S&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var g=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&g.push([S,m[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,g){return u.call.apply(u.bind,arguments)}function v(u,m,g){return v=_,v.apply(null,arguments)}function A(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function w(u,m){function g(){}g.prototype=m.prototype,u.Z=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(S,q,Y){for(var ut=Array(arguments.length-2),It=2;It<arguments.length;It++)ut[It-2]=arguments[It];return m.prototype[q].apply(S,ut)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function G(u){const m=u.length;if(m>0){const g=Array(m);for(let S=0;S<m;S++)g[S]=u[S];return g}return[]}function Z(u,m){for(let S=1;S<arguments.length;S++){const q=arguments[S];var g=typeof q;if(g=g!="object"?g:q?Array.isArray(q)?"array":g:"null",g=="array"||g=="object"&&typeof q.length=="number"){g=u.length||0;const Y=q.length||0;u.length=g+Y;for(let ut=0;ut<Y;ut++)u[g+ut]=q[ut]}else u.push(q)}}class lt{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function z(u){d.setTimeout(()=>{throw u},0)}function nt(){var u=V;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class J{constructor(){this.h=this.g=null}add(m,g){const S=ot.get();S.set(m,g),this.h?this.h.next=S:this.g=S,this.h=S}}var ot=new lt(()=>new dt,u=>u.reset());class dt{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let mt,_t=!1,V=new J,b=()=>{const u=Promise.resolve(void 0);mt=()=>{u.then(x)}};function x(){for(var u;u=nt();){try{u.h.call(u.g)}catch(g){z(g)}var m=ot;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}_t=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};d.addEventListener("test",g,m),d.removeEventListener("test",g,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function ht(u,m){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(ht,I),ht.prototype.init=function(u,m){const g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),P=0;function X(u,m,g,S,q){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!S,this.ha=q,this.key=++P,this.da=this.fa=!1}function rt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Et(u,m,g){for(const S in u)m.call(g,u[S],S,u)}function C(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function O(u){const m={};for(const g in u)m[g]=u[g];return m}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(u,m){let g,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(g in S)u[g]=S[g];for(let Y=0;Y<tt.length;Y++)g=tt[Y],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function et(u){this.src=u,this.g={},this.h=0}et.prototype.add=function(u,m,g,S,q){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const ut=ft(u,m,S,q);return ut>-1?(m=u[ut],g||(m.fa=!1)):(m=new X(m,this.src,Y,!!S,q),m.fa=g,u.push(m)),m};function ct(u,m){const g=m.type;if(g in u.g){var S=u.g[g],q=Array.prototype.indexOf.call(S,m,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(S,q,1),Y&&(rt(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function ft(u,m,g,S){for(let q=0;q<u.length;++q){const Y=u[q];if(!Y.da&&Y.listener==m&&Y.capture==!!g&&Y.ha==S)return q}return-1}var St="closure_lm_"+(Math.random()*1e6|0),Tt={};function Rt(u,m,g,S,q){if(Array.isArray(m)){for(let Y=0;Y<m.length;Y++)Rt(u,m[Y],g,S,q);return null}return g=go(g),u&&u[K]?u.J(m,g,p(S)?!!S.capture:!1,q):Mt(u,m,g,!1,S,q)}function Mt(u,m,g,S,q,Y){if(!m)throw Error("Invalid event type");const ut=p(q)?!!q.capture:!!q;let It=La(u);if(It||(u[St]=It=new et(u)),g=It.add(m,g,S,ut,Y),g.proxy)return g;if(S=pn(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)M||(q=ut),q===void 0&&(q=!1),u.addEventListener(m.toString(),S,q);else if(u.attachEvent)u.attachEvent(Nr(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function pn(){function u(g){return m.call(u.src,u.listener,g)}const m=Dc;return u}function Dr(u,m,g,S,q){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)Dr(u,m[Y],g,S,q);else S=p(S)?!!S.capture:!!S,g=go(g),u&&u[K]?(u=u.i,Y=String(m).toString(),Y in u.g&&(m=u.g[Y],g=ft(m,g,S,q),g>-1&&(rt(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete u.g[Y],u.h--)))):u&&(u=La(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ft(m,g,S,q)),(g=u>-1?m[u]:null)&&Ms(g))}function Ms(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[K])ct(m.i,u);else{var g=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(g,S,u.capture):m.detachEvent?m.detachEvent(Nr(g),S):m.addListener&&m.removeListener&&m.removeListener(S),(g=La(m))?(ct(g,u),g.h==0&&(g.src=null,m[St]=null)):rt(u)}}}function Nr(u){return u in Tt?Tt[u]:Tt[u]="on"+u}function Dc(u,m){if(u.da)u=!0;else{m=new ht(m,this);const g=u.listener,S=u.ha||u.src;u.fa&&Ms(u),u=g.call(S,m)}return u}function La(u){return u=u[St],u instanceof et?u:null}var en="__closure_events_fn_"+(Math.random()*1e9>>>0);function go(u){return typeof u=="function"?u:(u[en]||(u[en]=function(m){return u.handleEvent(m)}),u[en])}function be(){j.call(this),this.i=new et(this),this.M=this,this.G=null}w(be,j),be.prototype[K]=!0,be.prototype.removeEventListener=function(u,m,g,S){Dr(this,u,m,g,S)};function Ne(u,m){var g,S=u.G;if(S)for(g=[];S;S=S.G)g.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new I(m,u);else if(m instanceof I)m.target=m.target||u;else{var q=m;m=new I(S,u),L(m,q)}q=!0;let Y,ut;if(g)for(ut=g.length-1;ut>=0;ut--)Y=m.g=g[ut],q=di(Y,S,!0,m)&&q;if(Y=m.g=u,q=di(Y,S,!0,m)&&q,q=di(Y,S,!1,m)&&q,g)for(ut=0;ut<g.length;ut++)Y=m.g=g[ut],q=di(Y,S,!1,m)&&q}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const g=u.g[m];for(let S=0;S<g.length;S++)rt(g[S]);delete u.g[m],u.h--}}this.G=null},be.prototype.J=function(u,m,g,S){return this.i.add(String(u),m,!1,g,S)},be.prototype.K=function(u,m,g,S){return this.i.add(String(u),m,!0,g,S)};function di(u,m,g,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let q=!0;for(let Y=0;Y<m.length;++Y){const ut=m[Y];if(ut&&!ut.da&&ut.capture==g){const It=ut.listener,ie=ut.ha||ut.src;ut.fa&&ct(u.i,ut),q=It.call(ie,S)!==!1&&q}}return q&&!S.defaultPrevented}function Nc(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function za(u){u.g=Nc(()=>{u.g=null,u.i&&(u.i=!1,za(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ic extends j{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:za(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(u){j.call(this),this.h=u,this.g={}}w(Os,j);var ki=[];function He(u){Et(u.g,function(m,g){this.g.hasOwnProperty(g)&&Ms(m)},u),u.g={}}Os.prototype.N=function(){Os.Z.N.call(this),He(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=d.JSON.stringify,Ze=d.JSON.parse,Vc=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function yo(){}function _o(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Li(){I.call(this,"d")}w(Li,I);function In(){I.call(this,"c")}w(In,I);var yn={},zi=null;function Ir(){return zi=zi||new be}yn.Ia="serverreachability";function Ba(u){I.call(this,yn.Ia,u)}w(Ba,I);function Bi(u){const m=Ir();Ne(m,new Ba(m))}yn.STAT_EVENT="statevent";function Vr(u,m){I.call(this,yn.STAT_EVENT,u),this.stat=m}w(Vr,I);function fe(u){const m=Ir();Ne(m,new Vr(m,u))}yn.Ja="timingevent";function vo(u,m){I.call(this,yn.Ja,u),this.size=m}w(vo,I);function qi(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Hi(){this.g=!0}Hi.prototype.ua=function(){this.g=!1};function qa(u,m,g,S,q,Y){u.info(function(){if(u.g)if(Y){var ut="",It=Y.split("&");for(let Yt=0;Yt<It.length;Yt++){var ie=It[Yt].split("=");if(ie.length>1){const pe=ie[0];ie=ie[1];const ln=pe.split("_");ut=ln.length>=2&&ln[1]=="type"?ut+(pe+"="+ie+"&"):ut+(pe+"=redacted&")}}}else ut=null;else ut=Y;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+m+`
`+g+`
`+ut})}function Ha(u,m,g,S,q,Y,ut){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+m+`
`+g+`
`+Y+" "+ut})}function mi(u,m,g,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Gn(u,g)+(S?" "+S:"")})}function Mc(u,m){u.info(function(){return"TIMEOUT: "+m})}Hi.prototype.info=function(){};function Gn(u,m){if(!u.g)return m;if(!m)return null;try{const Y=JSON.parse(m);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var g=Y[u];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ut=1;ut<S.length;ut++)S[ut]=""}}}}return gn(Y)}catch{return m}}var de={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ue={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pi;function js(){}w(js,yo),js.prototype.g=function(){return new XMLHttpRequest},pi=new js;function Us(u){return encodeURIComponent(String(u))}function Oc(u){var m=1;u=u.split(":");const g=[];for(;m>0&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function Vn(u,m,g,S){this.j=u,this.i=m,this.l=g,this.S=S||1,this.V=new Os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gi}function Gi(){this.i=null,this.g="",this.h=!1}var Mr={},Fn={};function Qn(u,m,g){u.M=1,u.A=yi(le(m)),u.u=g,u.R=!0,Fi(u,null)}function Fi(u,m){u.F=Date.now(),Ps(u),u.B=le(u.A);var g=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),bo(g.i,"t",S),u.C=0,g=u.j.L,u.h=new Gi,u.g=Hr(u.j,g?m:null,!u.u),u.P>0&&(u.O=new Ic(v(u.Y,u,u.g),u.P)),m=u.V,g=u.g,S=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(ki[0]=q.toString()),q=ki);for(let Y=0;Y<q.length;Y++){const ut=Rt(g,q[Y],S||m.handleEvent,!1,m.h||m);if(!ut)break;m.g[ut.key]=ut}m=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Bi(),qa(u.i,u.v,u.B,u.l,u.S,u.u)}Vn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Ge(u)==3?m.j():this.Y(u)},Vn.prototype.Y=function(u){try{if(u==this.g)t:{const It=Ge(this.g),ie=this.g.ya(),Yt=this.g.ca();if(!(It<3)&&(It!=3||this.g&&(this.h.h||this.g.la()||Ks(this.g)))){this.K||It!=4||ie==7||(ie==8||Yt<=0?Bi(3):Bi(2)),Kn(this);var m=this.g.ca();this.X=m;var g=Qi(this);if(this.o=m==200,Ha(this.i,this.v,this.B,this.l,this.S,It,m),this.o){if(this.U&&!this.L){e:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var Y=S;break e}}Y=null}if(u=Y)mi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Or(this,u);else{this.o=!1,this.m=3,fe(12),Xn(this),ks(this);break t}}if(this.R){u=!0;let pe;for(;!this.K&&this.C<g.length;)if(pe=Eo(this,g),pe==Fn){It==4&&(this.m=4,fe(14),u=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(pe==Mr){this.m=4,fe(15),mi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else mi(this.i,this.l,pe,null),Or(this,pe);if(me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||g.length!=0||this.h.h||(this.m=1,fe(16),u=!1),this.o=this.o&&u,!u)mi(this.i,this.l,g,"[Invalid Chunked Response]"),Xn(this),ks(this);else if(g.length>0&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.aa&&!ut.P&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Wa(ut),ut.P=!0,fe(11))}}else mi(this.i,this.l,g,null),Or(this,g);It==4&&Xn(this),this.o&&!this.K&&(It==4?tl(this.j,this):(this.o=!1,Ps(this)))}else Xs(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,fe(12)):(this.m=0,fe(13)),Xn(this),ks(this)}}}catch{}finally{}};function Qi(u){if(!me(u))return u.g.la();const m=Ks(u.g);if(m==="")return"";let g="";const S=m.length,q=Ge(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Xn(u),ks(u),"";u.h.i=new d.TextDecoder}for(let Y=0;Y<S;Y++)u.h.h=!0,g+=u.h.i.decode(m[Y],{stream:!(q&&Y==S-1)});return m.length=0,u.h.g+=g,u.C=0,u.h.g}function me(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Eo(u,m){var g=u.C,S=m.indexOf(`
`,g);return S==-1?Fn:(g=Number(m.substring(g,S)),isNaN(g)?Mr:(S+=1,S+g>m.length?Fn:(m=m.slice(S,S+g),u.C=S+g,m)))}Vn.prototype.cancel=function(){this.K=!0,Xn(this)};function Ps(u){u.T=Date.now()+u.H,Yn(u,u.H)}function Yn(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=qi(v(u.aa,u),m)}function Kn(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Vn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Mc(this.i,this.B),this.M!=2&&(Bi(),fe(17)),Xn(this),this.m=2,ks(this)):Yn(this,this.T-u)};function ks(u){u.j.I==0||u.K||tl(u.j,u)}function Xn(u){Kn(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,He(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Or(u,m){try{var g=u.j;if(g.I!=0&&(g.g==u||Bs(g.h,u))){if(!u.L&&Bs(g.h,u)&&g.I==3){try{var S=g.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){t:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)qr(g),Zn(g);else break t;Ja(g),fe(18)}}else g.xa=q[1],0<g.xa-g.K&&q[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=qi(v(g.Va,g),6e3));_n(g.h)<=1&&g.ta&&(g.ta=void 0)}else Ei(g,11)}else if((u.L||g.g==u)&&qr(g),!R(m))for(q=g.Ba.g.parse(m),m=0;m<q.length;m++){let Yt=q[m];const pe=Yt[0];if(!(pe<=g.K))if(g.K=pe,Yt=Yt[1],g.I==2)if(Yt[0]=="c"){g.M=Yt[1],g.ba=Yt[2];const ln=Yt[3];ln!=null&&(g.ka=ln,g.j.info("VER="+g.ka));const $n=Yt[4];$n!=null&&(g.za=$n,g.j.info("SVER="+g.za));const jn=Yt[5];jn!=null&&typeof jn=="number"&&jn>0&&(S=1.5*jn,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Un=u.g;if(Un){const Pn=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pn){var Y=S.h;Y.g||Pn.indexOf("spdy")==-1&&Pn.indexOf("quic")==-1&&Pn.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(jr(Y,Y.h),Y.h=null))}if(S.G){const nl=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(S.wa=nl,Zt(S.J,S.G,nl))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var ut=u;if(S.na=Vo(S,S.L?S.ba:null,S.W),ut.L){gi(S.h,ut);var It=ut,ie=S.O;ie&&(It.H=ie),It.D&&(Kn(It),Ps(It)),S.g=ut}else Co(S);g.i.length>0&&Ws(g)}else Yt[0]!="stop"&&Yt[0]!="close"||Ei(g,7);else g.I==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Ei(g,7):$s(g):Yt[0]!="noop"&&g.l&&g.l.qa(Yt),g.A=0)}}Bi(4)}catch{}}var jc=class{constructor(u,m){this.g=u,this.map=m}};function Ls(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _n(u){return u.h?1:u.g?u.g.size:0}function Bs(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function jr(u,m){u.g?u.g.add(m):u.h=m}function gi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ls.prototype.cancel=function(){if(this.i=Ur(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ur(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.G);return m}return G(u.i)}var Pr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uc(u,m){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const S=u[g].indexOf("=");let q,Y=null;S>=0?(q=u[g].substring(0,S),Y=u[g].substring(S+1)):q=u[g],m(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Mn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Mn?(this.l=u.l,Yi(this,u.j),this.o=u.o,this.g=u.g,qs(this,u.u),this.h=u.h,Ki(this,So(u.i)),this.m=u.m):u&&(m=String(u).match(Pr))?(this.l=!1,Yi(this,m[1]||"",!0),this.o=Hs(m[2]||""),this.g=Hs(m[3]||"",!0),qs(this,m[4]),this.h=Hs(m[5]||"",!0),Ki(this,m[6]||"",!0),this.m=Hs(m[7]||"")):(this.l=!1,this.i=new vn(null,this.l))}Mn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Ie(m,Fa,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ie(m,Fa,!0),"@"),u.push(Us(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ie(g,g.charAt(0)=="/"?Xi:Qa,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ie(g,Ao)),u.join("")},Mn.prototype.resolve=function(u){const m=le(this);let g=!!u.j;g?Yi(m,u.j):g=!!u.o,g?m.o=u.o:g=!!u.g,g?m.g=u.g:g=u.u!=null;var S=u.h;if(g)qs(m,u.u);else if(g=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=m.h.lastIndexOf("/");q!=-1&&(S=m.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let ut=0;ut<q.length;){const It=q[ut++];It=="."?S&&ut==q.length&&Y.push(""):It==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),S&&ut==q.length&&Y.push("")):(Y.push(It),S=!0)}S=Y.join("/")}else S=q}return g?m.h=S:g=u.i.toString()!=="",g?Ki(m,So(u.i)):g=!!u.m,g&&(m.m=u.m),m};function le(u){return new Mn(u)}function Yi(u,m,g){u.j=g?Hs(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qs(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Ki(u,m,g){m instanceof vn?(u.i=m,Xa(u.i,u.l)):(g||(m=Ie(m,To)),u.i=new vn(m,u.l))}function Zt(u,m,g){u.i.set(m,g)}function yi(u){return Zt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Hs(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ie(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,Ga),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ga(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fa=/[#\/\?@]/g,Qa=/[#\?:]/g,Xi=/[#\?]/g,To=/[#\?@]/g,Ao=/#/g;function vn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function _i(u){u.g||(u.g=new Map,u.h=0,u.i&&Uc(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}r=vn.prototype,r.add=function(u,m){_i(this),this.i=null,u=On(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function Ya(u,m){_i(u),m=On(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ka(u,m){return _i(u),m=On(u,m),u.g.has(m)}r.forEach=function(u,m){_i(this),this.g.forEach(function(g,S){g.forEach(function(q){u.call(m,q,S,this)},this)},this)};function kr(u,m){_i(u);let g=[];if(typeof m=="string")Ka(u,m)&&(g=g.concat(u.g.get(On(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)g=g.concat(u[m]);return g}r.set=function(u,m){return _i(this),this.i=null,u=On(this,u),Ka(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=kr(this,u),u.length>0?String(u[0]):m):m};function bo(u,m,g){Ya(u,m),g.length>0&&(u.i=null,u.g.set(On(u,m),G(g)),u.h+=g.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var g=m[S];const q=Us(g);g=kr(this,g);for(let Y=0;Y<g.length;Y++){let ut=q;g[Y]!==""&&(ut+="="+Us(g[Y])),u.push(ut)}}return this.i=u.join("&")};function So(u){const m=new vn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function On(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Xa(u,m){m&&!u.j&&(_i(u),u.i=null,u.g.forEach(function(g,S){const q=S.toLowerCase();S!=q&&(Ya(this,S),bo(this,q,g))},u)),u.j=m}function Za(u,m){const g=new Hi;if(d.Image){const S=new Image;S.onload=A($e,g,"TestLoadImage: loaded",!0,m,S),S.onerror=A($e,g,"TestLoadImage: error",!1,m,S),S.onabort=A($e,g,"TestLoadImage: abort",!1,m,S),S.ontimeout=A($e,g,"TestLoadImage: timeout",!1,m,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Zi(u,m){const g=new Hi,S=new AbortController,q=setTimeout(()=>{S.abort(),$e(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(Y=>{clearTimeout(q),Y.ok?$e(g,"TestPingServer: ok",!0,m):$e(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(q),$e(g,"TestPingServer: error",!1,m)})}function $e(u,m,g,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(g)}catch{}}function xo(){this.g=new Vc}function Gs(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Gs,yo),Gs.prototype.g=function(){return new Fs(this.i,this.h)};function Fs(u,m){be.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Fs,be),r=Fs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,vi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Je(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$i(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function $i(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Je(this):vi(this),this.readyState==3&&$i(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Je(this))},r.Na=function(u){this.g&&(this.response=u,Je(this))},r.ga=function(){this.g&&Je(this)};function Je(u){u.readyState=4,u.l=null,u.j=null,u.B=null,vi(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function vi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ji(u){let m="";return Et(u,function(g,S){m+=S,m+=":",m+=g,m+=`\r
`}),m}function En(u,m,g){t:{for(S in g){var S=!1;break t}S=!0}S||(g=Ji(g),typeof u=="string"?g!=null&&Us(g):Zt(u,m,g))}function ee(u){be.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ee,be);var Lr=/^https?$/i,Ro=["POST","PUT"];r=ee.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pi.g(),this.g.onreadystatechange=D(v(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Y){Qs(this,Y);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)g.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())g.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Ro,m,void 0)>=0)||S||q||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ut]of g)this.g.setRequestHeader(Y,ut);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){Qs(this,Y)}};function Qs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Ys(u),Se(u)}function Ys(u){u.A||(u.A=!0,Ne(u,"complete"),Ne(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ne(this,"complete"),Ne(this,"abort"),Se(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Se(this,!0)),ee.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?$a(this):this.Xa())},r.Xa=function(){$a(this)};function $a(u){if(u.h&&typeof h<"u"){if(u.v&&Ge(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ne(u,"readystatechange"),Ge(u)==4){u.h=!1;try{const Y=u.ca();t:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var g;if(!(g=m)){var S;if(S=Y===0){let ut=String(u.D).match(Pr)[1]||null;!ut&&d.self&&d.self.location&&(ut=d.self.location.protocol.slice(0,-1)),S=!Lr.test(ut?ut.toLowerCase():"")}g=S}if(g)Ne(u,"complete"),Ne(u,"success");else{u.o=6;try{var q=Ge(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",Ys(u)}}finally{Se(u)}}}}function Se(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,m||Ne(u,"ready");try{g.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ge(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Ge(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ze(m)}};function Ks(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Xs(u){const m={};u=(u.g&&Ge(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(R(u[S]))continue;var g=Oc(u[S]);const q=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const Y=m[q]||[];m[q]=Y,Y.push(g)}C(m,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function zr(u){this.za=0,this.i=[],this.j=new Hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zs("baseRetryDelayMs",5e3,u),this.Za=Zs("retryDelaySeedMs",1e4,u),this.Ta=Zs("forwardChannelMaxRetries",2,u),this.va=Zs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ls(u&&u.concurrentRequestLimit),this.Ba=new xo,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=zr.prototype,r.ka=8,r.I=1,r.connect=function(u,m,g,S){fe(0),this.W=u,this.H=m||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=Vo(this,null,this.W),Ws(this)};function $s(u){if(Js(u),u.I==3){var m=u.V++,g=le(u.J);if(Zt(g,"SID",u.M),Zt(g,"RID",m),Zt(g,"TYPE","terminate"),tr(u,g),m=new Vn(u,u.j,m),m.M=2,m.A=yi(le(g)),g=!1,d.navigator&&d.navigator.sendBeacon)try{g=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&d.Image&&(new Image().src=m.A,g=!0),g||(m.g=Hr(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ps(m)}Io(u)}function Zn(u){u.g&&(Wa(u),u.g.cancel(),u.g=null)}function Js(u){Zn(u),u.v&&(d.clearTimeout(u.v),u.v=null),qr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Ws(u){if(!zs(u.h)&&!u.m){u.m=!0;var m=u.Ea;mt||b(),_t||(mt(),_t=!0),V.add(m,u),u.D=0}}function Pc(u,m){return _n(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=qi(v(u.Ea,u,m),No(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new Vn(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=O(Y),L(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)t:{for(var m=0,g=0;g<this.i.length;g++){e:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=g;break t}if(m===4096||g===this.i.length-1){m=g+1;break t}}m=1e3}else m=1e3;m=Br(this,q,m),g=le(this.J),Zt(g,"RID",u),Zt(g,"CVER",22),this.G&&Zt(g,"X-HTTP-Session-Id",this.G),tr(this,g),Y&&(this.R?m="headers="+Us(Ji(Y))+"&"+m:this.u&&En(g,this.u,Y)),jr(this.h,q),this.Ra&&Zt(g,"TYPE","init"),this.S?(Zt(g,"$req",m),Zt(g,"SID","null"),q.U=!0,Qn(q,g,null)):Qn(q,g,m),this.I=2}}else this.I==3&&(u?wo(this,u):this.i.length==0||zs(this.h)||wo(this))};function wo(u,m){var g;m?g=m.l:g=u.V++;const S=le(u.J);Zt(S,"SID",u.M),Zt(S,"RID",g),Zt(S,"AID",u.K),tr(u,S),u.u&&u.o&&En(S,u.u,u.o),g=new Vn(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Br(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),jr(u.h,g),Qn(g,S,m)}function tr(u,m){u.H&&Et(u.H,function(g,S){Zt(m,S,g)}),u.l&&Et({},function(g,S){Zt(m,S,g)})}function Br(u,m,g){g=Math.min(u.i.length,g);const S=u.l?v(u.l.Ka,u.l,u):null;t:{var q=u.i;let It=-1;for(;;){const ie=["count="+g];It==-1?g>0?(It=q[0].g,ie.push("ofs="+It)):It=0:ie.push("ofs="+It);let Yt=!0;for(let pe=0;pe<g;pe++){var Y=q[pe].g;const ln=q[pe].map;if(Y-=It,Y<0)It=Math.max(0,q[pe].g-100),Yt=!1;else try{Y="req"+Y+"_"||"";try{var ut=ln instanceof Map?ln:Object.entries(ln);for(const[$n,jn]of ut){let Un=jn;p(jn)&&(Un=gn(jn)),ie.push(Y+$n+"="+encodeURIComponent(Un))}}catch($n){throw ie.push(Y+"type="+encodeURIComponent("_badmap")),$n}}catch{S&&S(ln)}}if(Yt){ut=ie.join("&");break t}}ut=void 0}return u=u.i.splice(0,g),m.G=u,ut}function Co(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;mt||b(),_t||(mt(),_t=!0),V.add(m,u),u.A=0}}function Ja(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=qi(v(u.Da,u),No(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Do(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=qi(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fe(10),Zn(this),Do(this))};function Wa(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Do(u){u.g=new Vn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=le(u.na);Zt(m,"RID","rpc"),Zt(m,"SID",u.M),Zt(m,"AID",u.K),Zt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Zt(m,"TO",u.ia),Zt(m,"TYPE","xmlhttp"),tr(u,m),u.u&&u.o&&En(m,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=yi(le(m)),g.u=null,g.R=!0,Fi(g,u)}r.Va=function(){this.C!=null&&(this.C=null,Zn(this),Ja(this),fe(19))};function qr(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function tl(u,m){var g=null;if(u.g==m){qr(u),Wa(u),u.g=null;var S=2}else if(Bs(u.h,m))g=m.G,gi(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var q=u.D;S=Ir(),Ne(S,new vo(S,g)),Ws(u)}else Co(u);else if(q=m.m,q==3||q==0&&m.X>0||!(S==1&&Pc(u,m)||S==2&&Ja(u)))switch(g&&g.length>0&&(m=u.h,m.i=m.i.concat(g)),q){case 1:Ei(u,5);break;case 4:Ei(u,10);break;case 3:Ei(u,6);break;default:Ei(u,2)}}}function No(u,m){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*m}function Ei(u,m){if(u.j.info("Error code "+m),m==2){var g=v(u.bb,u),S=u.Ua;const q=!S;S=new Mn(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Yi(S,"https"),yi(S),q?Za(S.toString(),g):Zi(S.toString(),g)}else fe(2);u.I=0,u.l&&u.l.pa(m),Io(u),Js(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Io(u){if(u.I=0,u.ja=[],u.l){const m=Ur(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ja,m),Z(u.ja,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.oa()}}function Vo(u,m,g){var S=g instanceof Mn?le(g):new Mn(g);if(S.g!="")m&&(S.g=m+"."+S.g),qs(S,S.u);else{var q=d.location;S=q.protocol,m=m?m+"."+q.hostname:q.hostname,q=+q.port;const Y=new Mn(null);S&&Yi(Y,S),m&&(Y.g=m),q&&qs(Y,q),g&&(Y.h=g),S=Y}return g=u.G,m=u.wa,g&&m&&Zt(S,g,m),Zt(S,"VER",u.ka),tr(u,S),S}function Hr(u,m,g){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ee(new Gs({ab:g})):new ee(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mo(){}r=Mo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Gr(){}Gr.prototype.g=function(u,m){return new We(u,m)};function We(u,m){be.call(this),this.g=new zr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Wi(this)}w(We,be),We.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){$s(this.g)},We.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=gn(u),u=g);m.i.push(new jc(m.Ya++,u)),m.I==3&&Ws(m)},We.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,We.Z.N.call(this)};function el(u){Li.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const g in m){u=g;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(el,Li);function Oo(){In.call(this),this.status=1}w(Oo,In);function Wi(u){this.g=u}w(Wi,Mo),Wi.prototype.ra=function(){Ne(this.g,"a")},Wi.prototype.qa=function(u){Ne(this.g,new el(u))},Wi.prototype.pa=function(u){Ne(this.g,new Oo)},Wi.prototype.oa=function(){Ne(this.g,"b")},Gr.prototype.createWebChannel=Gr.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,sv=function(){return new Gr},iv=function(){return Ir()},nv=yn,Zf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},de.NO_ERROR=0,de.TIMEOUT=8,de.HTTP_ERROR=6,Bu=de,Ue.COMPLETE="complete",ev=Ue,_o.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",be.prototype.listen=be.prototype.J,Ql=_o,ee.prototype.listenOnce=ee.prototype.K,ee.prototype.getLastError=ee.prototype.Ha,ee.prototype.getLastErrorCode=ee.prototype.ya,ee.prototype.getStatus=ee.prototype.ca,ee.prototype.getResponseJson=ee.prototype.La,ee.prototype.getResponseText=ee.prototype.la,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Fa,tv=ee}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});const Iy="@firebase/firestore",Vy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new H_("@firebase/firestore");function Ea(){return Ar.logLevel}function pt(r,...e){if(Ar.logLevel<=Ht.DEBUG){const i=e.map(pd);Ar.debug(`Firestore (${Oa}): ${r}`,...i)}}function ji(r,...e){if(Ar.logLevel<=Ht.ERROR){const i=e.map(pd);Ar.error(`Firestore (${Oa}): ${r}`,...i)}}function Ca(r,...e){if(Ar.logLevel<=Ht.WARN){const i=e.map(pd);Ar.warn(`Firestore (${Oa}): ${r}`,...i)}}function pd(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,rv(r,a,i)}function rv(r,e,i){let a=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw ji(a),new Error(a)}function Qt(r,e,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,r||rv(e,o,a)}function Vt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Sr{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(Ke.UNAUTHENTICATED)))}shutdown(){}}class pA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class gA{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Qt(this.o===void 0,42304);let a=this.i;const o=_=>this.i!==a?(a=this.i,i(_)):Promise.resolve();let h=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new _r,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=h;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},p=_=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>p(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new _r)}}),0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Qt(typeof a.accessToken=="string",31837,{l:a}),new av(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string",2055,{h:e}),new Ke(e)}}class yA{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _A{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new yA(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(Ke.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class My{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vA{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Y_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Qt(this.o===void 0,3512);const a=h=>{h.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,pt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>a(h)))};const o=h=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>o(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new My(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(Qt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new My(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=EA(40);for(let h=0;h<o.length;++h)a.length<20&&o[h]<i&&(a+=e.charAt(o[h]%62))}return a}}function Lt(r,e){return r<e?-1:r>e?1:0}function $f(r,e){const i=Math.min(r.length,e.length);for(let a=0;a<i;a++){const o=r.charAt(a),h=e.charAt(a);if(o!==h)return Lf(o)===Lf(h)?Lt(o,h):Lf(o)?1:-1}return Lt(r.length,e.length)}const TA=55296,AA=57343;function Lf(r){const e=r.charCodeAt(0);return e>=TA&&e<=AA}function Da(r,e,i){return r.length===e.length&&r.every(((a,o)=>i(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="__name__";class ii{constructor(e,i,a){i===void 0?i=0:i>e.length&&wt(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&wt(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return ii.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof ii?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const h=ii.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return Lt(e.length,i.length)}static compareSegments(e,i){const a=ii.isNumericId(e),o=ii.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?ii.extractNumericId(e).compare(ii.extractNumericId(i)):$f(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class se extends ii{construct(e,i,a){return new se(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new yt(at.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((o=>o.length>0)))}return new se(i)}static emptyPath(){return new se([])}}const bA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends ii{construct(e,i,a){return new Be(e,i,a)}static isValidIdentifier(e){return bA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oy}static keyField(){return new Be([Oy])}static fromServerFormat(e){const i=[];let a="",o=0;const h=()=>{if(a.length===0)throw new yt(at.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new yt(at.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new yt(at.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=_,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(a+=p,o++):(h(),o++)}if(h(),d)throw new yt(at.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(i)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.path=e}static fromPath(e){return new At(se.fromString(e))}static fromName(e){return new At(se.fromString(e).popFirst(5))}static empty(){return new At(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return se.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(r,e,i){if(!i)throw new yt(at.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function SA(r,e,i,a){if(e===!0&&a===!0)throw new yt(at.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function jy(r){if(!At.isDocumentKey(r))throw new yt(at.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Uy(r){if(At.isDocumentKey(r))throw new yt(at.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ov(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function yd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":wt(12329,{type:typeof r})}function vr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new yt(at.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=yd(r);throw new yt(at.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e){const i={typeString:r};return e&&(i.value=e),i}function co(r,e){if(!ov(r))throw new yt(at.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const o=e[a].typeString,h="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const d=r[a];if(o&&typeof d!==o){i=`JSON field '${a}' must be a ${o}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${a}' field to equal '${h.value}'`;break}}if(i)throw new yt(at.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-62135596800,ky=1e6;class re{static now(){return re.fromMillis(Date.now())}static fromDate(e){return re.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*ky);return new re(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new yt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new yt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Py)throw new yt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ky}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(co(e,re._jsonSchema))return new re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Py;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}re._jsonSchemaVersion="firestore/timestamp/1.0",re._jsonSchema={type:Ae("string",re._jsonSchemaVersion),seconds:Ae("number"),nanoseconds:Ae("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new re(0,0))}static max(){return new Nt(new re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=-1;function xA(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Nt.fromTimestamp(a===1e9?new re(i+1,0):new re(i,a));return new ws(o,At.empty(),e)}function RA(r){return new ws(r.readTime,r.key,io)}class ws{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new ws(Nt.min(),At.empty(),io)}static max(){return new ws(Nt.max(),At.empty(),io)}}function wA(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=At.comparator(r.documentKey,e.documentKey),i!==0?i:Lt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(r){if(r.code!==at.FAILED_PRECONDITION||r.message!==CA)throw r;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new st(((a,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,o)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof st?i:st.resolve(i)}catch(i){return st.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):st.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):st.reject(i)}static resolve(e){return new st(((i,a)=>{i(e)}))}static reject(e){return new st(((i,a)=>{a(e)}))}static waitFor(e){return new st(((i,a)=>{let o=0,h=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++h,d&&h===o&&i()}),(_=>a(_)))})),d=!0,h===o&&i()}))}static or(e){let i=st.resolve(!1);for(const a of e)i=i.next((o=>o?st.resolve(o):a()));return i}static forEach(e,i){const a=[];return e.forEach(((o,h)=>{a.push(i.call(this,o,h))})),this.waitFor(a)}static mapArray(e,i){return new st(((a,o)=>{const h=e.length,d=new Array(h);let p=0;for(let _=0;_<h;_++){const v=_;i(e[v]).next((A=>{d[v]=A,++p,p===h&&a(d)}),(A=>o(A)))}}))}static doWhile(e,i){return new st(((a,o)=>{const h=()=>{e()===!0?i().next((()=>{h()}),o):a()};h()}))}}function NA(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Ua(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=-1;function dc(r){return r==null}function $u(r){return r===0&&1/r==-1/0}function IA(r){return typeof r=="number"&&Number.isInteger(r)&&!$u(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="";function VA(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=Ly(e)),e=MA(r.get(i),e);return Ly(e)}function MA(r,e){let i=e;const a=r.length;for(let o=0;o<a;o++){const h=r.charAt(o);switch(h){case"\0":i+="";break;case uv:i+="";break;default:i+=h}}return i}function Ly(r){return r+uv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function xr(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function cv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e,i){this.comparator=e,this.root=i||ze.EMPTY}insert(e,i){return new ue(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(e){return new ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ze.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ze{constructor(e,i,a,o,h){this.key=e,this.value=i,this.color=a??ze.RED,this.left=o??ze.EMPTY,this.right=h??ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,h){return new ze(e??this.key,i??this.value,a??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const h=a(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,a),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return ze.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw wt(27949);return e+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(e,i,a,o,h){return this}insert(e,i,a){return new ze(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.comparator=e,this.data=new ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new By(this.data.getIterator())}getIteratorFrom(e){return new By(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof De)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new De(this.comparator);return i.data=e,i}}class By{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new Bn([])}unionWith(e){let i=new De(Be.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new Bn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new hv("Invalid base64 string: "+h):h}})(e);return new qe(i)}static fromUint8Array(e){const i=(function(o){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);return h})(e);return new qe(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qe.EMPTY_BYTE_STRING=new qe("");const OA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(r){if(Qt(!!r,39018),typeof r=="string"){let e=0;const i=OA.exec(r);if(Qt(!!i,46558,{timestamp:r}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:_e(r.seconds),nanos:_e(r.nanos)}}function _e(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ds(r){return typeof r=="string"?qe.fromBase64String(r):qe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="server_timestamp",dv="__type__",mv="__previous_value__",pv="__local_write_time__";function vd(r){return(r?.mapValue?.fields||{})[dv]?.stringValue===fv}function mc(r){const e=r.mapValue.fields[mv];return vd(e)?mc(e):e}function so(r){const e=Cs(r.mapValue.fields[pv].timestampValue);return new re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,i,a,o,h,d,p,_,v,A){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=v,this.isUsingEmulator=A}}const Ju="(default)";class ro{constructor(e,i){this.projectId=e,this.database=i||Ju}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database===Ju}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="__type__",UA="__max__",Pu={mapValue:{}},yv="__vector__",Wu="value";function Ns(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?vd(r)?4:kA(r)?9007199254740991:PA(r)?10:11:wt(28295,{value:r})}function ui(r,e){if(r===e)return!0;const i=Ns(r);if(i!==Ns(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return so(r).isEqual(so(e));case 3:return(function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const d=Cs(o.timestampValue),p=Cs(h.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,h){return Ds(o.bytesValue).isEqual(Ds(h.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,h){return _e(o.geoPointValue.latitude)===_e(h.geoPointValue.latitude)&&_e(o.geoPointValue.longitude)===_e(h.geoPointValue.longitude)})(r,e);case 2:return(function(o,h){if("integerValue"in o&&"integerValue"in h)return _e(o.integerValue)===_e(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const d=_e(o.doubleValue),p=_e(h.doubleValue);return d===p?$u(d)===$u(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Da(r.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return(function(o,h){const d=o.mapValue.fields||{},p=h.mapValue.fields||{};if(zy(d)!==zy(p))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(p[_]===void 0||!ui(d[_],p[_])))return!1;return!0})(r,e);default:return wt(52216,{left:r})}}function ao(r,e){return(r.values||[]).find((i=>ui(i,e)))!==void 0}function Na(r,e){if(r===e)return 0;const i=Ns(r),a=Ns(e);if(i!==a)return Lt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Lt(r.booleanValue,e.booleanValue);case 2:return(function(h,d){const p=_e(h.integerValue||h.doubleValue),_=_e(d.integerValue||d.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1})(r,e);case 3:return qy(r.timestampValue,e.timestampValue);case 4:return qy(so(r),so(e));case 5:return $f(r.stringValue,e.stringValue);case 6:return(function(h,d){const p=Ds(h),_=Ds(d);return p.compareTo(_)})(r.bytesValue,e.bytesValue);case 7:return(function(h,d){const p=h.split("/"),_=d.split("/");for(let v=0;v<p.length&&v<_.length;v++){const A=Lt(p[v],_[v]);if(A!==0)return A}return Lt(p.length,_.length)})(r.referenceValue,e.referenceValue);case 8:return(function(h,d){const p=Lt(_e(h.latitude),_e(d.latitude));return p!==0?p:Lt(_e(h.longitude),_e(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Hy(r.arrayValue,e.arrayValue);case 10:return(function(h,d){const p=h.fields||{},_=d.fields||{},v=p[Wu]?.arrayValue,A=_[Wu]?.arrayValue,w=Lt(v?.values?.length||0,A?.values?.length||0);return w!==0?w:Hy(v,A)})(r.mapValue,e.mapValue);case 11:return(function(h,d){if(h===Pu.mapValue&&d===Pu.mapValue)return 0;if(h===Pu.mapValue)return 1;if(d===Pu.mapValue)return-1;const p=h.fields||{},_=Object.keys(p),v=d.fields||{},A=Object.keys(v);_.sort(),A.sort();for(let w=0;w<_.length&&w<A.length;++w){const D=$f(_[w],A[w]);if(D!==0)return D;const G=Na(p[_[w]],v[A[w]]);if(G!==0)return G}return Lt(_.length,A.length)})(r.mapValue,e.mapValue);default:throw wt(23264,{he:i})}}function qy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Lt(r,e);const i=Cs(r),a=Cs(e),o=Lt(i.seconds,a.seconds);return o!==0?o:Lt(i.nanos,a.nanos)}function Hy(r,e){const i=r.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const h=Na(i[o],a[o]);if(h)return h}return Lt(i.length,a.length)}function Ia(r){return Jf(r)}function Jf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const a=Cs(i);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return Ds(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return At.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let a="[",o=!0;for(const h of i.values||[])o?o=!1:a+=",",a+=Jf(h);return a+"]"})(r.arrayValue):"mapValue"in r?(function(i){const a=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const d of a)h?h=!1:o+=",",o+=`${d}:${Jf(i.fields[d])}`;return o+"}"})(r.mapValue):wt(61005,{value:r})}function qu(r){switch(Ns(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mc(r);return e?16+qu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ds(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,h)=>o+qu(h)),0)})(r.arrayValue);case 10:case 11:return(function(a){let o=0;return xr(a.fields,((h,d)=>{o+=h.length+qu(d)})),o})(r.mapValue);default:throw wt(13486,{value:r})}}function Wf(r){return!!r&&"integerValue"in r}function Ed(r){return!!r&&"arrayValue"in r}function Gy(r){return!!r&&"nullValue"in r}function Fy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hu(r){return!!r&&"mapValue"in r}function PA(r){return(r?.mapValue?.fields||{})[gv]?.stringValue===yv}function $l(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return xr(r.mapValue.fields,((i,a)=>e.mapValue.fields[i]=$l(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=$l(r.arrayValue.values[i]);return e}return{...r}}function kA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===UA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Hu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(i)}setAll(e){let i=Be.emptyPath(),a={},o=[];e.forEach(((d,p)=>{if(!i.isImmediateParentOf(p)){const _=this.getFieldsMap(i);this.applyChanges(_,a,o),a={},o=[],i=p.popLast()}d?a[p.lastSegment()]=$l(d):o.push(p.lastSegment())}));const h=this.getFieldsMap(i);this.applyChanges(h,a,o)}delete(e){const i=this.field(e.popLast());Hu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Hu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){xr(i,((o,h)=>e[o]=h));for(const o of a)delete e[o]}clone(){return new Cn($l(this.value))}}function _v(r){const e=[];return xr(r.fields,((i,a)=>{const o=new Be([i]);if(Hu(a)){const h=_v(a.mapValue).fields;if(h.length===0)e.push(o);else for(const d of h)e.push(o.child(d))}else e.push(o)})),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,i,a,o,h,d,p){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=h,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Xe(e,0,Nt.min(),Nt.min(),Nt.min(),Cn.empty(),0)}static newFoundDocument(e,i,a,o){return new Xe(e,1,i,Nt.min(),a,o,0)}static newNoDocument(e,i){return new Xe(e,2,i,Nt.min(),Nt.min(),Cn.empty(),0)}static newUnknownDocument(e,i){return new Xe(e,3,i,Nt.min(),Nt.min(),Cn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,i){this.position=e,this.inclusive=i}}function Qy(r,e,i){let a=0;for(let o=0;o<r.position.length;o++){const h=e[o],d=r.position[o];if(h.field.isKeyField()?a=At.comparator(At.fromName(d.referenceValue),i.key):a=Na(d,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function Yy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!ui(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,i="asc"){this.field=e,this.dir=i}}function LA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{}class we extends vv{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new BA(e,i,a):i==="array-contains"?new GA(e,a):i==="in"?new FA(e,a):i==="not-in"?new QA(e,a):i==="array-contains-any"?new YA(e,a):new we(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new qA(e,a):new HA(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Na(i,this.value)):i!==null&&Ns(this.value)===Ns(i)&&this.matchesComparison(Na(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends vv{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new ci(e,i)}matches(e){return Ev(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ev(r){return r.op==="and"}function Tv(r){return zA(r)&&Ev(r)}function zA(r){for(const e of r.filters)if(e instanceof ci)return!1;return!0}function td(r){if(r instanceof we)return r.field.canonicalString()+r.op.toString()+Ia(r.value);if(Tv(r))return r.filters.map((e=>td(e))).join(",");{const e=r.filters.map((i=>td(i))).join(",");return`${r.op}(${e})`}}function Av(r,e){return r instanceof we?(function(a,o){return o instanceof we&&a.op===o.op&&a.field.isEqual(o.field)&&ui(a.value,o.value)})(r,e):r instanceof ci?(function(a,o){return o instanceof ci&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((h,d,p)=>h&&Av(d,o.filters[p])),!0):!1})(r,e):void wt(19439)}function bv(r){return r instanceof we?(function(i){return`${i.field.canonicalString()} ${i.op} ${Ia(i.value)}`})(r):r instanceof ci?(function(i){return i.op.toString()+" {"+i.getFilters().map(bv).join(" ,")+"}"})(r):"Filter"}class BA extends we{constructor(e,i,a){super(e,i,a),this.key=At.fromName(a.referenceValue)}matches(e){const i=At.comparator(e.key,this.key);return this.matchesComparison(i)}}class qA extends we{constructor(e,i){super(e,"in",i),this.keys=Sv("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class HA extends we{constructor(e,i){super(e,"not-in",i),this.keys=Sv("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function Sv(r,e){return(e.arrayValue?.values||[]).map((i=>At.fromName(i.referenceValue)))}class GA extends we{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Ed(i)&&ao(i.arrayValue,this.value)}}class FA extends we{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&ao(this.value.arrayValue,i)}}class QA extends we{constructor(e,i){super(e,"not-in",i)}matches(e){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!ao(this.value.arrayValue,i)}}class YA extends we{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Ed(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>ao(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,i=null,a=[],o=[],h=null,d=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=h,this.startAt=d,this.endAt=p,this.Te=null}}function Ky(r,e=null,i=[],a=[],o=null,h=null,d=null){return new KA(r,e,i,a,o,h,d)}function Td(r){const e=Vt(r);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>td(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(h){return h.field.canonicalString()+h.dir})(a))).join(","),dc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>Ia(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>Ia(a))).join(",")),e.Te=i}return e.Te}function Ad(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!LA(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!Av(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Yy(r.startAt,e.startAt)&&Yy(r.endAt,e.endAt)}function ed(r){return At.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,i=null,a=[],o=[],h=null,d="F",p=null,_=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=h,this.limitType=d,this.startAt=p,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XA(r,e,i,a,o,h,d,p){return new pc(r,e,i,a,o,h,d,p)}function bd(r){return new pc(r)}function Xy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ZA(r){return r.collectionGroup!==null}function Jl(r){const e=Vt(r);if(e.Ie===null){e.Ie=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new De(Be.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new ec(h,a))})),i.has(Be.keyField().canonicalString())||e.Ie.push(new ec(Be.keyField(),a))}return e.Ie}function si(r){const e=Vt(r);return e.Ee||(e.Ee=$A(e,Jl(r))),e.Ee}function $A(r,e){if(r.limitType==="F")return Ky(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const h=o.dir==="desc"?"asc":"desc";return new ec(o.field,h)}));const i=r.endAt?new tc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new tc(r.startAt.position,r.startAt.inclusive):null;return Ky(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function nd(r,e,i){return new pc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function gc(r,e){return Ad(si(r),si(e))&&r.limitType===e.limitType}function xv(r){return`${Td(si(r))}|lt:${r.limitType}`}function Ta(r){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((o=>bv(o))).join(", ")}]`),dc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((o=>Ia(o))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((o=>Ia(o))).join(",")),`Target(${a})`})(si(r))}; limitType=${r.limitType})`}function yc(r,e){return e.isFoundDocument()&&(function(a,o){const h=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):At.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)})(r,e)&&(function(a,o){for(const h of Jl(a))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0})(r,e)&&(function(a,o){for(const h of a.filters)if(!h.matches(o))return!1;return!0})(r,e)&&(function(a,o){return!(a.startAt&&!(function(d,p,_){const v=Qy(d,p,_);return d.inclusive?v<=0:v<0})(a.startAt,Jl(a),o)||a.endAt&&!(function(d,p,_){const v=Qy(d,p,_);return d.inclusive?v>=0:v>0})(a.endAt,Jl(a),o))})(r,e)}function JA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Rv(r){return(e,i)=>{let a=!1;for(const o of Jl(r)){const h=WA(o,e,i);if(h!==0)return h;a=a||o.field.isKeyField()}return 0}}function WA(r,e,i){const a=r.field.isKeyField()?At.comparator(e.key,i.key):(function(h,d,p){const _=d.data.field(h),v=p.data.field(h);return _!==null&&v!==null?Na(_,v):wt(42886)})(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return wt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,h]of a)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xr(this.inner,((i,a)=>{for(const[o,h]of a)e(o,h)}))}isEmpty(){return cv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new ue(At.comparator);function Ui(){return tb}const wv=new ue(At.comparator);function Yl(...r){let e=wv;for(const i of r)e=e.insert(i.key,i);return e}function Cv(r){let e=wv;return r.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function yr(){return Wl()}function Dv(){return Wl()}function Wl(){return new Rr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const eb=new ue(At.comparator),nb=new De(At.comparator);function zt(...r){let e=nb;for(const i of r)e=e.add(i);return e}const ib=new De(Lt);function sb(){return ib}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function Nv(r){return{integerValue:""+r}}function rb(r,e){return IA(e)?Nv(e):Sd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this._=void 0}}function ab(r,e,i){return r instanceof nc?(function(o,h){const d={fields:{[dv]:{stringValue:fv},[pv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&vd(h)&&(h=mc(h)),h&&(d.fields[mv]=h),{mapValue:d}})(i,e):r instanceof lo?Vv(r,e):r instanceof oo?Mv(r,e):(function(o,h){const d=Iv(o,h),p=Zy(d)+Zy(o.Ae);return Wf(d)&&Wf(o.Ae)?Nv(p):Sd(o.serializer,p)})(r,e)}function lb(r,e,i){return r instanceof lo?Vv(r,e):r instanceof oo?Mv(r,e):i}function Iv(r,e){return r instanceof ic?(function(a){return Wf(a)||(function(h){return!!h&&"doubleValue"in h})(a)})(e)?e:{integerValue:0}:null}class nc extends _c{}class lo extends _c{constructor(e){super(),this.elements=e}}function Vv(r,e){const i=Ov(e);for(const a of r.elements)i.some((o=>ui(o,a)))||i.push(a);return{arrayValue:{values:i}}}class oo extends _c{constructor(e){super(),this.elements=e}}function Mv(r,e){let i=Ov(e);for(const a of r.elements)i=i.filter((o=>!ui(o,a)));return{arrayValue:{values:i}}}class ic extends _c{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function Zy(r){return _e(r.integerValue||r.doubleValue)}function Ov(r){return Ed(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function ob(r,e){return r.field.isEqual(e.field)&&(function(a,o){return a instanceof lo&&o instanceof lo||a instanceof oo&&o instanceof oo?Da(a.elements,o.elements,ui):a instanceof ic&&o instanceof ic?ui(a.Ae,o.Ae):a instanceof nc&&o instanceof nc})(r.transform,e.transform)}class ub{constructor(e,i){this.version=e,this.transformResults=i}}class ri{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class vc{}function jv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new xd(r.key,ri.none()):new ho(r.key,r.data,ri.none());{const i=r.data,a=Cn.empty();let o=new De(Be.comparator);for(let h of e.fields)if(!o.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?a.delete(h):a.set(h,d),o=o.add(h)}return new wr(r.key,a,new Bn(o.toArray()),ri.none())}}function cb(r,e,i){r instanceof ho?(function(o,h,d){const p=o.value.clone(),_=Jy(o.fieldTransforms,h,d.transformResults);p.setAll(_),h.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,i):r instanceof wr?(function(o,h,d){if(!Gu(o.precondition,h))return void h.convertToUnknownDocument(d.version);const p=Jy(o.fieldTransforms,h,d.transformResults),_=h.data;_.setAll(Uv(o)),_.setAll(p),h.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(r,e,i):(function(o,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,i)}function to(r,e,i,a){return r instanceof ho?(function(h,d,p,_){if(!Gu(h.precondition,d))return p;const v=h.value.clone(),A=Wy(h.fieldTransforms,_,d);return v.setAll(A),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,i,a):r instanceof wr?(function(h,d,p,_){if(!Gu(h.precondition,d))return p;const v=Wy(h.fieldTransforms,_,d),A=d.data;return A.setAll(Uv(h)),A.setAll(v),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),p===null?null:p.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((w=>w.field)))})(r,e,i,a):(function(h,d,p){return Gu(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,i)}function hb(r,e){let i=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),h=Iv(a.transform,o||null);h!=null&&(i===null&&(i=Cn.empty()),i.set(a.field,h))}return i||null}function $y(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Da(a,o,((h,d)=>ob(h,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ho extends vc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wr extends vc{constructor(e,i,a,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Uv(r){const e=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}})),e}function Jy(r,e,i){const a=new Map;Qt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let o=0;o<i.length;o++){const h=r[o],d=h.transform,p=e.data.field(h.field);a.set(h.field,lb(d,p,i[o]))}return a}function Wy(r,e,i){const a=new Map;for(const o of r){const h=o.transform,d=i.data.field(o.field);a.set(o.field,ab(h,d,e))}return a}class xd extends vc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fb extends vc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&cb(h,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=to(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=to(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=Dv();return this.mutations.forEach((o=>{const h=e.get(o.key),d=h.overlayedDocument;let p=this.applyToLocalView(d,h.mutatedFields);p=i.has(o.key)?null:p;const _=jv(d,p);_!==null&&a.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(Nt.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),zt())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,((i,a)=>$y(i,a)))&&Da(this.baseMutations,e.baseMutations,((i,a)=>$y(i,a)))}}class Rd{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){Qt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return eb})();const h=e.mutations;for(let d=0;d<h.length;d++)o=o.insert(h[d].key,a[d].version);return new Rd(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te,qt;function gb(r){switch(r){case at.OK:return wt(64938);case at.CANCELLED:case at.UNKNOWN:case at.DEADLINE_EXCEEDED:case at.RESOURCE_EXHAUSTED:case at.INTERNAL:case at.UNAVAILABLE:case at.UNAUTHENTICATED:return!1;case at.INVALID_ARGUMENT:case at.NOT_FOUND:case at.ALREADY_EXISTS:case at.PERMISSION_DENIED:case at.FAILED_PRECONDITION:case at.ABORTED:case at.OUT_OF_RANGE:case at.UNIMPLEMENTED:case at.DATA_LOSS:return!0;default:return wt(15467,{code:r})}}function Pv(r){if(r===void 0)return ji("GRPC error has no .code"),at.UNKNOWN;switch(r){case Te.OK:return at.OK;case Te.CANCELLED:return at.CANCELLED;case Te.UNKNOWN:return at.UNKNOWN;case Te.DEADLINE_EXCEEDED:return at.DEADLINE_EXCEEDED;case Te.RESOURCE_EXHAUSTED:return at.RESOURCE_EXHAUSTED;case Te.INTERNAL:return at.INTERNAL;case Te.UNAVAILABLE:return at.UNAVAILABLE;case Te.UNAUTHENTICATED:return at.UNAUTHENTICATED;case Te.INVALID_ARGUMENT:return at.INVALID_ARGUMENT;case Te.NOT_FOUND:return at.NOT_FOUND;case Te.ALREADY_EXISTS:return at.ALREADY_EXISTS;case Te.PERMISSION_DENIED:return at.PERMISSION_DENIED;case Te.FAILED_PRECONDITION:return at.FAILED_PRECONDITION;case Te.ABORTED:return at.ABORTED;case Te.OUT_OF_RANGE:return at.OUT_OF_RANGE;case Te.UNIMPLEMENTED:return at.UNIMPLEMENTED;case Te.DATA_LOSS:return at.DATA_LOSS;default:return wt(39323,{code:r})}}(qt=Te||(Te={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=new xs([4294967295,4294967295],0);function t_(r){const e=yb().encode(r),i=new W_;return i.update(e),new Uint8Array(i.digest())}function e_(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new xs([i,a],0),new xs([o,h],0)]}class wd{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new Kl(`Invalid padding: ${i}`);if(a<0)throw new Kl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=xs.fromNumber(this.ge)}ye(e,i,a){let o=e.add(i.multiply(xs.fromNumber(a)));return o.compare(_b)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=t_(e),[a,o]=e_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(a,o,h);if(!this.we(d))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new wd(h,o,i);return a.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const i=t_(e),[a,o]=e_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(a,o,h);this.Se(d)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,i,a,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,fo.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Ec(Nt.min(),o,new ue(Lt),Ui(),zt())}}class fo{constructor(e,i,a,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new fo(a,i,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,i,a,o){this.be=e,this.removedTargetIds=i,this.key=a,this.De=o}}class kv{constructor(e,i){this.targetId=e,this.Ce=i}}class Lv{constructor(e,i,a=qe.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class n_{constructor(){this.ve=0,this.Fe=i_(),this.Me=qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=zt(),i=zt(),a=zt();return this.Fe.forEach(((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:wt(38017,{changeType:h})}})),new fo(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=i_()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ui(),this.Je=ku(),this.He=ku(),this.Ye=new ue(Lt)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:wt(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,o)=>{this.rt(o)&&i(o)}))}st(e){const i=e.targetId,a=e.Ce.count,o=this.ot(i);if(o){const h=o.target;if(ed(h))if(a===0){const d=new At(h.path);this.et(i,d,Xe.newNoDocument(d,Nt.min()))}else Qt(a===1,20013,{expectedCount:a});else{const d=this._t(i);if(d!==a){const p=this.ut(e),_=p?this.ct(p,e,d):1;if(_!==0){this.it(i);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,v)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:h=0}=i;let d,p;try{d=Ds(a).toUint8Array()}catch(_){if(_ instanceof hv)return Ca("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{p=new wd(d,o,h)}catch(_){return Ca(_ instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return p.ge===0?null:p}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let o=0;return a.forEach((h=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(p)||(this.et(i,h,null),o++)})),o}Tt(e){const i=new Map;this.ze.forEach(((h,d)=>{const p=this.ot(d);if(p){if(h.current&&ed(p.target)){const _=new At(p.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,Xe.newNoDocument(_,e))}h.Be&&(i.set(d,h.ke()),h.qe())}}));let a=zt();this.He.forEach(((h,d)=>{let p=!0;d.forEachWhile((_=>{const v=this.ot(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(h))})),this.je.forEach(((h,d)=>d.setReadTime(e)));const o=new Ec(e,i,this.Ye,this.je,a);return this.je=Ui(),this.Je=ku(),this.He=ku(),this.Ye=new ue(Lt),o}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new n_,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new De(Lt),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new De(Lt),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||pt("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new n_),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function ku(){return new ue(At.comparator)}function i_(){return new ue(At.comparator)}const Eb={asc:"ASCENDING",desc:"DESCENDING"},Tb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ab={and:"AND",or:"OR"};class bb{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function id(r,e){return r.useProto3Json||dc(e)?e:{value:e}}function sc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Sb(r,e){return sc(r,e.toTimestamp())}function ai(r){return Qt(!!r,49232),Nt.fromTimestamp((function(i){const a=Cs(i);return new re(a.seconds,a.nanos)})(r))}function Cd(r,e){return sd(r,e).canonicalString()}function sd(r,e){const i=(function(o){return new se(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?i:i.child(e)}function Bv(r){const e=se.fromString(r);return Qt(Qv(e),10190,{key:e.toString()}),e}function rd(r,e){return Cd(r.databaseId,e.path)}function zf(r,e){const i=Bv(e);if(i.get(1)!==r.databaseId.projectId)throw new yt(at.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new yt(at.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new At(Hv(i))}function qv(r,e){return Cd(r.databaseId,e)}function xb(r){const e=Bv(r);return e.length===4?se.emptyPath():Hv(e)}function ad(r){return new se(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Hv(r){return Qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function s_(r,e,i){return{name:rd(r,e),fields:i.value.mapValue.fields}}function Rb(r,e){let i;if("targetChange"in e){e.targetChange;const a=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:wt(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=(function(v,A){return v.useProto3Json?(Qt(A===void 0||typeof A=="string",58123),qe.fromBase64String(A||"")):(Qt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),qe.fromUint8Array(A||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const A=v.code===void 0?at.UNKNOWN:Pv(v.code);return new yt(A,v.message||"")})(d);i=new Lv(a,o,h,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=zf(r,a.document.name),h=ai(a.document.updateTime),d=a.document.createTime?ai(a.document.createTime):Nt.min(),p=new Cn({mapValue:{fields:a.document.fields}}),_=Xe.newFoundDocument(o,h,d,p),v=a.targetIds||[],A=a.removedTargetIds||[];i=new Fu(v,A,_.key,_)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=zf(r,a.document),h=a.readTime?ai(a.readTime):Nt.min(),d=Xe.newNoDocument(o,h),p=a.removedTargetIds||[];i=new Fu([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=zf(r,a.document),h=a.removedTargetIds||[];i=new Fu([],h,o,null)}else{if(!("filter"in e))return wt(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:h}=a,d=new pb(o,h),p=a.targetId;i=new kv(p,d)}}return i}function wb(r,e){let i;if(e instanceof ho)i={update:s_(r,e.key,e.value)};else if(e instanceof xd)i={delete:rd(r,e.key)};else if(e instanceof wr)i={update:s_(r,e.key,e.data),updateMask:Ub(e.fieldMask)};else{if(!(e instanceof fb))return wt(16599,{Vt:e.type});i={verify:rd(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(h,d){const p=d.transform;if(p instanceof nc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof lo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof oo)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ic)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw wt(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(o,h){return h.updateTime!==void 0?{updateTime:Sb(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:wt(27497)})(r,e.precondition)),i}function Cb(r,e){return r&&r.length>0?(Qt(e!==void 0,14353),r.map((i=>(function(o,h){let d=o.updateTime?ai(o.updateTime):ai(h);return d.isEqual(Nt.min())&&(d=ai(h)),new ub(d,o.transformResults||[])})(i,e)))):[]}function Db(r,e){return{documents:[qv(r,e.path)]}}function Nb(r,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=qv(r,o);const h=(function(v){if(v.length!==0)return Fv(ci.create(v,"and"))})(e.filters);h&&(i.structuredQuery.where=h);const d=(function(v){if(v.length!==0)return v.map((A=>(function(D){return{field:Aa(D.field),direction:Mb(D.dir)}})(A)))})(e.orderBy);d&&(i.structuredQuery.orderBy=d);const p=id(r,e.limit);return p!==null&&(i.structuredQuery.limit=p),e.startAt&&(i.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:i,parent:o}}function Ib(r){let e=xb(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){Qt(a===1,65062);const A=i.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let h=[];i.where&&(h=(function(w){const D=Gv(w);return D instanceof ci&&Tv(D)?D.getFilters():[D]})(i.where));let d=[];i.orderBy&&(d=(function(w){return w.map((D=>(function(Z){return new ec(ba(Z.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(D)))})(i.orderBy));let p=null;i.limit&&(p=(function(w){let D;return D=typeof w=="object"?w.value:w,dc(D)?null:D})(i.limit));let _=null;i.startAt&&(_=(function(w){const D=!!w.before,G=w.values||[];return new tc(G,D)})(i.startAt));let v=null;return i.endAt&&(v=(function(w){const D=!w.before,G=w.values||[];return new tc(G,D)})(i.endAt)),XA(e,o,d,h,p,"F",_,v)}function Vb(r,e){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:o})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Gv(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=ba(i.unaryFilter.field);return we.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=ba(i.unaryFilter.field);return we.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=ba(i.unaryFilter.field);return we.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ba(i.unaryFilter.field);return we.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}})(r):r.fieldFilter!==void 0?(function(i){return we.create(ba(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return ci.create(i.compositeFilter.filters.map((a=>Gv(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return wt(1026)}})(i.compositeFilter.op))})(r):wt(30097,{filter:r})}function Mb(r){return Eb[r]}function Ob(r){return Tb[r]}function jb(r){return Ab[r]}function Aa(r){return{fieldPath:r.canonicalString()}}function ba(r){return Be.fromServerFormat(r.fieldPath)}function Fv(r){return r instanceof we?(function(i){if(i.op==="=="){if(Fy(i.value))return{unaryFilter:{field:Aa(i.field),op:"IS_NAN"}};if(Gy(i.value))return{unaryFilter:{field:Aa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Fy(i.value))return{unaryFilter:{field:Aa(i.field),op:"IS_NOT_NAN"}};if(Gy(i.value))return{unaryFilter:{field:Aa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(i.field),op:Ob(i.op),value:i.value}}})(r):r instanceof ci?(function(i){const a=i.getFilters().map((o=>Fv(o)));return a.length===1?a[0]:{compositeFilter:{op:jb(i.op),filters:a}}})(r):wt(54877,{filter:r})}function Ub(r){const e=[];return r.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Qv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,i,a,o,h=Nt.min(),d=Nt.min(),p=qe.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.yt=e}}function kb(r){const e=Ib({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Cn=new zb}addToCollectionParentIndex(e,i){return this.Cn.add(i),st.resolve()}getCollectionParents(e,i){return st.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return st.resolve()}deleteFieldIndex(e,i){return st.resolve()}deleteAllFieldIndexes(e){return st.resolve()}createTargetIndexes(e,i){return st.resolve()}getDocumentsMatchingTarget(e,i){return st.resolve(null)}getIndexType(e,i){return st.resolve(0)}getFieldIndexes(e,i){return st.resolve([])}getNextCollectionGroupToUpdate(e){return st.resolve(null)}getMinOffset(e,i){return st.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,i){return st.resolve(ws.min())}updateCollectionGroup(e,i,a){return st.resolve()}updateIndexEntries(e,i){return st.resolve()}}class zb{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new De(se.comparator),h=!o.has(a);return this.index[i]=o.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new De(se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yv=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(Yv,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Va(0)}static cr(){return new Va(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="LruGarbageCollector",Bb=1048576;function l_([r,e],[i,a]){const o=Lt(r,i);return o===0?Lt(e,a):o}class qb{constructor(e){this.Ir=e,this.buffer=new De(l_),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();l_(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class Hb{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pt(a_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Ua(i)?pt(a_,"Ignoring IndexedDB error during garbage collection: ",i):await ja(i)}await this.Vr(3e5)}))}}class Gb{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return st.resolve(fc.ce);const a=new qb(i);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(r_)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r_):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,o,h,d,p,_,v;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,p=Date.now(),this.removeTargets(e,a,i)))).next((w=>(h=w,_=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(v=Date.now(),Ea()<=Ht.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${h} targets in `+(_-p)+`ms
	Removed ${w} documents in `+(v-_)+`ms
Total Duration: ${v-A}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:w}))))}}function Fb(r,e){return new Gb(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.changes=new Rr((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?st.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,i)))).next((o=>(a!==null&&to(a.mutation,o,Bn.empty(),re.now()),o)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,zt()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=zt()){const o=yr();return this.populateOverlays(e,o,i).next((()=>this.computeViews(e,i,o,a).next((h=>{let d=Yl();return h.forEach(((p,_)=>{d=d.insert(p,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,i){const a=yr();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,zt())))}populateOverlays(e,i,a){const o=[];return a.forEach((h=>{i.has(h)||o.push(h)})),this.documentOverlayCache.getOverlays(e,o).next((h=>{h.forEach(((d,p)=>{i.set(d,p)}))}))}computeViews(e,i,a,o){let h=Ui();const d=Wl(),p=(function(){return Wl()})();return i.forEach(((_,v)=>{const A=a.get(v.key);o.has(v.key)&&(A===void 0||A.mutation instanceof wr)?h=h.insert(v.key,v):A!==void 0?(d.set(v.key,A.mutation.getFieldMask()),to(A.mutation,v,A.mutation.getFieldMask(),re.now())):d.set(v.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,h).next((_=>(_.forEach(((v,A)=>d.set(v,A))),i.forEach(((v,A)=>p.set(v,new Yb(A,d.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,i){const a=Wl();let o=new ue(((d,p)=>d-p)),h=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((d=>{for(const p of d)p.keys().forEach((_=>{const v=i.get(_);if(v===null)return;let A=a.get(_)||Bn.empty();A=p.applyToLocalView(v,A),a.set(_,A);const w=(o.get(p.batchId)||zt()).add(_);o=o.insert(p.batchId,w)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),v=_.key,A=_.value,w=Dv();A.forEach((D=>{if(!h.has(D)){const G=jv(i.get(D),a.get(D));G!==null&&w.set(D,G),h=h.add(D)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,w))}return st.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,o){return(function(d){return At.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):ZA(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next((h=>{const d=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-h.size):st.resolve(yr());let p=io,_=h;return d.next((v=>st.forEach(v,((A,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),h.get(A)?st.resolve():this.remoteDocumentCache.getEntry(e,A).next((D=>{_=_.insert(A,D)}))))).next((()=>this.populateOverlays(e,v,h))).next((()=>this.computeViews(e,_,v,zt()))).next((A=>({batchId:p,changes:Cv(A)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new At(i)).next((a=>{let o=Yl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const h=i.collectionGroup;let d=Yl();return this.indexManager.getCollectionParents(e,h).next((p=>st.forEach(p,(_=>{const v=(function(w,D){return new pc(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(i,_.child(h));return this.getDocumentsMatchingCollectionQuery(e,v,a,o).next((A=>{A.forEach(((w,D)=>{d=d.insert(w,D)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,i,a,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,o)))).next((d=>{h.forEach(((_,v)=>{const A=v.getKey();d.get(A)===null&&(d=d.insert(A,Xe.newInvalidDocument(A)))}));let p=Yl();return d.forEach(((_,v)=>{const A=h.get(_);A!==void 0&&to(A.mutation,v,Bn.empty(),re.now()),yc(i,v)&&(p=p.insert(_,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return st.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:ai(o.createTime)}})(i)),st.resolve()}getNamedQuery(e,i){return st.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:kb(o.bundledQuery),readTime:ai(o.readTime)}})(i)),st.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.overlays=new ue(At.comparator),this.qr=new Map}getOverlay(e,i){return st.resolve(this.overlays.get(i))}getOverlays(e,i){const a=yr();return st.forEach(i,(o=>this.getOverlay(e,o).next((h=>{h!==null&&a.set(o,h)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((o,h)=>{this.St(e,i,h)})),st.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(a)),st.resolve()}getOverlaysForCollection(e,i,a){const o=yr(),h=i.length+1,d=new At(i.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const _=p.getNext().value,v=_.getKey();if(!i.isPrefixOf(v.path))break;v.path.length===h&&_.largestBatchId>a&&o.set(_.getKey(),_)}return st.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let h=new ue(((v,A)=>v-A));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===i&&v.largestBatchId>a){let A=h.get(v.largestBatchId);A===null&&(A=yr(),h=h.insert(v.largestBatchId,A)),A.set(v.getKey(),v)}}const p=yr(),_=h.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((v,A)=>p.set(v,A))),!(p.size()>=o)););return st.resolve(p)}St(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new mb(i,a));let h=this.qr.get(i);h===void 0&&(h=zt(),this.qr.set(i,h)),this.qr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return st.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,st.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(){this.Qr=new De(je.$r),this.Ur=new De(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new je(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new je(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new At(new se([])),a=new je(i,e),o=new je(i,e+1),h=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),h.push(d.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new At(new se([])),a=new je(i,e),o=new je(i,e+1);let h=zt();return this.Ur.forEachInRange([a,o],(d=>{h=h.add(d.key)})),h}containsKey(e){const i=new je(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class je{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return At.comparator(e.key,i.key)||Lt(e.Yr,i.Yr)}static Kr(e,i){return Lt(e.Yr,i.Yr)||At.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new De(je.$r)}checkEmpty(e){return st.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new db(h,i,a,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new je(p.key,h)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return st.resolve(d)}lookupMutationBatch(e,i){return st.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.ei(a),h=o<0?0:o;return st.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(this.mutationQueue.length===0?_d:this.tr-1)}getAllMutationBatches(e){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new je(i,0),o=new je(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([a,o],(d=>{const p=this.Xr(d.Yr);h.push(p)})),st.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new De(Lt);return i.forEach((o=>{const h=new je(o,0),d=new je(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],(p=>{a=a.add(p.Yr)}))})),st.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let h=a;At.isDocumentKey(h)||(h=h.child(""));const d=new je(new At(h),0);let p=new De(Lt);return this.Zr.forEachWhile((_=>{const v=_.key.path;return!!a.isPrefixOf(v)&&(v.length===o&&(p=p.add(_.Yr)),!0)}),d),st.resolve(this.ti(p))}ti(e){const i=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&i.push(o)})),i}removeMutationBatch(e,i){Qt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return st.forEach(i.mutations,(o=>{const h=new je(o.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new je(i,0),o=this.Zr.firstAfterOrEqual(a);return st.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,st.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.ri=e,this.docs=(function(){return new ue(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),h=o?o.size:0,d=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return st.resolve(a?a.document.mutableCopy():Xe.newInvalidDocument(i))}getEntries(e,i){let a=Ui();return i.forEach((o=>{const h=this.docs.get(o);a=a.insert(o,h?h.document.mutableCopy():Xe.newInvalidDocument(o))})),st.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let h=Ui();const d=i.path,p=new At(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:v,value:{document:A}}=_.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||wA(RA(A),a)<=0||(o.has(A.key)||yc(i,A))&&(h=h.insert(A.key,A.mutableCopy()))}return st.resolve(h)}getAllFromCollectionGroup(e,i,a,o){wt(9500)}ii(e,i){return st.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new tS(this)}getSize(e){return st.resolve(this.size)}}class tS extends Qb{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),st.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.persistence=e,this.si=new Rr((i=>Td(i)),Ad),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.oi=0,this._i=new Dd,this.targetCount=0,this.ai=Va.ur()}forEachTarget(e,i){return this.si.forEach(((a,o)=>i(o))),st.resolve()}getLastRemoteSnapshotVersion(e){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return st.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),st.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Va(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,st.resolve()}updateTargetData(e,i){return this.Pr(i),st.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,st.resolve()}removeTargets(e,i,a){let o=0;const h=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=i&&a.get(p.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),st.waitFor(h).next((()=>o))}getTargetCount(e){return st.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return st.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),st.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach((d=>{h.push(o.markPotentiallyOrphaned(e,d))})),st.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),st.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return st.resolve(a)}containsKey(e,i){return st.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,i){this.ui={},this.overlays={},this.ci=new fc(0),this.li=!1,this.li=!0,this.hi=new $b,this.referenceDelegate=e(this),this.Pi=new eS(this),this.indexManager=new Lb,this.remoteDocumentCache=(function(o){return new Wb(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new Pb(i),this.Ii=new Xb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new Zb,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new Jb(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){pt("MemoryPersistence","Starting transaction:",e);const o=new nS(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((h=>this.referenceDelegate.di(o).next((()=>h)))).toPromise().then((h=>(o.raiseOnCommittedEvent(),h)))}Ai(e,i){return st.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class nS extends DA{constructor(e){super(),this.currentSequenceNumber=e}}class Nd{constructor(e){this.persistence=e,this.Ri=new Dd,this.Vi=null}static mi(e){return new Nd(e)}get fi(){if(this.Vi)return this.Vi;throw wt(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),st.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),st.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),st.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((o=>{o.forEach((h=>this.fi.add(h.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.fi,(a=>{const o=At.fromPath(a);return this.gi(e,o).next((h=>{h||i.removeEntry(o,Nt.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return st.or([()=>st.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class rc{constructor(e,i){this.persistence=e,this.pi=new Rr((a=>VA(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=Fb(this,i)}static mi(e,i){return new rc(e,i)}Ei(){}di(e){return st.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((o=>a+o))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return st.forEach(this.pi,((a,o)=>this.br(e,a,o).next((h=>h?st.resolve():i(o)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,i).next((p=>{p||(a++,h.removeEntry(d,Nt.min()))})))).next((()=>h.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),st.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),st.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),st.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),st.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=qu(e.data.value)),i}br(e,i,a){return st.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.pi.get(i);return st.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=o}static As(e,i){let a=zt(),o=zt();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new Id(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tT()?8:NA(J1())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,o){const h={result:null};return this.ys(e,i).next((d=>{h.result=d})).next((()=>{if(!h.result)return this.ws(e,i,o,a).next((d=>{h.result=d}))})).next((()=>{if(h.result)return;const d=new iS;return this.Ss(e,i,d).next((p=>{if(h.result=p,this.Vs)return this.bs(e,i,d,p.size)}))})).next((()=>h.result))}bs(e,i,a,o){return a.documentReadCount<this.fs?(Ea()<=Ht.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",Ta(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),st.resolve()):(Ea()<=Ht.DEBUG&&pt("QueryEngine","Query:",Ta(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Ea()<=Ht.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",Ta(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(i))):st.resolve())}ys(e,i){if(Xy(i))return st.resolve(null);let a=si(i);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=nd(i,null,"F"),a=si(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((h=>{const d=zt(...h);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,a).next((_=>{const v=this.Ds(i,p);return this.Cs(i,v,d,_.readTime)?this.ys(e,nd(i,null,"F")):this.vs(e,v,i,_)}))))})))))}ws(e,i,a,o){return Xy(i)||o.isEqual(Nt.min())?st.resolve(null):this.ps.getDocuments(e,a).next((h=>{const d=this.Ds(i,h);return this.Cs(i,d,a,o)?st.resolve(null):(Ea()<=Ht.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ta(i)),this.vs(e,d,i,xA(o,io)).next((p=>p)))}))}Ds(e,i){let a=new De(Rv(e));return i.forEach(((o,h)=>{yc(e,h)&&(a=a.add(h))})),a}Cs(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,i,a){return Ea()<=Ht.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",Ta(i)),this.ps.getDocumentsMatchingQuery(e,i,ws.min(),a)}vs(e,i,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((h=>(i.forEach((d=>{h=h.insert(d.key,d)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="LocalStore",rS=3e8;class aS{constructor(e,i,a,o){this.persistence=e,this.Fs=i,this.serializer=o,this.Ms=new ue(Lt),this.xs=new Rr((h=>Td(h)),Ad),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function lS(r,e,i,a){return new aS(r,e,i,a)}async function Xv(r,e){const i=Vt(r);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next((h=>(o=h,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((h=>{const d=[],p=[];let _=zt();for(const v of o){d.push(v.batchId);for(const A of v.mutations)_=_.add(A.key)}for(const v of h){p.push(v.batchId);for(const A of v.mutations)_=_.add(A.key)}return i.localDocuments.getDocuments(a,_).next((v=>({Ls:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function oS(r,e){const i=Vt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,_,v,A){const w=v.batch,D=w.keys();let G=st.resolve();return D.forEach((Z=>{G=G.next((()=>A.getEntry(_,Z))).next((lt=>{const z=v.docVersions.get(Z);Qt(z!==null,48541),lt.version.compareTo(z)<0&&(w.applyToRemoteDocument(lt,v),lt.isValidDocument()&&(lt.setReadTime(v.commitVersion),A.addEntry(lt)))}))})),G.next((()=>p.mutationQueue.removeMutationBatch(_,w)))})(i,a,e,h).next((()=>h.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let _=zt();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(_=_.add(p.batch.mutations[v].key));return _})(e)))).next((()=>i.localDocuments.getDocuments(a,o)))}))}function Zv(r){const e=Vt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function uS(r,e){const i=Vt(r),a=e.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const p=[];e.targetChanges.forEach(((A,w)=>{const D=o.get(w);if(!D)return;p.push(i.Pi.removeMatchingKeys(h,A.removedDocuments,w).next((()=>i.Pi.addMatchingKeys(h,A.addedDocuments,w))));let G=D.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(w)!==null?G=G.withResumeToken(qe.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,a)),o=o.insert(w,G),(function(lt,z,nt){return lt.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-lt.snapshotVersion.toMicroseconds()>=rS?!0:nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0})(D,G,A)&&p.push(i.Pi.updateTargetData(h,G))}));let _=Ui(),v=zt();if(e.documentUpdates.forEach((A=>{e.resolvedLimboDocuments.has(A)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(h,A))})),p.push(cS(h,d,e.documentUpdates).next((A=>{_=A.ks,v=A.qs}))),!a.isEqual(Nt.min())){const A=i.Pi.getLastRemoteSnapshotVersion(h).next((w=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,a)));p.push(A)}return st.waitFor(p).next((()=>d.apply(h))).next((()=>i.localDocuments.getLocalViewOfDocuments(h,_,v))).next((()=>_))})).then((h=>(i.Ms=o,h)))}function cS(r,e,i){let a=zt(),o=zt();return i.forEach((h=>a=a.add(h))),e.getEntries(r,a).next((h=>{let d=Ui();return i.forEach(((p,_)=>{const v=h.get(p);_.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),_.isNoDocument()&&_.version.isEqual(Nt.min())?(e.removeEntry(p,_.readTime),d=d.insert(p,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(_),d=d.insert(p,_)):pt(Vd,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function hS(r,e){const i=Vt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=_d),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function fS(r,e){const i=Vt(r);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return i.Pi.getTargetData(a,e).next((h=>h?(o=h,st.resolve(o)):i.Pi.allocateTargetId(a).next((d=>(o=new Ts(e,d,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=i.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function ld(r,e,i){const a=Vt(r),o=a.Ms.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ua(d))throw d;pt(Vd,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function o_(r,e,i){const a=Vt(r);let o=Nt.min(),h=zt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,v,A){const w=Vt(_),D=w.xs.get(A);return D!==void 0?st.resolve(w.Ms.get(D)):w.Pi.getTargetData(v,A)})(a,d,si(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,p.targetId).next((_=>{h=_}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,i?o:Nt.min(),i?h:zt()))).next((p=>(dS(a,JA(e),p),{documents:p,Qs:h})))))}function dS(r,e,i){let a=r.Os.get(e)||Nt.min();i.forEach(((o,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)})),r.Os.set(e,a)}class u_{constructor(){this.activeTargetIds=sb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mS{constructor(){this.Mo=new u_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new u_,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="ConnectivityMonitor";class h_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pt(c_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pt(c_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu=null;function od(){return Lu===null?Lu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lu++,"0x"+Lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="RestConnection",gS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Ju?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,i,a,o,h){const d=od(),p=this.zo(e,i.toUriEncodedString());pt(Bf,`Sending RPC '${e}' ${d}:`,p,a);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,h);const{host:v}=new URL(p),A=hc(v);return this.Jo(e,p,_,a,A).then((w=>(pt(Bf,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Ca(Bf,`RPC '${e}' ${d} failed with error: `,w,"url: ",p,"request:",a),w}))}Ho(e,i,a,o,h,d){return this.Go(e,i,a,o,h)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,h)=>e[h]=o)),a&&a.headers.forEach(((o,h)=>e[h]=o))}zo(e,i){const a=gS[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class vS extends yS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,o,h){const d=od();return new Promise(((p,_)=>{const v=new tv;v.setWithCredentials(!0),v.listenOnce(ev.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Bu.NO_ERROR:const w=v.getResponseJson();pt(Ye,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),p(w);break;case Bu.TIMEOUT:pt(Ye,`RPC '${e}' ${d} timed out`),_(new yt(at.DEADLINE_EXCEEDED,"Request time out"));break;case Bu.HTTP_ERROR:const D=v.getStatus();if(pt(Ye,`RPC '${e}' ${d} failed with status:`,D,"response text:",v.getResponseText()),D>0){let G=v.getResponseJson();Array.isArray(G)&&(G=G[0]);const Z=G?.error;if(Z&&Z.status&&Z.message){const lt=(function(nt){const J=nt.toLowerCase().replace(/_/g,"-");return Object.values(at).indexOf(J)>=0?J:at.UNKNOWN})(Z.status);_(new yt(lt,Z.message))}else _(new yt(at.UNKNOWN,"Server responded with status "+v.getStatus()))}else _(new yt(at.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{l_:e,streamId:d,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{pt(Ye,`RPC '${e}' ${d} completed.`)}}));const A=JSON.stringify(o);pt(Ye,`RPC '${e}' ${d} sending request:`,o),v.send(i,"POST",A,a,15)}))}T_(e,i,a){const o=od(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=sv(),p=iv(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,a),_.encodeInitMessageHeaders=!0;const A=h.join("");pt(Ye,`Creating RPC '${e}' stream ${o}: ${A}`,_);const w=d.createWebChannel(A,_);this.I_(w);let D=!1,G=!1;const Z=new _S({Yo:z=>{G?pt(Ye,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(D||(pt(Ye,`Opening RPC '${e}' stream ${o} transport.`),w.open(),D=!0),pt(Ye,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},Zo:()=>w.close()}),lt=(z,nt,J)=>{z.listen(nt,(ot=>{try{J(ot)}catch(dt){setTimeout((()=>{throw dt}),0)}}))};return lt(w,Ql.EventType.OPEN,(()=>{G||(pt(Ye,`RPC '${e}' stream ${o} transport opened.`),Z.o_())})),lt(w,Ql.EventType.CLOSE,(()=>{G||(G=!0,pt(Ye,`RPC '${e}' stream ${o} transport closed`),Z.a_(),this.E_(w))})),lt(w,Ql.EventType.ERROR,(z=>{G||(G=!0,Ca(Ye,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),Z.a_(new yt(at.UNAVAILABLE,"The operation could not be completed")))})),lt(w,Ql.EventType.MESSAGE,(z=>{if(!G){const nt=z.data[0];Qt(!!nt,16349);const J=nt,ot=J?.error||J[0]?.error;if(ot){pt(Ye,`RPC '${e}' stream ${o} received error:`,ot);const dt=ot.status;let mt=(function(b){const x=Te[b];if(x!==void 0)return Pv(x)})(dt),_t=ot.message;mt===void 0&&(mt=at.INTERNAL,_t="Unknown error status: "+dt+" with message "+ot.message),G=!0,Z.a_(new yt(mt,_t)),w.close()}else pt(Ye,`RPC '${e}' stream ${o} received:`,nt),Z.u_(nt)}})),lt(p,nv.STAT_EVENT,(z=>{z.stat===Zf.PROXY?pt(Ye,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Zf.NOPROXY&&pt(Ye,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r){return new bb(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,i,a=1e3,o=1.5,h=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=o,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-a);o>0&&pt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="PersistentStream";class Jv{constructor(e,i,a,o,h,d,p,_){this.Mi=e,this.S_=a,this.b_=o,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $v(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===at.RESOURCE_EXHAUSTED?(ji(i.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===at.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===i&&this.G_(a,o)}),(a=>{e((()=>{const o=new yt(at.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pt(f_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(pt(f_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ES extends Jv{constructor(e,i,a,o,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=Rb(this.serializer,e),a=(function(h){if(!("targetChange"in h))return Nt.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?Nt.min():d.readTime?ai(d.readTime):Nt.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=ad(this.serializer),i.addTarget=(function(h,d){let p;const _=d.target;if(p=ed(_)?{documents:Db(h,_)}:{query:Nb(h,_).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=zv(h,d.resumeToken);const v=id(h,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(Nt.min())>0){p.readTime=sc(h,d.snapshotVersion.toTimestamp());const v=id(h,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const a=Vb(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=ad(this.serializer),i.removeTarget=e,this.q_(i)}}class TS extends Jv{constructor(e,i,a,o,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return Qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=Cb(e.writeResults,e.commitTime),a=ai(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=ad(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>wb(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{}class bS extends AS{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new yt(at.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Go(e,sd(i,a),o,h,d))).catch((h=>{throw h.name==="FirebaseError"?(h.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new yt(at.UNKNOWN,h.toString())}))}Ho(e,i,a,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,sd(i,a),o,d,p,h))).catch((d=>{throw d.name==="FirebaseError"?(d.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new yt(at.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SS{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ji(i),this.aa=!1):pt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="RemoteStore";class xS{constructor(e,i,a,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Cr(this)&&(pt(br,"Restarting streams for network reachability change."),await(async function(_){const v=Vt(_);v.Ea.add(4),await mo(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Ac(v)})(this))}))})),this.Ra=new SS(a,o)}}async function Ac(r){if(Cr(r))for(const e of r.da)await e(!0)}async function mo(r){for(const e of r.da)await e(!1)}function Wv(r,e){const i=Vt(r);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),Ud(i)?jd(i):Pa(i).O_()&&Od(i,e))}function Md(r,e){const i=Vt(r),a=Pa(i);i.Ia.delete(e),a.O_()&&t0(i,e),i.Ia.size===0&&(a.O_()?a.L_():Cr(i)&&i.Ra.set("Unknown"))}function Od(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Pa(r).Y_(e)}function t0(r,e){r.Va.Ue(e),Pa(r).Z_(e)}function jd(r){r.Va=new vb({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Pa(r).start(),r.Ra.ua()}function Ud(r){return Cr(r)&&!Pa(r).x_()&&r.Ia.size>0}function Cr(r){return Vt(r).Ea.size===0}function e0(r){r.Va=void 0}async function RS(r){r.Ra.set("Online")}async function wS(r){r.Ia.forEach(((e,i)=>{Od(r,e)}))}async function CS(r,e){e0(r),Ud(r)?(r.Ra.ha(e),jd(r)):r.Ra.set("Unknown")}async function DS(r,e,i){if(r.Ra.set("Online"),e instanceof Lv&&e.state===2&&e.cause)try{await(async function(o,h){const d=h.cause;for(const p of h.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(a){pt(br,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await ac(r,a)}else if(e instanceof Fu?r.Va.Ze(e):e instanceof kv?r.Va.st(e):r.Va.tt(e),!i.isEqual(Nt.min()))try{const a=await Zv(r.localStore);i.compareTo(a)>=0&&await(function(h,d){const p=h.Va.Tt(d);return p.targetChanges.forEach(((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const A=h.Ia.get(v);A&&h.Ia.set(v,A.withResumeToken(_.resumeToken,d))}})),p.targetMismatches.forEach(((_,v)=>{const A=h.Ia.get(_);if(!A)return;h.Ia.set(_,A.withResumeToken(qe.EMPTY_BYTE_STRING,A.snapshotVersion)),t0(h,_);const w=new Ts(A.target,_,v,A.sequenceNumber);Od(h,w)})),h.remoteSyncer.applyRemoteEvent(p)})(r,i)}catch(a){pt(br,"Failed to raise snapshot:",a),await ac(r,a)}}async function ac(r,e,i){if(!Ua(e))throw e;r.Ea.add(1),await mo(r),r.Ra.set("Offline"),i||(i=()=>Zv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pt(br,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Ac(r)}))}function n0(r,e){return e().catch((i=>ac(r,i,e)))}async function bc(r){const e=Vt(r),i=Is(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_d;for(;NS(e);)try{const o=await hS(e.localStore,a);if(o===null){e.Ta.length===0&&i.L_();break}a=o.batchId,IS(e,o)}catch(o){await ac(e,o)}i0(e)&&s0(e)}function NS(r){return Cr(r)&&r.Ta.length<10}function IS(r,e){r.Ta.push(e);const i=Is(r);i.O_()&&i.X_&&i.ea(e.mutations)}function i0(r){return Cr(r)&&!Is(r).x_()&&r.Ta.length>0}function s0(r){Is(r).start()}async function VS(r){Is(r).ra()}async function MS(r){const e=Is(r);for(const i of r.Ta)e.ea(i.mutations)}async function OS(r,e,i){const a=r.Ta.shift(),o=Rd.from(a,e,i);await n0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await bc(r)}async function jS(r,e){e&&Is(r).X_&&await(async function(a,o){if((function(d){return gb(d)&&d!==at.ABORTED})(o.code)){const h=a.Ta.shift();Is(a).B_(),await n0(a,(()=>a.remoteSyncer.rejectFailedWrite(h.batchId,o))),await bc(a)}})(r,e),i0(r)&&s0(r)}async function d_(r,e){const i=Vt(r);i.asyncQueue.verifyOperationInProgress(),pt(br,"RemoteStore received new credentials");const a=Cr(i);i.Ea.add(3),await mo(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Ac(i)}async function US(r,e){const i=Vt(r);e?(i.Ea.delete(2),await Ac(i)):e||(i.Ea.add(2),await mo(i),i.Ra.set("Unknown"))}function Pa(r){return r.ma||(r.ma=(function(i,a,o){const h=Vt(i);return h.sa(),new ES(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(r.datastore,r.asyncQueue,{Xo:RS.bind(null,r),t_:wS.bind(null,r),r_:CS.bind(null,r),H_:DS.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ud(r)?jd(r):r.Ra.set("Unknown")):(await r.ma.stop(),e0(r))}))),r.ma}function Is(r){return r.fa||(r.fa=(function(i,a,o){const h=Vt(i);return h.sa(),new TS(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:VS.bind(null,r),r_:jS.bind(null,r),ta:MS.bind(null,r),na:OS.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await bc(r)):(await r.fa.stop(),r.Ta.length>0&&(pt(br,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,i,a,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=h,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,h){const d=Date.now()+a,p=new Pd(e,i,d,o,h);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt(at.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(r,e){if(ji("AsyncQueue",`${e}: ${r}`),Ua(r))return new yt(at.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static emptySet(e){return new xa(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||At.comparator(i.key,a.key):(i,a)=>At.comparator(i.key,a.key),this.keyedMap=Yl(),this.sortedSet=new ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new xa;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.ga=new ue(At.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):wt(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class Ma{constructor(e,i,a,o,h,d,p,_,v){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(e,i,a,o,h){const d=[];return i.forEach((p=>{d.push({type:0,doc:p})})),new Ma(e,i,xa.emptySet(i),d,a,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kS{constructor(){this.queries=p_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const o=Vt(i),h=o.queries;o.queries=p_(),h.forEach(((d,p)=>{for(const _ of p.Sa)_.onError(a)}))})(this,new yt(at.ABORTED,"Firestore shutting down"))}}function p_(){return new Rr((r=>xv(r)),gc)}async function LS(r,e){const i=Vt(r);let a=3;const o=e.query;let h=i.queries.get(o);h?!h.ba()&&e.Da()&&(a=2):(h=new PS,a=e.Da()?0:1);try{switch(a){case 0:h.wa=await i.onListen(o,!0);break;case 1:h.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const p=kd(d,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(p)}i.queries.set(o,h),h.Sa.push(e),e.va(i.onlineState),h.wa&&e.Fa(h.wa)&&Ld(i)}async function zS(r,e){const i=Vt(r),a=e.query;let o=3;const h=i.queries.get(a);if(h){const d=h.Sa.indexOf(e);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?o=e.Da()?0:1:!h.ba()&&e.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function BS(r,e){const i=Vt(r);let a=!1;for(const o of e){const h=o.query,d=i.queries.get(h);if(d){for(const p of d.Sa)p.Fa(o)&&(a=!0);d.wa=o}}a&&Ld(i)}function qS(r,e,i){const a=Vt(r),o=a.queries.get(e);if(o)for(const h of o.Sa)h.onError(i);a.queries.delete(e)}function Ld(r){r.Ca.forEach((e=>{e.next()}))}var ud,g_;(g_=ud||(ud={})).Ma="default",g_.Cache="cache";class HS{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ma(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=Ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ud.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.key=e}}class a0{constructor(e){this.key=e}}class GS{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=zt(),this.mutatedKeys=zt(),this.eu=Rv(e),this.tu=new xa(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new m_,o=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=o,p=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((A,w)=>{const D=o.get(A),G=yc(this.query,w)?w:null,Z=!!D&&this.mutatedKeys.has(D.key),lt=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let z=!1;D&&G?D.data.isEqual(G.data)?Z!==lt&&(a.track({type:3,doc:G}),z=!0):this.su(D,G)||(a.track({type:2,doc:G}),z=!0,(_&&this.eu(G,_)>0||v&&this.eu(G,v)<0)&&(p=!0)):!D&&G?(a.track({type:0,doc:G}),z=!0):D&&!G&&(a.track({type:1,doc:D}),z=!0,(_||v)&&(p=!0)),z&&(G?(d=d.add(G),h=lt?h.add(A):h.delete(A)):(d=d.delete(A),h=h.delete(A)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),h=h.delete(A.key),a.track({type:1,doc:A})}return{tu:d,iu:a,Cs:p,mutatedKeys:h}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((A,w)=>(function(G,Z){const lt=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{Rt:z})}};return lt(G)-lt(Z)})(A.type,w.type)||this.eu(A.doc,w.doc))),this.ou(a),o=o??!1;const p=i&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,v=_!==this.Za;return this.Za=_,d.length!==0||v?{snapshot:new Ma(this.query,e.tu,h,d,e.mutatedKeys,_===0,v,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new m_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=zt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new a0(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new r0(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=zt();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return Ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zd="SyncEngine";class FS{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class QS{constructor(e){this.key=e,this.hu=!1}}class YS{constructor(e,i,a,o,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Rr((p=>xv(p)),gc),this.Iu=new Map,this.Eu=new Set,this.du=new ue(At.comparator),this.Au=new Map,this.Ru=new Dd,this.Vu={},this.mu=new Map,this.fu=Va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KS(r,e,i=!0){const a=f0(r);let o;const h=a.Tu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.lu()):o=await l0(a,e,i,!0),o}async function XS(r,e){const i=f0(r);await l0(i,e,!0,!1)}async function l0(r,e,i,a){const o=await fS(r.localStore,si(e)),h=o.targetId,d=r.sharedClientState.addLocalQueryTarget(h,i);let p;return a&&(p=await ZS(r,e,h,d==="current",o.resumeToken)),r.isPrimaryClient&&i&&Wv(r.remoteStore,o),p}async function ZS(r,e,i,a,o){r.pu=(w,D,G)=>(async function(lt,z,nt,J){let ot=z.view.ru(nt);ot.Cs&&(ot=await o_(lt.localStore,z.query,!1).then((({documents:V})=>z.view.ru(V,ot))));const dt=J&&J.targetChanges.get(z.targetId),mt=J&&J.targetMismatches.get(z.targetId)!=null,_t=z.view.applyChanges(ot,lt.isPrimaryClient,dt,mt);return __(lt,z.targetId,_t.au),_t.snapshot})(r,w,D,G);const h=await o_(r.localStore,e,!0),d=new GS(e,h.Qs),p=d.ru(h.documents),_=fo.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,_);__(r,i,v.au);const A=new FS(e,i,d);return r.Tu.set(e,A),r.Iu.has(i)?r.Iu.get(i).push(e):r.Iu.set(i,[e]),v.snapshot}async function $S(r,e,i){const a=Vt(r),o=a.Tu.get(e),h=a.Iu.get(o.targetId);if(h.length>1)return a.Iu.set(o.targetId,h.filter((d=>!gc(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await ld(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Md(a.remoteStore,o.targetId),cd(a,o.targetId)})).catch(ja)):(cd(a,o.targetId),await ld(a.localStore,o.targetId,!0))}async function JS(r,e){const i=Vt(r),a=i.Tu.get(e),o=i.Iu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Md(i.remoteStore,a.targetId))}async function WS(r,e,i){const a=ax(r);try{const o=await(function(d,p){const _=Vt(d),v=re.now(),A=p.reduce(((G,Z)=>G.add(Z.key)),zt());let w,D;return _.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let Z=Ui(),lt=zt();return _.Ns.getEntries(G,A).next((z=>{Z=z,Z.forEach(((nt,J)=>{J.isValidDocument()||(lt=lt.add(nt))}))})).next((()=>_.localDocuments.getOverlayedDocuments(G,Z))).next((z=>{w=z;const nt=[];for(const J of p){const ot=hb(J,w.get(J.key).overlayedDocument);ot!=null&&nt.push(new wr(J.key,ot,_v(ot.value.mapValue),ri.exists(!0)))}return _.mutationQueue.addMutationBatch(G,v,nt,p)})).next((z=>{D=z;const nt=z.applyToLocalDocumentSet(w,lt);return _.documentOverlayCache.saveOverlays(G,z.batchId,nt)}))})).then((()=>({batchId:D.batchId,changes:Cv(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,p,_){let v=d.Vu[d.currentUser.toKey()];v||(v=new ue(Lt)),v=v.insert(p,_),d.Vu[d.currentUser.toKey()]=v})(a,o.batchId,i),await po(a,o.changes),await bc(a.remoteStore)}catch(o){const h=kd(o,"Failed to persist write");i.reject(h)}}async function o0(r,e){const i=Vt(r);try{const a=await uS(i.localStore,e);e.targetChanges.forEach(((o,h)=>{const d=i.Au.get(h);d&&(Qt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Qt(d.hu,14607):o.removedDocuments.size>0&&(Qt(d.hu,42227),d.hu=!1))})),await po(i,a,e)}catch(a){await ja(a)}}function y_(r,e,i){const a=Vt(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.Tu.forEach(((h,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const _=Vt(d);_.onlineState=p;let v=!1;_.queries.forEach(((A,w)=>{for(const D of w.Sa)D.va(p)&&(v=!0)})),v&&Ld(_)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function tx(r,e,i){const a=Vt(r);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Au.get(e),h=o&&o.key;if(h){let d=new ue(At.comparator);d=d.insert(h,Xe.newNoDocument(h,Nt.min()));const p=zt().add(h),_=new Ec(Nt.min(),new Map,new ue(Lt),d,p);await o0(a,_),a.du=a.du.remove(h),a.Au.delete(e),Bd(a)}else await ld(a.localStore,e,!1).then((()=>cd(a,e,i))).catch(ja)}async function ex(r,e){const i=Vt(r),a=e.batch.batchId;try{const o=await oS(i.localStore,e);c0(i,a,null),u0(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await po(i,o)}catch(o){await ja(o)}}async function nx(r,e,i){const a=Vt(r);try{const o=await(function(d,p){const _=Vt(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let A;return _.mutationQueue.lookupMutationBatch(v,p).next((w=>(Qt(w!==null,37113),A=w.keys(),_.mutationQueue.removeMutationBatch(v,w)))).next((()=>_.mutationQueue.performConsistencyCheck(v))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(v,A,p))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,A))).next((()=>_.localDocuments.getDocuments(v,A)))}))})(a.localStore,e);c0(a,e,i),u0(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await po(a,o)}catch(o){await ja(o)}}function u0(r,e){(r.mu.get(e)||[]).forEach((i=>{i.resolve()})),r.mu.delete(e)}function c0(r,e,i){const a=Vt(r);let o=a.Vu[a.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function cd(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),i&&r.Pu.yu(a,i);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||h0(r,a)}))}function h0(r,e){r.Eu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(Md(r.remoteStore,i),r.du=r.du.remove(e),r.Au.delete(i),Bd(r))}function __(r,e,i){for(const a of i)a instanceof r0?(r.Ru.addReference(a.key,e),ix(r,a)):a instanceof a0?(pt(zd,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||h0(r,a.key)):wt(19791,{wu:a})}function ix(r,e){const i=e.key,a=i.path.canonicalString();r.du.get(i)||r.Eu.has(a)||(pt(zd,"New document in limbo: "+i),r.Eu.add(a),Bd(r))}function Bd(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const i=new At(se.fromString(e)),a=r.fu.next();r.Au.set(a,new QS(i)),r.du=r.du.insert(i,a),Wv(r.remoteStore,new Ts(si(bd(i.path)),a,"TargetPurposeLimboResolution",fc.ce))}}async function po(r,e,i){const a=Vt(r),o=[],h=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((p,_)=>{d.push(a.pu(_,e,i).then((v=>{if((v||i)&&a.isPrimaryClient){const A=v?!v.fromCache:i?.targetChanges.get(_.targetId)?.current;a.sharedClientState.updateQueryState(_.targetId,A?"current":"not-current")}if(v){o.push(v);const A=Id.As(_.targetId,v);h.push(A)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(_,v){const A=Vt(_);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>st.forEach(v,(D=>st.forEach(D.Es,(G=>A.persistence.referenceDelegate.addReference(w,D.targetId,G))).next((()=>st.forEach(D.ds,(G=>A.persistence.referenceDelegate.removeReference(w,D.targetId,G)))))))))}catch(w){if(!Ua(w))throw w;pt(Vd,"Failed to update sequence numbers: "+w)}for(const w of v){const D=w.targetId;if(!w.fromCache){const G=A.Ms.get(D),Z=G.snapshotVersion,lt=G.withLastLimboFreeSnapshotVersion(Z);A.Ms=A.Ms.insert(D,lt)}}})(a.localStore,h))}async function sx(r,e){const i=Vt(r);if(!i.currentUser.isEqual(e)){pt(zd,"User change. New user:",e.toKey());const a=await Xv(i.localStore,e);i.currentUser=e,(function(h,d){h.mu.forEach((p=>{p.forEach((_=>{_.reject(new yt(at.CANCELLED,d))}))})),h.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await po(i,a.Ls)}}function rx(r,e){const i=Vt(r),a=i.Au.get(e);if(a&&a.hu)return zt().add(a.key);{let o=zt();const h=i.Iu.get(e);if(!h)return o;for(const d of h){const p=i.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function f0(r){const e=Vt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=o0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tx.bind(null,e),e.Pu.H_=BS.bind(null,e.eventManager),e.Pu.yu=qS.bind(null,e.eventManager),e}function ax(r){const e=Vt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ex.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nx.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return lS(this.persistence,new sS,e.initialUser,this.serializer)}Cu(e){return new Kv(Nd.mi,this.serializer)}Du(e){return new mS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class lx extends lc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){Qt(this.persistence.referenceDelegate instanceof rc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new Hb(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Kv((a=>rc.mi(a,i)),this.serializer)}}class hd{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>y_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=sx.bind(null,this.syncEngine),await US(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kS})()}createDatastore(e){const i=Tc(e.databaseInfo.databaseId),a=(function(h){return new vS(h)})(e.databaseInfo);return(function(h,d,p,_){return new bS(h,d,p,_)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,o,h,d,p){return new xS(a,o,h,d,p)})(this.localStore,this.datastore,e.asyncQueue,(i=>y_(this.syncEngine,i,0)),(function(){return h_.v()?new h_:new pS})())}createSyncEngine(e,i){return(function(o,h,d,p,_,v,A){const w=new YS(o,h,d,p,_,v);return A&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Vt(i);pt(br,"RemoteStore shutting down."),a.Ea.add(5),await mo(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hd.provider={build:()=>new hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="FirestoreClient";class ux{constructor(e,i,a,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=Ke.UNAUTHENTICATED,this.clientId=gd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,(async d=>{pt(Vs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(pt(Vs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=kd(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Hf(r,e){r.asyncQueue.verifyOperationInProgress(),pt(Vs,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener((async o=>{a.isEqual(o)||(await Xv(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function v_(r,e){r.asyncQueue.verifyOperationInProgress();const i=await cx(r);pt(Vs,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener((a=>d_(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,o)=>d_(e.remoteStore,o))),r._onlineComponents=e}async function cx(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pt(Vs,"Using user provided OfflineComponentProvider");try{await Hf(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(o){return o.name==="FirebaseError"?o.code===at.FAILED_PRECONDITION||o.code===at.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;Ca("Error using user provided cache. Falling back to memory cache: "+i),await Hf(r,new lc)}}else pt(Vs,"Using default OfflineComponentProvider"),await Hf(r,new lx(void 0));return r._offlineComponents}async function d0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pt(Vs,"Using user provided OnlineComponentProvider"),await v_(r,r._uninitializedComponentsProvider._online)):(pt(Vs,"Using default OnlineComponentProvider"),await v_(r,new hd))),r._onlineComponents}function hx(r){return d0(r).then((e=>e.syncEngine))}async function E_(r){const e=await d0(r),i=e.eventManager;return i.onListen=KS.bind(null,e.syncEngine),i.onUnlisten=$S.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=XS.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=JS.bind(null,e.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="firestore.googleapis.com",A_=!0;class b_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new yt(at.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=p0,this.ssl=A_}else this.host=e.host,this.ssl=e.ssl??A_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bb)throw new yt(at.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new yt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new yt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new yt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sc{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt(at.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new yt(at.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new mA;switch(a.type){case"firstParty":return new _A(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new yt(at.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=T_.get(i);a&&(pt("ComponentProvider","Removing Datastore"),T_.delete(i),a.terminate())})(this),Promise.resolve()}}function fx(r,e,i,a={}){r=vr(r,Sc);const o=hc(e),h=r._getSettings(),d={...h,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${i}`;o&&(L_(`https://${p}`),B_("Firestore",!0)),h.host!==p0&&h.host!==p&&Ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...h,host:p,ssl:o,emulatorOptions:a};if(!Xu(_,d)&&(r._setSettings(_),a.mockUserToken)){let v,A;if(typeof a.mockUserToken=="string")v=a.mockUserToken,A=Ke.MOCK_USER;else{v=z_(a.mockUserToken,r._app?.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new yt(at.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Ke(w)}r._authCredentials=new pA(new av(v,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new xc(this.firestore,e,this._query)}}class Ce{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ce(this.firestore,e,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(co(i,Ce._jsonSchema))return new Ce(e,a||null,new At(se.fromString(i.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:Ae("string",Ce._jsonSchemaVersion),referencePath:Ae("string")};class Rs extends xc{constructor(e,i,a){super(e,i,bd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new At(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function qd(r,e,...i){if(r=Tr(r),lv("collection","path",e),r instanceof Sc){const a=se.fromString(e,...i);return Uy(a),new Rs(r,null,a)}{if(!(r instanceof Ce||r instanceof Rs))throw new yt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(se.fromString(e,...i));return Uy(a),new Rs(r.firestore,null,a)}}function Pi(r,e,...i){if(r=Tr(r),arguments.length===1&&(e=gd.newId()),lv("doc","path",e),r instanceof Sc){const a=se.fromString(e,...i);return jy(a),new Ce(r,null,new At(a))}{if(!(r instanceof Ce||r instanceof Rs))throw new yt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(se.fromString(e,...i));return jy(a),new Ce(r.firestore,r instanceof Rs?r.converter:null,new At(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="AsyncQueue";class x_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $v(this,"async_queue_retry"),this._c=()=>{const a=qf();a&&pt(S_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=qf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=qf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new _r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ua(e))throw e;pt(S_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ji("INTERNAL UNHANDLED ERROR: ",R_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const o=Pd.createAndSchedule(this,e,i,a,(h=>this.hc(h)));return this.tc.push(o),o}uc(){this.nc&&wt(47125,{Pc:R_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function R_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r){return(function(i,a){if(typeof i!="object"||i===null)return!1;const o=i;for(const h of a)if(h in o&&typeof o[h]=="function")return!0;return!1})(r,["next","error","complete"])}class uo extends Sc{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new x_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x_(e),this._firestoreClient=void 0,await e}}}function dx(r,e){const i=typeof r=="object"?r:Z_(),a=typeof r=="string"?r:Ju,o=Q_(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const h=P_("firestore");h&&fx(o,...h)}return o}function g0(r){if(r._terminated)throw new yt(at.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||mx(r),r._firestoreClient}function mx(r){const e=r._freezeSettings(),i=(function(o,h,d,p){return new jA(o,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,m0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new ux(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(o){const h=o?._online.build();return{_offline:o?._offline.build(h),_online:h}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(qe.fromBase64String(e))}catch(i){throw new yt(at.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Dn(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(co(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:Ae("string",Dn._jsonSchemaVersion),bytes:Ae("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new yt(at.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new yt(at.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new yt(at.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(co(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:Ae("string",li._jsonSchemaVersion),latitude:Ae("number"),longitude:Ae("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==o[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(co(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new oi(e.vectorValues);throw new yt(at.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:Ae("string",oi._jsonSchemaVersion),vectorValues:Ae("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=/^__.*__$/;class gx{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,i,this.fieldTransforms):new ho(e,this.data,i,this.fieldTransforms)}}function _0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{Ac:r})}}class Gd{constructor(e,i,a,o,h,d){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return oc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_0(this.Ac)&&px.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yx{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Tc(e)}Cc(e,i,a,o=!1){return new Gd({Ac:e,methodName:i,Dc:a,path:Be.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _x(r){const e=r._freezeSettings(),i=Tc(r._databaseId);return new yx(r._databaseId,!!e.ignoreUndefinedProperties,i)}function vx(r,e,i,a,o,h={}){const d=r.Cc(h.merge||h.mergeFields?2:0,e,i,o);A0("Data must be an object, but it was:",d,a);const p=E0(a,d);let _,v;if(h.merge)_=new Bn(d.fieldMask),v=d.fieldTransforms;else if(h.mergeFields){const A=[];for(const w of h.mergeFields){const D=Ex(e,w,i);if(!d.contains(D))throw new yt(at.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);Ax(A,D)||A.push(D)}_=new Bn(A),v=d.fieldTransforms.filter((w=>_.covers(w.field)))}else _=null,v=d.fieldTransforms;return new gx(new Cn(p),_,v)}function v0(r,e){if(T0(r=Tr(r)))return A0("Unsupported field value:",e,r),E0(r,e);if(r instanceof y0)return(function(a,o){if(!_0(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(o);h&&o.fieldTransforms.push(h)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const h=[];let d=0;for(const p of a){let _=v0(p,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),h.push(_),d++}return{arrayValue:{values:h}}})(r,e)}return(function(a,o){if((a=Tr(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return rb(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=re.fromDate(a);return{timestampValue:sc(o.serializer,h)}}if(a instanceof re){const h=new re(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:sc(o.serializer,h)}}if(a instanceof li)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Dn)return{bytesValue:zv(o.serializer,a._byteString)};if(a instanceof Ce){const h=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(h))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Cd(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof oi)return(function(d,p){return{mapValue:{fields:{[gv]:{stringValue:yv},[Wu]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return Sd(p.serializer,v)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${yd(a)}`)})(r,e)}function E0(r,e){const i={};return cv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xr(r,((a,o)=>{const h=v0(o,e.mc(a));h!=null&&(i[a]=h)})),{mapValue:{fields:i}}}function T0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof re||r instanceof li||r instanceof Dn||r instanceof Ce||r instanceof y0||r instanceof oi)}function A0(r,e,i){if(!T0(i)||!ov(i)){const a=yd(i);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function Ex(r,e,i){if((e=Tr(e))instanceof Hd)return e._internalPath;if(typeof e=="string")return b0(r,e);throw oc("Field path arguments must be of type string or ",r,!1,void 0,i)}const Tx=new RegExp("[~\\*/\\[\\]]");function b0(r,e,i){if(e.search(Tx)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Hd(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function oc(r,e,i,a,o){const h=a&&!a.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(h||d)&&(_+=" (found",h&&(_+=` in field ${a}`),d&&(_+=` in document ${o}`),_+=")"),new yt(at.INVALID_ARGUMENT,p+r+_)}function Ax(r,e){return r.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,i,a,o,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(x0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class bx extends S0{data(){return super.data()}}function x0(r,e){return typeof e=="string"?b0(r,e):e instanceof Hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new yt(at.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xx{convertValue(e,i="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw wt(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return xr(e,((o,h)=>{a[o]=this.convertValue(h,i)})),a}convertVectorValue(e){const i=e.fields?.[Wu].arrayValue?.values?.map((a=>_e(a.doubleValue)));return new oi(i)}convertGeoPoint(e){return new li(_e(e.latitude),_e(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=mc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const i=Cs(e);return new re(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=se.fromString(e);Qt(Qv(a),9688,{name:e});const o=new ro(a.get(1),a.get(3)),h=new At(a.popFirst(5));return o.isEqual(i)||ji(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(r,e,i){let a;return a=r?r.toFirestore(e):e,a}class Xl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Er extends S0{constructor(e,i,a,o,h,d){super(e,i,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(x0("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new yt(at.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Er._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Er._jsonSchemaVersion="firestore/documentSnapshot/1.0",Er._jsonSchema={type:Ae("string",Er._jsonSchemaVersion),bundleSource:Ae("string","DocumentSnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Qu extends Er{data(e={}){return super.data(e)}}class Ra{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new Xl(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new Qu(this._firestore,this._userDataWriter,a.key,a,new Xl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new yt(at.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,h){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const _=new Qu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Xl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>h||p.type!==3)).map((p=>{const _=new Qu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Xl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,A=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),A=d.indexOf(p.doc.key)),{type:wx(p.type),doc:_,oldIndex:v,newIndex:A}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new yt(at.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],o=[];return this.docs.forEach((h=>{h._document!==null&&(i.push(h._document),a.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),o.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wx(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:r})}}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:Ae("string",Ra._jsonSchemaVersion),bundleSource:Ae("string","QuerySnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class R0 extends xx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,i)}}function ka(r,e,i){r=vr(r,Ce);const a=vr(r.firestore,uo),o=Rx(r.converter,e);return w0(a,[vx(_x(a),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,ri.none())])}function Fd(r){return w0(vr(r.firestore,uo),[new xd(r._key,ri.none())])}function Qd(r,...e){r=Tr(r);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||w_(e[a])||(i=e[a++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(w_(e[a])){const _=e[a];e[a]=_.next?.bind(_),e[a+1]=_.error?.bind(_),e[a+2]=_.complete?.bind(_)}let h,d,p;if(r instanceof Ce)d=vr(r.firestore,uo),p=bd(r._key.path),h={next:_=>{e[a]&&e[a](Cx(d,r,_))},error:e[a+1],complete:e[a+2]};else{const _=vr(r,xc);d=vr(_.firestore,uo),p=_._query;const v=new R0(d);h={next:A=>{e[a]&&e[a](new Ra(d,v,_,A))},error:e[a+1],complete:e[a+2]},Sx(r._query)}return(function(v,A,w,D){const G=new ox(D),Z=new HS(A,G,w);return v.asyncQueue.enqueueAndForget((async()=>LS(await E_(v),Z))),()=>{G.Nu(),v.asyncQueue.enqueueAndForget((async()=>zS(await E_(v),Z)))}})(g0(d),p,o,h)}function w0(r,e){return(function(a,o){const h=new _r;return a.asyncQueue.enqueueAndForget((async()=>WS(await hx(a),o,h))),h.promise})(g0(r),e)}function Cx(r,e,i){const a=i.docs.get(e._key),o=new R0(r);return new Er(r,o,e._key,a,new Xl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(o){Oa=o})(K_),eo(new wa("firestore",((a,{instanceIdentifier:o,options:h})=>{const d=a.getProvider("app").getImmediate(),p=new uo(new gA(a.getProvider("auth-internal")),new vA(d,a.getProvider("app-check-internal")),(function(v,A){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new yt(at.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(v.options.projectId,A)})(d,o),d);return h={useFetchStreams:i,...h},p._setSettings(h),p}),"PUBLIC").setMultipleInstances(!0)),Ss(Iy,Vy,e),Ss(Iy,Vy,"esm2020")})();var Dx="firebase",Nx="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(Dx,Nx,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="firebasestorage.googleapis.com",Ix="storageBucket",Vx=120*1e3,Mx=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Sr{constructor(e,i,a=0){super(Gf(e),`Firebase Storage: ${i} (${Gf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hi||(hi={}));function Gf(r){return"storage/"+r}function Ox(){const r="An unknown error occurred, please check the error payload for server response.";return new fi(hi.UNKNOWN,r)}function jx(){return new fi(hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ux(){return new fi(hi.CANCELED,"User canceled the upload/download.")}function Px(r){return new fi(hi.INVALID_URL,"Invalid URL '"+r+"'.")}function kx(r){return new fi(hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function C_(r){return new fi(hi.INVALID_ARGUMENT,r)}function D0(){return new fi(hi.APP_DELETED,"The Firebase app was deleted.")}function Lx(r){return new fi(hi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let a;try{a=qn.makeFromUrl(e,i)}catch{return new qn(e,"")}if(a.path==="")return a;throw kx(e)}static makeFromUrl(e,i){let a=null;const o="([A-Za-z0-9.\\-_]+)";function h(dt){dt.path.charAt(dt.path.length-1)==="/"&&(dt.path_=dt.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),_={bucket:1,path:3};function v(dt){dt.path_=decodeURIComponent(dt.path)}const A="v[A-Za-z0-9_]+",w=i.replace(/[.]/g,"\\."),D="(/([^?#]*).*)?$",G=new RegExp(`^https?://${w}/${A}/b/${o}/o${D}`,"i"),Z={bucket:1,path:3},lt=i===C0?"(?:storage.googleapis.com|storage.cloud.google.com)":i,z="([^?#]*)",nt=new RegExp(`^https?://${lt}/${o}/${z}`,"i"),ot=[{regex:p,indices:_,postModify:h},{regex:G,indices:Z,postModify:v},{regex:nt,indices:{bucket:1,path:2},postModify:v}];for(let dt=0;dt<ot.length;dt++){const mt=ot[dt],_t=mt.regex.exec(e);if(_t){const V=_t[mt.indices.bucket];let b=_t[mt.indices.path];b||(b=""),a=new qn(V,b),mt.postModify(a);break}}if(a==null)throw Px(e);return a}}class zx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(r,e,i){let a=1,o=null,h=null,d=!1,p=0;function _(){return p===2}let v=!1;function A(...z){v||(v=!0,e.apply(null,z))}function w(z){o=setTimeout(()=>{o=null,r(G,_())},z)}function D(){h&&clearTimeout(h)}function G(z,...nt){if(v){D();return}if(z){D(),A.call(null,z,...nt);return}if(_()||d){D(),A.call(null,z,...nt);return}a<64&&(a*=2);let ot;p===1?(p=2,ot=0):ot=(a+Math.random())*1e3,w(ot)}let Z=!1;function lt(z){Z||(Z=!0,D(),!v&&(o!==null?(z||(p=2),clearTimeout(o),w(0)):z||(p=1)))}return w(0),h=setTimeout(()=>{d=!0,lt(!0)},i),lt}function qx(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(r){return r!==void 0}function D_(r,e,i,a){if(a<e)throw C_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>i)throw C_(`Invalid value for '${r}'. Expected ${i} or less.`)}function Gx(r){const e=encodeURIComponent;let i="?";for(const a in r)if(r.hasOwnProperty(a)){const o=e(a)+"="+e(r[a]);i=i+o+"&"}return i=i.slice(0,-1),i}var uc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(uc||(uc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(r,e){const i=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,h=e.indexOf(r)!==-1;return i||o||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,i,a,o,h,d,p,_,v,A,w,D=!0,G=!1){this.url_=e,this.method_=i,this.headers_=a,this.body_=o,this.successCodes_=h,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=_,this.timeout_=v,this.progressCallback_=A,this.connectionFactory_=w,this.retry=D,this.isUsingEmulator=G,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Z,lt)=>{this.resolve_=Z,this.reject_=lt,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new zu(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const d=p=>{const _=p.loaded,v=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(_,v)};this.progressCallback_!==null&&h.addUploadProgressListener(d),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(d),this.pendingConnection_=null;const p=h.getErrorCode()===uc.NO_ERROR,_=h.getStatus();if(!p||Fx(_,this.additionalRetryCodes_)&&this.retry){const A=h.getErrorCode()===uc.ABORT;a(!1,new zu(!1,null,A));return}const v=this.successCodes_.indexOf(_)!==-1;a(!0,new zu(v,h))})},i=(a,o)=>{const h=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());Hx(_)?h(_):h()}catch(_){d(_)}else if(p!==null){const _=Ox();_.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,_)):d(_)}else if(o.canceled){const _=this.appDelete_?D0():Ux();d(_)}else{const _=jx();d(_)}};this.canceled_?i(!1,new zu(!1,null,!0)):this.backoffId_=Bx(e,i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zu{constructor(e,i,a){this.wasSuccessCode=e,this.connection=i,this.canceled=!!a}}function Yx(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Kx(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Xx(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Zx(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function $x(r,e,i,a,o,h,d=!0,p=!1){const _=Gx(r.urlParams),v=r.url+_,A=Object.assign({},r.headers);return Xx(A,e),Yx(A,i),Kx(A,h),Zx(A,a),new Qx(v,r.method,A,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Wx(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,i){this._service=e,i instanceof qn?this._location=i:this._location=qn.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new cc(e,i)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wx(this._location.path)}get storage(){return this._service}get parent(){const e=Jx(this._location.path);if(e===null)return null;const i=new qn(this._location.bucket,e);return new cc(this._service,i)}_throwIfRoot(e){if(this._location.path==="")throw Lx(e)}}function N_(r,e){const i=e?.[Ix];return i==null?null:qn.makeFromBucketSpec(i,r)}function t2(r,e,i,a={}){r.host=`${e}:${i}`;const o=hc(e);o&&(L_(`https://${r.host}/b`),B_("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:h}=a;h&&(r._overrideAuthToken=typeof h=="string"?h:z_(h,r.app.options.projectId))}class e2{constructor(e,i,a,o,h,d=!1){this.app=e,this._authProvider=i,this._appCheckProvider=a,this._url=o,this._firebaseVersion=h,this._isUsingEmulator=d,this._bucket=null,this._host=C0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vx,this._maxUploadRetryTime=Mx,this._requests=new Set,o!=null?this._bucket=qn.makeFromBucketSpec(o,this._host):this._bucket=N_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=N_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){D_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){D_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const i=await e.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if(Y_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cc(this,e)}_makeRequest(e,i,a,o,h=!0){if(this._deleted)return new zx(D0());{const d=$x(e,this._appId,a,o,i,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,i){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,i,a,o).getPromise()}}const I_="@firebase/storage",V_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="storage";function n2(r=Z_(),e){r=Tr(r);const a=Q_(r,N0).getImmediate({identifier:e}),o=P_("storage");return o&&i2(a,...o),a}function i2(r,e,i,a={}){t2(r,e,i,a)}function s2(r,{instanceIdentifier:e}){const i=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new e2(i,a,o,e,K_)}function r2(){eo(new wa(N0,s2,"PUBLIC").setMultipleInstances(!0)),Ss(I_,V_,""),Ss(I_,V_,"esm2020")}r2();const a2={apiKey:"AIzaSyAZBf9fUWZoXnYJyBvBGEvpiu7DbHkG5Iw",authDomain:"crm-ver2.firebaseapp.com",projectId:"crm-ver2",storageBucket:"crm-ver2.firebasestorage.app",messagingSenderId:"993359540287",appId:"1:993359540287:web:43ad484af7c6616780088a"},I0=X_(a2),Nn=dx(I0);n2(I0);const Rc="customers",wc="activities",Cc="meetings",l2=async r=>{try{const e=r.map(i=>ka(Pi(Nn,Rc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving customers:",e)}},Yu=async r=>{try{await ka(Pi(Nn,Rc,r.id),r)}catch(e){console.error("Error saving customer:",e)}},V0=async r=>{try{await Fd(Pi(Nn,Rc,r))}catch(e){console.error("Error deleting customer:",e)}},M0=r=>Qd(qd(Nn,Rc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in customers subscription:",e)}),o2=async r=>{try{const e=r.map(i=>ka(Pi(Nn,wc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving activities:",e)}},O0=async r=>{try{await ka(Pi(Nn,wc,r.id),r)}catch(e){console.error("Error saving activity:",e)}},j0=async r=>{try{await Fd(Pi(Nn,wc,r))}catch(e){console.error("Error deleting activity:",e)}},U0=r=>Qd(qd(Nn,wc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in activities subscription:",e)}),u2=async r=>{try{const e=r.map(i=>ka(Pi(Nn,Cc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving meetings:",e)}},P0=async r=>{try{await ka(Pi(Nn,Cc,r.id),r)}catch(e){console.error("Error saving meeting:",e)}},k0=async r=>{try{await Fd(Pi(Nn,Cc,r))}catch(e){console.error("Error deleting meeting:",e)}},L0=r=>Qd(qd(Nn,Cc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in meetings subscription:",e)}),c2=Object.freeze(Object.defineProperty({__proto__:null,deleteActivity:j0,deleteCustomer:V0,deleteMeeting:k0,saveActivities:o2,saveActivity:O0,saveCustomer:Yu,saveCustomers:l2,saveMeeting:P0,saveMeetings:u2,subscribeToActivities:U0,subscribeToCustomers:M0,subscribeToMeetings:L0},Symbol.toStringTag,{value:"Module"}));new Date().toISOString(),new Date().toISOString(),new Date().toISOString();function h2(){const[r,e]=Dt.useState([]),[i,a]=Dt.useState([]),[o,h]=Dt.useState([]),[d,p]=Dt.useState(null),[_,v]=Dt.useState(!1),[A,w]=Dt.useState(null),[D,G]=Dt.useState("전체"),[Z,lt]=Dt.useState(null),[z,nt]=Dt.useState(!1),J=Dt.useRef(null);Dt.useEffect(()=>{const O=M0(et=>{e(et)}),tt=U0(et=>{a(et)}),L=L0(et=>{h(et)});return()=>{O(),tt(),L()}},[]),Dt.useEffect(()=>{if(r.length===0||o.length===0)return;const O=new Date;O.setHours(0,0,0,0),r.forEach(tt=>{o.filter(ct=>ct.customerId===tt.id).some(ct=>{const ft=new Date(ct.date);return ft.setHours(0,0,0,0),ft<O})&&tt.status==="신규"&&Yu({...tt,status:"진행중"})})},[r,o]);const ot=O=>{G(O),lt(null)},dt=O=>{lt(O)},mt=O=>{d===O.id?p(null):p(O.id)},_t=(O=null)=>{w(O),v(!0),O&&O.id===d&&p(null)},V=()=>{v(!1),w(null)},b=async O=>{await Yu(O)},x=async O=>{const tt={...O,isFavorite:!O.isFavorite};await Yu(tt)},j=async O=>{confirm(`"${O.name}" 고객을 정말 삭제하시겠습니까?`)&&(await V0(O.id),d===O.id&&p(null))},I=async O=>{await O0(O)},M=async O=>{confirm("정말 이 활동을 삭제하시겠습니까?")&&await j0(O)},R=async O=>{await P0(O)},ht=async O=>{confirm("정말 이 미팅을 삭제하시겠습니까?")&&await k0(O)},K=()=>{const O={customers:r,activities:i,meetings:o},tt=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),L=URL.createObjectURL(tt),et=document.createElement("a");et.href=L,et.download=`customer-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(et),et.click(),document.body.removeChild(et),URL.revokeObjectURL(L)},P=async O=>{const tt=O.target.files[0];if(!tt)return;const L=new FileReader;L.onload=async et=>{try{const ct=JSON.parse(et.target.result);if(ct&&Array.isArray(ct.customers)&&Array.isArray(ct.activities)){const{saveCustomers:ft,saveActivities:St,saveMeetings:Tt}=await x1(async()=>{const{saveCustomers:Rt,saveActivities:Mt,saveMeetings:pn}=await Promise.resolve().then(()=>c2);return{saveCustomers:Rt,saveActivities:Mt,saveMeetings:pn}},void 0);await ft(ct.customers||[]),await St(ct.activities||[]),await Tt(ct.meetings||[]),alert("데이터가 성공적으로 복원되었습니다.")}else throw new Error("잘못된 파일 형식입니다.")}catch(ct){alert(`복원 실패: ${ct.message}`)}},L.readAsText(tt),O.target.value=null},X=O=>{const tt=i.filter(et=>et.customerId===O);if(tt.length===0)return null;const L=tt.sort((et,ct)=>new Date(ct.date)-new Date(et.date));return new Date(L[0].date)},rt=O=>({전체:"등록된 모든 고객을 표시합니다",신규:"상태가 신규로 설정된 고객들을 표시합니다",진행중:"상태가 진행중으로 설정된 고객들을 표시합니다",장기관리고객:"장기적으로 관리 중인 고객들을 표시합니다",보류:"상태가 보류로 설정된 고객들을 표시합니다",집중고객:"즐겨찾기로 표시된 고객들을 집중적으로 관리하기 위해 표시합니다",오늘미팅:"오늘 일정이 확정된 미팅이 있는 고객들을 표시합니다",미팅일확정:"오늘 이후로 미팅이 예정된 고객들을 표시합니다",오늘연락:"오늘 활동 기록(전화, 문자, 방문 등)이 있는 고객들을 표시합니다",어제연락:"어제 활동 기록(전화, 문자, 방문 등)이 있는 고객들을 표시합니다",연락할고객:"어제와 오늘 모두 활동 기록이 없는 고객들입니다 (보류 상태 제외). 마지막 연락일이 오래된 순으로 정렬됩니다"})[O]||"",Et=(()=>{const O=new Date;O.setHours(0,0,0,0);let tt=r.filter(L=>{if(D==="집중고객")return L.isFavorite;if(D==="장기관리고객")return L.status==="장기관리고객";if(D==="오늘미팅")return o.filter(St=>St.customerId===L.id).some(St=>{const Tt=new Date(St.date);return Tt.setHours(0,0,0,0),Tt.getTime()===O.getTime()});if(D==="미팅일확정")return o.filter(St=>St.customerId===L.id).some(St=>{const Tt=new Date(St.date);return Tt.setHours(0,0,0,0),Tt>O});if(D==="오늘연락")return i.filter(St=>St.customerId===L.id).some(St=>{const Tt=new Date(St.date);return Tt.setHours(0,0,0,0),Tt.getTime()===O.getTime()});if(D==="어제연락")return i.filter(St=>St.customerId===L.id).some(St=>{const Tt=new Date(St.date);Tt.setHours(0,0,0,0);const Rt=new Date(O);return Rt.setDate(Rt.getDate()-1),Tt.getTime()===Rt.getTime()});if(D==="연락할고객"){if(L.status==="보류")return!1;const ft=i.filter(Rt=>Rt.customerId===L.id),St=new Date(O),Tt=new Date(O);return Tt.setDate(Tt.getDate()-1),!ft.some(Rt=>{const Mt=new Date(Rt.date);return Mt.setHours(0,0,0,0),Mt.getTime()===St.getTime()||Mt.getTime()===Tt.getTime()})}const et=D==="전체"||L.status===D,ct=!Z||L.progress===Z;return et&&ct});return D==="오늘미팅"?tt.sort((L,et)=>{const ct=o.filter(Rt=>{const Mt=new Date(Rt.date);return Mt.setHours(0,0,0,0),Rt.customerId===L.id&&Mt.getTime()===O.getTime()}),ft=o.filter(Rt=>{const Mt=new Date(Rt.date);return Mt.setHours(0,0,0,0),Rt.customerId===et.id&&Mt.getTime()===O.getTime()});if(ct.length===0)return 1;if(ft.length===0)return-1;const St=new Date(ct[0].date).getTime(),Tt=new Date(ft[0].date).getTime();return St-Tt}):D==="미팅일확정"?tt.sort((L,et)=>{const ct=o.filter(Rt=>{const Mt=new Date(Rt.date);return Mt.setHours(0,0,0,0),Rt.customerId===L.id&&Mt>O}),ft=o.filter(Rt=>{const Mt=new Date(Rt.date);return Mt.setHours(0,0,0,0),Rt.customerId===et.id&&Mt>O});if(ct.length===0)return 1;if(ft.length===0)return-1;const St=ct.sort((Rt,Mt)=>new Date(Rt.date)-new Date(Mt.date))[0],Tt=ft.sort((Rt,Mt)=>new Date(Rt.date)-new Date(Mt.date))[0];return new Date(St.date)-new Date(Tt.date)}):D==="오늘연락"?tt.sort((L,et)=>{const ct=i.filter(Rt=>Rt.customerId===L.id&&new Date(Rt.date).toDateString()===O.toDateString()),ft=i.filter(Rt=>Rt.customerId===et.id&&new Date(Rt.date).toDateString()===O.toDateString());if(ct.length===0)return 1;if(ft.length===0)return-1;const St=ct.sort((Rt,Mt)=>new Date(Mt.date)-new Date(Rt.date))[0],Tt=ft.sort((Rt,Mt)=>new Date(Mt.date)-new Date(Rt.date))[0];return new Date(Tt.date)-new Date(St.date)}):D==="어제연락"?tt.sort((L,et)=>{const ct=new Date(O);ct.setDate(ct.getDate()-1);const ft=i.filter(Mt=>Mt.customerId===L.id&&new Date(Mt.date).toDateString()===ct.toDateString()),St=i.filter(Mt=>Mt.customerId===et.id&&new Date(Mt.date).toDateString()===ct.toDateString());if(ft.length===0)return 1;if(St.length===0)return-1;const Tt=ft.sort((Mt,pn)=>new Date(pn.date)-new Date(Mt.date))[0],Rt=St.sort((Mt,pn)=>new Date(pn.date)-new Date(Mt.date))[0];return new Date(Rt.date)-new Date(Tt.date)}):D==="연락할고객"&&tt.sort((L,et)=>{const ct=X(L.id),ft=X(et.id);return ct?ft?ct-ft:-1:1}),tt})(),C=r.find(O=>O.id===d);return E.jsxs("div",{className:"app-container",children:[z&&E.jsx("div",{className:"mobile-overlay",onClick:()=>nt(!1)}),E.jsx(w1,{activeFilter:D,onFilterChange:ot,customers:r,meetings:o,activities:i,isMobileOpen:z,onMobileClose:()=>nt(!1)}),E.jsxs("div",{className:"main-content",children:[E.jsxs("header",{className:"main-header",children:[E.jsx("button",{className:"hamburger-btn",onClick:()=>nt(!0),children:"☰"}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[E.jsx("h1",{children:"고객 목록"}),D!=="전체"&&E.jsxs("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:["필터: ",D," - ",rt(D)]})]}),E.jsxs("div",{className:"header-actions",children:[E.jsx("button",{onClick:()=>_t(),className:"btn-primary",children:"+ 고객 추가"}),E.jsx("button",{onClick:K,className:"btn-secondary",children:"백업"}),E.jsx("button",{onClick:()=>J.current?.click(),className:"btn-secondary",children:"복원"}),E.jsx("input",{type:"file",ref:J,onChange:P,style:{display:"none"},accept:".json"})]})]}),E.jsx("main",{className:"table-container",children:E.jsx(C1,{customers:Et,onSelectCustomer:mt,onEdit:_t,onDelete:j,selectedCustomerId:d,activeFilter:D,activeProgressFilter:Z,onProgressFilterChange:dt,allCustomers:r,onFavoriteCustomer:x})})]}),E.jsx(k1,{selectedCustomer:C,onClose:()=>p(null),onEditCustomer:_t,onUpdateCustomer:b,onDeleteCustomer:j,activities:i,onSaveActivity:I,onDeleteActivity:M,meetings:o,onSaveMeeting:R,onDeleteMeeting:ht}),E.jsx(I1,{isOpen:_,onClose:V,onSave:b,editData:A})]})}A1.createRoot(document.getElementById("root")).render(E.jsx(Dt.StrictMode,{children:E.jsx(h2,{})}));
