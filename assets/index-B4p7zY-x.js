(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();var jf={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function vE(){if(oy)return Ql;oy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,h){var d=null;if(h!==void 0&&(d=""+h),o.key!==void 0&&(d=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:h}}return Ql.Fragment=e,Ql.jsx=i,Ql.jsxs=i,Ql}var uy;function EE(){return uy||(uy=1,jf.exports=vE()),jf.exports}var p=EE(),Of={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function TE(){if(cy)return Lt;cy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function j(I){return I===null||typeof I!="object"?null:(I=w&&I[w]||I["@@iterator"],typeof I=="function"?I:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,it={};function H(I,Z,L){this.props=I,this.context=Z,this.refs=it,this.updater=L||K}H.prototype.isReactComponent={},H.prototype.setState=function(I,Z){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Z,"setState")},H.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function et(){}et.prototype=H.prototype;function ft(I,Z,L){this.props=I,this.context=Z,this.refs=it,this.updater=L||K}var yt=ft.prototype=new et;yt.constructor=ft,z(yt,H.prototype),yt.isPureReactComponent=!0;var gt=Array.isArray,vt={H:null,A:null,T:null,S:null,V:null},st=Object.prototype.hasOwnProperty;function D(I,Z,L,k,Y,B){return L=B.ref,{$$typeof:r,type:I,key:Z,ref:L!==void 0?L:null,props:B}}function R(I,Z){return D(I.type,Z,void 0,void 0,void 0,I.props)}function S(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function V(I){var Z={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(L){return Z[L]})}var N=/\/+/g;function C(I,Z){return typeof I=="object"&&I!==null&&I.key!=null?V(""+I.key):Z.toString(36)}function A(){}function Et(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(A,A):(I.status="pending",I.then(function(Z){I.status==="pending"&&(I.status="fulfilled",I.value=Z)},function(Z){I.status==="pending"&&(I.status="rejected",I.reason=Z)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function _t(I,Z,L,k,Y){var B=typeof I;(B==="undefined"||B==="boolean")&&(I=null);var P=!1;if(I===null)P=!0;else switch(B){case"bigint":case"string":case"number":P=!0;break;case"object":switch(I.$$typeof){case r:case e:P=!0;break;case T:return P=I._init,_t(P(I._payload),Z,L,k,Y)}}if(P)return Y=Y(I),P=k===""?"."+C(I,0):k,gt(Y)?(L="",P!=null&&(L=P.replace(N,"$&/")+"/"),_t(Y,Z,L,"",function(ct){return ct})):Y!=null&&(S(Y)&&(Y=R(Y,L+(Y.key==null||I&&I.key===Y.key?"":(""+Y.key).replace(N,"$&/")+"/")+P)),Z.push(Y)),1;P=0;var J=k===""?".":k+":";if(gt(I))for(var nt=0;nt<I.length;nt++)k=I[nt],B=J+C(k,nt),P+=_t(k,Z,L,B,Y);else if(nt=j(I),typeof nt=="function")for(I=nt.call(I),nt=0;!(k=I.next()).done;)k=k.value,B=J+C(k,nt++),P+=_t(k,Z,L,B,Y);else if(B==="object"){if(typeof I.then=="function")return _t(Et(I),Z,L,k,Y);throw Z=String(I),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return P}function O(I,Z,L){if(I==null)return I;var k=[],Y=0;return _t(I,k,"","",function(B){return Z.call(L,B,Y++)}),k}function tt(I){if(I._status===-1){var Z=I._result;Z=Z(),Z.then(function(L){(I._status===0||I._status===-1)&&(I._status=1,I._result=L)},function(L){(I._status===0||I._status===-1)&&(I._status=2,I._result=L)}),I._status===-1&&(I._status=0,I._result=Z)}if(I._status===1)return I._result.default;throw I._result}var ut=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function pt(){}return Lt.Children={map:O,forEach:function(I,Z,L){O(I,function(){Z.apply(this,arguments)},L)},count:function(I){var Z=0;return O(I,function(){Z++}),Z},toArray:function(I){return O(I,function(Z){return Z})||[]},only:function(I){if(!S(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Lt.Component=H,Lt.Fragment=i,Lt.Profiler=o,Lt.PureComponent=ft,Lt.StrictMode=a,Lt.Suspense=_,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=vt,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return vt.H.useMemoCache(I)}},Lt.cache=function(I){return function(){return I.apply(null,arguments)}},Lt.cloneElement=function(I,Z,L){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var k=z({},I.props),Y=I.key,B=void 0;if(Z!=null)for(P in Z.ref!==void 0&&(B=void 0),Z.key!==void 0&&(Y=""+Z.key),Z)!st.call(Z,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&Z.ref===void 0||(k[P]=Z[P]);var P=arguments.length-2;if(P===1)k.children=L;else if(1<P){for(var J=Array(P),nt=0;nt<P;nt++)J[nt]=arguments[nt+2];k.children=J}return D(I.type,Y,void 0,void 0,B,k)},Lt.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:h,_context:I},I},Lt.createElement=function(I,Z,L){var k,Y={},B=null;if(Z!=null)for(k in Z.key!==void 0&&(B=""+Z.key),Z)st.call(Z,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(Y[k]=Z[k]);var P=arguments.length-2;if(P===1)Y.children=L;else if(1<P){for(var J=Array(P),nt=0;nt<P;nt++)J[nt]=arguments[nt+2];Y.children=J}if(I&&I.defaultProps)for(k in P=I.defaultProps,P)Y[k]===void 0&&(Y[k]=P[k]);return D(I,B,void 0,void 0,null,Y)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(I){return{$$typeof:g,render:I}},Lt.isValidElement=S,Lt.lazy=function(I){return{$$typeof:T,_payload:{_status:-1,_result:I},_init:tt}},Lt.memo=function(I,Z){return{$$typeof:y,type:I,compare:Z===void 0?null:Z}},Lt.startTransition=function(I){var Z=vt.T,L={};vt.T=L;try{var k=I(),Y=vt.S;Y!==null&&Y(L,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(pt,ut)}catch(B){ut(B)}finally{vt.T=Z}},Lt.unstable_useCacheRefresh=function(){return vt.H.useCacheRefresh()},Lt.use=function(I){return vt.H.use(I)},Lt.useActionState=function(I,Z,L){return vt.H.useActionState(I,Z,L)},Lt.useCallback=function(I,Z){return vt.H.useCallback(I,Z)},Lt.useContext=function(I){return vt.H.useContext(I)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(I,Z){return vt.H.useDeferredValue(I,Z)},Lt.useEffect=function(I,Z,L){var k=vt.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return k.useEffect(I,Z)},Lt.useId=function(){return vt.H.useId()},Lt.useImperativeHandle=function(I,Z,L){return vt.H.useImperativeHandle(I,Z,L)},Lt.useInsertionEffect=function(I,Z){return vt.H.useInsertionEffect(I,Z)},Lt.useLayoutEffect=function(I,Z){return vt.H.useLayoutEffect(I,Z)},Lt.useMemo=function(I,Z){return vt.H.useMemo(I,Z)},Lt.useOptimistic=function(I,Z){return vt.H.useOptimistic(I,Z)},Lt.useReducer=function(I,Z,L){return vt.H.useReducer(I,Z,L)},Lt.useRef=function(I){return vt.H.useRef(I)},Lt.useState=function(I){return vt.H.useState(I)},Lt.useSyncExternalStore=function(I,Z,L){return vt.H.useSyncExternalStore(I,Z,L)},Lt.useTransition=function(){return vt.H.useTransition()},Lt.version="19.1.1",Lt}var hy;function yd(){return hy||(hy=1,Of.exports=TE()),Of.exports}var Tt=yd(),kf={exports:{}},Kl={},Pf={exports:{}},Uf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function bE(){return fy||(fy=1,(function(r){function e(O,tt){var ut=O.length;O.push(tt);t:for(;0<ut;){var pt=ut-1>>>1,I=O[pt];if(0<o(I,tt))O[pt]=tt,O[ut]=I,ut=pt;else break t}}function i(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var tt=O[0],ut=O.pop();if(ut!==tt){O[0]=ut;t:for(var pt=0,I=O.length,Z=I>>>1;pt<Z;){var L=2*(pt+1)-1,k=O[L],Y=L+1,B=O[Y];if(0>o(k,ut))Y<I&&0>o(B,k)?(O[pt]=B,O[Y]=ut,pt=Y):(O[pt]=k,O[L]=ut,pt=L);else if(Y<I&&0>o(B,ut))O[pt]=B,O[Y]=ut,pt=Y;else break t}}return tt}function o(O,tt){var ut=O.sortIndex-tt.sortIndex;return ut!==0?ut:O.id-tt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var _=[],y=[],T=1,w=null,j=3,K=!1,z=!1,it=!1,H=!1,et=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,yt=typeof setImmediate<"u"?setImmediate:null;function gt(O){for(var tt=i(y);tt!==null;){if(tt.callback===null)a(y);else if(tt.startTime<=O)a(y),tt.sortIndex=tt.expirationTime,e(_,tt);else break;tt=i(y)}}function vt(O){if(it=!1,gt(O),!z)if(i(_)!==null)z=!0,st||(st=!0,C());else{var tt=i(y);tt!==null&&_t(vt,tt.startTime-O)}}var st=!1,D=-1,R=5,S=-1;function V(){return H?!0:!(r.unstable_now()-S<R)}function N(){if(H=!1,st){var O=r.unstable_now();S=O;var tt=!0;try{t:{z=!1,it&&(it=!1,ft(D),D=-1),K=!0;var ut=j;try{e:{for(gt(O),w=i(_);w!==null&&!(w.expirationTime>O&&V());){var pt=w.callback;if(typeof pt=="function"){w.callback=null,j=w.priorityLevel;var I=pt(w.expirationTime<=O);if(O=r.unstable_now(),typeof I=="function"){w.callback=I,gt(O),tt=!0;break e}w===i(_)&&a(_),gt(O)}else a(_);w=i(_)}if(w!==null)tt=!0;else{var Z=i(y);Z!==null&&_t(vt,Z.startTime-O),tt=!1}}break t}finally{w=null,j=ut,K=!1}tt=void 0}}finally{tt?C():st=!1}}}var C;if(typeof yt=="function")C=function(){yt(N)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Et=A.port2;A.port1.onmessage=N,C=function(){Et.postMessage(null)}}else C=function(){et(N,0)};function _t(O,tt){D=et(function(){O(r.unstable_now())},tt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(O){O.callback=null},r.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},r.unstable_getCurrentPriorityLevel=function(){return j},r.unstable_next=function(O){switch(j){case 1:case 2:case 3:var tt=3;break;default:tt=j}var ut=j;j=tt;try{return O()}finally{j=ut}},r.unstable_requestPaint=function(){H=!0},r.unstable_runWithPriority=function(O,tt){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ut=j;j=O;try{return tt()}finally{j=ut}},r.unstable_scheduleCallback=function(O,tt,ut){var pt=r.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?pt+ut:pt):ut=pt,O){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ut+I,O={id:T++,callback:tt,priorityLevel:O,startTime:ut,expirationTime:I,sortIndex:-1},ut>pt?(O.sortIndex=ut,e(y,O),i(_)===null&&O===i(y)&&(it?(ft(D),D=-1):it=!0,_t(vt,ut-pt))):(O.sortIndex=I,e(_,O),z||K||(z=!0,st||(st=!0,C()))),O},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(O){var tt=j;return function(){var ut=j;j=tt;try{return O.apply(this,arguments)}finally{j=ut}}}})(Uf)),Uf}var dy;function xE(){return dy||(dy=1,Pf.exports=bE()),Pf.exports}var Lf={exports:{}},We={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function SE(){if(py)return We;py=1;var r=yd();function e(_){var y="https://react.dev/errors/"+_;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(_,y,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:_,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,y){if(_==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return We.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,We.createPortal=function(_,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return h(_,y,null,T)},We.flushSync=function(_){var y=d.T,T=a.p;try{if(d.T=null,a.p=2,_)return _()}finally{d.T=y,a.p=T,a.d.f()}},We.preconnect=function(_,y){typeof _=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(_,y))},We.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},We.preinit=function(_,y){if(typeof _=="string"&&y&&typeof y.as=="string"){var T=y.as,w=g(T,y.crossOrigin),j=typeof y.integrity=="string"?y.integrity:void 0,K=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?a.d.S(_,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:j,fetchPriority:K}):T==="script"&&a.d.X(_,{crossOrigin:w,integrity:j,fetchPriority:K,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},We.preinitModule=function(_,y){if(typeof _=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);a.d.M(_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(_)},We.preload=function(_,y){if(typeof _=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,w=g(T,y.crossOrigin);a.d.L(_,T,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},We.preloadModule=function(_,y){if(typeof _=="string")if(y){var T=g(y.as,y.crossOrigin);a.d.m(_,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(_)},We.requestFormReset=function(_){a.d.r(_)},We.unstable_batchedUpdates=function(_,y){return _(y)},We.useFormState=function(_,y,T){return d.H.useFormState(_,y,T)},We.useFormStatus=function(){return d.H.useHostTransitionStatus()},We.version="19.1.1",We}var my;function AE(){if(my)return Lf.exports;my=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lf.exports=SE(),Lf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function RE(){if(gy)return Kl;gy=1;var r=xE(),e=yd(),i=AE();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(a(188))}function _(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,l=n;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return g(c),t;if(f===l)return g(c),n;f=f.sibling}throw Error(a(188))}if(s.return!==l.return)s=c,l=f;else{for(var E=!1,b=c.child;b;){if(b===s){E=!0,s=c,l=f;break}if(b===l){E=!0,l=c,s=f;break}b=b.sibling}if(!E){for(b=f.child;b;){if(b===s){E=!0,s=f,l=c;break}if(b===l){E=!0,l=f,s=c;break}b=b.sibling}if(!E)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function y(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=y(t),n!==null)return n;t=t.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),it=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),et=Symbol.for("react.provider"),ft=Symbol.for("react.consumer"),yt=Symbol.for("react.context"),gt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function C(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function Et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case H:return"Profiler";case it:return"StrictMode";case vt:return"Suspense";case st:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case yt:return(t.displayName||"Context")+".Provider";case ft:return(t._context.displayName||"Context")+".Consumer";case gt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return n=t.displayName||null,n!==null?n:Et(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return Et(t(n))}catch{}}return null}var _t=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},pt=[],I=-1;function Z(t){return{current:t}}function L(t){0>I||(t.current=pt[I],pt[I]=null,I--)}function k(t,n){I++,pt[I]=t.current,t.current=n}var Y=Z(null),B=Z(null),P=Z(null),J=Z(null);function nt(t,n){switch(k(P,n),k(B,t),k(Y,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?kg(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=kg(n),t=Pg(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(Y),k(Y,t)}function ct(){L(Y),L(B),L(P)}function St(t){t.memoizedState!==null&&k(J,t);var n=Y.current,s=Pg(n,t.type);n!==s&&(k(B,t),k(Y,s))}function dt(t){B.current===t&&(L(Y),L(B)),J.current===t&&(L(J),ql._currentValue=ut)}var kt=Object.prototype.hasOwnProperty,Ct=r.unstable_scheduleCallback,At=r.unstable_cancelCallback,Vt=r.unstable_shouldYield,Xn=r.unstable_requestPaint,Oe=r.unstable_now,kr=r.unstable_getCurrentPriorityLevel,ye=r.unstable_ImmediatePriority,ke=r.unstable_UserBlockingPriority,Ei=r.unstable_NormalPriority,Oc=r.unstable_LowPriority,Ha=r.unstable_IdlePriority,kc=r.log,Bs=r.unstable_setDisableYieldValue,Gi=null,Xe=null;function Tn(t){if(typeof kc=="function"&&Bs(t),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Gi,t)}catch{}}var sn=Math.clz32?Math.clz32:Eo,Pc=Math.log,vo=Math.LN2;function Eo(t){return t>>>=0,t===0?32:31-(Pc(t)/vo|0)|0}var $n=256,Yi=4194304;function Pn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function bn(t,n,s){var l=t.pendingLanes;if(l===0)return 0;var c=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~f,l!==0?c=Pn(l):(E&=b,E!==0?c=Pn(E):s||(s=b&~t,s!==0&&(c=Pn(s))))):(b=l&~f,b!==0?c=Pn(b):E!==0?c=Pn(E):s||(s=l&~t,s!==0&&(c=Pn(s)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,s=n&-n,f>=s||f===32&&(s&4194048)!==0)?n:c}function Qi(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Pr(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fa(){var t=$n;return $n<<=1,($n&4194048)===0&&($n=256),t}function Ki(){var t=Yi;return Yi<<=1,(Yi&62914560)===0&&(Yi=4194304),t}function Ur(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function _e(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function To(t,n,s,l,c,f){var E=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var b=t.entanglements,M=t.expirationTimes,Q=t.hiddenUpdates;for(s=E&~s;0<s;){var rt=31-sn(s),lt=1<<rt;b[rt]=0,M[rt]=-1;var X=Q[rt];if(X!==null)for(Q[rt]=null,rt=0;rt<X.length;rt++){var $=X[rt];$!==null&&($.lane&=-536870913)}s&=~lt}l!==0&&Xi(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~n))}function Xi(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-sn(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function $i(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-sn(s),c=1<<l;c&n|t[l]&n&&(t[l]|=n),s&=~c}}function Ga(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ya(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ti(){var t=tt.p;return t!==0?t:(t=window.event,t===void 0?32:ny(t.type))}function Uc(t,n){var s=tt.p;try{return tt.p=t,n()}finally{tt.p=s}}var Zn=Math.random().toString(36).slice(2),ve="__reactFiber$"+Zn,qe="__reactProps$"+Zn,bi="__reactContainer$"+Zn,qs="__reactEvents$"+Zn,Hs="__reactListeners$"+Zn,Lc="__reactHandles$"+Zn,Un="__reactResources$"+Zn,Zi="__reactMarker$"+Zn;function Lr(t){delete t[ve],delete t[qe],delete t[qs],delete t[Hs],delete t[Lc]}function Wn(t){var n=t[ve];if(n)return n;for(var s=t.parentNode;s;){if(n=s[bi]||s[ve]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Bg(t);t!==null;){if(s=t[ve])return s;t=Bg(t)}return n}t=s,s=t.parentNode}return null}function Jn(t){if(t=t[ve]||t[bi]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Wi(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Ji(t){var n=t[Un];return n||(n=t[Un]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ee(t){t[Zi]=!0}var bo=new Set,Fs={};function ti(t,n){ei(t,n),ei(t+"Capture",n)}function ei(t,n){for(Fs[t]=n,t=0;t<n.length;t++)bo.add(n[t])}var Gs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ni={},zr={};function zc(t){return kt.call(zr,t)?!0:kt.call(ni,t)?!1:Gs.test(t)?zr[t]=!0:(ni[t]=!0,!1)}function Ys(t,n,s){if(zc(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function Qs(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function xn(t,n,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+l)}}var Ks,Br;function xi(t){if(Ks===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Ks=n&&n[1]||"",Br=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ks+t+Br}var qr=!1;function Hr(t,n){if(!t||qr)return"";qr=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch($){var X=$}Reflect.construct(t,[],lt)}else{try{lt.call()}catch($){X=$}t.call(lt.prototype)}}else{try{throw Error()}catch($){X=$}(lt=t())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch($){if($&&X&&typeof $.stack=="string")return[$.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],b=f[1];if(E&&b){var M=E.split(`
`),Q=b.split(`
`);for(c=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;c<Q.length&&!Q[c].includes("DetermineComponentFrameRoot");)c++;if(l===M.length||c===Q.length)for(l=M.length-1,c=Q.length-1;1<=l&&0<=c&&M[l]!==Q[c];)c--;for(;1<=l&&0<=c;l--,c--)if(M[l]!==Q[c]){if(l!==1||c!==1)do if(l--,c--,0>c||M[l]!==Q[c]){var rt=`
`+M[l].replace(" at new "," at ");return t.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",t.displayName)),rt}while(1<=l&&0<=c);break}}}finally{qr=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?xi(s):""}function Bc(t){switch(t.tag){case 26:case 27:case 5:return xi(t.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return Hr(t.type,!1);case 11:return Hr(t.type.render,!1);case 1:return Hr(t.type,!0);case 31:return xi("Activity");default:return""}}function Ln(t){try{var n="";do n+=Bc(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function fe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ts(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Xs(t){var n=ts(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function es(t){t._valueTracker||(t._valueTracker=Xs(t))}function ee(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=ts(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function Si(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $s=/[\n"\\]/g;function Pe(t){return t.replace($s,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Qa(t,n,s,l,c,f,E,b){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),n!=null?E==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+fe(n)):t.value!==""+fe(n)&&(t.value=""+fe(n)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),n!=null?Xa(t,E,fe(n)):s!=null?Xa(t,E,fe(s)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+fe(b):t.removeAttribute("name")}function Ka(t,n,s,l,c,f,E,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;s=s!=null?""+fe(s):"",n=n!=null?""+fe(n):s,b||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function Xa(t,n,s){n==="number"&&Si(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function ns(t,n,s,l){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&l&&(t[s].defaultSelected=!0)}else{for(s=""+fe(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function xo(t,n,s){if(n!=null&&(n=""+fe(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+fe(s):""}function So(t,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(_t(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=fe(n),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function Sn(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Ai=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $a(t,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,s):typeof s!="number"||s===0||Ai.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function Za(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&s[c]!==l&&$a(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&$a(t,f,n[f])}function Fr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ao=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ro=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zn(t){return Ro.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Wa=null;function Ja(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var is=null,rn=null;function wo(t){var n=Jn(t);if(n&&(t=n.stateNode)){var s=t[qe]||null;t:switch(t=n.stateNode,n.type){case"input":if(Qa(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Pe(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var c=l[qe]||null;if(!c)throw Error(a(90));Qa(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===t.form&&ee(l)}break t;case"textarea":xo(t,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&ns(t,!!s.multiple,n,!1)}}}var Zs=!1;function Ws(t,n,s){if(Zs)return t(n,s);Zs=!0;try{var l=t(n);return l}finally{if(Zs=!1,(is!==null||rn!==null)&&(gu(),is&&(n=is,t=rn,rn=is=null,wo(n),t)))for(n=0;n<t.length;n++)wo(t[n])}}function ss(t,n){var s=t.stateNode;if(s===null)return null;var l=s[qe]||null;if(l===null)return null;s=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(an)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{Ri=!1}var An=null,ae=null,Gr=null;function Co(){if(Gr)return Gr;var t,n=ae,s=n.length,l,c="value"in An?An.value:An.textContent,f=c.length;for(t=0;t<s&&n[t]===c[t];t++);var E=s-t;for(l=1;l<=E&&n[s-l]===c[f-l];l++);return Gr=c.slice(t,1<l?1-l:void 0)}function Js(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function tr(){return!0}function tl(){return!1}function De(t){function n(s,l,c,f,E){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(s=t[b],this[b]=s?s(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?tr:tl,this.isPropagationStopped=tl,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),n}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},er=De($e),nr=T({},$e,{view:0,detail:0}),ir=De(nr),Yr,sr,ii,rr=T({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ii&&(ii&&t.type==="mousemove"?(Yr=t.screenX-ii.screenX,sr=t.screenY-ii.screenY):sr=Yr=0,ii=t),Yr)},movementY:function(t){return"movementY"in t?t.movementY:sr}}),ar=De(rr),qc=T({},rr,{dataTransfer:0}),Do=De(qc),lr=T({},nr,{relatedTarget:0}),Qr=De(lr),No=T({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),el=De(No),nl=T({},$e,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Io=De(nl),Kr=T({},$e,{data:0}),il=De(Kr),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Vo[t])?!!n[t]:!1}function Xr(){return jo}var Oo=T({},nr,{key:function(t){if(t.key){var n=Mo[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Js(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xr,charCode:function(t){return t.type==="keypress"?Js(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Js(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$r=De(Oo),ln=T({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sl=De(ln),ko=T({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xr}),as=De(ko),u=T({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=De(u),v=T({},rr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x=De(v),G=T({},$e,{newState:0,oldState:0}),W=De(G),mt=[9,13,27,32],Pt=an&&"CompositionEvent"in window,oe=null;an&&"documentMode"in document&&(oe=document.documentMode);var Wt=an&&"TextEvent"in window&&!oe,Te=an&&(!Pt||oe&&8<oe&&11>=oe),dn=" ",si=!1;function Bn(t,n){switch(t){case"keyup":return mt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hn=!1;function rl(t,n){switch(t){case"compositionend":return qn(n);case"keypress":return n.which!==32?null:(si=!0,dn);case"textInput":return t=n.data,t===dn&&si?null:t;default:return null}}function Y0(t,n){if(Hn)return t==="compositionend"||!Pt&&Bn(t,n)?(t=Co(),Gr=ae=An=null,Hn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Te&&n.locale!=="ko"?null:n.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Q0[t.type]:n==="textarea"}function Zd(t,n,s,l){is?rn?rn.push(l):rn=[l]:is=l,n=bu(n,"onChange"),0<n.length&&(s=new er("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var al=null,ll=null;function K0(t){Ig(t,0)}function Po(t){var n=Wi(t);if(ee(n))return t}function Wd(t,n){if(t==="change")return n}var Jd=!1;if(an){var Hc;if(an){var Fc="oninput"in document;if(!Fc){var tp=document.createElement("div");tp.setAttribute("oninput","return;"),Fc=typeof tp.oninput=="function"}Hc=Fc}else Hc=!1;Jd=Hc&&(!document.documentMode||9<document.documentMode)}function ep(){al&&(al.detachEvent("onpropertychange",np),ll=al=null)}function np(t){if(t.propertyName==="value"&&Po(ll)){var n=[];Zd(n,ll,t,Ja(t)),Ws(K0,n)}}function X0(t,n,s){t==="focusin"?(ep(),al=n,ll=s,al.attachEvent("onpropertychange",np)):t==="focusout"&&ep()}function $0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(ll)}function Z0(t,n){if(t==="click")return Po(n)}function W0(t,n){if(t==="input"||t==="change")return Po(n)}function J0(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var pn=typeof Object.is=="function"?Object.is:J0;function ol(t,n){if(pn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!kt.call(n,c)||!pn(t[c],n[c]))return!1}return!0}function ip(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sp(t,n){var s=ip(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=ip(s)}}function rp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?rp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function ap(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Si(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Si(t.document)}return n}function Gc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var t1=an&&"documentMode"in document&&11>=document.documentMode,Zr=null,Yc=null,ul=null,Qc=!1;function lp(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Qc||Zr==null||Zr!==Si(l)||(l=Zr,"selectionStart"in l&&Gc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ul&&ol(ul,l)||(ul=l,l=bu(Yc,"onSelect"),0<l.length&&(n=new er("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=Zr)))}function or(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Wr={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},Kc={},op={};an&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function ur(t){if(Kc[t])return Kc[t];if(!Wr[t])return t;var n=Wr[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in op)return Kc[t]=n[s];return t}var up=ur("animationend"),cp=ur("animationiteration"),hp=ur("animationstart"),e1=ur("transitionrun"),n1=ur("transitionstart"),i1=ur("transitioncancel"),fp=ur("transitionend"),dp=new Map,Xc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xc.push("scrollEnd");function Fn(t,n){dp.set(t,n),ti(n,[t])}var pp=new WeakMap;function Rn(t,n){if(typeof t=="object"&&t!==null){var s=pp.get(t);return s!==void 0?s:(n={value:t,source:n,stack:Ln(n)},pp.set(t,n),n)}return{value:t,source:n,stack:Ln(n)}}var wn=[],Jr=0,$c=0;function Uo(){for(var t=Jr,n=$c=Jr=0;n<t;){var s=wn[n];wn[n++]=null;var l=wn[n];wn[n++]=null;var c=wn[n];wn[n++]=null;var f=wn[n];if(wn[n++]=null,l!==null&&c!==null){var E=l.pending;E===null?c.next=c:(c.next=E.next,E.next=c),l.pending=c}f!==0&&mp(s,c,f)}}function Lo(t,n,s,l){wn[Jr++]=t,wn[Jr++]=n,wn[Jr++]=s,wn[Jr++]=l,$c|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Zc(t,n,s,l){return Lo(t,n,s,l),zo(t)}function ta(t,n){return Lo(t,null,null,n),zo(t)}function mp(t,n,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var c=!1,f=t.return;f!==null;)f.childLanes|=s,l=f.alternate,l!==null&&(l.childLanes|=s),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-sn(s),t=f.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=s|536870912),f):null}function zo(t){if(50<jl)throw jl=0,sf=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var ea={};function s1(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,n,s,l){return new s1(t,n,s,l)}function Wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ci(t,n){var s=t.alternate;return s===null?(s=mn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function gp(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Bo(t,n,s,l,c,f){var E=0;if(l=t,typeof t=="function")Wc(t)&&(E=1);else if(typeof t=="string")E=aE(t,s,Y.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case S:return t=mn(31,s,n,c),t.elementType=S,t.lanes=f,t;case z:return cr(s.children,c,f,n);case it:E=8,c|=24;break;case H:return t=mn(12,s,n,c|2),t.elementType=H,t.lanes=f,t;case vt:return t=mn(13,s,n,c),t.elementType=vt,t.lanes=f,t;case st:return t=mn(19,s,n,c),t.elementType=st,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case et:case yt:E=10;break t;case ft:E=9;break t;case gt:E=11;break t;case D:E=14;break t;case R:E=16,l=null;break t}E=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=mn(E,s,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function cr(t,n,s,l){return t=mn(7,t,l,n),t.lanes=s,t}function Jc(t,n,s){return t=mn(6,t,null,n),t.lanes=s,t}function th(t,n,s){return n=mn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var na=[],ia=0,qo=null,Ho=0,Cn=[],Dn=0,hr=null,Di=1,Ni="";function fr(t,n){na[ia++]=Ho,na[ia++]=qo,qo=t,Ho=n}function yp(t,n,s){Cn[Dn++]=Di,Cn[Dn++]=Ni,Cn[Dn++]=hr,hr=t;var l=Di;t=Ni;var c=32-sn(l)-1;l&=~(1<<c),s+=1;var f=32-sn(n)+c;if(30<f){var E=c-c%5;f=(l&(1<<E)-1).toString(32),l>>=E,c-=E,Di=1<<32-sn(n)+c|s<<c|l,Ni=f+t}else Di=1<<f|s<<c|l,Ni=t}function eh(t){t.return!==null&&(fr(t,1),yp(t,1,0))}function nh(t){for(;t===qo;)qo=na[--ia],na[ia]=null,Ho=na[--ia],na[ia]=null;for(;t===hr;)hr=Cn[--Dn],Cn[Dn]=null,Ni=Cn[--Dn],Cn[Dn]=null,Di=Cn[--Dn],Cn[Dn]=null}var on=null,me=null,$t=!1,dr=null,ri=!1,ih=Error(a(519));function pr(t){var n=Error(a(418,""));throw fl(Rn(n,t)),ih}function _p(t){var n=t.stateNode,s=t.type,l=t.memoizedProps;switch(n[ve]=t,n[qe]=l,s){case"dialog":Ht("cancel",n),Ht("close",n);break;case"iframe":case"object":case"embed":Ht("load",n);break;case"video":case"audio":for(s=0;s<kl.length;s++)Ht(kl[s],n);break;case"source":Ht("error",n);break;case"img":case"image":case"link":Ht("error",n),Ht("load",n);break;case"details":Ht("toggle",n);break;case"input":Ht("invalid",n),Ka(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),es(n);break;case"select":Ht("invalid",n);break;case"textarea":Ht("invalid",n),So(n,l.value,l.defaultValue,l.children),es(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||Og(n.textContent,s)?(l.popover!=null&&(Ht("beforetoggle",n),Ht("toggle",n)),l.onScroll!=null&&Ht("scroll",n),l.onScrollEnd!=null&&Ht("scrollend",n),l.onClick!=null&&(n.onclick=xu),n=!0):n=!1,n||pr(t)}function vp(t){for(on=t.return;on;)switch(on.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:on=on.return}}function cl(t){if(t!==on)return!1;if(!$t)return vp(t),$t=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Ef(t.type,t.memoizedProps)),s=!s),s&&me&&pr(t),vp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){me=Yn(t.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}me=null}}else n===27?(n=me,bs(t.type)?(t=Sf,Sf=null,me=t):me=n):me=on?Yn(t.stateNode.nextSibling):null;return!0}function hl(){me=on=null,$t=!1}function Ep(){var t=dr;return t!==null&&(hn===null?hn=t:hn.push.apply(hn,t),dr=null),t}function fl(t){dr===null?dr=[t]:dr.push(t)}var sh=Z(null),mr=null,Ii=null;function ls(t,n,s){k(sh,n._currentValue),n._currentValue=s}function Mi(t){t._currentValue=sh.current,L(sh)}function rh(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function ah(t,n,s,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var E=c.child;f=f.firstContext;t:for(;f!==null;){var b=f;f=c;for(var M=0;M<n.length;M++)if(b.context===n[M]){f.lanes|=s,b=f.alternate,b!==null&&(b.lanes|=s),rh(f.return,s,t),l||(E=null);break t}f=b.next}}else if(c.tag===18){if(E=c.return,E===null)throw Error(a(341));E.lanes|=s,f=E.alternate,f!==null&&(f.lanes|=s),rh(E,s,t),E=null}else E=c.child;if(E!==null)E.return=c;else for(E=c;E!==null;){if(E===t){E=null;break}if(c=E.sibling,c!==null){c.return=E.return,E=c;break}E=E.return}c=E}}function dl(t,n,s,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var E=c.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var b=c.type;pn(c.pendingProps.value,E.value)||(t!==null?t.push(b):t=[b])}}else if(c===J.current){if(E=c.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(ql):t=[ql])}c=c.return}t!==null&&ah(n,t,s,l),n.flags|=262144}function Fo(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function gr(t){mr=t,Ii=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ze(t){return Tp(mr,t)}function Go(t,n){return mr===null&&gr(t),Tp(t,n)}function Tp(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Ii===null){if(t===null)throw Error(a(308));Ii=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ii=Ii.next=n;return s}var r1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},a1=r.unstable_scheduleCallback,l1=r.unstable_NormalPriority,Ne={$$typeof:yt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lh(){return{controller:new r1,data:new Map,refCount:0}}function pl(t){t.refCount--,t.refCount===0&&a1(l1,function(){t.controller.abort()})}var ml=null,oh=0,sa=0,ra=null;function o1(t,n){if(ml===null){var s=ml=[];oh=0,sa=hf(),ra={status:"pending",value:void 0,then:function(l){s.push(l)}}}return oh++,n.then(bp,bp),n}function bp(){if(--oh===0&&ml!==null){ra!==null&&(ra.status="fulfilled");var t=ml;ml=null,sa=0,ra=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function u1(t,n){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<s.length;c++)(0,s[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var xp=O.S;O.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&o1(t,n),xp!==null&&xp(t,n)};var yr=Z(null);function uh(){var t=yr.current;return t!==null?t:le.pooledCache}function Yo(t,n){n===null?k(yr,yr.current):k(yr,n.pool)}function Sp(){var t=uh();return t===null?null:{parent:Ne._currentValue,pool:t}}var gl=Error(a(460)),Ap=Error(a(474)),Qo=Error(a(542)),ch={then:function(){}};function Rp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ko(){}function wp(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Ko,Ko),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dp(t),t;default:if(typeof n.status=="string")n.then(Ko,Ko);else{if(t=le,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dp(t),t}throw yl=n,gl}}var yl=null;function Cp(){if(yl===null)throw Error(a(459));var t=yl;return yl=null,t}function Dp(t){if(t===gl||t===Qo)throw Error(a(483))}var os=!1;function hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function us(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function cs(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Jt&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=zo(t),mp(t,null,s),n}return Lo(t,l,n,s),zo(t)}function _l(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,$i(t,s)}}function dh(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var E={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?c=f=E:f=f.next=E,s=s.next}while(s!==null);f===null?c=f=n:f=f.next=n}else c=f=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var ph=!1;function vl(){if(ph){var t=ra;if(t!==null)throw t}}function El(t,n,s,l){ph=!1;var c=t.updateQueue;os=!1;var f=c.firstBaseUpdate,E=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var M=b,Q=M.next;M.next=null,E===null?f=Q:E.next=Q,E=M;var rt=t.alternate;rt!==null&&(rt=rt.updateQueue,b=rt.lastBaseUpdate,b!==E&&(b===null?rt.firstBaseUpdate=Q:b.next=Q,rt.lastBaseUpdate=M))}if(f!==null){var lt=c.baseState;E=0,rt=Q=M=null,b=f;do{var X=b.lane&-536870913,$=X!==b.lane;if($?(Yt&X)===X:(l&X)===X){X!==0&&X===sa&&(ph=!0),rt!==null&&(rt=rt.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var jt=t,Nt=b;X=n;var se=s;switch(Nt.tag){case 1:if(jt=Nt.payload,typeof jt=="function"){lt=jt.call(se,lt,X);break t}lt=jt;break t;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=Nt.payload,X=typeof jt=="function"?jt.call(se,lt,X):jt,X==null)break t;lt=T({},lt,X);break t;case 2:os=!0}}X=b.callback,X!==null&&(t.flags|=64,$&&(t.flags|=8192),$=c.callbacks,$===null?c.callbacks=[X]:$.push(X))}else $={lane:X,tag:b.tag,payload:b.payload,callback:b.callback,next:null},rt===null?(Q=rt=$,M=lt):rt=rt.next=$,E|=X;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;$=b,b=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);rt===null&&(M=lt),c.baseState=M,c.firstBaseUpdate=Q,c.lastBaseUpdate=rt,f===null&&(c.shared.lanes=0),_s|=E,t.lanes=E,t.memoizedState=lt}}function Np(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Ip(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Np(s[t],n)}var aa=Z(null),Xo=Z(0);function Mp(t,n){t=Li,k(Xo,t),k(aa,n),Li=t|n.baseLanes}function mh(){k(Xo,Li),k(aa,aa.current)}function gh(){Li=Xo.current,L(aa),L(Xo)}var hs=0,zt=null,ne=null,Ae=null,$o=!1,la=!1,_r=!1,Zo=0,Tl=0,oa=null,c1=0;function be(){throw Error(a(321))}function yh(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!pn(t[s],n[s]))return!1;return!0}function _h(t,n,s,l,c,f){return hs=f,zt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=t===null||t.memoizedState===null?mm:gm,_r=!1,f=s(l,c),_r=!1,la&&(f=jp(n,s,l,c)),Vp(t),f}function Vp(t){O.H=iu;var n=ne!==null&&ne.next!==null;if(hs=0,Ae=ne=zt=null,$o=!1,Tl=0,oa=null,n)throw Error(a(300));t===null||Ue||(t=t.dependencies,t!==null&&Fo(t)&&(Ue=!0))}function jp(t,n,s,l){zt=t;var c=0;do{if(la&&(oa=null),Tl=0,la=!1,25<=c)throw Error(a(301));if(c+=1,Ae=ne=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}O.H=y1,f=n(s,l)}while(la);return f}function h1(){var t=O.H,n=t.useState()[0];return n=typeof n.then=="function"?bl(n):n,t=t.useState()[0],(ne!==null?ne.memoizedState:null)!==t&&(zt.flags|=1024),n}function vh(){var t=Zo!==0;return Zo=0,t}function Eh(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Th(t){if($o){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}$o=!1}hs=0,Ae=ne=zt=null,la=!1,Tl=Zo=0,oa=null}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?zt.memoizedState=Ae=t:Ae=Ae.next=t,Ae}function Re(){if(ne===null){var t=zt.alternate;t=t!==null?t.memoizedState:null}else t=ne.next;var n=Ae===null?zt.memoizedState:Ae.next;if(n!==null)Ae=n,ne=t;else{if(t===null)throw zt.alternate===null?Error(a(467)):Error(a(310));ne=t,t={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},Ae===null?zt.memoizedState=Ae=t:Ae=Ae.next=t}return Ae}function bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(t){var n=Tl;return Tl+=1,oa===null&&(oa=[]),t=wp(oa,t,n),n=zt,(Ae===null?n.memoizedState:Ae.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?mm:gm),t}function Wo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bl(t);if(t.$$typeof===yt)return Ze(t)}throw Error(a(438,String(t)))}function xh(t){var n=null,s=zt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=zt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=bh(),zt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),l=0;l<t;l++)s[l]=V;return n.index++,s}function Vi(t,n){return typeof n=="function"?n(t):n}function Jo(t){var n=Re();return Sh(n,ne,t)}function Sh(t,n,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var E=c.next;c.next=f.next,f.next=E}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var b=E=null,M=null,Q=n,rt=!1;do{var lt=Q.lane&-536870913;if(lt!==Q.lane?(Yt&lt)===lt:(hs&lt)===lt){var X=Q.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),lt===sa&&(rt=!0);else if((hs&X)===X){Q=Q.next,X===sa&&(rt=!0);continue}else lt={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(b=M=lt,E=f):M=M.next=lt,zt.lanes|=X,_s|=X;lt=Q.action,_r&&s(f,lt),f=Q.hasEagerState?Q.eagerState:s(f,lt)}else X={lane:lt,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(b=M=X,E=f):M=M.next=X,zt.lanes|=lt,_s|=lt;Q=Q.next}while(Q!==null&&Q!==n);if(M===null?E=f:M.next=b,!pn(f,t.memoizedState)&&(Ue=!0,rt&&(s=ra,s!==null)))throw s;t.memoizedState=f,t.baseState=E,t.baseQueue=M,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ah(t){var n=Re(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,c=s.pending,f=n.memoizedState;if(c!==null){s.pending=null;var E=c=c.next;do f=t(f,E.action),E=E.next;while(E!==c);pn(f,n.memoizedState)||(Ue=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),s.lastRenderedState=f}return[f,l]}function Op(t,n,s){var l=zt,c=Re(),f=$t;if(f){if(s===void 0)throw Error(a(407));s=s()}else s=n();var E=!pn((ne||c).memoizedState,s);E&&(c.memoizedState=s,Ue=!0),c=c.queue;var b=Up.bind(null,l,c,t);if(xl(2048,8,b,[t]),c.getSnapshot!==n||E||Ae!==null&&Ae.memoizedState.tag&1){if(l.flags|=2048,ua(9,tu(),Pp.bind(null,l,c,s,n),null),le===null)throw Error(a(349));f||(hs&124)!==0||kp(l,n,s)}return s}function kp(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=zt.updateQueue,n===null?(n=bh(),zt.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function Pp(t,n,s,l){n.value=s,n.getSnapshot=l,Lp(n)&&zp(t)}function Up(t,n,s){return s(function(){Lp(n)&&zp(t)})}function Lp(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!pn(t,s)}catch{return!0}}function zp(t){var n=ta(t,2);n!==null&&En(n,t,2)}function Rh(t){var n=un();if(typeof t=="function"){var s=t;if(t=s(),_r){Tn(!0);try{s()}finally{Tn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},n}function Bp(t,n,s,l){return t.baseState=s,Sh(t,ne,typeof l=="function"?l:Vi)}function f1(t,n,s,l,c){if(nu(t))throw Error(a(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};O.T!==null?s(!0):f.isTransition=!1,l(f),s=n.pending,s===null?(f.next=n.pending=f,qp(n,f)):(f.next=s.next,n.pending=s.next=f)}}function qp(t,n){var s=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=O.T,E={};O.T=E;try{var b=s(c,l),M=O.S;M!==null&&M(E,b),Hp(t,n,b)}catch(Q){wh(t,n,Q)}finally{O.T=f}}else try{f=s(c,l),Hp(t,n,f)}catch(Q){wh(t,n,Q)}}function Hp(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Fp(t,n,l)},function(l){return wh(t,n,l)}):Fp(t,n,s)}function Fp(t,n,s){n.status="fulfilled",n.value=s,Gp(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,qp(t,s)))}function wh(t,n,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,Gp(n),n=n.next;while(n!==l)}t.action=null}function Gp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Yp(t,n){return n}function Qp(t,n){if($t){var s=le.formState;if(s!==null){t:{var l=zt;if($t){if(me){e:{for(var c=me,f=ri;c.nodeType!==8;){if(!f){c=null;break e}if(c=Yn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){me=Yn(c.nextSibling),l=c.data==="F!";break t}}pr(l)}l=!1}l&&(n=s[0])}}return s=un(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yp,lastRenderedState:n},s.queue=l,s=fm.bind(null,zt,l),l.dispatch=s,l=Rh(!1),f=Mh.bind(null,zt,!1,l.queue),l=un(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,s=f1.bind(null,zt,c,f,s),c.dispatch=s,l.memoizedState=t,[n,s,!1]}function Kp(t){var n=Re();return Xp(n,ne,t)}function Xp(t,n,s){if(n=Sh(t,n,Yp)[0],t=Jo(Vi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=bl(n)}catch(E){throw E===gl?Qo:E}else l=n;n=Re();var c=n.queue,f=c.dispatch;return s!==n.memoizedState&&(zt.flags|=2048,ua(9,tu(),d1.bind(null,c,s),null)),[l,f,t]}function d1(t,n){t.action=n}function $p(t){var n=Re(),s=ne;if(s!==null)return Xp(n,s,t);Re(),n=n.memoizedState,s=Re();var l=s.queue.dispatch;return s.memoizedState=t,[n,l,!1]}function ua(t,n,s,l){return t={tag:t,create:s,deps:l,inst:n,next:null},n=zt.updateQueue,n===null&&(n=bh(),zt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t),t}function tu(){return{destroy:void 0,resource:void 0}}function Zp(){return Re().memoizedState}function eu(t,n,s,l){var c=un();l=l===void 0?null:l,zt.flags|=t,c.memoizedState=ua(1|n,tu(),s,l)}function xl(t,n,s,l){var c=Re();l=l===void 0?null:l;var f=c.memoizedState.inst;ne!==null&&l!==null&&yh(l,ne.memoizedState.deps)?c.memoizedState=ua(n,f,s,l):(zt.flags|=t,c.memoizedState=ua(1|n,f,s,l))}function Wp(t,n){eu(8390656,8,t,n)}function Jp(t,n){xl(2048,8,t,n)}function tm(t,n){return xl(4,2,t,n)}function em(t,n){return xl(4,4,t,n)}function nm(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function im(t,n,s){s=s!=null?s.concat([t]):null,xl(4,4,nm.bind(null,n,t),s)}function Ch(){}function sm(t,n){var s=Re();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&yh(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function rm(t,n){var s=Re();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&yh(n,l[1]))return l[0];if(l=t(),_r){Tn(!0);try{t()}finally{Tn(!1)}}return s.memoizedState=[l,n],l}function Dh(t,n,s){return s===void 0||(hs&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=og(),zt.lanes|=t,_s|=t,s)}function am(t,n,s,l){return pn(s,n)?s:aa.current!==null?(t=Dh(t,s,l),pn(t,n)||(Ue=!0),t):(hs&42)===0?(Ue=!0,t.memoizedState=s):(t=og(),zt.lanes|=t,_s|=t,n)}function lm(t,n,s,l,c){var f=tt.p;tt.p=f!==0&&8>f?f:8;var E=O.T,b={};O.T=b,Mh(t,!1,n,s);try{var M=c(),Q=O.S;if(Q!==null&&Q(b,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var rt=u1(M,l);Sl(t,n,rt,vn(t))}else Sl(t,n,l,vn(t))}catch(lt){Sl(t,n,{then:function(){},status:"rejected",reason:lt},vn())}finally{tt.p=f,O.T=E}}function p1(){}function Nh(t,n,s,l){if(t.tag!==5)throw Error(a(476));var c=om(t).queue;lm(t,c,n,ut,s===null?p1:function(){return um(t),s(l)})}function om(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:ut},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function um(t){var n=om(t).next.queue;Sl(t,n,{},vn())}function Ih(){return Ze(ql)}function cm(){return Re().memoizedState}function hm(){return Re().memoizedState}function m1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=vn();t=us(s);var l=cs(n,t,s);l!==null&&(En(l,n,s),_l(l,n,s)),n={cache:lh()},t.payload=n;return}n=n.return}}function g1(t,n,s){var l=vn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},nu(t)?dm(n,s):(s=Zc(t,n,s,l),s!==null&&(En(s,t,l),pm(s,n,l)))}function fm(t,n,s){var l=vn();Sl(t,n,s,l)}function Sl(t,n,s,l){var c={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(nu(t))dm(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var E=n.lastRenderedState,b=f(E,s);if(c.hasEagerState=!0,c.eagerState=b,pn(b,E))return Lo(t,n,c,0),le===null&&Uo(),!1}catch{}finally{}if(s=Zc(t,n,c,l),s!==null)return En(s,t,l),pm(s,n,l),!0}return!1}function Mh(t,n,s,l){if(l={lane:2,revertLane:hf(),action:l,hasEagerState:!1,eagerState:null,next:null},nu(t)){if(n)throw Error(a(479))}else n=Zc(t,s,l,2),n!==null&&En(n,t,2)}function nu(t){var n=t.alternate;return t===zt||n!==null&&n===zt}function dm(t,n){la=$o=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function pm(t,n,s){if((s&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,$i(t,s)}}var iu={readContext:Ze,use:Wo,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},mm={readContext:Ze,use:Wo,useCallback:function(t,n){return un().memoizedState=[t,n===void 0?null:n],t},useContext:Ze,useEffect:Wp,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,eu(4194308,4,nm.bind(null,n,t),s)},useLayoutEffect:function(t,n){return eu(4194308,4,t,n)},useInsertionEffect:function(t,n){eu(4,2,t,n)},useMemo:function(t,n){var s=un();n=n===void 0?null:n;var l=t();if(_r){Tn(!0);try{t()}finally{Tn(!1)}}return s.memoizedState=[l,n],l},useReducer:function(t,n,s){var l=un();if(s!==void 0){var c=s(n);if(_r){Tn(!0);try{s(n)}finally{Tn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=g1.bind(null,zt,t),[l.memoizedState,t]},useRef:function(t){var n=un();return t={current:t},n.memoizedState=t},useState:function(t){t=Rh(t);var n=t.queue,s=fm.bind(null,zt,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Ch,useDeferredValue:function(t,n){var s=un();return Dh(s,t,n)},useTransition:function(){var t=Rh(!1);return t=lm.bind(null,zt,t.queue,!0,!1),un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var l=zt,c=un();if($t){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),le===null)throw Error(a(349));(Yt&124)!==0||kp(l,n,s)}c.memoizedState=s;var f={value:s,getSnapshot:n};return c.queue=f,Wp(Up.bind(null,l,f,t),[t]),l.flags|=2048,ua(9,tu(),Pp.bind(null,l,f,s,n),null),s},useId:function(){var t=un(),n=le.identifierPrefix;if($t){var s=Ni,l=Di;s=(l&~(1<<32-sn(l)-1)).toString(32)+s,n="«"+n+"R"+s,s=Zo++,0<s&&(n+="H"+s.toString(32)),n+="»"}else s=c1++,n="«"+n+"r"+s.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:Ih,useFormState:Qp,useActionState:Qp,useOptimistic:function(t){var n=un();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Mh.bind(null,zt,!0,s),s.dispatch=n,[t,n]},useMemoCache:xh,useCacheRefresh:function(){return un().memoizedState=m1.bind(null,zt)}},gm={readContext:Ze,use:Wo,useCallback:sm,useContext:Ze,useEffect:Jp,useImperativeHandle:im,useInsertionEffect:tm,useLayoutEffect:em,useMemo:rm,useReducer:Jo,useRef:Zp,useState:function(){return Jo(Vi)},useDebugValue:Ch,useDeferredValue:function(t,n){var s=Re();return am(s,ne.memoizedState,t,n)},useTransition:function(){var t=Jo(Vi)[0],n=Re().memoizedState;return[typeof t=="boolean"?t:bl(t),n]},useSyncExternalStore:Op,useId:cm,useHostTransitionStatus:Ih,useFormState:Kp,useActionState:Kp,useOptimistic:function(t,n){var s=Re();return Bp(s,ne,t,n)},useMemoCache:xh,useCacheRefresh:hm},y1={readContext:Ze,use:Wo,useCallback:sm,useContext:Ze,useEffect:Jp,useImperativeHandle:im,useInsertionEffect:tm,useLayoutEffect:em,useMemo:rm,useReducer:Ah,useRef:Zp,useState:function(){return Ah(Vi)},useDebugValue:Ch,useDeferredValue:function(t,n){var s=Re();return ne===null?Dh(s,t,n):am(s,ne.memoizedState,t,n)},useTransition:function(){var t=Ah(Vi)[0],n=Re().memoizedState;return[typeof t=="boolean"?t:bl(t),n]},useSyncExternalStore:Op,useId:cm,useHostTransitionStatus:Ih,useFormState:$p,useActionState:$p,useOptimistic:function(t,n){var s=Re();return ne!==null?Bp(s,ne,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:xh,useCacheRefresh:hm},ca=null,Al=0;function su(t){var n=Al;return Al+=1,ca===null&&(ca=[]),wp(ca,t,n)}function Rl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function ru(t,n){throw n.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function ym(t){var n=t._init;return n(t._payload)}function _m(t){function n(q,U){if(t){var F=q.deletions;F===null?(q.deletions=[U],q.flags|=16):F.push(U)}}function s(q,U){if(!t)return null;for(;U!==null;)n(q,U),U=U.sibling;return null}function l(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function c(q,U){return q=Ci(q,U),q.index=0,q.sibling=null,q}function f(q,U,F){return q.index=F,t?(F=q.alternate,F!==null?(F=F.index,F<U?(q.flags|=67108866,U):F):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function E(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function b(q,U,F,at){return U===null||U.tag!==6?(U=Jc(F,q.mode,at),U.return=q,U):(U=c(U,F),U.return=q,U)}function M(q,U,F,at){var xt=F.type;return xt===z?rt(q,U,F.props.children,at,F.key):U!==null&&(U.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===R&&ym(xt)===U.type)?(U=c(U,F.props),Rl(U,F),U.return=q,U):(U=Bo(F.type,F.key,F.props,null,q.mode,at),Rl(U,F),U.return=q,U)}function Q(q,U,F,at){return U===null||U.tag!==4||U.stateNode.containerInfo!==F.containerInfo||U.stateNode.implementation!==F.implementation?(U=th(F,q.mode,at),U.return=q,U):(U=c(U,F.children||[]),U.return=q,U)}function rt(q,U,F,at,xt){return U===null||U.tag!==7?(U=cr(F,q.mode,at,xt),U.return=q,U):(U=c(U,F),U.return=q,U)}function lt(q,U,F){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Jc(""+U,q.mode,F),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return F=Bo(U.type,U.key,U.props,null,q.mode,F),Rl(F,U),F.return=q,F;case K:return U=th(U,q.mode,F),U.return=q,U;case R:var at=U._init;return U=at(U._payload),lt(q,U,F)}if(_t(U)||C(U))return U=cr(U,q.mode,F,null),U.return=q,U;if(typeof U.then=="function")return lt(q,su(U),F);if(U.$$typeof===yt)return lt(q,Go(q,U),F);ru(q,U)}return null}function X(q,U,F,at){var xt=U!==null?U.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return xt!==null?null:b(q,U,""+F,at);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case j:return F.key===xt?M(q,U,F,at):null;case K:return F.key===xt?Q(q,U,F,at):null;case R:return xt=F._init,F=xt(F._payload),X(q,U,F,at)}if(_t(F)||C(F))return xt!==null?null:rt(q,U,F,at,null);if(typeof F.then=="function")return X(q,U,su(F),at);if(F.$$typeof===yt)return X(q,U,Go(q,F),at);ru(q,F)}return null}function $(q,U,F,at,xt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return q=q.get(F)||null,b(U,q,""+at,xt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case j:return q=q.get(at.key===null?F:at.key)||null,M(U,q,at,xt);case K:return q=q.get(at.key===null?F:at.key)||null,Q(U,q,at,xt);case R:var Bt=at._init;return at=Bt(at._payload),$(q,U,F,at,xt)}if(_t(at)||C(at))return q=q.get(F)||null,rt(U,q,at,xt,null);if(typeof at.then=="function")return $(q,U,F,su(at),xt);if(at.$$typeof===yt)return $(q,U,F,Go(U,at),xt);ru(U,at)}return null}function jt(q,U,F,at){for(var xt=null,Bt=null,wt=U,It=U=0,ze=null;wt!==null&&It<F.length;It++){wt.index>It?(ze=wt,wt=null):ze=wt.sibling;var Xt=X(q,wt,F[It],at);if(Xt===null){wt===null&&(wt=ze);break}t&&wt&&Xt.alternate===null&&n(q,wt),U=f(Xt,U,It),Bt===null?xt=Xt:Bt.sibling=Xt,Bt=Xt,wt=ze}if(It===F.length)return s(q,wt),$t&&fr(q,It),xt;if(wt===null){for(;It<F.length;It++)wt=lt(q,F[It],at),wt!==null&&(U=f(wt,U,It),Bt===null?xt=wt:Bt.sibling=wt,Bt=wt);return $t&&fr(q,It),xt}for(wt=l(wt);It<F.length;It++)ze=$(wt,q,It,F[It],at),ze!==null&&(t&&ze.alternate!==null&&wt.delete(ze.key===null?It:ze.key),U=f(ze,U,It),Bt===null?xt=ze:Bt.sibling=ze,Bt=ze);return t&&wt.forEach(function(ws){return n(q,ws)}),$t&&fr(q,It),xt}function Nt(q,U,F,at){if(F==null)throw Error(a(151));for(var xt=null,Bt=null,wt=U,It=U=0,ze=null,Xt=F.next();wt!==null&&!Xt.done;It++,Xt=F.next()){wt.index>It?(ze=wt,wt=null):ze=wt.sibling;var ws=X(q,wt,Xt.value,at);if(ws===null){wt===null&&(wt=ze);break}t&&wt&&ws.alternate===null&&n(q,wt),U=f(ws,U,It),Bt===null?xt=ws:Bt.sibling=ws,Bt=ws,wt=ze}if(Xt.done)return s(q,wt),$t&&fr(q,It),xt;if(wt===null){for(;!Xt.done;It++,Xt=F.next())Xt=lt(q,Xt.value,at),Xt!==null&&(U=f(Xt,U,It),Bt===null?xt=Xt:Bt.sibling=Xt,Bt=Xt);return $t&&fr(q,It),xt}for(wt=l(wt);!Xt.done;It++,Xt=F.next())Xt=$(wt,q,It,Xt.value,at),Xt!==null&&(t&&Xt.alternate!==null&&wt.delete(Xt.key===null?It:Xt.key),U=f(Xt,U,It),Bt===null?xt=Xt:Bt.sibling=Xt,Bt=Xt);return t&&wt.forEach(function(_E){return n(q,_E)}),$t&&fr(q,It),xt}function se(q,U,F,at){if(typeof F=="object"&&F!==null&&F.type===z&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case j:t:{for(var xt=F.key;U!==null;){if(U.key===xt){if(xt=F.type,xt===z){if(U.tag===7){s(q,U.sibling),at=c(U,F.props.children),at.return=q,q=at;break t}}else if(U.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===R&&ym(xt)===U.type){s(q,U.sibling),at=c(U,F.props),Rl(at,F),at.return=q,q=at;break t}s(q,U);break}else n(q,U);U=U.sibling}F.type===z?(at=cr(F.props.children,q.mode,at,F.key),at.return=q,q=at):(at=Bo(F.type,F.key,F.props,null,q.mode,at),Rl(at,F),at.return=q,q=at)}return E(q);case K:t:{for(xt=F.key;U!==null;){if(U.key===xt)if(U.tag===4&&U.stateNode.containerInfo===F.containerInfo&&U.stateNode.implementation===F.implementation){s(q,U.sibling),at=c(U,F.children||[]),at.return=q,q=at;break t}else{s(q,U);break}else n(q,U);U=U.sibling}at=th(F,q.mode,at),at.return=q,q=at}return E(q);case R:return xt=F._init,F=xt(F._payload),se(q,U,F,at)}if(_t(F))return jt(q,U,F,at);if(C(F)){if(xt=C(F),typeof xt!="function")throw Error(a(150));return F=xt.call(F),Nt(q,U,F,at)}if(typeof F.then=="function")return se(q,U,su(F),at);if(F.$$typeof===yt)return se(q,U,Go(q,F),at);ru(q,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,U!==null&&U.tag===6?(s(q,U.sibling),at=c(U,F),at.return=q,q=at):(s(q,U),at=Jc(F,q.mode,at),at.return=q,q=at),E(q)):s(q,U)}return function(q,U,F,at){try{Al=0;var xt=se(q,U,F,at);return ca=null,xt}catch(wt){if(wt===gl||wt===Qo)throw wt;var Bt=mn(29,wt,null,q.mode);return Bt.lanes=at,Bt.return=q,Bt}finally{}}}var ha=_m(!0),vm=_m(!1),Nn=Z(null),ai=null;function fs(t){var n=t.alternate;k(Ie,Ie.current&1),k(Nn,t),ai===null&&(n===null||aa.current!==null||n.memoizedState!==null)&&(ai=t)}function Em(t){if(t.tag===22){if(k(Ie,Ie.current),k(Nn,t),ai===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(ai=t)}}else ds()}function ds(){k(Ie,Ie.current),k(Nn,Nn.current)}function ji(t){L(Nn),ai===t&&(ai=null),L(Ie)}var Ie=Z(0);function au(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||xf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Vh(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:T({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var jh={enqueueSetState:function(t,n,s){t=t._reactInternals;var l=vn(),c=us(l);c.payload=n,s!=null&&(c.callback=s),n=cs(t,c,l),n!==null&&(En(n,t,l),_l(n,t,l))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=vn(),c=us(l);c.tag=1,c.payload=n,s!=null&&(c.callback=s),n=cs(t,c,l),n!==null&&(En(n,t,l),_l(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=vn(),l=us(s);l.tag=2,n!=null&&(l.callback=n),n=cs(t,l,s),n!==null&&(En(n,t,s),_l(n,t,s))}};function Tm(t,n,s,l,c,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):n.prototype&&n.prototype.isPureReactComponent?!ol(s,l)||!ol(c,f):!0}function bm(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&jh.enqueueReplaceState(n,n.state,null)}function vr(t,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(t=t.defaultProps){s===n&&(s=T({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}var lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function xm(t){lu(t)}function Sm(t){console.error(t)}function Am(t){lu(t)}function ou(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Rm(t,n,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Oh(t,n,s){return s=us(s),s.tag=3,s.payload={element:null},s.callback=function(){ou(t,n)},s}function wm(t){return t=us(t),t.tag=3,t}function Cm(t,n,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){Rm(n,s,l)}}var E=s.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){Rm(n,s,l),typeof c!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function _1(t,n,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&dl(n,s,c,!0),s=Nn.current,s!==null){switch(s.tag){case 13:return ai===null?af():s.alternate===null&&ge===0&&(ge=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===ch?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),of(t,l,c)),!1;case 22:return s.flags|=65536,l===ch?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),of(t,l,c)),!1}throw Error(a(435,s.tag))}return of(t,l,c),af(),!1}if($t)return n=Nn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==ih&&(t=Error(a(422),{cause:l}),fl(Rn(t,s)))):(l!==ih&&(n=Error(a(423),{cause:l}),fl(Rn(n,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=Rn(l,s),c=Oh(t.stateNode,l,c),dh(t,c),ge!==4&&(ge=2)),!1;var f=Error(a(520),{cause:l});if(f=Rn(f,s),Vl===null?Vl=[f]:Vl.push(f),ge!==4&&(ge=2),n===null)return!0;l=Rn(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=Oh(s.stateNode,l,t),dh(s,t),!1;case 1:if(n=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(vs===null||!vs.has(f))))return s.flags|=65536,c&=-c,s.lanes|=c,c=wm(c),Cm(c,t,s,l),dh(s,c),!1}s=s.return}while(s!==null);return!1}var Dm=Error(a(461)),Ue=!1;function He(t,n,s,l){n.child=t===null?vm(n,null,s,l):ha(n,t.child,s,l)}function Nm(t,n,s,l,c){s=s.render;var f=n.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return gr(n),l=_h(t,n,s,E,f,c),b=vh(),t!==null&&!Ue?(Eh(t,n,c),Oi(t,n,c)):($t&&b&&eh(n),n.flags|=1,He(t,n,l,c),n.child)}function Im(t,n,s,l,c){if(t===null){var f=s.type;return typeof f=="function"&&!Wc(f)&&f.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=f,Mm(t,n,f,l,c)):(t=Bo(s.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Hh(t,c)){var E=f.memoizedProps;if(s=s.compare,s=s!==null?s:ol,s(E,l)&&t.ref===n.ref)return Oi(t,n,c)}return n.flags|=1,t=Ci(f,l),t.ref=n.ref,t.return=n,n.child=t}function Mm(t,n,s,l,c){if(t!==null){var f=t.memoizedProps;if(ol(f,l)&&t.ref===n.ref)if(Ue=!1,n.pendingProps=l=f,Hh(t,c))(t.flags&131072)!==0&&(Ue=!0);else return n.lanes=t.lanes,Oi(t,n,c)}return kh(t,n,s,l,c)}function Vm(t,n,s){var l=n.pendingProps,c=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=f!==null?f.baseLanes|s:s,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~l}else n.childLanes=0,n.child=null;return jm(t,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yo(n,f!==null?f.cachePool:null),f!==null?Mp(n,f):mh(),Em(n);else return n.lanes=n.childLanes=536870912,jm(t,n,f!==null?f.baseLanes|s:s,s)}else f!==null?(Yo(n,f.cachePool),Mp(n,f),ds(),n.memoizedState=null):(t!==null&&Yo(n,null),mh(),ds());return He(t,n,c,s),n.child}function jm(t,n,s,l){var c=uh();return c=c===null?null:{parent:Ne._currentValue,pool:c},n.memoizedState={baseLanes:s,cachePool:c},t!==null&&Yo(n,null),mh(),Em(n),t!==null&&dl(t,n,l,!0),null}function uu(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function kh(t,n,s,l,c){return gr(n),s=_h(t,n,s,l,void 0,c),l=vh(),t!==null&&!Ue?(Eh(t,n,c),Oi(t,n,c)):($t&&l&&eh(n),n.flags|=1,He(t,n,s,c),n.child)}function Om(t,n,s,l,c,f){return gr(n),n.updateQueue=null,s=jp(n,l,s,c),Vp(t),l=vh(),t!==null&&!Ue?(Eh(t,n,f),Oi(t,n,f)):($t&&l&&eh(n),n.flags|=1,He(t,n,s,f),n.child)}function km(t,n,s,l,c){if(gr(n),n.stateNode===null){var f=ea,E=s.contextType;typeof E=="object"&&E!==null&&(f=Ze(E)),f=new s(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=jh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},hh(n),E=s.contextType,f.context=typeof E=="object"&&E!==null?Ze(E):ea,f.state=n.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(Vh(n,s,E,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&jh.enqueueReplaceState(f,f.state,null),El(n,l,f,c),vl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var b=n.memoizedProps,M=vr(s,b);f.props=M;var Q=f.context,rt=s.contextType;E=ea,typeof rt=="object"&&rt!==null&&(E=Ze(rt));var lt=s.getDerivedStateFromProps;rt=typeof lt=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,rt||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||Q!==E)&&bm(n,f,l,E),os=!1;var X=n.memoizedState;f.state=X,El(n,l,f,c),vl(),Q=n.memoizedState,b||X!==Q||os?(typeof lt=="function"&&(Vh(n,s,lt,l),Q=n.memoizedState),(M=os||Tm(n,s,M,l,X,Q,E))?(rt||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=Q),f.props=l,f.state=Q,f.context=E,l=M):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,fh(t,n),E=n.memoizedProps,rt=vr(s,E),f.props=rt,lt=n.pendingProps,X=f.context,Q=s.contextType,M=ea,typeof Q=="object"&&Q!==null&&(M=Ze(Q)),b=s.getDerivedStateFromProps,(Q=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==lt||X!==M)&&bm(n,f,l,M),os=!1,X=n.memoizedState,f.state=X,El(n,l,f,c),vl();var $=n.memoizedState;E!==lt||X!==$||os||t!==null&&t.dependencies!==null&&Fo(t.dependencies)?(typeof b=="function"&&(Vh(n,s,b,l),$=n.memoizedState),(rt=os||Tm(n,s,rt,l,X,$,M)||t!==null&&t.dependencies!==null&&Fo(t.dependencies))?(Q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,$,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,$,M)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=$),f.props=l,f.state=$,f.context=M,l=rt):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,uu(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=ha(n,t.child,null,c),n.child=ha(n,null,s,c)):He(t,n,s,c),n.memoizedState=f.state,t=n.child):t=Oi(t,n,c),t}function Pm(t,n,s,l){return hl(),n.flags|=256,He(t,n,s,l),n.child}var Ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uh(t){return{baseLanes:t,cachePool:Sp()}}function Lh(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=In),t}function Um(t,n,s){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(Ie.current&2)!==0),E&&(c=!0,n.flags&=-129),E=(n.flags&32)!==0,n.flags&=-33,t===null){if($t){if(c?fs(n):ds(),$t){var b=me,M;if(M=b){t:{for(M=b,b=ri;M.nodeType!==8;){if(!b){b=null;break t}if(M=Yn(M.nextSibling),M===null){b=null;break t}}b=M}b!==null?(n.memoizedState={dehydrated:b,treeContext:hr!==null?{id:Di,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},M=mn(18,null,null,0),M.stateNode=b,M.return=n,n.child=M,on=n,me=null,M=!0):M=!1}M||pr(n)}if(b=n.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return xf(b)?n.lanes=32:n.lanes=536870912,null;ji(n)}return b=l.children,l=l.fallback,c?(ds(),c=n.mode,b=cu({mode:"hidden",children:b},c),l=cr(l,c,s,null),b.return=n,l.return=n,b.sibling=l,n.child=b,c=n.child,c.memoizedState=Uh(s),c.childLanes=Lh(t,E,s),n.memoizedState=Ph,l):(fs(n),zh(n,b))}if(M=t.memoizedState,M!==null&&(b=M.dehydrated,b!==null)){if(f)n.flags&256?(fs(n),n.flags&=-257,n=Bh(t,n,s)):n.memoizedState!==null?(ds(),n.child=t.child,n.flags|=128,n=null):(ds(),c=l.fallback,b=n.mode,l=cu({mode:"visible",children:l.children},b),c=cr(c,b,s,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,ha(n,t.child,null,s),l=n.child,l.memoizedState=Uh(s),l.childLanes=Lh(t,E,s),n.memoizedState=Ph,n=c);else if(fs(n),xf(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var Q=E.dgst;E=Q,l=Error(a(419)),l.stack="",l.digest=E,fl({value:l,source:null,stack:null}),n=Bh(t,n,s)}else if(Ue||dl(t,n,s,!1),E=(s&t.childLanes)!==0,Ue||E){if(E=le,E!==null&&(l=s&-s,l=(l&42)!==0?1:Ga(l),l=(l&(E.suspendedLanes|s))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,ta(t,l),En(E,t,l),Dm;b.data==="$?"||af(),n=Bh(t,n,s)}else b.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=M.treeContext,me=Yn(b.nextSibling),on=n,$t=!0,dr=null,ri=!1,t!==null&&(Cn[Dn++]=Di,Cn[Dn++]=Ni,Cn[Dn++]=hr,Di=t.id,Ni=t.overflow,hr=n),n=zh(n,l.children),n.flags|=4096);return n}return c?(ds(),c=l.fallback,b=n.mode,M=t.child,Q=M.sibling,l=Ci(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,Q!==null?c=Ci(Q,c):(c=cr(c,b,s,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,b=t.child.memoizedState,b===null?b=Uh(s):(M=b.cachePool,M!==null?(Q=Ne._currentValue,M=M.parent!==Q?{parent:Q,pool:Q}:M):M=Sp(),b={baseLanes:b.baseLanes|s,cachePool:M}),c.memoizedState=b,c.childLanes=Lh(t,E,s),n.memoizedState=Ph,l):(fs(n),s=t.child,t=s.sibling,s=Ci(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,t!==null&&(E=n.deletions,E===null?(n.deletions=[t],n.flags|=16):E.push(t)),n.child=s,n.memoizedState=null,s)}function zh(t,n){return n=cu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function cu(t,n){return t=mn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Bh(t,n,s){return ha(n,t.child,null,s),t=zh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Lm(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),rh(t.return,n,s)}function qh(t,n,s,l,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=s,f.tailMode=c)}function zm(t,n,s){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(He(t,n,l.children,s),l=Ie.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lm(t,s,n);else if(t.tag===19)Lm(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(k(Ie,l),c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&au(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),qh(n,!1,c,s,f);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&au(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}qh(n,!0,s,null,f);break;case"together":qh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Oi(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),_s|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(dl(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Ci(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Ci(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function Hh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Fo(t)))}function v1(t,n,s){switch(n.tag){case 3:nt(n,n.stateNode.containerInfo),ls(n,Ne,t.memoizedState.cache),hl();break;case 27:case 5:St(n);break;case 4:nt(n,n.stateNode.containerInfo);break;case 10:ls(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(fs(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Um(t,n,s):(fs(n),t=Oi(t,n,s),t!==null?t.sibling:null);fs(n);break;case 19:var c=(t.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(dl(t,n,s,!1),l=(s&n.childLanes)!==0),c){if(l)return zm(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),k(Ie,Ie.current),l)break;return null;case 22:case 23:return n.lanes=0,Vm(t,n,s);case 24:ls(n,Ne,t.memoizedState.cache)}return Oi(t,n,s)}function Bm(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ue=!0;else{if(!Hh(t,s)&&(n.flags&128)===0)return Ue=!1,v1(t,n,s);Ue=(t.flags&131072)!==0}else Ue=!1,$t&&(n.flags&1048576)!==0&&yp(n,Ho,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Wc(l)?(t=vr(l,t),n.tag=1,n=km(null,n,l,t,s)):(n.tag=0,n=kh(null,n,l,t,s));else{if(l!=null){if(c=l.$$typeof,c===gt){n.tag=11,n=Nm(null,n,l,t,s);break t}else if(c===D){n.tag=14,n=Im(null,n,l,t,s);break t}}throw n=Et(l)||l,Error(a(306,n,""))}}return n;case 0:return kh(t,n,n.type,n.pendingProps,s);case 1:return l=n.type,c=vr(l,n.pendingProps),km(t,n,l,c,s);case 3:t:{if(nt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var f=n.memoizedState;c=f.element,fh(t,n),El(n,l,null,s);var E=n.memoizedState;if(l=E.cache,ls(n,Ne,l),l!==f.cache&&ah(n,[Ne],s,!0),vl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Pm(t,n,l,s);break t}else if(l!==c){c=Rn(Error(a(424)),n),fl(c),n=Pm(t,n,l,s);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(me=Yn(t.firstChild),on=n,$t=!0,dr=null,ri=!0,s=vm(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(hl(),l===c){n=Oi(t,n,s);break t}He(t,n,l,s)}n=n.child}return n;case 26:return uu(t,n),t===null?(s=Gg(n.type,null,n.pendingProps,null))?n.memoizedState=s:$t||(s=n.type,t=n.pendingProps,l=Su(P.current).createElement(s),l[ve]=n,l[qe]=t,Ge(l,s,t),Ee(l),n.stateNode=l):n.memoizedState=Gg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return St(n),t===null&&$t&&(l=n.stateNode=qg(n.type,n.pendingProps,P.current),on=n,ri=!0,c=me,bs(n.type)?(Sf=c,me=Yn(l.firstChild)):me=c),He(t,n,n.pendingProps.children,s),uu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&$t&&((c=l=me)&&(l=Q1(l,n.type,n.pendingProps,ri),l!==null?(n.stateNode=l,on=n,me=Yn(l.firstChild),ri=!1,c=!0):c=!1),c||pr(n)),St(n),c=n.type,f=n.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,Ef(c,f)?l=null:E!==null&&Ef(c,E)&&(n.flags|=32),n.memoizedState!==null&&(c=_h(t,n,h1,null,null,s),ql._currentValue=c),uu(t,n),He(t,n,l,s),n.child;case 6:return t===null&&$t&&((t=s=me)&&(s=K1(s,n.pendingProps,ri),s!==null?(n.stateNode=s,on=n,me=null,t=!0):t=!1),t||pr(n)),null;case 13:return Um(t,n,s);case 4:return nt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ha(n,null,l,s):He(t,n,l,s),n.child;case 11:return Nm(t,n,n.type,n.pendingProps,s);case 7:return He(t,n,n.pendingProps,s),n.child;case 8:return He(t,n,n.pendingProps.children,s),n.child;case 12:return He(t,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,ls(n,n.type,l.value),He(t,n,l.children,s),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,gr(n),c=Ze(c),l=l(c),n.flags|=1,He(t,n,l,s),n.child;case 14:return Im(t,n,n.type,n.pendingProps,s);case 15:return Mm(t,n,n.type,n.pendingProps,s);case 19:return zm(t,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},t===null?(s=cu(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Ci(t.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return Vm(t,n,s);case 24:return gr(n),l=Ze(Ne),t===null?(c=uh(),c===null&&(c=le,f=lh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=s),c=f),n.memoizedState={parent:l,cache:c},hh(n),ls(n,Ne,c)):((t.lanes&s)!==0&&(fh(t,n),El(n,null,null,s),vl()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),ls(n,Ne,l)):(l=f.cache,ls(n,Ne,l),l!==c.cache&&ah(n,[Ne],s,!0))),He(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function ki(t){t.flags|=4}function qm(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$g(n)){if(n=Nn.current,n!==null&&((Yt&4194048)===Yt?ai!==null:(Yt&62914560)!==Yt&&(Yt&536870912)===0||n!==ai))throw yl=ch,Ap;t.flags|=8192}}function hu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ki():536870912,t.lanes|=n,ma|=n)}function wl(t,n){if(!$t)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function de(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function E1(t,n,s){var l=n.pendingProps;switch(nh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(n),null;case 1:return de(n),null;case 3:return s=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Mi(Ne),ct(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(cl(n)?ki(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ep())),de(n),null;case 26:return s=n.memoizedState,t===null?(ki(n),s!==null?(de(n),qm(n,s)):(de(n),n.flags&=-16777217)):s?s!==t.memoizedState?(ki(n),de(n),qm(n,s)):(de(n),n.flags&=-16777217):(t.memoizedProps!==l&&ki(n),de(n),n.flags&=-16777217),null;case 27:dt(n),s=P.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&ki(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return de(n),null}t=Y.current,cl(n)?_p(n):(t=qg(c,l,s),n.stateNode=t,ki(n))}return de(n),null;case 5:if(dt(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&ki(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return de(n),null}if(t=Y.current,cl(n))_p(n);else{switch(c=Su(P.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(s,{is:l.is}):c.createElement(s)}}t[ve]=n,t[qe]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(Ge(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&ki(n)}}return de(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&ki(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=P.current,cl(n)){if(t=n.stateNode,s=n.memoizedProps,l=null,c=on,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[ve]=n,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Og(t.nodeValue,s)),t||pr(n)}else t=Su(t).createTextNode(l),t[ve]=n,n.stateNode=t}return de(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=cl(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[ve]=n}else hl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;de(n),c=!1}else c=Ep(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(ji(n),n):(ji(n),null)}if(ji(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),hu(n,n.updateQueue),de(n),null;case 4:return ct(),t===null&&mf(n.stateNode.containerInfo),de(n),null;case 10:return Mi(n.type),de(n),null;case 19:if(L(Ie),c=n.memoizedState,c===null)return de(n),null;if(l=(n.flags&128)!==0,f=c.rendering,f===null)if(l)wl(c,!1);else{if(ge!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=au(t),f!==null){for(n.flags|=128,wl(c,!1),t=f.updateQueue,n.updateQueue=t,hu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)gp(s,t),s=s.sibling;return k(Ie,Ie.current&1|2),n.child}t=t.sibling}c.tail!==null&&Oe()>pu&&(n.flags|=128,l=!0,wl(c,!1),n.lanes=4194304)}else{if(!l)if(t=au(f),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,hu(n,t),wl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!$t)return de(n),null}else 2*Oe()-c.renderingStartTime>pu&&s!==536870912&&(n.flags|=128,l=!0,wl(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Oe(),n.sibling=null,t=Ie.current,k(Ie,l?t&1|2:t&1),n):(de(n),null);case 22:case 23:return ji(n),gh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(de(n),n.subtreeFlags&6&&(n.flags|=8192)):de(n),s=n.updateQueue,s!==null&&hu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),t!==null&&L(yr),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Mi(Ne),de(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function T1(t,n){switch(nh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Mi(Ne),ct(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return dt(n),null;case 13:if(ji(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));hl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return L(Ie),null;case 4:return ct(),null;case 10:return Mi(n.type),null;case 22:case 23:return ji(n),gh(),t!==null&&L(yr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Mi(Ne),null;case 25:return null;default:return null}}function Hm(t,n){switch(nh(n),n.tag){case 3:Mi(Ne),ct();break;case 26:case 27:case 5:dt(n);break;case 4:ct();break;case 13:ji(n);break;case 19:L(Ie);break;case 10:Mi(n.type);break;case 22:case 23:ji(n),gh(),t!==null&&L(yr);break;case 24:Mi(Ne)}}function Cl(t,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&t)===t){l=void 0;var f=s.create,E=s.inst;l=f(),E.destroy=l}s=s.next}while(s!==c)}}catch(b){re(n,n.return,b)}}function ps(t,n,s){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,c=n;var M=s,Q=b;try{Q()}catch(rt){re(c,M,rt)}}}l=l.next}while(l!==f)}}catch(rt){re(n,n.return,rt)}}function Fm(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{Ip(n,s)}catch(l){re(t,t.return,l)}}}function Gm(t,n,s){s.props=vr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){re(t,n,l)}}function Dl(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(c){re(t,n,c)}}function li(t,n){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){re(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){re(t,n,c)}else s.current=null}function Ym(t){var n=t.type,s=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){re(t,t.return,c)}}function Fh(t,n,s){try{var l=t.stateNode;q1(l,t.type,s,n),l[qe]=n}catch(c){re(t,t.return,c)}}function Qm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&bs(t.type)||t.tag===4}function Gh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Qm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&bs(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yh(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=xu));else if(l!==4&&(l===27&&bs(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Yh(t,n,s),t=t.sibling;t!==null;)Yh(t,n,s),t=t.sibling}function fu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(l===27&&bs(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(fu(t,n,s),t=t.sibling;t!==null;)fu(t,n,s),t=t.sibling}function Km(t){var n=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Ge(n,l,s),n[ve]=t,n[qe]=s}catch(f){re(t,t.return,f)}}var Pi=!1,xe=!1,Qh=!1,Xm=typeof WeakSet=="function"?WeakSet:Set,Le=null;function b1(t,n){if(t=t.containerInfo,_f=Nu,t=ap(t),Gc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break t}var E=0,b=-1,M=-1,Q=0,rt=0,lt=t,X=null;e:for(;;){for(var $;lt!==s||c!==0&&lt.nodeType!==3||(b=E+c),lt!==f||l!==0&&lt.nodeType!==3||(M=E+l),lt.nodeType===3&&(E+=lt.nodeValue.length),($=lt.firstChild)!==null;)X=lt,lt=$;for(;;){if(lt===t)break e;if(X===s&&++Q===c&&(b=E),X===f&&++rt===l&&(M=E),($=lt.nextSibling)!==null)break;lt=X,X=lt.parentNode}lt=$}s=b===-1||M===-1?null:{start:b,end:M}}else s=null}s=s||{start:0,end:0}}else s=null;for(vf={focusedElem:t,selectionRange:s},Nu=!1,Le=n;Le!==null;)if(n=Le,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Le=t;else for(;Le!==null;){switch(n=Le,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,s=n,c=f.memoizedProps,f=f.memoizedState,l=s.stateNode;try{var jt=vr(s.type,c,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(jt,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Nt){re(s,s.return,Nt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)bf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,Le=t;break}Le=n.return}}function $m(t,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ms(t,s),l&4&&Cl(5,s);break;case 1:if(ms(t,s),l&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(E){re(s,s.return,E)}else{var c=vr(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(E){re(s,s.return,E)}}l&64&&Fm(s),l&512&&Dl(s,s.return);break;case 3:if(ms(t,s),l&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Ip(t,n)}catch(E){re(s,s.return,E)}}break;case 27:n===null&&l&4&&Km(s);case 26:case 5:ms(t,s),n===null&&l&4&&Ym(s),l&512&&Dl(s,s.return);break;case 12:ms(t,s);break;case 13:ms(t,s),l&4&&Jm(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=I1.bind(null,s),X1(t,s))));break;case 22:if(l=s.memoizedState!==null||Pi,!l){n=n!==null&&n.memoizedState!==null||xe,c=Pi;var f=xe;Pi=l,(xe=n)&&!f?gs(t,s,(s.subtreeFlags&8772)!==0):ms(t,s),Pi=c,xe=f}break;case 30:break;default:ms(t,s)}}function Zm(t){var n=t.alternate;n!==null&&(t.alternate=null,Zm(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Lr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var he=null,cn=!1;function Ui(t,n,s){for(s=s.child;s!==null;)Wm(t,n,s),s=s.sibling}function Wm(t,n,s){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Gi,s)}catch{}switch(s.tag){case 26:xe||li(s,n),Ui(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:xe||li(s,n);var l=he,c=cn;bs(s.type)&&(he=s.stateNode,cn=!1),Ui(t,n,s),Ul(s.stateNode),he=l,cn=c;break;case 5:xe||li(s,n);case 6:if(l=he,c=cn,he=null,Ui(t,n,s),he=l,cn=c,he!==null)if(cn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(s.stateNode)}catch(f){re(s,n,f)}else try{he.removeChild(s.stateNode)}catch(f){re(s,n,f)}break;case 18:he!==null&&(cn?(t=he,zg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Yl(t)):zg(he,s.stateNode));break;case 4:l=he,c=cn,he=s.stateNode.containerInfo,cn=!0,Ui(t,n,s),he=l,cn=c;break;case 0:case 11:case 14:case 15:xe||ps(2,s,n),xe||ps(4,s,n),Ui(t,n,s);break;case 1:xe||(li(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Gm(s,n,l)),Ui(t,n,s);break;case 21:Ui(t,n,s);break;case 22:xe=(l=xe)||s.memoizedState!==null,Ui(t,n,s),xe=l;break;default:Ui(t,n,s)}}function Jm(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yl(t)}catch(s){re(n,n.return,s)}}function x1(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Xm),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Xm),n;default:throw Error(a(435,t.tag))}}function Kh(t,n){var s=x1(t);n.forEach(function(l){var c=M1.bind(null,t,l);s.has(l)||(s.add(l),l.then(c,c))})}function gn(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],f=t,E=n,b=E;t:for(;b!==null;){switch(b.tag){case 27:if(bs(b.type)){he=b.stateNode,cn=!1;break t}break;case 5:he=b.stateNode,cn=!1;break t;case 3:case 4:he=b.stateNode.containerInfo,cn=!0;break t}b=b.return}if(he===null)throw Error(a(160));Wm(f,E,c),he=null,cn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)tg(n,t),n=n.sibling}var Gn=null;function tg(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gn(n,t),yn(t),l&4&&(ps(3,t,t.return),Cl(3,t),ps(5,t,t.return));break;case 1:gn(n,t),yn(t),l&512&&(xe||s===null||li(s,s.return)),l&64&&Pi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=Gn;if(gn(n,t),yn(t),l&512&&(xe||s===null||li(s,s.return)),l&4){var f=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){t:{l=t.type,s=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Zi]||f[ve]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),Ge(f,l,s),f[ve]=t,Ee(f),l=f;break t;case"link":var E=Kg("link","href",c).get(l+(s.href||""));if(E){for(var b=0;b<E.length;b++)if(f=E[b],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){E.splice(b,1);break e}}f=c.createElement(l),Ge(f,l,s),c.head.appendChild(f);break;case"meta":if(E=Kg("meta","content",c).get(l+(s.content||""))){for(b=0;b<E.length;b++)if(f=E[b],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){E.splice(b,1);break e}}f=c.createElement(l),Ge(f,l,s),c.head.appendChild(f);break;default:throw Error(a(468,l))}f[ve]=t,Ee(f),l=f}t.stateNode=l}else Xg(c,t.type,t.stateNode);else t.stateNode=Qg(c,l,t.memoizedProps);else f!==l?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,l===null?Xg(c,t.type,t.stateNode):Qg(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Fh(t,t.memoizedProps,s.memoizedProps)}break;case 27:gn(n,t),yn(t),l&512&&(xe||s===null||li(s,s.return)),s!==null&&l&4&&Fh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(gn(n,t),yn(t),l&512&&(xe||s===null||li(s,s.return)),t.flags&32){c=t.stateNode;try{Sn(c,"")}catch($){re(t,t.return,$)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,Fh(t,c,s!==null?s.memoizedProps:c)),l&1024&&(Qh=!0);break;case 6:if(gn(n,t),yn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch($){re(t,t.return,$)}}break;case 3:if(wu=null,c=Gn,Gn=Au(n.containerInfo),gn(n,t),Gn=c,yn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Yl(n.containerInfo)}catch($){re(t,t.return,$)}Qh&&(Qh=!1,eg(t));break;case 4:l=Gn,Gn=Au(t.stateNode.containerInfo),gn(n,t),yn(t),Gn=l;break;case 12:gn(n,t),yn(t);break;case 13:gn(n,t),yn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(tf=Oe()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kh(t,l)));break;case 22:c=t.memoizedState!==null;var M=s!==null&&s.memoizedState!==null,Q=Pi,rt=xe;if(Pi=Q||c,xe=rt||M,gn(n,t),xe=rt,Pi=Q,yn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(s===null||M||Pi||xe||Er(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){M=s=n;try{if(f=M.stateNode,c)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=M.stateNode;var lt=M.memoizedProps.style,X=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;b.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch($){re(M,M.return,$)}}}else if(n.tag===6){if(s===null){M=n;try{M.stateNode.nodeValue=c?"":M.memoizedProps}catch($){re(M,M.return,$)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Kh(t,s))));break;case 19:gn(n,t),yn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kh(t,l)));break;case 30:break;case 21:break;default:gn(n,t),yn(t)}}function yn(t){var n=t.flags;if(n&2){try{for(var s,l=t.return;l!==null;){if(Qm(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var c=s.stateNode,f=Gh(t);fu(t,f,c);break;case 5:var E=s.stateNode;s.flags&32&&(Sn(E,""),s.flags&=-33);var b=Gh(t);fu(t,b,E);break;case 3:case 4:var M=s.stateNode.containerInfo,Q=Gh(t);Yh(t,Q,M);break;default:throw Error(a(161))}}catch(rt){re(t,t.return,rt)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function eg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;eg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ms(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)$m(t,n.alternate,n),n=n.sibling}function Er(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ps(4,n,n.return),Er(n);break;case 1:li(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Gm(n,n.return,s),Er(n);break;case 27:Ul(n.stateNode);case 26:case 5:li(n,n.return),Er(n);break;case 22:n.memoizedState===null&&Er(n);break;case 30:Er(n);break;default:Er(n)}t=t.sibling}}function gs(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,E=f.flags;switch(f.tag){case 0:case 11:case 15:gs(c,f,s),Cl(4,f);break;case 1:if(gs(c,f,s),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Q){re(l,l.return,Q)}if(l=f,c=l.updateQueue,c!==null){var b=l.stateNode;try{var M=c.shared.hiddenCallbacks;if(M!==null)for(c.shared.hiddenCallbacks=null,c=0;c<M.length;c++)Np(M[c],b)}catch(Q){re(l,l.return,Q)}}s&&E&64&&Fm(f),Dl(f,f.return);break;case 27:Km(f);case 26:case 5:gs(c,f,s),s&&l===null&&E&4&&Ym(f),Dl(f,f.return);break;case 12:gs(c,f,s);break;case 13:gs(c,f,s),s&&E&4&&Jm(c,f);break;case 22:f.memoizedState===null&&gs(c,f,s),Dl(f,f.return);break;case 30:break;default:gs(c,f,s)}n=n.sibling}}function Xh(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&pl(s))}function $h(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&pl(t))}function oi(t,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ng(t,n,s,l),n=n.sibling}function ng(t,n,s,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:oi(t,n,s,l),c&2048&&Cl(9,n);break;case 1:oi(t,n,s,l);break;case 3:oi(t,n,s,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&pl(t)));break;case 12:if(c&2048){oi(t,n,s,l),t=n.stateNode;try{var f=n.memoizedProps,E=f.id,b=f.onPostCommit;typeof b=="function"&&b(E,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){re(n,n.return,M)}}else oi(t,n,s,l);break;case 13:oi(t,n,s,l);break;case 23:break;case 22:f=n.stateNode,E=n.alternate,n.memoizedState!==null?f._visibility&2?oi(t,n,s,l):Nl(t,n):f._visibility&2?oi(t,n,s,l):(f._visibility|=2,fa(t,n,s,l,(n.subtreeFlags&10256)!==0)),c&2048&&Xh(E,n);break;case 24:oi(t,n,s,l),c&2048&&$h(n.alternate,n);break;default:oi(t,n,s,l)}}function fa(t,n,s,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,E=n,b=s,M=l,Q=E.flags;switch(E.tag){case 0:case 11:case 15:fa(f,E,b,M,c),Cl(8,E);break;case 23:break;case 22:var rt=E.stateNode;E.memoizedState!==null?rt._visibility&2?fa(f,E,b,M,c):Nl(f,E):(rt._visibility|=2,fa(f,E,b,M,c)),c&&Q&2048&&Xh(E.alternate,E);break;case 24:fa(f,E,b,M,c),c&&Q&2048&&$h(E.alternate,E);break;default:fa(f,E,b,M,c)}n=n.sibling}}function Nl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,l=n,c=l.flags;switch(l.tag){case 22:Nl(s,l),c&2048&&Xh(l.alternate,l);break;case 24:Nl(s,l),c&2048&&$h(l.alternate,l);break;default:Nl(s,l)}n=n.sibling}}var Il=8192;function da(t){if(t.subtreeFlags&Il)for(t=t.child;t!==null;)ig(t),t=t.sibling}function ig(t){switch(t.tag){case 26:da(t),t.flags&Il&&t.memoizedState!==null&&oE(Gn,t.memoizedState,t.memoizedProps);break;case 5:da(t);break;case 3:case 4:var n=Gn;Gn=Au(t.stateNode.containerInfo),da(t),Gn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Il,Il=16777216,da(t),Il=n):da(t));break;default:da(t)}}function sg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ml(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Le=l,ag(l,t)}sg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rg(t),t=t.sibling}function rg(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&ps(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,du(t)):Ml(t);break;default:Ml(t)}}function du(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Le=l,ag(l,t)}sg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ps(8,n,n.return),du(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,du(n));break;default:du(n)}t=t.sibling}}function ag(t,n){for(;Le!==null;){var s=Le;switch(s.tag){case 0:case 11:case 15:ps(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Le=l;else t:for(s=t;Le!==null;){l=Le;var c=l.sibling,f=l.return;if(Zm(l),l===s){Le=null;break t}if(c!==null){c.return=f,Le=c;break t}Le=f}}}var S1={getCacheForType:function(t){var n=Ze(Ne),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},A1=typeof WeakMap=="function"?WeakMap:Map,Jt=0,le=null,qt=null,Yt=0,te=0,_n=null,ys=!1,pa=!1,Zh=!1,Li=0,ge=0,_s=0,Tr=0,Wh=0,In=0,ma=0,Vl=null,hn=null,Jh=!1,tf=0,pu=1/0,mu=null,vs=null,Fe=0,Es=null,ga=null,ya=0,ef=0,nf=null,lg=null,jl=0,sf=null;function vn(){if((Jt&2)!==0&&Yt!==0)return Yt&-Yt;if(O.T!==null){var t=sa;return t!==0?t:hf()}return Ti()}function og(){In===0&&(In=(Yt&536870912)===0||$t?Fa():536870912);var t=Nn.current;return t!==null&&(t.flags|=32),In}function En(t,n,s){(t===le&&(te===2||te===9)||t.cancelPendingCommit!==null)&&(_a(t,0),Ts(t,Yt,In,!1)),_e(t,s),((Jt&2)===0||t!==le)&&(t===le&&((Jt&2)===0&&(Tr|=s),ge===4&&Ts(t,Yt,In,!1)),ui(t))}function ug(t,n,s){if((Jt&6)!==0)throw Error(a(327));var l=!s&&(n&124)===0&&(n&t.expiredLanes)===0||Qi(t,n),c=l?C1(t,n):lf(t,n,!0),f=l;do{if(c===0){pa&&!l&&Ts(t,n,0,!1);break}else{if(s=t.current.alternate,f&&!R1(s)){c=lf(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){n=E;t:{var b=t;c=Vl;var M=b.current.memoizedState.isDehydrated;if(M&&(_a(b,E).flags|=256),E=lf(b,E,!1),E!==2){if(Zh&&!M){b.errorRecoveryDisabledLanes|=f,Tr|=f,c=4;break t}f=hn,hn=c,f!==null&&(hn===null?hn=f:hn.push.apply(hn,f))}c=E}if(f=!1,c!==2)continue}}if(c===1){_a(t,0),Ts(t,n,0,!0);break}t:{switch(l=t,f=c,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Ts(l,n,In,!ys);break t;case 2:hn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=tf+300-Oe(),10<c)){if(Ts(l,n,In,!ys),bn(l,0,!0)!==0)break t;l.timeoutHandle=Ug(cg.bind(null,l,s,hn,mu,Jh,n,In,Tr,ma,ys,f,2,-0,0),c);break t}cg(l,s,hn,mu,Jh,n,In,Tr,ma,ys,f,0,-0,0)}}break}while(!0);ui(t)}function cg(t,n,s,l,c,f,E,b,M,Q,rt,lt,X,$){if(t.timeoutHandle=-1,lt=n.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(Bl={stylesheets:null,count:0,unsuspend:lE},ig(n),lt=uE(),lt!==null)){t.cancelPendingCommit=lt(yg.bind(null,t,n,f,s,l,c,E,b,M,rt,1,X,$)),Ts(t,f,E,!Q);return}yg(t,n,f,s,l,c,E,b,M)}function R1(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],f=c.getSnapshot;c=c.value;try{if(!pn(f(),c))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ts(t,n,s,l){n&=~Wh,n&=~Tr,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-sn(c),E=1<<f;l[f]=-1,c&=~E}s!==0&&Xi(t,s,n)}function gu(){return(Jt&6)===0?(Ol(0),!1):!0}function rf(){if(qt!==null){if(te===0)var t=qt.return;else t=qt,Ii=mr=null,Th(t),ca=null,Al=0,t=qt;for(;t!==null;)Hm(t.alternate,t),t=t.return;qt=null}}function _a(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,F1(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),rf(),le=t,qt=s=Ci(t.current,null),Yt=n,te=0,_n=null,ys=!1,pa=Qi(t,n),Zh=!1,ma=In=Wh=Tr=_s=ge=0,hn=Vl=null,Jh=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-sn(l),f=1<<c;n|=t[c],l&=~f}return Li=n,Uo(),s}function hg(t,n){zt=null,O.H=iu,n===gl||n===Qo?(n=Cp(),te=3):n===Ap?(n=Cp(),te=4):te=n===Dm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,_n=n,qt===null&&(ge=1,ou(t,Rn(n,t.current)))}function fg(){var t=O.H;return O.H=iu,t===null?iu:t}function dg(){var t=O.A;return O.A=S1,t}function af(){ge=4,ys||(Yt&4194048)!==Yt&&Nn.current!==null||(pa=!0),(_s&134217727)===0&&(Tr&134217727)===0||le===null||Ts(le,Yt,In,!1)}function lf(t,n,s){var l=Jt;Jt|=2;var c=fg(),f=dg();(le!==t||Yt!==n)&&(mu=null,_a(t,n)),n=!1;var E=ge;t:do try{if(te!==0&&qt!==null){var b=qt,M=_n;switch(te){case 8:rf(),E=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(n=!0);var Q=te;if(te=0,_n=null,va(t,b,M,Q),s&&pa){E=0;break t}break;default:Q=te,te=0,_n=null,va(t,b,M,Q)}}w1(),E=ge;break}catch(rt){hg(t,rt)}while(!0);return n&&t.shellSuspendCounter++,Ii=mr=null,Jt=l,O.H=c,O.A=f,qt===null&&(le=null,Yt=0,Uo()),E}function w1(){for(;qt!==null;)pg(qt)}function C1(t,n){var s=Jt;Jt|=2;var l=fg(),c=dg();le!==t||Yt!==n?(mu=null,pu=Oe()+500,_a(t,n)):pa=Qi(t,n);t:do try{if(te!==0&&qt!==null){n=qt;var f=_n;e:switch(te){case 1:te=0,_n=null,va(t,n,f,1);break;case 2:case 9:if(Rp(f)){te=0,_n=null,mg(n);break}n=function(){te!==2&&te!==9||le!==t||(te=7),ui(t)},f.then(n,n);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:Rp(f)?(te=0,_n=null,mg(n)):(te=0,_n=null,va(t,n,f,7));break;case 5:var E=null;switch(qt.tag){case 26:E=qt.memoizedState;case 5:case 27:var b=qt;if(!E||$g(E)){te=0,_n=null;var M=b.sibling;if(M!==null)qt=M;else{var Q=b.return;Q!==null?(qt=Q,yu(Q)):qt=null}break e}}te=0,_n=null,va(t,n,f,5);break;case 6:te=0,_n=null,va(t,n,f,6);break;case 8:rf(),ge=6;break t;default:throw Error(a(462))}}D1();break}catch(rt){hg(t,rt)}while(!0);return Ii=mr=null,O.H=l,O.A=c,Jt=s,qt!==null?0:(le=null,Yt=0,Uo(),ge)}function D1(){for(;qt!==null&&!Vt();)pg(qt)}function pg(t){var n=Bm(t.alternate,t,Li);t.memoizedProps=t.pendingProps,n===null?yu(t):qt=n}function mg(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=Om(s,n,n.pendingProps,n.type,void 0,Yt);break;case 11:n=Om(s,n,n.pendingProps,n.type.render,n.ref,Yt);break;case 5:Th(n);default:Hm(s,n),n=qt=gp(n,Li),n=Bm(s,n,Li)}t.memoizedProps=t.pendingProps,n===null?yu(t):qt=n}function va(t,n,s,l){Ii=mr=null,Th(n),ca=null,Al=0;var c=n.return;try{if(_1(t,c,n,s,Yt)){ge=1,ou(t,Rn(s,t.current)),qt=null;return}}catch(f){if(c!==null)throw qt=c,f;ge=1,ou(t,Rn(s,t.current)),qt=null;return}n.flags&32768?($t||l===1?t=!0:pa||(Yt&536870912)!==0?t=!1:(ys=t=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),gg(n,t)):yu(n)}function yu(t){var n=t;do{if((n.flags&32768)!==0){gg(n,ys);return}t=n.return;var s=E1(n.alternate,n,Li);if(s!==null){qt=s;return}if(n=n.sibling,n!==null){qt=n;return}qt=n=t}while(n!==null);ge===0&&(ge=5)}function gg(t,n){do{var s=T1(t.alternate,t);if(s!==null){s.flags&=32767,qt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){qt=t;return}qt=t=s}while(t!==null);ge=6,qt=null}function yg(t,n,s,l,c,f,E,b,M){t.cancelPendingCommit=null;do _u();while(Fe!==0);if((Jt&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=$c,To(t,s,f,E,b,M),t===le&&(qt=le=null,Yt=0),ga=n,Es=t,ya=s,ef=f,nf=c,lg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,V1(Ei,function(){return bg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,c=tt.p,tt.p=2,E=Jt,Jt|=4;try{b1(t,n,s)}finally{Jt=E,tt.p=c,O.T=l}}Fe=1,_g(),vg(),Eg()}}function _g(){if(Fe===1){Fe=0;var t=Es,n=ga,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=O.T,O.T=null;var l=tt.p;tt.p=2;var c=Jt;Jt|=4;try{tg(n,t);var f=vf,E=ap(t.containerInfo),b=f.focusedElem,M=f.selectionRange;if(E!==b&&b&&b.ownerDocument&&rp(b.ownerDocument.documentElement,b)){if(M!==null&&Gc(b)){var Q=M.start,rt=M.end;if(rt===void 0&&(rt=Q),"selectionStart"in b)b.selectionStart=Q,b.selectionEnd=Math.min(rt,b.value.length);else{var lt=b.ownerDocument||document,X=lt&&lt.defaultView||window;if(X.getSelection){var $=X.getSelection(),jt=b.textContent.length,Nt=Math.min(M.start,jt),se=M.end===void 0?Nt:Math.min(M.end,jt);!$.extend&&Nt>se&&(E=se,se=Nt,Nt=E);var q=sp(b,Nt),U=sp(b,se);if(q&&U&&($.rangeCount!==1||$.anchorNode!==q.node||$.anchorOffset!==q.offset||$.focusNode!==U.node||$.focusOffset!==U.offset)){var F=lt.createRange();F.setStart(q.node,q.offset),$.removeAllRanges(),Nt>se?($.addRange(F),$.extend(U.node,U.offset)):(F.setEnd(U.node,U.offset),$.addRange(F))}}}}for(lt=[],$=b;$=$.parentNode;)$.nodeType===1&&lt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<lt.length;b++){var at=lt[b];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}Nu=!!_f,vf=_f=null}finally{Jt=c,tt.p=l,O.T=s}}t.current=n,Fe=2}}function vg(){if(Fe===2){Fe=0;var t=Es,n=ga,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=O.T,O.T=null;var l=tt.p;tt.p=2;var c=Jt;Jt|=4;try{$m(t,n.alternate,n)}finally{Jt=c,tt.p=l,O.T=s}}Fe=3}}function Eg(){if(Fe===4||Fe===3){Fe=0,Xn();var t=Es,n=ga,s=ya,l=lg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Fe=5:(Fe=0,ga=Es=null,Tg(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(vs=null),Ya(s),n=n.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Gi,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=O.T,c=tt.p,tt.p=2,O.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var b=l[E];f(b.value,{componentStack:b.stack})}}finally{O.T=n,tt.p=c}}(ya&3)!==0&&_u(),ui(t),c=t.pendingLanes,(s&4194090)!==0&&(c&42)!==0?t===sf?jl++:(jl=0,sf=t):jl=0,Ol(0)}}function Tg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,pl(n)))}function _u(t){return _g(),vg(),Eg(),bg()}function bg(){if(Fe!==5)return!1;var t=Es,n=ef;ef=0;var s=Ya(ya),l=O.T,c=tt.p;try{tt.p=32>s?32:s,O.T=null,s=nf,nf=null;var f=Es,E=ya;if(Fe=0,ga=Es=null,ya=0,(Jt&6)!==0)throw Error(a(331));var b=Jt;if(Jt|=4,rg(f.current),ng(f,f.current,E,s),Jt=b,Ol(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Gi,f)}catch{}return!0}finally{tt.p=c,O.T=l,Tg(t,n)}}function xg(t,n,s){n=Rn(s,n),n=Oh(t.stateNode,n,2),t=cs(t,n,2),t!==null&&(_e(t,2),ui(t))}function re(t,n,s){if(t.tag===3)xg(t,t,s);else for(;n!==null;){if(n.tag===3){xg(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vs===null||!vs.has(l))){t=Rn(s,t),s=wm(2),l=cs(n,s,2),l!==null&&(Cm(s,l,n,t),_e(l,2),ui(l));break}}n=n.return}}function of(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new A1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(Zh=!0,c.add(s),t=N1.bind(null,t,n,s),n.then(t,t))}function N1(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,le===t&&(Yt&s)===s&&(ge===4||ge===3&&(Yt&62914560)===Yt&&300>Oe()-tf?(Jt&2)===0&&_a(t,0):Wh|=s,ma===Yt&&(ma=0)),ui(t)}function Sg(t,n){n===0&&(n=Ki()),t=ta(t,n),t!==null&&(_e(t,n),ui(t))}function I1(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Sg(t,s)}function M1(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),Sg(t,s)}function V1(t,n){return Ct(t,n)}var vu=null,Ea=null,uf=!1,Eu=!1,cf=!1,br=0;function ui(t){t!==Ea&&t.next===null&&(Ea===null?vu=Ea=t:Ea=Ea.next=t),Eu=!0,uf||(uf=!0,O1())}function Ol(t,n){if(!cf&&Eu){cf=!0;do for(var s=!1,l=vu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var E=l.suspendedLanes,b=l.pingedLanes;f=(1<<31-sn(42|t)+1)-1,f&=c&~(E&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,Cg(l,f))}else f=Yt,f=bn(l,l===le?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Qi(l,f)||(s=!0,Cg(l,f));l=l.next}while(s);cf=!1}}function j1(){Ag()}function Ag(){Eu=uf=!1;var t=0;br!==0&&(H1()&&(t=br),br=0);for(var n=Oe(),s=null,l=vu;l!==null;){var c=l.next,f=Rg(l,n);f===0?(l.next=null,s===null?vu=c:s.next=c,c===null&&(Ea=s)):(s=l,(t!==0||(f&3)!==0)&&(Eu=!0)),l=c}Ol(t)}function Rg(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-sn(f),b=1<<E,M=c[E];M===-1?((b&s)===0||(b&l)!==0)&&(c[E]=Pr(b,n)):M<=n&&(t.expiredLanes|=b),f&=~b}if(n=le,s=Yt,s=bn(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===n&&(te===2||te===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&At(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Qi(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(l!==null&&At(l),Ya(s)){case 2:case 8:s=ke;break;case 32:s=Ei;break;case 268435456:s=Ha;break;default:s=Ei}return l=wg.bind(null,t),s=Ct(s,l),t.callbackPriority=n,t.callbackNode=s,n}return l!==null&&l!==null&&At(l),t.callbackPriority=2,t.callbackNode=null,2}function wg(t,n){if(Fe!==0&&Fe!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(_u()&&t.callbackNode!==s)return null;var l=Yt;return l=bn(t,t===le?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ug(t,l,n),Rg(t,Oe()),t.callbackNode!=null&&t.callbackNode===s?wg.bind(null,t):null)}function Cg(t,n){if(_u())return null;ug(t,n,!0)}function O1(){G1(function(){(Jt&6)!==0?Ct(ye,j1):Ag()})}function hf(){return br===0&&(br=Fa()),br}function Dg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:zn(""+t)}function Ng(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function k1(t,n,s,l,c){if(n==="submit"&&s&&s.stateNode===c){var f=Dg((c[qe]||null).action),E=l.submitter;E&&(n=(n=E[qe]||null)?Dg(n.formAction):E.getAttribute("formAction"),n!==null&&(f=n,E=null));var b=new er("action","action",null,l,c);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(br!==0){var M=E?Ng(c,E):new FormData(c);Nh(s,{pending:!0,data:M,method:c.method,action:f},null,M)}}else typeof f=="function"&&(b.preventDefault(),M=E?Ng(c,E):new FormData(c),Nh(s,{pending:!0,data:M,method:c.method,action:f},f,M))},currentTarget:c}]})}}for(var ff=0;ff<Xc.length;ff++){var df=Xc[ff],P1=df.toLowerCase(),U1=df[0].toUpperCase()+df.slice(1);Fn(P1,"on"+U1)}Fn(up,"onAnimationEnd"),Fn(cp,"onAnimationIteration"),Fn(hp,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(e1,"onTransitionRun"),Fn(n1,"onTransitionStart"),Fn(i1,"onTransitionCancel"),Fn(fp,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function Ig(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],c=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var E=l.length-1;0<=E;E--){var b=l[E],M=b.instance,Q=b.currentTarget;if(b=b.listener,M!==f&&c.isPropagationStopped())break t;f=b,c.currentTarget=Q;try{f(c)}catch(rt){lu(rt)}c.currentTarget=null,f=M}else for(E=0;E<l.length;E++){if(b=l[E],M=b.instance,Q=b.currentTarget,b=b.listener,M!==f&&c.isPropagationStopped())break t;f=b,c.currentTarget=Q;try{f(c)}catch(rt){lu(rt)}c.currentTarget=null,f=M}}}}function Ht(t,n){var s=n[qs];s===void 0&&(s=n[qs]=new Set);var l=t+"__bubble";s.has(l)||(Mg(n,t,2,!1),s.add(l))}function pf(t,n,s){var l=0;n&&(l|=4),Mg(s,t,l,n)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function mf(t){if(!t[Tu]){t[Tu]=!0,bo.forEach(function(s){s!=="selectionchange"&&(L1.has(s)||pf(s,!1,t),pf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Tu]||(n[Tu]=!0,pf("selectionchange",!1,n))}}function Mg(t,n,s,l){switch(ny(n)){case 2:var c=fE;break;case 8:c=dE;break;default:c=Df}s=c.bind(null,n,s,t),c=void 0,!Ri||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function gf(t,n,s,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===c)break;if(E===4)for(E=l.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===c)return;E=E.return}for(;b!==null;){if(E=Wn(b),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){l=f=E;continue t}b=b.parentNode}}l=l.return}Ws(function(){var Q=f,rt=Ja(s),lt=[];t:{var X=dp.get(t);if(X!==void 0){var $=er,jt=t;switch(t){case"keypress":if(Js(s)===0)break t;case"keydown":case"keyup":$=$r;break;case"focusin":jt="focus",$=Qr;break;case"focusout":jt="blur",$=Qr;break;case"beforeblur":case"afterblur":$=Qr;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Do;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=as;break;case up:case cp:case hp:$=el;break;case fp:$=m;break;case"scroll":case"scrollend":$=ir;break;case"wheel":$=x;break;case"copy":case"cut":case"paste":$=Io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=sl;break;case"toggle":case"beforetoggle":$=W}var Nt=(n&4)!==0,se=!Nt&&(t==="scroll"||t==="scrollend"),q=Nt?X!==null?X+"Capture":null:X;Nt=[];for(var U=Q,F;U!==null;){var at=U;if(F=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||F===null||q===null||(at=ss(U,q),at!=null&&Nt.push(Pl(U,at,F))),se)break;U=U.return}0<Nt.length&&(X=new $(X,jt,null,s,rt),lt.push({event:X,listeners:Nt}))}}if((n&7)===0){t:{if(X=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",X&&s!==Wa&&(jt=s.relatedTarget||s.fromElement)&&(Wn(jt)||jt[bi]))break t;if(($||X)&&(X=rt.window===rt?rt:(X=rt.ownerDocument)?X.defaultView||X.parentWindow:window,$?(jt=s.relatedTarget||s.toElement,$=Q,jt=jt?Wn(jt):null,jt!==null&&(se=h(jt),Nt=jt.tag,jt!==se||Nt!==5&&Nt!==27&&Nt!==6)&&(jt=null)):($=null,jt=Q),$!==jt)){if(Nt=ar,at="onMouseLeave",q="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Nt=sl,at="onPointerLeave",q="onPointerEnter",U="pointer"),se=$==null?X:Wi($),F=jt==null?X:Wi(jt),X=new Nt(at,U+"leave",$,s,rt),X.target=se,X.relatedTarget=F,at=null,Wn(rt)===Q&&(Nt=new Nt(q,U+"enter",jt,s,rt),Nt.target=F,Nt.relatedTarget=se,at=Nt),se=at,$&&jt)e:{for(Nt=$,q=jt,U=0,F=Nt;F;F=Ta(F))U++;for(F=0,at=q;at;at=Ta(at))F++;for(;0<U-F;)Nt=Ta(Nt),U--;for(;0<F-U;)q=Ta(q),F--;for(;U--;){if(Nt===q||q!==null&&Nt===q.alternate)break e;Nt=Ta(Nt),q=Ta(q)}Nt=null}else Nt=null;$!==null&&Vg(lt,X,$,Nt,!1),jt!==null&&se!==null&&Vg(lt,se,jt,Nt,!0)}}t:{if(X=Q?Wi(Q):window,$=X.nodeName&&X.nodeName.toLowerCase(),$==="select"||$==="input"&&X.type==="file")var xt=Wd;else if($d(X))if(Jd)xt=W0;else{xt=$0;var Bt=X0}else $=X.nodeName,!$||$.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Fr(Q.elementType)&&(xt=Wd):xt=Z0;if(xt&&(xt=xt(t,Q))){Zd(lt,xt,s,rt);break t}Bt&&Bt(t,X,Q),t==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Xa(X,"number",X.value)}switch(Bt=Q?Wi(Q):window,t){case"focusin":($d(Bt)||Bt.contentEditable==="true")&&(Zr=Bt,Yc=Q,ul=null);break;case"focusout":ul=Yc=Zr=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,lp(lt,s,rt);break;case"selectionchange":if(t1)break;case"keydown":case"keyup":lp(lt,s,rt)}var wt;if(Pt)t:{switch(t){case"compositionstart":var It="onCompositionStart";break t;case"compositionend":It="onCompositionEnd";break t;case"compositionupdate":It="onCompositionUpdate";break t}It=void 0}else Hn?Bn(t,s)&&(It="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(It="onCompositionStart");It&&(Te&&s.locale!=="ko"&&(Hn||It!=="onCompositionStart"?It==="onCompositionEnd"&&Hn&&(wt=Co()):(An=rt,ae="value"in An?An.value:An.textContent,Hn=!0)),Bt=bu(Q,It),0<Bt.length&&(It=new il(It,t,null,s,rt),lt.push({event:It,listeners:Bt}),wt?It.data=wt:(wt=qn(s),wt!==null&&(It.data=wt)))),(wt=Wt?rl(t,s):Y0(t,s))&&(It=bu(Q,"onBeforeInput"),0<It.length&&(Bt=new il("onBeforeInput","beforeinput",null,s,rt),lt.push({event:Bt,listeners:It}),Bt.data=wt)),k1(lt,t,Q,s,rt)}Ig(lt,n)})}function Pl(t,n,s){return{instance:t,listener:n,currentTarget:s}}function bu(t,n){for(var s=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=ss(t,s),c!=null&&l.unshift(Pl(t,c,f)),c=ss(t,n),c!=null&&l.push(Pl(t,c,f))),t.tag===3)return l;t=t.return}return[]}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vg(t,n,s,l,c){for(var f=n._reactName,E=[];s!==null&&s!==l;){var b=s,M=b.alternate,Q=b.stateNode;if(b=b.tag,M!==null&&M===l)break;b!==5&&b!==26&&b!==27||Q===null||(M=Q,c?(Q=ss(s,f),Q!=null&&E.unshift(Pl(s,Q,M))):c||(Q=ss(s,f),Q!=null&&E.push(Pl(s,Q,M)))),s=s.return}E.length!==0&&t.push({event:n,listeners:E})}var z1=/\r\n?/g,B1=/\u0000|\uFFFD/g;function jg(t){return(typeof t=="string"?t:""+t).replace(z1,`
`).replace(B1,"")}function Og(t,n){return n=jg(n),jg(t)===n}function xu(){}function ie(t,n,s,l,c,f){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Sn(t,""+l);break;case"className":Qs(t,"class",l);break;case"tabIndex":Qs(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Qs(t,s,l);break;case"style":Za(t,l,f);break;case"data":if(n!=="object"){Qs(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=zn(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(n!=="input"&&ie(t,n,"name",c.name,c,null),ie(t,n,"formEncType",c.formEncType,c,null),ie(t,n,"formMethod",c.formMethod,c,null),ie(t,n,"formTarget",c.formTarget,c,null)):(ie(t,n,"encType",c.encType,c,null),ie(t,n,"method",c.method,c,null),ie(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=zn(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=xu);break;case"onScroll":l!=null&&Ht("scroll",t);break;case"onScrollEnd":l!=null&&Ht("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=zn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Ht("beforetoggle",t),Ht("toggle",t),Ys(t,"popover",l);break;case"xlinkActuate":xn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ys(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Ao.get(s)||s,Ys(t,s,l))}}function yf(t,n,s,l,c,f){switch(s){case"style":Za(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&Sn(t,""+l);break;case"onScroll":l!=null&&Ht("scroll",t);break;case"onScrollEnd":l!=null&&Ht("scrollend",t);break;case"onClick":l!=null&&(t.onclick=xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fs.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),n=s.slice(2,c?s.length-7:void 0),f=t[qe]||null,f=f!=null?f[s]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,l,c);break t}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Ys(t,s,l)}}}function Ge(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",t),Ht("load",t);var l=!1,c=!1,f;for(f in s)if(s.hasOwnProperty(f)){var E=s[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ie(t,n,f,E,s,null)}}c&&ie(t,n,"srcSet",s.srcSet,s,null),l&&ie(t,n,"src",s.src,s,null);return;case"input":Ht("invalid",t);var b=f=E=c=null,M=null,Q=null;for(l in s)if(s.hasOwnProperty(l)){var rt=s[l];if(rt!=null)switch(l){case"name":c=rt;break;case"type":E=rt;break;case"checked":M=rt;break;case"defaultChecked":Q=rt;break;case"value":f=rt;break;case"defaultValue":b=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(a(137,n));break;default:ie(t,n,l,rt,s,null)}}Ka(t,f,b,M,Q,E,c,!1),es(t);return;case"select":Ht("invalid",t),l=E=f=null;for(c in s)if(s.hasOwnProperty(c)&&(b=s[c],b!=null))switch(c){case"value":f=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:ie(t,n,c,b,s,null)}n=f,s=E,t.multiple=!!l,n!=null?ns(t,!!l,n,!1):s!=null&&ns(t,!!l,s,!0);return;case"textarea":Ht("invalid",t),f=c=l=null;for(E in s)if(s.hasOwnProperty(E)&&(b=s[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":c=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:ie(t,n,E,b,s,null)}So(t,l,c,f),es(t);return;case"option":for(M in s)if(s.hasOwnProperty(M)&&(l=s[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ie(t,n,M,l,s,null)}return;case"dialog":Ht("beforetoggle",t),Ht("toggle",t),Ht("cancel",t),Ht("close",t);break;case"iframe":case"object":Ht("load",t);break;case"video":case"audio":for(l=0;l<kl.length;l++)Ht(kl[l],t);break;case"image":Ht("error",t),Ht("load",t);break;case"details":Ht("toggle",t);break;case"embed":case"source":case"link":Ht("error",t),Ht("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in s)if(s.hasOwnProperty(Q)&&(l=s[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ie(t,n,Q,l,s,null)}return;default:if(Fr(n)){for(rt in s)s.hasOwnProperty(rt)&&(l=s[rt],l!==void 0&&yf(t,n,rt,l,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(l=s[b],l!=null&&ie(t,n,b,l,s,null))}function q1(t,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,E=null,b=null,M=null,Q=null,rt=null;for($ in s){var lt=s[$];if(s.hasOwnProperty($)&&lt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":M=lt;default:l.hasOwnProperty($)||ie(t,n,$,null,l,lt)}}for(var X in l){var $=l[X];if(lt=s[X],l.hasOwnProperty(X)&&($!=null||lt!=null))switch(X){case"type":f=$;break;case"name":c=$;break;case"checked":Q=$;break;case"defaultChecked":rt=$;break;case"value":E=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,n));break;default:$!==lt&&ie(t,n,X,$,l,lt)}}Qa(t,E,b,M,Q,rt,f,c);return;case"select":$=E=b=X=null;for(f in s)if(M=s[f],s.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":$=M;default:l.hasOwnProperty(f)||ie(t,n,f,null,l,M)}for(c in l)if(f=l[c],M=s[c],l.hasOwnProperty(c)&&(f!=null||M!=null))switch(c){case"value":X=f;break;case"defaultValue":b=f;break;case"multiple":E=f;default:f!==M&&ie(t,n,c,f,l,M)}n=b,s=E,l=$,X!=null?ns(t,!!s,X,!1):!!l!=!!s&&(n!=null?ns(t,!!s,n,!0):ns(t,!!s,s?[]:"",!1));return;case"textarea":$=X=null;for(b in s)if(c=s[b],s.hasOwnProperty(b)&&c!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ie(t,n,b,null,l,c)}for(E in l)if(c=l[E],f=s[E],l.hasOwnProperty(E)&&(c!=null||f!=null))switch(E){case"value":X=c;break;case"defaultValue":$=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==f&&ie(t,n,E,c,l,f)}xo(t,X,$);return;case"option":for(var jt in s)if(X=s[jt],s.hasOwnProperty(jt)&&X!=null&&!l.hasOwnProperty(jt))switch(jt){case"selected":t.selected=!1;break;default:ie(t,n,jt,null,l,X)}for(M in l)if(X=l[M],$=s[M],l.hasOwnProperty(M)&&X!==$&&(X!=null||$!=null))switch(M){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ie(t,n,M,X,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in s)X=s[Nt],s.hasOwnProperty(Nt)&&X!=null&&!l.hasOwnProperty(Nt)&&ie(t,n,Nt,null,l,X);for(Q in l)if(X=l[Q],$=s[Q],l.hasOwnProperty(Q)&&X!==$&&(X!=null||$!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:ie(t,n,Q,X,l,$)}return;default:if(Fr(n)){for(var se in s)X=s[se],s.hasOwnProperty(se)&&X!==void 0&&!l.hasOwnProperty(se)&&yf(t,n,se,void 0,l,X);for(rt in l)X=l[rt],$=s[rt],!l.hasOwnProperty(rt)||X===$||X===void 0&&$===void 0||yf(t,n,rt,X,l,$);return}}for(var q in s)X=s[q],s.hasOwnProperty(q)&&X!=null&&!l.hasOwnProperty(q)&&ie(t,n,q,null,l,X);for(lt in l)X=l[lt],$=s[lt],!l.hasOwnProperty(lt)||X===$||X==null&&$==null||ie(t,n,lt,X,l,$)}var _f=null,vf=null;function Su(t){return t.nodeType===9?t:t.ownerDocument}function kg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pg(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ef(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Tf=null;function H1(){var t=window.event;return t&&t.type==="popstate"?t===Tf?!1:(Tf=t,!0):(Tf=null,!1)}var Ug=typeof setTimeout=="function"?setTimeout:void 0,F1=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(t){return Lg.resolve(null).then(t).catch(Y1)}:Ug;function Y1(t){setTimeout(function(){throw t})}function bs(t){return t==="head"}function zg(t,n){var s=n,l=0,c=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(0<l&&8>l){s=l;var E=t.ownerDocument;if(s&1&&Ul(E.documentElement),s&2&&Ul(E.body),s&4)for(s=E.head,Ul(s),E=s.firstChild;E;){var b=E.nextSibling,M=E.nodeName;E[Zi]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||s.removeChild(E),E=b}}if(c===0){t.removeChild(f),Yl(n);return}c--}else s==="$"||s==="$?"||s==="$!"?c++:l=s.charCodeAt(0)-48;else l=0;s=f}while(s);Yl(n)}function bf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":bf(s),Lr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Q1(t,n,s,l){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Zi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Yn(t.nextSibling),t===null)break}return null}function K1(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Yn(t.nextSibling),t===null))return null;return t}function xf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function X1(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Yn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Sf=null;function Bg(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function qg(t,n,s){switch(n=Su(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ul(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Lr(t)}var Mn=new Map,Hg=new Set;function Au(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var zi=tt.d;tt.d={f:$1,r:Z1,D:W1,C:J1,L:tE,m:eE,X:iE,S:nE,M:sE};function $1(){var t=zi.f(),n=gu();return t||n}function Z1(t){var n=Jn(t);n!==null&&n.tag===5&&n.type==="form"?um(n):zi.r(t)}var ba=typeof document>"u"?null:document;function Fg(t,n,s){var l=ba;if(l&&typeof n=="string"&&n){var c=Pe(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Hg.has(c)||(Hg.add(c),t={rel:t,crossOrigin:s,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),Ge(n,"link",t),Ee(n),l.head.appendChild(n)))}}function W1(t){zi.D(t),Fg("dns-prefetch",t,null)}function J1(t,n){zi.C(t,n),Fg("preconnect",t,n)}function tE(t,n,s){zi.L(t,n,s);var l=ba;if(l&&t&&n){var c='link[rel="preload"][as="'+Pe(n)+'"]';n==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Pe(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Pe(s.imageSizes)+'"]')):c+='[href="'+Pe(t)+'"]';var f=c;switch(n){case"style":f=xa(t);break;case"script":f=Sa(t)}Mn.has(f)||(t=T({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),Mn.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Ll(f))||n==="script"&&l.querySelector(zl(f))||(n=l.createElement("link"),Ge(n,"link",t),Ee(n),l.head.appendChild(n)))}}function eE(t,n){zi.m(t,n);var s=ba;if(s&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Pe(l)+'"][href="'+Pe(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Sa(t)}if(!Mn.has(f)&&(t=T({rel:"modulepreload",href:t},n),Mn.set(f,t),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(zl(f)))return}l=s.createElement("link"),Ge(l,"link",t),Ee(l),s.head.appendChild(l)}}}function nE(t,n,s){zi.S(t,n,s);var l=ba;if(l&&t){var c=Ji(l).hoistableStyles,f=xa(t);n=n||"default";var E=c.get(f);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(Ll(f)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":n},s),(s=Mn.get(f))&&Af(t,s);var M=E=l.createElement("link");Ee(M),Ge(M,"link",t),M._p=new Promise(function(Q,rt){M.onload=Q,M.onerror=rt}),M.addEventListener("load",function(){b.loading|=1}),M.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ru(E,n,l)}E={type:"stylesheet",instance:E,count:1,state:b},c.set(f,E)}}}function iE(t,n){zi.X(t,n);var s=ba;if(s&&t){var l=Ji(s).hoistableScripts,c=Sa(t),f=l.get(c);f||(f=s.querySelector(zl(c)),f||(t=T({src:t,async:!0},n),(n=Mn.get(c))&&Rf(t,n),f=s.createElement("script"),Ee(f),Ge(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function sE(t,n){zi.M(t,n);var s=ba;if(s&&t){var l=Ji(s).hoistableScripts,c=Sa(t),f=l.get(c);f||(f=s.querySelector(zl(c)),f||(t=T({src:t,async:!0,type:"module"},n),(n=Mn.get(c))&&Rf(t,n),f=s.createElement("script"),Ee(f),Ge(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Gg(t,n,s,l){var c=(c=P.current)?Au(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=xa(s.href),s=Ji(c).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=xa(s.href);var f=Ji(c).hoistableStyles,E=f.get(t);if(E||(c=c.ownerDocument||c,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=c.querySelector(Ll(t)))&&!f._p&&(E.instance=f,E.state.loading=5),Mn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Mn.set(t,s),f||rE(c,t,s,E.state))),n&&l===null)throw Error(a(528,""));return E}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Sa(s),s=Ji(c).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function xa(t){return'href="'+Pe(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function Yg(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function rE(t,n,s,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Ge(n,"link",s),Ee(n),t.head.appendChild(n))}function Sa(t){return'[src="'+Pe(t)+'"]'}function zl(t){return"script[async]"+t}function Qg(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Pe(s.href)+'"]');if(l)return n.instance=l,Ee(l),l;var c=T({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ee(l),Ge(l,"style",c),Ru(l,s.precedence,t),n.instance=l;case"stylesheet":c=xa(s.href);var f=t.querySelector(Ll(c));if(f)return n.state.loading|=4,n.instance=f,Ee(f),f;l=Yg(s),(c=Mn.get(c))&&Af(l,c),f=(t.ownerDocument||t).createElement("link"),Ee(f);var E=f;return E._p=new Promise(function(b,M){E.onload=b,E.onerror=M}),Ge(f,"link",l),n.state.loading|=4,Ru(f,s.precedence,t),n.instance=f;case"script":return f=Sa(s.src),(c=t.querySelector(zl(f)))?(n.instance=c,Ee(c),c):(l=s,(c=Mn.get(f))&&(l=T({},s),Rf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),Ee(c),Ge(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Ru(l,s.precedence,t));return n.instance}function Ru(t,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===n)f=b;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Af(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Rf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var wu=null;function Kg(t,n,s){if(wu===null){var l=new Map,c=wu=new Map;c.set(s,l)}else c=wu,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var f=s[c];if(!(f[Zi]||f[ve]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(n)||"";E=t+E;var b=l.get(E);b?b.push(f):l.set(E,[f])}}return l}function Xg(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function aE(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function $g(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Bl=null;function lE(){}function oE(t,n,s){if(Bl===null)throw Error(a(475));var l=Bl;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=xa(s.href),f=t.querySelector(Ll(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Cu.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=f,Ee(f);return}f=t.ownerDocument||t,s=Yg(s),(c=Mn.get(c))&&Af(s,c),f=f.createElement("link"),Ee(f);var E=f;E._p=new Promise(function(b,M){E.onload=b,E.onerror=M}),Ge(f,"link",s),n.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Cu.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function uE(){if(Bl===null)throw Error(a(475));var t=Bl;return t.stylesheets&&t.count===0&&wf(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&wf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Cu(){if(this.count--,this.count===0){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Du=null;function wf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Du=new Map,n.forEach(cE,t),Du=null,Cu.call(t))}function cE(t,n){if(!(n.state.loading&4)){var s=Du.get(t);if(s)var l=s.get(null);else{s=new Map,Du.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var E=c[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(s.set(E.dataset.precedence,E),l=E)}l&&s.set(null,l)}c=n.instance,E=c.getAttribute("data-precedence"),f=s.get(E)||l,f===l&&s.set(null,c),s.set(E,c),this.count++,l=Cu.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var ql={$$typeof:yt,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function hE(t,n,s,l,c,f,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Zg(t,n,s,l,c,f,E,b,M,Q,rt,lt){return t=new hE(t,n,s,E,b,M,Q,lt),n=1,f===!0&&(n|=24),f=mn(3,null,null,n),t.current=f,f.stateNode=t,n=lh(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:s,cache:n},hh(f),t}function Wg(t){return t?(t=ea,t):ea}function Jg(t,n,s,l,c,f){c=Wg(c),l.context===null?l.context=c:l.pendingContext=c,l=us(n),l.payload={element:s},f=f===void 0?null:f,f!==null&&(l.callback=f),s=cs(t,l,n),s!==null&&(En(s,t,n),_l(s,t,n))}function ty(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Cf(t,n){ty(t,n),(t=t.alternate)&&ty(t,n)}function ey(t){if(t.tag===13){var n=ta(t,67108864);n!==null&&En(n,t,67108864),Cf(t,67108864)}}var Nu=!0;function fE(t,n,s,l){var c=O.T;O.T=null;var f=tt.p;try{tt.p=2,Df(t,n,s,l)}finally{tt.p=f,O.T=c}}function dE(t,n,s,l){var c=O.T;O.T=null;var f=tt.p;try{tt.p=8,Df(t,n,s,l)}finally{tt.p=f,O.T=c}}function Df(t,n,s,l){if(Nu){var c=Nf(l);if(c===null)gf(t,n,l,Iu,s),iy(t,l);else if(mE(c,t,n,s,l))l.stopPropagation();else if(iy(t,l),n&4&&-1<pE.indexOf(t)){for(;c!==null;){var f=Jn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Pn(f.pendingLanes);if(E!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var M=1<<31-sn(E);b.entanglements[1]|=M,E&=~M}ui(f),(Jt&6)===0&&(pu=Oe()+500,Ol(0))}}break;case 13:b=ta(f,2),b!==null&&En(b,f,2),gu(),Cf(f,2)}if(f=Nf(l),f===null&&gf(t,n,l,Iu,s),f===c)break;c=f}c!==null&&l.stopPropagation()}else gf(t,n,l,null,s)}}function Nf(t){return t=Ja(t),If(t)}var Iu=null;function If(t){if(Iu=null,t=Wn(t),t!==null){var n=h(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=d(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Iu=t,null}function ny(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kr()){case ye:return 2;case ke:return 8;case Ei:case Oc:return 32;case Ha:return 268435456;default:return 32}default:return 32}}var Mf=!1,xs=null,Ss=null,As=null,Hl=new Map,Fl=new Map,Rs=[],pE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iy(t,n){switch(t){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":Hl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(n.pointerId)}}function Gl(t,n,s,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Jn(n),n!==null&&ey(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function mE(t,n,s,l,c){switch(n){case"focusin":return xs=Gl(xs,t,n,s,l,c),!0;case"dragenter":return Ss=Gl(Ss,t,n,s,l,c),!0;case"mouseover":return As=Gl(As,t,n,s,l,c),!0;case"pointerover":var f=c.pointerId;return Hl.set(f,Gl(Hl.get(f)||null,t,n,s,l,c)),!0;case"gotpointercapture":return f=c.pointerId,Fl.set(f,Gl(Fl.get(f)||null,t,n,s,l,c)),!0}return!1}function sy(t){var n=Wn(t.target);if(n!==null){var s=h(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){t.blockedOn=n,Uc(t.priority,function(){if(s.tag===13){var l=vn();l=Ga(l);var c=ta(s,l);c!==null&&En(c,s,l),Cf(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Nf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Wa=l,s.target.dispatchEvent(l),Wa=null}else return n=Jn(s),n!==null&&ey(n),t.blockedOn=s,!1;n.shift()}return!0}function ry(t,n,s){Mu(t)&&s.delete(n)}function gE(){Mf=!1,xs!==null&&Mu(xs)&&(xs=null),Ss!==null&&Mu(Ss)&&(Ss=null),As!==null&&Mu(As)&&(As=null),Hl.forEach(ry),Fl.forEach(ry)}function Vu(t,n){t.blockedOn===n&&(t.blockedOn=null,Mf||(Mf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,gE)))}var ju=null;function ay(t){ju!==t&&(ju=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ju===t&&(ju=null);for(var n=0;n<t.length;n+=3){var s=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(If(l||s)===null)continue;break}var f=Jn(s);f!==null&&(t.splice(n,3),n-=3,Nh(f,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function Yl(t){function n(M){return Vu(M,t)}xs!==null&&Vu(xs,t),Ss!==null&&Vu(Ss,t),As!==null&&Vu(As,t),Hl.forEach(n),Fl.forEach(n);for(var s=0;s<Rs.length;s++){var l=Rs[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Rs.length&&(s=Rs[0],s.blockedOn===null);)sy(s),s.blockedOn===null&&Rs.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],f=s[l+1],E=c[qe]||null;if(typeof f=="function")E||ay(s);else if(E){var b=null;if(f&&f.hasAttribute("formAction")){if(c=f,E=f[qe]||null)b=E.formAction;else if(If(c)!==null)continue}else b=E.action;typeof b=="function"?s[l+1]=b:(s.splice(l,3),l-=3),ay(s)}}}function Vf(t){this._internalRoot=t}Ou.prototype.render=Vf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=vn();Jg(s,l,t,n,null,null)},Ou.prototype.unmount=Vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Jg(t.current,2,null,t,null,null),gu(),n[bi]=null}};function Ou(t){this._internalRoot=t}Ou.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ti();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Rs.length&&n!==0&&n<Rs[s].priority;s++);Rs.splice(s,0,t),s===0&&sy(t)}};var ly=e.version;if(ly!=="19.1.1")throw Error(a(527,ly,"19.1.1"));tt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(n),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var yE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{Gi=ku.inject(yE),Xe=ku}catch{}}return Kl.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,l="",c=xm,f=Sm,E=Am,b=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(E=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(b=n.unstable_transitionCallbacks)),n=Zg(t,1,!1,null,null,s,l,c,f,E,b,null),t[bi]=n.current,mf(t),new Vf(n)},Kl.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var l=!1,c="",f=xm,E=Sm,b=Am,M=null,Q=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(E=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks),s.formState!==void 0&&(Q=s.formState)),n=Zg(t,1,!0,n,s??null,l,c,f,E,b,M,Q),n.context=Wg(null),s=n.current,l=vn(),l=Ga(l),c=us(l),c.callback=null,cs(s,c,l),s=l,n.current.lanes=s,_e(n,s),ui(n),t[bi]=n.current,mf(t),new Ou(n)},Kl.version="19.1.1",Kl}var yy;function wE(){if(yy)return kf.exports;yy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),kf.exports=RE(),kf.exports}var CE=wE();const DE="modulepreload",NE=function(r){return"/CRM_VER.4/"+r},_y={},IE=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let y=function(T){return Promise.all(T.map(w=>Promise.resolve(w).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var d=y;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),_=g?.nonce||g?.getAttribute("nonce");o=y(i.map(T=>{if(T=NE(T),T in _y)return;_y[T]=!0;const w=T.endsWith(".css"),j=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${T}"]${j}`))return;const K=document.createElement("link");if(K.rel=w?"stylesheet":DE,w||(K.as="script"),K.crossOrigin="",K.href=T,_&&K.setAttribute("nonce",_),document.head.appendChild(K),w)return new Promise((z,it)=>{K.addEventListener("load",z),K.addEventListener("error",()=>it(new Error(`Unable to preload CSS for ${T}`)))})}))}function h(g){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=g,window.dispatchEvent(_),!_.defaultPrevented)throw g}return o.then(g=>{for(const _ of g||[])_.status==="rejected"&&h(_.reason);return e().catch(h)})},vy=["네이버광고","블로그","워킹","지인소개","기존고객","기타"],Ey=["매매","월세","전세","상가","사무실","지식산업센터","아파트"],ME=["신규","진행중","장기관리고객","보류"],k_=["매물제안예정","매물제안중","미팅예정","접수후대기중"],Vn=["확인전","확인중","볼수있음","오늘못봄","계약됨"],VE=({activeFilter:r,onFilterChange:e,customers:i,meetings:a,activities:o,isMobileOpen:h,onMobileClose:d})=>{const[g,_]=Tt.useState(!1),y=j=>{const K=new Date;return K.setHours(0,0,0,0),j==="전체"?i.length:j==="집중고객"?i.filter(z=>z.isFavorite).length:j==="오늘미팅"?i.filter(z=>a.filter(H=>H.customerId===z.id).some(H=>{const et=new Date(H.date);return et.setHours(0,0,0,0),et.getTime()===K.getTime()})).length:j==="미팅일확정"?i.filter(z=>a.filter(H=>H.customerId===z.id).some(H=>{const et=new Date(H.date);return et.setHours(0,0,0,0),et>K})).length:j==="답장대기"?i.filter(z=>{const it=o.filter(H=>H.customerId===z.id);return it.length===0?!1:it.some(H=>!(H.followUps||[]).some(ft=>ft.author==="답장"))}).length:i.filter(z=>z.status===j).length},T=["전체","보류","신규","진행중","집중고객","오늘미팅","미팅일확정","답장대기"],w=j=>{e(j),d()};return p.jsxs("aside",{className:`filter-sidebar ${g?"collapsed":""} ${h?"mobile-open":""}`,children:[p.jsxs("div",{className:"filter-header",children:[!g&&p.jsx("h4",{children:"필터"}),p.jsx("button",{onClick:()=>_(!g),className:"btn-close desktop-only",children:g?"☰":"✕"}),p.jsx("button",{onClick:d,className:"btn-close mobile-only",children:"✕"})]}),!g&&p.jsx("ul",{className:"filter-list",children:T.map(j=>p.jsxs("li",{className:`filter-item ${r===j?"active":""}`,onClick:()=>w(j),children:[p.jsx("span",{children:j}),p.jsx("span",{className:"count-badge",children:y(j)})]},j))})]})},jE=({customers:r,onSelectCustomer:e,onEdit:i,onDelete:a,selectedCustomerId:o,activeFilter:h,activeProgressFilter:d,onProgressFilterChange:g,allCustomers:_,onFavoriteCustomer:y,activities:T,meetings:w})=>{const[j,K]=Tt.useState(""),[z,it]=Tt.useState({visible:!1,x:0,y:0,selectedCustomer:null}),[H,et]=Tt.useState({key:"createdAt",direction:"desc"}),ft=Tt.useMemo(()=>[...r.filter(Y=>Y.name.toLowerCase().includes(j.toLowerCase())||Y.phone.includes(j))].sort((Y,B)=>{if(Y.status==="장기관리"&&B.status!=="장기관리")return 1;if(Y.status!=="장기관리"&&B.status==="장기관리")return-1;if(Y.status==="보류"&&B.status!=="보류")return 1;if(Y.status!=="보류"&&B.status==="보류"||Y.isFavorite&&!B.isFavorite)return-1;if(!Y.isFavorite&&B.isFavorite)return 1;if(H.key==="latestActivityDate"){const St=T.filter(At=>At.customerId===Y.id).sort((At,Vt)=>new Date(Vt.date)-new Date(At.date)),dt=T.filter(At=>At.customerId===B.id).sort((At,Vt)=>new Date(Vt.date)-new Date(At.date)),kt=St.length>0?new Date(St[0].date):new Date(0),Ct=dt.length>0?new Date(dt[0].date):new Date(0);return H.direction==="asc"?kt-Ct:Ct-kt}if(H.key==="latestMeetingDate"){const St=w.filter(At=>At.customerId===Y.id).sort((At,Vt)=>new Date(Vt.date)-new Date(At.date)),dt=w.filter(At=>At.customerId===B.id).sort((At,Vt)=>new Date(Vt.date)-new Date(At.date)),kt=St.length>0?new Date(St[0].date):new Date(0),Ct=dt.length>0?new Date(dt[0].date):new Date(0);return H.direction==="asc"?kt-Ct:Ct-kt}const P=Y[H.key],J=B[H.key];if(P==null&&J==null)return 0;if(P==null)return 1;if(J==null)return-1;if(H.key==="hopefulDeposit"||H.key==="hopefulMonthlyRent"){const St=Number(P)||0,dt=Number(J)||0;return H.direction==="asc"?St-dt:dt-St}const nt=String(P).toLowerCase(),ct=String(J).toLowerCase();return nt<ct?H.direction==="asc"?-1:1:nt>ct?H.direction==="asc"?1:-1:0}),[r,j,H,T,w]),yt=(L,k)=>{L.preventDefault(),it({visible:!0,x:L.pageX,y:L.pageY,selectedCustomer:k})},gt=()=>{it({...z,visible:!1})},vt=()=>{z.selectedCustomer&&y(z.selectedCustomer),gt()},st=L=>_.filter(k=>(h==="전체"||k.status===h)&&k.progress===L).length,D=h==="신규"||h==="진행중",R=L=>{et(k=>({key:L,direction:k.key===L&&k.direction==="asc"?"desc":"asc"}))},S=L=>H.key!==L?" ↕":H.direction==="asc"?" ↑":" ↓",V=(L,k)=>{const Y=new Date,B=new Date(L);return Y.getFullYear()===B.getFullYear()&&Y.getMonth()===B.getMonth()&&Y.getDate()===B.getDate()?"rgba(156, 39, 176, 0.12)":k%2===0?"rgba(67, 160, 71, 0.12)":"rgba(229, 57, 53, 0.12)"},N=L=>{if(!L)return"";const k=new Date(L),Y=k.getMonth()+1,B=k.getDate();return`${Y}월${B}일`},C=L=>{const k=T.filter(nt=>nt.customerId===L).sort((nt,ct)=>new Date(ct.date)-new Date(nt.date));if(k.length===0)return"활동필요";const Y=k[0],B=new Date(Y.date),P=B.getMonth()+1,J=B.getDate();return`${P}월${J}일`},A=L=>{const k=T.filter(P=>P.customerId===L).sort((P,J)=>new Date(J.date)-new Date(P.date));if(k.length===0)return"-";const B=k[0].content||"-";return B.length>30?B.substring(0,30)+"...":B},Et=L=>{const k=w.filter(St=>St.customerId===L).sort((St,dt)=>new Date(dt.date)-new Date(St.date));if(k.length===0)return"-";const Y=k[0],B=new Date(Y.date),P=B.getMonth()+1,J=B.getDate(),nt=new Date;return nt.getFullYear()===B.getFullYear()&&nt.getMonth()===B.getMonth()&&nt.getDate()===B.getDate()?{text:"*오늘미팅*",isToday:!0}:{text:`${P}월${J}일`,isToday:!1}},_t=L=>{const k=w.filter(J=>J.customerId===L);if(k.length===0)return"-";const Y=new Date;Y.setHours(0,0,0,0);const B=k.filter(J=>{const nt=new Date(J.date);return nt.setHours(0,0,0,0),nt>=Y}),P=k.filter(J=>{const nt=new Date(J.date);return nt.setHours(0,0,0,0),nt<Y});return`${B.length}/${P.length}`},O=L=>{const k=T.filter(nt=>nt.customerId===L).sort((nt,ct)=>new Date(ct.date)-new Date(nt.date));if(k.length===0)return"#e53935";const Y=k[0],B=new Date,P=new Date(Y.date),J=Math.floor((B-P)/(1e3*60*60*24));return B.getFullYear()===P.getFullYear()&&B.getMonth()===P.getMonth()&&B.getDate()===P.getDate()?"#ff0000":J>=1&&J<=3?"#0000ff":J>=4&&J<=7?"#ff9800":J>=8?"#999999":"inherit"},tt=L=>{const k=N(L);return ft.filter(Y=>N(Y.createdAt)===k).length},ut=(L,k)=>{if(k>0){const P=ft[k-1];if(N(L.createdAt)===N(P.createdAt))return 0}const Y=N(L.createdAt);let B=1;for(let P=k+1;P<ft.length&&N(ft[P].createdAt)===Y;P++)B++;return B},pt=(L,k)=>{const Y=new Date;if(Y.getFullYear()===new Date(L.createdAt).getFullYear()&&Y.getMonth()===new Date(L.createdAt).getMonth()&&Y.getDate()===new Date(L.createdAt).getDate())return-1;let P=0,J=null;for(let nt=0;nt<=k;nt++)if(!(Y.getFullYear()===new Date(ft[nt].createdAt).getFullYear()&&Y.getMonth()===new Date(ft[nt].createdAt).getMonth()&&Y.getDate()===new Date(ft[nt].createdAt).getDate())){const St=N(ft[nt].createdAt);J===null?(J=St,P=0):J!==St&&(J=St,P++)}return P},I=L=>L%2===0?"#fafafa":"#f0f4ff",Z=(L,k)=>{if(k===0)return{};const Y=N(L.createdAt);return N(ft[k-1].createdAt)!==Y?{borderTop:"12px solid white"}:{}};return p.jsxs("div",{className:"table-container",onClick:gt,children:[p.jsx("div",{style:{marginBottom:"15px"},children:p.jsx("input",{type:"text",placeholder:"고객명, 연락처 검색...",value:j,onChange:L=>K(L.target.value),style:{width:"100%",padding:"8px"}})}),p.jsxs("div",{style:{display:"flex",gap:"30px",marginBottom:"15px",fontSize:"13px",alignItems:"center",flexWrap:"wrap"},children:[p.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[p.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:"접수일:"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(156, 39, 176, 0.12)",border:"1px solid rgba(156, 39, 176, 0.3)",borderRadius:"3px"}}),p.jsx("span",{children:"오늘"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(229, 57, 53, 0.12)",border:"1px solid rgba(229, 57, 53, 0.3)",borderRadius:"3px"}}),p.jsx("span",{children:"과거 (홀수)"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(67, 160, 71, 0.12)",border:"1px solid rgba(67, 160, 71, 0.3)",borderRadius:"3px"}}),p.jsx("span",{children:"과거 (짝수)"})]})]}),p.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[p.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:"활동일:"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#ff0000",borderRadius:"3px"}}),p.jsx("span",{children:"오늘"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#0000ff",borderRadius:"3px"}}),p.jsx("span",{children:"1~3일"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#ff9800",borderRadius:"3px"}}),p.jsx("span",{children:"4~7일"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#999999",borderRadius:"3px"}}),p.jsx("span",{children:"8일 이상"})]})]})]}),D&&p.jsxs("div",{className:"progress-tabs",style:{marginBottom:"15px"},children:[p.jsxs("button",{className:`progress-tab ${d?"":"active"}`,onClick:()=>g(null),children:["전체 (",_.filter(L=>h==="전체"||L.status===h).length,")"]}),k_.map(L=>p.jsxs("button",{className:`progress-tab ${d===L?"active":""} progress-${L}`,onClick:()=>g(L),children:[L," (",st(L),")"]},L))]}),p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{onClick:()=>R("createdAt"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["접수일",S("createdAt")]}),p.jsxs("th",{onClick:()=>R("name"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["고객명",S("name")]}),p.jsx("th",{children:"연락처"}),p.jsxs("th",{onClick:()=>R("latestActivityDate"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["활동일",S("latestActivityDate")]}),p.jsx("th",{children:"활동내용"}),p.jsxs("th",{onClick:()=>R("latestMeetingDate"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["미팅일",S("latestMeetingDate")]}),p.jsx("th",{children:"미팅횟수"})]})}),p.jsx("tbody",{children:ft.map((L,k)=>{const Y=ut(L,k),B=pt(L,k),P=Z(L,k);return p.jsxs("tr",{className:o===L.id?"selected":"",onClick:()=>e(L),onContextMenu:J=>yt(J,L),style:{backgroundColor:L.status==="보류"?"#f0f0f0":L.status==="장기관리"?"#fff3e0":L.isFavorite?"rgba(156, 39, 176, 0.15)":V(L.createdAt,B),borderLeft:L.isFavorite?"3px solid #9C27B0":"none",boxShadow:L.isFavorite?"0 2px 4px rgba(156, 39, 176, 0.3)":"none",...P},children:[Y>0&&p.jsxs("td",{rowSpan:Y,style:{verticalAlign:"middle",textAlign:"center",backgroundColor:I(B),fontWeight:"500"},children:[N(L.createdAt),"(",tt(L.createdAt),"명)"]}),p.jsxs("td",{className:"customer-name",title:L.name,children:[L.isFavorite&&p.jsx("span",{style:{marginRight:"6px",color:"#9C27B0"},children:"⭐"}),L.name]}),p.jsx("td",{children:p.jsx("a",{href:`sms:${L.phone}`,children:L.phone})}),p.jsx("td",{style:{color:O(L.id),fontWeight:O(L.id)!=="inherit"?"bold":"normal"},children:C(L.id)}),p.jsx("td",{title:A(L.id)!=="-"?A(L.id):"",children:A(L.id)}),p.jsx("td",{style:{color:Et(L.id)!=="-"&&Et(L.id).isToday?"#ff0000":"inherit",fontWeight:Et(L.id)!=="-"&&Et(L.id).isToday?"bold":"normal"},children:Et(L.id)==="-"?"-":Et(L.id).text}),p.jsx("td",{children:_t(L.id)})]},L.id)})})]}),z.visible&&p.jsx("div",{style:{top:z.y,left:z.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:p.jsx("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:vt,children:z.selectedCustomer?.isFavorite?"⭐ 즐겨찾기 취소":"☆ 즐겨찾기 추가"})})})]})},OE=r=>!r.name||r.name.trim()===""?(alert("고객명은 필수 입력 항목입니다."),!1):r.phone&&!kE(r.phone)?(alert("연락처는 010-xxxx-xxxx 형식으로 입력하세요."),!1):!0,kE=r=>r?/^010-\d{4}-\d{4}$/.test(r):!0,Bi=()=>"_"+Math.random().toString(36).substr(2,9),P_=r=>{if(!r)return"";try{return new Date(r).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date-time:",r,e),""}},PE=({isOpen:r,onClose:e,onSave:i,editData:a})=>{const o=()=>({id:a?.id||null,name:a?.name||"",phone:a?.phone||"",source:a?.source||vy[0],propertyType:a?.propertyType||Ey[0],preferredArea:a?.preferredArea||"",hopefulDeposit:a?.hopefulDeposit||"",hopefulMonthlyRent:a?.hopefulMonthlyRent||"",moveInDate:a?.moveInDate||"",memo:a?.memo||"",status:a?.status||"신규",progress:a?.progress||"매물제안예정",createdAt:a?.createdAt||new Date().toISOString()}),[h,d]=Tt.useState(o());if(Tt.useEffect(()=>{d(o())},[a,r]),!r)return null;const g=T=>{const{name:w,value:j}=T.target;d(K=>({...K,[w]:j}))},_=T=>{let w=T.target.value.replace(/[^0-9]/g,"");w.length>3&&w.length<=7?w=`${w.slice(0,3)}-${w.slice(3)}`:w.length>7&&(w=`${w.slice(0,3)}-${w.slice(3,7)}-${w.slice(7,11)}`),d(j=>({...j,phone:w}))},y=()=>{const T={...h,id:h.id||Bi(),hopefulDeposit:parseInt(h.hopefulDeposit,10)||0,hopefulMonthlyRent:parseInt(h.hopefulMonthlyRent,10)||0};OE(T)&&(i(T),e())};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",paddingBottom:"10px"},children:[p.jsx("h3",{children:a?"고객 수정":"고객 추가"}),p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:"경로"}),p.jsx("select",{name:"source",value:h.source,onChange:g,style:{fontSize:"14px"},children:vy.map(T=>p.jsx("option",{value:T,children:T},T))}),p.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:"종류"}),p.jsx("select",{name:"propertyType",value:h.propertyType,onChange:g,style:{fontSize:"14px"},children:Ey.map(T=>p.jsx("option",{value:T,children:T},T))}),p.jsx("button",{onClick:e,className:"btn-close",children:"✕"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"고객명 *"}),p.jsx("input",{type:"text",name:"name",value:h.name,onChange:g,placeholder:"성별 선호매물 특징",required:!0})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:_,placeholder:"010-xxxx-xxxx"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"입주희망일"}),p.jsx("input",{type:"date",name:"moveInDate",value:h.moveInDate,onChange:g})]})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"희망보증금 (만원)"}),p.jsx("input",{type:"number",name:"hopefulDeposit",value:h.hopefulDeposit,onChange:g})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"희망월세 (만원)"}),p.jsx("input",{type:"number",name:"hopefulMonthlyRent",value:h.hopefulMonthlyRent,onChange:g})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"금액 지역 입주시기 상세정보"}),p.jsx("textarea",{name:"preferredArea",value:h.preferredArea,onChange:g,rows:"2"})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:e,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:y,className:"btn-primary",children:"저장"})]})]})})},UE=({customer:r,onUpdateCustomer:e,activities:i=[],meetings:a=[],onTabChange:o})=>{if(!r)return null;const h=i.filter(z=>z.customerId===r.id).sort((z,it)=>new Date(it.date)-new Date(z.date)),d=a.filter(z=>z.customerId===r.id).sort((z,it)=>new Date(it.date)-new Date(z.date)),g=h.slice(0,3),_=d.slice(0,3),y=d.find(z=>new Date(z.date)>new Date),T=z=>{const H=new Date().toISOString().slice(0,10);return z.slice(0,10)===H},w=()=>{if(!r.createdAt)return null;const z=new Date(r.createdAt),H=new Date-z;return Math.floor(H/(1e3*60*60*24))},j=()=>{if(d.length===0)return null;const z=d[0],it=new Date(z.date),H=new Date,et=new Date(it.getFullYear(),it.getMonth(),it.getDate()),ft=new Date(H.getFullYear(),H.getMonth(),H.getDate()),yt=et-ft,gt=Math.floor(yt/(1e3*60*60*24));return gt>0?{type:"upcoming",days:gt}:gt===0?{type:"today",days:0}:{type:"past",days:Math.abs(gt)}},K=(z,it=40)=>z?z.length>it?z.slice(0,it)+"...":z:"-";return p.jsx("div",{className:"basic-info-container",children:p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px",margin:"15px"},children:[p.jsxs("div",{onClick:()=>o&&o("활동 내역"),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:z=>{z.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",z.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:z=>{z.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",z.currentTarget.style.transform="translateY(0)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[p.jsx("span",{style:{fontSize:"20px"},children:"📊"}),p.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:"활동 내역"}),w()!==null&&p.jsxs("span",{style:{fontSize:"12px",color:"#fff",backgroundColor:"#9c27b0",padding:"2px 8px",borderRadius:"12px",fontWeight:"bold",marginLeft:"auto"},children:["+",w(),"일"]})]}),p.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:["총 ",p.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:h.length}),"건의 활동",h.length>0&&p.jsxs("span",{style:{color:"#888",marginLeft:"8px"},children:["(최근: ",h[0].date,")"]})]}),g.length>0?p.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:g.map((z,it)=>{const H=T(z.date);return p.jsxs("div",{style:{padding:"6px 0",borderTop:it>0?"1px solid #f0f0f0":"none",color:H?"#d32f2f":"#555",fontWeight:H?"bold":"normal",backgroundColor:H?"rgba(211, 47, 47, 0.05)":"transparent",paddingLeft:H?"8px":"0px",borderRadius:H?"4px":"0px"},children:[p.jsx("span",{style:{color:H?"#d32f2f":"#999",marginRight:"4px"},children:z.date}),K(z.content,30)]},it)})}):p.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:"활동이 없습니다"})]}),p.jsxs("div",{onClick:()=>o&&o("미팅 내역"),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:z=>{z.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",z.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:z=>{z.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",z.currentTarget.style.transform="translateY(0)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[p.jsx("span",{style:{fontSize:"20px"},children:"📅"}),p.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:"미팅 내역"}),j()&&p.jsxs("span",{style:{fontSize:"12px",color:"#fff",backgroundColor:"#9c27b0",padding:"2px 8px",borderRadius:"12px",fontWeight:"bold",marginLeft:"auto"},children:[j().type==="upcoming"&&`${j().days}일 남음`,j().type==="today"&&"오늘",j().type==="past"&&`+${j().days}일`]})]}),p.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:["총 ",p.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:d.length}),"건의 미팅",y&&p.jsxs("span",{style:{color:"#16a085",marginLeft:"8px",fontWeight:"bold"},children:["(다음: ",y.date.slice(0,10),")"]})]}),_.length>0?p.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:_.map((z,it)=>{const H=T(z.date);return p.jsxs("div",{style:{padding:"6px 0",borderTop:it>0?"1px solid #f0f0f0":"none",color:H?"#d32f2f":"#555",fontWeight:H?"bold":"normal",backgroundColor:H?"rgba(211, 47, 47, 0.05)":"transparent",paddingLeft:H?"8px":"0px",borderRadius:H?"4px":"0px"},children:[p.jsx("span",{style:{color:H?"#d32f2f":"#999",marginRight:"4px"},children:z.date.slice(0,10)}),p.jsxs("span",{style:{color:H?"#d32f2f":"#2196F3",fontWeight:"bold"},children:[z.properties?.length||0,"개 매물"]})]},it)})}):p.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:"미팅이 없습니다"})]})]})})},LE=({customer:r,onUpdateCustomer:e})=>{const[i,a]=Tt.useState(!1),[o,h]=Tt.useState(()=>{const y=r?.memo||"",T=r?.preferredArea||"";return y&&!T?y:y&&T?`${T}

${y}`:T});if(!r)return null;Tt.useEffect(()=>{const y=r.memo||"",T=r.preferredArea||"";h(y&&!T?y:y&&T?`${T}

${y}`:T),a(!1)},[r.id]);const d=()=>{e({...r,preferredArea:o,memo:""}),a(!1)},g=()=>{const y=r.memo||"",T=r.preferredArea||"";h(y&&!T?y:y&&T?`${T}

${y}`:T),a(!1)},_=y=>{y.key==="Enter"&&y.ctrlKey?d():y.key==="Escape"&&g()};return p.jsxs("div",{className:"info-section",style:{padding:"15px",backgroundColor:"#ffffff",border:"2px solid #ff69b4",borderRadius:"8px",marginBottom:"15px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",marginBottom:"12px",flexWrap:"wrap"},children:[p.jsx("h4",{style:{margin:0,color:"#ff1493",borderBottom:"2px solid #ff69b4",paddingBottom:"2px"},children:"기본 정보"}),p.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:"#000000",borderBottom:"2px solid #000000",paddingBottom:"2px"},children:r.name})]}),p.jsxs("div",{className:"info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"15px"},children:[p.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[p.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:"연락처"}),p.jsx("p",{style:{margin:0,fontWeight:"bold",color:"#2196F3"},children:p.jsx("a",{href:`sms:${r.phone}`,style:{color:"#2196F3",textDecoration:"none",cursor:"pointer"},children:r.phone})})]}),p.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[p.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:"입주희망일"}),p.jsx("p",{style:{margin:0,fontWeight:"bold"},children:r.moveInDate})]}),p.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[p.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:"희망보증금"}),p.jsx("p",{style:{margin:0,fontWeight:"bold"},children:r.hopefulDeposit?`${r.hopefulDeposit}만원`:"-"})]}),p.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[p.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:"희망월세"}),p.jsx("p",{style:{margin:0,fontWeight:"bold"},children:r.hopefulMonthlyRent?`${r.hopefulMonthlyRent}만원`:"-"})]})]}),p.jsxs("div",{style:{borderTop:"1px solid #f0f0f0",paddingTop:"12px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[p.jsx("h5",{style:{margin:0,color:"#ff1493",fontSize:"13px",fontWeight:"600"},children:"금액 지역 입주시기 선호매물"}),i&&p.jsxs("div",{style:{display:"flex",gap:"4px"},children:[p.jsx("button",{onClick:d,style:{padding:"4px 10px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px",fontWeight:"bold",whiteSpace:"nowrap"},children:"저장"}),p.jsx("button",{onClick:g,style:{padding:"4px 10px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px",fontWeight:"bold",whiteSpace:"nowrap"},children:"취소"})]})]}),i?p.jsx("textarea",{value:o,onChange:y=>h(y.target.value),onKeyDown:_,placeholder:"금액, 지역, 입주시기 등 상세정보를 입력하세요... (Ctrl+Enter로 저장, Esc로 취소)",style:{width:"100%",minHeight:"60px",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontFamily:"inherit",fontSize:"13px",resize:"vertical"},autoFocus:!0}):p.jsx("div",{onClick:()=>a(!0),style:{cursor:"pointer",padding:"8px",borderRadius:"4px",backgroundColor:"#fafafa",minHeight:"30px",display:"flex",alignItems:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",transition:"background-color 0.2s",fontSize:"13px",color:o?"#333":"#999"},onMouseEnter:y=>y.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:y=>y.currentTarget.style.backgroundColor="#fafafa",children:o||"(클릭하여 추가)"})]})]})},zE=({customerId:r,activities:e,onSaveActivity:i,onDeleteActivity:a})=>{const[o,h]=Tt.useState(!1),[d,g]=Tt.useState(null),[_,y]=Tt.useState(null),[T,w]=Tt.useState({visible:!1,x:0,y:0,selectedActivity:null}),j=e.filter(S=>S.customerId===r).sort((S,V)=>new Date(V.date)-new Date(S.date)),K=S=>{i(S),h(!1),g(null)},z=(S,V)=>{S.preventDefault(),w({visible:!0,x:S.pageX,y:S.pageY,selectedActivity:V})},it=()=>{w({...T,visible:!1})},H=()=>{T.selectedActivity&&g(T.selectedActivity),it()},et=()=>{T.selectedActivity&&a(T.selectedActivity.id),it()},ft=S=>{if(!S)return"";if(S.includes(" ")){const V=S.split(" "),N=V[0].slice(5),C=V[1];return`${N} ${C}`}return S.length===10?S.slice(5,10):S},yt=S=>S.followUps&&S.followUps.length>0?[...S.followUps].sort((N,C)=>new Date(C.date)-new Date(N.date))[0].content:"",gt=S=>{const N=new Date().toISOString().slice(0,10);return S.slice(0,10)===N},vt=(S,V=50)=>S?S.length>V?S.slice(0,V)+"...":S:"-",st=({activity:S,onClose:V})=>{const[N,C]=Tt.useState(S.followUps||[]),[A,Et]=Tt.useState(null),[_t,O]=Tt.useState(""),[tt,ut]=Tt.useState("상황기록"),[pt,I]=Tt.useState(null),Z=()=>{if(!_t.trim())return;const P={id:Bi(),date:new Date().toISOString(),content:_t,author:tt,createdAt:new Date().toISOString()},J=[...N,P],nt={...S,followUps:J};K(nt),C(J),O(""),ut("상황기록")},L=P=>{P.key==="Enter"&&P.ctrlKey&&Z()},k=P=>{if(confirm("이 후속 기록을 삭제하시겠습니까?")){const J=N.filter(ct=>ct.id!==P),nt={...S,followUps:J};K(nt),C(J)}},Y=(P,J)=>{const nt=N.map(St=>St.id===P?{...St,content:J}:St),ct={...S,followUps:nt};K(ct),C(nt),Et(null)},B=[...N].sort((P,J)=>new Date(J.date)-new Date(P.date));return p.jsx("div",{className:"modal-overlay",onClick:V,children:p.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),style:{maxWidth:"700px"},children:[p.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("h3",{style:{margin:0},children:"활동 상세"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[p.jsx("span",{style:{fontSize:"16px",color:"#2c3e50",fontWeight:"500"},children:S.date}),p.jsx("button",{className:"btn-close",onClick:V,children:"×"})]})]}),p.jsxs("div",{style:{padding:"20px 0"},children:[p.jsx("div",{style:{marginBottom:"25px"},children:p.jsx("p",{style:{margin:0,fontSize:"16px",whiteSpace:"pre-line",lineHeight:"1.6",fontWeight:"bold"},children:S.content})}),p.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px",marginBottom:"25px"},children:[p.jsx("div",{style:{marginBottom:"15px"},children:p.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["📝 후속 기록 (",N.length,")"]})}),p.jsxs("div",{style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"5px",padding:"10px",marginBottom:"15px"},children:[p.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[p.jsx("input",{type:"radio",name:"author",value:"나",checked:tt==="나",onChange:P=>ut(P.target.value),style:{cursor:"pointer"}}),p.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:tt==="나"?"#2196F3":"#999",padding:"4px 10px",backgroundColor:tt==="나"?"#e3f2fd":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:"나"})]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[p.jsx("input",{type:"radio",name:"author",value:"답장",checked:tt==="답장",onChange:P=>ut(P.target.value),style:{cursor:"pointer"}}),p.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:tt==="답장"?"#9c27b0":"#999",padding:"4px 10px",backgroundColor:tt==="답장"?"#f3e5f5":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:"답장"})]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[p.jsx("input",{type:"radio",name:"author",value:"상황기록",checked:tt==="상황기록",onChange:P=>ut(P.target.value),style:{cursor:"pointer"}}),p.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:tt==="상황기록"?"#ff9800":"#999",padding:"4px 10px",backgroundColor:tt==="상황기록"?"#fff3e0":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:"상황기록"})]})]}),p.jsx("textarea",{value:_t,onChange:P=>O(P.target.value),onKeyDown:L,placeholder:"후속 기록을 입력하세요... (Ctrl+Enter로 입력)",style:{width:"100%",padding:"8px",minHeight:"60px",border:"none",outline:"none",resize:"vertical",fontFamily:"inherit"}}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"8px"},children:[p.jsx("button",{onClick:Z,className:"btn-primary",style:{fontSize:"12px",padding:"6px 16px"},children:"입력"}),p.jsx("button",{onClick:()=>{O(""),ut("상황기록")},style:{fontSize:"12px",padding:"6px 16px",backgroundColor:"#f5f5f5",color:"#666",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"초기화"})]})]}),B.length>0?B.map(P=>{let J,nt,ct;P.author==="나"?(J="#2196F3",nt="#e3f2fd",ct="#2196F3"):P.author==="답장"?(J="#9c27b0",nt="#f3e5f5",ct="#9c27b0"):(J="#ff9800",nt="#fff3e0",ct="#ff9800");const St=P.author==="고객"?"답장":P.author;return p.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"5px",marginBottom:"10px",borderLeft:`3px solid ${ct}`},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:J,backgroundColor:nt,padding:"2px 8px",borderRadius:"3px"},children:St||"기록"}),p.jsx("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:P_(P.date)})]}),p.jsxs("div",{style:{display:"flex",gap:"5px"},children:[p.jsx("button",{onClick:()=>Et(P.id),style:{fontSize:"11px",padding:"3px 8px"},children:"수정"}),p.jsx("button",{onClick:()=>k(P.id),className:"btn-secondary",style:{fontSize:"11px",padding:"3px 8px"},children:"삭제"})]})]}),A===P.id?p.jsx("div",{children:p.jsx("textarea",{defaultValue:P.content,onBlur:dt=>Y(P.id,dt.target.value),style:{width:"100%",padding:"8px",minHeight:"60px"},autoFocus:!0})}):p.jsx("p",{style:{margin:0,fontSize:"14px",whiteSpace:"pre-line",lineHeight:"1.5"},children:P.content})]},P.id)}):p.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"후속 기록이 없습니다."})]}),S.images&&S.images.length>0&&p.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px"},children:[p.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["첨부 이미지 (",S.images.length,")"]}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px",marginTop:"10px"},children:S.images.map((P,J)=>p.jsx("div",{style:{position:"relative"},children:p.jsx("img",{src:P.url,alt:`활동 이미지 ${J+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"5px",cursor:"pointer",border:"1px solid #e0e0e0"},onClick:()=>I(P.url)})},J))})]}),pt&&p.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},onClick:()=>I(null),children:[p.jsx("img",{src:pt,alt:"확대 이미지",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain"},onClick:P=>P.stopPropagation()}),p.jsx("button",{onClick:()=>I(null),style:{position:"absolute",top:"20px",right:"20px",background:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"24px",cursor:"pointer",color:"#333"},children:"×"})]})]}),p.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("button",{onClick:()=>{confirm("이 활동을 삭제하시겠습니까?")&&(a(S.id),V())},className:"btn-secondary",style:{backgroundColor:"#f44336"},children:"삭제"}),p.jsxs("div",{style:{display:"flex",gap:"10px"},children:[p.jsx("button",{onClick:V,className:"btn-secondary",children:"닫기"}),p.jsx("button",{onClick:()=>{g(S),V()},className:"btn-primary",children:"수정"})]})]})]})})},D=({activity:S,onCancel:V})=>{const N=()=>{if(S&&S.date)return S.date;const Z=new Date,L=Z.getFullYear(),k=String(Z.getMonth()+1).padStart(2,"0"),Y=String(Z.getDate()).padStart(2,"0"),B=String(Z.getHours()).padStart(2,"0"),P=String(Z.getMinutes()).padStart(2,"0");return`${L}-${k}-${Y} ${B}:${P}`},[C,A]=Tt.useState(S||{date:N(),content:"",images:[]}),[Et,_t]=Tt.useState(!1),O=Z=>{const{name:L,value:k}=Z.target;A(Y=>({...Y,[L]:k}))},tt=Z=>new Promise((L,k)=>{const Y=new FileReader;Y.onload=()=>L(Y.result),Y.onerror=k,Y.readAsDataURL(Z)}),ut=async Z=>{const L=Array.from(Z.target.files);if(L.length===0)return;_t(!0);const k=[];for(const Y of L){if(!Y.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다.");continue}if(Y.size>1024*1024){alert(`${Y.name}은(는) 1MB보다 큽니다. 더 작은 이미지를 사용해주세요.`);continue}try{const B=await tt(Y);k.push({url:B,name:Y.name})}catch(B){console.error("이미지 변환 실패:",B),alert("이미지 처리에 실패했습니다.")}}A(Y=>({...Y,images:[...Y.images||[],...k]})),_t(!1),Z.target.value=""},pt=Z=>{A(L=>({...L,images:L.images.filter((k,Y)=>Y!==Z)}))},I=()=>{const Z={...C,id:C.id||Bi(),customerId:r,date:C.date};K(Z)};return p.jsx("div",{className:"modal-overlay",onClick:V,children:p.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("h3",{style:{margin:0},children:"활동 기록"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[p.jsx("input",{type:"text",name:"date",value:C.date,onChange:O,placeholder:"YYYY-MM-DD HH:mm",style:{padding:"6px 8px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",width:"160px"}}),p.jsx("button",{className:"btn-close",onClick:V,children:"×"})]})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1",display:"none"},children:[p.jsx("label",{children:"활동일 *"}),p.jsx("input",{type:"date",name:"date",value:C.date,onChange:O})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"활동 내용 *"}),p.jsx("textarea",{name:"content",value:C.content,onChange:O,placeholder:`활동 내용을 자유롭게 입력하세요
예: 전화 통화, 매물 3개 제안함`})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"이미지 첨부"}),p.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,onChange:ut,disabled:Et}),Et&&p.jsx("p",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:"업로드 중..."}),C.images&&C.images.length>0&&p.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",marginTop:"10px"},children:C.images.map((Z,L)=>p.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[p.jsx("img",{src:Z.url,alt:`첨부 ${L+1}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}),p.jsx("button",{type:"button",onClick:()=>pt(L),style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",cursor:"pointer",padding:0},children:"×"})]},L))})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:V,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:I,className:"btn-primary",disabled:Et,children:"저장"})]})]})})},R=_?j.find(S=>S.id===_.id):null;return p.jsxs("div",{className:"activity-tab",children:[p.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!o&&!d&&p.jsx("button",{onClick:()=>h(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 활동 추가"})}),o&&p.jsx(D,{onCancel:()=>h(!1)}),d?p.jsx(D,{activity:d,onCancel:()=>g(null)}):j.length>0?p.jsx("div",{onClick:it,children:p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{style:{width:"80px"},children:"활동일"}),p.jsx("th",{style:{width:"360px"},children:"활동 내용"}),p.jsx("th",{style:{width:"720px"},children:"후속기록"})]})}),p.jsx("tbody",{children:j.map(S=>{const V=gt(S.date);return p.jsxs("tr",{onContextMenu:N=>z(N,S),style:{cursor:"context-menu",backgroundColor:V?"rgba(211, 47, 47, 0.08)":"transparent",color:V?"#d32f2f":"inherit",fontWeight:V?"bold":"normal"},children:[p.jsx("td",{style:{fontSize:"13px",color:V?"#d32f2f":"inherit"},children:ft(S.date)}),p.jsxs("td",{onClick:()=>y(S),style:{cursor:"pointer",fontSize:"13px",width:"360px",maxWidth:"360px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:V?"#d32f2f":"inherit"},title:S.content,children:[vt(S.content||"",30),S.followUps&&S.followUps.length>0&&p.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:V?"#d32f2f":"#7f8c8d"},children:["💬",S.followUps.length]}),S.images&&S.images.length>0&&p.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:V?"#d32f2f":"#7f8c8d"},children:["📷",S.images.length]})]}),p.jsx("td",{onClick:()=>y(S),style:{cursor:"pointer",fontSize:"13px",width:"720px",maxWidth:"720px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:V?"#d32f2f":"inherit"},title:yt(S),children:S.followUps&&S.followUps.length>0&&(()=>{const N=S.followUps[S.followUps.length-1];let C,A;return N.author==="나"?(C="#2196F3",A="#e3f2fd"):N.author==="답장"?(C="#9c27b0",A="#f3e5f5"):(C="#ff9800",A="#fff3e0"),p.jsxs(p.Fragment,{children:[p.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:C,backgroundColor:A,padding:"2px 6px",borderRadius:"3px",marginRight:"6px"},children:N.author||"기록"}),p.jsxs("span",{style:{fontSize:"12px",color:V?"#d32f2f":"#7f8c8d"},children:["(",S.followUps.length,")"]})]})})()})]},S.id)})})]})}):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 활동이 없습니다."}),R&&p.jsx(st,{activity:R,onClose:()=>y(null)}),T.visible&&p.jsx("div",{style:{top:T.y,left:T.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:p.jsxs("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:[p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:H,children:"수정"}),p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:et,children:"삭제"}),p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:it,children:"취소"})]})})]})},BE=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");return e.length>=2?e[1].trim():""},qE=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");return e.length>=7?e[6].trim():""},_d=r=>{if(!r)return"";const e=r.split(`
`);let i=-1;for(let a=0;a<e.length;a++)if(e[a].match(/공인중개사.*사무소|중개법인/)){i=a;break}if(i>=0&&i<e.length-1)for(let a=i+1;a<Math.min(i+10,e.length);a++){const o=e[a];if(o.match(/관리소|관리팀|관리사무소/i))continue;const h=/(전\s*화\s*번\s*호|전화번호)\s*([\d\-]+)/,d=o.match(h);if(d)return d[2].trim().split(",")[0].trim()}return""},HE=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");return e.length>0?e[0].trim():""},FE=r=>{if(!r)return"";const e=r.split(`
`);for(let i=0;i<e.length;i++)if(e[i].includes("중개사")&&i+1<e.length){const a=e[i+1].trim();if(a&&!a.includes("대표")&&!a.includes("등록"))return a}return""},GE=r=>{if(!r)return"";const e=/전화([\d\-,\s]+)(?:최근|$)/,i=r.match(e);if(i){const a=i[1].trim(),o=a.match(/(02[-\s]?\d{3,4}[-\s]?\d{4})/);if(o)return o[1].replace(/\s/g,"");const h=a.match(/(\d{2,3}[-\s]?\d{3,4}[-\s]?\d{4})/);if(h)return h[1].replace(/\s/g,"");const d=a.match(/(010[-\s]?\d{4}[-\s]?\d{4})/);if(d)return d[1].replace(/\s/g,"")}return""},Da=(r,e="TEN")=>{if(!r)return{propertyName:"",agencyName:"",contactNumber:""};const i=r.split(`
`).filter(o=>o.trim()!=="");if(i.some(o=>o.includes("소재지:"))){let o="",h="",d="";for(const g of i)if(g.includes("소재지:")){const _=g.match(/소재지:\s*(.+?)\(/);_&&(o=_[1].trim())}else if(g.includes("부동산:"))h=g.replace("부동산:","").trim();else if(g.includes("연락처:")&&!g.match(/\b(팩스|fax|FAX|관리소|관리팀|관리사무소)\b/i)){const _=g.match(/연락처:\s*([\d\-]+)/);_&&(d=_[1].trim())}return{propertyName:o,agencyName:h,contactNumber:d}}else return e==="네이버부동산"?{propertyName:HE(r),agencyName:FE(r),contactNumber:GE(r)}:{propertyName:BE(r),agencyName:qE(r),contactNumber:_d(r)}},YE=r=>r.includes("계약/전용면적")||r.includes("해당층/총층")||r.includes("매물특징"),QE=r=>{let e="🏠 매물정보",i="";const a=r.split(`
`).filter(st=>st.trim());if(a.length>0){const D=a[0].trim().replace(/\s*\d+동\s*(저층|고층|중층)?.*$/,"").trim();D&&(i=`• 소재지: ${D}`)}let o="";const h=r.match(/(월세|전세|매매)(\d+)\/(\d+)|월세(\d+)/);if(h)if(h[1]==="월세"&&h[2]&&h[3]){const st=h[2],D=h[3];o=`• 임대료: ${st}/${D}`}else h[1]==="전세"&&h[2]?o=`• 임대료: ${h[2]}`:h[1]==="매매"&&h[2]&&(o=`• 임대료: ${h[2]}`);let d="";const g=r.match(/계약\/전용면적\s*([\d.]+)㎡\/([\d.]+)㎡/),_=r.match(/방수\/욕실수\s*(\d+)\/(\d+)/);if(g&&_){const st=parseFloat(g[1]),D=parseFloat(g[2]),R=Math.min(st,D),S=_[1],V=_[2],N=(R/3.3).toFixed(1);d=`• 구조정보: ${R}㎡ (전용${N}평)/방${S},욕실${V}`}let y="";const T=a[0]?.match(/(\d+)동/),w=r.match(/해당층\/총층\s*([^/]+)\/(\d+)층/);if(T&&w){const st=T[1],D=w[1].trim();y=`• 동/층: ${st}동/${D}`}let j="",K=[];const z=r.match(/매물특징\s*(.+?)(?=계약\/전용면적|해당층|방향|$)/);if(z){const st=z[1].trim();st&&K.push(st)}const it=r.match(/방향\s*(.+?)(?=난방|$)/);if(it){const st=it[1].trim();st&&K.push(st)}const H=r.match(/입주가능일\s*(.+?)(?=총주차|$)/);if(H){const st=H[1].trim();st&&K.push(st)}K.length>0&&(j=`• 특징: ${K.join(" | ")}`);let et="",ft=r.match(/중개사\s*(.+?공인중개사사무소)/);ft||(ft=r.match(/중개[사법인]*\s*(.+?중개법인)/)),ft&&(et=`• 부동산: ${ft[1].trim()}`);let yt="";const gt=_d(r);return gt&&(yt=`• 연락처: ${gt}`),[e,i,o,d,y,j,et,yt].filter(st=>st!=="").join(`
`)},KE=r=>{let e="🏠 매물정보",i="";const a=r.match(/물\s*건\s*명\s*(.+?)(?=건축|$)/s),o=r.match(/소\s*재\s*지\s*(.+?)(?=공개여부|대\s*분|$)/);if(a&&o){const st=a[1].trim().split(`
`)[0].trim(),D=o[1].trim().split(/\s+/)[0];i=`• 소재지: ${st}(${D})`}else a&&(i=`• 소재지: ${a[1].trim().split(`
`)[0].trim()}`);let h="",d=r.match(/현\s*보\s*증\s*금\s*([0-9,]+)/),g=r.match(/현\s*월\s*세\s*([0-9,]+)/);if(d||(d=r.match(/보\s*증\s*금\s*([0-9,]+)/)),g||(g=r.match(/월\s*세\s*([0-9,]+)/)),d&&g){const st=d[1].trim(),D=g[1].trim();h=`• 임대료: ${st}/${D}`}let _="";const y=r.match(/전용면적[\s(]*([0-9.]+)[\s)]*[\s]*([0-9.]*)/);let T=null;if(y){const st=parseFloat(y[1]);if(y[2]&&y[2].trim()){const D=parseFloat(y[2].trim());T=Math.min(st,D)}else T=st}const w=r.match(/방\s*수\s*(\d+)/),j=r.match(/욕\s*실\s*수\s*(\d+)/);if(T!==null){const st=w?w[1].trim():"0",D=j?j[1].trim():"0",R=(T/3.3).toFixed(1);_=`• 구조정보: ${T}㎡ (전용${R}평)/방${st},욕실${D}`}let K="",z=r.match(/(\d+)동\s*\[(\d+)\s*\/\s*(\d+)\]/);if(z){const st=z[1],D=z[2];K=`• 동/층: ${st}동/${D}층`}else if(z=r.match(/(\d+)동\s*\[([^\]]+)\]/),z){const st=z[1],D=z[2].trim();K=`• 동/층: ${st}동/${D}`}let it="";const H=r.match(/공개비고\s*(.+?)(?=매물메모|비고|복도구조|$)/s);if(H){const st=H[1].trim().replace(/\s+/g," ");st&&(it=`• 특징: ${st}`)}let et="",ft=r.match(/(.+?공인중개사.*?사무소)/);ft||(ft=r.match(/(.+?중개법인)/)),ft&&(et=`• 부동산: ${ft[1].trim()}`);let yt="";const gt=_d(r);return gt&&(yt=`• 연락처: ${gt}`),[e,i,h,_,K,it,et,yt].filter(st=>st!=="").join(`
`)},Ty=r=>r?YE(r)?QE(r):KE(r):"",XE=({customerId:r,customerName:e,meetings:i,onSaveMeeting:a,onDeleteMeeting:o,initialProperties:h,onClearInitialProperties:d})=>{const[g,_]=Tt.useState(!1),[y,T]=Tt.useState(null),[w,j]=Tt.useState(null),[K,z]=Tt.useState(null);Tt.useEffect(()=>{h&&h.length>0&&(z(h),_(!0),d&&d())},[h,d]);const it=C=>{const Et=new Date().toISOString().slice(0,10);return C.slice(0,10)===Et},H=i.filter(C=>C.customerId===r),et=({onCancel:C,meetingData:A,initialPropertiesData:Et})=>{const _t=()=>{if(A){const P=A.date||new Date().toISOString().slice(0,16);return{...A,date:P.slice(0,10),time:A.time||P.slice(11,16)}}return{date:new Date().toISOString().slice(0,10),time:"12:00",properties:Et||[]}},[O,tt]=Tt.useState(_t()),[ut,pt]=Tt.useState(!1),[I,Z]=Tt.useState(null),L=P=>{tt({...O,[P.target.name]:P.target.value})},k=P=>{if(confirm("정말 이 매물을 삭제하시겠습니까?")){const J=O.properties.filter((nt,ct)=>ct!==P);tt({...O,properties:J})}},Y=()=>{const P={...O,id:O.id||Bi(),customerId:r,date:`${O.date}T${O.time}:00`};a(P),_(!1),T(null),C()},B=({onClose:P,propertyToEdit:J,editIndex:nt})=>{const[ct,St]=Tt.useState(J||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",status:Vn[0]}),[dt,kt]=Tt.useState("TEN"),Ct=Vt=>{const Xn=Vt.target.value,{propertyName:Oe,agencyName:kr,contactNumber:ye}=Da(Xn,dt);St({...ct,info:Xn,roomName:Oe||ct.roomName,agency:kr||ct.agency,agencyPhone:ye||ct.agencyPhone})},At=()=>{if(nt!=null){const Vt=[...O.properties];Vt[nt]={...ct},tt({...O,properties:Vt})}else tt({...O,properties:[...O.properties,{...ct,id:Bi()}]});P()};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:Vt=>Vt.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:nt!=null?"매물 수정":"매물 추가"}),p.jsx("button",{className:"btn-close",onClick:P,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[p.jsx("label",{style:{margin:0},children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[p.jsx("button",{onClick:()=>kt("TEN"),style:{padding:"6px 14px",backgroundColor:dt==="TEN"?"#2196F3":"transparent",color:dt==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:Vt=>{dt!=="TEN"&&(Vt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:Vt=>{dt!=="TEN"&&(Vt.target.style.backgroundColor="transparent")},children:"TEN"}),p.jsx("button",{onClick:()=>kt("네이버부동산"),style:{padding:"6px 14px",backgroundColor:dt==="네이버부동산"?"#2196F3":"transparent",color:dt==="네이버부동산"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:Vt=>{dt!=="네이버부동산"&&(Vt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:Vt=>{dt!=="네이버부동산"&&(Vt.target.style.backgroundColor="transparent")},children:"네이버부동산"})]})]}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:ct.info,onChange:Ct}),p.jsx("p",{className:"form-hint",children:dt==="TEN"?"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다.":"매물 정보를 붙여넣으면 첫 줄이 호실명, 중개사 섹션의 부동산명, 전화 라벨 뒤의 연락처가 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:ct.roomName,onChange:Vt=>St({...ct,roomName:Vt.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:ct.agencyPhone,onChange:Vt=>St({...ct,agencyPhone:Vt.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"방문시간"}),p.jsx("input",{type:"time",value:ct.visitTime,onChange:Vt=>St({...ct,visitTime:Vt.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:ct.status,onChange:Vt=>St({...ct,status:Vt.target.value}),children:Vn.map(Vt=>p.jsx("option",{value:Vt,children:Vt},Vt))})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:ct.agency,onChange:Vt=>St({...ct,agency:Vt.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:P,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:At,className:"btn-primary",children:nt!=null?"수정":"추가"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["미팅 추가 - ",e?e.slice(0,30):""]}),p.jsx("button",{className:"btn-close",onClick:C,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"미팅 날짜"}),p.jsx("input",{type:"date",name:"date",value:O.date,onChange:L})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"미팅 시간"}),p.jsx("input",{type:"time",name:"time",value:O.time,onChange:L})]})]}),p.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:"매물 준비"}),O.properties.length===0?p.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"준비된 매물이 없습니다."}):O.properties.map((P,J)=>p.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",P.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${P.status}`,value:P.status,onChange:nt=>{const ct=[...O.properties];ct[J]={...ct[J],status:nt.target.value},tt({...O,properties:ct})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Vn.map(nt=>p.jsx("option",{value:nt,children:nt},nt))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:P.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",P.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",P.agencyPhone?p.jsx("a",{href:`sms:${P.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:P.agencyPhone}):""]}),p.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["🕐",p.jsx("input",{type:"time",value:P.visitTime||"",onChange:nt=>{const ct=[...O.properties];ct[J]={...ct[J],visitTime:nt.target.value},tt({...O,properties:ct})},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),"방문"]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>{Z(J),pt(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>k(J),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},P.id||J)),p.jsx("div",{style:{textAlign:"center",margin:"20px 0",borderTop:"1px dashed #ccc",paddingTop:"20px"},children:p.jsx("button",{onClick:()=>{Z(null),pt(!0)},className:"btn-primary",children:"+ 매물 추가"})}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:C,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:Y,className:"btn-primary",children:"저장"})]}),ut&&p.jsx(B,{onClose:()=>{pt(!1),Z(null)},propertyToEdit:I!==null?O.properties[I]:null,editIndex:I})]})})},ft=(C,A)=>{if(!C)return"";const Et=new Date(C),_t=Et.getMonth()+1,O=Et.getDate(),tt=Et.getHours();return`${_t}월${O}일 ${tt}시 (${A}개)`},yt=C=>{if(!C)return"";let A=C.trim();A=A.replace(/[\u{1F300}-\u{1F9FF}]/gu,"").trim(),A=A.replace(/[→↓↑←]/g,"").trim(),A=A.replace(/[^\w\s가-힣()]/g,"").trim();let _t=A.split("(")[0].trim();return _t=_t.replace(/서울시|부산시|대구시|인천시|광주시|대전시|울산시|세종시|경기도|강원도|충청북도|충청남도|전라북도|전라남도|경상북도|경상남도|제주도/g,"").trim(),_t=_t.replace(/[가-힣]+[구]/g,"").trim(),_t=_t.replace(/[가-힣]+[동로길]/g,"").trim(),_t=_t.replace(/\b\d+(-\d+)?\b/g,"").trim(),_t=_t.replace(/\s+/g," ").trim(),_t?_t.length>5?_t.substring(0,5)+"...":_t:"-"},gt=C=>!C||C.length===0?"-":C.map(Et=>yt(Et.roomName)).filter(Et=>Et).join(", ")||"-",[vt,st]=Tt.useState(null),[D,R]=Tt.useState(null),S=(C,A)=>{C.preventDefault(),R(A),st({x:C.clientX,y:C.clientY})},V=()=>{st(null),R(null)},N=({meeting:C,onClose:A})=>{const[Et,_t]=Tt.useState(null),[O,tt]=Tt.useState(!1),ut=C.properties?C.properties.map((k,Y)=>({prop:k,originalIndex:Y})).sort((k,Y)=>k.prop.visitTime?Y.prop.visitTime?k.prop.visitTime.localeCompare(Y.prop.visitTime):-1:1):[],pt=k=>{_t(k),tt(!0)},I=k=>{if(confirm("이 매물을 삭제하시겠습니까?")){const Y=C.properties.filter((P,J)=>J!==k),B={...C,properties:Y};a(B),j(B)}},Z=(k,Y)=>{const B=[...C.properties];Y!=null?B[Y]=k:B.push({...k,id:Bi()});const P={...C,properties:B};a(P),j(P),tt(!1),_t(null)},L=({propertyToEdit:k,editIndex:Y,onClose:B})=>{const[P,J]=Tt.useState(k||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",status:Vn[0]}),[nt,ct]=Tt.useState("TEN"),St=dt=>{const kt=dt.target.value,{propertyName:Ct,agencyName:At,contactNumber:Vt}=Da(kt,nt);J({...P,info:kt,roomName:Ct||P.roomName,agency:At||P.agency,agencyPhone:Vt||P.agencyPhone})};return p.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:p.jsxs("div",{className:"modal-content",onClick:dt=>dt.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"매물 수정"}),p.jsx("button",{className:"btn-close",onClick:B,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[p.jsx("label",{style:{margin:0},children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[p.jsx("button",{onClick:()=>ct("TEN"),style:{padding:"6px 14px",backgroundColor:nt==="TEN"?"#2196F3":"transparent",color:nt==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:dt=>{nt!=="TEN"&&(dt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:dt=>{nt!=="TEN"&&(dt.target.style.backgroundColor="transparent")},children:"TEN"}),p.jsx("button",{onClick:()=>ct("네이버부동산"),style:{padding:"6px 14px",backgroundColor:nt==="네이버부동산"?"#2196F3":"transparent",color:nt==="네이버부동산"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:dt=>{nt!=="네이버부동산"&&(dt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:dt=>{nt!=="네이버부동산"&&(dt.target.style.backgroundColor="transparent")},children:"네이버부동산"})]})]}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:P.info,onChange:St}),p.jsx("p",{className:"form-hint",children:nt==="TEN"?"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다.":"매물 정보를 붙여넣으면 첫 줄이 호실명, 중개사 섹션의 부동산명, 전화 라벨 뒤의 연락처가 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:P.roomName,onChange:dt=>J({...P,roomName:dt.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:P.agencyPhone,onChange:dt=>J({...P,agencyPhone:dt.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"방문시간"}),p.jsx("input",{type:"time",value:P.visitTime,onChange:dt=>J({...P,visitTime:dt.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:P.status,onChange:dt=>J({...P,status:dt.target.value}),children:Vn.map(dt=>p.jsx("option",{value:dt,children:dt},dt))})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:P.agency,onChange:dt=>J({...P,agency:dt.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:B,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:()=>Z(P,Y),className:"btn-primary",children:"수정"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["미팅 매물 - ",P_(C.date)]}),p.jsx("button",{className:"btn-close",onClick:A,children:"×"})]}),p.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:ut.length>0?ut.map(({prop:k,originalIndex:Y})=>p.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",k.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${k.status}`,value:k.status,onChange:B=>{const P=[...C.properties];P[Y]={...P[Y],status:B.target.value};const J={...C,properties:P};a(J),j(J)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Vn.map(B=>p.jsx("option",{value:B,children:B},B))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:k.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",k.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",k.agencyPhone?p.jsx("a",{href:`sms:${k.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:k.agencyPhone}):""]}),p.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["🕐",p.jsx("input",{type:"time",value:k.visitTime||"",onChange:B=>{const P=[...C.properties];P[Y]={...P[Y],visitTime:B.target.value};const J={...C,properties:P};a(J),j(J)},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),"방문"]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>pt(Y),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>I(Y),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},k.id)):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 매물이 없습니다."})}),p.jsx("div",{className:"modal-footer",children:p.jsx("button",{onClick:A,className:"btn-primary",children:"닫기"})}),O&&p.jsx(L,{propertyToEdit:Et!==null?C.properties[Et]:null,editIndex:Et,onClose:()=>{tt(!1),_t(null)}})]})})};return p.jsxs("div",{className:"meeting-tab",children:[p.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!y&&p.jsx("button",{onClick:()=>_(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 미팅 추가"})}),g&&p.jsx(et,{onCancel:()=>{_(!1),z(null)},initialPropertiesData:K}),y?p.jsx(et,{meetingData:y,onCancel:()=>T(null)},y.id):H.length>0?p.jsxs(p.Fragment,{children:[p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"미팅일시"}),p.jsx("th",{children:"매물명"})]})}),p.jsx("tbody",{children:H.map(C=>{const A=it(C.date);return p.jsxs("tr",{style:{backgroundColor:A?"rgba(211, 47, 47, 0.08)":"transparent",color:A?"#d32f2f":"inherit",fontWeight:A?"bold":"normal",cursor:"context-menu"},onContextMenu:Et=>S(Et,C),children:[p.jsx("td",{style:{color:A?"#d32f2f":"inherit"},children:ft(C.date,C.properties?.length||0)}),p.jsx("td",{onClick:()=>j(C),style:{cursor:"pointer",color:A?"#d32f2f":"var(--primary-blue)",textDecoration:"underline",fontWeight:A?"bold":"normal"},children:gt(C.properties)})]},C.id)})})]}),vt&&D&&p.jsxs("div",{className:"context-menu",style:{position:"fixed",top:vt.y,left:vt.x,zIndex:1e3},children:[p.jsx("button",{className:"context-menu-item",onClick:()=>{T(D),V()},children:"수정"}),p.jsx("button",{className:"context-menu-item delete",onClick:()=>{o(D.id),V()},children:"삭제"})]}),vt&&p.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:V})]}):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 미팅이 없습니다."}),w&&p.jsx(N,{meeting:w,onClose:()=>j(null)})]})},$E=({customerId:r,customerName:e,propertySelections:i,onSavePropertySelection:a,onDeletePropertySelection:o,onTabChange:h,onCreateMeetingFromSelection:d})=>{const[g,_]=Tt.useState(!1),[y,T]=Tt.useState(null),[w,j]=Tt.useState(null),K=i.filter(et=>et.customerId===r).sort((et,ft)=>new Date(ft.createdAt)-new Date(et.createdAt)),z=({onCancel:et,selectionData:ft})=>{const yt=()=>ft?{...ft}:{properties:[]},[gt,vt]=Tt.useState(yt()),[st,D]=Tt.useState(!1),[R,S]=Tt.useState(null),V=A=>{if(confirm("정말 이 매물을 삭제하시겠습니까?")){const Et=gt.properties.filter((_t,O)=>O!==A);vt({...gt,properties:Et})}},N=()=>{const A={...gt,id:gt.id||Bi(),customerId:r,createdAt:gt.createdAt||new Date().toISOString()};a(A),_(!1),T(null),et()},C=({onClose:A,propertyToEdit:Et,editIndex:_t})=>{const[O,tt]=Tt.useState(Et||{roomName:"",agency:"",agencyPhone:"",info:"",status:Vn[0]}),[ut,pt]=Tt.useState("TEN"),I=k=>{const Y=k.target.value,{propertyName:B,agencyName:P,contactNumber:J}=Da(Y,ut);tt({...O,info:Y,roomName:B||O.roomName,agency:P||O.agency,agencyPhone:J||O.agencyPhone})},Z=()=>{const k=O.info,Y=Ty(k);if(!Y){alert("매물정보에서 필요한 데이터를 추출할 수 없습니다. 정보를 확인해주세요.");return}const B={...O,info:Y},{propertyName:P,agencyName:J,contactNumber:nt}=Da(Y);B.roomName=P||O.roomName,B.agency=J||O.agency,B.agencyPhone=nt||O.agencyPhone,tt(B)},L=()=>{if(_t!=null){const k=[...gt.properties];k[_t]={...O},vt({...gt,properties:k})}else vt({...gt,properties:[...gt.properties,{...O,id:Bi()}]});A()};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:_t!=null?"매물 수정":"매물 추가"}),p.jsx("button",{className:"btn-close",onClick:A,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[p.jsx("label",{style:{margin:0},children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[p.jsx("button",{onClick:()=>pt("TEN"),style:{padding:"6px 14px",backgroundColor:ut==="TEN"?"#2196F3":"transparent",color:ut==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:k=>{ut!=="TEN"&&(k.target.style.backgroundColor="#e0e0e0")},onMouseLeave:k=>{ut!=="TEN"&&(k.target.style.backgroundColor="transparent")},children:"TEN"}),p.jsx("button",{onClick:()=>pt("네이버부동산"),style:{padding:"6px 14px",backgroundColor:ut==="네이버부동산"?"#2196F3":"transparent",color:ut==="네이버부동산"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:k=>{ut!=="네이버부동산"&&(k.target.style.backgroundColor="#e0e0e0")},onMouseLeave:k=>{ut!=="네이버부동산"&&(k.target.style.backgroundColor="transparent")},children:"네이버부동산"})]})]}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:O.info,onChange:I}),p.jsx("button",{type:"button",onClick:Z,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:k=>k.target.style.backgroundColor="#F57C00",onMouseLeave:k=>k.target.style.backgroundColor="#FF9800",children:"⚡ 매물정보 자동 생성"}),p.jsx("p",{className:"form-hint",children:ut==="TEN"?"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다.":"매물 정보를 붙여넣으면 첫 줄이 호실명, 중개사 섹션의 부동산명, 전화 라벨 뒤의 연락처가 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:O.roomName,onChange:k=>tt({...O,roomName:k.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:O.status,onChange:k=>tt({...O,status:k.target.value}),children:Vn.map(k=>p.jsx("option",{value:k,children:k},k))})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:O.agency,onChange:k=>tt({...O,agency:k.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:O.agencyPhone,onChange:k=>tt({...O,agencyPhone:k.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:A,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:L,className:"btn-primary",children:_t!=null?"수정":"추가"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:A=>A.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["매물선정 - ",e?e.slice(0,30):""]}),p.jsx("button",{className:"btn-close",onClick:et,children:"×"})]}),p.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:"선정 매물"}),gt.properties.length===0?p.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"선정된 매물이 없습니다."}):gt.properties.map((A,Et)=>p.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",A.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${A.status}`,value:A.status,onChange:_t=>{const O=[...gt.properties];O[Et]={...O[Et],status:_t.target.value},vt({...gt,properties:O})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Vn.map(_t=>p.jsx("option",{value:_t,children:_t},_t))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:A.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",A.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",A.agencyPhone?p.jsx("a",{href:`sms:${A.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:A.agencyPhone}):""]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>{S(Et),D(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>V(Et),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},A.id||Et)),p.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px",marginTop:"20px",borderTop:"1px solid #e0e0e0",paddingTop:"15px"},children:[p.jsx("button",{onClick:et,className:"btn-secondary",children:"취소"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginLeft:"auto"},children:[p.jsx("button",{onClick:()=>{S(null),D(!0)},style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:A=>A.target.style.backgroundColor="#1976D2",onMouseLeave:A=>A.target.style.backgroundColor="#2196F3",children:"+ 매물 추가"}),p.jsx("button",{onClick:N,className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold"},children:"저장"})]})]}),st&&p.jsx(C,{onClose:()=>{D(!1),S(null)},propertyToEdit:R!==null?gt.properties[R]:null,editIndex:R})]})})},it=et=>et?new Date(et).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"",H=({selection:et,onClose:ft})=>{const[yt,gt]=Tt.useState(null),[vt,st]=Tt.useState(!1),[D,R]=Tt.useState(!1),S=O=>O.map(tt=>{const ut=tt.info.split(`
`).filter(pt=>pt.trim());return ut.length>1&&(ut.length>6&&ut.splice(6,1),ut.length>0&&ut.pop()),ut.join(`
`)}).join(`

`),V=()=>{if(et.properties.length===0){alert("매물을 먼저 추가해주세요.");return}d(et.properties),ft()},N=O=>{gt(O),st(!0)},C=O=>{if(confirm("이 매물을 삭제하시겠습니까?")){const tt=et.properties.filter((pt,I)=>I!==O),ut={...et,properties:tt};a(ut),j(ut)}},A=(O,tt)=>{const ut=[...et.properties];tt!=null?ut[tt]=O:ut.push({...O,id:Bi()});const pt={...et,properties:ut};a(pt),j(pt),st(!1),gt(null)},Et=({propertyToEdit:O,editIndex:tt,onClose:ut})=>{const[pt,I]=Tt.useState(O||{roomName:"",agency:"",agencyPhone:"",info:"",status:Vn[0]}),Z=k=>{const Y=k.target.value,{propertyName:B,agencyName:P,contactNumber:J}=Da(Y);I({...pt,info:Y,roomName:B||pt.roomName,agency:P||pt.agency,agencyPhone:J||pt.agencyPhone})},L=()=>{const k=pt.info,Y=Ty(k);if(!Y){alert("매물정보에서 필요한 데이터를 추출할 수 없습니다. 정보를 확인해주세요.");return}const B={...pt,info:Y},{propertyName:P,agencyName:J,contactNumber:nt}=Da(Y);B.roomName=P||pt.roomName,B.agency=J||pt.agency,B.agencyPhone=nt||pt.agencyPhone,I(B)};return p.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:p.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"매물 수정"}),p.jsx("button",{className:"btn-close",onClick:ut,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:pt.info,onChange:Z}),p.jsx("button",{type:"button",onClick:L,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:k=>k.target.style.backgroundColor="#F57C00",onMouseLeave:k=>k.target.style.backgroundColor="#FF9800",children:"⚡ 매물정보 자동 생성"}),p.jsx("p",{className:"form-hint",children:source==="TEN"?"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다.":"매물 정보를 붙여넣으면 첫 줄이 호실명, 중개사 섹션의 부동산명, 전화 라벨 뒤의 연락처가 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:pt.roomName,onChange:k=>I({...pt,roomName:k.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:pt.status,onChange:k=>I({...pt,status:k.target.value}),children:Vn.map(k=>p.jsx("option",{value:k,children:k},k))})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:pt.agency,onChange:k=>I({...pt,agency:k.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:pt.agencyPhone,onChange:k=>I({...pt,agencyPhone:k.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:ut,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:()=>A(pt,tt),className:"btn-primary",children:"수정"})]})]})})},_t=({onClose:O})=>{const[tt,ut]=Tt.useState(S(et.properties)),[pt,I]=Tt.useState(!1),Z=async()=>{try{await navigator.clipboard.writeText(tt),alert("보고서가 클립보드에 복사되었습니다!")}catch(L){alert("복사에 실패했습니다: "+L.message)}};return p.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:p.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),style:{maxWidth:"800px"},children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"매물 브리핑 보고서"}),p.jsx("button",{className:"btn-close",onClick:O,children:"×"})]}),p.jsx("div",{style:{padding:"20px"},children:pt?p.jsx("textarea",{value:tt,onChange:L=>ut(L.target.value),style:{width:"100%",minHeight:"400px",padding:"12px",fontSize:"14px",lineHeight:"1.6",border:"1px solid #e0e0e0",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}):p.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",fontSize:"14px",lineHeight:"1.6",maxHeight:"400px",overflowY:"auto",border:"1px solid #e0e0e0"},children:tt})}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:O,className:"btn-secondary",children:"닫기"}),p.jsx("button",{onClick:()=>I(!pt),className:"btn-primary",style:{marginLeft:"10px"},children:pt?"완료":"수정"}),p.jsx("button",{onClick:Z,className:"btn-primary",style:{marginLeft:"10px"},children:"복사"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["선정 매물 - ",it(et.createdAt)]}),p.jsx("button",{className:"btn-close",onClick:ft,children:"×"})]}),p.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:et.properties&&et.properties.length>0?et.properties.map((O,tt)=>p.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",O.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${O.status}`,value:O.status,onChange:ut=>{const pt=[...et.properties];pt[tt]={...pt[tt],status:ut.target.value};const I={...et,properties:pt};a(I),j(I)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Vn.map(ut=>p.jsx("option",{value:ut,children:ut},ut))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:O.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",O.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",O.agencyPhone?p.jsx("a",{href:`sms:${O.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:O.agencyPhone}):""]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>N(tt),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>C(tt),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},O.id)):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 매물이 없습니다."})}),p.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("button",{onClick:ft,className:"btn-primary",children:"닫기"}),p.jsxs("div",{style:{display:"flex",gap:"10px"},children:[p.jsx("button",{onClick:()=>R(!0),disabled:!et.properties||et.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:!et.properties||et.properties.length===0?"not-allowed":"pointer",opacity:!et.properties||et.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:O=>{et.properties&&et.properties.length>0&&(O.target.style.backgroundColor="#d32f2f")},onMouseLeave:O=>{et.properties&&et.properties.length>0&&(O.target.style.backgroundColor="#f44336")},children:"📋 보고서 생성"}),p.jsx("button",{onClick:V,disabled:!et.properties||et.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:!et.properties||et.properties.length===0?"not-allowed":"pointer",opacity:!et.properties||et.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:O=>{et.properties&&et.properties.length>0&&(O.target.style.backgroundColor="#7B1FA2")},onMouseLeave:O=>{et.properties&&et.properties.length>0&&(O.target.style.backgroundColor="#9C27B0")},children:"📅 미팅내역추가"})]})]}),D&&p.jsx(_t,{onClose:()=>R(!1)}),vt&&p.jsx(Et,{propertyToEdit:yt!==null?et.properties[yt]:null,editIndex:yt,onClose:()=>{st(!1),gt(null)}})]})})};return p.jsxs("div",{className:"meeting-tab",children:[p.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!y&&p.jsx("button",{onClick:()=>_(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 매물선정"})}),g&&p.jsx(z,{onCancel:()=>_(!1)}),y?p.jsx(z,{selectionData:y,onCancel:()=>T(null)},y.id):K.length>0?p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"생성일자"}),p.jsx("th",{children:"매물수"}),p.jsx("th",{children:"액션"})]})}),p.jsx("tbody",{children:K.map(et=>p.jsxs("tr",{children:[p.jsx("td",{children:it(et.createdAt)}),p.jsxs("td",{onClick:()=>j(et),style:{cursor:"pointer",color:"var(--primary-blue)",textDecoration:"underline"},children:[et.properties?.length||0,"개 매물"]}),p.jsxs("td",{children:[p.jsx("button",{onClick:()=>T(et),style:{fontSize:"12px",padding:"4px 8px",marginRight:"5px"},children:"수정"}),p.jsx("button",{onClick:()=>o(et.id),className:"btn-secondary",style:{fontSize:"12px",padding:"4px 8px"},children:"삭제"})]})]},et.id))})]}):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 매물선정이 없습니다."}),w&&p.jsx(H,{selection:w,onClose:()=>j(null)})]})},ZE=({selectedCustomer:r,onClose:e,onEditCustomer:i,onUpdateCustomer:a,onDeleteCustomer:o,activities:h,onSaveActivity:d,onDeleteActivity:g,meetings:_,onSaveMeeting:y,onDeleteMeeting:T,propertySelections:w,onSavePropertySelection:j,onDeletePropertySelection:K})=>{const[z,it]=Tt.useState("기본정보"),[H,et]=Tt.useState(null);Tt.useEffect(()=>{r&&(it("기본정보"),et(null))},[r?.id]);const ft=!!r,yt=st=>{const D={...r,status:st,progress:st==="보류"?null:r.progress};a(D)},gt=st=>{const D={...r,progress:st};a(D)},vt=st=>{const D=st.map(R=>({...R,visitTime:""}));et(D),it("미팅 내역")};return p.jsx("aside",{className:`detail-panel ${ft?"open":""}`,children:ft&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"panel-header",children:[p.jsxs("div",{children:[p.jsx("h3",{children:"고객 상세"}),p.jsxs("span",{className:"created-date",children:["접수일자: ",new Date(r.createdAt).toLocaleDateString()]})]}),p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("button",{onClick:st=>{st.stopPropagation(),i(r)},className:"btn-primary",style:{padding:"8px 16px"},children:"수정"}),p.jsx("button",{onClick:st=>{st.stopPropagation(),o(r)},className:"btn-secondary",style:{padding:"8px 16px"},children:"삭제"}),p.jsx("button",{onClick:e,className:"btn-close",children:"✕"})]})]}),p.jsx("div",{style:{padding:"15px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f8f9fa"},children:p.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap"},children:[p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:"상태"}),p.jsx("div",{style:{display:"flex",gap:"5px"},children:ME.map(st=>p.jsx("button",{type:"button",onClick:()=>yt(st),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:r.status===st?"#4CAF50":"white",color:r.status===st?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:st},st))})]}),(r.status==="신규"||r.status==="진행중")&&p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:"진행상황"}),p.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:k_.map(st=>p.jsx("button",{type:"button",onClick:()=>gt(st),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:r.progress===st?"#2196F3":"white",color:r.progress===st?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:st},st))})]})]})}),p.jsxs("div",{className:"panel-content",children:[p.jsx("div",{style:{display:"flex",gap:"4px",padding:"12px 15px",backgroundColor:"#e3f2fd",borderRadius:"8px",marginBottom:"15px",border:"1px solid #bbdefb"},children:["기본정보","활동 내역","미팅 내역","매물선정"].map((st,D)=>p.jsx("button",{onClick:()=>it(st),style:{flex:1,padding:"10px 16px",fontSize:"14px",fontWeight:"700",border:"none",borderRadius:"6px",backgroundColor:z===st?"white":"transparent",color:"#1a1a1a",cursor:"pointer",transition:"all 0.2s ease",boxShadow:z===st?"0 2px 8px rgba(33, 150, 243, 0.15)":"none",border:z===st?"1px solid #e0e0e0":"1px solid transparent"},onMouseEnter:R=>{z!==st&&(R.target.style.backgroundColor="#f9f9f9")},onMouseLeave:R=>{z!==st&&(R.target.style.backgroundColor="transparent")},children:st},st))}),p.jsx(LE,{customer:r,onUpdateCustomer:a}),p.jsxs("div",{className:"tab-content",children:[z==="기본정보"&&p.jsx(UE,{customer:r,onUpdateCustomer:a,activities:h,meetings:_,onTabChange:it}),z==="활동 내역"&&p.jsx(zE,{customerId:r.id,activities:h,onSaveActivity:d,onDeleteActivity:g}),z==="미팅 내역"&&p.jsx(XE,{customerId:r.id,customerName:r.name,meetings:_,onSaveMeeting:y,onDeleteMeeting:T,initialProperties:H,onClearInitialProperties:()=>et(null)}),z==="매물선정"&&p.jsx($E,{customerId:r.id,customerName:r.name,propertySelections:w,onSavePropertySelection:j,onDeletePropertySelection:K,onTabChange:it,onCreateMeetingFromSelection:vt})]})]})]})})},WE=()=>{};var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},JE=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const h=r[i++];e[a++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=r[i++],d=r[i++],g=r[i++],_=((o&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(_>>10)),e[a++]=String.fromCharCode(56320+(_&1023))}else{const h=r[i++],d=r[i++];e[a++]=String.fromCharCode((o&15)<<12|(h&63)<<6|d&63)}}return e.join("")},L_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const h=r[o],d=o+1<r.length,g=d?r[o+1]:0,_=o+2<r.length,y=_?r[o+2]:0,T=h>>2,w=(h&3)<<4|g>>4;let j=(g&15)<<2|y>>6,K=y&63;_||(K=64,d||(j=64)),a.push(i[T],i[w],i[j],i[K])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(U_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):JE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const h=i[r.charAt(o++)],g=o<r.length?i[r.charAt(o)]:0;++o;const y=o<r.length?i[r.charAt(o)]:64;++o;const w=o<r.length?i[r.charAt(o)]:64;if(++o,h==null||g==null||y==null||w==null)throw new tT;const j=h<<2|g>>4;if(a.push(j),y!==64){const K=g<<4&240|y>>2;if(a.push(K),w!==64){const z=y<<6&192|w;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class tT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eT=function(r){const e=U_(r);return L_.encodeByteArray(e,!0)},$u=function(r){return eT(r).replace(/\./g,"")},nT=function(r){try{return L_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=()=>iT().__FIREBASE_DEFAULTS__,rT=()=>{if(typeof process>"u"||typeof by>"u")return;const r=by.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},aT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&nT(r[1]);return e&&JSON.parse(e)},vd=()=>{try{return WE()||sT()||rT()||aT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lT=r=>vd()?.emulatorHosts?.[r],z_=r=>{const e=lT(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},B_=()=>vd()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[$u(JSON.stringify(i)),$u(JSON.stringify(d)),""].join(".")}const Jl={};function uT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?r.emulator.push(e):r.prod.push(e);return r}function cT(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let xy=!1;function F_(r,e){if(typeof window>"u"||typeof document>"u"||!dc(window.location.host)||Jl[r]===e||Jl[r]||xy)return;Jl[r]=e;function i(j){return`__firebase__banner__${j}`}const a="__firebase__banner",h=uT().prod.length>0;function d(){const j=document.getElementById(a);j&&j.remove()}function g(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function _(j,K){j.setAttribute("width","24"),j.setAttribute("id",K),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function y(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{xy=!0,d()},j}function T(j,K){j.setAttribute("id",K),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function w(){const j=cT(a),K=i("text"),z=document.getElementById(K)||document.createElement("span"),it=i("learnmore"),H=document.getElementById(it)||document.createElement("a"),et=i("preprendIcon"),ft=document.getElementById(et)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const yt=j.element;g(yt),T(H,it);const gt=y();_(ft,et),yt.append(ft,z,H,gt),document.body.appendChild(yt)}h?(z.innerText="Preview backend disconnected.",ft.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ft.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",K)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fT(){const r=vd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dT(){return!fT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pT(){try{return typeof indexedDB=="object"}catch{return!1}}function mT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="FirebaseError";class Ir extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=gT,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G_.prototype.create)}}class G_{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],d=h?yT(h,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Ir(o,g,a)}}function yT(r,e){return r.replace(_T,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const _T=/\{\$([^}]+)}/g;function Zu(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const h=r[o],d=e[o];if(Sy(h)&&Sy(d)){if(!Zu(h,d))return!1}else if(h!==d)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function Sy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(r){return r&&r._delegate?r._delegate:r}class Ma{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new oT;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TT(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});a.resolve(h)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);a===g&&d.resolve(o)}return o}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const h=this.instances.get(a);return h&&e(h,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:ET(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ET(r){return r===xr?void 0:r}function TT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new vT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Kt||(Kt={}));const xT={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},ST=Kt.INFO,AT={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},RT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=AT[e];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Y_{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=RT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const wT=(r,e)=>e.some(i=>r instanceof i);let Ay,Ry;function CT(){return Ay||(Ay=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DT(){return Ry||(Ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q_=new WeakMap,$f=new WeakMap,K_=new WeakMap,zf=new WeakMap,Ed=new WeakMap;function NT(r){const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{i(Ds(r.result)),o()},d=()=>{a(r.error),o()};r.addEventListener("success",h),r.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&Q_.set(i,r)}).catch(()=>{}),Ed.set(e,r),e}function IT(r){if($f.has(r))return;const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{i(),o()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});$f.set(r,e)}let Zf={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return $f.get(r);if(e==="objectStoreNames")return r.objectStoreNames||K_.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ds(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function MT(r){Zf=r(Zf)}function VT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(Bf(this),e,...i);return K_.set(a,e.sort?e.sort():[e]),Ds(a)}:DT().includes(r)?function(...e){return r.apply(Bf(this),e),Ds(Q_.get(this))}:function(...e){return Ds(r.apply(Bf(this),e))}}function jT(r){return typeof r=="function"?VT(r):(r instanceof IDBTransaction&&IT(r),wT(r,CT())?new Proxy(r,Zf):r)}function Ds(r){if(r instanceof IDBRequest)return NT(r);if(zf.has(r))return zf.get(r);const e=jT(r);return e!==r&&(zf.set(r,e),Ed.set(e,r)),e}const Bf=r=>Ed.get(r);function OT(r,e,{blocked:i,upgrade:a,blocking:o,terminated:h}={}){const d=indexedDB.open(r,e),g=Ds(d);return a&&d.addEventListener("upgradeneeded",_=>{a(Ds(d.result),_.oldVersion,_.newVersion,Ds(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),g.then(_=>{h&&_.addEventListener("close",()=>h()),o&&_.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const kT=["get","getKey","getAll","getAllKeys","count"],PT=["put","add","delete","clear"],qf=new Map;function wy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(qf.get(e))return qf.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=PT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||kT.includes(i)))return;const h=async function(d,...g){const _=this.transaction(d,o?"readwrite":"readonly");let y=_.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[i](...g),o&&_.done]))[0]};return qf.set(e,h),h}MT(r=>({...r,get:(e,i,a)=>wy(e,i)||r.get(e,i,a),has:(e,i)=>!!wy(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(LT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function LT(r){return r.getComponent()?.type==="VERSION"}const Wf="@firebase/app",Cy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Y_("@firebase/app"),zT="@firebase/app-compat",BT="@firebase/analytics-compat",qT="@firebase/analytics",HT="@firebase/app-check-compat",FT="@firebase/app-check",GT="@firebase/auth",YT="@firebase/auth-compat",QT="@firebase/database",KT="@firebase/data-connect",XT="@firebase/database-compat",$T="@firebase/functions",ZT="@firebase/functions-compat",WT="@firebase/installations",JT="@firebase/installations-compat",tb="@firebase/messaging",eb="@firebase/messaging-compat",nb="@firebase/performance",ib="@firebase/performance-compat",sb="@firebase/remote-config",rb="@firebase/remote-config-compat",ab="@firebase/storage",lb="@firebase/storage-compat",ob="@firebase/firestore",ub="@firebase/ai",cb="@firebase/firestore-compat",hb="firebase",fb="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="[DEFAULT]",db={[Wf]:"fire-core",[zT]:"fire-core-compat",[qT]:"fire-analytics",[BT]:"fire-analytics-compat",[FT]:"fire-app-check",[HT]:"fire-app-check-compat",[GT]:"fire-auth",[YT]:"fire-auth-compat",[QT]:"fire-rtdb",[KT]:"fire-data-connect",[XT]:"fire-rtdb-compat",[$T]:"fire-fn",[ZT]:"fire-fn-compat",[WT]:"fire-iid",[JT]:"fire-iid-compat",[tb]:"fire-fcm",[eb]:"fire-fcm-compat",[nb]:"fire-perf",[ib]:"fire-perf-compat",[sb]:"fire-rc",[rb]:"fire-rc-compat",[ab]:"fire-gcs",[lb]:"fire-gcs-compat",[ob]:"fire-fst",[cb]:"fire-fst-compat",[ub]:"fire-vertex","fire-js":"fire-js",[hb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Map,pb=new Map,td=new Map;function Dy(r,e){try{r.container.addComponent(e)}catch(i){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function so(r){const e=r.name;if(td.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;td.set(e,r);for(const i of Wu.values())Dy(i,r);for(const i of pb.values())Dy(i,r);return!0}function X_(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function $_(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new G_("app","Firebase",mb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=fb;function W_(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a={name:Jf,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Ns.create("bad-app-name",{appName:String(o)});if(i||(i=B_()),!i)throw Ns.create("no-options");const h=Wu.get(o);if(h){if(Zu(i,h.options)&&Zu(a,h.config))return h;throw Ns.create("duplicate-app",{appName:o})}const d=new bT(o);for(const _ of td.values())d.addComponent(_);const g=new gb(i,a,d);return Wu.set(o,g),g}function J_(r=Jf){const e=Wu.get(r);if(!e&&r===Jf&&B_())return W_();if(!e)throw Ns.create("no-app",{appName:r});return e}function Is(r,e,i){let a=db[r]??r;i&&(a+=`-${i}`);const o=a.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(d.join(" "));return}so(new Ma(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firebase-heartbeat-database",_b=1,ro="firebase-heartbeat-store";let Hf=null;function tv(){return Hf||(Hf=OT(yb,_b,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ro)}catch(i){console.warn(i)}}}}).catch(r=>{throw Ns.create("idb-open",{originalErrorMessage:r.message})})),Hf}async function vb(r){try{const i=(await tv()).transaction(ro),a=await i.objectStore(ro).get(ev(r));return await i.done,a}catch(e){if(e instanceof Ir)qi.warn(e.message);else{const i=Ns.create("idb-get",{originalErrorMessage:e?.message});qi.warn(i.message)}}}async function Ny(r,e){try{const a=(await tv()).transaction(ro,"readwrite");await a.objectStore(ro).put(e,ev(r)),await a.done}catch(i){if(i instanceof Ir)qi.warn(i.message);else{const a=Ns.create("idb-set",{originalErrorMessage:i?.message});qi.warn(a.message)}}}function ev(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=1024,Tb=30;class bb{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Sb(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Iy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>Tb){const o=Ab(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){qi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Iy(),{heartbeatsToSend:i,unsentEntries:a}=xb(this._heartbeatsCache.heartbeats),o=$u(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return qi.warn(e),""}}}function Iy(){return new Date().toISOString().substring(0,10)}function xb(r,e=Eb){const i=[];let a=r.slice();for(const o of r){const h=i.find(d=>d.agent===o.agent);if(h){if(h.dates.push(o.date),My(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),My(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class Sb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pT()?mT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await vb(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function My(r){return $u(JSON.stringify({version:2,heartbeats:r})).length}function Ab(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r){so(new Ma("platform-logger",e=>new UT(e),"PRIVATE")),so(new Ma("heartbeat",e=>new bb(e),"PRIVATE")),Is(Wf,Cy,r),Is(Wf,Cy,"esm2020"),Is("fire-js","")}Rb("");var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,nv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function S(){}S.prototype=R.prototype,D.F=R.prototype,D.prototype=new S,D.prototype.constructor=D,D.D=function(V,N,C){for(var A=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)A[Et-2]=arguments[Et];return R.prototype[N].apply(V,A)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,S){S||(S=0);const V=Array(16);if(typeof R=="string")for(var N=0;N<16;++N)V[N]=R.charCodeAt(S++)|R.charCodeAt(S++)<<8|R.charCodeAt(S++)<<16|R.charCodeAt(S++)<<24;else for(N=0;N<16;++N)V[N]=R[S++]|R[S++]<<8|R[S++]<<16|R[S++]<<24;R=D.g[0],S=D.g[1],N=D.g[2];let C=D.g[3],A;A=R+(C^S&(N^C))+V[0]+3614090360&4294967295,R=S+(A<<7&4294967295|A>>>25),A=C+(N^R&(S^N))+V[1]+3905402710&4294967295,C=R+(A<<12&4294967295|A>>>20),A=N+(S^C&(R^S))+V[2]+606105819&4294967295,N=C+(A<<17&4294967295|A>>>15),A=S+(R^N&(C^R))+V[3]+3250441966&4294967295,S=N+(A<<22&4294967295|A>>>10),A=R+(C^S&(N^C))+V[4]+4118548399&4294967295,R=S+(A<<7&4294967295|A>>>25),A=C+(N^R&(S^N))+V[5]+1200080426&4294967295,C=R+(A<<12&4294967295|A>>>20),A=N+(S^C&(R^S))+V[6]+2821735955&4294967295,N=C+(A<<17&4294967295|A>>>15),A=S+(R^N&(C^R))+V[7]+4249261313&4294967295,S=N+(A<<22&4294967295|A>>>10),A=R+(C^S&(N^C))+V[8]+1770035416&4294967295,R=S+(A<<7&4294967295|A>>>25),A=C+(N^R&(S^N))+V[9]+2336552879&4294967295,C=R+(A<<12&4294967295|A>>>20),A=N+(S^C&(R^S))+V[10]+4294925233&4294967295,N=C+(A<<17&4294967295|A>>>15),A=S+(R^N&(C^R))+V[11]+2304563134&4294967295,S=N+(A<<22&4294967295|A>>>10),A=R+(C^S&(N^C))+V[12]+1804603682&4294967295,R=S+(A<<7&4294967295|A>>>25),A=C+(N^R&(S^N))+V[13]+4254626195&4294967295,C=R+(A<<12&4294967295|A>>>20),A=N+(S^C&(R^S))+V[14]+2792965006&4294967295,N=C+(A<<17&4294967295|A>>>15),A=S+(R^N&(C^R))+V[15]+1236535329&4294967295,S=N+(A<<22&4294967295|A>>>10),A=R+(N^C&(S^N))+V[1]+4129170786&4294967295,R=S+(A<<5&4294967295|A>>>27),A=C+(S^N&(R^S))+V[6]+3225465664&4294967295,C=R+(A<<9&4294967295|A>>>23),A=N+(R^S&(C^R))+V[11]+643717713&4294967295,N=C+(A<<14&4294967295|A>>>18),A=S+(C^R&(N^C))+V[0]+3921069994&4294967295,S=N+(A<<20&4294967295|A>>>12),A=R+(N^C&(S^N))+V[5]+3593408605&4294967295,R=S+(A<<5&4294967295|A>>>27),A=C+(S^N&(R^S))+V[10]+38016083&4294967295,C=R+(A<<9&4294967295|A>>>23),A=N+(R^S&(C^R))+V[15]+3634488961&4294967295,N=C+(A<<14&4294967295|A>>>18),A=S+(C^R&(N^C))+V[4]+3889429448&4294967295,S=N+(A<<20&4294967295|A>>>12),A=R+(N^C&(S^N))+V[9]+568446438&4294967295,R=S+(A<<5&4294967295|A>>>27),A=C+(S^N&(R^S))+V[14]+3275163606&4294967295,C=R+(A<<9&4294967295|A>>>23),A=N+(R^S&(C^R))+V[3]+4107603335&4294967295,N=C+(A<<14&4294967295|A>>>18),A=S+(C^R&(N^C))+V[8]+1163531501&4294967295,S=N+(A<<20&4294967295|A>>>12),A=R+(N^C&(S^N))+V[13]+2850285829&4294967295,R=S+(A<<5&4294967295|A>>>27),A=C+(S^N&(R^S))+V[2]+4243563512&4294967295,C=R+(A<<9&4294967295|A>>>23),A=N+(R^S&(C^R))+V[7]+1735328473&4294967295,N=C+(A<<14&4294967295|A>>>18),A=S+(C^R&(N^C))+V[12]+2368359562&4294967295,S=N+(A<<20&4294967295|A>>>12),A=R+(S^N^C)+V[5]+4294588738&4294967295,R=S+(A<<4&4294967295|A>>>28),A=C+(R^S^N)+V[8]+2272392833&4294967295,C=R+(A<<11&4294967295|A>>>21),A=N+(C^R^S)+V[11]+1839030562&4294967295,N=C+(A<<16&4294967295|A>>>16),A=S+(N^C^R)+V[14]+4259657740&4294967295,S=N+(A<<23&4294967295|A>>>9),A=R+(S^N^C)+V[1]+2763975236&4294967295,R=S+(A<<4&4294967295|A>>>28),A=C+(R^S^N)+V[4]+1272893353&4294967295,C=R+(A<<11&4294967295|A>>>21),A=N+(C^R^S)+V[7]+4139469664&4294967295,N=C+(A<<16&4294967295|A>>>16),A=S+(N^C^R)+V[10]+3200236656&4294967295,S=N+(A<<23&4294967295|A>>>9),A=R+(S^N^C)+V[13]+681279174&4294967295,R=S+(A<<4&4294967295|A>>>28),A=C+(R^S^N)+V[0]+3936430074&4294967295,C=R+(A<<11&4294967295|A>>>21),A=N+(C^R^S)+V[3]+3572445317&4294967295,N=C+(A<<16&4294967295|A>>>16),A=S+(N^C^R)+V[6]+76029189&4294967295,S=N+(A<<23&4294967295|A>>>9),A=R+(S^N^C)+V[9]+3654602809&4294967295,R=S+(A<<4&4294967295|A>>>28),A=C+(R^S^N)+V[12]+3873151461&4294967295,C=R+(A<<11&4294967295|A>>>21),A=N+(C^R^S)+V[15]+530742520&4294967295,N=C+(A<<16&4294967295|A>>>16),A=S+(N^C^R)+V[2]+3299628645&4294967295,S=N+(A<<23&4294967295|A>>>9),A=R+(N^(S|~C))+V[0]+4096336452&4294967295,R=S+(A<<6&4294967295|A>>>26),A=C+(S^(R|~N))+V[7]+1126891415&4294967295,C=R+(A<<10&4294967295|A>>>22),A=N+(R^(C|~S))+V[14]+2878612391&4294967295,N=C+(A<<15&4294967295|A>>>17),A=S+(C^(N|~R))+V[5]+4237533241&4294967295,S=N+(A<<21&4294967295|A>>>11),A=R+(N^(S|~C))+V[12]+1700485571&4294967295,R=S+(A<<6&4294967295|A>>>26),A=C+(S^(R|~N))+V[3]+2399980690&4294967295,C=R+(A<<10&4294967295|A>>>22),A=N+(R^(C|~S))+V[10]+4293915773&4294967295,N=C+(A<<15&4294967295|A>>>17),A=S+(C^(N|~R))+V[1]+2240044497&4294967295,S=N+(A<<21&4294967295|A>>>11),A=R+(N^(S|~C))+V[8]+1873313359&4294967295,R=S+(A<<6&4294967295|A>>>26),A=C+(S^(R|~N))+V[15]+4264355552&4294967295,C=R+(A<<10&4294967295|A>>>22),A=N+(R^(C|~S))+V[6]+2734768916&4294967295,N=C+(A<<15&4294967295|A>>>17),A=S+(C^(N|~R))+V[13]+1309151649&4294967295,S=N+(A<<21&4294967295|A>>>11),A=R+(N^(S|~C))+V[4]+4149444226&4294967295,R=S+(A<<6&4294967295|A>>>26),A=C+(S^(R|~N))+V[11]+3174756917&4294967295,C=R+(A<<10&4294967295|A>>>22),A=N+(R^(C|~S))+V[2]+718787259&4294967295,N=C+(A<<15&4294967295|A>>>17),A=S+(C^(N|~R))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+C&4294967295}a.prototype.v=function(D,R){R===void 0&&(R=D.length);const S=R-this.blockSize,V=this.C;let N=this.h,C=0;for(;C<R;){if(N==0)for(;C<=S;)o(this,D,C),C+=this.blockSize;if(typeof D=="string"){for(;C<R;)if(V[N++]=D.charCodeAt(C++),N==this.blockSize){o(this,V),N=0;break}}else for(;C<R;)if(V[N++]=D[C++],N==this.blockSize){o(this,V),N=0;break}}this.h=N,this.o+=R},a.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var S=D.length-8;S<D.length;++S)D[S]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,S=0;S<4;++S)for(let V=0;V<32;V+=8)D[R++]=this.g[S]>>>V&255;return D};function h(D,R){var S=g;return Object.prototype.hasOwnProperty.call(S,D)?S[D]:S[D]=R(D)}function d(D,R){this.h=R;const S=[];let V=!0;for(let N=D.length-1;N>=0;N--){const C=D[N]|0;V&&C==R||(S[N]=C,V=!1)}this.g=S}var g={};function _(D){return-128<=D&&D<128?h(D,function(R){return new d([R|0],R<0?-1:0)}):new d([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return w;if(D<0)return H(y(-D));const R=[];let S=1;for(let V=0;D>=S;V++)R[V]=D/S|0,S*=4294967296;return new d(R,0)}function T(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return H(T(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=y(Math.pow(R,8));let V=w;for(let C=0;C<D.length;C+=8){var N=Math.min(8,D.length-C);const A=parseInt(D.substring(C,C+N),R);N<8?(N=y(Math.pow(R,N)),V=V.j(N).add(y(A))):(V=V.j(S),V=V.add(y(A)))}return V}var w=_(0),j=_(1),K=_(16777216);r=d.prototype,r.m=function(){if(it(this))return-H(this).m();let D=0,R=1;for(let S=0;S<this.g.length;S++){const V=this.i(S);D+=(V>=0?V:4294967296+V)*R,R*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(z(this))return"0";if(it(this))return"-"+H(this).toString(D);const R=y(Math.pow(D,6));var S=this;let V="";for(;;){const N=gt(S,R).g;S=et(S,N.j(R));let C=((S.g.length>0?S.g[0]:S.h)>>>0).toString(D);if(S=N,z(S))return C+V;for(;C.length<6;)C="0"+C;V=C+V}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function z(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function it(D){return D.h==-1}r.l=function(D){return D=et(this,D),it(D)?-1:z(D)?0:1};function H(D){const R=D.g.length,S=[];for(let V=0;V<R;V++)S[V]=~D.g[V];return new d(S,~D.h).add(j)}r.abs=function(){return it(this)?H(this):this},r.add=function(D){const R=Math.max(this.g.length,D.g.length),S=[];let V=0;for(let N=0;N<=R;N++){let C=V+(this.i(N)&65535)+(D.i(N)&65535),A=(C>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);V=A>>>16,C&=65535,A&=65535,S[N]=A<<16|C}return new d(S,S[S.length-1]&-2147483648?-1:0)};function et(D,R){return D.add(H(R))}r.j=function(D){if(z(this)||z(D))return w;if(it(this))return it(D)?H(this).j(H(D)):H(H(this).j(D));if(it(D))return H(this.j(H(D)));if(this.l(K)<0&&D.l(K)<0)return y(this.m()*D.m());const R=this.g.length+D.g.length,S=[];for(var V=0;V<2*R;V++)S[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<D.g.length;N++){const C=this.i(V)>>>16,A=this.i(V)&65535,Et=D.i(N)>>>16,_t=D.i(N)&65535;S[2*V+2*N]+=A*_t,ft(S,2*V+2*N),S[2*V+2*N+1]+=C*_t,ft(S,2*V+2*N+1),S[2*V+2*N+1]+=A*Et,ft(S,2*V+2*N+1),S[2*V+2*N+2]+=C*Et,ft(S,2*V+2*N+2)}for(D=0;D<R;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=R;D<2*R;D++)S[D]=0;return new d(S,0)};function ft(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function yt(D,R){this.g=D,this.h=R}function gt(D,R){if(z(R))throw Error("division by zero");if(z(D))return new yt(w,w);if(it(D))return R=gt(H(D),R),new yt(H(R.g),H(R.h));if(it(R))return R=gt(D,H(R)),new yt(H(R.g),R.h);if(D.g.length>30){if(it(D)||it(R))throw Error("slowDivide_ only works with positive integers.");for(var S=j,V=R;V.l(D)<=0;)S=vt(S),V=vt(V);var N=st(S,1),C=st(V,1);for(V=st(V,2),S=st(S,2);!z(V);){var A=C.add(V);A.l(D)<=0&&(N=N.add(S),C=A),V=st(V,1),S=st(S,1)}return R=et(D,N.j(R)),new yt(N,R)}for(N=w;D.l(R)>=0;){for(S=Math.max(1,Math.floor(D.m()/R.m())),V=Math.ceil(Math.log(S)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),C=y(S),A=C.j(R);it(A)||A.l(D)>0;)S-=V,C=y(S),A=C.j(R);z(C)&&(C=j),N=N.add(C),D=et(D,A)}return new yt(N,D)}r.B=function(D){return gt(this,D).h},r.and=function(D){const R=Math.max(this.g.length,D.g.length),S=[];for(let V=0;V<R;V++)S[V]=this.i(V)&D.i(V);return new d(S,this.h&D.h)},r.or=function(D){const R=Math.max(this.g.length,D.g.length),S=[];for(let V=0;V<R;V++)S[V]=this.i(V)|D.i(V);return new d(S,this.h|D.h)},r.xor=function(D){const R=Math.max(this.g.length,D.g.length),S=[];for(let V=0;V<R;V++)S[V]=this.i(V)^D.i(V);return new d(S,this.h^D.h)};function vt(D){const R=D.g.length+1,S=[];for(let V=0;V<R;V++)S[V]=D.i(V)<<1|D.i(V-1)>>>31;return new d(S,D.h)}function st(D,R){const S=R>>5;R%=32;const V=D.g.length-S,N=[];for(let C=0;C<V;C++)N[C]=R>0?D.i(C+S)>>>R|D.i(C+S+1)<<32-R:D.i(C+S);return new d(N,D.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,nv=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,Ms=d}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iv,Xl,sv,Hu,ed,rv,av,lv;(function(){var r,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var v=a;u=u.split(".");for(var x=0;x<u.length-1;x++){var G=u[x];if(!(G in v))break t;v=v[G]}u=u[u.length-1],x=v[u],m=m(x),m!=x&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],x;for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&v.push([x,m[x]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=_,y.apply(null,arguments)}function T(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function w(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(x,G,W){for(var mt=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)mt[Pt-2]=arguments[Pt];return m.prototype[G].apply(x,mt)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function K(u){const m=u.length;if(m>0){const v=Array(m);for(let x=0;x<m;x++)v[x]=u[x];return v}return[]}function z(u,m){for(let x=1;x<arguments.length;x++){const G=arguments[x];var v=typeof G;if(v=v!="object"?v:G?Array.isArray(G)?"array":v:"null",v=="array"||v=="object"&&typeof G.length=="number"){v=u.length||0;const W=G.length||0;u.length=v+W;for(let mt=0;mt<W;mt++)u[v+mt]=G[mt]}else u.push(G)}}class it{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(u){d.setTimeout(()=>{throw u},0)}function et(){var u=D;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ft{constructor(){this.h=this.g=null}add(m,v){const x=yt.get();x.set(m,v),this.h?this.h.next=x:this.g=x,this.h=x}}var yt=new it(()=>new gt,u=>u.reset());class gt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,st=!1,D=new ft,R=()=>{const u=Promise.resolve(void 0);vt=()=>{u.then(S)}};function S(){for(var u;u=et();){try{u.h.call(u.g)}catch(v){H(v)}var m=yt;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}st=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function Et(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(Et,N),Et.prototype.init=function(u,m){const v=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Et.Z.h.call(this)},Et.prototype.h=function(){Et.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),O=0;function tt(u,m,v,x,G){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!x,this.ha=G,this.key=++O,this.da=this.fa=!1}function ut(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pt(u,m,v){for(const x in u)m.call(v,u[x],x,u)}function I(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function Z(u){const m={};for(const v in u)m[v]=u[v];return m}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let v,x;for(let G=1;G<arguments.length;G++){x=arguments[G];for(v in x)u[v]=x[v];for(let W=0;W<L.length;W++)v=L[W],Object.prototype.hasOwnProperty.call(x,v)&&(u[v]=x[v])}}function Y(u){this.src=u,this.g={},this.h=0}Y.prototype.add=function(u,m,v,x,G){const W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);const mt=P(u,m,x,G);return mt>-1?(m=u[mt],v||(m.fa=!1)):(m=new tt(m,this.src,W,!!x,G),m.fa=v,u.push(m)),m};function B(u,m){const v=m.type;if(v in u.g){var x=u.g[v],G=Array.prototype.indexOf.call(x,m,void 0),W;(W=G>=0)&&Array.prototype.splice.call(x,G,1),W&&(ut(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function P(u,m,v,x){for(let G=0;G<u.length;++G){const W=u[G];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==x)return G}return-1}var J="closure_lm_"+(Math.random()*1e6|0),nt={};function ct(u,m,v,x,G){if(Array.isArray(m)){for(let W=0;W<m.length;W++)ct(u,m[W],v,x,G);return null}return v=kr(v),u&&u[_t]?u.J(m,v,g(x)?!!x.capture:!1,G):St(u,m,v,!1,x,G)}function St(u,m,v,x,G,W){if(!m)throw Error("Invalid event type");const mt=g(G)?!!G.capture:!!G;let Pt=Xn(u);if(Pt||(u[J]=Pt=new Y(u)),v=Pt.add(m,v,x,mt,W),v.proxy)return v;if(x=dt(),v.proxy=x,x.src=u,x.listener=v,u.addEventListener)C||(G=mt),G===void 0&&(G=!1),u.addEventListener(m.toString(),x,G);else if(u.attachEvent)u.attachEvent(At(m.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function dt(){function u(v){return m.call(u.src,u.listener,v)}const m=Vt;return u}function kt(u,m,v,x,G){if(Array.isArray(m))for(var W=0;W<m.length;W++)kt(u,m[W],v,x,G);else x=g(x)?!!x.capture:!!x,v=kr(v),u&&u[_t]?(u=u.i,W=String(m).toString(),W in u.g&&(m=u.g[W],v=P(m,v,x,G),v>-1&&(ut(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[W],u.h--)))):u&&(u=Xn(u))&&(m=u.g[m.toString()],u=-1,m&&(u=P(m,v,x,G)),(v=u>-1?m[u]:null)&&Ct(v))}function Ct(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[_t])B(m.i,u);else{var v=u.type,x=u.proxy;m.removeEventListener?m.removeEventListener(v,x,u.capture):m.detachEvent?m.detachEvent(At(v),x):m.addListener&&m.removeListener&&m.removeListener(x),(v=Xn(m))?(B(v,u),v.h==0&&(v.src=null,m[J]=null)):ut(u)}}}function At(u){return u in nt?nt[u]:nt[u]="on"+u}function Vt(u,m){if(u.da)u=!0;else{m=new Et(m,this);const v=u.listener,x=u.ha||u.src;u.fa&&Ct(u),u=v.call(x,m)}return u}function Xn(u){return u=u[J],u instanceof Y?u:null}var Oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function kr(u){return typeof u=="function"?u:(u[Oe]||(u[Oe]=function(m){return u.handleEvent(m)}),u[Oe])}function ye(){V.call(this),this.i=new Y(this),this.M=this,this.G=null}w(ye,V),ye.prototype[_t]=!0,ye.prototype.removeEventListener=function(u,m,v,x){kt(this,u,m,v,x)};function ke(u,m){var v,x=u.G;if(x)for(v=[];x;x=x.G)v.push(x);if(u=u.M,x=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var G=m;m=new N(x,u),k(m,G)}G=!0;let W,mt;if(v)for(mt=v.length-1;mt>=0;mt--)W=m.g=v[mt],G=Ei(W,x,!0,m)&&G;if(W=m.g=u,G=Ei(W,x,!0,m)&&G,G=Ei(W,x,!1,m)&&G,v)for(mt=0;mt<v.length;mt++)W=m.g=v[mt],G=Ei(W,x,!1,m)&&G}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let x=0;x<v.length;x++)ut(v[x]);delete u.g[m],u.h--}}this.G=null},ye.prototype.J=function(u,m,v,x){return this.i.add(String(u),m,!1,v,x)},ye.prototype.K=function(u,m,v,x){return this.i.add(String(u),m,!0,v,x)};function Ei(u,m,v,x){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let G=!0;for(let W=0;W<m.length;++W){const mt=m[W];if(mt&&!mt.da&&mt.capture==v){const Pt=mt.listener,oe=mt.ha||mt.src;mt.fa&&B(u.i,mt),G=Pt.call(oe,x)!==!1&&G}}return G&&!x.defaultPrevented}function Oc(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function Ha(u){u.g=Oc(()=>{u.g=null,u.i&&(u.i=!1,Ha(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class kc extends V{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ha(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(u){V.call(this),this.h=u,this.g={}}w(Bs,V);var Gi=[];function Xe(u){pt(u.g,function(m,v){this.g.hasOwnProperty(v)&&Ct(m)},u),u.g={}}Bs.prototype.N=function(){Bs.Z.N.call(this),Xe(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=d.JSON.stringify,sn=d.JSON.parse,Pc=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function vo(){}function Eo(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yi(){N.call(this,"d")}w(Yi,N);function Pn(){N.call(this,"c")}w(Pn,N);var bn={},Qi=null;function Pr(){return Qi=Qi||new ye}bn.Ia="serverreachability";function Fa(u){N.call(this,bn.Ia,u)}w(Fa,N);function Ki(u){const m=Pr();ke(m,new Fa(m))}bn.STAT_EVENT="statevent";function Ur(u,m){N.call(this,bn.STAT_EVENT,u),this.stat=m}w(Ur,N);function _e(u){const m=Pr();ke(m,new Ur(m,u))}bn.Ja="timingevent";function To(u,m){N.call(this,bn.Ja,u),this.size=m}w(To,N);function Xi(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function $i(){this.g=!0}$i.prototype.ua=function(){this.g=!1};function Ga(u,m,v,x,G,W){u.info(function(){if(u.g)if(W){var mt="",Pt=W.split("&");for(let Wt=0;Wt<Pt.length;Wt++){var oe=Pt[Wt].split("=");if(oe.length>1){const Te=oe[0];oe=oe[1];const dn=Te.split("_");mt=dn.length>=2&&dn[1]=="type"?mt+(Te+"="+oe+"&"):mt+(Te+"=redacted&")}}}else mt=null;else mt=W;return"XMLHTTP REQ ("+x+") [attempt "+G+"]: "+m+`
`+v+`
`+mt})}function Ya(u,m,v,x,G,W,mt){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+G+"]: "+m+`
`+v+`
`+W+" "+mt})}function Ti(u,m,v,x){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Zn(u,v)+(x?" "+x:"")})}function Uc(u,m){u.info(function(){return"TIMEOUT: "+m})}$i.prototype.info=function(){};function Zn(u,m){if(!u.g)return m;if(!m)return null;try{const W=JSON.parse(m);if(W){for(u=0;u<W.length;u++)if(Array.isArray(W[u])){var v=W[u];if(!(v.length<2)){var x=v[1];if(Array.isArray(x)&&!(x.length<1)){var G=x[0];if(G!="noop"&&G!="stop"&&G!="close")for(let mt=1;mt<x.length;mt++)x[mt]=""}}}}return Tn(W)}catch{return m}}var ve={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bi;function qs(){}w(qs,vo),qs.prototype.g=function(){return new XMLHttpRequest},bi=new qs;function Hs(u){return encodeURIComponent(String(u))}function Lc(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function Un(u,m,v,x){this.j=u,this.i=m,this.l=v,this.S=x||1,this.V=new Bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zi}function Zi(){this.i=null,this.g="",this.h=!1}var Lr={},Wn={};function Jn(u,m,v){u.M=1,u.A=Si(fe(m)),u.u=v,u.R=!0,Wi(u,null)}function Wi(u,m){u.F=Date.now(),Fs(u),u.B=fe(u.A);var v=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),Ao(v.i,"t",x),u.C=0,v=u.j.L,u.h=new Zi,u.g=Xr(u.j,v?m:null,!u.u),u.P>0&&(u.O=new kc(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,x=u.ba;var G="readystatechange";Array.isArray(G)||(G&&(Gi[0]=G.toString()),G=Gi);for(let W=0;W<G.length;W++){const mt=ct(v,G[W],x||m.handleEvent,!1,m.h||m);if(!mt)break;m.g[mt.key]=mt}m=u.J?Z(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ki(),Ga(u.i,u.v,u.B,u.l,u.S,u.u)}Un.prototype.ba=function(u){u=u.target;const m=this.O;m&&$e(u)==3?m.j():this.Y(u)},Un.prototype.Y=function(u){try{if(u==this.g)t:{const Pt=$e(this.g),oe=this.g.ya(),Wt=this.g.ca();if(!(Pt<3)&&(Pt!=3||this.g&&(this.h.h||this.g.la()||er(this.g)))){this.K||Pt!=4||oe==7||(oe==8||Wt<=0?Ki(3):Ki(2)),ei(this);var m=this.g.ca();this.X=m;var v=Ji(this);if(this.o=m==200,Ya(this.i,this.v,this.B,this.l,this.S,Pt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var x,G=this.g;if((x=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(x)){var W=x;break e}}W=null}if(u=W)Ti(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zr(this,u);else{this.o=!1,this.m=3,_e(12),ni(this),Gs(this);break t}}if(this.R){u=!0;let Te;for(;!this.K&&this.C<v.length;)if(Te=bo(this,v),Te==Wn){Pt==4&&(this.m=4,_e(14),u=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Te==Lr){this.m=4,_e(15),Ti(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Ti(this.i,this.l,Te,null),zr(this,Te);if(Ee(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||v.length!=0||this.h.h||(this.m=1,_e(16),u=!1),this.o=this.o&&u,!u)Ti(this.i,this.l,v,"[Invalid Chunked Response]"),ni(this),Gs(this);else if(v.length>0&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.aa&&!mt.P&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),nl(mt),mt.P=!0,_e(11))}}else Ti(this.i,this.l,v,null),zr(this,v);Pt==4&&ni(this),this.o&&!this.K&&(Pt==4?il(this.j,this):(this.o=!1,Fs(this)))}else nr(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),ni(this),Gs(this)}}}catch{}finally{}};function Ji(u){if(!Ee(u))return u.g.la();const m=er(u.g);if(m==="")return"";let v="";const x=m.length,G=$e(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ni(u),Gs(u),"";u.h.i=new d.TextDecoder}for(let W=0;W<x;W++)u.h.h=!0,v+=u.h.i.decode(m[W],{stream:!(G&&W==x-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function Ee(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function bo(u,m){var v=u.C,x=m.indexOf(`
`,v);return x==-1?Wn:(v=Number(m.substring(v,x)),isNaN(v)?Lr:(x+=1,x+v>m.length?Wn:(m=m.slice(x,x+v),u.C=x+v,m)))}Un.prototype.cancel=function(){this.K=!0,ni(this)};function Fs(u){u.T=Date.now()+u.H,ti(u,u.H)}function ti(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xi(y(u.aa,u),m)}function ei(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Un.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Uc(this.i,this.B),this.M!=2&&(Ki(),_e(17)),ni(this),this.m=2,Gs(this)):ti(this,this.T-u)};function Gs(u){u.j.I==0||u.K||il(u.j,u)}function ni(u){ei(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Xe(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function zr(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||Ks(v.h,u))){if(!u.L&&Ks(v.h,u)&&v.I==3){try{var x=v.Ba.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var G=x;if(G[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Kr(v),ii(v);else break t;el(v),_e(18)}}else v.xa=G[1],0<v.xa-v.K&&G[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Xi(y(v.Va,v),6e3));xn(v.h)<=1&&v.ta&&(v.ta=void 0)}else wi(v,11)}else if((u.L||v.g==u)&&Kr(v),!A(m))for(G=v.Ba.g.parse(m),m=0;m<G.length;m++){let Wt=G[m];const Te=Wt[0];if(!(Te<=v.K))if(v.K=Te,Wt=Wt[1],v.I==2)if(Wt[0]=="c"){v.M=Wt[1],v.ba=Wt[2];const dn=Wt[3];dn!=null&&(v.ka=dn,v.j.info("VER="+v.ka));const si=Wt[4];si!=null&&(v.za=si,v.j.info("SVER="+v.za));const Bn=Wt[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(x=1.5*Bn,v.O=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;const qn=u.g;if(qn){const Hn=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hn){var W=x.h;W.g||Hn.indexOf("spdy")==-1&&Hn.indexOf("quic")==-1&&Hn.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Br(W,W.h),W.h=null))}if(x.G){const rl=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(x.wa=rl,ee(x.J,x.G,rl))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),x=v;var mt=u;if(x.na=jo(x,x.L?x.ba:null,x.W),mt.L){xi(x.h,mt);var Pt=mt,oe=x.O;oe&&(Pt.H=oe),Pt.D&&(ei(Pt),Fs(Pt)),x.g=mt}else No(x);v.i.length>0&&ar(v)}else Wt[0]!="stop"&&Wt[0]!="close"||wi(v,7);else v.I==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?wi(v,7):sr(v):Wt[0]!="noop"&&v.l&&v.l.qa(Wt),v.A=0)}}Ki(4)}catch{}}var zc=class{constructor(u,m){this.g=u,this.map=m}};function Ys(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xn(u){return u.h?1:u.g?u.g.size:0}function Ks(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Br(u,m){u.g?u.g.add(m):u.h=m}function xi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ys.prototype.cancel=function(){if(this.i=qr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function qr(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return K(u.i)}var Hr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bc(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const x=u[v].indexOf("=");let G,W=null;x>=0?(G=u[v].substring(0,x),W=u[v].substring(x+1)):G=u[v],m(G,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ln(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Ln?(this.l=u.l,ts(this,u.j),this.o=u.o,this.g=u.g,Xs(this,u.u),this.h=u.h,es(this,Ro(u.i)),this.m=u.m):u&&(m=String(u).match(Hr))?(this.l=!1,ts(this,m[1]||"",!0),this.o=$s(m[2]||""),this.g=$s(m[3]||"",!0),Xs(this,m[4]),this.h=$s(m[5]||"",!0),es(this,m[6]||"",!0),this.m=$s(m[7]||"")):(this.l=!1,this.i=new Sn(null,this.l))}Ln.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Pe(m,Ka,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Pe(m,Ka,!0),"@"),u.push(Hs(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Pe(v,v.charAt(0)=="/"?ns:Xa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Pe(v,So)),u.join("")},Ln.prototype.resolve=function(u){const m=fe(this);let v=!!u.j;v?ts(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var x=u.h;if(v)Xs(m,u.u);else if(v=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var G=m.h.lastIndexOf("/");G!=-1&&(x=m.h.slice(0,G+1)+x)}if(G=x,G==".."||G==".")x="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){x=G.lastIndexOf("/",0)==0,G=G.split("/");const W=[];for(let mt=0;mt<G.length;){const Pt=G[mt++];Pt=="."?x&&mt==G.length&&W.push(""):Pt==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),x&&mt==G.length&&W.push("")):(W.push(Pt),x=!0)}x=W.join("/")}else x=G}return v?m.h=x:v=u.i.toString()!=="",v?es(m,Ro(u.i)):v=!!u.m,v&&(m.m=u.m),m};function fe(u){return new Ln(u)}function ts(u,m,v){u.j=v?$s(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Xs(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function es(u,m,v){m instanceof Sn?(u.i=m,Wa(u.i,u.l)):(v||(m=Pe(m,xo)),u.i=new Sn(m,u.l))}function ee(u,m,v){u.i.set(m,v)}function Si(u){return ee(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function $s(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Pe(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Qa),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Qa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ka=/[#\/\?@]/g,Xa=/[#\?:]/g,ns=/[#\?]/g,xo=/[#\?@]/g,So=/#/g;function Sn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ai(u){u.g||(u.g=new Map,u.h=0,u.i&&Bc(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Sn.prototype,r.add=function(u,m){Ai(this),this.i=null,u=zn(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function $a(u,m){Ai(u),m=zn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Za(u,m){return Ai(u),m=zn(u,m),u.g.has(m)}r.forEach=function(u,m){Ai(this),this.g.forEach(function(v,x){v.forEach(function(G){u.call(m,G,x,this)},this)},this)};function Fr(u,m){Ai(u);let v=[];if(typeof m=="string")Za(u,m)&&(v=v.concat(u.g.get(zn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}r.set=function(u,m){return Ai(this),this.i=null,u=zn(this,u),Za(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=Fr(this,u),u.length>0?String(u[0]):m):m};function Ao(u,m,v){$a(u,m),v.length>0&&(u.i=null,u.g.set(zn(u,m),K(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let x=0;x<m.length;x++){var v=m[x];const G=Hs(v);v=Fr(this,v);for(let W=0;W<v.length;W++){let mt=G;v[W]!==""&&(mt+="="+Hs(v[W])),u.push(mt)}}return this.i=u.join("&")};function Ro(u){const m=new Sn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function zn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Wa(u,m){m&&!u.j&&(Ai(u),u.i=null,u.g.forEach(function(v,x){const G=x.toLowerCase();x!=G&&($a(this,x),Ao(this,G,v))},u)),u.j=m}function Ja(u,m){const v=new $i;if(d.Image){const x=new Image;x.onload=T(rn,v,"TestLoadImage: loaded",!0,m,x),x.onerror=T(rn,v,"TestLoadImage: error",!1,m,x),x.onabort=T(rn,v,"TestLoadImage: abort",!1,m,x),x.ontimeout=T(rn,v,"TestLoadImage: timeout",!1,m,x),d.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else m(!1)}function is(u,m){const v=new $i,x=new AbortController,G=setTimeout(()=>{x.abort(),rn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:x.signal}).then(W=>{clearTimeout(G),W.ok?rn(v,"TestPingServer: ok",!0,m):rn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(G),rn(v,"TestPingServer: error",!1,m)})}function rn(u,m,v,x,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),x(v)}catch{}}function wo(){this.g=new Pc}function Zs(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Zs,vo),Zs.prototype.g=function(){return new Ws(this.i,this.h)};function Ws(u,m){ye.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ws,ye),r=Ws.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ri(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,an(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ss(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ss(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?an(this):Ri(this),this.readyState==3&&ss(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,an(this))},r.Na=function(u){this.g&&(this.response=u,an(this))},r.ga=function(){this.g&&an(this)};function an(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ri(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rs(u){let m="";return pt(u,function(v,x){m+=x,m+=":",m+=v,m+=`\r
`}),m}function An(u,m,v){t:{for(x in v){var x=!1;break t}x=!0}x||(v=rs(v),typeof u=="string"?v!=null&&Hs(v):ee(u,m,v))}function ae(u){ye.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ae,ye);var Gr=/^https?$/i,Co=["POST","PUT"];r=ae.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bi.g(),this.g.onreadystatechange=j(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){Js(this,W);return}if(u=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var G in x)v.set(G,x[G]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const W of x.keys())v.set(W,x.get(W));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),G=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Co,m,void 0)>=0)||x||G||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,mt]of v)this.g.setRequestHeader(W,mt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(W){Js(this,W)}};function Js(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,tr(u),De(u)}function tr(u){u.A||(u.A=!0,ke(u,"complete"),ke(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ke(this,"complete"),ke(this,"abort"),De(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),De(this,!0)),ae.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?tl(this):this.Xa())},r.Xa=function(){tl(this)};function tl(u){if(u.h&&typeof h<"u"){if(u.v&&$e(u)==4)setTimeout(u.Ca.bind(u),0);else if(ke(u,"readystatechange"),$e(u)==4){u.h=!1;try{const W=u.ca();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var v;if(!(v=m)){var x;if(x=W===0){let mt=String(u.D).match(Hr)[1]||null;!mt&&d.self&&d.self.location&&(mt=d.self.location.protocol.slice(0,-1)),x=!Gr.test(mt?mt.toLowerCase():"")}v=x}if(v)ke(u,"complete"),ke(u,"success");else{u.o=6;try{var G=$e(u)>2?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.ca()+"]",tr(u)}}finally{De(u)}}}}function De(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||ke(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function $e(u){return u.g?u.g.readyState:0}r.ca=function(){try{return $e(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),sn(m)}};function er(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function nr(u){const m={};u=(u.g&&$e(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(A(u[x]))continue;var v=Lc(u[x]);const G=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[G]||[];m[G]=W,W.push(v)}I(m,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ir(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Yr(u){this.za=0,this.i=[],this.j=new $i,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ir("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ir("baseRetryDelayMs",5e3,u),this.Za=ir("retryDelaySeedMs",1e4,u),this.Ta=ir("forwardChannelMaxRetries",2,u),this.va=ir("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ys(u&&u.concurrentRequestLimit),this.Ba=new wo,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Yr.prototype,r.ka=8,r.I=1,r.connect=function(u,m,v,x){_e(0),this.W=u,this.H=m||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.J=jo(this,null,this.W),ar(this)};function sr(u){if(rr(u),u.I==3){var m=u.V++,v=fe(u.J);if(ee(v,"SID",u.M),ee(v,"RID",m),ee(v,"TYPE","terminate"),lr(u,v),m=new Un(u,u.j,m),m.M=2,m.A=Si(fe(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=Xr(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Fs(m)}Vo(u)}function ii(u){u.g&&(nl(u),u.g.cancel(),u.g=null)}function rr(u){ii(u),u.v&&(d.clearTimeout(u.v),u.v=null),Kr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ar(u){if(!Qs(u.h)&&!u.m){u.m=!0;var m=u.Ea;vt||R(),st||(vt(),st=!0),D.add(m,u),u.D=0}}function qc(u,m){return xn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xi(y(u.Ea,u,m),Mo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const G=new Un(this,this.j,u);let W=this.o;if(this.U&&(W?(W=Z(W),k(W,this.U)):W=this.U),this.u!==null||this.R||(G.J=W,W=null),this.S)t:{for(var m=0,v=0;v<this.i.length;v++){e:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(m+=x,m>4096){m=v;break t}if(m===4096||v===this.i.length-1){m=v+1;break t}}m=1e3}else m=1e3;m=Qr(this,G,m),v=fe(this.J),ee(v,"RID",u),ee(v,"CVER",22),this.G&&ee(v,"X-HTTP-Session-Id",this.G),lr(this,v),W&&(this.R?m="headers="+Hs(rs(W))+"&"+m:this.u&&An(v,this.u,W)),Br(this.h,G),this.Ra&&ee(v,"TYPE","init"),this.S?(ee(v,"$req",m),ee(v,"SID","null"),G.U=!0,Jn(G,v,null)):Jn(G,v,m),this.I=2}}else this.I==3&&(u?Do(this,u):this.i.length==0||Qs(this.h)||Do(this))};function Do(u,m){var v;m?v=m.l:v=u.V++;const x=fe(u.J);ee(x,"SID",u.M),ee(x,"RID",v),ee(x,"AID",u.K),lr(u,x),u.u&&u.o&&An(x,u.u,u.o),v=new Un(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Qr(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Br(u.h,v),Jn(v,x,m)}function lr(u,m){u.H&&pt(u.H,function(v,x){ee(m,x,v)}),u.l&&pt({},function(v,x){ee(m,x,v)})}function Qr(u,m,v){v=Math.min(u.i.length,v);const x=u.l?y(u.l.Ka,u.l,u):null;t:{var G=u.i;let Pt=-1;for(;;){const oe=["count="+v];Pt==-1?v>0?(Pt=G[0].g,oe.push("ofs="+Pt)):Pt=0:oe.push("ofs="+Pt);let Wt=!0;for(let Te=0;Te<v;Te++){var W=G[Te].g;const dn=G[Te].map;if(W-=Pt,W<0)Pt=Math.max(0,G[Te].g-100),Wt=!1;else try{W="req"+W+"_"||"";try{var mt=dn instanceof Map?dn:Object.entries(dn);for(const[si,Bn]of mt){let qn=Bn;g(Bn)&&(qn=Tn(Bn)),oe.push(W+si+"="+encodeURIComponent(qn))}}catch(si){throw oe.push(W+"type="+encodeURIComponent("_badmap")),si}}catch{x&&x(dn)}}if(Wt){mt=oe.join("&");break t}}mt=void 0}return u=u.i.splice(0,v),m.G=u,mt}function No(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;vt||R(),st||(vt(),st=!0),D.add(m,u),u.A=0}}function el(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xi(y(u.Da,u),Mo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xi(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),ii(this),Io(this))};function nl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Io(u){u.g=new Un(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=fe(u.na);ee(m,"RID","rpc"),ee(m,"SID",u.M),ee(m,"AID",u.K),ee(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ee(m,"TO",u.ia),ee(m,"TYPE","xmlhttp"),lr(u,m),u.u&&u.o&&An(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Si(fe(m)),v.u=null,v.R=!0,Wi(v,u)}r.Va=function(){this.C!=null&&(this.C=null,ii(this),el(this),_e(19))};function Kr(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function il(u,m){var v=null;if(u.g==m){Kr(u),nl(u),u.g=null;var x=2}else if(Ks(u.h,m))v=m.G,xi(u.h,m),x=1;else return;if(u.I!=0){if(m.o)if(x==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var G=u.D;x=Pr(),ke(x,new To(x,v)),ar(u)}else No(u);else if(G=m.m,G==3||G==0&&m.X>0||!(x==1&&qc(u,m)||x==2&&el(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),G){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Mo(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),x=u.Ua;const G=!x;x=new Ln(x||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ts(x,"https"),Si(x),G?Ja(x.toString(),v):is(x.toString(),v)}else _e(2);u.I=0,u.l&&u.l.pa(m),Vo(u),rr(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function Vo(u){if(u.I=0,u.ja=[],u.l){const m=qr(u.h);(m.length!=0||u.i.length!=0)&&(z(u.ja,m),z(u.ja,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.oa()}}function jo(u,m,v){var x=v instanceof Ln?fe(v):new Ln(v);if(x.g!="")m&&(x.g=m+"."+x.g),Xs(x,x.u);else{var G=d.location;x=G.protocol,m=m?m+"."+G.hostname:G.hostname,G=+G.port;const W=new Ln(null);x&&ts(W,x),m&&(W.g=m),G&&Xs(W,G),v&&(W.h=v),x=W}return v=u.G,m=u.wa,v&&m&&ee(x,v,m),ee(x,"VER",u.ka),lr(u,x),x}function Xr(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ae(new Zs({ab:v})):new ae(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oo(){}r=Oo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function $r(){}$r.prototype.g=function(u,m){return new ln(u,m)};function ln(u,m){ye.call(this),this.g=new Yr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new as(this)}w(ln,ye),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){sr(this.g)},ln.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Tn(u),u=v);m.i.push(new zc(m.Ya++,u)),m.I==3&&ar(m)},ln.prototype.N=function(){this.g.l=null,delete this.j,sr(this.g),delete this.g,ln.Z.N.call(this)};function sl(u){Yi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const v in m){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(sl,Yi);function ko(){Pn.call(this),this.status=1}w(ko,Pn);function as(u){this.g=u}w(as,Oo),as.prototype.ra=function(){ke(this.g,"a")},as.prototype.qa=function(u){ke(this.g,new sl(u))},as.prototype.pa=function(u){ke(this.g,new ko)},as.prototype.oa=function(){ke(this.g,"b")},$r.prototype.createWebChannel=$r.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,lv=function(){return new $r},av=function(){return Pr()},rv=bn,ed={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,Hu=ve,qe.COMPLETE="complete",sv=qe,Eo.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",ye.prototype.listen=ye.prototype.J,Xl=Eo,ae.prototype.listenOnce=ae.prototype.K,ae.prototype.getLastError=ae.prototype.Ha,ae.prototype.getLastErrorCode=ae.prototype.ya,ae.prototype.getStatus=ae.prototype.ca,ae.prototype.getResponseJson=ae.prototype.La,ae.prototype.getResponseText=ae.prototype.la,ae.prototype.send=ae.prototype.ea,ae.prototype.setWithCredentials=ae.prototype.Fa,iv=ae}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const jy="@firebase/firestore",Oy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Y_("@firebase/firestore");function Aa(){return Dr.logLevel}function bt(r,...e){if(Dr.logLevel<=Kt.DEBUG){const i=e.map(Td);Dr.debug(`Firestore (${La}): ${r}`,...i)}}function Hi(r,...e){if(Dr.logLevel<=Kt.ERROR){const i=e.map(Td);Dr.error(`Firestore (${La}): ${r}`,...i)}}function Va(r,...e){if(Dr.logLevel<=Kt.WARN){const i=e.map(Td);Dr.warn(`Firestore (${La}): ${r}`,...i)}}function Td(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,ov(r,a,i)}function ov(r,e,i){let a=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw Hi(a),new Error(a)}function Zt(r,e,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,r||ov(e,o,a)}function Ut(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends Ir{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(tn.UNAUTHENTICATED)))}shutdown(){}}class Cb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class Db{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Zt(this.o===void 0,42304);let a=this.i;const o=_=>this.i!==a?(a=this.i,i(_)):Promise.resolve();let h=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ar,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const _=h;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},g=_=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ar)}}),0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Zt(typeof a.accessToken=="string",31837,{l:a}),new uv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class Nb{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ib{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new Nb(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ky{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mb{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Zt(this.o===void 0,3512);const a=h=>{h.error!=null&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,bt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>a(h)))};const o=h=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>o(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ky(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(Zt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new ky(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=Vb(40);for(let h=0;h<o.length;++h)a.length<20&&o[h]<i&&(a+=e.charAt(o[h]%62))}return a}}function Ft(r,e){return r<e?-1:r>e?1:0}function nd(r,e){const i=Math.min(r.length,e.length);for(let a=0;a<i;a++){const o=r.charAt(a),h=e.charAt(a);if(o!==h)return Ff(o)===Ff(h)?Ft(o,h):Ff(o)?1:-1}return Ft(r.length,e.length)}const jb=55296,Ob=57343;function Ff(r){const e=r.charCodeAt(0);return e>=jb&&e<=Ob}function ja(r,e,i){return r.length===e.length&&r.every(((a,o)=>i(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__name__";class ci{constructor(e,i,a){i===void 0?i=0:i>e.length&&Mt(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&Mt(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const h=ci.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return Ft(e.length,i.length)}static compareSegments(e,i){const a=ci.isNumericId(e),o=ci.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?ci.extractNumericId(e).compare(ci.extractNumericId(i)):nd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class ue extends ci{construct(e,i,a){return new ue(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new Rt(ht.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((o=>o.length>0)))}return new ue(i)}static emptyPath(){return new ue([])}}const kb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends ci{construct(e,i,a){return new Qe(e,i,a)}static isValidIdentifier(e){return kb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new Qe([Py])}static fromServerFormat(e){const i=[];let a="",o=0;const h=()=>{if(a.length===0)throw new Rt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Rt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Rt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=_,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(h(),o++)}if(h(),d)throw new Rt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(i)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(ue.fromString(e))}static fromName(e){return new Dt(ue.fromString(e).popFirst(5))}static empty(){return new Dt(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return ue.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(r,e,i){if(!i)throw new Rt(ht.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Pb(r,e,i,a){if(e===!0&&a===!0)throw new Rt(ht.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function Uy(r){if(!Dt.isDocumentKey(r))throw new Rt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ly(r){if(Dt.isDocumentKey(r))throw new Rt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function hv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Mt(12329,{type:typeof r})}function Rr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Rt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=xd(r);throw new Rt(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e){const i={typeString:r};return e&&(i.value=e),i}function po(r,e){if(!hv(r))throw new Rt(ht.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const o=e[a].typeString,h="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const d=r[a];if(o&&typeof d!==o){i=`JSON field '${a}' must be a ${o}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${a}' field to equal '${h.value}'`;break}}if(i)throw new Rt(ht.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=-62135596800,By=1e6;class ce{static now(){return ce.fromMillis(Date.now())}static fromDate(e){return ce.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*By);return new ce(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<zy)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/By}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(po(e,ce._jsonSchema))return new ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ce._jsonSchemaVersion="firestore/timestamp/1.0",ce._jsonSchema={type:Ce("string",ce._jsonSchemaVersion),seconds:Ce("number"),nanoseconds:Ce("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new ce(0,0))}static max(){return new Ot(new ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=-1;function Ub(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Ot.fromTimestamp(a===1e9?new ce(i+1,0):new ce(i,a));return new js(o,Dt.empty(),e)}function Lb(r){return new js(r.readTime,r.key,ao)}class js{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new js(Ot.min(),Dt.empty(),ao)}static max(){return new js(Ot.max(),Dt.empty(),ao)}}function zb(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=Dt.comparator(r.documentKey,e.documentKey),i!==0?i:Ft(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(r){if(r.code!==ht.FAILED_PRECONDITION||r.message!==Bb)throw r;bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ot(((a,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,o)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof ot?i:ot.resolve(i)}catch(i){return ot.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):ot.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):ot.reject(i)}static resolve(e){return new ot(((i,a)=>{i(e)}))}static reject(e){return new ot(((i,a)=>{a(e)}))}static waitFor(e){return new ot(((i,a)=>{let o=0,h=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++h,d&&h===o&&i()}),(_=>a(_)))})),d=!0,h===o&&i()}))}static or(e){let i=ot.resolve(!1);for(const a of e)i=i.next((o=>o?ot.resolve(o):a()));return i}static forEach(e,i){const a=[];return e.forEach(((o,h)=>{a.push(i.call(this,o,h))})),this.waitFor(a)}static mapArray(e,i){return new ot(((a,o)=>{const h=e.length,d=new Array(h);let g=0;for(let _=0;_<h;_++){const y=_;i(e[y]).next((T=>{d[y]=T,++g,g===h&&a(d)}),(T=>o(T)))}}))}static doWhile(e,i){return new ot(((a,o)=>{const h=()=>{e()===!0?i().next((()=>{h()}),o):a()};h()}))}}function Hb(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Ba(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=-1;function mc(r){return r==null}function Ju(r){return r===0&&1/r==-1/0}function Fb(r){return typeof r=="number"&&Number.isInteger(r)&&!Ju(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="";function Gb(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=qy(e)),e=Yb(r.get(i),e);return qy(e)}function Yb(r,e){let i=e;const a=r.length;for(let o=0;o<a;o++){const h=r.charAt(o);switch(h){case"\0":i+="";break;case fv:i+="";break;default:i+=h}}return i}function qy(r){return r+fv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function Mr(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function dv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e,i){this.comparator=e,this.root=i||Ye.EMPTY}insert(e,i){return new pe(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,i,a,o,h){this.key=e,this.value=i,this.color=a??Ye.RED,this.left=o??Ye.EMPTY,this.right=h??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,h){return new Ye(e??this.key,i??this.value,a??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const h=a(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,a),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return Ye.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Mt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Mt(27949);return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt(57766)}get value(){throw Mt(16141)}get color(){throw Mt(16727)}get left(){throw Mt(29726)}get right(){throw Mt(36894)}copy(e,i,a,o,h){return this}insert(e,i,a){return new Ye(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.comparator=e,this.data=new pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new je(this.comparator);return i.data=e,i}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Qn([])}unionWith(e){let i=new je(Qe.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new Qn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new pv("Invalid base64 string: "+h):h}})(e);return new Ke(i)}static fromUint8Array(e){const i=(function(o){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);return h})(e);return new Ke(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const Qb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(r){if(Zt(!!r,39018),typeof r=="string"){let e=0;const i=Qb.exec(r);if(Zt(!!i,46558,{timestamp:r}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Se(r.seconds),nanos:Se(r.nanos)}}function Se(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ks(r){return typeof r=="string"?Ke.fromBase64String(r):Ke.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="server_timestamp",gv="__type__",yv="__previous_value__",_v="__local_write_time__";function Ad(r){return(r?.mapValue?.fields||{})[gv]?.stringValue===mv}function gc(r){const e=r.mapValue.fields[yv];return Ad(e)?gc(e):e}function lo(r){const e=Os(r.mapValue.fields[_v].timestampValue);return new ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,i,a,o,h,d,g,_,y,T){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=y,this.isUsingEmulator=T}}const tc="(default)";class oo{constructor(e,i){this.projectId=e,this.database=i||tc}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===tc}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="__type__",Xb="__max__",Lu={mapValue:{}},Ev="__vector__",ec="value";function Ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ad(r)?4:Zb(r)?9007199254740991:$b(r)?10:11:Mt(28295,{value:r})}function gi(r,e){if(r===e)return!0;const i=Ps(r);if(i!==Ps(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return lo(r).isEqual(lo(e));case 3:return(function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const d=Os(o.timestampValue),g=Os(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,h){return ks(o.bytesValue).isEqual(ks(h.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,h){return Se(o.geoPointValue.latitude)===Se(h.geoPointValue.latitude)&&Se(o.geoPointValue.longitude)===Se(h.geoPointValue.longitude)})(r,e);case 2:return(function(o,h){if("integerValue"in o&&"integerValue"in h)return Se(o.integerValue)===Se(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const d=Se(o.doubleValue),g=Se(h.doubleValue);return d===g?Ju(d)===Ju(g):isNaN(d)&&isNaN(g)}return!1})(r,e);case 9:return ja(r.arrayValue.values||[],e.arrayValue.values||[],gi);case 10:case 11:return(function(o,h){const d=o.mapValue.fields||{},g=h.mapValue.fields||{};if(Hy(d)!==Hy(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!gi(d[_],g[_])))return!1;return!0})(r,e);default:return Mt(52216,{left:r})}}function uo(r,e){return(r.values||[]).find((i=>gi(i,e)))!==void 0}function Oa(r,e){if(r===e)return 0;const i=Ps(r),a=Ps(e);if(i!==a)return Ft(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Ft(r.booleanValue,e.booleanValue);case 2:return(function(h,d){const g=Se(h.integerValue||h.doubleValue),_=Se(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(r,e);case 3:return Gy(r.timestampValue,e.timestampValue);case 4:return Gy(lo(r),lo(e));case 5:return nd(r.stringValue,e.stringValue);case 6:return(function(h,d){const g=ks(h),_=ks(d);return g.compareTo(_)})(r.bytesValue,e.bytesValue);case 7:return(function(h,d){const g=h.split("/"),_=d.split("/");for(let y=0;y<g.length&&y<_.length;y++){const T=Ft(g[y],_[y]);if(T!==0)return T}return Ft(g.length,_.length)})(r.referenceValue,e.referenceValue);case 8:return(function(h,d){const g=Ft(Se(h.latitude),Se(d.latitude));return g!==0?g:Ft(Se(h.longitude),Se(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Yy(r.arrayValue,e.arrayValue);case 10:return(function(h,d){const g=h.fields||{},_=d.fields||{},y=g[ec]?.arrayValue,T=_[ec]?.arrayValue,w=Ft(y?.values?.length||0,T?.values?.length||0);return w!==0?w:Yy(y,T)})(r.mapValue,e.mapValue);case 11:return(function(h,d){if(h===Lu.mapValue&&d===Lu.mapValue)return 0;if(h===Lu.mapValue)return 1;if(d===Lu.mapValue)return-1;const g=h.fields||{},_=Object.keys(g),y=d.fields||{},T=Object.keys(y);_.sort(),T.sort();for(let w=0;w<_.length&&w<T.length;++w){const j=nd(_[w],T[w]);if(j!==0)return j;const K=Oa(g[_[w]],y[T[w]]);if(K!==0)return K}return Ft(_.length,T.length)})(r.mapValue,e.mapValue);default:throw Mt(23264,{he:i})}}function Gy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ft(r,e);const i=Os(r),a=Os(e),o=Ft(i.seconds,a.seconds);return o!==0?o:Ft(i.nanos,a.nanos)}function Yy(r,e){const i=r.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const h=Oa(i[o],a[o]);if(h)return h}return Ft(i.length,a.length)}function ka(r){return id(r)}function id(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const a=Os(i);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return ks(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return Dt.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let a="[",o=!0;for(const h of i.values||[])o?o=!1:a+=",",a+=id(h);return a+"]"})(r.arrayValue):"mapValue"in r?(function(i){const a=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const d of a)h?h=!1:o+=",",o+=`${d}:${id(i.fields[d])}`;return o+"}"})(r.mapValue):Mt(61005,{value:r})}function Fu(r){switch(Ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gc(r);return e?16+Fu(e):16;case 5:return 2*r.stringValue.length;case 6:return ks(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,h)=>o+Fu(h)),0)})(r.arrayValue);case 10:case 11:return(function(a){let o=0;return Mr(a.fields,((h,d)=>{o+=h.length+Fu(d)})),o})(r.mapValue);default:throw Mt(13486,{value:r})}}function sd(r){return!!r&&"integerValue"in r}function Rd(r){return!!r&&"arrayValue"in r}function Qy(r){return!!r&&"nullValue"in r}function Ky(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Gu(r){return!!r&&"mapValue"in r}function $b(r){return(r?.mapValue?.fields||{})[vv]?.stringValue===Ev}function to(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Mr(r.mapValue.fields,((i,a)=>e.mapValue.fields[i]=to(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=to(r.arrayValue.values[i]);return e}return{...r}}function Zb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Xb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Gu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(i)}setAll(e){let i=Qe.emptyPath(),a={},o=[];e.forEach(((d,g)=>{if(!i.isImmediateParentOf(g)){const _=this.getFieldsMap(i);this.applyChanges(_,a,o),a={},o=[],i=g.popLast()}d?a[g.lastSegment()]=to(d):o.push(g.lastSegment())}));const h=this.getFieldsMap(i);this.applyChanges(h,a,o)}delete(e){const i=this.field(e.popLast());Gu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Gu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){Mr(i,((o,h)=>e[o]=h));for(const o of a)delete e[o]}clone(){return new jn(to(this.value))}}function Tv(r){const e=[];return Mr(r.fields,((i,a)=>{const o=new Qe([i]);if(Gu(a)){const h=Tv(a.mapValue).fields;if(h.length===0)e.push(o);else for(const d of h)e.push(o.child(d))}else e.push(o)})),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,i,a,o,h,d,g){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(e){return new en(e,0,Ot.min(),Ot.min(),Ot.min(),jn.empty(),0)}static newFoundDocument(e,i,a,o){return new en(e,1,i,Ot.min(),a,o,0)}static newNoDocument(e,i){return new en(e,2,i,Ot.min(),Ot.min(),jn.empty(),0)}static newUnknownDocument(e,i){return new en(e,3,i,Ot.min(),Ot.min(),jn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,i){this.position=e,this.inclusive=i}}function Xy(r,e,i){let a=0;for(let o=0;o<r.position.length;o++){const h=e[o],d=r.position[o];if(h.field.isKeyField()?a=Dt.comparator(Dt.fromName(d.referenceValue),i.key):a=Oa(d,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function $y(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!gi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,i="asc"){this.field=e,this.dir=i}}function Wb(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{}class Me extends bv{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new tx(e,i,a):i==="array-contains"?new ix(e,a):i==="in"?new sx(e,a):i==="not-in"?new rx(e,a):i==="array-contains-any"?new ax(e,a):new Me(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new ex(e,a):new nx(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Oa(i,this.value)):i!==null&&Ps(this.value)===Ps(i)&&this.matchesComparison(Oa(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends bv{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new yi(e,i)}matches(e){return xv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xv(r){return r.op==="and"}function Sv(r){return Jb(r)&&xv(r)}function Jb(r){for(const e of r.filters)if(e instanceof yi)return!1;return!0}function rd(r){if(r instanceof Me)return r.field.canonicalString()+r.op.toString()+ka(r.value);if(Sv(r))return r.filters.map((e=>rd(e))).join(",");{const e=r.filters.map((i=>rd(i))).join(",");return`${r.op}(${e})`}}function Av(r,e){return r instanceof Me?(function(a,o){return o instanceof Me&&a.op===o.op&&a.field.isEqual(o.field)&&gi(a.value,o.value)})(r,e):r instanceof yi?(function(a,o){return o instanceof yi&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((h,d,g)=>h&&Av(d,o.filters[g])),!0):!1})(r,e):void Mt(19439)}function Rv(r){return r instanceof Me?(function(i){return`${i.field.canonicalString()} ${i.op} ${ka(i.value)}`})(r):r instanceof yi?(function(i){return i.op.toString()+" {"+i.getFilters().map(Rv).join(" ,")+"}"})(r):"Filter"}class tx extends Me{constructor(e,i,a){super(e,i,a),this.key=Dt.fromName(a.referenceValue)}matches(e){const i=Dt.comparator(e.key,this.key);return this.matchesComparison(i)}}class ex extends Me{constructor(e,i){super(e,"in",i),this.keys=wv("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class nx extends Me{constructor(e,i){super(e,"not-in",i),this.keys=wv("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function wv(r,e){return(e.arrayValue?.values||[]).map((i=>Dt.fromName(i.referenceValue)))}class ix extends Me{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Rd(i)&&uo(i.arrayValue,this.value)}}class sx extends Me{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&uo(this.value.arrayValue,i)}}class rx extends Me{constructor(e,i){super(e,"not-in",i)}matches(e){if(uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!uo(this.value.arrayValue,i)}}class ax extends Me{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Rd(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>uo(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,i=null,a=[],o=[],h=null,d=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=h,this.startAt=d,this.endAt=g,this.Te=null}}function Zy(r,e=null,i=[],a=[],o=null,h=null,d=null){return new lx(r,e,i,a,o,h,d)}function wd(r){const e=Ut(r);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>rd(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(h){return h.field.canonicalString()+h.dir})(a))).join(","),mc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>ka(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>ka(a))).join(",")),e.Te=i}return e.Te}function Cd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Wb(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!Av(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!$y(r.startAt,e.startAt)&&$y(r.endAt,e.endAt)}function ad(r){return Dt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,i=null,a=[],o=[],h=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ox(r,e,i,a,o,h,d,g){return new yc(r,e,i,a,o,h,d,g)}function Dd(r){return new yc(r)}function Wy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ux(r){return r.collectionGroup!==null}function eo(r){const e=Ut(r);if(e.Ie===null){e.Ie=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new je(Qe.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new ic(h,a))})),i.has(Qe.keyField().canonicalString())||e.Ie.push(new ic(Qe.keyField(),a))}return e.Ie}function hi(r){const e=Ut(r);return e.Ee||(e.Ee=cx(e,eo(r))),e.Ee}function cx(r,e){if(r.limitType==="F")return Zy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const h=o.dir==="desc"?"asc":"desc";return new ic(o.field,h)}));const i=r.endAt?new nc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new nc(r.startAt.position,r.startAt.inclusive):null;return Zy(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function ld(r,e,i){return new yc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function _c(r,e){return Cd(hi(r),hi(e))&&r.limitType===e.limitType}function Cv(r){return`${wd(hi(r))}|lt:${r.limitType}`}function Ra(r){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((o=>Rv(o))).join(", ")}]`),mc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((o=>ka(o))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((o=>ka(o))).join(",")),`Target(${a})`})(hi(r))}; limitType=${r.limitType})`}function vc(r,e){return e.isFoundDocument()&&(function(a,o){const h=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):Dt.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)})(r,e)&&(function(a,o){for(const h of eo(a))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0})(r,e)&&(function(a,o){for(const h of a.filters)if(!h.matches(o))return!1;return!0})(r,e)&&(function(a,o){return!(a.startAt&&!(function(d,g,_){const y=Xy(d,g,_);return d.inclusive?y<=0:y<0})(a.startAt,eo(a),o)||a.endAt&&!(function(d,g,_){const y=Xy(d,g,_);return d.inclusive?y>=0:y>0})(a.endAt,eo(a),o))})(r,e)}function hx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Dv(r){return(e,i)=>{let a=!1;for(const o of eo(r)){const h=fx(o,e,i);if(h!==0)return h;a=a||o.field.isKeyField()}return 0}}function fx(r,e,i){const a=r.field.isKeyField()?Dt.comparator(e.key,i.key):(function(h,d,g){const _=d.data.field(h),y=g.data.field(h);return _!==null&&y!==null?Oa(_,y):Mt(42886)})(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Mt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,h]of a)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,((i,a)=>{for(const[o,h]of a)e(o,h)}))}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new pe(Dt.comparator);function Fi(){return dx}const Nv=new pe(Dt.comparator);function $l(...r){let e=Nv;for(const i of r)e=e.insert(i.key,i);return e}function Iv(r){let e=Nv;return r.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function Sr(){return no()}function Mv(){return no()}function no(){return new Vr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const px=new pe(Dt.comparator),mx=new je(Dt.comparator);function Gt(...r){let e=mx;for(const i of r)e=e.add(i);return e}const gx=new je(Ft);function yx(){return gx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function Vv(r){return{integerValue:""+r}}function _x(r,e){return Fb(e)?Vv(e):Nd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this._=void 0}}function vx(r,e,i){return r instanceof sc?(function(o,h){const d={fields:{[gv]:{stringValue:mv},[_v]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&Ad(h)&&(h=gc(h)),h&&(d.fields[yv]=h),{mapValue:d}})(i,e):r instanceof co?Ov(r,e):r instanceof ho?kv(r,e):(function(o,h){const d=jv(o,h),g=Jy(d)+Jy(o.Ae);return sd(d)&&sd(o.Ae)?Vv(g):Nd(o.serializer,g)})(r,e)}function Ex(r,e,i){return r instanceof co?Ov(r,e):r instanceof ho?kv(r,e):i}function jv(r,e){return r instanceof rc?(function(a){return sd(a)||(function(h){return!!h&&"doubleValue"in h})(a)})(e)?e:{integerValue:0}:null}class sc extends Ec{}class co extends Ec{constructor(e){super(),this.elements=e}}function Ov(r,e){const i=Pv(e);for(const a of r.elements)i.some((o=>gi(o,a)))||i.push(a);return{arrayValue:{values:i}}}class ho extends Ec{constructor(e){super(),this.elements=e}}function kv(r,e){let i=Pv(e);for(const a of r.elements)i=i.filter((o=>!gi(o,a)));return{arrayValue:{values:i}}}class rc extends Ec{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function Jy(r){return Se(r.integerValue||r.doubleValue)}function Pv(r){return Rd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Tx(r,e){return r.field.isEqual(e.field)&&(function(a,o){return a instanceof co&&o instanceof co||a instanceof ho&&o instanceof ho?ja(a.elements,o.elements,gi):a instanceof rc&&o instanceof rc?gi(a.Ae,o.Ae):a instanceof sc&&o instanceof sc})(r.transform,e.transform)}class bx{constructor(e,i){this.version=e,this.transformResults=i}}class fi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Tc{}function Uv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Id(r.key,fi.none()):new mo(r.key,r.data,fi.none());{const i=r.data,a=jn.empty();let o=new je(Qe.comparator);for(let h of e.fields)if(!o.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?a.delete(h):a.set(h,d),o=o.add(h)}return new jr(r.key,a,new Qn(o.toArray()),fi.none())}}function xx(r,e,i){r instanceof mo?(function(o,h,d){const g=o.value.clone(),_=e_(o.fieldTransforms,h,d.transformResults);g.setAll(_),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,i):r instanceof jr?(function(o,h,d){if(!Yu(o.precondition,h))return void h.convertToUnknownDocument(d.version);const g=e_(o.fieldTransforms,h,d.transformResults),_=h.data;_.setAll(Lv(o)),_.setAll(g),h.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(r,e,i):(function(o,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,i)}function io(r,e,i,a){return r instanceof mo?(function(h,d,g,_){if(!Yu(h.precondition,d))return g;const y=h.value.clone(),T=n_(h.fieldTransforms,_,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,i,a):r instanceof jr?(function(h,d,g,_){if(!Yu(h.precondition,d))return g;const y=n_(h.fieldTransforms,_,d),T=d.data;return T.setAll(Lv(h)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((w=>w.field)))})(r,e,i,a):(function(h,d,g){return Yu(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,e,i)}function Sx(r,e){let i=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),h=jv(a.transform,o||null);h!=null&&(i===null&&(i=jn.empty()),i.set(a.field,h))}return i||null}function t_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&ja(a,o,((h,d)=>Tx(h,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class mo extends Tc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class jr extends Tc{constructor(e,i,a,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Lv(r){const e=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}})),e}function e_(r,e,i){const a=new Map;Zt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let o=0;o<i.length;o++){const h=r[o],d=h.transform,g=e.data.field(h.field);a.set(h.field,Ex(d,g,i[o]))}return a}function n_(r,e,i){const a=new Map;for(const o of r){const h=o.transform,d=i.data.field(o.field);a.set(o.field,vx(h,d,e))}return a}class Id extends Tc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ax extends Tc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&xx(h,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=io(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=io(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=Mv();return this.mutations.forEach((o=>{const h=e.get(o.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(o.key)?null:g;const _=Uv(d,g);_!==null&&a.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(Ot.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Gt())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,((i,a)=>t_(i,a)))&&ja(this.baseMutations,e.baseMutations,((i,a)=>t_(i,a)))}}class Md{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){Zt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return px})();const h=e.mutations;for(let d=0;d<h.length;d++)o=o.insert(h[d].key,a[d].version);return new Md(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Qt;function Dx(r){switch(r){case ht.OK:return Mt(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return Mt(15467,{code:r})}}function zv(r){if(r===void 0)return Hi("GRPC error has no .code"),ht.UNKNOWN;switch(r){case we.OK:return ht.OK;case we.CANCELLED:return ht.CANCELLED;case we.UNKNOWN:return ht.UNKNOWN;case we.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case we.INTERNAL:return ht.INTERNAL;case we.UNAVAILABLE:return ht.UNAVAILABLE;case we.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case we.NOT_FOUND:return ht.NOT_FOUND;case we.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case we.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case we.ABORTED:return ht.ABORTED;case we.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case we.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case we.DATA_LOSS:return ht.DATA_LOSS;default:return Mt(39323,{code:r})}}(Qt=we||(we={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Ms([4294967295,4294967295],0);function i_(r){const e=Nx().encode(r),i=new nv;return i.update(e),new Uint8Array(i.digest())}function s_(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Ms([i,a],0),new Ms([o,h],0)]}class Vd{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new Zl(`Invalid padding: ${i}`);if(a<0)throw new Zl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=Ms.fromNumber(this.ge)}ye(e,i,a){let o=e.add(i.multiply(Ms.fromNumber(a)));return o.compare(Ix)===1&&(o=new Ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=i_(e),[a,o]=s_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(a,o,h);if(!this.we(d))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new Vd(h,o,i);return a.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const i=i_(e),[a,o]=s_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(a,o,h);this.Se(d)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,i,a,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,go.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new bc(Ot.min(),o,new pe(Ft),Fi(),Gt())}}class go{constructor(e,i,a,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new go(a,i,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,i,a,o){this.be=e,this.removedTargetIds=i,this.key=a,this.De=o}}class Bv{constructor(e,i){this.targetId=e,this.Ce=i}}class qv{constructor(e,i,a=Ke.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class r_{constructor(){this.ve=0,this.Fe=a_(),this.Me=Ke.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),i=Gt(),a=Gt();return this.Fe.forEach(((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:Mt(38017,{changeType:h})}})),new go(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=a_()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Mx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fi(),this.Je=zu(),this.He=zu(),this.Ye=new pe(Ft)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:Mt(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,o)=>{this.rt(o)&&i(o)}))}st(e){const i=e.targetId,a=e.Ce.count,o=this.ot(i);if(o){const h=o.target;if(ad(h))if(a===0){const d=new Dt(h.path);this.et(i,d,en.newNoDocument(d,Ot.min()))}else Zt(a===1,20013,{expectedCount:a});else{const d=this._t(i);if(d!==a){const g=this.ut(e),_=g?this.ct(g,e,d):1;if(_!==0){this.it(i);const y=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:h=0}=i;let d,g;try{d=ks(a).toUint8Array()}catch(_){if(_ instanceof pv)return Va("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new Vd(d,o,h)}catch(_){return Va(_ instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let o=0;return a.forEach((h=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.et(i,h,null),o++)})),o}Tt(e){const i=new Map;this.ze.forEach(((h,d)=>{const g=this.ot(d);if(g){if(h.current&&ad(g.target)){const _=new Dt(g.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,en.newNoDocument(_,e))}h.Be&&(i.set(d,h.ke()),h.qe())}}));let a=Gt();this.He.forEach(((h,d)=>{let g=!0;d.forEachWhile((_=>{const y=this.ot(_);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(h))})),this.je.forEach(((h,d)=>d.setReadTime(e)));const o=new bc(e,i,this.Ye,this.je,a);return this.je=Fi(),this.Je=zu(),this.He=zu(),this.Ye=new pe(Ft),o}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new r_,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new je(Ft),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new je(Ft),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||bt("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new r_),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function zu(){return new pe(Dt.comparator)}function a_(){return new pe(Dt.comparator)}const Vx={asc:"ASCENDING",desc:"DESCENDING"},jx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ox={and:"AND",or:"OR"};class kx{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function od(r,e){return r.useProto3Json||mc(e)?e:{value:e}}function ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Px(r,e){return ac(r,e.toTimestamp())}function di(r){return Zt(!!r,49232),Ot.fromTimestamp((function(i){const a=Os(i);return new ce(a.seconds,a.nanos)})(r))}function jd(r,e){return ud(r,e).canonicalString()}function ud(r,e){const i=(function(o){return new ue(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?i:i.child(e)}function Fv(r){const e=ue.fromString(r);return Zt(Xv(e),10190,{key:e.toString()}),e}function cd(r,e){return jd(r.databaseId,e.path)}function Gf(r,e){const i=Fv(e);if(i.get(1)!==r.databaseId.projectId)throw new Rt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new Rt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Dt(Yv(i))}function Gv(r,e){return jd(r.databaseId,e)}function Ux(r){const e=Fv(r);return e.length===4?ue.emptyPath():Yv(e)}function hd(r){return new ue(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Yv(r){return Zt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function l_(r,e,i){return{name:cd(r,e),fields:i.value.mapValue.fields}}function Lx(r,e){let i;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Mt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=(function(y,T){return y.useProto3Json?(Zt(T===void 0||typeof T=="string",58123),Ke.fromBase64String(T||"")):(Zt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ke.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const T=y.code===void 0?ht.UNKNOWN:zv(y.code);return new Rt(T,y.message||"")})(d);i=new qv(a,o,h,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Gf(r,a.document.name),h=di(a.document.updateTime),d=a.document.createTime?di(a.document.createTime):Ot.min(),g=new jn({mapValue:{fields:a.document.fields}}),_=en.newFoundDocument(o,h,d,g),y=a.targetIds||[],T=a.removedTargetIds||[];i=new Qu(y,T,_.key,_)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Gf(r,a.document),h=a.readTime?di(a.readTime):Ot.min(),d=en.newNoDocument(o,h),g=a.removedTargetIds||[];i=new Qu([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Gf(r,a.document),h=a.removedTargetIds||[];i=new Qu([],h,o,null)}else{if(!("filter"in e))return Mt(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:h}=a,d=new Cx(o,h),g=a.targetId;i=new Bv(g,d)}}return i}function zx(r,e){let i;if(e instanceof mo)i={update:l_(r,e.key,e.value)};else if(e instanceof Id)i={delete:cd(r,e.key)};else if(e instanceof jr)i={update:l_(r,e.key,e.data),updateMask:Xx(e.fieldMask)};else{if(!(e instanceof Ax))return Mt(16599,{Vt:e.type});i={verify:cd(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(h,d){const g=d.transform;if(g instanceof sc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof co)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ho)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof rc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Mt(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(o,h){return h.updateTime!==void 0?{updateTime:Px(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Mt(27497)})(r,e.precondition)),i}function Bx(r,e){return r&&r.length>0?(Zt(e!==void 0,14353),r.map((i=>(function(o,h){let d=o.updateTime?di(o.updateTime):di(h);return d.isEqual(Ot.min())&&(d=di(h)),new bx(d,o.transformResults||[])})(i,e)))):[]}function qx(r,e){return{documents:[Gv(r,e.path)]}}function Hx(r,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=Gv(r,o);const h=(function(y){if(y.length!==0)return Kv(yi.create(y,"and"))})(e.filters);h&&(i.structuredQuery.where=h);const d=(function(y){if(y.length!==0)return y.map((T=>(function(j){return{field:wa(j.field),direction:Yx(j.dir)}})(T)))})(e.orderBy);d&&(i.structuredQuery.orderBy=d);const g=od(r,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:i,parent:o}}function Fx(r){let e=Ux(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){Zt(a===1,65062);const T=i.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let h=[];i.where&&(h=(function(w){const j=Qv(w);return j instanceof yi&&Sv(j)?j.getFilters():[j]})(i.where));let d=[];i.orderBy&&(d=(function(w){return w.map((j=>(function(z){return new ic(Ca(z.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(j)))})(i.orderBy));let g=null;i.limit&&(g=(function(w){let j;return j=typeof w=="object"?w.value:w,mc(j)?null:j})(i.limit));let _=null;i.startAt&&(_=(function(w){const j=!!w.before,K=w.values||[];return new nc(K,j)})(i.startAt));let y=null;return i.endAt&&(y=(function(w){const j=!w.before,K=w.values||[];return new nc(K,j)})(i.endAt)),ox(e,o,d,h,g,"F",_,y)}function Gx(r,e){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt(28987,{purpose:o})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Qv(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Ca(i.unaryFilter.field);return Me.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Ca(i.unaryFilter.field);return Me.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Ca(i.unaryFilter.field);return Me.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ca(i.unaryFilter.field);return Me.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Mt(61313);default:return Mt(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Me.create(Ca(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Mt(58110);default:return Mt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return yi.create(i.compositeFilter.filters.map((a=>Qv(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Mt(1026)}})(i.compositeFilter.op))})(r):Mt(30097,{filter:r})}function Yx(r){return Vx[r]}function Qx(r){return jx[r]}function Kx(r){return Ox[r]}function wa(r){return{fieldPath:r.canonicalString()}}function Ca(r){return Qe.fromServerFormat(r.fieldPath)}function Kv(r){return r instanceof Me?(function(i){if(i.op==="=="){if(Ky(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NAN"}};if(Qy(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Ky(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NOT_NAN"}};if(Qy(i.value))return{unaryFilter:{field:wa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(i.field),op:Qx(i.op),value:i.value}}})(r):r instanceof yi?(function(i){const a=i.getFilters().map((o=>Kv(o)));return a.length===1?a[0]:{compositeFilter:{op:Kx(i.op),filters:a}}})(r):Mt(54877,{filter:r})}function Xx(r){const e=[];return r.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Xv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,i,a,o,h=Ot.min(),d=Ot.min(),g=Ke.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.yt=e}}function Zx(r){const e=Fx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.Cn=new Jx}addToCollectionParentIndex(e,i){return this.Cn.add(i),ot.resolve()}getCollectionParents(e,i){return ot.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return ot.resolve()}deleteFieldIndex(e,i){return ot.resolve()}deleteAllFieldIndexes(e){return ot.resolve()}createTargetIndexes(e,i){return ot.resolve()}getDocumentsMatchingTarget(e,i){return ot.resolve(null)}getIndexType(e,i){return ot.resolve(0)}getFieldIndexes(e,i){return ot.resolve([])}getNextCollectionGroupToUpdate(e){return ot.resolve(null)}getMinOffset(e,i){return ot.resolve(js.min())}getMinOffsetFromCollectionGroup(e,i){return ot.resolve(js.min())}updateCollectionGroup(e,i,a){return ot.resolve()}updateIndexEntries(e,i){return ot.resolve()}}class Jx{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new je(ue.comparator),h=!o.has(a);return this.index[i]=o.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new je(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$v=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn($v,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pa(0)}static cr(){return new Pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="LruGarbageCollector",tS=1048576;function c_([r,e],[i,a]){const o=Ft(r,i);return o===0?Ft(e,a):o}class eS{constructor(e){this.Ir=e,this.buffer=new je(c_),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();c_(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class nS{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){bt(u_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Ba(i)?bt(u_,"Ignoring IndexedDB error during garbage collection: ",i):await za(i)}await this.Vr(3e5)}))}}class iS{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return ot.resolve(pc.ce);const a=new eS(i);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(o_)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o_):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,o,h,d,g,_,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,i)))).next((w=>(h=w,_=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(y=Date.now(),Aa()<=Kt.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${h} targets in `+(_-g)+`ms
	Removed ${w} documents in `+(y-_)+`ms
Total Duration: ${y-T}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:w}))))}}function sS(r,e){return new iS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.changes=new Vr((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?ot.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,i)))).next((o=>(a!==null&&io(a.mutation,o,Qn.empty(),ce.now()),o)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,Gt()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=Gt()){const o=Sr();return this.populateOverlays(e,o,i).next((()=>this.computeViews(e,i,o,a).next((h=>{let d=$l();return h.forEach(((g,_)=>{d=d.insert(g,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,i){const a=Sr();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,Gt())))}populateOverlays(e,i,a){const o=[];return a.forEach((h=>{i.has(h)||o.push(h)})),this.documentOverlayCache.getOverlays(e,o).next((h=>{h.forEach(((d,g)=>{i.set(d,g)}))}))}computeViews(e,i,a,o){let h=Fi();const d=no(),g=(function(){return no()})();return i.forEach(((_,y)=>{const T=a.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof jr)?h=h.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),io(T.mutation,y,T.mutation.getFieldMask(),ce.now())):d.set(y.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,h).next((_=>(_.forEach(((y,T)=>d.set(y,T))),i.forEach(((y,T)=>g.set(y,new aS(T,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,i){const a=no();let o=new pe(((d,g)=>d-g)),h=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((d=>{for(const g of d)g.keys().forEach((_=>{const y=i.get(_);if(y===null)return;let T=a.get(_)||Qn.empty();T=g.applyToLocalView(y,T),a.set(_,T);const w=(o.get(g.batchId)||Gt()).add(_);o=o.insert(g.batchId,w)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),y=_.key,T=_.value,w=Mv();T.forEach((j=>{if(!h.has(j)){const K=Uv(i.get(j),a.get(j));K!==null&&w.set(j,K),h=h.add(j)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ot.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,o){return(function(d){return Dt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):ux(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next((h=>{const d=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-h.size):ot.resolve(Sr());let g=ao,_=h;return d.next((y=>ot.forEach(y,((T,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),h.get(T)?ot.resolve():this.remoteDocumentCache.getEntry(e,T).next((j=>{_=_.insert(T,j)}))))).next((()=>this.populateOverlays(e,y,h))).next((()=>this.computeViews(e,_,y,Gt()))).next((T=>({batchId:g,changes:Iv(T)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Dt(i)).next((a=>{let o=$l();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const h=i.collectionGroup;let d=$l();return this.indexManager.getCollectionParents(e,h).next((g=>ot.forEach(g,(_=>{const y=(function(w,j){return new yc(j,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(i,_.child(h));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((T=>{T.forEach(((w,j)=>{d=d.insert(w,j)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,i,a,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,o)))).next((d=>{h.forEach(((_,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,en.newInvalidDocument(T)))}));let g=$l();return d.forEach(((_,y)=>{const T=h.get(_);T!==void 0&&io(T.mutation,y,Qn.empty(),ce.now()),vc(i,y)&&(g=g.insert(_,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return ot.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:di(o.createTime)}})(i)),ot.resolve()}getNamedQuery(e,i){return ot.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:Zx(o.bundledQuery),readTime:di(o.readTime)}})(i)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.overlays=new pe(Dt.comparator),this.qr=new Map}getOverlay(e,i){return ot.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Sr();return ot.forEach(i,(o=>this.getOverlay(e,o).next((h=>{h!==null&&a.set(o,h)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((o,h)=>{this.St(e,i,h)})),ot.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(a)),ot.resolve()}getOverlaysForCollection(e,i,a){const o=Sr(),h=i.length+1,d=new Dt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,y=_.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===h&&_.largestBatchId>a&&o.set(_.getKey(),_)}return ot.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let h=new pe(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>a){let T=h.get(y.largestBatchId);T===null&&(T=Sr(),h=h.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Sr(),_=h.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((y,T)=>g.set(y,T))),!(g.size()>=o)););return ot.resolve(g)}St(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new wx(i,a));let h=this.qr.get(i);h===void 0&&(h=Gt(),this.qr.set(i,h)),this.qr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return ot.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this.Qr=new je(Be.$r),this.Ur=new je(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new Be(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new Be(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new Dt(new ue([])),a=new Be(i,e),o=new Be(i,e+1),h=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),h.push(d.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Dt(new ue([])),a=new Be(i,e),o=new Be(i,e+1);let h=Gt();return this.Ur.forEachInRange([a,o],(d=>{h=h.add(d.key)})),h}containsKey(e){const i=new Be(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class Be{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Dt.comparator(e.key,i.key)||Ft(e.Yr,i.Yr)}static Kr(e,i){return Ft(e.Yr,i.Yr)||Dt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new je(Be.$r)}checkEmpty(e){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Rx(h,i,a,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Be(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ot.resolve(d)}lookupMutationBatch(e,i){return ot.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.ei(a),h=o<0?0:o;return ot.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?Sd:this.tr-1)}getAllMutationBatches(e){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([a,o],(d=>{const g=this.Xr(d.Yr);h.push(g)})),ot.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new je(Ft);return i.forEach((o=>{const h=new Be(o,0),d=new Be(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],(g=>{a=a.add(g.Yr)}))})),ot.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let h=a;Dt.isDocumentKey(h)||(h=h.child(""));const d=new Be(new Dt(h),0);let g=new je(Ft);return this.Zr.forEachWhile((_=>{const y=_.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(g=g.add(_.Yr)),!0)}),d),ot.resolve(this.ti(g))}ti(e){const i=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&i.push(o)})),i}removeMutationBatch(e,i){Zt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ot.forEach(i.mutations,(o=>{const h=new Be(o.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new Be(i,0),o=this.Zr.firstAfterOrEqual(a);return ot.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ot.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.ri=e,this.docs=(function(){return new pe(Dt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),h=o?o.size:0,d=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ot.resolve(a?a.document.mutableCopy():en.newInvalidDocument(i))}getEntries(e,i){let a=Fi();return i.forEach((o=>{const h=this.docs.get(o);a=a.insert(o,h?h.document.mutableCopy():en.newInvalidDocument(o))})),ot.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let h=Fi();const d=i.path,g=new Dt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:y,value:{document:T}}=_.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||zb(Lb(T),a)<=0||(o.has(T.key)||vc(i,T))&&(h=h.insert(T.key,T.mutableCopy()))}return ot.resolve(h)}getAllFromCollectionGroup(e,i,a,o){Mt(9500)}ii(e,i){return ot.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new dS(this)}getSize(e){return ot.resolve(this.size)}}class dS extends rS{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ot.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.persistence=e,this.si=new Vr((i=>wd(i)),Cd),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.oi=0,this._i=new Od,this.targetCount=0,this.ai=Pa.ur()}forEachTarget(e,i){return this.si.forEach(((a,o)=>i(o))),ot.resolve()}getLastRemoteSnapshotVersion(e){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ot.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),ot.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Pa(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,ot.resolve()}updateTargetData(e,i){return this.Pr(i),ot.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,ot.resolve()}removeTargets(e,i,a){let o=0;const h=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ot.waitFor(h).next((()=>o))}getTargetCount(e){return ot.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return ot.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),ot.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach((d=>{h.push(o.markPotentiallyOrphaned(e,d))})),ot.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),ot.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return ot.resolve(a)}containsKey(e,i){return ot.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,i){this.ui={},this.overlays={},this.ci=new pc(0),this.li=!1,this.li=!0,this.hi=new cS,this.referenceDelegate=e(this),this.Pi=new pS(this),this.indexManager=new Wx,this.remoteDocumentCache=(function(o){return new fS(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new $x(i),this.Ii=new oS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new uS,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new hS(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){bt("MemoryPersistence","Starting transaction:",e);const o=new mS(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((h=>this.referenceDelegate.di(o).next((()=>h)))).toPromise().then((h=>(o.raiseOnCommittedEvent(),h)))}Ai(e,i){return ot.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class mS extends qb{constructor(e){super(),this.currentSequenceNumber=e}}class kd{constructor(e){this.persistence=e,this.Ri=new Od,this.Vi=null}static mi(e){return new kd(e)}get fi(){if(this.Vi)return this.Vi;throw Mt(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),ot.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),ot.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),ot.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((o=>{o.forEach((h=>this.fi.add(h.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.fi,(a=>{const o=Dt.fromPath(a);return this.gi(e,o).next((h=>{h||i.removeEntry(o,Ot.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return ot.or([()=>ot.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class lc{constructor(e,i){this.persistence=e,this.pi=new Vr((a=>Gb(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=sS(this,i)}static mi(e,i){return new lc(e,i)}Ei(){}di(e){return ot.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((o=>a+o))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return ot.forEach(this.pi,((a,o)=>this.br(e,a,o).next((h=>h?ot.resolve():i(o)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,i).next((g=>{g||(a++,h.removeEntry(d,Ot.min()))})))).next((()=>h.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),ot.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ot.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ot.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),ot.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Fu(e.data.value)),i}br(e,i,a){return ot.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.pi.get(i);return ot.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=o}static As(e,i){let a=Gt(),o=Gt();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new Pd(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dT()?8:Hb(hT())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,o){const h={result:null};return this.ys(e,i).next((d=>{h.result=d})).next((()=>{if(!h.result)return this.ws(e,i,o,a).next((d=>{h.result=d}))})).next((()=>{if(h.result)return;const d=new gS;return this.Ss(e,i,d).next((g=>{if(h.result=g,this.Vs)return this.bs(e,i,d,g.size)}))})).next((()=>h.result))}bs(e,i,a,o){return a.documentReadCount<this.fs?(Aa()<=Kt.DEBUG&&bt("QueryEngine","SDK will not create cache indexes for query:",Ra(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ot.resolve()):(Aa()<=Kt.DEBUG&&bt("QueryEngine","Query:",Ra(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Aa()<=Kt.DEBUG&&bt("QueryEngine","The SDK decides to create cache indexes for query:",Ra(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(i))):ot.resolve())}ys(e,i){if(Wy(i))return ot.resolve(null);let a=hi(i);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=ld(i,null,"F"),a=hi(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((h=>{const d=Gt(...h);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,a).next((_=>{const y=this.Ds(i,g);return this.Cs(i,y,d,_.readTime)?this.ys(e,ld(i,null,"F")):this.vs(e,y,i,_)}))))})))))}ws(e,i,a,o){return Wy(i)||o.isEqual(Ot.min())?ot.resolve(null):this.ps.getDocuments(e,a).next((h=>{const d=this.Ds(i,h);return this.Cs(i,d,a,o)?ot.resolve(null):(Aa()<=Kt.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ra(i)),this.vs(e,d,i,Ub(o,ao)).next((g=>g)))}))}Ds(e,i){let a=new je(Dv(e));return i.forEach(((o,h)=>{vc(e,h)&&(a=a.add(h))})),a}Cs(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,i,a){return Aa()<=Kt.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",Ra(i)),this.ps.getDocumentsMatchingQuery(e,i,js.min(),a)}vs(e,i,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((h=>(i.forEach((d=>{h=h.insert(d.key,d)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="LocalStore",_S=3e8;class vS{constructor(e,i,a,o){this.persistence=e,this.Fs=i,this.serializer=o,this.Ms=new pe(Ft),this.xs=new Vr((h=>wd(h)),Cd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function ES(r,e,i,a){return new vS(r,e,i,a)}async function Wv(r,e){const i=Ut(r);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next((h=>(o=h,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((h=>{const d=[],g=[];let _=Gt();for(const y of o){d.push(y.batchId);for(const T of y.mutations)_=_.add(T.key)}for(const y of h){g.push(y.batchId);for(const T of y.mutations)_=_.add(T.key)}return i.localDocuments.getDocuments(a,_).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function TS(r,e){const i=Ut(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,_,y,T){const w=y.batch,j=w.keys();let K=ot.resolve();return j.forEach((z=>{K=K.next((()=>T.getEntry(_,z))).next((it=>{const H=y.docVersions.get(z);Zt(H!==null,48541),it.version.compareTo(H)<0&&(w.applyToRemoteDocument(it,y),it.isValidDocument()&&(it.setReadTime(y.commitVersion),T.addEntry(it)))}))})),K.next((()=>g.mutationQueue.removeMutationBatch(_,w)))})(i,a,e,h).next((()=>h.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let _=Gt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(_=_.add(g.batch.mutations[y].key));return _})(e)))).next((()=>i.localDocuments.getDocuments(a,o)))}))}function Jv(r){const e=Ut(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function bS(r,e){const i=Ut(r),a=e.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const g=[];e.targetChanges.forEach(((T,w)=>{const j=o.get(w);if(!j)return;g.push(i.Pi.removeMatchingKeys(h,T.removedDocuments,w).next((()=>i.Pi.addMatchingKeys(h,T.addedDocuments,w))));let K=j.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(w)!==null?K=K.withResumeToken(Ke.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):T.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(T.resumeToken,a)),o=o.insert(w,K),(function(it,H,et){return it.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-it.snapshotVersion.toMicroseconds()>=_S?!0:et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size>0})(j,K,T)&&g.push(i.Pi.updateTargetData(h,K))}));let _=Fi(),y=Gt();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,T))})),g.push(xS(h,d,e.documentUpdates).next((T=>{_=T.ks,y=T.qs}))),!a.isEqual(Ot.min())){const T=i.Pi.getLastRemoteSnapshotVersion(h).next((w=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,a)));g.push(T)}return ot.waitFor(g).next((()=>d.apply(h))).next((()=>i.localDocuments.getLocalViewOfDocuments(h,_,y))).next((()=>_))})).then((h=>(i.Ms=o,h)))}function xS(r,e,i){let a=Gt(),o=Gt();return i.forEach((h=>a=a.add(h))),e.getEntries(r,a).next((h=>{let d=Fi();return i.forEach(((g,_)=>{const y=h.get(g);_.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(Ot.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||_.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):bt(Ud,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",_.version)})),{ks:d,qs:o}}))}function SS(r,e){const i=Ut(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Sd),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function AS(r,e){const i=Ut(r);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return i.Pi.getTargetData(a,e).next((h=>h?(o=h,ot.resolve(o)):i.Pi.allocateTargetId(a).next((d=>(o=new Cs(e,d,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=i.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function fd(r,e,i){const a=Ut(r),o=a.Ms.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ba(d))throw d;bt(Ud,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function h_(r,e,i){const a=Ut(r);let o=Ot.min(),h=Gt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,y,T){const w=Ut(_),j=w.xs.get(T);return j!==void 0?ot.resolve(w.Ms.get(j)):w.Pi.getTargetData(y,T)})(a,d,hi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((_=>{h=_}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,i?o:Ot.min(),i?h:Gt()))).next((g=>(RS(a,hx(e),g),{documents:g,Qs:h})))))}function RS(r,e,i){let a=r.Os.get(e)||Ot.min();i.forEach(((o,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)})),r.Os.set(e,a)}class f_{constructor(){this.activeTargetIds=yx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wS{constructor(){this.Mo=new f_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new f_,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="ConnectivityMonitor";class p_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){bt(d_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){bt(d_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function dd(){return Bu===null?Bu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="RestConnection",DS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===tc?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,i,a,o,h){const d=dd(),g=this.zo(e,i.toUriEncodedString());bt(Yf,`Sending RPC '${e}' ${d}:`,g,a);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,h);const{host:y}=new URL(g),T=dc(y);return this.Jo(e,g,_,a,T).then((w=>(bt(Yf,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Va(Yf,`RPC '${e}' ${d} failed with error: `,w,"url: ",g,"request:",a),w}))}Ho(e,i,a,o,h,d){return this.Go(e,i,a,o,h)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+La})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,h)=>e[h]=o)),a&&a.headers.forEach(((o,h)=>e[h]=o))}zo(e,i){const a=DS[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class MS extends NS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,o,h){const d=dd();return new Promise(((g,_)=>{const y=new iv;y.setWithCredentials(!0),y.listenOnce(sv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Hu.NO_ERROR:const w=y.getResponseJson();bt(Je,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),g(w);break;case Hu.TIMEOUT:bt(Je,`RPC '${e}' ${d} timed out`),_(new Rt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:const j=y.getStatus();if(bt(Je,`RPC '${e}' ${d} failed with status:`,j,"response text:",y.getResponseText()),j>0){let K=y.getResponseJson();Array.isArray(K)&&(K=K[0]);const z=K?.error;if(z&&z.status&&z.message){const it=(function(et){const ft=et.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(ft)>=0?ft:ht.UNKNOWN})(z.status);_(new Rt(it,z.message))}else _(new Rt(ht.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new Rt(ht.UNAVAILABLE,"Connection failed."));break;default:Mt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{bt(Je,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);bt(Je,`RPC '${e}' ${d} sending request:`,o),y.send(i,"POST",T,a,15)}))}T_(e,i,a){const o=dd(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=lv(),g=av(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(_.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,a),_.encodeInitMessageHeaders=!0;const T=h.join("");bt(Je,`Creating RPC '${e}' stream ${o}: ${T}`,_);const w=d.createWebChannel(T,_);this.I_(w);let j=!1,K=!1;const z=new IS({Yo:H=>{K?bt(Je,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(j||(bt(Je,`Opening RPC '${e}' stream ${o} transport.`),w.open(),j=!0),bt(Je,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Zo:()=>w.close()}),it=(H,et,ft)=>{H.listen(et,(yt=>{try{ft(yt)}catch(gt){setTimeout((()=>{throw gt}),0)}}))};return it(w,Xl.EventType.OPEN,(()=>{K||(bt(Je,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),it(w,Xl.EventType.CLOSE,(()=>{K||(K=!0,bt(Je,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(w))})),it(w,Xl.EventType.ERROR,(H=>{K||(K=!0,Va(Je,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),z.a_(new Rt(ht.UNAVAILABLE,"The operation could not be completed")))})),it(w,Xl.EventType.MESSAGE,(H=>{if(!K){const et=H.data[0];Zt(!!et,16349);const ft=et,yt=ft?.error||ft[0]?.error;if(yt){bt(Je,`RPC '${e}' stream ${o} received error:`,yt);const gt=yt.status;let vt=(function(R){const S=we[R];if(S!==void 0)return zv(S)})(gt),st=yt.message;vt===void 0&&(vt=ht.INTERNAL,st="Unknown error status: "+gt+" with message "+yt.message),K=!0,z.a_(new Rt(vt,st)),w.close()}else bt(Je,`RPC '${e}' stream ${o} received:`,et),z.u_(et)}})),it(g,rv.STAT_EVENT,(H=>{H.stat===ed.PROXY?bt(Je,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===ed.NOPROXY&&bt(Je,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(r){return new kx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,i,a=1e3,o=1.5,h=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=o,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-a);o>0&&bt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="PersistentStream";class e0{constructor(e,i,a,o,h,d,g,_){this.Mi=e,this.S_=a,this.b_=o,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new t0(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===ht.RESOURCE_EXHAUSTED?(Hi(i.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===i&&this.G_(a,o)}),(a=>{e((()=>{const o=new Rt(ht.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return bt(m_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(bt(m_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VS extends e0{constructor(e,i,a,o,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=Lx(this.serializer,e),a=(function(h){if(!("targetChange"in h))return Ot.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?Ot.min():d.readTime?di(d.readTime):Ot.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=hd(this.serializer),i.addTarget=(function(h,d){let g;const _=d.target;if(g=ad(_)?{documents:qx(h,_)}:{query:Hx(h,_).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=Hv(h,d.resumeToken);const y=od(h,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ot.min())>0){g.readTime=ac(h,d.snapshotVersion.toTimestamp());const y=od(h,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const a=Gx(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=hd(this.serializer),i.removeTarget=e,this.q_(i)}}class jS extends e0{constructor(e,i,a,o,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return Zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=Bx(e.writeResults,e.commitTime),a=di(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=hd(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>zx(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{}class kS extends OS{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Rt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Go(e,ud(i,a),o,h,d))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Rt(ht.UNKNOWN,h.toString())}))}Ho(e,i,a,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,ud(i,a),o,d,g,h))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Rt(ht.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class PS{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hi(i),this.aa=!1):bt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="RemoteStore";class US{constructor(e,i,a,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Or(this)&&(bt(Nr,"Restarting streams for network reachability change."),await(async function(_){const y=Ut(_);y.Ea.add(4),await yo(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Sc(y)})(this))}))})),this.Ra=new PS(a,o)}}async function Sc(r){if(Or(r))for(const e of r.da)await e(!0)}async function yo(r){for(const e of r.da)await e(!1)}function n0(r,e){const i=Ut(r);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),qd(i)?Bd(i):qa(i).O_()&&zd(i,e))}function Ld(r,e){const i=Ut(r),a=qa(i);i.Ia.delete(e),a.O_()&&i0(i,e),i.Ia.size===0&&(a.O_()?a.L_():Or(i)&&i.Ra.set("Unknown"))}function zd(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}qa(r).Y_(e)}function i0(r,e){r.Va.Ue(e),qa(r).Z_(e)}function Bd(r){r.Va=new Mx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),qa(r).start(),r.Ra.ua()}function qd(r){return Or(r)&&!qa(r).x_()&&r.Ia.size>0}function Or(r){return Ut(r).Ea.size===0}function s0(r){r.Va=void 0}async function LS(r){r.Ra.set("Online")}async function zS(r){r.Ia.forEach(((e,i)=>{zd(r,e)}))}async function BS(r,e){s0(r),qd(r)?(r.Ra.ha(e),Bd(r)):r.Ra.set("Unknown")}async function qS(r,e,i){if(r.Ra.set("Online"),e instanceof qv&&e.state===2&&e.cause)try{await(async function(o,h){const d=h.cause;for(const g of h.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(r,e)}catch(a){bt(Nr,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await oc(r,a)}else if(e instanceof Qu?r.Va.Ze(e):e instanceof Bv?r.Va.st(e):r.Va.tt(e),!i.isEqual(Ot.min()))try{const a=await Jv(r.localStore);i.compareTo(a)>=0&&await(function(h,d){const g=h.Va.Tt(d);return g.targetChanges.forEach(((_,y)=>{if(_.resumeToken.approximateByteSize()>0){const T=h.Ia.get(y);T&&h.Ia.set(y,T.withResumeToken(_.resumeToken,d))}})),g.targetMismatches.forEach(((_,y)=>{const T=h.Ia.get(_);if(!T)return;h.Ia.set(_,T.withResumeToken(Ke.EMPTY_BYTE_STRING,T.snapshotVersion)),i0(h,_);const w=new Cs(T.target,_,y,T.sequenceNumber);zd(h,w)})),h.remoteSyncer.applyRemoteEvent(g)})(r,i)}catch(a){bt(Nr,"Failed to raise snapshot:",a),await oc(r,a)}}async function oc(r,e,i){if(!Ba(e))throw e;r.Ea.add(1),await yo(r),r.Ra.set("Offline"),i||(i=()=>Jv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{bt(Nr,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Sc(r)}))}function r0(r,e){return e().catch((i=>oc(r,i,e)))}async function Ac(r){const e=Ut(r),i=Us(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sd;for(;HS(e);)try{const o=await SS(e.localStore,a);if(o===null){e.Ta.length===0&&i.L_();break}a=o.batchId,FS(e,o)}catch(o){await oc(e,o)}a0(e)&&l0(e)}function HS(r){return Or(r)&&r.Ta.length<10}function FS(r,e){r.Ta.push(e);const i=Us(r);i.O_()&&i.X_&&i.ea(e.mutations)}function a0(r){return Or(r)&&!Us(r).x_()&&r.Ta.length>0}function l0(r){Us(r).start()}async function GS(r){Us(r).ra()}async function YS(r){const e=Us(r);for(const i of r.Ta)e.ea(i.mutations)}async function QS(r,e,i){const a=r.Ta.shift(),o=Md.from(a,e,i);await r0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Ac(r)}async function KS(r,e){e&&Us(r).X_&&await(async function(a,o){if((function(d){return Dx(d)&&d!==ht.ABORTED})(o.code)){const h=a.Ta.shift();Us(a).B_(),await r0(a,(()=>a.remoteSyncer.rejectFailedWrite(h.batchId,o))),await Ac(a)}})(r,e),a0(r)&&l0(r)}async function g_(r,e){const i=Ut(r);i.asyncQueue.verifyOperationInProgress(),bt(Nr,"RemoteStore received new credentials");const a=Or(i);i.Ea.add(3),await yo(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Sc(i)}async function XS(r,e){const i=Ut(r);e?(i.Ea.delete(2),await Sc(i)):e||(i.Ea.add(2),await yo(i),i.Ra.set("Unknown"))}function qa(r){return r.ma||(r.ma=(function(i,a,o){const h=Ut(i);return h.sa(),new VS(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(r.datastore,r.asyncQueue,{Xo:LS.bind(null,r),t_:zS.bind(null,r),r_:BS.bind(null,r),H_:qS.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),qd(r)?Bd(r):r.Ra.set("Unknown")):(await r.ma.stop(),s0(r))}))),r.ma}function Us(r){return r.fa||(r.fa=(function(i,a,o){const h=Ut(i);return h.sa(),new jS(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:GS.bind(null,r),r_:KS.bind(null,r),ta:YS.bind(null,r),na:QS.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Ac(r)):(await r.fa.stop(),r.Ta.length>0&&(bt(Nr,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,i,a,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=h,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,h){const d=Date.now()+a,g=new Hd(e,i,d,o,h);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fd(r,e){if(Hi("AsyncQueue",`${e}: ${r}`),Ba(r))return new Rt(ht.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Dt.comparator(i.key,a.key):(i,a)=>Dt.comparator(i.key,a.key),this.keyedMap=$l(),this.sortedSet=new pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new Na;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.ga=new pe(Dt.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Mt(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class Ua{constructor(e,i,a,o,h,d,g,_,y){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(e,i,a,o,h){const d=[];return i.forEach((g=>{d.push({type:0,doc:g})})),new Ua(e,i,Na.emptySet(i),d,a,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZS{constructor(){this.queries=__(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const o=Ut(i),h=o.queries;o.queries=__(),h.forEach(((d,g)=>{for(const _ of g.Sa)_.onError(a)}))})(this,new Rt(ht.ABORTED,"Firestore shutting down"))}}function __(){return new Vr((r=>Cv(r)),_c)}async function WS(r,e){const i=Ut(r);let a=3;const o=e.query;let h=i.queries.get(o);h?!h.ba()&&e.Da()&&(a=2):(h=new $S,a=e.Da()?0:1);try{switch(a){case 0:h.wa=await i.onListen(o,!0);break;case 1:h.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const g=Fd(d,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(g)}i.queries.set(o,h),h.Sa.push(e),e.va(i.onlineState),h.wa&&e.Fa(h.wa)&&Gd(i)}async function JS(r,e){const i=Ut(r),a=e.query;let o=3;const h=i.queries.get(a);if(h){const d=h.Sa.indexOf(e);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?o=e.Da()?0:1:!h.ba()&&e.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function tA(r,e){const i=Ut(r);let a=!1;for(const o of e){const h=o.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Fa(o)&&(a=!0);d.wa=o}}a&&Gd(i)}function eA(r,e,i){const a=Ut(r),o=a.queries.get(e);if(o)for(const h of o.Sa)h.onError(i);a.queries.delete(e)}function Gd(r){r.Ca.forEach((e=>{e.next()}))}var pd,v_;(v_=pd||(pd={})).Ma="default",v_.Cache="cache";class nA{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ua(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.key=e}}class u0{constructor(e){this.key=e}}class iA{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=Dv(e),this.tu=new Na(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new y_,o=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=o,g=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,w)=>{const j=o.get(T),K=vc(this.query,w)?w:null,z=!!j&&this.mutatedKeys.has(j.key),it=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let H=!1;j&&K?j.data.isEqual(K.data)?z!==it&&(a.track({type:3,doc:K}),H=!0):this.su(j,K)||(a.track({type:2,doc:K}),H=!0,(_&&this.eu(K,_)>0||y&&this.eu(K,y)<0)&&(g=!0)):!j&&K?(a.track({type:0,doc:K}),H=!0):j&&!K&&(a.track({type:1,doc:j}),H=!0,(_||y)&&(g=!0)),H&&(K?(d=d.add(K),h=it?h.add(T):h.delete(T)):(d=d.delete(T),h=h.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),h=h.delete(T.key),a.track({type:1,doc:T})}return{tu:d,iu:a,Cs:g,mutatedKeys:h}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,w)=>(function(K,z){const it=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt(20277,{Rt:H})}};return it(K)-it(z)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(a),o=o??!1;const g=i&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,y=_!==this.Za;return this.Za=_,d.length!==0||y?{snapshot:new Ua(this.query,e.tu,h,d,e.mutatedKeys,_===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new y_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new u0(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new o0(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=Gt();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return Ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yd="SyncEngine";class sA{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class rA{constructor(e){this.key=e,this.hu=!1}}class aA{constructor(e,i,a,o,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Vr((g=>Cv(g)),_c),this.Iu=new Map,this.Eu=new Set,this.du=new pe(Dt.comparator),this.Au=new Map,this.Ru=new Od,this.Vu={},this.mu=new Map,this.fu=Pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lA(r,e,i=!0){const a=m0(r);let o;const h=a.Tu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.lu()):o=await c0(a,e,i,!0),o}async function oA(r,e){const i=m0(r);await c0(i,e,!0,!1)}async function c0(r,e,i,a){const o=await AS(r.localStore,hi(e)),h=o.targetId,d=r.sharedClientState.addLocalQueryTarget(h,i);let g;return a&&(g=await uA(r,e,h,d==="current",o.resumeToken)),r.isPrimaryClient&&i&&n0(r.remoteStore,o),g}async function uA(r,e,i,a,o){r.pu=(w,j,K)=>(async function(it,H,et,ft){let yt=H.view.ru(et);yt.Cs&&(yt=await h_(it.localStore,H.query,!1).then((({documents:D})=>H.view.ru(D,yt))));const gt=ft&&ft.targetChanges.get(H.targetId),vt=ft&&ft.targetMismatches.get(H.targetId)!=null,st=H.view.applyChanges(yt,it.isPrimaryClient,gt,vt);return T_(it,H.targetId,st.au),st.snapshot})(r,w,j,K);const h=await h_(r.localStore,e,!0),d=new iA(e,h.Qs),g=d.ru(h.documents),_=go.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",o),y=d.applyChanges(g,r.isPrimaryClient,_);T_(r,i,y.au);const T=new sA(e,i,d);return r.Tu.set(e,T),r.Iu.has(i)?r.Iu.get(i).push(e):r.Iu.set(i,[e]),y.snapshot}async function cA(r,e,i){const a=Ut(r),o=a.Tu.get(e),h=a.Iu.get(o.targetId);if(h.length>1)return a.Iu.set(o.targetId,h.filter((d=>!_c(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await fd(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Ld(a.remoteStore,o.targetId),md(a,o.targetId)})).catch(za)):(md(a,o.targetId),await fd(a.localStore,o.targetId,!0))}async function hA(r,e){const i=Ut(r),a=i.Tu.get(e),o=i.Iu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Ld(i.remoteStore,a.targetId))}async function fA(r,e,i){const a=vA(r);try{const o=await(function(d,g){const _=Ut(d),y=ce.now(),T=g.reduce(((K,z)=>K.add(z.key)),Gt());let w,j;return _.persistence.runTransaction("Locally write mutations","readwrite",(K=>{let z=Fi(),it=Gt();return _.Ns.getEntries(K,T).next((H=>{z=H,z.forEach(((et,ft)=>{ft.isValidDocument()||(it=it.add(et))}))})).next((()=>_.localDocuments.getOverlayedDocuments(K,z))).next((H=>{w=H;const et=[];for(const ft of g){const yt=Sx(ft,w.get(ft.key).overlayedDocument);yt!=null&&et.push(new jr(ft.key,yt,Tv(yt.value.mapValue),fi.exists(!0)))}return _.mutationQueue.addMutationBatch(K,y,et,g)})).next((H=>{j=H;const et=H.applyToLocalDocumentSet(w,it);return _.documentOverlayCache.saveOverlays(K,H.batchId,et)}))})).then((()=>({batchId:j.batchId,changes:Iv(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,g,_){let y=d.Vu[d.currentUser.toKey()];y||(y=new pe(Ft)),y=y.insert(g,_),d.Vu[d.currentUser.toKey()]=y})(a,o.batchId,i),await _o(a,o.changes),await Ac(a.remoteStore)}catch(o){const h=Fd(o,"Failed to persist write");i.reject(h)}}async function h0(r,e){const i=Ut(r);try{const a=await bS(i.localStore,e);e.targetChanges.forEach(((o,h)=>{const d=i.Au.get(h);d&&(Zt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Zt(d.hu,14607):o.removedDocuments.size>0&&(Zt(d.hu,42227),d.hu=!1))})),await _o(i,a,e)}catch(a){await za(a)}}function E_(r,e,i){const a=Ut(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.Tu.forEach(((h,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const _=Ut(d);_.onlineState=g;let y=!1;_.queries.forEach(((T,w)=>{for(const j of w.Sa)j.va(g)&&(y=!0)})),y&&Gd(_)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function dA(r,e,i){const a=Ut(r);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Au.get(e),h=o&&o.key;if(h){let d=new pe(Dt.comparator);d=d.insert(h,en.newNoDocument(h,Ot.min()));const g=Gt().add(h),_=new bc(Ot.min(),new Map,new pe(Ft),d,g);await h0(a,_),a.du=a.du.remove(h),a.Au.delete(e),Qd(a)}else await fd(a.localStore,e,!1).then((()=>md(a,e,i))).catch(za)}async function pA(r,e){const i=Ut(r),a=e.batch.batchId;try{const o=await TS(i.localStore,e);d0(i,a,null),f0(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await _o(i,o)}catch(o){await za(o)}}async function mA(r,e,i){const a=Ut(r);try{const o=await(function(d,g){const _=Ut(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return _.mutationQueue.lookupMutationBatch(y,g).next((w=>(Zt(w!==null,37113),T=w.keys(),_.mutationQueue.removeMutationBatch(y,w)))).next((()=>_.mutationQueue.performConsistencyCheck(y))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(y,T,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>_.localDocuments.getDocuments(y,T)))}))})(a.localStore,e);d0(a,e,i),f0(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await _o(a,o)}catch(o){await za(o)}}function f0(r,e){(r.mu.get(e)||[]).forEach((i=>{i.resolve()})),r.mu.delete(e)}function d0(r,e,i){const a=Ut(r);let o=a.Vu[a.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function md(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),i&&r.Pu.yu(a,i);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||p0(r,a)}))}function p0(r,e){r.Eu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(Ld(r.remoteStore,i),r.du=r.du.remove(e),r.Au.delete(i),Qd(r))}function T_(r,e,i){for(const a of i)a instanceof o0?(r.Ru.addReference(a.key,e),gA(r,a)):a instanceof u0?(bt(Yd,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||p0(r,a.key)):Mt(19791,{wu:a})}function gA(r,e){const i=e.key,a=i.path.canonicalString();r.du.get(i)||r.Eu.has(a)||(bt(Yd,"New document in limbo: "+i),r.Eu.add(a),Qd(r))}function Qd(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const i=new Dt(ue.fromString(e)),a=r.fu.next();r.Au.set(a,new rA(i)),r.du=r.du.insert(i,a),n0(r.remoteStore,new Cs(hi(Dd(i.path)),a,"TargetPurposeLimboResolution",pc.ce))}}async function _o(r,e,i){const a=Ut(r),o=[],h=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,_)=>{d.push(a.pu(_,e,i).then((y=>{if((y||i)&&a.isPrimaryClient){const T=y?!y.fromCache:i?.targetChanges.get(_.targetId)?.current;a.sharedClientState.updateQueryState(_.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Pd.As(_.targetId,y);h.push(T)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(_,y){const T=Ut(_);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ot.forEach(y,(j=>ot.forEach(j.Es,(K=>T.persistence.referenceDelegate.addReference(w,j.targetId,K))).next((()=>ot.forEach(j.ds,(K=>T.persistence.referenceDelegate.removeReference(w,j.targetId,K)))))))))}catch(w){if(!Ba(w))throw w;bt(Ud,"Failed to update sequence numbers: "+w)}for(const w of y){const j=w.targetId;if(!w.fromCache){const K=T.Ms.get(j),z=K.snapshotVersion,it=K.withLastLimboFreeSnapshotVersion(z);T.Ms=T.Ms.insert(j,it)}}})(a.localStore,h))}async function yA(r,e){const i=Ut(r);if(!i.currentUser.isEqual(e)){bt(Yd,"User change. New user:",e.toKey());const a=await Wv(i.localStore,e);i.currentUser=e,(function(h,d){h.mu.forEach((g=>{g.forEach((_=>{_.reject(new Rt(ht.CANCELLED,d))}))})),h.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await _o(i,a.Ls)}}function _A(r,e){const i=Ut(r),a=i.Au.get(e);if(a&&a.hu)return Gt().add(a.key);{let o=Gt();const h=i.Iu.get(e);if(!h)return o;for(const d of h){const g=i.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function m0(r){const e=Ut(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_A.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dA.bind(null,e),e.Pu.H_=tA.bind(null,e.eventManager),e.Pu.yu=eA.bind(null,e.eventManager),e}function vA(r){const e=Ut(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mA.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return ES(this.persistence,new yS,e.initialUser,this.serializer)}Cu(e){return new Zv(kd.mi,this.serializer)}Du(e){return new wS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class EA extends uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){Zt(this.persistence.referenceDelegate instanceof lc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new nS(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new Zv((a=>lc.mi(a,i)),this.serializer)}}class gd{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>E_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=yA.bind(null,this.syncEngine),await XS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZS})()}createDatastore(e){const i=xc(e.databaseInfo.databaseId),a=(function(h){return new MS(h)})(e.databaseInfo);return(function(h,d,g,_){return new kS(h,d,g,_)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,o,h,d,g){return new US(a,o,h,d,g)})(this.localStore,this.datastore,e.asyncQueue,(i=>E_(this.syncEngine,i,0)),(function(){return p_.v()?new p_:new CS})())}createSyncEngine(e,i){return(function(o,h,d,g,_,y,T){const w=new aA(o,h,d,g,_,y);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Ut(i);bt(Nr,"RemoteStore shutting down."),a.Ea.add(5),await yo(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gd.provider={build:()=>new gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="FirestoreClient";class bA{constructor(e,i,a,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,(async d=>{bt(Ls,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(bt(Ls,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=Fd(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Kf(r,e){r.asyncQueue.verifyOperationInProgress(),bt(Ls,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener((async o=>{a.isEqual(o)||(await Wv(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function b_(r,e){r.asyncQueue.verifyOperationInProgress();const i=await xA(r);bt(Ls,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener((a=>g_(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,o)=>g_(e.remoteStore,o))),r._onlineComponents=e}async function xA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){bt(Ls,"Using user provided OfflineComponentProvider");try{await Kf(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ht.FAILED_PRECONDITION||o.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;Va("Error using user provided cache. Falling back to memory cache: "+i),await Kf(r,new uc)}}else bt(Ls,"Using default OfflineComponentProvider"),await Kf(r,new EA(void 0));return r._offlineComponents}async function g0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(bt(Ls,"Using user provided OnlineComponentProvider"),await b_(r,r._uninitializedComponentsProvider._online)):(bt(Ls,"Using default OnlineComponentProvider"),await b_(r,new gd))),r._onlineComponents}function SA(r){return g0(r).then((e=>e.syncEngine))}async function x_(r){const e=await g0(r),i=e.eventManager;return i.onListen=lA.bind(null,e.syncEngine),i.onUnlisten=cA.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=oA.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=hA.bind(null,e.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="firestore.googleapis.com",A_=!0;class R_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Rt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_0,this.ssl=A_}else this.host=e.host,this.ssl=e.ssl??A_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$v;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tS)throw new Rt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Rt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Rt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Rt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rc{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Rt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new wb;switch(a.type){case"firstParty":return new Ib(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Rt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=S_.get(i);a&&(bt("ComponentProvider","Removing Datastore"),S_.delete(i),a.terminate())})(this),Promise.resolve()}}function AA(r,e,i,a={}){r=Rr(r,Rc);const o=dc(e),h=r._getSettings(),d={...h,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${i}`;o&&(q_(`https://${g}`),F_("Firestore",!0)),h.host!==_0&&h.host!==g&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...h,host:g,ssl:o,emulatorOptions:a};if(!Zu(_,d)&&(r._setSettings(_),a.mockUserToken)){let y,T;if(typeof a.mockUserToken=="string")y=a.mockUserToken,T=tn.MOCK_USER;else{y=H_(a.mockUserToken,r._app?.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new Rt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new tn(w)}r._authCredentials=new Cb(new uv(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class Ve{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(po(i,Ve._jsonSchema))return new Ve(e,a||null,new Dt(ue.fromString(i.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Ce("string",Ve._jsonSchemaVersion),referencePath:Ce("string")};class Vs extends wc{constructor(e,i,a){super(e,i,Dd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new Dt(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function Cc(r,e,...i){if(r=Cr(r),cv("collection","path",e),r instanceof Rc){const a=ue.fromString(e,...i);return Ly(a),new Vs(r,null,a)}{if(!(r instanceof Ve||r instanceof Vs))throw new Rt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(ue.fromString(e,...i));return Ly(a),new Vs(r.firestore,null,a)}}function kn(r,e,...i){if(r=Cr(r),arguments.length===1&&(e=bd.newId()),cv("doc","path",e),r instanceof Rc){const a=ue.fromString(e,...i);return Uy(a),new Ve(r,null,new Dt(a))}{if(!(r instanceof Ve||r instanceof Vs))throw new Rt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(ue.fromString(e,...i));return Uy(a),new Ve(r.firestore,r instanceof Vs?r.converter:null,new Dt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="AsyncQueue";class C_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new t0(this,"async_queue_retry"),this._c=()=>{const a=Qf();a&&bt(w_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=Qf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Qf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ba(e))throw e;bt(w_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Hi("INTERNAL UNHANDLED ERROR: ",D_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const o=Hd.createAndSchedule(this,e,i,a,(h=>this.hc(h)));return this.tc.push(o),o}uc(){this.nc&&Mt(47125,{Pc:D_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function D_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(r){return(function(i,a){if(typeof i!="object"||i===null)return!1;const o=i;for(const h of a)if(h in o&&typeof o[h]=="function")return!0;return!1})(r,["next","error","complete"])}class fo extends Rc{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new C_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C_(e),this._firestoreClient=void 0,await e}}}function RA(r,e){const i=typeof r=="object"?r:J_(),a=typeof r=="string"?r:tc,o=X_(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const h=z_("firestore");h&&AA(o,...h)}return o}function v0(r){if(r._terminated)throw new Rt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||wA(r),r._firestoreClient}function wA(r){const e=r._freezeSettings(),i=(function(o,h,d,g){return new Kb(o,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,y0(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new bA(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(o){const h=o?._online.build();return{_offline:o?._offline.build(h),_online:h}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Ke.fromBase64String(e))}catch(i){throw new Rt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new On(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(po(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:Ce("string",On._jsonSchemaVersion),bytes:Ce("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new Rt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new Rt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new Rt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(e){if(po(e,pi._jsonSchema))return new pi(e.latitude,e.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:Ce("string",pi._jsonSchemaVersion),latitude:Ce("number"),longitude:Ce("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==o[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(po(e,mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new mi(e.vectorValues);throw new Rt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Ce("string",mi._jsonSchemaVersion),vectorValues:Ce("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=/^__.*__$/;class DA{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,i,this.fieldTransforms):new mo(e,this.data,i,this.fieldTransforms)}}function T0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt(40011,{Ac:r})}}class Xd{constructor(e,i,a,o,h,d){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(T0(this.Ac)&&CA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NA{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||xc(e)}Cc(e,i,a,o=!1){return new Xd({Ac:e,methodName:i,Dc:a,path:Qe.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IA(r){const e=r._freezeSettings(),i=xc(r._databaseId);return new NA(r._databaseId,!!e.ignoreUndefinedProperties,i)}function MA(r,e,i,a,o,h={}){const d=r.Cc(h.merge||h.mergeFields?2:0,e,i,o);A0("Data must be an object, but it was:",d,a);const g=x0(a,d);let _,y;if(h.merge)_=new Qn(d.fieldMask),y=d.fieldTransforms;else if(h.mergeFields){const T=[];for(const w of h.mergeFields){const j=VA(e,w,i);if(!d.contains(j))throw new Rt(ht.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);OA(T,j)||T.push(j)}_=new Qn(T),y=d.fieldTransforms.filter((w=>_.covers(w.field)))}else _=null,y=d.fieldTransforms;return new DA(new jn(g),_,y)}function b0(r,e){if(S0(r=Cr(r)))return A0("Unsupported field value:",e,r),x0(r,e);if(r instanceof E0)return(function(a,o){if(!T0(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(o);h&&o.fieldTransforms.push(h)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const h=[];let d=0;for(const g of a){let _=b0(g,o.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),h.push(_),d++}return{arrayValue:{values:h}}})(r,e)}return(function(a,o){if((a=Cr(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return _x(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=ce.fromDate(a);return{timestampValue:ac(o.serializer,h)}}if(a instanceof ce){const h=new ce(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:ac(o.serializer,h)}}if(a instanceof pi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof On)return{bytesValue:Hv(o.serializer,a._byteString)};if(a instanceof Ve){const h=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(h))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:jd(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof mi)return(function(d,g){return{mapValue:{fields:{[vv]:{stringValue:Ev},[ec]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Nd(g.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${xd(a)}`)})(r,e)}function x0(r,e){const i={};return dv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(r,((a,o)=>{const h=b0(o,e.mc(a));h!=null&&(i[a]=h)})),{mapValue:{fields:i}}}function S0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ce||r instanceof pi||r instanceof On||r instanceof Ve||r instanceof E0||r instanceof mi)}function A0(r,e,i){if(!S0(i)||!hv(i)){const a=xd(i);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function VA(r,e,i){if((e=Cr(e))instanceof Kd)return e._internalPath;if(typeof e=="string")return R0(r,e);throw cc("Field path arguments must be of type string or ",r,!1,void 0,i)}const jA=new RegExp("[~\\*/\\[\\]]");function R0(r,e,i){if(e.search(jA)>=0)throw cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Kd(...e.split("."))._internalPath}catch{throw cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function cc(r,e,i,a,o){const h=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(h||d)&&(_+=" (found",h&&(_+=` in field ${a}`),d&&(_+=` in document ${o}`),_+=")"),new Rt(ht.INVALID_ARGUMENT,g+r+_)}function OA(r,e){return r.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,i,a,o,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(C0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class kA extends w0{data(){return super.data()}}function C0(r,e){return typeof e=="string"?R0(r,e):e instanceof Kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Rt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UA{convertValue(e,i="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Mt(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return Mr(e,((o,h)=>{a[o]=this.convertValue(h,i)})),a}convertVectorValue(e){const i=e.fields?.[ec].arrayValue?.values?.map((a=>Se(a.doubleValue)));return new mi(i)}convertGeoPoint(e){return new pi(Se(e.latitude),Se(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=gc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(lo(e));default:return null}}convertTimestamp(e){const i=Os(e);return new ce(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=ue.fromString(e);Zt(Xv(a),9688,{name:e});const o=new oo(a.get(1),a.get(3)),h=new Dt(a.popFirst(5));return o.isEqual(i)||Hi(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(r,e,i){let a;return a=r?r.toFirestore(e):e,a}class Wl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wr extends w0{constructor(e,i,a,o,h,d){super(e,i,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(C0("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=wr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",wr._jsonSchema={type:Ce("string",wr._jsonSchemaVersion),bundleSource:Ce("string","DocumentSnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class Ku extends wr{data(e={}){return super.data(e)}}class Ia{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new Wl(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new Ku(this._firestore,this._userDataWriter,a.key,a,new Wl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Rt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,h){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const _=new Ku(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Wl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>h||g.type!==3)).map((g=>{const _=new Ku(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Wl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:zA(g.type),doc:_,oldIndex:y,newIndex:T}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],o=[];return this.docs.forEach((h=>{h._document!==null&&(i.push(h._document),a.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),o.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt(61501,{type:r})}}Ia._jsonSchemaVersion="firestore/querySnapshot/1.0",Ia._jsonSchema={type:Ce("string",Ia._jsonSchemaVersion),bundleSource:Ce("string","QuerySnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class D0 extends UA{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,i)}}function zs(r,e,i){r=Rr(r,Ve);const a=Rr(r.firestore,fo),o=LA(r.converter,e);return N0(a,[MA(IA(a),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,fi.none())])}function Dc(r){return N0(Rr(r.firestore,fo),[new Id(r._key,fi.none())])}function Nc(r,...e){r=Cr(r);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||N_(e[a])||(i=e[a++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(N_(e[a])){const _=e[a];e[a]=_.next?.bind(_),e[a+1]=_.error?.bind(_),e[a+2]=_.complete?.bind(_)}let h,d,g;if(r instanceof Ve)d=Rr(r.firestore,fo),g=Dd(r._key.path),h={next:_=>{e[a]&&e[a](BA(d,r,_))},error:e[a+1],complete:e[a+2]};else{const _=Rr(r,wc);d=Rr(_.firestore,fo),g=_._query;const y=new D0(d);h={next:T=>{e[a]&&e[a](new Ia(d,y,_,T))},error:e[a+1],complete:e[a+2]},PA(r._query)}return(function(y,T,w,j){const K=new TA(j),z=new nA(T,K,w);return y.asyncQueue.enqueueAndForget((async()=>WS(await x_(y),z))),()=>{K.Nu(),y.asyncQueue.enqueueAndForget((async()=>JS(await x_(y),z)))}})(v0(d),g,o,h)}function N0(r,e){return(function(a,o){const h=new Ar;return a.asyncQueue.enqueueAndForget((async()=>fA(await SA(a),o,h))),h.promise})(v0(r),e)}function BA(r,e,i){const a=i.docs.get(e._key),o=new D0(r);return new wr(r,o,e._key,a,new Wl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(o){La=o})(Z_),so(new Ma("firestore",((a,{instanceIdentifier:o,options:h})=>{const d=a.getProvider("app").getImmediate(),g=new fo(new Db(a.getProvider("auth-internal")),new Mb(d,a.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Rt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(y.options.projectId,T)})(d,o),d);return h={useFetchStreams:i,...h},g._setSettings(h),g}),"PUBLIC").setMultipleInstances(!0)),Is(jy,Oy,e),Is(jy,Oy,"esm2020")})();var qA="firebase",HA="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(qA,HA,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firebasestorage.googleapis.com",FA="storageBucket",GA=120*1e3,YA=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Ir{constructor(e,i,a=0){super(Xf(e),`Firebase Storage: ${i} (${Xf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _i;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_i||(_i={}));function Xf(r){return"storage/"+r}function QA(){const r="An unknown error occurred, please check the error payload for server response.";return new vi(_i.UNKNOWN,r)}function KA(){return new vi(_i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XA(){return new vi(_i.CANCELED,"User canceled the upload/download.")}function $A(r){return new vi(_i.INVALID_URL,"Invalid URL '"+r+"'.")}function ZA(r){return new vi(_i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function I_(r){return new vi(_i.INVALID_ARGUMENT,r)}function M0(){return new vi(_i.APP_DELETED,"The Firebase app was deleted.")}function WA(r){return new vi(_i.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let a;try{a=Kn.makeFromUrl(e,i)}catch{return new Kn(e,"")}if(a.path==="")return a;throw ZA(e)}static makeFromUrl(e,i){let a=null;const o="([A-Za-z0-9.\\-_]+)";function h(gt){gt.path.charAt(gt.path.length-1)==="/"&&(gt.path_=gt.path_.slice(0,-1))}const d="(/(.*))?$",g=new RegExp("^gs://"+o+d,"i"),_={bucket:1,path:3};function y(gt){gt.path_=decodeURIComponent(gt.path)}const T="v[A-Za-z0-9_]+",w=i.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",K=new RegExp(`^https?://${w}/${T}/b/${o}/o${j}`,"i"),z={bucket:1,path:3},it=i===I0?"(?:storage.googleapis.com|storage.cloud.google.com)":i,H="([^?#]*)",et=new RegExp(`^https?://${it}/${o}/${H}`,"i"),yt=[{regex:g,indices:_,postModify:h},{regex:K,indices:z,postModify:y},{regex:et,indices:{bucket:1,path:2},postModify:y}];for(let gt=0;gt<yt.length;gt++){const vt=yt[gt],st=vt.regex.exec(e);if(st){const D=st[vt.indices.bucket];let R=st[vt.indices.path];R||(R=""),a=new Kn(D,R),vt.postModify(a);break}}if(a==null)throw $A(e);return a}}class JA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(r,e,i){let a=1,o=null,h=null,d=!1,g=0;function _(){return g===2}let y=!1;function T(...H){y||(y=!0,e.apply(null,H))}function w(H){o=setTimeout(()=>{o=null,r(K,_())},H)}function j(){h&&clearTimeout(h)}function K(H,...et){if(y){j();return}if(H){j(),T.call(null,H,...et);return}if(_()||d){j(),T.call(null,H,...et);return}a<64&&(a*=2);let yt;g===1?(g=2,yt=0):yt=(a+Math.random())*1e3,w(yt)}let z=!1;function it(H){z||(z=!0,j(),!y&&(o!==null?(H||(g=2),clearTimeout(o),w(0)):H||(g=1)))}return w(0),h=setTimeout(()=>{d=!0,it(!0)},i),it}function e2(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(r){return r!==void 0}function M_(r,e,i,a){if(a<e)throw I_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>i)throw I_(`Invalid value for '${r}'. Expected ${i} or less.`)}function i2(r){const e=encodeURIComponent;let i="?";for(const a in r)if(r.hasOwnProperty(a)){const o=e(a)+"="+e(r[a]);i=i+o+"&"}return i=i.slice(0,-1),i}var hc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(hc||(hc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(r,e){const i=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,h=e.indexOf(r)!==-1;return i||o||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,i,a,o,h,d,g,_,y,T,w,j=!0,K=!1){this.url_=e,this.method_=i,this.headers_=a,this.body_=o,this.successCodes_=h,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=_,this.timeout_=y,this.progressCallback_=T,this.connectionFactory_=w,this.retry=j,this.isUsingEmulator=K,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,it)=>{this.resolve_=z,this.reject_=it,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new qu(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const d=g=>{const _=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(_,y)};this.progressCallback_!==null&&h.addUploadProgressListener(d),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(d),this.pendingConnection_=null;const g=h.getErrorCode()===hc.NO_ERROR,_=h.getStatus();if(!g||s2(_,this.additionalRetryCodes_)&&this.retry){const T=h.getErrorCode()===hc.ABORT;a(!1,new qu(!1,null,T));return}const y=this.successCodes_.indexOf(_)!==-1;a(!0,new qu(y,h))})},i=(a,o)=>{const h=this.resolve_,d=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());n2(_)?h(_):h()}catch(_){d(_)}else if(g!==null){const _=QA();_.serverResponse=g.getErrorText(),this.errorCallback_?d(this.errorCallback_(g,_)):d(_)}else if(o.canceled){const _=this.appDelete_?M0():XA();d(_)}else{const _=KA();d(_)}};this.canceled_?i(!1,new qu(!1,null,!0)):this.backoffId_=t2(e,i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qu{constructor(e,i,a){this.wasSuccessCode=e,this.connection=i,this.canceled=!!a}}function a2(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function l2(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function o2(r,e){e&&(r["X-Firebase-GMPID"]=e)}function u2(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function c2(r,e,i,a,o,h,d=!0,g=!1){const _=i2(r.urlParams),y=r.url+_,T=Object.assign({},r.headers);return o2(T,e),a2(T,i),l2(T,h),u2(T,a),new r2(y,r.method,T,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function f2(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,i){this._service=e,i instanceof Kn?this._location=i:this._location=Kn.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new fc(e,i)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return f2(this._location.path)}get storage(){return this._service}get parent(){const e=h2(this._location.path);if(e===null)return null;const i=new Kn(this._location.bucket,e);return new fc(this._service,i)}_throwIfRoot(e){if(this._location.path==="")throw WA(e)}}function V_(r,e){const i=e?.[FA];return i==null?null:Kn.makeFromBucketSpec(i,r)}function d2(r,e,i,a={}){r.host=`${e}:${i}`;const o=dc(e);o&&(q_(`https://${r.host}/b`),F_("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:h}=a;h&&(r._overrideAuthToken=typeof h=="string"?h:H_(h,r.app.options.projectId))}class p2{constructor(e,i,a,o,h,d=!1){this.app=e,this._authProvider=i,this._appCheckProvider=a,this._url=o,this._firebaseVersion=h,this._isUsingEmulator=d,this._bucket=null,this._host=I0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GA,this._maxUploadRetryTime=YA,this._requests=new Set,o!=null?this._bucket=Kn.makeFromBucketSpec(o,this._host):this._bucket=V_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=V_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){M_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){M_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const i=await e.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if($_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fc(this,e)}_makeRequest(e,i,a,o,h=!0){if(this._deleted)return new JA(M0());{const d=c2(e,this._appId,a,o,i,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,i){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,i,a,o).getPromise()}}const j_="@firebase/storage",O_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="storage";function m2(r=J_(),e){r=Cr(r);const a=X_(r,V0).getImmediate({identifier:e}),o=z_("storage");return o&&g2(a,...o),a}function g2(r,e,i,a={}){d2(r,e,i,a)}function y2(r,{instanceIdentifier:e}){const i=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new p2(i,a,o,e,Z_)}function _2(){so(new Ma(V0,y2,"PUBLIC").setMultipleInstances(!0)),Is(j_,O_,""),Is(j_,O_,"esm2020")}_2();const v2={apiKey:"AIzaSyAZBf9fUWZoXnYJyBvBGEvpiu7DbHkG5Iw",authDomain:"crm-ver2.firebaseapp.com",projectId:"crm-ver2",storageBucket:"crm-ver2.firebasestorage.app",messagingSenderId:"993359540287",appId:"1:993359540287:web:43ad484af7c6616780088a"},j0=W_(v2),nn=RA(j0);m2(j0);const Ic="customers",Mc="activities",Vc="meetings",jc="propertySelections",E2=async r=>{try{const e=r.map(i=>zs(kn(nn,Ic,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving customers:",e)}},Xu=async r=>{try{await zs(kn(nn,Ic,r.id),r)}catch(e){console.error("Error saving customer:",e)}},O0=async r=>{try{await Dc(kn(nn,Ic,r))}catch(e){console.error("Error deleting customer:",e)}},k0=r=>Nc(Cc(nn,Ic),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in customers subscription:",e)}),T2=async r=>{try{const e=r.map(i=>zs(kn(nn,Mc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving activities:",e)}},P0=async r=>{try{await zs(kn(nn,Mc,r.id),r)}catch(e){console.error("Error saving activity:",e)}},U0=async r=>{try{await Dc(kn(nn,Mc,r))}catch(e){console.error("Error deleting activity:",e)}},L0=r=>Nc(Cc(nn,Mc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in activities subscription:",e)}),b2=async r=>{try{const e=r.map(i=>zs(kn(nn,Vc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving meetings:",e)}},z0=async r=>{try{await zs(kn(nn,Vc,r.id),r)}catch(e){console.error("Error saving meeting:",e)}},B0=async r=>{try{await Dc(kn(nn,Vc,r))}catch(e){console.error("Error deleting meeting:",e)}},q0=r=>Nc(Cc(nn,Vc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in meetings subscription:",e)}),x2=async r=>{try{const e=r.map(i=>zs(kn(nn,jc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving property selections:",e)}},H0=async r=>{try{await zs(kn(nn,jc,r.id),r)}catch(e){console.error("Error saving property selection:",e)}},F0=async r=>{try{await Dc(kn(nn,jc,r))}catch(e){console.error("Error deleting property selection:",e)}},G0=r=>Nc(Cc(nn,jc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in property selections subscription:",e)}),S2=Object.freeze(Object.defineProperty({__proto__:null,deleteActivity:U0,deleteCustomer:O0,deleteMeeting:B0,deletePropertySelection:F0,saveActivities:T2,saveActivity:P0,saveCustomer:Xu,saveCustomers:E2,saveMeeting:z0,saveMeetings:b2,savePropertySelection:H0,savePropertySelections:x2,subscribeToActivities:L0,subscribeToCustomers:k0,subscribeToMeetings:q0,subscribeToPropertySelections:G0},Symbol.toStringTag,{value:"Module"}));new Date().toISOString(),new Date().toISOString(),new Date().toISOString();function A2(){const[r,e]=Tt.useState([]),[i,a]=Tt.useState([]),[o,h]=Tt.useState([]),[d,g]=Tt.useState([]),[_,y]=Tt.useState(null),[T,w]=Tt.useState(!1),[j,K]=Tt.useState(null),[z,it]=Tt.useState("전체"),[H,et]=Tt.useState(null),[ft,yt]=Tt.useState(!1),gt=Tt.useRef(null);Tt.useEffect(()=>{const B=k0(ct=>{e(ct)}),P=L0(ct=>{a(ct)}),J=q0(ct=>{h(ct)}),nt=G0(ct=>{g(ct)});return()=>{B(),P(),J(),nt()}},[]),Tt.useEffect(()=>{if(r.length===0||o.length===0)return;const B=new Date;B.setHours(0,0,0,0),r.forEach(P=>{o.filter(ct=>ct.customerId===P.id).some(ct=>{const St=new Date(ct.date);return St.setHours(0,0,0,0),St<B})&&P.status==="신규"&&Xu({...P,status:"진행중"})})},[r,o]);const vt=B=>{it(B),et(null)},st=B=>{et(B)},D=B=>{_===B.id?y(null):y(B.id)},R=(B=null)=>{K(B),w(!0),B&&B.id===_&&y(null)},S=()=>{w(!1),K(null)},V=async B=>{await Xu(B)},N=async B=>{const P={...B,isFavorite:!B.isFavorite};await Xu(P)},C=async B=>{confirm(`"${B.name}" 고객을 정말 삭제하시겠습니까?`)&&(await O0(B.id),_===B.id&&y(null))},A=async B=>{await P0(B)},Et=async B=>{confirm("정말 이 활동을 삭제하시겠습니까?")&&await U0(B)},_t=async B=>{await z0(B)},O=async B=>{confirm("정말 이 미팅을 삭제하시겠습니까?")&&await B0(B)},tt=async B=>{await H0(B)},ut=async B=>{confirm("정말 이 매물선정을 삭제하시겠습니까?")&&await F0(B)},pt=()=>{const B={customers:r,activities:i,meetings:o,propertySelections:d},P=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),J=URL.createObjectURL(P),nt=document.createElement("a");nt.href=J,nt.download=`customer-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(nt),nt.click(),document.body.removeChild(nt),URL.revokeObjectURL(J)},I=async B=>{const P=B.target.files[0];if(!P)return;const J=new FileReader;J.onload=async nt=>{try{const ct=JSON.parse(nt.target.result);if(ct&&Array.isArray(ct.customers)&&Array.isArray(ct.activities)){const{saveCustomers:St,saveActivities:dt,saveMeetings:kt,savePropertySelections:Ct}=await IE(async()=>{const{saveCustomers:At,saveActivities:Vt,saveMeetings:Xn,savePropertySelections:Oe}=await Promise.resolve().then(()=>S2);return{saveCustomers:At,saveActivities:Vt,saveMeetings:Xn,savePropertySelections:Oe}},void 0);await St(ct.customers||[]),await dt(ct.activities||[]),await kt(ct.meetings||[]),await Ct(ct.propertySelections||[]),alert("데이터가 성공적으로 복원되었습니다.")}else throw new Error("잘못된 파일 형식입니다.")}catch(ct){alert(`복원 실패: ${ct.message}`)}},J.readAsText(P),B.target.value=null},Z=B=>{const P=i.filter(nt=>nt.customerId===B);if(P.length===0)return null;const J=P.sort((nt,ct)=>new Date(ct.date)-new Date(nt.date));return new Date(J[0].date)},L=B=>({전체:"등록된 모든 고객을 표시합니다",신규:"상태가 신규로 설정된 고객들을 표시합니다",진행중:"상태가 진행중으로 설정된 고객들을 표시합니다",장기관리고객:"장기적으로 관리 중인 고객들을 표시합니다",보류:"상태가 보류로 설정된 고객들을 표시합니다",집중고객:"즐겨찾기로 표시된 고객들을 집중적으로 관리하기 위해 표시합니다",오늘미팅:"오늘 일정이 확정된 미팅이 있는 고객들을 표시합니다",미팅일확정:"오늘 이후로 미팅이 예정된 고객들을 표시합니다",오늘연락:"오늘 활동 기록(전화, 문자, 방문 등)이 있는 고객들을 표시합니다",어제연락:"어제 활동 기록(전화, 문자, 방문 등)이 있는 고객들을 표시합니다",연락할고객:"어제와 오늘 모두 활동 기록이 없는 고객들입니다 (보류 상태 제외). 마지막 연락일이 오래된 순으로 정렬됩니다"})[B]||"",k=(()=>{const B=new Date;B.setHours(0,0,0,0);let P=r.filter(J=>{if(z==="집중고객")return J.isFavorite;if(z==="장기관리고객")return J.status==="장기관리고객";if(z==="오늘미팅")return o.filter(dt=>dt.customerId===J.id).some(dt=>{const kt=new Date(dt.date);return kt.setHours(0,0,0,0),kt.getTime()===B.getTime()});if(z==="미팅일확정")return o.filter(dt=>dt.customerId===J.id).some(dt=>{const kt=new Date(dt.date);return kt.setHours(0,0,0,0),kt>B});if(z==="오늘연락")return i.filter(dt=>dt.customerId===J.id).some(dt=>{const kt=new Date(dt.date);return kt.setHours(0,0,0,0),kt.getTime()===B.getTime()});if(z==="어제연락")return i.filter(dt=>dt.customerId===J.id).some(dt=>{const kt=new Date(dt.date);kt.setHours(0,0,0,0);const Ct=new Date(B);return Ct.setDate(Ct.getDate()-1),kt.getTime()===Ct.getTime()});if(z==="연락할고객"){if(J.status==="보류")return!1;const St=i.filter(Ct=>Ct.customerId===J.id),dt=new Date(B),kt=new Date(B);return kt.setDate(kt.getDate()-1),!St.some(Ct=>{const At=new Date(Ct.date);return At.setHours(0,0,0,0),At.getTime()===dt.getTime()||At.getTime()===kt.getTime()})}const nt=z==="전체"||J.status===z,ct=!H||J.progress===H;return nt&&ct});return z==="오늘미팅"?P.sort((J,nt)=>{const ct=o.filter(Ct=>{const At=new Date(Ct.date);return At.setHours(0,0,0,0),Ct.customerId===J.id&&At.getTime()===B.getTime()}),St=o.filter(Ct=>{const At=new Date(Ct.date);return At.setHours(0,0,0,0),Ct.customerId===nt.id&&At.getTime()===B.getTime()});if(ct.length===0)return 1;if(St.length===0)return-1;const dt=new Date(ct[0].date).getTime(),kt=new Date(St[0].date).getTime();return dt-kt}):z==="미팅일확정"?P.sort((J,nt)=>{const ct=o.filter(Ct=>{const At=new Date(Ct.date);return At.setHours(0,0,0,0),Ct.customerId===J.id&&At>B}),St=o.filter(Ct=>{const At=new Date(Ct.date);return At.setHours(0,0,0,0),Ct.customerId===nt.id&&At>B});if(ct.length===0)return 1;if(St.length===0)return-1;const dt=ct.sort((Ct,At)=>new Date(Ct.date)-new Date(At.date))[0],kt=St.sort((Ct,At)=>new Date(Ct.date)-new Date(At.date))[0];return new Date(dt.date)-new Date(kt.date)}):z==="오늘연락"?P.sort((J,nt)=>{const ct=i.filter(Ct=>Ct.customerId===J.id&&new Date(Ct.date).toDateString()===B.toDateString()),St=i.filter(Ct=>Ct.customerId===nt.id&&new Date(Ct.date).toDateString()===B.toDateString());if(ct.length===0)return 1;if(St.length===0)return-1;const dt=ct.sort((Ct,At)=>new Date(At.date)-new Date(Ct.date))[0],kt=St.sort((Ct,At)=>new Date(At.date)-new Date(Ct.date))[0];return new Date(kt.date)-new Date(dt.date)}):z==="어제연락"?P.sort((J,nt)=>{const ct=new Date(B);ct.setDate(ct.getDate()-1);const St=i.filter(At=>At.customerId===J.id&&new Date(At.date).toDateString()===ct.toDateString()),dt=i.filter(At=>At.customerId===nt.id&&new Date(At.date).toDateString()===ct.toDateString());if(St.length===0)return 1;if(dt.length===0)return-1;const kt=St.sort((At,Vt)=>new Date(Vt.date)-new Date(At.date))[0],Ct=dt.sort((At,Vt)=>new Date(Vt.date)-new Date(At.date))[0];return new Date(Ct.date)-new Date(kt.date)}):z==="연락할고객"&&P.sort((J,nt)=>{const ct=Z(J.id),St=Z(nt.id);return ct?St?ct-St:-1:1}),P})(),Y=r.find(B=>B.id===_);return p.jsxs("div",{className:"app-container",children:[ft&&p.jsx("div",{className:"mobile-overlay",onClick:()=>yt(!1)}),p.jsx(VE,{activeFilter:z,onFilterChange:vt,customers:r,meetings:o,activities:i,isMobileOpen:ft,onMobileClose:()=>yt(!1)}),p.jsxs("div",{className:"main-content",children:[p.jsxs("header",{className:"main-header",children:[p.jsx("button",{className:"hamburger-btn",onClick:()=>yt(!0),children:"☰"}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[p.jsx("h1",{children:"고객 목록"}),z!=="전체"&&p.jsxs("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:["필터: ",z," - ",L(z)]})]}),p.jsxs("div",{className:"header-actions",children:[p.jsx("button",{onClick:()=>R(),className:"btn-primary",children:"+ 고객 추가"}),p.jsx("button",{onClick:pt,className:"btn-secondary",children:"백업"}),p.jsx("button",{onClick:()=>gt.current?.click(),className:"btn-secondary",children:"복원"}),p.jsx("input",{type:"file",ref:gt,onChange:I,style:{display:"none"},accept:".json"})]})]}),p.jsx("main",{className:"table-container",children:p.jsx(jE,{customers:k,onSelectCustomer:D,onEdit:R,onDelete:C,selectedCustomerId:_,activeFilter:z,activeProgressFilter:H,onProgressFilterChange:st,allCustomers:r,onFavoriteCustomer:N,activities:i,meetings:o})})]}),p.jsx(ZE,{selectedCustomer:Y,onClose:()=>y(null),onEditCustomer:R,onUpdateCustomer:V,onDeleteCustomer:C,activities:i,onSaveActivity:A,onDeleteActivity:Et,meetings:o,onSaveMeeting:_t,onDeleteMeeting:O,propertySelections:d,onSavePropertySelection:tt,onDeletePropertySelection:ut}),p.jsx(PE,{isOpen:T,onClose:S,onSave:V,editData:j})]})}CE.createRoot(document.getElementById("root")).render(p.jsx(Tt.StrictMode,{children:p.jsx(A2,{})}));
