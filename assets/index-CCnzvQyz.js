(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();function C1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var kf={exports:{}},el={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function R1(){if(cy)return el;cy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,l,h){var p=null;if(h!==void 0&&(p=""+h),l.key!==void 0&&(p=""+l.key),"key"in l){h={};for(var g in l)g!=="key"&&(h[g]=l[g])}else h=l;return l=h.ref,{$$typeof:s,type:a,key:p,ref:l!==void 0?l:null,props:h}}return el.Fragment=e,el.jsx=i,el.jsxs=i,el}var hy;function D1(){return hy||(hy=1,kf.exports=R1()),kf.exports}var f=D1(),Pf={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function N1(){if(fy)return Ft;fy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.iterator;function V(I){return I===null||typeof I!="object"?null:(I=C&&I[C]||I["@@iterator"],typeof I=="function"?I:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,J={};function k(I,$,z){this.props=I,this.context=$,this.refs=J,this.updater=z||L}k.prototype.isReactComponent={},k.prototype.setState=function(I,$){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,$,"setState")},k.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function F(){}F.prototype=k.prototype;function it(I,$,z){this.props=I,this.context=$,this.refs=J,this.updater=z||L}var at=it.prototype=new F;at.constructor=it,q(at,k.prototype),at.isPureReactComponent=!0;var dt=Array.isArray,et={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function N(I,$,z,U,W,lt){return z=lt.ref,{$$typeof:s,type:I,key:$,ref:z!==void 0?z:null,props:lt}}function w(I,$){return N(I.type,$,void 0,void 0,void 0,I.props)}function T(I){return typeof I=="object"&&I!==null&&I.$$typeof===s}function j(I){var $={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(z){return $[z]})}var D=/\/+/g;function R(I,$){return typeof I=="object"&&I!==null&&I.key!=null?j(""+I.key):$.toString(36)}function S(){}function vt(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(S,S):(I.status="pending",I.then(function($){I.status==="pending"&&(I.status="fulfilled",I.value=$)},function($){I.status==="pending"&&(I.status="rejected",I.reason=$)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function St(I,$,z,U,W){var lt=typeof I;(lt==="undefined"||lt==="boolean")&&(I=null);var H=!1;if(I===null)H=!0;else switch(lt){case"bigint":case"string":case"number":H=!0;break;case"object":switch(I.$$typeof){case s:case e:H=!0;break;case b:return H=I._init,St(H(I._payload),$,z,U,W)}}if(H)return W=W(I),H=U===""?"."+R(I,0):U,dt(W)?(z="",H!=null&&(z=H.replace(D,"$&/")+"/"),St(W,$,z,"",function(Dt){return Dt})):W!=null&&(T(W)&&(W=w(W,z+(W.key==null||I&&I.key===W.key?"":(""+W.key).replace(D,"$&/")+"/")+H)),$.push(W)),1;H=0;var _t=U===""?".":U+":";if(dt(I))for(var yt=0;yt<I.length;yt++)U=I[yt],lt=_t+R(U,yt),H+=St(U,$,z,lt,W);else if(yt=V(I),typeof yt=="function")for(I=yt.call(I),yt=0;!(U=I.next()).done;)U=U.value,lt=_t+R(U,yt++),H+=St(U,$,z,lt,W);else if(lt==="object"){if(typeof I.then=="function")return St(vt(I),$,z,U,W);throw $=String(I),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return H}function O(I,$,z){if(I==null)return I;var U=[],W=0;return St(I,U,"","",function(lt){return $.call(z,lt,W++)}),U}function nt(I){if(I._status===-1){var $=I._result;$=$(),$.then(function(z){(I._status===0||I._status===-1)&&(I._status=1,I._result=z)},function(z){(I._status===0||I._status===-1)&&(I._status=2,I._result=z)}),I._status===-1&&(I._status=0,I._result=$)}if(I._status===1)return I._result.default;throw I._result}var ht=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function bt(){}return Ft.Children={map:O,forEach:function(I,$,z){O(I,function(){$.apply(this,arguments)},z)},count:function(I){var $=0;return O(I,function(){$++}),$},toArray:function(I){return O(I,function($){return $})||[]},only:function(I){if(!T(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ft.Component=k,Ft.Fragment=i,Ft.Profiler=l,Ft.PureComponent=it,Ft.StrictMode=a,Ft.Suspense=v,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(I){return et.H.useMemoCache(I)}},Ft.cache=function(I){return function(){return I.apply(null,arguments)}},Ft.cloneElement=function(I,$,z){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var U=q({},I.props),W=I.key,lt=void 0;if($!=null)for(H in $.ref!==void 0&&(lt=void 0),$.key!==void 0&&(W=""+$.key),$)!K.call($,H)||H==="key"||H==="__self"||H==="__source"||H==="ref"&&$.ref===void 0||(U[H]=$[H]);var H=arguments.length-2;if(H===1)U.children=z;else if(1<H){for(var _t=Array(H),yt=0;yt<H;yt++)_t[yt]=arguments[yt+2];U.children=_t}return N(I.type,W,void 0,void 0,lt,U)},Ft.createContext=function(I){return I={$$typeof:p,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:h,_context:I},I},Ft.createElement=function(I,$,z){var U,W={},lt=null;if($!=null)for(U in $.key!==void 0&&(lt=""+$.key),$)K.call($,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(W[U]=$[U]);var H=arguments.length-2;if(H===1)W.children=z;else if(1<H){for(var _t=Array(H),yt=0;yt<H;yt++)_t[yt]=arguments[yt+2];W.children=_t}if(I&&I.defaultProps)for(U in H=I.defaultProps,H)W[U]===void 0&&(W[U]=H[U]);return N(I,lt,void 0,void 0,null,W)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(I){return{$$typeof:g,render:I}},Ft.isValidElement=T,Ft.lazy=function(I){return{$$typeof:b,_payload:{_status:-1,_result:I},_init:nt}},Ft.memo=function(I,$){return{$$typeof:y,type:I,compare:$===void 0?null:$}},Ft.startTransition=function(I){var $=et.T,z={};et.T=z;try{var U=I(),W=et.S;W!==null&&W(z,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(bt,ht)}catch(lt){ht(lt)}finally{et.T=$}},Ft.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()},Ft.use=function(I){return et.H.use(I)},Ft.useActionState=function(I,$,z){return et.H.useActionState(I,$,z)},Ft.useCallback=function(I,$){return et.H.useCallback(I,$)},Ft.useContext=function(I){return et.H.useContext(I)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(I,$){return et.H.useDeferredValue(I,$)},Ft.useEffect=function(I,$,z){var U=et.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return U.useEffect(I,$)},Ft.useId=function(){return et.H.useId()},Ft.useImperativeHandle=function(I,$,z){return et.H.useImperativeHandle(I,$,z)},Ft.useInsertionEffect=function(I,$){return et.H.useInsertionEffect(I,$)},Ft.useLayoutEffect=function(I,$){return et.H.useLayoutEffect(I,$)},Ft.useMemo=function(I,$){return et.H.useMemo(I,$)},Ft.useOptimistic=function(I,$){return et.H.useOptimistic(I,$)},Ft.useReducer=function(I,$,z){return et.H.useReducer(I,$,z)},Ft.useRef=function(I){return et.H.useRef(I)},Ft.useState=function(I){return et.H.useState(I)},Ft.useSyncExternalStore=function(I,$,z){return et.H.useSyncExternalStore(I,$,z)},Ft.useTransition=function(){return et.H.useTransition()},Ft.version="19.1.1",Ft}var dy;function _d(){return dy||(dy=1,Pf.exports=N1()),Pf.exports}var gt=_d();const py=C1(gt);var Uf={exports:{}},nl={},zf={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function j1(){return my||(my=1,(function(s){function e(O,nt){var ht=O.length;O.push(nt);t:for(;0<ht;){var bt=ht-1>>>1,I=O[bt];if(0<l(I,nt))O[bt]=nt,O[ht]=I,ht=bt;else break t}}function i(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var nt=O[0],ht=O.pop();if(ht!==nt){O[0]=ht;t:for(var bt=0,I=O.length,$=I>>>1;bt<$;){var z=2*(bt+1)-1,U=O[z],W=z+1,lt=O[W];if(0>l(U,ht))W<I&&0>l(lt,U)?(O[bt]=lt,O[W]=ht,bt=W):(O[bt]=U,O[z]=ht,bt=z);else if(W<I&&0>l(lt,ht))O[bt]=lt,O[W]=ht,bt=W;else break t}}return nt}function l(O,nt){var ht=O.sortIndex-nt.sortIndex;return ht!==0?ht:O.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var p=Date,g=p.now();s.unstable_now=function(){return p.now()-g}}var v=[],y=[],b=1,C=null,V=3,L=!1,q=!1,J=!1,k=!1,F=typeof setTimeout=="function"?setTimeout:null,it=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function dt(O){for(var nt=i(y);nt!==null;){if(nt.callback===null)a(y);else if(nt.startTime<=O)a(y),nt.sortIndex=nt.expirationTime,e(v,nt);else break;nt=i(y)}}function et(O){if(J=!1,dt(O),!q)if(i(v)!==null)q=!0,K||(K=!0,R());else{var nt=i(y);nt!==null&&St(et,nt.startTime-O)}}var K=!1,N=-1,w=5,T=-1;function j(){return k?!0:!(s.unstable_now()-T<w)}function D(){if(k=!1,K){var O=s.unstable_now();T=O;var nt=!0;try{t:{q=!1,J&&(J=!1,it(N),N=-1),L=!0;var ht=V;try{e:{for(dt(O),C=i(v);C!==null&&!(C.expirationTime>O&&j());){var bt=C.callback;if(typeof bt=="function"){C.callback=null,V=C.priorityLevel;var I=bt(C.expirationTime<=O);if(O=s.unstable_now(),typeof I=="function"){C.callback=I,dt(O),nt=!0;break e}C===i(v)&&a(v),dt(O)}else a(v);C=i(v)}if(C!==null)nt=!0;else{var $=i(y);$!==null&&St(et,$.startTime-O),nt=!1}}break t}finally{C=null,V=ht,L=!1}nt=void 0}}finally{nt?R():K=!1}}}var R;if(typeof at=="function")R=function(){at(D)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,vt=S.port2;S.port1.onmessage=D,R=function(){vt.postMessage(null)}}else R=function(){F(D,0)};function St(O,nt){N=F(function(){O(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(O){O.callback=null},s.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<O?Math.floor(1e3/O):5},s.unstable_getCurrentPriorityLevel=function(){return V},s.unstable_next=function(O){switch(V){case 1:case 2:case 3:var nt=3;break;default:nt=V}var ht=V;V=nt;try{return O()}finally{V=ht}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(O,nt){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ht=V;V=O;try{return nt()}finally{V=ht}},s.unstable_scheduleCallback=function(O,nt,ht){var bt=s.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?bt+ht:bt):ht=bt,O){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ht+I,O={id:b++,callback:nt,priorityLevel:O,startTime:ht,expirationTime:I,sortIndex:-1},ht>bt?(O.sortIndex=ht,e(y,O),i(v)===null&&O===i(y)&&(J?(it(N),N=-1):J=!0,St(et,ht-bt))):(O.sortIndex=I,e(v,O),q||L||(q=!0,K||(K=!0,R()))),O},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(O){var nt=V;return function(){var ht=V;V=nt;try{return O.apply(this,arguments)}finally{V=ht}}}})(Lf)),Lf}var gy;function I1(){return gy||(gy=1,zf.exports=j1()),zf.exports}var Bf={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function M1(){if(yy)return fn;yy=1;var s=_d();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(v,y,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:v,containerInfo:y,implementation:b}}var p=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,fn.createPortal=function(v,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return h(v,y,null,b)},fn.flushSync=function(v){var y=p.T,b=a.p;try{if(p.T=null,a.p=2,v)return v()}finally{p.T=y,a.p=b,a.d.f()}},fn.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(v,y))},fn.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},fn.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var b=y.as,C=g(b,y.crossOrigin),V=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?a.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:C,integrity:V,fetchPriority:L}):b==="script"&&a.d.X(v,{crossOrigin:C,integrity:V,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},fn.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);a.d.M(v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(v)},fn.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,C=g(b,y.crossOrigin);a.d.L(v,b,{crossOrigin:C,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},fn.preloadModule=function(v,y){if(typeof v=="string")if(y){var b=g(y.as,y.crossOrigin);a.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(v)},fn.requestFormReset=function(v){a.d.r(v)},fn.unstable_batchedUpdates=function(v,y){return v(y)},fn.useFormState=function(v,y,b){return p.H.useFormState(v,y,b)},fn.useFormStatus=function(){return p.H.useHostTransitionStatus()},fn.version="19.1.1",fn}var vy;function V1(){if(vy)return Bf.exports;vy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Bf.exports=M1(),Bf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function O1(){if(_y)return nl;_y=1;var s=I1(),e=_d(),i=V1();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function p(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(a(188))}function v(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var r=t,o=n;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return g(c),t;if(d===o)return g(c),n;d=d.sibling}throw Error(a(188))}if(r.return!==o.return)r=c,o=d;else{for(var x=!1,E=c.child;E;){if(E===r){x=!0,r=c,o=d;break}if(E===o){x=!0,o=c,r=d;break}E=E.sibling}if(!x){for(E=d.child;E;){if(E===r){x=!0,r=d,o=c;break}if(E===o){x=!0,o=d,r=c;break}E=E.sibling}if(!x)throw Error(a(189))}}if(r.alternate!==o)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:n}function y(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=y(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,C=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),it=Symbol.for("react.consumer"),at=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var S=Symbol.for("react.client.reference");function vt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===S?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case k:return"Profiler";case J:return"StrictMode";case et:return"Suspense";case K:return"SuspenseList";case T:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case at:return(t.displayName||"Context")+".Provider";case it:return(t._context.displayName||"Context")+".Consumer";case dt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:vt(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return vt(t(n))}catch{}}return null}var St=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},bt=[],I=-1;function $(t){return{current:t}}function z(t){0>I||(t.current=bt[I],bt[I]=null,I--)}function U(t,n){I++,bt[I]=t.current,t.current=n}var W=$(null),lt=$(null),H=$(null),_t=$(null);function yt(t,n){switch(U(H,n),U(lt,t),U(W,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ug(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ug(n),t=zg(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}z(W),U(W,t)}function Dt(){z(W),z(lt),z(H)}function Yt(t){t.memoizedState!==null&&U(_t,t);var n=W.current,r=zg(n,t.type);n!==r&&(U(lt,t),U(W,r))}function Wt(t){lt.current===t&&(z(W),z(lt)),_t.current===t&&(z(_t),$o._currentValue=ht)}var Be=Object.prototype.hasOwnProperty,qe=s.unstable_scheduleCallback,re=s.unstable_cancelCallback,zt=s.unstable_shouldYield,bn=s.unstable_requestPaint,De=s.unstable_now,ci=s.unstable_getCurrentPriorityLevel,ue=s.unstable_ImmediatePriority,be=s.unstable_UserBlockingPriority,En=s.unstable_NormalPriority,ar=s.unstable_LowPriority,ki=s.unstable_IdlePriority,Wr=s.log,Pn=s.unstable_setDisableYieldValue,Un=null,mt=null;function rt(t){if(typeof Wr=="function"&&Pn(t),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(Un,t)}catch{}}var ft=Math.clz32?Math.clz32:wt,xt=Math.log,Et=Math.LN2;function wt(t){return t>>>=0,t===0?32:31-(xt(t)/Et|0)|0}var Nt=256,Bt=4194304;function jt(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function At(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var c=0,d=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?c=jt(o):(x&=E,x!==0?c=jt(x):r||(r=E&~t,r!==0&&(c=jt(r))))):(E=o&~d,E!==0?c=jt(E):x!==0?c=jt(x):r||(r=o&~t,r!==0&&(c=jt(r)))),c===0?0:n!==0&&n!==c&&(n&d)===0&&(d=c&-c,r=n&-n,d>=r||d===32&&(r&4194048)!==0)?n:c}function me(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function He(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function un(){var t=Nt;return Nt<<=1,(Nt&4194048)===0&&(Nt=256),t}function Tn(){var t=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),t}function Rn(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Ee(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jr(t,n,r,o,c,d){var x=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,M=t.expirationTimes,Q=t.hiddenUpdates;for(r=x&~r;0<r;){var st=31-ft(r),ut=1<<st;E[st]=0,M[st]=-1;var X=Q[st];if(X!==null)for(Q[st]=null,st=0;st<X.length;st++){var Z=X[st];Z!==null&&(Z.lane&=-536870913)}r&=~ut}o!==0&&or(t,o,0),d!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=d&~(x&~n))}function or(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-ft(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&4194090}function lr(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-ft(r),c=1<<o;c&n|t[o]&n&&(t[o]|=n),r&=~c}}function Wa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ja(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Pi(){var t=nt.p;return t!==0?t:(t=window.event,t===void 0?32:ry(t.type))}function Lc(t,n){var r=nt.p;try{return nt.p=t,n()}finally{nt.p=r}}var hi=Math.random().toString(36).slice(2),Ne="__reactFiber$"+hi,en="__reactProps$"+hi,Ui="__reactContainer$"+hi,ts="__reactEvents$"+hi,es="__reactListeners$"+hi,Bc="__reactHandles$"+hi,Jn="__reactResources$"+hi,ur="__reactMarker$"+hi;function Ks(t){delete t[Ne],delete t[en],delete t[ts],delete t[es],delete t[Bc]}function fi(t){var n=t[Ne];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Ui]||r[Ne]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Hg(t);t!==null;){if(r=t[Ne])return r;t=Hg(t)}return n}t=r,r=t.parentNode}return null}function di(t){if(t=t[Ne]||t[Ui]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function cr(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function hr(t){var n=t[Jn];return n||(n=t[Jn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function je(t){t[ur]=!0}var Dl=new Set,ns={};function pi(t,n){mi(t,n),mi(t+"Capture",n)}function mi(t,n){for(ns[t]=n,t=0;t<n.length;t++)Dl.add(n[t])}var is=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gi={},Xs={};function qc(t){return Be.call(Xs,t)?!0:Be.call(gi,t)?!1:is.test(t)?Xs[t]=!0:(gi[t]=!0,!1)}function rs(t,n,r){if(qc(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function ss(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function zn(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}var as,$s;function zi(t){if(as===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);as=n&&n[1]||"",$s=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+as+t+$s}var Zs=!1;function Ws(t,n){if(!t||Zs)return"";Zs=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(Z){var X=Z}Reflect.construct(t,[],ut)}else{try{ut.call()}catch(Z){X=Z}t.call(ut.prototype)}}else{try{throw Error()}catch(Z){X=Z}(ut=t())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),x=d[0],E=d[1];if(x&&E){var M=x.split(`
`),Q=E.split(`
`);for(c=o=0;o<M.length&&!M[o].includes("DetermineComponentFrameRoot");)o++;for(;c<Q.length&&!Q[c].includes("DetermineComponentFrameRoot");)c++;if(o===M.length||c===Q.length)for(o=M.length-1,c=Q.length-1;1<=o&&0<=c&&M[o]!==Q[c];)c--;for(;1<=o&&0<=c;o--,c--)if(M[o]!==Q[c]){if(o!==1||c!==1)do if(o--,c--,0>c||M[o]!==Q[c]){var st=`
`+M[o].replace(" at new "," at ");return t.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",t.displayName)),st}while(1<=o&&0<=c);break}}}finally{Zs=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?zi(r):""}function Hc(t){switch(t.tag){case 26:case 27:case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return Ws(t.type,!1);case 11:return Ws(t.type.render,!1);case 1:return Ws(t.type,!0);case 31:return zi("Activity");default:return""}}function ti(t){try{var n="";do n+=Hc(t),t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Se(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function os(t){var n=fr(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(x){o=""+x,d.call(this,x)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function dr(t){t._valueTracker||(t._valueTracker=os(t))}function ce(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=fr(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function Li(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ls=/[\n"\\]/g;function $e(t){return t.replace(ls,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function to(t,n,r,o,c,d,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Se(n)):t.value!==""+Se(n)&&(t.value=""+Se(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?no(t,x,Se(n)):r!=null?no(t,x,Se(r)):o!=null&&t.removeAttribute("value"),c==null&&d!=null&&(t.defaultChecked=!!d),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Se(E):t.removeAttribute("name")}function eo(t,n,r,o,c,d,x,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;r=r!=null?""+Se(r):"",n=n!=null?""+Se(n):r,E||n===t.value||(t.value=n),t.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x)}function no(t,n,r){n==="number"&&Li(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function pr(t,n,r,o){if(t=t.options,n){n={};for(var c=0;c<r.length;c++)n["$"+r[c]]=!0;for(r=0;r<t.length;r++)c=n.hasOwnProperty("$"+t[r].value),t[r].selected!==c&&(t[r].selected=c),c&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Se(r),n=null,c=0;c<t.length;c++){if(t[c].value===r){t[c].selected=!0,o&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Nl(t,n,r){if(n!=null&&(n=""+Se(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+Se(r):""}function jl(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(a(92));if(St(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Se(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o)}function Ln(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Bi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function io(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||Bi.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function ro(t,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&r[c]!==o&&io(t,c,o)}else for(var d in n)n.hasOwnProperty(d)&&io(t,d,n[d])}function Js(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Il=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ml=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(t){return Ml.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var so=null;function ao(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mr=null,gn=null;function Vl(t){var n=di(t);if(n&&(t=n.stateNode)){var r=t[en]||null;t:switch(t=n.stateNode,n.type){case"input":if(to(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+$e(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var c=o[en]||null;if(!c)throw Error(a(90));to(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&ce(o)}break t;case"textarea":Nl(t,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&pr(t,!!r.multiple,n,!1)}}}var us=!1;function cs(t,n,r){if(us)return t(n,r);us=!0;try{var o=t(n);return o}finally{if(us=!1,(mr!==null||gn!==null)&&(Tu(),mr&&(n=mr,t=gn,gn=mr=null,Vl(n),t)))for(n=0;n<t.length;n++)Vl(t[n])}}function gr(t,n){var r=t.stateNode;if(r===null)return null;var o=r[en]||null;if(o===null)return null;r=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qi=!1;if(yn)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){qi=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{qi=!1}var Bn=null,ge=null,ta=null;function Ol(){if(ta)return ta;var t,n=ge,r=n.length,o,c="value"in Bn?Bn.value:Bn.textContent,d=c.length;for(t=0;t<r&&n[t]===c[t];t++);var x=r-t;for(o=1;o<=x&&n[r-o]===c[d-o];o++);return ta=c.slice(t,1<o?1-o:void 0)}function hs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function fs(){return!0}function oo(){return!1}function Fe(t){function n(r,o,c,d,x){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?fs:oo,this.isPropagationStopped=oo,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),n}var cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ds=Fe(cn),ps=b({},cn,{view:0,detail:0}),ms=Fe(ps),ea,gs,yi,ys=b({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yi&&(yi&&t.type==="mousemove"?(ea=t.screenX-yi.screenX,gs=t.screenY-yi.screenY):gs=ea=0,yi=t),ea)},movementY:function(t){return"movementY"in t?t.movementY:gs}}),vs=Fe(ys),Fc=b({},ys,{dataTransfer:0}),kl=Fe(Fc),_s=b({},ps,{relatedTarget:0}),na=Fe(_s),Pl=b({},cn,{animationName:0,elapsedTime:0,pseudoElement:0}),lo=Fe(Pl),uo=b({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ul=Fe(uo),ia=b({},cn,{data:0}),co=Fe(ia),zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ll={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bl(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Ll[t])?!!n[t]:!1}function ra(){return Bl}var ql=b({},ps,{key:function(t){if(t.key){var n=zl[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=hs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(t){return t.type==="keypress"?hs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sa=Fe(ql),vn=b({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ho=Fe(vn),Hl=b({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra}),vr=Fe(Hl),u=b({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Fe(u),_=b({},ys,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Fe(_),Y=b({},cn,{newState:0,oldState:0}),tt=Fe(Y),Tt=[9,13,27,32],qt=yn&&"CompositionEvent"in window,ve=null;yn&&"documentMode"in document&&(ve=document.documentMode);var ae=yn&&"TextEvent"in window&&!ve,Ie=yn&&(!qt||ve&&8<ve&&11>=ve),Dn=" ",vi=!1;function ni(t,n){switch(t){case"keyup":return Tt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ii(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function fo(t,n){switch(t){case"compositionend":return ii(n);case"keypress":return n.which!==32?null:(vi=!0,Dn);case"textInput":return t=n.data,t===Dn&&vi?null:t;default:return null}}function tx(t,n){if(ri)return t==="compositionend"||!qt&&ni(t,n)?(t=Ol(),ta=ge=Bn=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ie&&n.locale!=="ko"?null:n.data;default:return null}}var ex={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!ex[t.type]:n==="textarea"}function Jd(t,n,r,o){mr?gn?gn.push(o):gn=[o]:mr=o,n=Du(n,"onChange"),0<n.length&&(r=new ds("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var po=null,mo=null;function nx(t){Mg(t,0)}function Fl(t){var n=cr(t);if(ce(n))return t}function tp(t,n){if(t==="change")return n}var ep=!1;if(yn){var Gc;if(yn){var Yc="oninput"in document;if(!Yc){var np=document.createElement("div");np.setAttribute("oninput","return;"),Yc=typeof np.oninput=="function"}Gc=Yc}else Gc=!1;ep=Gc&&(!document.documentMode||9<document.documentMode)}function ip(){po&&(po.detachEvent("onpropertychange",rp),mo=po=null)}function rp(t){if(t.propertyName==="value"&&Fl(mo)){var n=[];Jd(n,mo,t,ao(t)),cs(nx,n)}}function ix(t,n,r){t==="focusin"?(ip(),po=n,mo=r,po.attachEvent("onpropertychange",rp)):t==="focusout"&&ip()}function rx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fl(mo)}function sx(t,n){if(t==="click")return Fl(n)}function ax(t,n){if(t==="input"||t==="change")return Fl(n)}function ox(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Nn=typeof Object.is=="function"?Object.is:ox;function go(t,n){if(Nn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!Be.call(n,c)||!Nn(t[c],n[c]))return!1}return!0}function sp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ap(t,n){var r=sp(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=sp(r)}}function op(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?op(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function lp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Li(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=Li(t.document)}return n}function Qc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var lx=yn&&"documentMode"in document&&11>=document.documentMode,aa=null,Kc=null,yo=null,Xc=!1;function up(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xc||aa==null||aa!==Li(o)||(o=aa,"selectionStart"in o&&Qc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),yo&&go(yo,o)||(yo=o,o=Du(Kc,"onSelect"),0<o.length&&(n=new ds("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=aa)))}function xs(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var oa={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionrun:xs("Transition","TransitionRun"),transitionstart:xs("Transition","TransitionStart"),transitioncancel:xs("Transition","TransitionCancel"),transitionend:xs("Transition","TransitionEnd")},$c={},cp={};yn&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function bs(t){if($c[t])return $c[t];if(!oa[t])return t;var n=oa[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in cp)return $c[t]=n[r];return t}var hp=bs("animationend"),fp=bs("animationiteration"),dp=bs("animationstart"),ux=bs("transitionrun"),cx=bs("transitionstart"),hx=bs("transitioncancel"),pp=bs("transitionend"),mp=new Map,Zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zc.push("scrollEnd");function si(t,n){mp.set(t,n),pi(n,[t])}var gp=new WeakMap;function qn(t,n){if(typeof t=="object"&&t!==null){var r=gp.get(t);return r!==void 0?r:(n={value:t,source:n,stack:ti(n)},gp.set(t,n),n)}return{value:t,source:n,stack:ti(n)}}var Hn=[],la=0,Wc=0;function Gl(){for(var t=la,n=Wc=la=0;n<t;){var r=Hn[n];Hn[n++]=null;var o=Hn[n];Hn[n++]=null;var c=Hn[n];Hn[n++]=null;var d=Hn[n];if(Hn[n++]=null,o!==null&&c!==null){var x=o.pending;x===null?c.next=c:(c.next=x.next,x.next=c),o.pending=c}d!==0&&yp(r,c,d)}}function Yl(t,n,r,o){Hn[la++]=t,Hn[la++]=n,Hn[la++]=r,Hn[la++]=o,Wc|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Jc(t,n,r,o){return Yl(t,n,r,o),Ql(t)}function ua(t,n){return Yl(t,null,null,n),Ql(t)}function yp(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var c=!1,d=t.return;d!==null;)d.childLanes|=r,o=d.alternate,o!==null&&(o.childLanes|=r),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(c=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,c&&n!==null&&(c=31-ft(r),t=d.hiddenUpdates,o=t[c],o===null?t[c]=[n]:o.push(n),n.lane=r|536870912),d):null}function Ql(t){if(50<qo)throw qo=0,af=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var ca={};function fx(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,n,r,o){return new fx(t,n,r,o)}function th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fi(t,n){var r=t.alternate;return r===null?(r=jn(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function vp(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Kl(t,n,r,o,c,d){var x=0;if(o=t,typeof t=="function")th(t)&&(x=1);else if(typeof t=="string")x=p1(t,r,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case T:return t=jn(31,r,n,c),t.elementType=T,t.lanes=d,t;case q:return Es(r.children,c,d,n);case J:x=8,c|=24;break;case k:return t=jn(12,r,n,c|2),t.elementType=k,t.lanes=d,t;case et:return t=jn(13,r,n,c),t.elementType=et,t.lanes=d,t;case K:return t=jn(19,r,n,c),t.elementType=K,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:case at:x=10;break t;case it:x=9;break t;case dt:x=11;break t;case N:x=14;break t;case w:x=16,o=null;break t}x=29,r=Error(a(130,t===null?"null":typeof t,"")),o=null}return n=jn(x,r,n,c),n.elementType=t,n.type=o,n.lanes=d,n}function Es(t,n,r,o){return t=jn(7,t,o,n),t.lanes=r,t}function eh(t,n,r){return t=jn(6,t,null,n),t.lanes=r,t}function nh(t,n,r){return n=jn(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ha=[],fa=0,Xl=null,$l=0,Fn=[],Gn=0,Ts=null,Gi=1,Yi="";function Ss(t,n){ha[fa++]=$l,ha[fa++]=Xl,Xl=t,$l=n}function _p(t,n,r){Fn[Gn++]=Gi,Fn[Gn++]=Yi,Fn[Gn++]=Ts,Ts=t;var o=Gi;t=Yi;var c=32-ft(o)-1;o&=~(1<<c),r+=1;var d=32-ft(n)+c;if(30<d){var x=c-c%5;d=(o&(1<<x)-1).toString(32),o>>=x,c-=x,Gi=1<<32-ft(n)+c|r<<c|o,Yi=d+t}else Gi=1<<d|r<<c|o,Yi=t}function ih(t){t.return!==null&&(Ss(t,1),_p(t,1,0))}function rh(t){for(;t===Xl;)Xl=ha[--fa],ha[fa]=null,$l=ha[--fa],ha[fa]=null;for(;t===Ts;)Ts=Fn[--Gn],Fn[Gn]=null,Yi=Fn[--Gn],Fn[Gn]=null,Gi=Fn[--Gn],Fn[Gn]=null}var _n=null,Ce=null,ie=!1,As=null,_i=!1,sh=Error(a(519));function ws(t){var n=Error(a(418,""));throw xo(qn(n,t)),sh}function xp(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[Ne]=t,n[en]=o,r){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(r=0;r<Fo.length;r++)Xt(Fo[r],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":Xt("invalid",n),eo(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),dr(n);break;case"select":Xt("invalid",n);break;case"textarea":Xt("invalid",n),jl(n,o.value,o.defaultValue,o.children),dr(n)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||Pg(n.textContent,r)?(o.popover!=null&&(Xt("beforetoggle",n),Xt("toggle",n)),o.onScroll!=null&&Xt("scroll",n),o.onScrollEnd!=null&&Xt("scrollend",n),o.onClick!=null&&(n.onclick=Nu),n=!0):n=!1,n||ws(t)}function bp(t){for(_n=t.return;_n;)switch(_n.tag){case 5:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:_n=_n.return}}function vo(t){if(t!==_n)return!1;if(!ie)return bp(t),ie=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Ef(t.type,t.memoizedProps)),r=!r),r&&Ce&&ws(t),bp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(n===0){Ce=oi(t.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;t=t.nextSibling}Ce=null}}else n===27?(n=Ce,Vr(t.type)?(t=wf,wf=null,Ce=t):Ce=n):Ce=_n?oi(t.stateNode.nextSibling):null;return!0}function _o(){Ce=_n=null,ie=!1}function Ep(){var t=As;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),As=null),t}function xo(t){As===null?As=[t]:As.push(t)}var ah=$(null),Cs=null,Qi=null;function _r(t,n,r){U(ah,n._currentValue),n._currentValue=r}function Ki(t){t._currentValue=ah.current,z(ah)}function oh(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function lh(t,n,r,o){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var d=c.dependencies;if(d!==null){var x=c.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=c;for(var M=0;M<n.length;M++)if(E.context===n[M]){d.lanes|=r,E=d.alternate,E!==null&&(E.lanes|=r),oh(d.return,r,t),o||(x=null);break t}d=E.next}}else if(c.tag===18){if(x=c.return,x===null)throw Error(a(341));x.lanes|=r,d=x.alternate,d!==null&&(d.lanes|=r),oh(x,r,t),x=null}else x=c.child;if(x!==null)x.return=c;else for(x=c;x!==null;){if(x===t){x=null;break}if(c=x.sibling,c!==null){c.return=x.return,x=c;break}x=x.return}c=x}}function bo(t,n,r,o){t=null;for(var c=n,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var x=c.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var E=c.type;Nn(c.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(c===_t.current){if(x=c.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push($o):t=[$o])}c=c.return}t!==null&&lh(n,t,r,o),n.flags|=262144}function Zl(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Rs(t){Cs=t,Qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function hn(t){return Tp(Cs,t)}function Wl(t,n){return Cs===null&&Rs(t),Tp(t,n)}function Tp(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Qi===null){if(t===null)throw Error(a(308));Qi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Qi=Qi.next=n;return r}var dx=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},px=s.unstable_scheduleCallback,mx=s.unstable_NormalPriority,Ge={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uh(){return{controller:new dx,data:new Map,refCount:0}}function Eo(t){t.refCount--,t.refCount===0&&px(mx,function(){t.controller.abort()})}var To=null,ch=0,da=0,pa=null;function gx(t,n){if(To===null){var r=To=[];ch=0,da=df(),pa={status:"pending",value:void 0,then:function(o){r.push(o)}}}return ch++,n.then(Sp,Sp),n}function Sp(){if(--ch===0&&To!==null){pa!==null&&(pa.status="fulfilled");var t=To;To=null,da=0,pa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function yx(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<r.length;c++)(0,r[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),o}var Ap=O.S;O.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&gx(t,n),Ap!==null&&Ap(t,n)};var Ds=$(null);function hh(){var t=Ds.current;return t!==null?t:ye.pooledCache}function Jl(t,n){n===null?U(Ds,Ds.current):U(Ds,n.pool)}function wp(){var t=hh();return t===null?null:{parent:Ge._currentValue,pool:t}}var So=Error(a(460)),Cp=Error(a(474)),tu=Error(a(542)),fh={then:function(){}};function Rp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function eu(){}function Dp(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(eu,eu),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jp(t),t;default:if(typeof n.status=="string")n.then(eu,eu);else{if(t=ye,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jp(t),t}throw Ao=n,So}}var Ao=null;function Np(){if(Ao===null)throw Error(a(459));var t=Ao;return Ao=null,t}function jp(t){if(t===So||t===tu)throw Error(a(483))}var xr=!1;function dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Er(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(oe&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=Ql(t),yp(t,null,r),n}return Yl(t,o,n,r),Ql(t)}function wo(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,lr(t,r)}}function mh(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var x={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?c=d=x:d=d.next=x,r=r.next}while(r!==null);d===null?c=d=n:d=d.next=n}else c=d=n;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var gh=!1;function Co(){if(gh){var t=pa;if(t!==null)throw t}}function Ro(t,n,r,o){gh=!1;var c=t.updateQueue;xr=!1;var d=c.firstBaseUpdate,x=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var M=E,Q=M.next;M.next=null,x===null?d=Q:x.next=Q,x=M;var st=t.alternate;st!==null&&(st=st.updateQueue,E=st.lastBaseUpdate,E!==x&&(E===null?st.firstBaseUpdate=Q:E.next=Q,st.lastBaseUpdate=M))}if(d!==null){var ut=c.baseState;x=0,st=Q=M=null,E=d;do{var X=E.lane&-536870913,Z=X!==E.lane;if(Z?(Jt&X)===X:(o&X)===X){X!==0&&X===da&&(gh=!0),st!==null&&(st=st.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Ut=t,Ot=E;X=n;var de=r;switch(Ot.tag){case 1:if(Ut=Ot.payload,typeof Ut=="function"){ut=Ut.call(de,ut,X);break t}ut=Ut;break t;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Ot.payload,X=typeof Ut=="function"?Ut.call(de,ut,X):Ut,X==null)break t;ut=b({},ut,X);break t;case 2:xr=!0}}X=E.callback,X!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=c.callbacks,Z===null?c.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},st===null?(Q=st=Z,M=ut):st=st.next=Z,x|=X;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;Z=E,E=Z.next,Z.next=null,c.lastBaseUpdate=Z,c.shared.pending=null}}while(!0);st===null&&(M=ut),c.baseState=M,c.firstBaseUpdate=Q,c.lastBaseUpdate=st,d===null&&(c.shared.lanes=0),Nr|=x,t.lanes=x,t.memoizedState=ut}}function Ip(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Mp(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Ip(r[t],n)}var ma=$(null),nu=$(0);function Vp(t,n){t=er,U(nu,t),U(ma,n),er=t|n.baseLanes}function yh(){U(nu,er),U(ma,ma.current)}function vh(){er=nu.current,z(ma),z(nu)}var Tr=0,Gt=null,he=null,ke=null,iu=!1,ga=!1,Ns=!1,ru=0,Do=0,ya=null,vx=0;function Me(){throw Error(a(321))}function _h(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Nn(t[r],n[r]))return!1;return!0}function xh(t,n,r,o,c,d){return Tr=d,Gt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=t===null||t.memoizedState===null?ym:vm,Ns=!1,d=r(o,c),Ns=!1,ga&&(d=kp(n,r,o,c)),Op(t),d}function Op(t){O.H=cu;var n=he!==null&&he.next!==null;if(Tr=0,ke=he=Gt=null,iu=!1,Do=0,ya=null,n)throw Error(a(300));t===null||Ze||(t=t.dependencies,t!==null&&Zl(t)&&(Ze=!0))}function kp(t,n,r,o){Gt=t;var c=0;do{if(ga&&(ya=null),Do=0,ga=!1,25<=c)throw Error(a(301));if(c+=1,ke=he=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}O.H=Ax,d=n(r,o)}while(ga);return d}function _x(){var t=O.H,n=t.useState()[0];return n=typeof n.then=="function"?No(n):n,t=t.useState()[0],(he!==null?he.memoizedState:null)!==t&&(Gt.flags|=1024),n}function bh(){var t=ru!==0;return ru=0,t}function Eh(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function Th(t){if(iu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}iu=!1}Tr=0,ke=he=Gt=null,ga=!1,Do=ru=0,ya=null}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?Gt.memoizedState=ke=t:ke=ke.next=t,ke}function Pe(){if(he===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=he.next;var n=ke===null?Gt.memoizedState:ke.next;if(n!==null)ke=n,he=t;else{if(t===null)throw Gt.alternate===null?Error(a(467)):Error(a(310));he=t,t={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},ke===null?Gt.memoizedState=ke=t:ke=ke.next=t}return ke}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(t){var n=Do;return Do+=1,ya===null&&(ya=[]),t=Dp(ya,t,n),n=Gt,(ke===null?n.memoizedState:ke.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?ym:vm),t}function su(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return No(t);if(t.$$typeof===at)return hn(t)}throw Error(a(438,String(t)))}function Ah(t){var n=null,r=Gt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=Gt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Sh(),Gt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=j;return n.index++,r}function Xi(t,n){return typeof n=="function"?n(t):n}function au(t){var n=Pe();return wh(n,he,t)}function wh(t,n,r){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var c=t.baseQueue,d=o.pending;if(d!==null){if(c!==null){var x=c.next;c.next=d.next,d.next=x}n.baseQueue=c=d,o.pending=null}if(d=t.baseState,c===null)t.memoizedState=d;else{n=c.next;var E=x=null,M=null,Q=n,st=!1;do{var ut=Q.lane&-536870913;if(ut!==Q.lane?(Jt&ut)===ut:(Tr&ut)===ut){var X=Q.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ut===da&&(st=!0);else if((Tr&X)===X){Q=Q.next,X===da&&(st=!0);continue}else ut={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(E=M=ut,x=d):M=M.next=ut,Gt.lanes|=X,Nr|=X;ut=Q.action,Ns&&r(d,ut),d=Q.hasEagerState?Q.eagerState:r(d,ut)}else X={lane:ut,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(E=M=X,x=d):M=M.next=X,Gt.lanes|=ut,Nr|=ut;Q=Q.next}while(Q!==null&&Q!==n);if(M===null?x=d:M.next=E,!Nn(d,t.memoizedState)&&(Ze=!0,st&&(r=pa,r!==null)))throw r;t.memoizedState=d,t.baseState=x,t.baseQueue=M,o.lastRenderedState=d}return c===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Ch(t){var n=Pe(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var o=r.dispatch,c=r.pending,d=n.memoizedState;if(c!==null){r.pending=null;var x=c=c.next;do d=t(d,x.action),x=x.next;while(x!==c);Nn(d,n.memoizedState)||(Ze=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),r.lastRenderedState=d}return[d,o]}function Pp(t,n,r){var o=Gt,c=Pe(),d=ie;if(d){if(r===void 0)throw Error(a(407));r=r()}else r=n();var x=!Nn((he||c).memoizedState,r);x&&(c.memoizedState=r,Ze=!0),c=c.queue;var E=Lp.bind(null,o,c,t);if(jo(2048,8,E,[t]),c.getSnapshot!==n||x||ke!==null&&ke.memoizedState.tag&1){if(o.flags|=2048,va(9,ou(),zp.bind(null,o,c,r,n),null),ye===null)throw Error(a(349));d||(Tr&124)!==0||Up(o,n,r)}return r}function Up(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=Gt.updateQueue,n===null?(n=Sh(),Gt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function zp(t,n,r,o){n.value=r,n.getSnapshot=o,Bp(n)&&qp(t)}function Lp(t,n,r){return r(function(){Bp(n)&&qp(t)})}function Bp(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Nn(t,r)}catch{return!0}}function qp(t){var n=ua(t,2);n!==null&&kn(n,t,2)}function Rh(t){var n=Sn();if(typeof t=="function"){var r=t;if(t=r(),Ns){rt(!0);try{r()}finally{rt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:t},n}function Hp(t,n,r,o){return t.baseState=r,wh(t,he,typeof o=="function"?o:Xi)}function xx(t,n,r,o,c){if(uu(t))throw Error(a(485));if(t=n.action,t!==null){var d={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){d.listeners.push(x)}};O.T!==null?r(!0):d.isTransition=!1,o(d),r=n.pending,r===null?(d.next=n.pending=d,Fp(n,d)):(d.next=r.next,n.pending=r.next=d)}}function Fp(t,n){var r=n.action,o=n.payload,c=t.state;if(n.isTransition){var d=O.T,x={};O.T=x;try{var E=r(c,o),M=O.S;M!==null&&M(x,E),Gp(t,n,E)}catch(Q){Dh(t,n,Q)}finally{O.T=d}}else try{d=r(c,o),Gp(t,n,d)}catch(Q){Dh(t,n,Q)}}function Gp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Yp(t,n,o)},function(o){return Dh(t,n,o)}):Yp(t,n,r)}function Yp(t,n,r){n.status="fulfilled",n.value=r,Qp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Fp(t,r)))}function Dh(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,Qp(n),n=n.next;while(n!==o)}t.action=null}function Qp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Kp(t,n){return n}function Xp(t,n){if(ie){var r=ye.formState;if(r!==null){t:{var o=Gt;if(ie){if(Ce){e:{for(var c=Ce,d=_i;c.nodeType!==8;){if(!d){c=null;break e}if(c=oi(c.nextSibling),c===null){c=null;break e}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Ce=oi(c.nextSibling),o=c.data==="F!";break t}}ws(o)}o=!1}o&&(n=r[0])}}return r=Sn(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kp,lastRenderedState:n},r.queue=o,r=pm.bind(null,Gt,o),o.dispatch=r,o=Rh(!1),d=Vh.bind(null,Gt,!1,o.queue),o=Sn(),c={state:n,dispatch:null,action:t,pending:null},o.queue=c,r=xx.bind(null,Gt,c,d,r),c.dispatch=r,o.memoizedState=t,[n,r,!1]}function $p(t){var n=Pe();return Zp(n,he,t)}function Zp(t,n,r){if(n=wh(t,n,Kp)[0],t=au(Xi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=No(n)}catch(x){throw x===So?tu:x}else o=n;n=Pe();var c=n.queue,d=c.dispatch;return r!==n.memoizedState&&(Gt.flags|=2048,va(9,ou(),bx.bind(null,c,r),null)),[o,d,t]}function bx(t,n){t.action=n}function Wp(t){var n=Pe(),r=he;if(r!==null)return Zp(n,r,t);Pe(),n=n.memoizedState,r=Pe();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function va(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=Gt.updateQueue,n===null&&(n=Sh(),Gt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function ou(){return{destroy:void 0,resource:void 0}}function Jp(){return Pe().memoizedState}function lu(t,n,r,o){var c=Sn();o=o===void 0?null:o,Gt.flags|=t,c.memoizedState=va(1|n,ou(),r,o)}function jo(t,n,r,o){var c=Pe();o=o===void 0?null:o;var d=c.memoizedState.inst;he!==null&&o!==null&&_h(o,he.memoizedState.deps)?c.memoizedState=va(n,d,r,o):(Gt.flags|=t,c.memoizedState=va(1|n,d,r,o))}function tm(t,n){lu(8390656,8,t,n)}function em(t,n){jo(2048,8,t,n)}function nm(t,n){return jo(4,2,t,n)}function im(t,n){return jo(4,4,t,n)}function rm(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function sm(t,n,r){r=r!=null?r.concat([t]):null,jo(4,4,rm.bind(null,n,t),r)}function Nh(){}function am(t,n){var r=Pe();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&_h(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function om(t,n){var r=Pe();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&_h(n,o[1]))return o[0];if(o=t(),Ns){rt(!0);try{t()}finally{rt(!1)}}return r.memoizedState=[o,n],o}function jh(t,n,r){return r===void 0||(Tr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=r,t=cg(),Gt.lanes|=t,Nr|=t,r)}function lm(t,n,r,o){return Nn(r,n)?r:ma.current!==null?(t=jh(t,r,o),Nn(t,n)||(Ze=!0),t):(Tr&42)===0?(Ze=!0,t.memoizedState=r):(t=cg(),Gt.lanes|=t,Nr|=t,n)}function um(t,n,r,o,c){var d=nt.p;nt.p=d!==0&&8>d?d:8;var x=O.T,E={};O.T=E,Vh(t,!1,n,r);try{var M=c(),Q=O.S;if(Q!==null&&Q(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var st=yx(M,o);Io(t,n,st,On(t))}else Io(t,n,o,On(t))}catch(ut){Io(t,n,{then:function(){},status:"rejected",reason:ut},On())}finally{nt.p=d,O.T=x}}function Ex(){}function Ih(t,n,r,o){if(t.tag!==5)throw Error(a(476));var c=cm(t).queue;um(t,c,n,ht,r===null?Ex:function(){return hm(t),r(o)})}function cm(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:ht},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function hm(t){var n=cm(t).next.queue;Io(t,n,{},On())}function Mh(){return hn($o)}function fm(){return Pe().memoizedState}function dm(){return Pe().memoizedState}function Tx(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=On();t=br(r);var o=Er(n,t,r);o!==null&&(kn(o,n,r),wo(o,n,r)),n={cache:uh()},t.payload=n;return}n=n.return}}function Sx(t,n,r){var o=On();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},uu(t)?mm(n,r):(r=Jc(t,n,r,o),r!==null&&(kn(r,t,o),gm(r,n,o)))}function pm(t,n,r){var o=On();Io(t,n,r,o)}function Io(t,n,r,o){var c={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(uu(t))mm(n,c);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var x=n.lastRenderedState,E=d(x,r);if(c.hasEagerState=!0,c.eagerState=E,Nn(E,x))return Yl(t,n,c,0),ye===null&&Gl(),!1}catch{}finally{}if(r=Jc(t,n,c,o),r!==null)return kn(r,t,o),gm(r,n,o),!0}return!1}function Vh(t,n,r,o){if(o={lane:2,revertLane:df(),action:o,hasEagerState:!1,eagerState:null,next:null},uu(t)){if(n)throw Error(a(479))}else n=Jc(t,r,o,2),n!==null&&kn(n,t,2)}function uu(t){var n=t.alternate;return t===Gt||n!==null&&n===Gt}function mm(t,n){ga=iu=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function gm(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,lr(t,r)}}var cu={readContext:hn,use:su,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me},ym={readContext:hn,use:su,useCallback:function(t,n){return Sn().memoizedState=[t,n===void 0?null:n],t},useContext:hn,useEffect:tm,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,lu(4194308,4,rm.bind(null,n,t),r)},useLayoutEffect:function(t,n){return lu(4194308,4,t,n)},useInsertionEffect:function(t,n){lu(4,2,t,n)},useMemo:function(t,n){var r=Sn();n=n===void 0?null:n;var o=t();if(Ns){rt(!0);try{t()}finally{rt(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=Sn();if(r!==void 0){var c=r(n);if(Ns){rt(!0);try{r(n)}finally{rt(!1)}}}else c=n;return o.memoizedState=o.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},o.queue=t,t=t.dispatch=Sx.bind(null,Gt,t),[o.memoizedState,t]},useRef:function(t){var n=Sn();return t={current:t},n.memoizedState=t},useState:function(t){t=Rh(t);var n=t.queue,r=pm.bind(null,Gt,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Nh,useDeferredValue:function(t,n){var r=Sn();return jh(r,t,n)},useTransition:function(){var t=Rh(!1);return t=um.bind(null,Gt,t.queue,!0,!1),Sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=Gt,c=Sn();if(ie){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),ye===null)throw Error(a(349));(Jt&124)!==0||Up(o,n,r)}c.memoizedState=r;var d={value:r,getSnapshot:n};return c.queue=d,tm(Lp.bind(null,o,d,t),[t]),o.flags|=2048,va(9,ou(),zp.bind(null,o,d,r,n),null),r},useId:function(){var t=Sn(),n=ye.identifierPrefix;if(ie){var r=Yi,o=Gi;r=(o&~(1<<32-ft(o)-1)).toString(32)+r,n=""+n+"R"+r,r=ru++,0<r&&(n+="H"+r.toString(32)),n+=""}else r=vx++,n=""+n+"r"+r.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:Mh,useFormState:Xp,useActionState:Xp,useOptimistic:function(t){var n=Sn();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Vh.bind(null,Gt,!0,r),r.dispatch=n,[t,n]},useMemoCache:Ah,useCacheRefresh:function(){return Sn().memoizedState=Tx.bind(null,Gt)}},vm={readContext:hn,use:su,useCallback:am,useContext:hn,useEffect:em,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:im,useMemo:om,useReducer:au,useRef:Jp,useState:function(){return au(Xi)},useDebugValue:Nh,useDeferredValue:function(t,n){var r=Pe();return lm(r,he.memoizedState,t,n)},useTransition:function(){var t=au(Xi)[0],n=Pe().memoizedState;return[typeof t=="boolean"?t:No(t),n]},useSyncExternalStore:Pp,useId:fm,useHostTransitionStatus:Mh,useFormState:$p,useActionState:$p,useOptimistic:function(t,n){var r=Pe();return Hp(r,he,t,n)},useMemoCache:Ah,useCacheRefresh:dm},Ax={readContext:hn,use:su,useCallback:am,useContext:hn,useEffect:em,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:im,useMemo:om,useReducer:Ch,useRef:Jp,useState:function(){return Ch(Xi)},useDebugValue:Nh,useDeferredValue:function(t,n){var r=Pe();return he===null?jh(r,t,n):lm(r,he.memoizedState,t,n)},useTransition:function(){var t=Ch(Xi)[0],n=Pe().memoizedState;return[typeof t=="boolean"?t:No(t),n]},useSyncExternalStore:Pp,useId:fm,useHostTransitionStatus:Mh,useFormState:Wp,useActionState:Wp,useOptimistic:function(t,n){var r=Pe();return he!==null?Hp(r,he,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:dm},_a=null,Mo=0;function hu(t){var n=Mo;return Mo+=1,_a===null&&(_a=[]),Dp(_a,t,n)}function Vo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function fu(t,n){throw n.$$typeof===C?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function _m(t){var n=t._init;return n(t._payload)}function xm(t){function n(B,P){if(t){var G=B.deletions;G===null?(B.deletions=[P],B.flags|=16):G.push(P)}}function r(B,P){if(!t)return null;for(;P!==null;)n(B,P),P=P.sibling;return null}function o(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function c(B,P){return B=Fi(B,P),B.index=0,B.sibling=null,B}function d(B,P,G){return B.index=G,t?(G=B.alternate,G!==null?(G=G.index,G<P?(B.flags|=67108866,P):G):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function x(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function E(B,P,G,ot){return P===null||P.tag!==6?(P=eh(G,B.mode,ot),P.return=B,P):(P=c(P,G),P.return=B,P)}function M(B,P,G,ot){var Rt=G.type;return Rt===q?st(B,P,G.props.children,ot,G.key):P!==null&&(P.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===w&&_m(Rt)===P.type)?(P=c(P,G.props),Vo(P,G),P.return=B,P):(P=Kl(G.type,G.key,G.props,null,B.mode,ot),Vo(P,G),P.return=B,P)}function Q(B,P,G,ot){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=nh(G,B.mode,ot),P.return=B,P):(P=c(P,G.children||[]),P.return=B,P)}function st(B,P,G,ot,Rt){return P===null||P.tag!==7?(P=Es(G,B.mode,ot,Rt),P.return=B,P):(P=c(P,G),P.return=B,P)}function ut(B,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=eh(""+P,B.mode,G),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case V:return G=Kl(P.type,P.key,P.props,null,B.mode,G),Vo(G,P),G.return=B,G;case L:return P=nh(P,B.mode,G),P.return=B,P;case w:var ot=P._init;return P=ot(P._payload),ut(B,P,G)}if(St(P)||R(P))return P=Es(P,B.mode,G,null),P.return=B,P;if(typeof P.then=="function")return ut(B,hu(P),G);if(P.$$typeof===at)return ut(B,Wl(B,P),G);fu(B,P)}return null}function X(B,P,G,ot){var Rt=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Rt!==null?null:E(B,P,""+G,ot);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return G.key===Rt?M(B,P,G,ot):null;case L:return G.key===Rt?Q(B,P,G,ot):null;case w:return Rt=G._init,G=Rt(G._payload),X(B,P,G,ot)}if(St(G)||R(G))return Rt!==null?null:st(B,P,G,ot,null);if(typeof G.then=="function")return X(B,P,hu(G),ot);if(G.$$typeof===at)return X(B,P,Wl(B,G),ot);fu(B,G)}return null}function Z(B,P,G,ot,Rt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return B=B.get(G)||null,E(P,B,""+ot,Rt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case V:return B=B.get(ot.key===null?G:ot.key)||null,M(P,B,ot,Rt);case L:return B=B.get(ot.key===null?G:ot.key)||null,Q(P,B,ot,Rt);case w:var Qt=ot._init;return ot=Qt(ot._payload),Z(B,P,G,ot,Rt)}if(St(ot)||R(ot))return B=B.get(G)||null,st(P,B,ot,Rt,null);if(typeof ot.then=="function")return Z(B,P,G,hu(ot),Rt);if(ot.$$typeof===at)return Z(B,P,G,Wl(P,ot),Rt);fu(P,ot)}return null}function Ut(B,P,G,ot){for(var Rt=null,Qt=null,Mt=P,kt=P=0,Je=null;Mt!==null&&kt<G.length;kt++){Mt.index>kt?(Je=Mt,Mt=null):Je=Mt.sibling;var ne=X(B,Mt,G[kt],ot);if(ne===null){Mt===null&&(Mt=Je);break}t&&Mt&&ne.alternate===null&&n(B,Mt),P=d(ne,P,kt),Qt===null?Rt=ne:Qt.sibling=ne,Qt=ne,Mt=Je}if(kt===G.length)return r(B,Mt),ie&&Ss(B,kt),Rt;if(Mt===null){for(;kt<G.length;kt++)Mt=ut(B,G[kt],ot),Mt!==null&&(P=d(Mt,P,kt),Qt===null?Rt=Mt:Qt.sibling=Mt,Qt=Mt);return ie&&Ss(B,kt),Rt}for(Mt=o(Mt);kt<G.length;kt++)Je=Z(Mt,B,kt,G[kt],ot),Je!==null&&(t&&Je.alternate!==null&&Mt.delete(Je.key===null?kt:Je.key),P=d(Je,P,kt),Qt===null?Rt=Je:Qt.sibling=Je,Qt=Je);return t&&Mt.forEach(function(zr){return n(B,zr)}),ie&&Ss(B,kt),Rt}function Ot(B,P,G,ot){if(G==null)throw Error(a(151));for(var Rt=null,Qt=null,Mt=P,kt=P=0,Je=null,ne=G.next();Mt!==null&&!ne.done;kt++,ne=G.next()){Mt.index>kt?(Je=Mt,Mt=null):Je=Mt.sibling;var zr=X(B,Mt,ne.value,ot);if(zr===null){Mt===null&&(Mt=Je);break}t&&Mt&&zr.alternate===null&&n(B,Mt),P=d(zr,P,kt),Qt===null?Rt=zr:Qt.sibling=zr,Qt=zr,Mt=Je}if(ne.done)return r(B,Mt),ie&&Ss(B,kt),Rt;if(Mt===null){for(;!ne.done;kt++,ne=G.next())ne=ut(B,ne.value,ot),ne!==null&&(P=d(ne,P,kt),Qt===null?Rt=ne:Qt.sibling=ne,Qt=ne);return ie&&Ss(B,kt),Rt}for(Mt=o(Mt);!ne.done;kt++,ne=G.next())ne=Z(Mt,B,kt,ne.value,ot),ne!==null&&(t&&ne.alternate!==null&&Mt.delete(ne.key===null?kt:ne.key),P=d(ne,P,kt),Qt===null?Rt=ne:Qt.sibling=ne,Qt=ne);return t&&Mt.forEach(function(w1){return n(B,w1)}),ie&&Ss(B,kt),Rt}function de(B,P,G,ot){if(typeof G=="object"&&G!==null&&G.type===q&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case V:t:{for(var Rt=G.key;P!==null;){if(P.key===Rt){if(Rt=G.type,Rt===q){if(P.tag===7){r(B,P.sibling),ot=c(P,G.props.children),ot.return=B,B=ot;break t}}else if(P.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===w&&_m(Rt)===P.type){r(B,P.sibling),ot=c(P,G.props),Vo(ot,G),ot.return=B,B=ot;break t}r(B,P);break}else n(B,P);P=P.sibling}G.type===q?(ot=Es(G.props.children,B.mode,ot,G.key),ot.return=B,B=ot):(ot=Kl(G.type,G.key,G.props,null,B.mode,ot),Vo(ot,G),ot.return=B,B=ot)}return x(B);case L:t:{for(Rt=G.key;P!==null;){if(P.key===Rt)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){r(B,P.sibling),ot=c(P,G.children||[]),ot.return=B,B=ot;break t}else{r(B,P);break}else n(B,P);P=P.sibling}ot=nh(G,B.mode,ot),ot.return=B,B=ot}return x(B);case w:return Rt=G._init,G=Rt(G._payload),de(B,P,G,ot)}if(St(G))return Ut(B,P,G,ot);if(R(G)){if(Rt=R(G),typeof Rt!="function")throw Error(a(150));return G=Rt.call(G),Ot(B,P,G,ot)}if(typeof G.then=="function")return de(B,P,hu(G),ot);if(G.$$typeof===at)return de(B,P,Wl(B,G),ot);fu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(r(B,P.sibling),ot=c(P,G),ot.return=B,B=ot):(r(B,P),ot=eh(G,B.mode,ot),ot.return=B,B=ot),x(B)):r(B,P)}return function(B,P,G,ot){try{Mo=0;var Rt=de(B,P,G,ot);return _a=null,Rt}catch(Mt){if(Mt===So||Mt===tu)throw Mt;var Qt=jn(29,Mt,null,B.mode);return Qt.lanes=ot,Qt.return=B,Qt}finally{}}}var xa=xm(!0),bm=xm(!1),Yn=$(null),xi=null;function Sr(t){var n=t.alternate;U(Ye,Ye.current&1),U(Yn,t),xi===null&&(n===null||ma.current!==null||n.memoizedState!==null)&&(xi=t)}function Em(t){if(t.tag===22){if(U(Ye,Ye.current),U(Yn,t),xi===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(xi=t)}}else Ar()}function Ar(){U(Ye,Ye.current),U(Yn,Yn.current)}function $i(t){z(Yn),xi===t&&(xi=null),z(Ye)}var Ye=$(0);function du(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Af(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Oh(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:b({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var kh={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=On(),c=br(o);c.payload=n,r!=null&&(c.callback=r),n=Er(t,c,o),n!==null&&(kn(n,t,o),wo(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=On(),c=br(o);c.tag=1,c.payload=n,r!=null&&(c.callback=r),n=Er(t,c,o),n!==null&&(kn(n,t,o),wo(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=On(),o=br(r);o.tag=2,n!=null&&(o.callback=n),n=Er(t,o,r),n!==null&&(kn(n,t,r),wo(n,t,r))}};function Tm(t,n,r,o,c,d,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,x):n.prototype&&n.prototype.isPureReactComponent?!go(r,o)||!go(c,d):!0}function Sm(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&kh.enqueueReplaceState(n,n.state,null)}function js(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=b({},r));for(var c in t)r[c]===void 0&&(r[c]=t[c])}return r}var pu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Am(t){pu(t)}function wm(t){console.error(t)}function Cm(t){pu(t)}function mu(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Rm(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ph(t,n,r){return r=br(r),r.tag=3,r.payload={element:null},r.callback=function(){mu(t,n)},r}function Dm(t){return t=br(t),t.tag=3,t}function Nm(t,n,r,o){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=o.value;t.payload=function(){return c(d)},t.callback=function(){Rm(n,r,o)}}var x=r.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Rm(n,r,o),typeof c!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function wx(t,n,r,o,c){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&bo(n,r,c,!0),r=Yn.current,r!==null){switch(r.tag){case 13:return xi===null?lf():r.alternate===null&&Re===0&&(Re=3),r.flags&=-257,r.flags|=65536,r.lanes=c,o===fh?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),cf(t,o,c)),!1;case 22:return r.flags|=65536,o===fh?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),cf(t,o,c)),!1}throw Error(a(435,r.tag))}return cf(t,o,c),lf(),!1}if(ie)return n=Yn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==sh&&(t=Error(a(422),{cause:o}),xo(qn(t,r)))):(o!==sh&&(n=Error(a(423),{cause:o}),xo(qn(n,r))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,o=qn(o,r),c=Ph(t.stateNode,o,c),mh(t,c),Re!==4&&(Re=2)),!1;var d=Error(a(520),{cause:o});if(d=qn(d,r),Bo===null?Bo=[d]:Bo.push(d),Re!==4&&(Re=2),n===null)return!0;o=qn(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=c&-c,r.lanes|=t,t=Ph(r.stateNode,o,t),mh(r,t),!1;case 1:if(n=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(jr===null||!jr.has(d))))return r.flags|=65536,c&=-c,r.lanes|=c,c=Dm(c),Nm(c,t,r,o),mh(r,c),!1}r=r.return}while(r!==null);return!1}var jm=Error(a(461)),Ze=!1;function nn(t,n,r,o){n.child=t===null?bm(n,null,r,o):xa(n,t.child,r,o)}function Im(t,n,r,o,c){r=r.render;var d=n.ref;if("ref"in o){var x={};for(var E in o)E!=="ref"&&(x[E]=o[E])}else x=o;return Rs(n),o=xh(t,n,r,x,d,c),E=bh(),t!==null&&!Ze?(Eh(t,n,c),Zi(t,n,c)):(ie&&E&&ih(n),n.flags|=1,nn(t,n,o,c),n.child)}function Mm(t,n,r,o,c){if(t===null){var d=r.type;return typeof d=="function"&&!th(d)&&d.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=d,Vm(t,n,d,o,c)):(t=Kl(r.type,null,o,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!Gh(t,c)){var x=d.memoizedProps;if(r=r.compare,r=r!==null?r:go,r(x,o)&&t.ref===n.ref)return Zi(t,n,c)}return n.flags|=1,t=Fi(d,o),t.ref=n.ref,t.return=n,n.child=t}function Vm(t,n,r,o,c){if(t!==null){var d=t.memoizedProps;if(go(d,o)&&t.ref===n.ref)if(Ze=!1,n.pendingProps=o=d,Gh(t,c))(t.flags&131072)!==0&&(Ze=!0);else return n.lanes=t.lanes,Zi(t,n,c)}return Uh(t,n,r,o,c)}function Om(t,n,r){var o=n.pendingProps,c=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=d!==null?d.baseLanes|r:r,t!==null){for(c=n.child=t.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;n.childLanes=d&~o}else n.childLanes=0,n.child=null;return km(t,n,o,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Jl(n,d!==null?d.cachePool:null),d!==null?Vp(n,d):yh(),Em(n);else return n.lanes=n.childLanes=536870912,km(t,n,d!==null?d.baseLanes|r:r,r)}else d!==null?(Jl(n,d.cachePool),Vp(n,d),Ar(),n.memoizedState=null):(t!==null&&Jl(n,null),yh(),Ar());return nn(t,n,c,r),n.child}function km(t,n,r,o){var c=hh();return c=c===null?null:{parent:Ge._currentValue,pool:c},n.memoizedState={baseLanes:r,cachePool:c},t!==null&&Jl(n,null),yh(),Em(n),t!==null&&bo(t,n,o,!0),null}function gu(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Uh(t,n,r,o,c){return Rs(n),r=xh(t,n,r,o,void 0,c),o=bh(),t!==null&&!Ze?(Eh(t,n,c),Zi(t,n,c)):(ie&&o&&ih(n),n.flags|=1,nn(t,n,r,c),n.child)}function Pm(t,n,r,o,c,d){return Rs(n),n.updateQueue=null,r=kp(n,o,r,c),Op(t),o=bh(),t!==null&&!Ze?(Eh(t,n,d),Zi(t,n,d)):(ie&&o&&ih(n),n.flags|=1,nn(t,n,r,d),n.child)}function Um(t,n,r,o,c){if(Rs(n),n.stateNode===null){var d=ca,x=r.contextType;typeof x=="object"&&x!==null&&(d=hn(x)),d=new r(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=kh,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},dh(n),x=r.contextType,d.context=typeof x=="object"&&x!==null?hn(x):ca,d.state=n.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Oh(n,r,x,o),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(x=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),x!==d.state&&kh.enqueueReplaceState(d,d.state,null),Ro(n,o,d,c),Co(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){d=n.stateNode;var E=n.memoizedProps,M=js(r,E);d.props=M;var Q=d.context,st=r.contextType;x=ca,typeof st=="object"&&st!==null&&(x=hn(st));var ut=r.getDerivedStateFromProps;st=typeof ut=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,st||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||Q!==x)&&Sm(n,d,o,x),xr=!1;var X=n.memoizedState;d.state=X,Ro(n,o,d,c),Co(),Q=n.memoizedState,E||X!==Q||xr?(typeof ut=="function"&&(Oh(n,r,ut,o),Q=n.memoizedState),(M=xr||Tm(n,r,M,o,X,Q,x))?(st||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=Q),d.props=o,d.state=Q,d.context=x,o=M):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,ph(t,n),x=n.memoizedProps,st=js(r,x),d.props=st,ut=n.pendingProps,X=d.context,Q=r.contextType,M=ca,typeof Q=="object"&&Q!==null&&(M=hn(Q)),E=r.getDerivedStateFromProps,(Q=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x!==ut||X!==M)&&Sm(n,d,o,M),xr=!1,X=n.memoizedState,d.state=X,Ro(n,o,d,c),Co();var Z=n.memoizedState;x!==ut||X!==Z||xr||t!==null&&t.dependencies!==null&&Zl(t.dependencies)?(typeof E=="function"&&(Oh(n,r,E,o),Z=n.memoizedState),(st=xr||Tm(n,r,st,o,X,Z,M)||t!==null&&t.dependencies!==null&&Zl(t.dependencies))?(Q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Z,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Z,M)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=Z),d.props=o,d.state=Z,d.context=M,o=st):(typeof d.componentDidUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),o=!1)}return d=o,gu(t,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&o?(n.child=xa(n,t.child,null,c),n.child=xa(n,null,r,c)):nn(t,n,r,c),n.memoizedState=d.state,t=n.child):t=Zi(t,n,c),t}function zm(t,n,r,o){return _o(),n.flags|=256,nn(t,n,r,o),n.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lh(t){return{baseLanes:t,cachePool:wp()}}function Bh(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Qn),t}function Lm(t,n,r){var o=n.pendingProps,c=!1,d=(n.flags&128)!==0,x;if((x=d)||(x=t!==null&&t.memoizedState===null?!1:(Ye.current&2)!==0),x&&(c=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(ie){if(c?Sr(n):Ar(),ie){var E=Ce,M;if(M=E){t:{for(M=E,E=_i;M.nodeType!==8;){if(!E){E=null;break t}if(M=oi(M.nextSibling),M===null){E=null;break t}}E=M}E!==null?(n.memoizedState={dehydrated:E,treeContext:Ts!==null?{id:Gi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},M=jn(18,null,null,0),M.stateNode=E,M.return=n,n.child=M,_n=n,Ce=null,M=!0):M=!1}M||ws(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Af(E)?n.lanes=32:n.lanes=536870912,null;$i(n)}return E=o.children,o=o.fallback,c?(Ar(),c=n.mode,E=yu({mode:"hidden",children:E},c),o=Es(o,c,r,null),E.return=n,o.return=n,E.sibling=o,n.child=E,c=n.child,c.memoizedState=Lh(r),c.childLanes=Bh(t,x,r),n.memoizedState=zh,o):(Sr(n),qh(n,E))}if(M=t.memoizedState,M!==null&&(E=M.dehydrated,E!==null)){if(d)n.flags&256?(Sr(n),n.flags&=-257,n=Hh(t,n,r)):n.memoizedState!==null?(Ar(),n.child=t.child,n.flags|=128,n=null):(Ar(),c=o.fallback,E=n.mode,o=yu({mode:"visible",children:o.children},E),c=Es(c,E,r,null),c.flags|=2,o.return=n,c.return=n,o.sibling=c,n.child=o,xa(n,t.child,null,r),o=n.child,o.memoizedState=Lh(r),o.childLanes=Bh(t,x,r),n.memoizedState=zh,n=c);else if(Sr(n),Af(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var Q=x.dgst;x=Q,o=Error(a(419)),o.stack="",o.digest=x,xo({value:o,source:null,stack:null}),n=Hh(t,n,r)}else if(Ze||bo(t,n,r,!1),x=(r&t.childLanes)!==0,Ze||x){if(x=ye,x!==null&&(o=r&-r,o=(o&42)!==0?1:Wa(o),o=(o&(x.suspendedLanes|r))!==0?0:o,o!==0&&o!==M.retryLane))throw M.retryLane=o,ua(t,o),kn(x,t,o),jm;E.data==="$?"||lf(),n=Hh(t,n,r)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=M.treeContext,Ce=oi(E.nextSibling),_n=n,ie=!0,As=null,_i=!1,t!==null&&(Fn[Gn++]=Gi,Fn[Gn++]=Yi,Fn[Gn++]=Ts,Gi=t.id,Yi=t.overflow,Ts=n),n=qh(n,o.children),n.flags|=4096);return n}return c?(Ar(),c=o.fallback,E=n.mode,M=t.child,Q=M.sibling,o=Fi(M,{mode:"hidden",children:o.children}),o.subtreeFlags=M.subtreeFlags&65011712,Q!==null?c=Fi(Q,c):(c=Es(c,E,r,null),c.flags|=2),c.return=n,o.return=n,o.sibling=c,n.child=o,o=c,c=n.child,E=t.child.memoizedState,E===null?E=Lh(r):(M=E.cachePool,M!==null?(Q=Ge._currentValue,M=M.parent!==Q?{parent:Q,pool:Q}:M):M=wp(),E={baseLanes:E.baseLanes|r,cachePool:M}),c.memoizedState=E,c.childLanes=Bh(t,x,r),n.memoizedState=zh,o):(Sr(n),r=t.child,t=r.sibling,r=Fi(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=r,n.memoizedState=null,r)}function qh(t,n){return n=yu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function yu(t,n){return t=jn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Hh(t,n,r){return xa(n,t.child,null,r),t=qh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Bm(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),oh(t.return,n,r)}function Fh(t,n,r,o,c){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=c)}function qm(t,n,r){var o=n.pendingProps,c=o.revealOrder,d=o.tail;if(nn(t,n,o.children,r),o=Ye.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bm(t,r,n);else if(t.tag===19)Bm(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(U(Ye,o),c){case"forwards":for(r=n.child,c=null;r!==null;)t=r.alternate,t!==null&&du(t)===null&&(c=r),r=r.sibling;r=c,r===null?(c=n.child,n.child=null):(c=r.sibling,r.sibling=null),Fh(n,!1,c,r,d);break;case"backwards":for(r=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&du(t)===null){n.child=c;break}t=c.sibling,c.sibling=r,r=c,c=t}Fh(n,!0,r,null,d);break;case"together":Fh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Zi(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Nr|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(bo(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,r=Fi(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Fi(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Gh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Zl(t)))}function Cx(t,n,r){switch(n.tag){case 3:yt(n,n.stateNode.containerInfo),_r(n,Ge,t.memoizedState.cache),_o();break;case 27:case 5:Yt(n);break;case 4:yt(n,n.stateNode.containerInfo);break;case 10:_r(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Sr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Lm(t,n,r):(Sr(n),t=Zi(t,n,r),t!==null?t.sibling:null);Sr(n);break;case 19:var c=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(bo(t,n,r,!1),o=(r&n.childLanes)!==0),c){if(o)return qm(t,n,r);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),U(Ye,Ye.current),o)break;return null;case 22:case 23:return n.lanes=0,Om(t,n,r);case 24:_r(n,Ge,t.memoizedState.cache)}return Zi(t,n,r)}function Hm(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ze=!0;else{if(!Gh(t,r)&&(n.flags&128)===0)return Ze=!1,Cx(t,n,r);Ze=(t.flags&131072)!==0}else Ze=!1,ie&&(n.flags&1048576)!==0&&_p(n,$l,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var o=n.elementType,c=o._init;if(o=c(o._payload),n.type=o,typeof o=="function")th(o)?(t=js(o,t),n.tag=1,n=Um(null,n,o,t,r)):(n.tag=0,n=Uh(null,n,o,t,r));else{if(o!=null){if(c=o.$$typeof,c===dt){n.tag=11,n=Im(null,n,o,t,r);break t}else if(c===N){n.tag=14,n=Mm(null,n,o,t,r);break t}}throw n=vt(o)||o,Error(a(306,n,""))}}return n;case 0:return Uh(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,c=js(o,n.pendingProps),Um(t,n,o,c,r);case 3:t:{if(yt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));o=n.pendingProps;var d=n.memoizedState;c=d.element,ph(t,n),Ro(n,o,null,r);var x=n.memoizedState;if(o=x.cache,_r(n,Ge,o),o!==d.cache&&lh(n,[Ge],r,!0),Co(),o=x.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=zm(t,n,o,r);break t}else if(o!==c){c=qn(Error(a(424)),n),xo(c),n=zm(t,n,o,r);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ce=oi(t.firstChild),_n=n,ie=!0,As=null,_i=!0,r=bm(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(_o(),o===c){n=Zi(t,n,r);break t}nn(t,n,o,r)}n=n.child}return n;case 26:return gu(t,n),t===null?(r=Qg(n.type,null,n.pendingProps,null))?n.memoizedState=r:ie||(r=n.type,t=n.pendingProps,o=ju(H.current).createElement(r),o[Ne]=n,o[en]=t,sn(o,r,t),je(o),n.stateNode=o):n.memoizedState=Qg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Yt(n),t===null&&ie&&(o=n.stateNode=Fg(n.type,n.pendingProps,H.current),_n=n,_i=!0,c=Ce,Vr(n.type)?(wf=c,Ce=oi(o.firstChild)):Ce=c),nn(t,n,n.pendingProps.children,r),gu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ie&&((c=o=Ce)&&(o=e1(o,n.type,n.pendingProps,_i),o!==null?(n.stateNode=o,_n=n,Ce=oi(o.firstChild),_i=!1,c=!0):c=!1),c||ws(n)),Yt(n),c=n.type,d=n.pendingProps,x=t!==null?t.memoizedProps:null,o=d.children,Ef(c,d)?o=null:x!==null&&Ef(c,x)&&(n.flags|=32),n.memoizedState!==null&&(c=xh(t,n,_x,null,null,r),$o._currentValue=c),gu(t,n),nn(t,n,o,r),n.child;case 6:return t===null&&ie&&((t=r=Ce)&&(r=n1(r,n.pendingProps,_i),r!==null?(n.stateNode=r,_n=n,Ce=null,t=!0):t=!1),t||ws(n)),null;case 13:return Lm(t,n,r);case 4:return yt(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=xa(n,null,o,r):nn(t,n,o,r),n.child;case 11:return Im(t,n,n.type,n.pendingProps,r);case 7:return nn(t,n,n.pendingProps,r),n.child;case 8:return nn(t,n,n.pendingProps.children,r),n.child;case 12:return nn(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,_r(n,n.type,o.value),nn(t,n,o.children,r),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,Rs(n),c=hn(c),o=o(c),n.flags|=1,nn(t,n,o,r),n.child;case 14:return Mm(t,n,n.type,n.pendingProps,r);case 15:return Vm(t,n,n.type,n.pendingProps,r);case 19:return qm(t,n,r);case 31:return o=n.pendingProps,r=n.mode,o={mode:o.mode,children:o.children},t===null?(r=yu(o,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=Fi(t.child,o),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Om(t,n,r);case 24:return Rs(n),o=hn(Ge),t===null?(c=hh(),c===null&&(c=ye,d=uh(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=r),c=d),n.memoizedState={parent:o,cache:c},dh(n),_r(n,Ge,c)):((t.lanes&r)!==0&&(ph(t,n),Ro(n,null,null,r),Co()),c=t.memoizedState,d=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),_r(n,Ge,o)):(o=d.cache,_r(n,Ge,o),o!==c.cache&&lh(n,[Ge],r,!0))),nn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Wi(t){t.flags|=4}function Fm(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wg(n)){if(n=Yn.current,n!==null&&((Jt&4194048)===Jt?xi!==null:(Jt&62914560)!==Jt&&(Jt&536870912)===0||n!==xi))throw Ao=fh,Cp;t.flags|=8192}}function vu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Tn():536870912,t.lanes|=n,Sa|=n)}function Oo(t,n){if(!ie)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ae(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var c=t.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function Rx(t,n,r){var o=n.pendingProps;switch(rh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(n),null;case 1:return Ae(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Ki(Ge),Dt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vo(n)?Wi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ep())),Ae(n),null;case 26:return r=n.memoizedState,t===null?(Wi(n),r!==null?(Ae(n),Fm(n,r)):(Ae(n),n.flags&=-16777217)):r?r!==t.memoizedState?(Wi(n),Ae(n),Fm(n,r)):(Ae(n),n.flags&=-16777217):(t.memoizedProps!==o&&Wi(n),Ae(n),n.flags&=-16777217),null;case 27:Wt(n),r=H.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Wi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Ae(n),null}t=W.current,vo(n)?xp(n):(t=Fg(c,o,r),n.stateNode=t,Wi(n))}return Ae(n),null;case 5:if(Wt(n),r=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Wi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Ae(n),null}if(t=W.current,vo(n))xp(n);else{switch(c=ju(H.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?c.createElement("select",{is:o.is}):c.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?c.createElement(r,{is:o.is}):c.createElement(r)}}t[Ne]=n,t[en]=o;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(sn(t,r,o),r){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Wi(n)}}return Ae(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Wi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(t=H.current,vo(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,c=_n,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}t[Ne]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Pg(t.nodeValue,r)),t||ws(n)}else t=ju(t).createTextNode(o),t[Ne]=n,n.stateNode=t}return Ae(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=vo(n),o!==null&&o.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[Ne]=n}else _o(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ae(n),c=!1}else c=Ep(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?($i(n),n):($i(n),null)}if($i(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=o!==null,t=t!==null&&t.memoizedState!==null,r){o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048)}return r!==t&&r&&(n.child.flags|=8192),vu(n,n.updateQueue),Ae(n),null;case 4:return Dt(),t===null&&yf(n.stateNode.containerInfo),Ae(n),null;case 10:return Ki(n.type),Ae(n),null;case 19:if(z(Ye),c=n.memoizedState,c===null)return Ae(n),null;if(o=(n.flags&128)!==0,d=c.rendering,d===null)if(o)Oo(c,!1);else{if(Re!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=du(t),d!==null){for(n.flags|=128,Oo(c,!1),t=d.updateQueue,n.updateQueue=t,vu(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)vp(r,t),r=r.sibling;return U(Ye,Ye.current&1|2),n.child}t=t.sibling}c.tail!==null&&De()>bu&&(n.flags|=128,o=!0,Oo(c,!1),n.lanes=4194304)}else{if(!o)if(t=du(d),t!==null){if(n.flags|=128,o=!0,t=t.updateQueue,n.updateQueue=t,vu(n,t),Oo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!ie)return Ae(n),null}else 2*De()-c.renderingStartTime>bu&&r!==536870912&&(n.flags|=128,o=!0,Oo(c,!1),n.lanes=4194304);c.isBackwards?(d.sibling=n.child,n.child=d):(t=c.last,t!==null?t.sibling=d:n.child=d,c.last=d)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=De(),n.sibling=null,t=Ye.current,U(Ye,o?t&1|2:t&1),n):(Ae(n),null);case 22:case 23:return $i(n),vh(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Ae(n),n.subtreeFlags&6&&(n.flags|=8192)):Ae(n),r=n.updateQueue,r!==null&&vu(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&z(Ds),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Ki(Ge),Ae(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function Dx(t,n){switch(rh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ki(Ge),Dt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Wt(n),null;case 13:if($i(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));_o()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return z(Ye),null;case 4:return Dt(),null;case 10:return Ki(n.type),null;case 22:case 23:return $i(n),vh(),t!==null&&z(Ds),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Ki(Ge),null;case 25:return null;default:return null}}function Gm(t,n){switch(rh(n),n.tag){case 3:Ki(Ge),Dt();break;case 26:case 27:case 5:Wt(n);break;case 4:Dt();break;case 13:$i(n);break;case 19:z(Ye);break;case 10:Ki(n.type);break;case 22:case 23:$i(n),vh(),t!==null&&z(Ds);break;case 24:Ki(Ge)}}function ko(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var c=o.next;r=c;do{if((r.tag&t)===t){o=void 0;var d=r.create,x=r.inst;o=d(),x.destroy=o}r=r.next}while(r!==c)}}catch(E){pe(n,n.return,E)}}function wr(t,n,r){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&t)===t){var x=o.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,c=n;var M=r,Q=E;try{Q()}catch(st){pe(c,M,st)}}}o=o.next}while(o!==d)}}catch(st){pe(n,n.return,st)}}function Ym(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Mp(n,r)}catch(o){pe(t,t.return,o)}}}function Qm(t,n,r){r.props=js(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){pe(t,n,o)}}function Po(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(c){pe(t,n,c)}}function bi(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(c){pe(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){pe(t,n,c)}else r.current=null}function Km(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break t;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(c){pe(t,t.return,c)}}function Yh(t,n,r){try{var o=t.stateNode;$x(o,t.type,r,n),o[en]=n}catch(c){pe(t,t.return,c)}}function Xm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vr(t.type)||t.tag===4}function Qh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Xm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vr(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kh(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Nu));else if(o!==4&&(o===27&&Vr(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Kh(t,n,r),t=t.sibling;t!==null;)Kh(t,n,r),t=t.sibling}function _u(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&Vr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(_u(t,n,r),t=t.sibling;t!==null;)_u(t,n,r),t=t.sibling}function $m(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);sn(n,o,r),n[Ne]=t,n[en]=r}catch(d){pe(t,t.return,d)}}var Ji=!1,Ve=!1,Xh=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,We=null;function Nx(t,n){if(t=t.containerInfo,xf=Pu,t=lp(t),Qc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break t}var x=0,E=-1,M=-1,Q=0,st=0,ut=t,X=null;e:for(;;){for(var Z;ut!==r||c!==0&&ut.nodeType!==3||(E=x+c),ut!==d||o!==0&&ut.nodeType!==3||(M=x+o),ut.nodeType===3&&(x+=ut.nodeValue.length),(Z=ut.firstChild)!==null;)X=ut,ut=Z;for(;;){if(ut===t)break e;if(X===r&&++Q===c&&(E=x),X===d&&++st===o&&(M=x),(Z=ut.nextSibling)!==null)break;ut=X,X=ut.parentNode}ut=Z}r=E===-1||M===-1?null:{start:E,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(bf={focusedElem:t,selectionRange:r},Pu=!1,We=n;We!==null;)if(n=We,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,We=t;else for(;We!==null;){switch(n=We,d=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,r=n,c=d.memoizedProps,d=d.memoizedState,o=r.stateNode;try{var Ut=js(r.type,c,r.elementType===r.type);t=o.getSnapshotBeforeUpdate(Ut,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ot){pe(r,r.return,Ot)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)Sf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Sf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,We=t;break}We=n.return}}function Wm(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Cr(t,r),o&4&&ko(5,r);break;case 1:if(Cr(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(x){pe(r,r.return,x)}else{var c=js(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){pe(r,r.return,x)}}o&64&&Ym(r),o&512&&Po(r,r.return);break;case 3:if(Cr(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Mp(t,n)}catch(x){pe(r,r.return,x)}}break;case 27:n===null&&o&4&&$m(r);case 26:case 5:Cr(t,r),n===null&&o&4&&Km(r),o&512&&Po(r,r.return);break;case 12:Cr(t,r);break;case 13:Cr(t,r),o&4&&eg(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=zx.bind(null,r),i1(t,r))));break;case 22:if(o=r.memoizedState!==null||Ji,!o){n=n!==null&&n.memoizedState!==null||Ve,c=Ji;var d=Ve;Ji=o,(Ve=n)&&!d?Rr(t,r,(r.subtreeFlags&8772)!==0):Cr(t,r),Ji=c,Ve=d}break;case 30:break;default:Cr(t,r)}}function Jm(t){var n=t.alternate;n!==null&&(t.alternate=null,Jm(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ks(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Te=null,An=!1;function tr(t,n,r){for(r=r.child;r!==null;)tg(t,n,r),r=r.sibling}function tg(t,n,r){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Un,r)}catch{}switch(r.tag){case 26:Ve||bi(r,n),tr(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ve||bi(r,n);var o=Te,c=An;Vr(r.type)&&(Te=r.stateNode,An=!1),tr(t,n,r),Yo(r.stateNode),Te=o,An=c;break;case 5:Ve||bi(r,n);case 6:if(o=Te,c=An,Te=null,tr(t,n,r),Te=o,An=c,Te!==null)if(An)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(r.stateNode)}catch(d){pe(r,n,d)}else try{Te.removeChild(r.stateNode)}catch(d){pe(r,n,d)}break;case 18:Te!==null&&(An?(t=Te,qg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),tl(t)):qg(Te,r.stateNode));break;case 4:o=Te,c=An,Te=r.stateNode.containerInfo,An=!0,tr(t,n,r),Te=o,An=c;break;case 0:case 11:case 14:case 15:Ve||wr(2,r,n),Ve||wr(4,r,n),tr(t,n,r);break;case 1:Ve||(bi(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&Qm(r,n,o)),tr(t,n,r);break;case 21:tr(t,n,r);break;case 22:Ve=(o=Ve)||r.memoizedState!==null,tr(t,n,r),Ve=o;break;default:tr(t,n,r)}}function eg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{tl(t)}catch(r){pe(n,n.return,r)}}function jx(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Zm),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Zm),n;default:throw Error(a(435,t.tag))}}function $h(t,n){var r=jx(t);n.forEach(function(o){var c=Lx.bind(null,t,o);r.has(o)||(r.add(o),o.then(c,c))})}function In(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o],d=t,x=n,E=x;t:for(;E!==null;){switch(E.tag){case 27:if(Vr(E.type)){Te=E.stateNode,An=!1;break t}break;case 5:Te=E.stateNode,An=!1;break t;case 3:case 4:Te=E.stateNode.containerInfo,An=!0;break t}E=E.return}if(Te===null)throw Error(a(160));tg(d,x,c),Te=null,An=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ng(n,t),n=n.sibling}var ai=null;function ng(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:In(n,t),Mn(t),o&4&&(wr(3,t,t.return),ko(3,t),wr(5,t,t.return));break;case 1:In(n,t),Mn(t),o&512&&(Ve||r===null||bi(r,r.return)),o&64&&Ji&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var c=ai;if(In(n,t),Mn(t),o&512&&(Ve||r===null||bi(r,r.return)),o&4){var d=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){t:{o=t.type,r=t.memoizedProps,c=c.ownerDocument||c;e:switch(o){case"title":d=c.getElementsByTagName("title")[0],(!d||d[ur]||d[Ne]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(o),c.head.insertBefore(d,c.querySelector("head > title"))),sn(d,o,r),d[Ne]=t,je(d),o=d;break t;case"link":var x=$g("link","href",c).get(o+(r.href||""));if(x){for(var E=0;E<x.length;E++)if(d=x[E],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){x.splice(E,1);break e}}d=c.createElement(o),sn(d,o,r),c.head.appendChild(d);break;case"meta":if(x=$g("meta","content",c).get(o+(r.content||""))){for(E=0;E<x.length;E++)if(d=x[E],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){x.splice(E,1);break e}}d=c.createElement(o),sn(d,o,r),c.head.appendChild(d);break;default:throw Error(a(468,o))}d[Ne]=t,je(d),o=d}t.stateNode=o}else Zg(c,t.type,t.stateNode);else t.stateNode=Xg(c,o,t.memoizedProps);else d!==o?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,o===null?Zg(c,t.type,t.stateNode):Xg(c,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Yh(t,t.memoizedProps,r.memoizedProps)}break;case 27:In(n,t),Mn(t),o&512&&(Ve||r===null||bi(r,r.return)),r!==null&&o&4&&Yh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(In(n,t),Mn(t),o&512&&(Ve||r===null||bi(r,r.return)),t.flags&32){c=t.stateNode;try{Ln(c,"")}catch(Z){pe(t,t.return,Z)}}o&4&&t.stateNode!=null&&(c=t.memoizedProps,Yh(t,c,r!==null?r.memoizedProps:c)),o&1024&&(Xh=!0);break;case 6:if(In(n,t),Mn(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Z){pe(t,t.return,Z)}}break;case 3:if(Vu=null,c=ai,ai=Iu(n.containerInfo),In(n,t),ai=c,Mn(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{tl(n.containerInfo)}catch(Z){pe(t,t.return,Z)}Xh&&(Xh=!1,ig(t));break;case 4:o=ai,ai=Iu(t.stateNode.containerInfo),In(n,t),Mn(t),ai=o;break;case 12:In(n,t),Mn(t);break;case 13:In(n,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(nf=De()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,$h(t,o)));break;case 22:c=t.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,Q=Ji,st=Ve;if(Ji=Q||c,Ve=st||M,In(n,t),Ve=st,Ji=Q,Mn(t),o&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(r===null||M||Ji||Ve||Is(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){M=r=n;try{if(d=M.stateNode,c)x=d.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=M.stateNode;var ut=M.memoizedProps.style,X=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Z){pe(M,M.return,Z)}}}else if(n.tag===6){if(r===null){M=n;try{M.stateNode.nodeValue=c?"":M.memoizedProps}catch(Z){pe(M,M.return,Z)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,$h(t,r))));break;case 19:In(n,t),Mn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,$h(t,o)));break;case 30:break;case 21:break;default:In(n,t),Mn(t)}}function Mn(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(Xm(o)){r=o;break}o=o.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var c=r.stateNode,d=Qh(t);_u(t,d,c);break;case 5:var x=r.stateNode;r.flags&32&&(Ln(x,""),r.flags&=-33);var E=Qh(t);_u(t,E,x);break;case 3:case 4:var M=r.stateNode.containerInfo,Q=Qh(t);Kh(t,Q,M);break;default:throw Error(a(161))}}catch(st){pe(t,t.return,st)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function ig(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;ig(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Cr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Wm(t,n.alternate,n),n=n.sibling}function Is(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:wr(4,n,n.return),Is(n);break;case 1:bi(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Qm(n,n.return,r),Is(n);break;case 27:Yo(n.stateNode);case 26:case 5:bi(n,n.return),Is(n);break;case 22:n.memoizedState===null&&Is(n);break;case 30:Is(n);break;default:Is(n)}t=t.sibling}}function Rr(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=t,d=n,x=d.flags;switch(d.tag){case 0:case 11:case 15:Rr(c,d,r),ko(4,d);break;case 1:if(Rr(c,d,r),o=d,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Q){pe(o,o.return,Q)}if(o=d,c=o.updateQueue,c!==null){var E=o.stateNode;try{var M=c.shared.hiddenCallbacks;if(M!==null)for(c.shared.hiddenCallbacks=null,c=0;c<M.length;c++)Ip(M[c],E)}catch(Q){pe(o,o.return,Q)}}r&&x&64&&Ym(d),Po(d,d.return);break;case 27:$m(d);case 26:case 5:Rr(c,d,r),r&&o===null&&x&4&&Km(d),Po(d,d.return);break;case 12:Rr(c,d,r);break;case 13:Rr(c,d,r),r&&x&4&&eg(c,d);break;case 22:d.memoizedState===null&&Rr(c,d,r),Po(d,d.return);break;case 30:break;default:Rr(c,d,r)}n=n.sibling}}function Zh(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Eo(r))}function Wh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Eo(t))}function Ei(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)rg(t,n,r,o),n=n.sibling}function rg(t,n,r,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:Ei(t,n,r,o),c&2048&&ko(9,n);break;case 1:Ei(t,n,r,o);break;case 3:Ei(t,n,r,o),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Eo(t)));break;case 12:if(c&2048){Ei(t,n,r,o),t=n.stateNode;try{var d=n.memoizedProps,x=d.id,E=d.onPostCommit;typeof E=="function"&&E(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){pe(n,n.return,M)}}else Ei(t,n,r,o);break;case 13:Ei(t,n,r,o);break;case 23:break;case 22:d=n.stateNode,x=n.alternate,n.memoizedState!==null?d._visibility&2?Ei(t,n,r,o):Uo(t,n):d._visibility&2?Ei(t,n,r,o):(d._visibility|=2,ba(t,n,r,o,(n.subtreeFlags&10256)!==0)),c&2048&&Zh(x,n);break;case 24:Ei(t,n,r,o),c&2048&&Wh(n.alternate,n);break;default:Ei(t,n,r,o)}}function ba(t,n,r,o,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=t,x=n,E=r,M=o,Q=x.flags;switch(x.tag){case 0:case 11:case 15:ba(d,x,E,M,c),ko(8,x);break;case 23:break;case 22:var st=x.stateNode;x.memoizedState!==null?st._visibility&2?ba(d,x,E,M,c):Uo(d,x):(st._visibility|=2,ba(d,x,E,M,c)),c&&Q&2048&&Zh(x.alternate,x);break;case 24:ba(d,x,E,M,c),c&&Q&2048&&Wh(x.alternate,x);break;default:ba(d,x,E,M,c)}n=n.sibling}}function Uo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,c=o.flags;switch(o.tag){case 22:Uo(r,o),c&2048&&Zh(o.alternate,o);break;case 24:Uo(r,o),c&2048&&Wh(o.alternate,o);break;default:Uo(r,o)}n=n.sibling}}var zo=8192;function Ea(t){if(t.subtreeFlags&zo)for(t=t.child;t!==null;)sg(t),t=t.sibling}function sg(t){switch(t.tag){case 26:Ea(t),t.flags&zo&&t.memoizedState!==null&&g1(ai,t.memoizedState,t.memoizedProps);break;case 5:Ea(t);break;case 3:case 4:var n=ai;ai=Iu(t.stateNode.containerInfo),Ea(t),ai=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=zo,zo=16777216,Ea(t),zo=n):Ea(t));break;default:Ea(t)}}function ag(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Lo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];We=o,lg(o,t)}ag(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)og(t),t=t.sibling}function og(t){switch(t.tag){case 0:case 11:case 15:Lo(t),t.flags&2048&&wr(9,t,t.return);break;case 3:Lo(t);break;case 12:Lo(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,xu(t)):Lo(t);break;default:Lo(t)}}function xu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];We=o,lg(o,t)}ag(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:wr(8,n,n.return),xu(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,xu(n));break;default:xu(n)}t=t.sibling}}function lg(t,n){for(;We!==null;){var r=We;switch(r.tag){case 0:case 11:case 15:wr(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Eo(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,We=o;else t:for(r=t;We!==null;){o=We;var c=o.sibling,d=o.return;if(Jm(o),o===r){We=null;break t}if(c!==null){c.return=d,We=c;break t}We=d}}}var Ix={getCacheForType:function(t){var n=hn(Ge),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r}},Mx=typeof WeakMap=="function"?WeakMap:Map,oe=0,ye=null,Kt=null,Jt=0,le=0,Vn=null,Dr=!1,Ta=!1,Jh=!1,er=0,Re=0,Nr=0,Ms=0,tf=0,Qn=0,Sa=0,Bo=null,wn=null,ef=!1,nf=0,bu=1/0,Eu=null,jr=null,rn=0,Ir=null,Aa=null,wa=0,rf=0,sf=null,ug=null,qo=0,af=null;function On(){if((oe&2)!==0&&Jt!==0)return Jt&-Jt;if(O.T!==null){var t=da;return t!==0?t:df()}return Pi()}function cg(){Qn===0&&(Qn=(Jt&536870912)===0||ie?un():536870912);var t=Yn.current;return t!==null&&(t.flags|=32),Qn}function kn(t,n,r){(t===ye&&(le===2||le===9)||t.cancelPendingCommit!==null)&&(Ca(t,0),Mr(t,Jt,Qn,!1)),Ee(t,r),((oe&2)===0||t!==ye)&&(t===ye&&((oe&2)===0&&(Ms|=r),Re===4&&Mr(t,Jt,Qn,!1)),Ti(t))}function hg(t,n,r){if((oe&6)!==0)throw Error(a(327));var o=!r&&(n&124)===0&&(n&t.expiredLanes)===0||me(t,n),c=o?kx(t,n):uf(t,n,!0),d=o;do{if(c===0){Ta&&!o&&Mr(t,n,0,!1);break}else{if(r=t.current.alternate,d&&!Vx(r)){c=uf(t,n,!1),d=!1;continue}if(c===2){if(d=n,t.errorRecoveryDisabledLanes&d)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;t:{var E=t;c=Bo;var M=E.current.memoizedState.isDehydrated;if(M&&(Ca(E,x).flags|=256),x=uf(E,x,!1),x!==2){if(Jh&&!M){E.errorRecoveryDisabledLanes|=d,Ms|=d,c=4;break t}d=wn,wn=c,d!==null&&(wn===null?wn=d:wn.push.apply(wn,d))}c=x}if(d=!1,c!==2)continue}}if(c===1){Ca(t,0),Mr(t,n,0,!0);break}t:{switch(o=t,d=c,d){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Mr(o,n,Qn,!Dr);break t;case 2:wn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=nf+300-De(),10<c)){if(Mr(o,n,Qn,!Dr),At(o,0,!0)!==0)break t;o.timeoutHandle=Lg(fg.bind(null,o,r,wn,Eu,ef,n,Qn,Ms,Sa,Dr,d,2,-0,0),c);break t}fg(o,r,wn,Eu,ef,n,Qn,Ms,Sa,Dr,d,0,-0,0)}}break}while(!0);Ti(t)}function fg(t,n,r,o,c,d,x,E,M,Q,st,ut,X,Z){if(t.timeoutHandle=-1,ut=n.subtreeFlags,(ut&8192||(ut&16785408)===16785408)&&(Xo={stylesheets:null,count:0,unsuspend:m1},sg(n),ut=y1(),ut!==null)){t.cancelPendingCommit=ut(_g.bind(null,t,n,d,r,o,c,x,E,M,st,1,X,Z)),Mr(t,d,x,!Q);return}_g(t,n,d,r,o,c,x,E,M)}function Vx(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var c=r[o],d=c.getSnapshot;c=c.value;try{if(!Nn(d(),c))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Mr(t,n,r,o){n&=~tf,n&=~Ms,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var c=n;0<c;){var d=31-ft(c),x=1<<d;o[d]=-1,c&=~x}r!==0&&or(t,r,n)}function Tu(){return(oe&6)===0?(Ho(0),!1):!0}function of(){if(Kt!==null){if(le===0)var t=Kt.return;else t=Kt,Qi=Cs=null,Th(t),_a=null,Mo=0,t=Kt;for(;t!==null;)Gm(t.alternate,t),t=t.return;Kt=null}}function Ca(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Wx(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),of(),ye=t,Kt=r=Fi(t.current,null),Jt=n,le=0,Vn=null,Dr=!1,Ta=me(t,n),Jh=!1,Sa=Qn=tf=Ms=Nr=Re=0,wn=Bo=null,ef=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var c=31-ft(o),d=1<<c;n|=t[c],o&=~d}return er=n,Gl(),r}function dg(t,n){Gt=null,O.H=cu,n===So||n===tu?(n=Np(),le=3):n===Cp?(n=Np(),le=4):le=n===jm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Vn=n,Kt===null&&(Re=1,mu(t,qn(n,t.current)))}function pg(){var t=O.H;return O.H=cu,t===null?cu:t}function mg(){var t=O.A;return O.A=Ix,t}function lf(){Re=4,Dr||(Jt&4194048)!==Jt&&Yn.current!==null||(Ta=!0),(Nr&134217727)===0&&(Ms&134217727)===0||ye===null||Mr(ye,Jt,Qn,!1)}function uf(t,n,r){var o=oe;oe|=2;var c=pg(),d=mg();(ye!==t||Jt!==n)&&(Eu=null,Ca(t,n)),n=!1;var x=Re;t:do try{if(le!==0&&Kt!==null){var E=Kt,M=Vn;switch(le){case 8:of(),x=6;break t;case 3:case 2:case 9:case 6:Yn.current===null&&(n=!0);var Q=le;if(le=0,Vn=null,Ra(t,E,M,Q),r&&Ta){x=0;break t}break;default:Q=le,le=0,Vn=null,Ra(t,E,M,Q)}}Ox(),x=Re;break}catch(st){dg(t,st)}while(!0);return n&&t.shellSuspendCounter++,Qi=Cs=null,oe=o,O.H=c,O.A=d,Kt===null&&(ye=null,Jt=0,Gl()),x}function Ox(){for(;Kt!==null;)gg(Kt)}function kx(t,n){var r=oe;oe|=2;var o=pg(),c=mg();ye!==t||Jt!==n?(Eu=null,bu=De()+500,Ca(t,n)):Ta=me(t,n);t:do try{if(le!==0&&Kt!==null){n=Kt;var d=Vn;e:switch(le){case 1:le=0,Vn=null,Ra(t,n,d,1);break;case 2:case 9:if(Rp(d)){le=0,Vn=null,yg(n);break}n=function(){le!==2&&le!==9||ye!==t||(le=7),Ti(t)},d.then(n,n);break t;case 3:le=7;break t;case 4:le=5;break t;case 7:Rp(d)?(le=0,Vn=null,yg(n)):(le=0,Vn=null,Ra(t,n,d,7));break;case 5:var x=null;switch(Kt.tag){case 26:x=Kt.memoizedState;case 5:case 27:var E=Kt;if(!x||Wg(x)){le=0,Vn=null;var M=E.sibling;if(M!==null)Kt=M;else{var Q=E.return;Q!==null?(Kt=Q,Su(Q)):Kt=null}break e}}le=0,Vn=null,Ra(t,n,d,5);break;case 6:le=0,Vn=null,Ra(t,n,d,6);break;case 8:of(),Re=6;break t;default:throw Error(a(462))}}Px();break}catch(st){dg(t,st)}while(!0);return Qi=Cs=null,O.H=o,O.A=c,oe=r,Kt!==null?0:(ye=null,Jt=0,Gl(),Re)}function Px(){for(;Kt!==null&&!zt();)gg(Kt)}function gg(t){var n=Hm(t.alternate,t,er);t.memoizedProps=t.pendingProps,n===null?Su(t):Kt=n}function yg(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=Pm(r,n,n.pendingProps,n.type,void 0,Jt);break;case 11:n=Pm(r,n,n.pendingProps,n.type.render,n.ref,Jt);break;case 5:Th(n);default:Gm(r,n),n=Kt=vp(n,er),n=Hm(r,n,er)}t.memoizedProps=t.pendingProps,n===null?Su(t):Kt=n}function Ra(t,n,r,o){Qi=Cs=null,Th(n),_a=null,Mo=0;var c=n.return;try{if(wx(t,c,n,r,Jt)){Re=1,mu(t,qn(r,t.current)),Kt=null;return}}catch(d){if(c!==null)throw Kt=c,d;Re=1,mu(t,qn(r,t.current)),Kt=null;return}n.flags&32768?(ie||o===1?t=!0:Ta||(Jt&536870912)!==0?t=!1:(Dr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Yn.current,o!==null&&o.tag===13&&(o.flags|=16384))),vg(n,t)):Su(n)}function Su(t){var n=t;do{if((n.flags&32768)!==0){vg(n,Dr);return}t=n.return;var r=Rx(n.alternate,n,er);if(r!==null){Kt=r;return}if(n=n.sibling,n!==null){Kt=n;return}Kt=n=t}while(n!==null);Re===0&&(Re=5)}function vg(t,n){do{var r=Dx(t.alternate,t);if(r!==null){r.flags&=32767,Kt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){Kt=t;return}Kt=t=r}while(t!==null);Re=6,Kt=null}function _g(t,n,r,o,c,d,x,E,M){t.cancelPendingCommit=null;do Au();while(rn!==0);if((oe&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(d=n.lanes|n.childLanes,d|=Wc,Jr(t,r,d,x,E,M),t===ye&&(Kt=ye=null,Jt=0),Aa=n,Ir=t,wa=r,rf=d,sf=c,ug=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Bx(En,function(){return Sg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=O.T,O.T=null,c=nt.p,nt.p=2,x=oe,oe|=4;try{Nx(t,n,r)}finally{oe=x,nt.p=c,O.T=o}}rn=1,xg(),bg(),Eg()}}function xg(){if(rn===1){rn=0;var t=Ir,n=Aa,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=O.T,O.T=null;var o=nt.p;nt.p=2;var c=oe;oe|=4;try{ng(n,t);var d=bf,x=lp(t.containerInfo),E=d.focusedElem,M=d.selectionRange;if(x!==E&&E&&E.ownerDocument&&op(E.ownerDocument.documentElement,E)){if(M!==null&&Qc(E)){var Q=M.start,st=M.end;if(st===void 0&&(st=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(st,E.value.length);else{var ut=E.ownerDocument||document,X=ut&&ut.defaultView||window;if(X.getSelection){var Z=X.getSelection(),Ut=E.textContent.length,Ot=Math.min(M.start,Ut),de=M.end===void 0?Ot:Math.min(M.end,Ut);!Z.extend&&Ot>de&&(x=de,de=Ot,Ot=x);var B=ap(E,Ot),P=ap(E,de);if(B&&P&&(Z.rangeCount!==1||Z.anchorNode!==B.node||Z.anchorOffset!==B.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var G=ut.createRange();G.setStart(B.node,B.offset),Z.removeAllRanges(),Ot>de?(Z.addRange(G),Z.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Z.addRange(G))}}}}for(ut=[],Z=E;Z=Z.parentNode;)Z.nodeType===1&&ut.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ut.length;E++){var ot=ut[E];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}Pu=!!xf,bf=xf=null}finally{oe=c,nt.p=o,O.T=r}}t.current=n,rn=2}}function bg(){if(rn===2){rn=0;var t=Ir,n=Aa,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=O.T,O.T=null;var o=nt.p;nt.p=2;var c=oe;oe|=4;try{Wm(t,n.alternate,n)}finally{oe=c,nt.p=o,O.T=r}}rn=3}}function Eg(){if(rn===4||rn===3){rn=0,bn();var t=Ir,n=Aa,r=wa,o=ug;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?rn=5:(rn=0,Aa=Ir=null,Tg(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(jr=null),Ja(r),n=n.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Un,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=O.T,c=nt.p,nt.p=2,O.T=null;try{for(var d=t.onRecoverableError,x=0;x<o.length;x++){var E=o[x];d(E.value,{componentStack:E.stack})}}finally{O.T=n,nt.p=c}}(wa&3)!==0&&Au(),Ti(t),c=t.pendingLanes,(r&4194090)!==0&&(c&42)!==0?t===af?qo++:(qo=0,af=t):qo=0,Ho(0)}}function Tg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Eo(n)))}function Au(t){return xg(),bg(),Eg(),Sg()}function Sg(){if(rn!==5)return!1;var t=Ir,n=rf;rf=0;var r=Ja(wa),o=O.T,c=nt.p;try{nt.p=32>r?32:r,O.T=null,r=sf,sf=null;var d=Ir,x=wa;if(rn=0,Aa=Ir=null,wa=0,(oe&6)!==0)throw Error(a(331));var E=oe;if(oe|=4,og(d.current),rg(d,d.current,x,r),oe=E,Ho(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Un,d)}catch{}return!0}finally{nt.p=c,O.T=o,Tg(t,n)}}function Ag(t,n,r){n=qn(r,n),n=Ph(t.stateNode,n,2),t=Er(t,n,2),t!==null&&(Ee(t,2),Ti(t))}function pe(t,n,r){if(t.tag===3)Ag(t,t,r);else for(;n!==null;){if(n.tag===3){Ag(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(jr===null||!jr.has(o))){t=qn(r,t),r=Dm(2),o=Er(n,r,2),o!==null&&(Nm(r,o,n,t),Ee(o,2),Ti(o));break}}n=n.return}}function cf(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new Mx;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(r)||(Jh=!0,c.add(r),t=Ux.bind(null,t,n,r),n.then(t,t))}function Ux(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,ye===t&&(Jt&r)===r&&(Re===4||Re===3&&(Jt&62914560)===Jt&&300>De()-nf?(oe&2)===0&&Ca(t,0):tf|=r,Sa===Jt&&(Sa=0)),Ti(t)}function wg(t,n){n===0&&(n=Tn()),t=ua(t,n),t!==null&&(Ee(t,n),Ti(t))}function zx(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),wg(t,r)}function Lx(t,n){var r=0;switch(t.tag){case 13:var o=t.stateNode,c=t.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),wg(t,r)}function Bx(t,n){return qe(t,n)}var wu=null,Da=null,hf=!1,Cu=!1,ff=!1,Vs=0;function Ti(t){t!==Da&&t.next===null&&(Da===null?wu=Da=t:Da=Da.next=t),Cu=!0,hf||(hf=!0,Hx())}function Ho(t,n){if(!ff&&Cu){ff=!0;do for(var r=!1,o=wu;o!==null;){if(t!==0){var c=o.pendingLanes;if(c===0)var d=0;else{var x=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-ft(42|t)+1)-1,d&=c&~(x&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,Ng(o,d))}else d=Jt,d=At(o,o===ye?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||me(o,d)||(r=!0,Ng(o,d));o=o.next}while(r);ff=!1}}function qx(){Cg()}function Cg(){Cu=hf=!1;var t=0;Vs!==0&&(Zx()&&(t=Vs),Vs=0);for(var n=De(),r=null,o=wu;o!==null;){var c=o.next,d=Rg(o,n);d===0?(o.next=null,r===null?wu=c:r.next=c,c===null&&(Da=r)):(r=o,(t!==0||(d&3)!==0)&&(Cu=!0)),o=c}Ho(t)}function Rg(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,c=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var x=31-ft(d),E=1<<x,M=c[x];M===-1?((E&r)===0||(E&o)!==0)&&(c[x]=He(E,n)):M<=n&&(t.expiredLanes|=E),d&=~E}if(n=ye,r=Jt,r=At(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(le===2||le===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&re(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||me(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&re(o),Ja(r)){case 2:case 8:r=be;break;case 32:r=En;break;case 268435456:r=ki;break;default:r=En}return o=Dg.bind(null,t),r=qe(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&re(o),t.callbackPriority=2,t.callbackNode=null,2}function Dg(t,n){if(rn!==0&&rn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Au()&&t.callbackNode!==r)return null;var o=Jt;return o=At(t,t===ye?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(hg(t,o,n),Rg(t,De()),t.callbackNode!=null&&t.callbackNode===r?Dg.bind(null,t):null)}function Ng(t,n){if(Au())return null;hg(t,n,!0)}function Hx(){Jx(function(){(oe&6)!==0?qe(ue,qx):Cg()})}function df(){return Vs===0&&(Vs=un()),Vs}function jg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ei(""+t)}function Ig(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function Fx(t,n,r,o,c){if(n==="submit"&&r&&r.stateNode===c){var d=jg((c[en]||null).action),x=o.submitter;x&&(n=(n=x[en]||null)?jg(n.formAction):x.getAttribute("formAction"),n!==null&&(d=n,x=null));var E=new ds("action","action",null,o,c);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Vs!==0){var M=x?Ig(c,x):new FormData(c);Ih(r,{pending:!0,data:M,method:c.method,action:d},null,M)}}else typeof d=="function"&&(E.preventDefault(),M=x?Ig(c,x):new FormData(c),Ih(r,{pending:!0,data:M,method:c.method,action:d},d,M))},currentTarget:c}]})}}for(var pf=0;pf<Zc.length;pf++){var mf=Zc[pf],Gx=mf.toLowerCase(),Yx=mf[0].toUpperCase()+mf.slice(1);si(Gx,"on"+Yx)}si(hp,"onAnimationEnd"),si(fp,"onAnimationIteration"),si(dp,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(ux,"onTransitionRun"),si(cx,"onTransitionStart"),si(hx,"onTransitionCancel"),si(pp,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fo));function Mg(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],c=o.event;o=o.listeners;t:{var d=void 0;if(n)for(var x=o.length-1;0<=x;x--){var E=o[x],M=E.instance,Q=E.currentTarget;if(E=E.listener,M!==d&&c.isPropagationStopped())break t;d=E,c.currentTarget=Q;try{d(c)}catch(st){pu(st)}c.currentTarget=null,d=M}else for(x=0;x<o.length;x++){if(E=o[x],M=E.instance,Q=E.currentTarget,E=E.listener,M!==d&&c.isPropagationStopped())break t;d=E,c.currentTarget=Q;try{d(c)}catch(st){pu(st)}c.currentTarget=null,d=M}}}}function Xt(t,n){var r=n[ts];r===void 0&&(r=n[ts]=new Set);var o=t+"__bubble";r.has(o)||(Vg(n,t,2,!1),r.add(o))}function gf(t,n,r){var o=0;n&&(o|=4),Vg(r,t,o,n)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function yf(t){if(!t[Ru]){t[Ru]=!0,Dl.forEach(function(r){r!=="selectionchange"&&(Qx.has(r)||gf(r,!1,t),gf(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ru]||(n[Ru]=!0,gf("selectionchange",!1,n))}}function Vg(t,n,r,o){switch(ry(n)){case 2:var c=x1;break;case 8:c=b1;break;default:c=jf}r=c.bind(null,n,r,t),c=void 0,!qi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?t.addEventListener(n,r,{capture:!0,passive:c}):t.addEventListener(n,r,!0):c!==void 0?t.addEventListener(n,r,{passive:c}):t.addEventListener(n,r,!1)}function vf(t,n,r,o,c){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var E=o.stateNode.containerInfo;if(E===c)break;if(x===4)for(x=o.return;x!==null;){var M=x.tag;if((M===3||M===4)&&x.stateNode.containerInfo===c)return;x=x.return}for(;E!==null;){if(x=fi(E),x===null)return;if(M=x.tag,M===5||M===6||M===26||M===27){o=d=x;continue t}E=E.parentNode}}o=o.return}cs(function(){var Q=d,st=ao(r),ut=[];t:{var X=mp.get(t);if(X!==void 0){var Z=ds,Ut=t;switch(t){case"keypress":if(hs(r)===0)break t;case"keydown":case"keyup":Z=sa;break;case"focusin":Ut="focus",Z=na;break;case"focusout":Ut="blur",Z=na;break;case"beforeblur":case"afterblur":Z=na;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=vr;break;case hp:case fp:case dp:Z=lo;break;case pp:Z=m;break;case"scroll":case"scrollend":Z=ms;break;case"wheel":Z=A;break;case"copy":case"cut":case"paste":Z=Ul;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ho;break;case"toggle":case"beforetoggle":Z=tt}var Ot=(n&4)!==0,de=!Ot&&(t==="scroll"||t==="scrollend"),B=Ot?X!==null?X+"Capture":null:X;Ot=[];for(var P=Q,G;P!==null;){var ot=P;if(G=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||G===null||B===null||(ot=gr(P,B),ot!=null&&Ot.push(Go(P,ot,G))),de)break;P=P.return}0<Ot.length&&(X=new Z(X,Ut,null,r,st),ut.push({event:X,listeners:Ot}))}}if((n&7)===0){t:{if(X=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",X&&r!==so&&(Ut=r.relatedTarget||r.fromElement)&&(fi(Ut)||Ut[Ui]))break t;if((Z||X)&&(X=st.window===st?st:(X=st.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(Ut=r.relatedTarget||r.toElement,Z=Q,Ut=Ut?fi(Ut):null,Ut!==null&&(de=h(Ut),Ot=Ut.tag,Ut!==de||Ot!==5&&Ot!==27&&Ot!==6)&&(Ut=null)):(Z=null,Ut=Q),Z!==Ut)){if(Ot=vs,ot="onMouseLeave",B="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Ot=ho,ot="onPointerLeave",B="onPointerEnter",P="pointer"),de=Z==null?X:cr(Z),G=Ut==null?X:cr(Ut),X=new Ot(ot,P+"leave",Z,r,st),X.target=de,X.relatedTarget=G,ot=null,fi(st)===Q&&(Ot=new Ot(B,P+"enter",Ut,r,st),Ot.target=G,Ot.relatedTarget=de,ot=Ot),de=ot,Z&&Ut)e:{for(Ot=Z,B=Ut,P=0,G=Ot;G;G=Na(G))P++;for(G=0,ot=B;ot;ot=Na(ot))G++;for(;0<P-G;)Ot=Na(Ot),P--;for(;0<G-P;)B=Na(B),G--;for(;P--;){if(Ot===B||B!==null&&Ot===B.alternate)break e;Ot=Na(Ot),B=Na(B)}Ot=null}else Ot=null;Z!==null&&Og(ut,X,Z,Ot,!1),Ut!==null&&de!==null&&Og(ut,de,Ut,Ot,!0)}}t:{if(X=Q?cr(Q):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var Rt=tp;else if(Wd(X))if(ep)Rt=ax;else{Rt=rx;var Qt=ix}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Js(Q.elementType)&&(Rt=tp):Rt=sx;if(Rt&&(Rt=Rt(t,Q))){Jd(ut,Rt,r,st);break t}Qt&&Qt(t,X,Q),t==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&no(X,"number",X.value)}switch(Qt=Q?cr(Q):window,t){case"focusin":(Wd(Qt)||Qt.contentEditable==="true")&&(aa=Qt,Kc=Q,yo=null);break;case"focusout":yo=Kc=aa=null;break;case"mousedown":Xc=!0;break;case"contextmenu":case"mouseup":case"dragend":Xc=!1,up(ut,r,st);break;case"selectionchange":if(lx)break;case"keydown":case"keyup":up(ut,r,st)}var Mt;if(qt)t:{switch(t){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else ri?ni(t,r)&&(kt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(kt="onCompositionStart");kt&&(Ie&&r.locale!=="ko"&&(ri||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ri&&(Mt=Ol()):(Bn=st,ge="value"in Bn?Bn.value:Bn.textContent,ri=!0)),Qt=Du(Q,kt),0<Qt.length&&(kt=new co(kt,t,null,r,st),ut.push({event:kt,listeners:Qt}),Mt?kt.data=Mt:(Mt=ii(r),Mt!==null&&(kt.data=Mt)))),(Mt=ae?fo(t,r):tx(t,r))&&(kt=Du(Q,"onBeforeInput"),0<kt.length&&(Qt=new co("onBeforeInput","beforeinput",null,r,st),ut.push({event:Qt,listeners:kt}),Qt.data=Mt)),Fx(ut,t,Q,r,st)}Mg(ut,n)})}function Go(t,n,r){return{instance:t,listener:n,currentTarget:r}}function Du(t,n){for(var r=n+"Capture",o=[];t!==null;){var c=t,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=gr(t,r),c!=null&&o.unshift(Go(t,c,d)),c=gr(t,n),c!=null&&o.push(Go(t,c,d))),t.tag===3)return o;t=t.return}return[]}function Na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Og(t,n,r,o,c){for(var d=n._reactName,x=[];r!==null&&r!==o;){var E=r,M=E.alternate,Q=E.stateNode;if(E=E.tag,M!==null&&M===o)break;E!==5&&E!==26&&E!==27||Q===null||(M=Q,c?(Q=gr(r,d),Q!=null&&x.unshift(Go(r,Q,M))):c||(Q=gr(r,d),Q!=null&&x.push(Go(r,Q,M)))),r=r.return}x.length!==0&&t.push({event:n,listeners:x})}var Kx=/\r\n?/g,Xx=/\u0000|\uFFFD/g;function kg(t){return(typeof t=="string"?t:""+t).replace(Kx,`
`).replace(Xx,"")}function Pg(t,n){return n=kg(n),kg(t)===n}function Nu(){}function fe(t,n,r,o,c,d){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ln(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ln(t,""+o);break;case"className":ss(t,"class",o);break;case"tabIndex":ss(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(t,r,o);break;case"style":ro(t,o,d);break;case"data":if(n!=="object"){ss(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=ei(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(n!=="input"&&fe(t,n,"name",c.name,c,null),fe(t,n,"formEncType",c.formEncType,c,null),fe(t,n,"formMethod",c.formMethod,c,null),fe(t,n,"formTarget",c.formTarget,c,null)):(fe(t,n,"encType",c.encType,c,null),fe(t,n,"method",c.method,c,null),fe(t,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=ei(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Nu);break;case"onScroll":o!=null&&Xt("scroll",t);break;case"onScrollEnd":o!=null&&Xt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=ei(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":Xt("beforetoggle",t),Xt("toggle",t),rs(t,"popover",o);break;case"xlinkActuate":zn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":zn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":zn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":zn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":zn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":zn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":zn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":zn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":zn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rs(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Il.get(r)||r,rs(t,r,o))}}function _f(t,n,r,o,c,d){switch(r){case"style":ro(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof o=="string"?Ln(t,o):(typeof o=="number"||typeof o=="bigint")&&Ln(t,""+o);break;case"onScroll":o!=null&&Xt("scroll",t);break;case"onScrollEnd":o!=null&&Xt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Nu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ns.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),n=r.slice(2,c?r.length-7:void 0),d=t[en]||null,d=d!=null?d[r]:null,typeof d=="function"&&t.removeEventListener(n,d,c),typeof o=="function")){typeof d!="function"&&d!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,c);break t}r in t?t[r]=o:o===!0?t.setAttribute(r,""):rs(t,r,o)}}}function sn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",t),Xt("load",t);var o=!1,c=!1,d;for(d in r)if(r.hasOwnProperty(d)){var x=r[d];if(x!=null)switch(d){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:fe(t,n,d,x,r,null)}}c&&fe(t,n,"srcSet",r.srcSet,r,null),o&&fe(t,n,"src",r.src,r,null);return;case"input":Xt("invalid",t);var E=d=x=c=null,M=null,Q=null;for(o in r)if(r.hasOwnProperty(o)){var st=r[o];if(st!=null)switch(o){case"name":c=st;break;case"type":x=st;break;case"checked":M=st;break;case"defaultChecked":Q=st;break;case"value":d=st;break;case"defaultValue":E=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(a(137,n));break;default:fe(t,n,o,st,r,null)}}eo(t,d,E,M,Q,x,c,!1),dr(t);return;case"select":Xt("invalid",t),o=x=d=null;for(c in r)if(r.hasOwnProperty(c)&&(E=r[c],E!=null))switch(c){case"value":d=E;break;case"defaultValue":x=E;break;case"multiple":o=E;default:fe(t,n,c,E,r,null)}n=d,r=x,t.multiple=!!o,n!=null?pr(t,!!o,n,!1):r!=null&&pr(t,!!o,r,!0);return;case"textarea":Xt("invalid",t),d=c=o=null;for(x in r)if(r.hasOwnProperty(x)&&(E=r[x],E!=null))switch(x){case"value":o=E;break;case"defaultValue":c=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:fe(t,n,x,E,r,null)}jl(t,o,c,d),dr(t);return;case"option":for(M in r)if(r.hasOwnProperty(M)&&(o=r[M],o!=null))switch(M){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:fe(t,n,M,o,r,null)}return;case"dialog":Xt("beforetoggle",t),Xt("toggle",t),Xt("cancel",t),Xt("close",t);break;case"iframe":case"object":Xt("load",t);break;case"video":case"audio":for(o=0;o<Fo.length;o++)Xt(Fo[o],t);break;case"image":Xt("error",t),Xt("load",t);break;case"details":Xt("toggle",t);break;case"embed":case"source":case"link":Xt("error",t),Xt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in r)if(r.hasOwnProperty(Q)&&(o=r[Q],o!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:fe(t,n,Q,o,r,null)}return;default:if(Js(n)){for(st in r)r.hasOwnProperty(st)&&(o=r[st],o!==void 0&&_f(t,n,st,o,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(o=r[E],o!=null&&fe(t,n,E,o,r,null))}function $x(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,x=null,E=null,M=null,Q=null,st=null;for(Z in r){var ut=r[Z];if(r.hasOwnProperty(Z)&&ut!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=ut;default:o.hasOwnProperty(Z)||fe(t,n,Z,null,o,ut)}}for(var X in o){var Z=o[X];if(ut=r[X],o.hasOwnProperty(X)&&(Z!=null||ut!=null))switch(X){case"type":d=Z;break;case"name":c=Z;break;case"checked":Q=Z;break;case"defaultChecked":st=Z;break;case"value":x=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,n));break;default:Z!==ut&&fe(t,n,X,Z,o,ut)}}to(t,x,E,M,Q,st,d,c);return;case"select":Z=x=E=X=null;for(d in r)if(M=r[d],r.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":Z=M;default:o.hasOwnProperty(d)||fe(t,n,d,null,o,M)}for(c in o)if(d=o[c],M=r[c],o.hasOwnProperty(c)&&(d!=null||M!=null))switch(c){case"value":X=d;break;case"defaultValue":E=d;break;case"multiple":x=d;default:d!==M&&fe(t,n,c,d,o,M)}n=E,r=x,o=Z,X!=null?pr(t,!!r,X,!1):!!o!=!!r&&(n!=null?pr(t,!!r,n,!0):pr(t,!!r,r?[]:"",!1));return;case"textarea":Z=X=null;for(E in r)if(c=r[E],r.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:fe(t,n,E,null,o,c)}for(x in o)if(c=o[x],d=r[x],o.hasOwnProperty(x)&&(c!=null||d!=null))switch(x){case"value":X=c;break;case"defaultValue":Z=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==d&&fe(t,n,x,c,o,d)}Nl(t,X,Z);return;case"option":for(var Ut in r)if(X=r[Ut],r.hasOwnProperty(Ut)&&X!=null&&!o.hasOwnProperty(Ut))switch(Ut){case"selected":t.selected=!1;break;default:fe(t,n,Ut,null,o,X)}for(M in o)if(X=o[M],Z=r[M],o.hasOwnProperty(M)&&X!==Z&&(X!=null||Z!=null))switch(M){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:fe(t,n,M,X,o,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in r)X=r[Ot],r.hasOwnProperty(Ot)&&X!=null&&!o.hasOwnProperty(Ot)&&fe(t,n,Ot,null,o,X);for(Q in o)if(X=o[Q],Z=r[Q],o.hasOwnProperty(Q)&&X!==Z&&(X!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:fe(t,n,Q,X,o,Z)}return;default:if(Js(n)){for(var de in r)X=r[de],r.hasOwnProperty(de)&&X!==void 0&&!o.hasOwnProperty(de)&&_f(t,n,de,void 0,o,X);for(st in o)X=o[st],Z=r[st],!o.hasOwnProperty(st)||X===Z||X===void 0&&Z===void 0||_f(t,n,st,X,o,Z);return}}for(var B in r)X=r[B],r.hasOwnProperty(B)&&X!=null&&!o.hasOwnProperty(B)&&fe(t,n,B,null,o,X);for(ut in o)X=o[ut],Z=r[ut],!o.hasOwnProperty(ut)||X===Z||X==null&&Z==null||fe(t,n,ut,X,o,Z)}var xf=null,bf=null;function ju(t){return t.nodeType===9?t:t.ownerDocument}function Ug(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zg(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ef(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Tf=null;function Zx(){var t=window.event;return t&&t.type==="popstate"?t===Tf?!1:(Tf=t,!0):(Tf=null,!1)}var Lg=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,Jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(t){return Bg.resolve(null).then(t).catch(t1)}:Lg;function t1(t){setTimeout(function(){throw t})}function Vr(t){return t==="head"}function qg(t,n){var r=n,o=0,c=0;do{var d=r.nextSibling;if(t.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(0<o&&8>o){r=o;var x=t.ownerDocument;if(r&1&&Yo(x.documentElement),r&2&&Yo(x.body),r&4)for(r=x.head,Yo(r),x=r.firstChild;x;){var E=x.nextSibling,M=x.nodeName;x[ur]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&x.rel.toLowerCase()==="stylesheet"||r.removeChild(x),x=E}}if(c===0){t.removeChild(d),tl(n);return}c--}else r==="$"||r==="$?"||r==="$!"?c++:o=r.charCodeAt(0)-48;else o=0;r=d}while(r);tl(n)}function Sf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Sf(r),Ks(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function e1(t,n,r,o){for(;t.nodeType===1;){var c=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ur])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=oi(t.nextSibling),t===null)break}return null}function n1(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=oi(t.nextSibling),t===null))return null;return t}function Af(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function i1(t,n){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function oi(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var wf=null;function Hg(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}function Fg(t,n,r){switch(n=ju(r),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Yo(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ks(t)}var Kn=new Map,Gg=new Set;function Iu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var nr=nt.d;nt.d={f:r1,r:s1,D:a1,C:o1,L:l1,m:u1,X:h1,S:c1,M:f1};function r1(){var t=nr.f(),n=Tu();return t||n}function s1(t){var n=di(t);n!==null&&n.tag===5&&n.type==="form"?hm(n):nr.r(t)}var ja=typeof document>"u"?null:document;function Yg(t,n,r){var o=ja;if(o&&typeof n=="string"&&n){var c=$e(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),Gg.has(c)||(Gg.add(c),t={rel:t,crossOrigin:r,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),sn(n,"link",t),je(n),o.head.appendChild(n)))}}function a1(t){nr.D(t),Yg("dns-prefetch",t,null)}function o1(t,n){nr.C(t,n),Yg("preconnect",t,n)}function l1(t,n,r){nr.L(t,n,r);var o=ja;if(o&&t&&n){var c='link[rel="preload"][as="'+$e(n)+'"]';n==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+$e(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+$e(r.imageSizes)+'"]')):c+='[href="'+$e(t)+'"]';var d=c;switch(n){case"style":d=Ia(t);break;case"script":d=Ma(t)}Kn.has(d)||(t=b({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Kn.set(d,t),o.querySelector(c)!==null||n==="style"&&o.querySelector(Qo(d))||n==="script"&&o.querySelector(Ko(d))||(n=o.createElement("link"),sn(n,"link",t),je(n),o.head.appendChild(n)))}}function u1(t,n){nr.m(t,n);var r=ja;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+$e(o)+'"][href="'+$e(t)+'"]',d=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ma(t)}if(!Kn.has(d)&&(t=b({rel:"modulepreload",href:t},n),Kn.set(d,t),r.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ko(d)))return}o=r.createElement("link"),sn(o,"link",t),je(o),r.head.appendChild(o)}}}function c1(t,n,r){nr.S(t,n,r);var o=ja;if(o&&t){var c=hr(o).hoistableStyles,d=Ia(t);n=n||"default";var x=c.get(d);if(!x){var E={loading:0,preload:null};if(x=o.querySelector(Qo(d)))E.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Kn.get(d))&&Cf(t,r);var M=x=o.createElement("link");je(M),sn(M,"link",t),M._p=new Promise(function(Q,st){M.onload=Q,M.onerror=st}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Mu(x,n,o)}x={type:"stylesheet",instance:x,count:1,state:E},c.set(d,x)}}}function h1(t,n){nr.X(t,n);var r=ja;if(r&&t){var o=hr(r).hoistableScripts,c=Ma(t),d=o.get(c);d||(d=r.querySelector(Ko(c)),d||(t=b({src:t,async:!0},n),(n=Kn.get(c))&&Rf(t,n),d=r.createElement("script"),je(d),sn(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(c,d))}}function f1(t,n){nr.M(t,n);var r=ja;if(r&&t){var o=hr(r).hoistableScripts,c=Ma(t),d=o.get(c);d||(d=r.querySelector(Ko(c)),d||(t=b({src:t,async:!0,type:"module"},n),(n=Kn.get(c))&&Rf(t,n),d=r.createElement("script"),je(d),sn(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(c,d))}}function Qg(t,n,r,o){var c=(c=H.current)?Iu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Ia(r.href),r=hr(c).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Ia(r.href);var d=hr(c).hoistableStyles,x=d.get(t);if(x||(c=c.ownerDocument||c,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,x),(d=c.querySelector(Qo(t)))&&!d._p&&(x.instance=d,x.state.loading=5),Kn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Kn.set(t,r),d||d1(c,t,r,x.state))),n&&o===null)throw Error(a(528,""));return x}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ma(r),r=hr(c).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ia(t){return'href="'+$e(t)+'"'}function Qo(t){return'link[rel="stylesheet"]['+t+"]"}function Kg(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function d1(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),sn(n,"link",r),je(n),t.head.appendChild(n))}function Ma(t){return'[src="'+$e(t)+'"]'}function Ko(t){return"script[async]"+t}function Xg(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+$e(r.href)+'"]');if(o)return n.instance=o,je(o),o;var c=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),je(o),sn(o,"style",c),Mu(o,r.precedence,t),n.instance=o;case"stylesheet":c=Ia(r.href);var d=t.querySelector(Qo(c));if(d)return n.state.loading|=4,n.instance=d,je(d),d;o=Kg(r),(c=Kn.get(c))&&Cf(o,c),d=(t.ownerDocument||t).createElement("link"),je(d);var x=d;return x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),sn(d,"link",o),n.state.loading|=4,Mu(d,r.precedence,t),n.instance=d;case"script":return d=Ma(r.src),(c=t.querySelector(Ko(d)))?(n.instance=c,je(c),c):(o=r,(c=Kn.get(d))&&(o=b({},r),Rf(o,c)),t=t.ownerDocument||t,c=t.createElement("script"),je(c),sn(c,"link",o),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Mu(o,r.precedence,t));return n.instance}function Mu(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,d=c,x=0;x<o.length;x++){var E=o[x];if(E.dataset.precedence===n)d=E;else if(d!==c)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Cf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Rf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Vu=null;function $g(t,n,r){if(Vu===null){var o=new Map,c=Vu=new Map;c.set(r,o)}else c=Vu,o=c.get(r),o||(o=new Map,c.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),c=0;c<r.length;c++){var d=r[c];if(!(d[ur]||d[Ne]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var x=d.getAttribute(n)||"";x=t+x;var E=o.get(x);E?E.push(d):o.set(x,[d])}}return o}function Zg(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function p1(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Wg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Xo=null;function m1(){}function g1(t,n,r){if(Xo===null)throw Error(a(475));var o=Xo;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Ia(r.href),d=t.querySelector(Qo(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Ou.bind(o),t.then(o,o)),n.state.loading|=4,n.instance=d,je(d);return}d=t.ownerDocument||t,r=Kg(r),(c=Kn.get(c))&&Cf(r,c),d=d.createElement("link"),je(d);var x=d;x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),sn(d,"link",r),n.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=Ou.bind(o),t.addEventListener("load",n),t.addEventListener("error",n))}}function y1(){if(Xo===null)throw Error(a(475));var t=Xo;return t.stylesheets&&t.count===0&&Df(t,t.stylesheets),0<t.count?function(n){var r=setTimeout(function(){if(t.stylesheets&&Df(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r)}}:null}function Ou(){if(this.count--,this.count===0){if(this.stylesheets)Df(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ku=null;function Df(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ku=new Map,n.forEach(v1,t),ku=null,Ou.call(t))}function v1(t,n){if(!(n.state.loading&4)){var r=ku.get(t);if(r)var o=r.get(null);else{r=new Map,ku.set(t,r);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var x=c[d];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(r.set(x.dataset.precedence,x),o=x)}o&&r.set(null,o)}c=n.instance,x=c.getAttribute("data-precedence"),d=r.get(x)||o,d===o&&r.set(null,c),r.set(x,c),this.count++,o=Ou.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),d?d.parentNode.insertBefore(c,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var $o={$$typeof:at,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function _1(t,n,r,o,c,d,x,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rn(0),this.hiddenUpdates=Rn(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Jg(t,n,r,o,c,d,x,E,M,Q,st,ut){return t=new _1(t,n,r,x,E,M,Q,ut),n=1,d===!0&&(n|=24),d=jn(3,null,null,n),t.current=d,d.stateNode=t,n=uh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:r,cache:n},dh(d),t}function ty(t){return t?(t=ca,t):ca}function ey(t,n,r,o,c,d){c=ty(c),o.context===null?o.context=c:o.pendingContext=c,o=br(n),o.payload={element:r},d=d===void 0?null:d,d!==null&&(o.callback=d),r=Er(t,o,n),r!==null&&(kn(r,t,n),wo(r,t,n))}function ny(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Nf(t,n){ny(t,n),(t=t.alternate)&&ny(t,n)}function iy(t){if(t.tag===13){var n=ua(t,67108864);n!==null&&kn(n,t,67108864),Nf(t,67108864)}}var Pu=!0;function x1(t,n,r,o){var c=O.T;O.T=null;var d=nt.p;try{nt.p=2,jf(t,n,r,o)}finally{nt.p=d,O.T=c}}function b1(t,n,r,o){var c=O.T;O.T=null;var d=nt.p;try{nt.p=8,jf(t,n,r,o)}finally{nt.p=d,O.T=c}}function jf(t,n,r,o){if(Pu){var c=If(o);if(c===null)vf(t,n,o,Uu,r),sy(t,o);else if(T1(c,t,n,r,o))o.stopPropagation();else if(sy(t,o),n&4&&-1<E1.indexOf(t)){for(;c!==null;){var d=di(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var x=jt(d.pendingLanes);if(x!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var M=1<<31-ft(x);E.entanglements[1]|=M,x&=~M}Ti(d),(oe&6)===0&&(bu=De()+500,Ho(0))}}break;case 13:E=ua(d,2),E!==null&&kn(E,d,2),Tu(),Nf(d,2)}if(d=If(o),d===null&&vf(t,n,o,Uu,r),d===c)break;c=d}c!==null&&o.stopPropagation()}else vf(t,n,o,null,r)}}function If(t){return t=ao(t),Mf(t)}var Uu=null;function Mf(t){if(Uu=null,t=fi(t),t!==null){var n=h(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=p(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Uu=t,null}function ry(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ci()){case ue:return 2;case be:return 8;case En:case ar:return 32;case ki:return 268435456;default:return 32}default:return 32}}var Vf=!1,Or=null,kr=null,Pr=null,Zo=new Map,Wo=new Map,Ur=[],E1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sy(t,n){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Zo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(n.pointerId)}}function Jo(t,n,r,o,c,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},n!==null&&(n=di(n),n!==null&&iy(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function T1(t,n,r,o,c){switch(n){case"focusin":return Or=Jo(Or,t,n,r,o,c),!0;case"dragenter":return kr=Jo(kr,t,n,r,o,c),!0;case"mouseover":return Pr=Jo(Pr,t,n,r,o,c),!0;case"pointerover":var d=c.pointerId;return Zo.set(d,Jo(Zo.get(d)||null,t,n,r,o,c)),!0;case"gotpointercapture":return d=c.pointerId,Wo.set(d,Jo(Wo.get(d)||null,t,n,r,o,c)),!0}return!1}function ay(t){var n=fi(t.target);if(n!==null){var r=h(n);if(r!==null){if(n=r.tag,n===13){if(n=p(r),n!==null){t.blockedOn=n,Lc(t.priority,function(){if(r.tag===13){var o=On();o=Wa(o);var c=ua(r,o);c!==null&&kn(c,r,o),Nf(r,o)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=If(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);so=o,r.target.dispatchEvent(o),so=null}else return n=di(r),n!==null&&iy(n),t.blockedOn=r,!1;n.shift()}return!0}function oy(t,n,r){zu(t)&&r.delete(n)}function S1(){Vf=!1,Or!==null&&zu(Or)&&(Or=null),kr!==null&&zu(kr)&&(kr=null),Pr!==null&&zu(Pr)&&(Pr=null),Zo.forEach(oy),Wo.forEach(oy)}function Lu(t,n){t.blockedOn===n&&(t.blockedOn=null,Vf||(Vf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,S1)))}var Bu=null;function ly(t){Bu!==t&&(Bu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Bu===t&&(Bu=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],c=t[n+2];if(typeof o!="function"){if(Mf(o||r)===null)continue;break}var d=di(r);d!==null&&(t.splice(n,3),n-=3,Ih(d,{pending:!0,data:c,method:r.method,action:o},o,c))}}))}function tl(t){function n(M){return Lu(M,t)}Or!==null&&Lu(Or,t),kr!==null&&Lu(kr,t),Pr!==null&&Lu(Pr,t),Zo.forEach(n),Wo.forEach(n);for(var r=0;r<Ur.length;r++){var o=Ur[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Ur.length&&(r=Ur[0],r.blockedOn===null);)ay(r),r.blockedOn===null&&Ur.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var c=r[o],d=r[o+1],x=c[en]||null;if(typeof d=="function")x||ly(r);else if(x){var E=null;if(d&&d.hasAttribute("formAction")){if(c=d,x=d[en]||null)E=x.formAction;else if(Mf(c)!==null)continue}else E=x.action;typeof E=="function"?r[o+1]=E:(r.splice(o,3),o-=3),ly(r)}}}function Of(t){this._internalRoot=t}qu.prototype.render=Of.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,o=On();ey(r,o,t,n,null,null)},qu.prototype.unmount=Of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ey(t.current,2,null,t,null,null),Tu(),n[Ui]=null}};function qu(t){this._internalRoot=t}qu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Pi();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Ur.length&&n!==0&&n<Ur[r].priority;r++);Ur.splice(r,0,t),r===0&&ay(t)}};var uy=e.version;if(uy!=="19.1.1")throw Error(a(527,uy,"19.1.1"));nt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=v(n),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var A1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Un=Hu.inject(A1),mt=Hu}catch{}}return nl.createRoot=function(t,n){if(!l(t))throw Error(a(299));var r=!1,o="",c=Am,d=wm,x=Cm,E=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Jg(t,1,!1,null,null,r,o,c,d,x,E,null),t[Ui]=n.current,yf(t),new Of(n)},nl.hydrateRoot=function(t,n,r){if(!l(t))throw Error(a(299));var o=!1,c="",d=Am,x=wm,E=Cm,M=null,Q=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(M=r.unstable_transitionCallbacks),r.formState!==void 0&&(Q=r.formState)),n=Jg(t,1,!0,n,r??null,o,c,d,x,E,M,Q),n.context=ty(null),r=n.current,o=On(),o=Wa(o),c=br(o),c.callback=null,Er(r,c,o),r=o,n.current.lanes=r,Ee(n,r),Ti(n),t[Ui]=n.current,yf(t),new qu(n)},nl.version="19.1.1",nl}var xy;function k1(){if(xy)return Uf.exports;xy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Uf.exports=O1(),Uf.exports}var P1=k1();const U1="modulepreload",z1=function(s){return"/CRM_VER.4/"+s},by={},L1=function(e,i,a){let l=Promise.resolve();if(i&&i.length>0){let y=function(b){return Promise.all(b.map(C=>Promise.resolve(C).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};var p=y;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),v=g?.nonce||g?.getAttribute("nonce");l=y(i.map(b=>{if(b=z1(b),b in by)return;by[b]=!0;const C=b.endsWith(".css"),V=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${V}`))return;const L=document.createElement("link");if(L.rel=C?"stylesheet":U1,C||(L.as="script"),L.crossOrigin="",L.href=b,v&&L.setAttribute("nonce",v),document.head.appendChild(L),C)return new Promise((q,J)=>{L.addEventListener("load",q),L.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${b}`)))})}))}function h(g){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=g,window.dispatchEvent(v),!v.defaultPrevented)throw g}return l.then(g=>{for(const v of g||[])v.status==="rejected"&&h(v.reason);return e().catch(h)})},Ey=["","","","","",""],Ty=["","","","","","",""],B1=["","","",""],L0=["","","",""],$n=["","","","",""],q1=({activeTab:s,activeFilter:e,onFilterChange:i,customers:a,meetings:l,activities:h,properties:p,isMobileOpen:g,onMobileClose:v})=>{const[y,b]=gt.useState(!1),C=J=>{if(s===""){const k=new Date;return k.setHours(0,0,0,0),J===""?a.length:J===""?a.filter(F=>F.isFavorite).length:J===""?a.filter(F=>l.filter(at=>at.customerId===F.id).some(at=>{const dt=new Date(at.date);return dt.setHours(0,0,0,0),dt.getTime()===k.getTime()})).length:J===""?a.filter(F=>l.filter(at=>at.customerId===F.id).some(at=>{const dt=new Date(at.date);return dt.setHours(0,0,0,0),dt>k})).length:J===""?a.filter(F=>{const it=h.filter(at=>at.customerId===F.id);return it.length===0?!1:it.some(at=>!(at.followUps||[]).some(et=>et.author===""))}).length:a.filter(F=>F.status===J).length}else return J===""?p.length:p.filter(k=>k.category===J).length},L=s===""?["","","","","","","",""]:(()=>{const J=new Set(p.map(k=>k.category).filter(Boolean));return["",...Array.from(J).sort()]})(),q=J=>{i(J),v()};return f.jsxs("aside",{className:`filter-sidebar ${y?"collapsed":""} ${g?"mobile-open":""}`,children:[f.jsxs("div",{className:"filter-header",children:[!y&&f.jsx("h4",{children:""}),f.jsx("button",{onClick:()=>b(!y),className:"btn-close desktop-only",children:y?"":""}),f.jsx("button",{onClick:v,className:"btn-close mobile-only",children:""})]}),!y&&f.jsx("ul",{className:"filter-list",children:L.map(J=>f.jsxs("li",{className:`filter-item ${e===J?"active":""}`,onClick:()=>q(J),children:[f.jsx("span",{children:J}),f.jsx("span",{className:"count-badge",children:C(J)})]},J))})]})},H1=({customers:s,onSelectCustomer:e,onEdit:i,onDelete:a,selectedCustomerId:l,activeFilter:h,activeProgressFilter:p,onProgressFilterChange:g,allCustomers:v,onFavoriteCustomer:y,activities:b,meetings:C})=>{const[V,L]=gt.useState(""),[q,J]=gt.useState({visible:!1,x:0,y:0,selectedCustomer:null}),[k,F]=gt.useState({key:"createdAt",direction:"desc"}),it=gt.useMemo(()=>[...s.filter(W=>W.name.toLowerCase().includes(V.toLowerCase())||W.phone.includes(V))].sort((W,lt)=>{if(W.status===""&&lt.status!=="")return 1;if(W.status!==""&&lt.status==="")return-1;if(W.status===""&&lt.status!=="")return 1;if(W.status!==""&&lt.status===""||W.isFavorite&&!lt.isFavorite)return-1;if(!W.isFavorite&&lt.isFavorite)return 1;if(k.key==="latestActivityDate"){const Yt=b.filter(re=>re.customerId===W.id).sort((re,zt)=>new Date(zt.date)-new Date(re.date)),Wt=b.filter(re=>re.customerId===lt.id).sort((re,zt)=>new Date(zt.date)-new Date(re.date)),Be=Yt.length>0?new Date(Yt[0].date):new Date(0),qe=Wt.length>0?new Date(Wt[0].date):new Date(0);return k.direction==="asc"?Be-qe:qe-Be}if(k.key==="latestMeetingDate"){const Yt=C.filter(re=>re.customerId===W.id).sort((re,zt)=>new Date(zt.date)-new Date(re.date)),Wt=C.filter(re=>re.customerId===lt.id).sort((re,zt)=>new Date(zt.date)-new Date(re.date)),Be=Yt.length>0?new Date(Yt[0].date):new Date(0),qe=Wt.length>0?new Date(Wt[0].date):new Date(0);return k.direction==="asc"?Be-qe:qe-Be}const H=W[k.key],_t=lt[k.key];if(H==null&&_t==null)return 0;if(H==null)return 1;if(_t==null)return-1;if(k.key==="hopefulDeposit"||k.key==="hopefulMonthlyRent"){const Yt=Number(H)||0,Wt=Number(_t)||0;return k.direction==="asc"?Yt-Wt:Wt-Yt}const yt=String(H).toLowerCase(),Dt=String(_t).toLowerCase();return yt<Dt?k.direction==="asc"?-1:1:yt>Dt?k.direction==="asc"?1:-1:0}),[s,V,k,b,C]),at=(z,U)=>{z.preventDefault(),J({visible:!0,x:z.pageX,y:z.pageY,selectedCustomer:U})},dt=()=>{J({...q,visible:!1})},et=()=>{q.selectedCustomer&&y(q.selectedCustomer),dt()},K=z=>v.filter(U=>(h===""||U.status===h)&&U.progress===z).length,N=h===""||h==="",w=z=>{F(U=>({key:z,direction:U.key===z&&U.direction==="asc"?"desc":"asc"}))},T=z=>k.key!==z?" ":k.direction==="asc"?" ":" ",j=(z,U)=>{const W=new Date,lt=new Date(z);return W.getFullYear()===lt.getFullYear()&&W.getMonth()===lt.getMonth()&&W.getDate()===lt.getDate()?"rgba(156, 39, 176, 0.12)":U%2===0?"rgba(67, 160, 71, 0.12)":"rgba(229, 57, 53, 0.12)"},D=z=>{if(!z)return"";const U=new Date(z),W=U.getMonth()+1,lt=U.getDate();return`${W}${lt}`},R=z=>{const U=b.filter(yt=>yt.customerId===z).sort((yt,Dt)=>new Date(Dt.date)-new Date(yt.date));if(U.length===0)return"";const W=U[0],lt=new Date(W.date),H=lt.getMonth()+1,_t=lt.getDate();return`${H}${_t}`},S=z=>{const U=b.filter(H=>H.customerId===z).sort((H,_t)=>new Date(_t.date)-new Date(H.date));if(U.length===0)return"-";const lt=U[0].content||"-";return lt.length>30?lt.substring(0,30)+"...":lt},vt=z=>{const U=C.filter(Yt=>Yt.customerId===z).sort((Yt,Wt)=>new Date(Wt.date)-new Date(Yt.date));if(U.length===0)return"-";const W=U[0],lt=new Date(W.date),H=lt.getMonth()+1,_t=lt.getDate(),yt=new Date;return yt.getFullYear()===lt.getFullYear()&&yt.getMonth()===lt.getMonth()&&yt.getDate()===lt.getDate()?{text:"**",isToday:!0}:{text:`${H}${_t}`,isToday:!1}},St=z=>{const U=C.filter(_t=>_t.customerId===z);if(U.length===0)return"-";const W=new Date;W.setHours(0,0,0,0);const lt=U.filter(_t=>{const yt=new Date(_t.date);return yt.setHours(0,0,0,0),yt>=W}),H=U.filter(_t=>{const yt=new Date(_t.date);return yt.setHours(0,0,0,0),yt<W});return`${lt.length}/${H.length}`},O=z=>{const U=b.filter(yt=>yt.customerId===z).sort((yt,Dt)=>new Date(Dt.date)-new Date(yt.date));if(U.length===0)return"#e53935";const W=U[0],lt=new Date,H=new Date(W.date),_t=Math.floor((lt-H)/(1e3*60*60*24));return lt.getFullYear()===H.getFullYear()&&lt.getMonth()===H.getMonth()&&lt.getDate()===H.getDate()?"#ff0000":_t>=1&&_t<=3?"#0000ff":_t>=4&&_t<=7?"#ff9800":_t>=8?"#999999":"inherit"},nt=z=>{const U=D(z);return it.filter(W=>D(W.createdAt)===U).length},ht=(z,U)=>{if(U>0){const H=it[U-1];if(D(z.createdAt)===D(H.createdAt))return 0}const W=D(z.createdAt);let lt=1;for(let H=U+1;H<it.length&&D(it[H].createdAt)===W;H++)lt++;return lt},bt=(z,U)=>{const W=new Date;if(W.getFullYear()===new Date(z.createdAt).getFullYear()&&W.getMonth()===new Date(z.createdAt).getMonth()&&W.getDate()===new Date(z.createdAt).getDate())return-1;let H=0,_t=null;for(let yt=0;yt<=U;yt++)if(!(W.getFullYear()===new Date(it[yt].createdAt).getFullYear()&&W.getMonth()===new Date(it[yt].createdAt).getMonth()&&W.getDate()===new Date(it[yt].createdAt).getDate())){const Yt=D(it[yt].createdAt);_t===null?(_t=Yt,H=0):_t!==Yt&&(_t=Yt,H++)}return H},I=z=>z%2===0?"#fafafa":"#f0f4ff",$=(z,U)=>{if(U===0)return{};const W=D(z.createdAt);return D(it[U-1].createdAt)!==W?{borderTop:"12px solid white"}:{}};return f.jsxs("div",{className:"table-container",onClick:dt,children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("input",{type:"text",placeholder:",  ...",value:V,onChange:z=>L(z.target.value),style:{width:"100%",padding:"8px"}})}),f.jsxs("div",{style:{display:"flex",gap:"30px",marginBottom:"15px",fontSize:"13px",alignItems:"center",flexWrap:"wrap"},children:[f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[f.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:":"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(156, 39, 176, 0.12)",border:"1px solid rgba(156, 39, 176, 0.3)",borderRadius:"3px"}}),f.jsx("span",{children:""})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(229, 57, 53, 0.12)",border:"1px solid rgba(229, 57, 53, 0.3)",borderRadius:"3px"}}),f.jsx("span",{children:" ()"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(67, 160, 71, 0.12)",border:"1px solid rgba(67, 160, 71, 0.3)",borderRadius:"3px"}}),f.jsx("span",{children:" ()"})]})]}),f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[f.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:":"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#ff0000",borderRadius:"3px"}}),f.jsx("span",{children:""})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#0000ff",borderRadius:"3px"}}),f.jsx("span",{children:"1~3"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#ff9800",borderRadius:"3px"}}),f.jsx("span",{children:"4~7"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#999999",borderRadius:"3px"}}),f.jsx("span",{children:"8 "})]})]})]}),N&&f.jsxs("div",{className:"progress-tabs",style:{marginBottom:"15px"},children:[f.jsxs("button",{className:`progress-tab ${p?"":"active"}`,onClick:()=>g(null),children:[" (",v.filter(z=>h===""||z.status===h).length,")"]}),L0.map(z=>f.jsxs("button",{className:`progress-tab ${p===z?"active":""} progress-${z}`,onClick:()=>g(z),children:[z," (",K(z),")"]},z))]}),f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsxs("th",{onClick:()=>w("createdAt"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("createdAt")]}),f.jsxs("th",{onClick:()=>w("name"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("name")]}),f.jsx("th",{children:""}),f.jsxs("th",{onClick:()=>w("latestActivityDate"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("latestActivityDate")]}),f.jsx("th",{children:""}),f.jsxs("th",{onClick:()=>w("latestMeetingDate"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("latestMeetingDate")]}),f.jsx("th",{children:""})]})}),f.jsx("tbody",{children:it.map((z,U)=>{const W=ht(z,U),lt=bt(z,U),H=$(z,U);return f.jsxs("tr",{className:l===z.id?"selected":"",onClick:()=>e(z),onContextMenu:_t=>at(_t,z),style:{backgroundColor:z.status===""?"#f0f0f0":z.status===""?"#fff3e0":z.isFavorite?"rgba(156, 39, 176, 0.15)":j(z.createdAt,lt),borderLeft:z.isFavorite?"3px solid #9C27B0":"none",boxShadow:z.isFavorite?"0 2px 4px rgba(156, 39, 176, 0.3)":"none",...H},children:[W>0&&f.jsxs("td",{rowSpan:W,style:{verticalAlign:"middle",textAlign:"center",backgroundColor:I(lt),fontWeight:"500"},children:[D(z.createdAt),"(",nt(z.createdAt),")"]}),f.jsxs("td",{className:"customer-name",title:z.name,children:[z.isFavorite&&f.jsx("span",{style:{marginRight:"6px",color:"#9C27B0"},children:""}),z.name]}),f.jsx("td",{children:f.jsx("a",{href:`sms:${z.phone}`,children:z.phone})}),f.jsx("td",{style:{color:O(z.id),fontWeight:O(z.id)!=="inherit"?"bold":"normal"},children:R(z.id)}),f.jsx("td",{title:S(z.id)!=="-"?S(z.id):"",children:S(z.id)}),f.jsx("td",{style:{color:vt(z.id)!=="-"&&vt(z.id).isToday?"#ff0000":"inherit",fontWeight:vt(z.id)!=="-"&&vt(z.id).isToday?"bold":"normal"},children:vt(z.id)==="-"?"-":vt(z.id).text}),f.jsx("td",{children:St(z.id)})]},z.id)})})]}),q.visible&&f.jsx("div",{style:{top:q.y,left:q.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:f.jsx("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:et,children:q.selectedCustomer?.isFavorite?"  ":"  "})})})]})},F1=({properties:s,onSelectProperty:e,onEdit:i,onDelete:a,selectedPropertyId:l})=>{const[h,p]=gt.useState(""),[g,v]=gt.useState({visible:!1,x:0,y:0,selectedProperty:null}),[y,b]=gt.useState({key:"createdAt",direction:"desc"}),C=gt.useMemo(()=>[...s.filter(N=>N.buildingName.toLowerCase().includes(h.toLowerCase())||N.ownerName.toLowerCase().includes(h.toLowerCase())||N.ownerPhone.includes(h))].sort((N,w)=>{const T=N[y.key],j=w[y.key];if(T==null&&j==null)return 0;if(T==null)return 1;if(j==null)return-1;if(y.key==="price"){const S=Number(T)||0,vt=Number(j)||0;return y.direction==="asc"?S-vt:vt-S}if(y.key==="createdAt"||y.key==="moveInDate"){const S=new Date(T),vt=new Date(j);return y.direction==="asc"?S-vt:vt-S}const D=String(T).toLowerCase(),R=String(j).toLowerCase();return D<R?y.direction==="asc"?-1:1:D>R?y.direction==="asc"?1:-1:0}),[s,h,y]),V=(et,K)=>{et.preventDefault(),v({visible:!0,x:et.pageX,y:et.pageY,selectedProperty:K})},L=()=>{v({...g,visible:!1})},q=()=>{g.selectedProperty&&i(g.selectedProperty),L()},J=()=>{g.selectedProperty&&a(g.selectedProperty),L()},k=et=>{b(K=>({key:et,direction:K.key===et&&K.direction==="asc"?"desc":"asc"}))},F=et=>`${et.buildingName}${et.roomNumber?` ${et.roomNumber}`:""}`,it=et=>et?`${Number(et).toLocaleString()}`:"-",at=(et,K)=>{if(K)return"#e3f2fd";if(!et)return"transparent";const N=new Date(et),w=new Date,T=N.getFullYear(),j=N.getMonth(),D=w.getFullYear(),R=w.getMonth(),S=(D-T)*12+(R-j);return S===0?"#ffebee":S===1?"#e3f2fd":S>=2&&S<=4?"#fff9c4":"transparent"},dt=({column:et,label:K})=>f.jsxs("th",{onClick:()=>k(et),style:{cursor:"pointer",userSelect:"none"},children:[K,y.key===et&&f.jsx("span",{style:{marginLeft:"8px"},children:y.direction==="asc"?"":""})]});return f.jsxs("div",{className:"property-table-wrapper",style:{padding:"15px",height:"100%",display:"flex",flexDirection:"column"},children:[f.jsxs("div",{style:{marginBottom:"15px",display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",placeholder:", ,  ...",value:h,onChange:et=>p(et.target.value),style:{padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",flex:1,fontSize:"14px"}}),h&&f.jsx("button",{onClick:()=>p(""),style:{padding:"8px 12px",backgroundColor:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer"},children:""})]}),f.jsx("div",{style:{flex:1,overflowY:"auto"},children:C.length>0?f.jsxs("table",{className:"customer-table",onClick:L,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx(dt,{column:"createdAt",label:""}),f.jsx(dt,{column:"propertyType",label:""}),f.jsx(dt,{column:"category",label:""}),f.jsx("th",{style:{width:"200px"},children:""}),f.jsx(dt,{column:"price",label:""}),f.jsx(dt,{column:"moveInDate",label:""}),f.jsx(dt,{column:"ownerName",label:""}),f.jsx(dt,{column:"ownerPhone",label:""}),f.jsx(dt,{column:"tenantPhone",label:""})]})}),f.jsx("tbody",{children:C.map(et=>f.jsxs("tr",{onClick:()=>e(et),onContextMenu:K=>V(K,et),style:{cursor:"pointer",backgroundColor:at(et.createdAt,l===et.id),fontWeight:l===et.id?"bold":"normal"},children:[f.jsx("td",{style:{fontSize:"13px"},children:et.createdAt?et.createdAt.slice(0,10):"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.propertyType||"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.category||"-"}),f.jsx("td",{style:{fontSize:"13px",fontWeight:"bold"},children:F(et)}),f.jsx("td",{style:{fontSize:"13px",textAlign:"right"},children:it(et.price)}),f.jsx("td",{style:{fontSize:"13px"},children:et.moveInDate?et.moveInDate.slice(0,10):"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.ownerName||"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.ownerPhone||"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.tenantPhone||"-"})]},et.id))})]}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:h?"  ":"  "})}),g.visible&&f.jsx("div",{style:{position:"fixed",top:g.y,left:g.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"5px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:100,padding:0},children:f.jsxs("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:[f.jsx("li",{onClick:q,style:{padding:"8px 16px",cursor:"pointer",borderBottom:"1px solid #f0f0f0"},onMouseEnter:et=>et.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:et=>et.currentTarget.style.backgroundColor="transparent",children:""}),f.jsx("li",{onClick:J,style:{padding:"8px 16px",cursor:"pointer",color:"#e74c3c"},onMouseEnter:et=>et.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:et=>et.currentTarget.style.backgroundColor="transparent",children:""}),f.jsx("li",{onClick:L,style:{padding:"8px 16px",cursor:"pointer"},onMouseEnter:et=>et.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:et=>et.currentTarget.style.backgroundColor="transparent",children:""})]})})]})},G1=s=>!s.name||s.name.trim()===""?(alert("   ."),!1):s.phone&&!Y1(s.phone)?(alert(" 010-xxxx-xxxx  ."),!1):!0,Y1=s=>s?/^010-\d{4}-\d{4}$/.test(s):!0,Ai=()=>"_"+Math.random().toString(36).substr(2,9),B0=s=>{if(!s)return"";try{return new Date(s).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date-time:",s,e),""}},Q1=({isOpen:s,onClose:e,onSave:i,editData:a})=>{const l=()=>({id:a?.id||null,name:a?.name||"",phone:a?.phone||"",source:a?.source||Ey[0],propertyType:a?.propertyType||Ty[0],preferredArea:a?.preferredArea||"",hopefulDeposit:a?.hopefulDeposit||"",hopefulMonthlyRent:a?.hopefulMonthlyRent||"",moveInDate:a?.moveInDate||"",memo:a?.memo||"",status:a?.status||"",progress:a?.progress||"",createdAt:a?.createdAt||new Date().toISOString()}),[h,p]=gt.useState(l());if(gt.useEffect(()=>{p(l())},[a,s]),!s)return null;const g=b=>{const{name:C,value:V}=b.target;p(L=>({...L,[C]:V}))},v=b=>{let C=b.target.value.replace(/[^0-9]/g,"");C.length>3&&C.length<=7?C=`${C.slice(0,3)}-${C.slice(3)}`:C.length>7&&(C=`${C.slice(0,3)}-${C.slice(3,7)}-${C.slice(7,11)}`),p(V=>({...V,phone:C}))},y=()=>{const b={...h,id:h.id||Ai(),hopefulDeposit:parseInt(h.hopefulDeposit,10)||0,hopefulMonthlyRent:parseInt(h.hopefulMonthlyRent,10)||0};G1(b)&&(i(b),e())};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",paddingBottom:"10px"},children:[f.jsx("h3",{children:a?" ":" "}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"source",value:h.source,onChange:g,style:{fontSize:"14px"},children:Ey.map(b=>f.jsx("option",{value:b,children:b},b))}),f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"propertyType",value:h.propertyType,onChange:g,style:{fontSize:"14px"},children:Ty.map(b=>f.jsx("option",{value:b,children:b},b))}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" *"}),f.jsx("input",{type:"text",name:"name",value:h.name,onChange:g,placeholder:"  ",required:!0})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:v,placeholder:"010-xxxx-xxxx"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"date",name:"moveInDate",value:h.moveInDate,onChange:g})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" ()"}),f.jsx("input",{type:"number",name:"hopefulDeposit",value:h.hopefulDeposit,onChange:g})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" ()"}),f.jsx("input",{type:"number",name:"hopefulMonthlyRent",value:h.hopefulMonthlyRent,onChange:g})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"   "}),f.jsx("textarea",{name:"preferredArea",value:h.preferredArea,onChange:g,rows:"2"})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:e,className:"btn-secondary",children:""}),f.jsx("button",{onClick:y,className:"btn-primary",children:""})]})]})})},K1=({isOpen:s,onClose:e,onSave:i,editData:a})=>{const l=["",""],h=["","","","",""],p=()=>({id:a?.id||null,createdAt:a?.createdAt||new Date().toISOString(),propertyType:a?.propertyType||l[0],category:a?.category||h[0],buildingName:a?.buildingName||"",roomNumber:a?.roomNumber||"",price:a?.price||"",moveInDate:a?.moveInDate||"",ownerName:a?.ownerName||"",ownerPhone:a?.ownerPhone||"",leaseInfo:a?.leaseInfo||"",tenantPhone:a?.tenantPhone||"",memo:a?.memo||""}),[g,v]=gt.useState(p()),[y,b]=gt.useState("");if(gt.useEffect(()=>{v(p())},[a,s]),!s)return null;const C=k=>{const{name:F,value:it}=k.target;v(at=>({...at,[F]:it}))},V=(k,F)=>{let it=k.target.value.replace(/[^0-9]/g,"");it.length>3&&it.length<=7?it=`${it.slice(0,3)}-${it.slice(3)}`:it.length>7&&(it=`${it.slice(0,3)}-${it.slice(3,7)}-${it.slice(7,11)}`),v(at=>({...at,[F]:it}))},L=()=>{if(!g.buildingName.trim()){alert(" .");return}const k={...g,id:g.id||Ai(),price:parseInt(g.price,10)||0,createdAt:g.createdAt||new Date().toISOString()};i(k),e()},q=k=>{const{name:F,value:it}=k.target;v(at=>({...at,[F]:it}))},J=()=>{try{const k=y.split(`
`).map(D=>D.trim()).filter(D=>D),F=["","","()","","","","","",""],it=D=>{const R=k.findIndex(S=>S===D);if(R!==-1&&R+1<k.length){const S=k[R+1];return F.includes(S)?"":S}return""},at={},dt=it(""),et=dt.match(/^(.+?)\s+(\d+)/);et?(at.buildingName=et[1].trim(),at.roomNumber=et[2].trim()):(at.buildingName=dt,at.roomNumber="");const K=it("");at.price=K.replace(/[^0-9]/g,"")||"";const w=it("()").match(/(\d{2})\/(\d{2})\/(\d{4})/);w&&(at.moveInDate=`${w[3]}-${w[1]}-${w[2]}`);const T=it("");at.ownerName=T,at.ownerPhone=it(""),at.tenantPhone=it("");const j=k.findIndex(D=>D==="");j!==-1&&(at.memo=k.slice(j+1).join(`
`).trim()),v(D=>({...D,...at,createdAt:new Date().toISOString()})),alert(" !"),b("")}catch(k){alert("   : "+k.message)}};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",paddingBottom:"10px"},children:[f.jsx("h3",{children:a?" ":" "}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"propertyType",value:g.propertyType,onChange:C,style:{fontSize:"14px"},children:l.map(k=>f.jsx("option",{value:k,children:k},k))}),f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"category",value:g.category,onChange:C,style:{fontSize:"14px"},children:h.map(k=>f.jsx("option",{value:k,children:k},k))}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"   (  )"}),f.jsx("textarea",{placeholder:"   ...",value:y,onChange:k=>b(k.target.value),rows:"8",style:{fontSize:"12px",fontFamily:"monospace",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",resize:"vertical"}}),f.jsx("button",{type:"button",onClick:J,className:"btn-primary",style:{marginTop:"8px",width:"100%",backgroundColor:"#FF6B9D",padding:"10px"},children:"   "})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" *"}),f.jsx("input",{type:"text",name:"buildingName",value:g.buildingName,onChange:C,placeholder:" ",required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",name:"roomNumber",value:g.roomNumber,onChange:C,placeholder:" "})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" ()"}),f.jsx("input",{type:"number",name:"price",value:g.price,onChange:C,placeholder:" "})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"date",name:"moveInDate",value:g.moveInDate,onChange:q})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",name:"ownerName",value:g.ownerName,onChange:C,placeholder:" "})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"tel",name:"ownerPhone",value:g.ownerPhone,onChange:k=>V(k,"ownerPhone"),placeholder:"010-xxxx-xxxx"})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",name:"leaseInfo",value:g.leaseInfo,onChange:C,placeholder:"  "})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"tel",name:"tenantPhone",value:g.tenantPhone,onChange:k=>V(k,"tenantPhone"),placeholder:"010-xxxx-xxxx"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("textarea",{name:"memo",value:g.memo,onChange:C,rows:"3",placeholder:" "})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:e,className:"btn-secondary",children:""}),f.jsx("button",{onClick:L,className:"btn-primary",children:""})]})]})})},X1=({customer:s,onUpdateCustomer:e,activities:i=[],meetings:a=[],onTabChange:l})=>{if(!s)return null;const h=i.filter(q=>q.customerId===s.id).sort((q,J)=>new Date(J.date)-new Date(q.date)),p=a.filter(q=>q.customerId===s.id).sort((q,J)=>new Date(J.date)-new Date(q.date)),g=h.length>0?h[0]:null,v=p.slice(0,3),y=()=>!g||!g.followUps?[]:[...g.followUps].sort((q,J)=>new Date(J.date)-new Date(q.date)),b=p.find(q=>new Date(q.date)>new Date),C=q=>{const k=new Date().toISOString().slice(0,10);return q.slice(0,10)===k},V=()=>{if(!s.createdAt)return null;const q=new Date(s.createdAt),k=new Date-q;return Math.floor(k/(1e3*60*60*24))},L=()=>{if(p.length===0)return null;const q=p[0],J=new Date(q.date),k=new Date,F=new Date(J.getFullYear(),J.getMonth(),J.getDate()),it=new Date(k.getFullYear(),k.getMonth(),k.getDate()),at=F-it,dt=Math.floor(at/(1e3*60*60*24));return dt>0?{type:"upcoming",days:dt}:dt===0?{type:"today",days:0}:{type:"past",days:Math.abs(dt)}};return f.jsx("div",{className:"basic-info-container",children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px",margin:"15px"},children:[f.jsxs("div",{onClick:()=>l&&l(" "),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:q=>{q.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",q.currentTarget.style.transform="translateY(0)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[f.jsx("span",{style:{fontSize:"20px"},children:""}),f.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:" "}),V()!==null&&f.jsxs("span",{style:{fontSize:"12px",color:"#fff",backgroundColor:"#9c27b0",padding:"2px 8px",borderRadius:"12px",fontWeight:"bold",marginLeft:"auto"},children:["+",V(),""]})]}),f.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:[" ",f.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:h.length})," ",h.length>0&&f.jsxs("span",{style:{color:"#888",marginLeft:"8px"},children:["(: ",h[0].date,")"]})]}),g?f.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.6",flex:1,overflowY:"auto"},children:[f.jsxs("div",{style:{padding:"10px",backgroundColor:C(g.date)?"rgba(211, 47, 47, 0.05)":"#f9f9f9",borderRadius:"4px",marginBottom:"10px",borderLeft:C(g.date)?"3px solid #d32f2f":"3px solid #2196F3"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[f.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:C(g.date)?"#d32f2f":"#2196F3",backgroundColor:C(g.date)?"rgba(211, 47, 47, 0.1)":"#e3f2fd",padding:"2px 8px",borderRadius:"3px"},children:""}),f.jsx("span",{style:{fontSize:"11px",color:C(g.date)?"#d32f2f":"#999"},children:g.date})]}),f.jsx("p",{style:{margin:"0",fontSize:"12px",color:C(g.date)?"#d32f2f":"#333",fontWeight:C(g.date)?"bold":"normal",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:g.content})]}),y().length>0&&f.jsxs("div",{style:{borderTop:"1px solid #e0e0e0",paddingTop:"10px"},children:[f.jsxs("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#7f8c8d",marginBottom:"8px"},children:["  (",y().length,")"]}),f.jsx("div",{style:{maxHeight:"150px",overflowY:"auto"},children:y().map((q,J)=>{let k,F,it;return q.author===""?(k="#2196F3",F="#e3f2fd",it="#2196F3"):q.author===""?(k="#9c27b0",F="#f3e5f5",it="#9c27b0"):(k="#ff9800",F="#fff3e0",it="#ff9800"),f.jsxs("div",{style:{padding:"8px",backgroundColor:"#f8f9fa",borderLeft:`3px solid ${it}`,marginBottom:"6px",borderRadius:"3px",fontSize:"11px"},children:[f.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"4px",alignItems:"center"},children:[f.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:k,backgroundColor:F,padding:"1px 6px",borderRadius:"2px"},children:q.author||""}),f.jsx("span",{style:{fontSize:"10px",color:"#999"},children:q.date?q.date.slice(5,10):""})]}),f.jsx("p",{style:{margin:0,fontSize:"11px",color:"#333",whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:"60px",overflow:"hidden"},children:q.content})]},J)})})]})]}):f.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:" "})]}),f.jsxs("div",{onClick:()=>l&&l(" "),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:q=>{q.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",q.currentTarget.style.transform="translateY(0)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[f.jsx("span",{style:{fontSize:"20px"},children:""}),f.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:" "}),L()&&f.jsxs("span",{style:{fontSize:"12px",color:"#fff",backgroundColor:"#9c27b0",padding:"2px 8px",borderRadius:"12px",fontWeight:"bold",marginLeft:"auto"},children:[L().type==="upcoming"&&`${L().days} `,L().type==="today"&&"",L().type==="past"&&`+${L().days}`]})]}),f.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:[" ",f.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:p.length})," ",b&&f.jsxs("span",{style:{color:"#16a085",marginLeft:"8px",fontWeight:"bold"},children:["(: ",b.date.slice(0,10),")"]})]}),v.length>0?f.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:v.map((q,J)=>{const k=C(q.date);return f.jsxs("div",{style:{padding:"6px 0",borderTop:J>0?"1px solid #f0f0f0":"none",color:k?"#d32f2f":"#555",fontWeight:k?"bold":"normal",backgroundColor:k?"rgba(211, 47, 47, 0.05)":"transparent",paddingLeft:k?"8px":"0px",borderRadius:k?"4px":"0px"},children:[f.jsx("span",{style:{color:k?"#d32f2f":"#999",marginRight:"4px"},children:q.date.slice(0,10)}),f.jsxs("span",{style:{color:k?"#d32f2f":"#2196F3",fontWeight:"bold"},children:[q.properties?.length||0," "]})]},J)})}):f.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:" "})]})]})})},$1=({customer:s,onUpdateCustomer:e})=>{const[i,a]=gt.useState(!1),[l,h]=gt.useState(()=>{const y=s?.memo||"",b=s?.preferredArea||"";return y&&!b?y:y&&b?`${b}

${y}`:b});if(!s)return null;gt.useEffect(()=>{const y=s.memo||"",b=s.preferredArea||"";h(y&&!b?y:y&&b?`${b}

${y}`:b),a(!1)},[s.id]);const p=()=>{e({...s,preferredArea:l,memo:""}),a(!1)},g=()=>{const y=s.memo||"",b=s.preferredArea||"";h(y&&!b?y:y&&b?`${b}

${y}`:b),a(!1)},v=y=>{y.key==="Enter"&&y.ctrlKey?p():y.key==="Escape"&&g()};return f.jsxs("div",{className:"info-section",style:{padding:"15px",backgroundColor:"#ffffff",border:"2px solid #ff69b4",borderRadius:"8px",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",marginBottom:"12px",flexWrap:"wrap"},children:[f.jsx("h4",{style:{margin:0,color:"#ff1493",borderBottom:"2px solid #ff69b4",paddingBottom:"2px"},children:" "}),f.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:"#000000",borderBottom:"2px solid #000000",paddingBottom:"2px"},children:s.name})]}),f.jsxs("div",{className:"info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"15px"},children:[f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold",color:"#2196F3"},children:f.jsx("a",{href:`sms:${s.phone}`,style:{color:"#2196F3",textDecoration:"none",cursor:"pointer"},children:s.phone})})]}),f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold"},children:s.moveInDate})]}),f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold"},children:s.hopefulDeposit?`${s.hopefulDeposit}`:"-"})]}),f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold"},children:s.hopefulMonthlyRent?`${s.hopefulMonthlyRent}`:"-"})]})]}),f.jsxs("div",{style:{borderTop:"1px solid #f0f0f0",paddingTop:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[f.jsx("h5",{style:{margin:0,color:"#ff1493",fontSize:"13px",fontWeight:"600"},children:"   "}),i&&f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:p,style:{padding:"4px 10px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px",fontWeight:"bold",whiteSpace:"nowrap"},children:""}),f.jsx("button",{onClick:g,style:{padding:"4px 10px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px",fontWeight:"bold",whiteSpace:"nowrap"},children:""})]})]}),i?f.jsx("textarea",{value:l,onChange:y=>h(y.target.value),onKeyDown:v,placeholder:", ,    ... (Ctrl+Enter , Esc )",style:{width:"100%",minHeight:"60px",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontFamily:"inherit",fontSize:"13px",resize:"vertical"},autoFocus:!0}):f.jsx("div",{onClick:()=>a(!0),style:{cursor:"pointer",padding:"8px",borderRadius:"4px",backgroundColor:"#fafafa",minHeight:"30px",display:"flex",alignItems:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",transition:"background-color 0.2s",fontSize:"13px",color:l?"#333":"#999"},onMouseEnter:y=>y.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:y=>y.currentTarget.style.backgroundColor="#fafafa",children:l||"( )"})]})]})},Z1=({customerId:s,activities:e,onSaveActivity:i,onDeleteActivity:a})=>{const[l,h]=gt.useState(!1),[p,g]=gt.useState(null),[v,y]=gt.useState(null),[b,C]=gt.useState({visible:!1,x:0,y:0,selectedActivity:null}),V=e.filter(T=>T.customerId===s).sort((T,j)=>new Date(j.date)-new Date(T.date)),L=T=>{i(T),h(!1),g(null)},q=(T,j)=>{T.preventDefault(),C({visible:!0,x:T.pageX,y:T.pageY,selectedActivity:j})},J=()=>{C({...b,visible:!1})},k=()=>{b.selectedActivity&&g(b.selectedActivity),J()},F=()=>{b.selectedActivity&&a(b.selectedActivity.id),J()},it=T=>{if(!T)return"";if(T.includes(" ")){const j=T.split(" "),D=j[0].slice(5),R=j[1];return`${D} ${R}`}return T.length===10?T.slice(5,10):T},at=T=>T.followUps&&T.followUps.length>0?[...T.followUps].sort((D,R)=>new Date(R.date)-new Date(D.date))[0].content:"",dt=T=>{const D=new Date().toISOString().slice(0,10);return T.slice(0,10)===D},et=(T,j=50)=>T?T.length>j?T.slice(0,j)+"...":T:"-",K=({activity:T,onClose:j})=>{const[D,R]=gt.useState(T.followUps||[]),[S,vt]=gt.useState(null),[St,O]=gt.useState(""),[nt,ht]=gt.useState(""),[bt,I]=gt.useState(null),$=()=>{if(!St.trim())return;const H={id:Ai(),date:new Date().toISOString(),content:St,author:nt,createdAt:new Date().toISOString()},_t=[...D,H],yt={...T,followUps:_t};L(yt),R(_t),O(""),ht("")},z=H=>{H.key==="Enter"&&H.ctrlKey&&$()},U=H=>{if(confirm("   ?")){const _t=D.filter(Dt=>Dt.id!==H),yt={...T,followUps:_t};L(yt),R(_t)}},W=(H,_t)=>{const yt=D.map(Yt=>Yt.id===H?{...Yt,content:_t}:Yt),Dt={...T,followUps:yt};L(Dt),R(yt),vt(null)},lt=[...D].sort((H,_t)=>new Date(_t.date)-new Date(H.date));return f.jsx("div",{className:"modal-overlay",onClick:j,children:f.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),style:{maxWidth:"700px"},children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("h3",{style:{margin:0},children:" "}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[f.jsx("span",{style:{fontSize:"16px",color:"#2c3e50",fontWeight:"500"},children:T.date}),f.jsx("button",{className:"btn-close",onClick:j,children:""})]})]}),f.jsxs("div",{style:{padding:"20px 0"},children:[f.jsx("div",{style:{marginBottom:"25px"},children:f.jsx("p",{style:{margin:0,fontSize:"16px",whiteSpace:"pre-line",lineHeight:"1.6",fontWeight:"bold"},children:T.content})}),f.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px",marginBottom:"25px"},children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["   (",D.length,")"]})}),f.jsxs("div",{style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"5px",padding:"10px",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx("input",{type:"radio",name:"author",value:"",checked:nt==="",onChange:H=>ht(H.target.value),style:{cursor:"pointer"}}),f.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:nt===""?"#2196F3":"#999",padding:"4px 10px",backgroundColor:nt===""?"#e3f2fd":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:""})]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx("input",{type:"radio",name:"author",value:"",checked:nt==="",onChange:H=>ht(H.target.value),style:{cursor:"pointer"}}),f.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:nt===""?"#9c27b0":"#999",padding:"4px 10px",backgroundColor:nt===""?"#f3e5f5":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:""})]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx("input",{type:"radio",name:"author",value:"",checked:nt==="",onChange:H=>ht(H.target.value),style:{cursor:"pointer"}}),f.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:nt===""?"#ff9800":"#999",padding:"4px 10px",backgroundColor:nt===""?"#fff3e0":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:""})]})]}),f.jsx("textarea",{value:St,onChange:H=>O(H.target.value),onKeyDown:z,placeholder:"  ... (Ctrl+Enter )",style:{width:"100%",padding:"8px",minHeight:"60px",border:"none",outline:"none",resize:"vertical",fontFamily:"inherit"}}),f.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"8px"},children:[f.jsx("button",{onClick:$,className:"btn-primary",style:{fontSize:"12px",padding:"6px 16px"},children:""}),f.jsx("button",{onClick:()=>{O(""),ht("")},style:{fontSize:"12px",padding:"6px 16px",backgroundColor:"#f5f5f5",color:"#666",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:""})]})]}),lt.length>0?lt.map(H=>{let _t,yt,Dt;H.author===""?(_t="#2196F3",yt="#e3f2fd",Dt="#2196F3"):H.author===""?(_t="#9c27b0",yt="#f3e5f5",Dt="#9c27b0"):(_t="#ff9800",yt="#fff3e0",Dt="#ff9800");const Yt=H.author===""?"":H.author;return f.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"5px",marginBottom:"10px",borderLeft:`3px solid ${Dt}`},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:_t,backgroundColor:yt,padding:"2px 8px",borderRadius:"3px"},children:Yt||""}),f.jsx("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:B0(H.date)})]}),f.jsxs("div",{style:{display:"flex",gap:"5px"},children:[f.jsx("button",{onClick:()=>vt(H.id),style:{fontSize:"11px",padding:"3px 8px"},children:""}),f.jsx("button",{onClick:()=>U(H.id),className:"btn-secondary",style:{fontSize:"11px",padding:"3px 8px"},children:""})]})]}),S===H.id?f.jsx("div",{children:f.jsx("textarea",{defaultValue:H.content,onBlur:Wt=>W(H.id,Wt.target.value),style:{width:"100%",padding:"8px",minHeight:"60px"},autoFocus:!0})}):f.jsx("p",{style:{margin:0,fontSize:"14px",whiteSpace:"pre-line",lineHeight:"1.5"},children:H.content})]},H.id)}):f.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"  ."})]}),T.images&&T.images.length>0&&f.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px"},children:[f.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["  (",T.images.length,")"]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px",marginTop:"10px"},children:T.images.map((H,_t)=>f.jsx("div",{style:{position:"relative"},children:f.jsx("img",{src:H.url,alt:`  ${_t+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"5px",cursor:"pointer",border:"1px solid #e0e0e0"},onClick:()=>I(H.url)})},_t))})]}),bt&&f.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},onClick:()=>I(null),children:[f.jsx("img",{src:bt,alt:" ",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain"},onClick:H=>H.stopPropagation()}),f.jsx("button",{onClick:()=>I(null),style:{position:"absolute",top:"20px",right:"20px",background:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"24px",cursor:"pointer",color:"#333"},children:""})]})]}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between"},children:[f.jsx("button",{onClick:()=>{confirm("  ?")&&(a(T.id),j())},className:"btn-secondary",style:{backgroundColor:"#f44336"},children:""}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:j,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>{g(T),j()},className:"btn-primary",children:""})]})]})]})})},N=({activity:T,onCancel:j})=>{const D=()=>{if(T&&T.date)return T.date;const $=new Date,z=$.getFullYear(),U=String($.getMonth()+1).padStart(2,"0"),W=String($.getDate()).padStart(2,"0"),lt=String($.getHours()).padStart(2,"0"),H=String($.getMinutes()).padStart(2,"0");return`${z}-${U}-${W} ${lt}:${H}`},[R,S]=gt.useState(T||{date:D(),content:"",images:[]}),[vt,St]=gt.useState(!1),O=$=>{const{name:z,value:U}=$.target;S(W=>({...W,[z]:U}))},nt=$=>new Promise((z,U)=>{const W=new FileReader;W.onload=()=>z(W.result),W.onerror=U,W.readAsDataURL($)}),ht=async $=>{const z=Array.from($.target.files);if(z.length===0)return;St(!0);const U=[];for(const W of z){if(!W.type.startsWith("image/")){alert("   .");continue}if(W.size>1024*1024){alert(`${W.name}() 1MB .    .`);continue}try{const lt=await nt(W);U.push({url:lt,name:W.name})}catch(lt){console.error("  :",lt),alert("  .")}}S(W=>({...W,images:[...W.images||[],...U]})),St(!1),$.target.value=""},bt=$=>{S(z=>({...z,images:z.images.filter((U,W)=>W!==$)}))},I=()=>{const $={...R,id:R.id||Ai(),customerId:s,date:R.date};L($)};return f.jsx("div",{className:"modal-overlay",onClick:j,children:f.jsxs("div",{className:"modal-content",onClick:$=>$.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("h3",{style:{margin:0},children:" "}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("input",{type:"text",name:"date",value:R.date,onChange:O,placeholder:"YYYY-MM-DD HH:mm",style:{padding:"6px 8px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",width:"160px"}}),f.jsx("button",{className:"btn-close",onClick:j,children:""})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1",display:"none"},children:[f.jsx("label",{children:" *"}),f.jsx("input",{type:"date",name:"date",value:R.date,onChange:O})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:"  *"}),f.jsx("textarea",{name:"content",value:R.content,onChange:O,placeholder:`   
:  ,  3 `})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:" "}),f.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,onChange:ht,disabled:vt}),vt&&f.jsx("p",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:" ..."}),R.images&&R.images.length>0&&f.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",marginTop:"10px"},children:R.images.map(($,z)=>f.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[f.jsx("img",{src:$.url,alt:` ${z+1}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}),f.jsx("button",{type:"button",onClick:()=>bt(z),style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",cursor:"pointer",padding:0},children:""})]},z))})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:j,className:"btn-secondary",children:""}),f.jsx("button",{onClick:I,className:"btn-primary",disabled:vt,children:""})]})]})})},w=v?V.find(T=>T.id===v.id):null;return f.jsxs("div",{className:"activity-tab",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!l&&!p&&f.jsx("button",{onClick:()=>h(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+  "})}),l&&f.jsx(N,{onCancel:()=>h(!1)}),p?f.jsx(N,{activity:p,onCancel:()=>g(null)}):V.length>0?f.jsx("div",{onClick:J,children:f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{style:{width:"80px"},children:""}),f.jsx("th",{style:{width:"360px"},children:" "}),f.jsx("th",{style:{width:"720px"},children:""})]})}),f.jsx("tbody",{children:V.map(T=>{const j=dt(T.date);return f.jsxs("tr",{onContextMenu:D=>q(D,T),style:{cursor:"context-menu",backgroundColor:j?"rgba(211, 47, 47, 0.08)":"transparent",color:j?"#d32f2f":"inherit",fontWeight:j?"bold":"normal"},children:[f.jsx("td",{style:{fontSize:"13px",color:j?"#d32f2f":"inherit"},children:it(T.date)}),f.jsxs("td",{onClick:()=>y(T),style:{cursor:"pointer",fontSize:"13px",width:"360px",maxWidth:"360px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:j?"#d32f2f":"inherit"},title:T.content,children:[et(T.content||"",30),T.followUps&&T.followUps.length>0&&f.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:j?"#d32f2f":"#7f8c8d"},children:["",T.followUps.length]}),T.images&&T.images.length>0&&f.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:j?"#d32f2f":"#7f8c8d"},children:["",T.images.length]})]}),f.jsx("td",{onClick:()=>y(T),style:{cursor:"pointer",fontSize:"13px",width:"720px",maxWidth:"720px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:j?"#d32f2f":"inherit"},title:at(T),children:T.followUps&&T.followUps.length>0&&(()=>{const D=T.followUps[T.followUps.length-1];let R,S;return D.author===""?(R="#2196F3",S="#e3f2fd"):D.author===""?(R="#9c27b0",S="#f3e5f5"):(R="#ff9800",S="#fff3e0"),f.jsxs(f.Fragment,{children:[f.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:R,backgroundColor:S,padding:"2px 6px",borderRadius:"3px",marginRight:"6px"},children:D.author||""}),f.jsxs("span",{style:{fontSize:"12px",color:j?"#d32f2f":"#7f8c8d"},children:["(",T.followUps.length,")"]})]})})()})]},T.id)})})]})}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."}),w&&f.jsx(K,{activity:w,onClose:()=>y(null)}),b.visible&&f.jsx("div",{style:{top:b.y,left:b.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:f.jsxs("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:[f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:k,children:""}),f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:F,children:""}),f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:J,children:""})]})})]})},W1=s=>{if(!s)return"";const e=s.split(`
`).filter(i=>i.trim()!=="");return e.length>=2?e[1].trim():""},J1=s=>{if(!s)return"";const e=s.split(`
`).filter(i=>i.trim()!=="");return e.length>=7?e[6].trim():""},xd=s=>{if(!s)return"";const e=s.split(`
`);let i=-1;for(let a=0;a<e.length;a++)if(e[a].match(/.*|/)){i=a;break}if(i>=0&&i<e.length-1)for(let a=i+1;a<Math.min(i+10,e.length);a++){const l=e[a];if(l.match(/||/i))continue;const h=/(\s*\s*\s*|)\s*([\d\-]+)/,p=l.match(h);if(p)return p[2].trim().split(",")[0].trim()}return""},tb=s=>{if(!s)return"";const e=s.split(`
`).filter(i=>i.trim()!=="");return e.length>0?e[0].trim():""},eb=s=>{if(!s)return"";const e=s.split(`
`);for(let i=0;i<e.length;i++)if(e[i].includes("")&&i+1<e.length){const a=e[i+1].trim();if(a&&!a.includes("")&&!a.includes(""))return a}return""},nb=s=>{if(!s)return"";const e=/([\d\-,\s]+)(?:|$)/,i=s.match(e);if(i){const a=i[1].trim(),l=a.match(/(02[-\s]?\d{3,4}[-\s]?\d{4})/);if(l)return l[1].replace(/\s/g,"");const h=a.match(/(\d{2,3}[-\s]?\d{3,4}[-\s]?\d{4})/);if(h)return h[1].replace(/\s/g,"");const p=a.match(/(010[-\s]?\d{4}[-\s]?\d{4})/);if(p)return p[1].replace(/\s/g,"")}return""},Ua=(s,e="TEN")=>{if(!s)return{propertyName:"",agencyName:"",contactNumber:""};const i=s.split(`
`).filter(l=>l.trim()!=="");if(i.some(l=>l.includes(":"))){let l="",h="",p="";for(const g of i)if(g.includes(":")){const v=g.match(/:\s*(.+?)\(/);v&&(l=v[1].trim())}else if(g.includes(":"))h=g.replace(":","").trim();else if(g.includes(":")&&!g.match(/\b(|fax|FAX|||)\b/i)){const v=g.match(/:\s*([\d\-]+)/);v&&(p=v[1].trim())}return{propertyName:l,agencyName:h,contactNumber:p}}else return e===""?{propertyName:tb(s),agencyName:eb(s),contactNumber:nb(s)}:{propertyName:W1(s),agencyName:J1(s),contactNumber:xd(s)}},ib=s=>s.includes("/")||s.includes("/")||s.includes(""),rb=s=>{let e=" ",i="";const a=s.split(`
`).filter(K=>K.trim());if(a.length>0){const N=a[0].trim().replace(/\s*\d+\s*(||)?.*$/,"").trim();N&&(i=` : ${N}`)}let l="";const h=s.match(/(||)(\d+)\/(\d+)|(\d+)/);if(h)if(h[1]===""&&h[2]&&h[3]){const K=h[2],N=h[3];l=` : ${K}/${N}`}else h[1]===""&&h[2]?l=` : ${h[2]}`:h[1]===""&&h[2]&&(l=` : ${h[2]}`);let p="";const g=s.match(/\/\s*([\d.]+)\/([\d.]+)/),v=s.match(/\/\s*(\d+)\/(\d+)/);if(g&&v){const K=parseFloat(g[1]),N=parseFloat(g[2]),w=Math.min(K,N),T=v[1],j=v[2],D=(w/3.3).toFixed(1);p=` : ${w} (${D})/${T},${j}`}let y="";const b=a[0]?.match(/(\d+)/),C=s.match(/\/\s*([^/]+)\/(\d+)/);if(b&&C){const K=b[1],N=C[1].trim();y=` /: ${K}/${N}`}let V="",L=[];const q=s.match(/\s*(.+?)(?=\/|||$)/);if(q){const K=q[1].trim();K&&L.push(K)}const J=s.match(/\s*(.+?)(?=|$)/);if(J){const K=J[1].trim();K&&L.push(K)}const k=s.match(/\s*(.+?)(?=|$)/);if(k){const K=k[1].trim();K&&L.push(K)}L.length>0&&(V=` : ${L.join(" | ")}`);let F="",it=s.match(/\s*(.+?)/);it||(it=s.match(/[]*\s*(.+?)/)),it&&(F=` : ${it[1].trim()}`);let at="";const dt=xd(s);return dt&&(at=` : ${dt}`),[e,i,l,p,y,V,F,at].filter(K=>K!=="").join(`
`)},sb=s=>{let e=" ",i="";const a=s.match(/\s*\s*\s*(.+?)(?=|$)/s),l=s.match(/\s*\s*\s*(.+?)(?=|\s*|$)/);if(a&&l){const K=a[1].trim().split(`
`)[0].trim(),N=l[1].trim().split(/\s+/)[0];i=` : ${K}(${N})`}else a&&(i=` : ${a[1].trim().split(`
`)[0].trim()}`);let h="",p=s.match(/\s*\s*\s*\s*([0-9,]+)/),g=s.match(/\s*\s*\s*([0-9,]+)/);if(p||(p=s.match(/\s*\s*\s*([0-9,]+)/)),g||(g=s.match(/\s*\s*([0-9,]+)/)),p&&g){const K=p[1].trim(),N=g[1].trim();h=` : ${K}/${N}`}let v="";const y=s.match(/[\s(]*([0-9.]+)[\s)]*[\s]*([0-9.]*)/);let b=null;if(y){const K=parseFloat(y[1]);if(y[2]&&y[2].trim()){const N=parseFloat(y[2].trim());b=Math.min(K,N)}else b=K}const C=s.match(/\s*\s*(\d+)/),V=s.match(/\s*\s*\s*(\d+)/);if(b!==null){const K=C?C[1].trim():"0",N=V?V[1].trim():"0",w=(b/3.3).toFixed(1);v=` : ${b} (${w})/${K},${N}`}let L="",q=s.match(/(\d+)\s*\[(\d+)\s*\/\s*(\d+)\]/);if(q){const K=q[1],N=q[2];L=` /: ${K}/${N}`}else if(q=s.match(/(\d+)\s*\[([^\]]+)\]/),q){const K=q[1],N=q[2].trim();L=` /: ${K}/${N}`}let J="";const k=s.match(/\s*(.+?)(?=|||$)/s);if(k){const K=k[1].trim().replace(/\s+/g," ");K&&(J=` : ${K}`)}let F="",it=s.match(/(.+?.*?)/);it||(it=s.match(/(.+?)/)),it&&(F=` : ${it[1].trim()}`);let at="";const dt=xd(s);return dt&&(at=` : ${dt}`),[e,i,h,v,L,J,F,at].filter(K=>K!=="").join(`
`)},Sy=s=>s?ib(s)?rb(s):sb(s):"",ab=({customerId:s,customerName:e,meetings:i,onSaveMeeting:a,onDeleteMeeting:l,initialProperties:h,onClearInitialProperties:p})=>{const[g,v]=gt.useState(!1),[y,b]=gt.useState(null),[C,V]=gt.useState(null),[L,q]=gt.useState(null);gt.useEffect(()=>{h&&h.length>0&&(q(h),v(!0),p&&p())},[h,p]);const J=R=>{const vt=new Date().toISOString().slice(0,10);return R.slice(0,10)===vt},k=i.filter(R=>R.customerId===s),F=({onCancel:R,meetingData:S,initialPropertiesData:vt})=>{const St=()=>{if(S){const H=S.date||new Date().toISOString().slice(0,16);return{...S,date:H.slice(0,10),time:S.time||H.slice(11,16)}}return{date:new Date().toISOString().slice(0,10),time:"12:00",properties:vt||[]}},[O,nt]=gt.useState(St()),[ht,bt]=gt.useState(!1),[I,$]=gt.useState(null),z=H=>{nt({...O,[H.target.name]:H.target.value})},U=H=>{if(confirm("   ?")){const _t=O.properties.filter((yt,Dt)=>Dt!==H);nt({...O,properties:_t})}},W=()=>{const H={...O,id:O.id||Ai(),customerId:s,date:`${O.date}T${O.time}:00`};a(H),v(!1),b(null),R()},lt=({onClose:H,propertyToEdit:_t,editIndex:yt})=>{const[Dt,Yt]=gt.useState(_t||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",customerResponse:"",photos:["",""],status:$n[0]}),[Wt,Be]=gt.useState("TEN"),qe=zt=>{const bn=zt.target.value,{propertyName:De,agencyName:ci,contactNumber:ue}=Ua(bn,Wt);Yt({...Dt,info:bn,roomName:De||Dt.roomName,agency:ci||Dt.agency,agencyPhone:ue||Dt.agencyPhone})},re=()=>{if(yt!=null){const zt=[...O.properties];zt[yt]={...Dt},nt({...O,properties:zt})}else nt({...O,properties:[...O.properties,{...Dt,id:Ai()}]});H()};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:zt=>zt.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:yt!=null?" ":" "}),f.jsx("button",{className:"btn-close",onClick:H,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[f.jsx("label",{style:{margin:0},children:" (  )"}),f.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[f.jsx("button",{onClick:()=>Be("TEN"),style:{padding:"6px 14px",backgroundColor:Wt==="TEN"?"#2196F3":"transparent",color:Wt==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:zt=>{Wt!=="TEN"&&(zt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:zt=>{Wt!=="TEN"&&(zt.target.style.backgroundColor="transparent")},children:"TEN"}),f.jsx("button",{onClick:()=>Be(""),style:{padding:"6px 14px",backgroundColor:Wt===""?"#2196F3":"transparent",color:Wt===""?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:zt=>{Wt!==""&&(zt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:zt=>{Wt!==""&&(zt.target.style.backgroundColor="transparent")},children:""})]})]}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:Dt.info,onChange:qe}),f.jsx("p",{className:"form-hint",children:Wt==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Dt.roomName,onChange:zt=>Yt({...Dt,roomName:zt.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Dt.agencyPhone,onChange:zt=>Yt({...Dt,agencyPhone:zt.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"time",value:Dt.visitTime,onChange:zt=>Yt({...Dt,visitTime:zt.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:Dt.status,onChange:zt=>Yt({...Dt,status:zt.target.value}),children:$n.map(zt=>f.jsx("option",{value:zt,children:zt},zt))})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:Dt.agency,onChange:zt=>Yt({...Dt,agency:zt.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:H,className:"btn-secondary",children:""}),f.jsx("button",{onClick:re,className:"btn-primary",children:yt!=null?"":""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:["  - ",e?e.slice(0,30):""]}),f.jsx("button",{className:"btn-close",onClick:R,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" "}),f.jsx("input",{type:"date",name:"date",value:O.date,onChange:z})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" "}),f.jsx("input",{type:"time",name:"time",value:O.time,onChange:z})]})]}),f.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:" "}),O.properties.length===0?f.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"  ."}):O.properties.map((H,_t)=>f.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",H.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${H.status}`,value:H.status,onChange:yt=>{const Dt=[...O.properties];Dt[_t]={...Dt[_t],status:yt.target.value},nt({...O,properties:Dt})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:$n.map(yt=>f.jsx("option",{value:yt,children:yt},yt))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),f.jsx("div",{className:"property-info-content",children:H.info})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",H.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",H.agencyPhone?f.jsx("a",{href:`sms:${H.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:H.agencyPhone}):""]}),f.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["",f.jsx("input",{type:"time",value:H.visitTime||"",onChange:yt=>{const Dt=[...O.properties];Dt[_t]={...Dt[_t],visitTime:yt.target.value},nt({...O,properties:Dt})},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>{$(_t),bt(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>U(_t),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},H.id||_t)),f.jsx("div",{style:{textAlign:"center",margin:"20px 0",borderTop:"1px dashed #ccc",paddingTop:"20px"},children:f.jsx("button",{onClick:()=>{$(null),bt(!0)},className:"btn-primary",children:"+  "})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:R,className:"btn-secondary",children:""}),f.jsx("button",{onClick:W,className:"btn-primary",children:""})]}),ht&&f.jsx(lt,{onClose:()=>{bt(!1),$(null)},propertyToEdit:I!==null?O.properties[I]:null,editIndex:I})]})})},it=(R,S)=>{if(!R)return"";const vt=new Date(R),St=vt.getMonth()+1,O=vt.getDate(),nt=vt.getHours();return`${St}${O} ${nt} (${S})`},at=R=>{if(!R)return"";let S=R.trim();S=S.replace(/[\u{1F300}-\u{1F9FF}]/gu,"").trim(),S=S.replace(/[]/g,"").trim(),S=S.replace(/[^\w\s-()]/g,"").trim();let St=S.split("(")[0].trim();return St=St.replace(/||||||||||||||||/g,"").trim(),St=St.replace(/[-]+[]/g,"").trim(),St=St.replace(/[-]+[]/g,"").trim(),St=St.replace(/\b\d+(-\d+)?\b/g,"").trim(),St=St.replace(/\s+/g," ").trim(),St?St.length>5?St.substring(0,5)+"...":St:"-"},dt=R=>!R||R.length===0?"-":R.map(vt=>at(vt.roomName)).filter(vt=>vt).join(", ")||"-",[et,K]=gt.useState(null),[N,w]=gt.useState(null),T=(R,S)=>{R.preventDefault(),w(S),K({x:R.clientX,y:R.clientY})},j=()=>{K(null),w(null)},D=({meeting:R,onClose:S})=>{const[vt,St]=gt.useState(null),[O,nt]=gt.useState(!1),[ht,bt]=gt.useState(null),[I,$]=gt.useState(""),[z,U]=gt.useState(null),[W,lt]=gt.useState(""),[H,_t]=gt.useState(null),yt=py.useRef(null),Dt=py.useRef(null),Wt=(R.properties?.map(rt=>({...rt,photos:rt.photos||["",""]}))||[]).map((rt,ft)=>({prop:rt,originalIndex:ft})).sort((rt,ft)=>rt.prop.visitTime?ft.prop.visitTime?rt.prop.visitTime.localeCompare(ft.prop.visitTime):-1:1),Be=rt=>{St(rt),nt(!0)},qe=rt=>{if(confirm("  ?")){const ft=R.properties.filter((Et,wt)=>wt!==rt),xt={...R,properties:ft};a(xt),V(xt)}},re=rt=>{bt(rt),$(R.properties[rt].info||"")},zt=rt=>{if(ht===rt){const ft=[...R.properties];ft[rt]={...ft[rt],info:I};const xt={...R,properties:ft};a(xt),V(xt),bt(null),$("")}},bn=()=>{bt(null),$("")},De=(rt,ft)=>{rt.key==="Enter"&&rt.ctrlKey?zt(ft):rt.key==="Escape"&&bn()},ci=rt=>{U(rt),lt(R.properties[rt].customerResponse||"")},ue=rt=>{if(z===rt){const ft=[...R.properties];ft[rt]={...ft[rt],customerResponse:W};const xt={...R,properties:ft};a(xt),V(xt),U(null),lt("")}},be=()=>{U(null),lt("")},En=(rt,ft)=>{rt.key==="Enter"&&rt.ctrlKey?ue(ft):rt.key==="Escape"&&be()},ar=(rt,ft,xt)=>{const Et=rt.target.files?.[0];if(!Et)return;const wt=new FileReader;wt.onload=Nt=>{const Bt=new Image;Bt.onload=()=>{const jt=document.createElement("canvas"),At=jt.getContext("2d");let me=Bt.width,He=Bt.height;const un=800;(me>un||He>un)&&(me>He?(He=Math.round(He*un/me),me=un):(me=Math.round(me*un/He),He=un)),jt.width=me,jt.height=He,At.drawImage(Bt,0,0,me,He);const Tn=jt.toDataURL("image/jpeg",.7),Rn=[...R.properties],Ee=Rn[ft].photos||["",""];Ee[xt]=Tn,Rn[ft]={...Rn[ft],photos:Ee};const Jr={...R,properties:Rn};a(Jr),V(Jr)},Bt.src=Nt.target?.result},wt.readAsDataURL(Et)},ki=(rt,ft)=>{const xt=[...R.properties],Et=xt[rt].photos||["",""];Et[ft]="",xt[rt]={...xt[rt],photos:Et};const wt={...R,properties:xt};a(wt),V(wt)},Wr=rt=>{(R.properties[rt]?.photos||["",""]).findIndex(wt=>!wt)!==-1?_t(rt):alert(" 2   .")},Pn=rt=>{H!==null&&(rt==="camera"?yt.current?.click():rt==="file"&&Dt.current?.click())},Un=(rt,ft)=>{const xt=[...R.properties];ft!=null?xt[ft]=rt:xt.push({...rt,id:Ai()});const Et={...R,properties:xt};a(Et),V(Et),nt(!1),St(null)},mt=({propertyToEdit:rt,editIndex:ft,onClose:xt})=>{const[Et,wt]=gt.useState(rt||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",customerResponse:"",photos:["",""],status:$n[0]}),[Nt,Bt]=gt.useState("TEN"),jt=At=>{const me=At.target.value,{propertyName:He,agencyName:un,contactNumber:Tn}=Ua(me,Nt);wt({...Et,info:me,roomName:He||Et.roomName,agency:un||Et.agency,agencyPhone:Tn||Et.agencyPhone})};return f.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:f.jsxs("div",{className:"modal-content",onClick:At=>At.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:" "}),f.jsx("button",{className:"btn-close",onClick:xt,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[f.jsx("label",{style:{margin:0},children:" (  )"}),f.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[f.jsx("button",{onClick:()=>Bt("TEN"),style:{padding:"6px 14px",backgroundColor:Nt==="TEN"?"#2196F3":"transparent",color:Nt==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:At=>{Nt!=="TEN"&&(At.target.style.backgroundColor="#e0e0e0")},onMouseLeave:At=>{Nt!=="TEN"&&(At.target.style.backgroundColor="transparent")},children:"TEN"}),f.jsx("button",{onClick:()=>Bt(""),style:{padding:"6px 14px",backgroundColor:Nt===""?"#2196F3":"transparent",color:Nt===""?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:At=>{Nt!==""&&(At.target.style.backgroundColor="#e0e0e0")},onMouseLeave:At=>{Nt!==""&&(At.target.style.backgroundColor="transparent")},children:""})]})]}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:Et.info,onChange:jt}),f.jsx("p",{className:"form-hint",children:Nt==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Et.roomName,onChange:At=>wt({...Et,roomName:At.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Et.agencyPhone,onChange:At=>wt({...Et,agencyPhone:At.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"time",value:Et.visitTime,onChange:At=>wt({...Et,visitTime:At.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:Et.status,onChange:At=>wt({...Et,status:At.target.value}),children:$n.map(At=>f.jsx("option",{value:At,children:At},At))})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:Et.agency,onChange:At=>wt({...Et,agency:At.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:xt,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>Un(Et,ft),className:"btn-primary",children:""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:rt=>rt.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:["  - ",B0(R.date)]}),f.jsx("button",{className:"btn-close",onClick:S,children:""})]}),f.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:Wt.length>0?Wt.map(({prop:rt,originalIndex:ft})=>f.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",rt.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${rt.status}`,value:rt.status,onChange:xt=>{const Et=[...R.properties];Et[ft]={...Et[ft],status:xt.target.value};const wt={...R,properties:Et};a(wt),V(wt)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:$n.map(xt=>f.jsx("option",{value:xt,children:xt},xt))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),ht===ft?f.jsxs("div",{style:{padding:"8px",backgroundColor:"#fff8f0",borderRadius:"4px",border:"1px solid #FF6B9D"},children:[f.jsx("textarea",{value:I,onChange:xt=>$(xt.target.value),onKeyDown:xt=>De(xt,ft),onBlur:()=>zt(ft),autoFocus:!0,style:{width:"100%",minHeight:"200px",padding:"8px",border:"1px solid #FF6B9D",borderRadius:"4px",fontSize:"13px",fontFamily:"inherit",resize:"vertical"}}),f.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>zt(ft),style:{padding:"4px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "}),f.jsx("button",{onClick:bn,style:{padding:"4px 12px",backgroundColor:"#999",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "})]})]}):f.jsx("div",{className:"property-info-content",onDoubleClick:()=>re(ft),style:{padding:"8px",backgroundColor:"#f9f9f9",borderRadius:"4px",cursor:"pointer",border:"1px solid transparent",transition:"all 0.2s ease"},onMouseEnter:xt=>{xt.currentTarget.style.backgroundColor="#f0f0f0",xt.currentTarget.style.border="1px solid #e0e0e0"},onMouseLeave:xt=>{xt.currentTarget.style.backgroundColor="#f9f9f9",xt.currentTarget.style.border="1px solid transparent"},children:rt.info||"()"})]}),f.jsxs("div",{style:{padding:"10px 0",borderTop:"1px solid #e0e0e0",borderBottom:"1px solid #e0e0e0"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:" "}),z===ft?f.jsxs("div",{style:{padding:"8px",backgroundColor:"#fff8f0",borderRadius:"4px",border:"1px solid #FF6B9D"},children:[f.jsx("textarea",{value:W,onChange:xt=>lt(xt.target.value),onKeyDown:xt=>En(xt,ft),onBlur:()=>ue(ft),autoFocus:!0,style:{width:"100%",minHeight:"100px",padding:"8px",border:"1px solid #FF6B9D",borderRadius:"4px",fontSize:"13px",fontFamily:"inherit",resize:"vertical"}}),f.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>ue(ft),style:{padding:"4px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "}),f.jsx("button",{onClick:be,style:{padding:"4px 12px",backgroundColor:"#999",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "})]})]}):f.jsx("div",{onDoubleClick:()=>ci(ft),style:{padding:"8px",backgroundColor:"#f9f9f9",borderRadius:"4px",cursor:"pointer",border:"1px solid transparent",transition:"all 0.2s ease",minHeight:"20px",fontSize:"13px",color:"#333",lineHeight:"1.5",whiteSpace:"pre-wrap"},onMouseEnter:xt=>{xt.currentTarget.style.backgroundColor="#f0f0f0",xt.currentTarget.style.border="1px solid #e0e0e0"},onMouseLeave:xt=>{xt.currentTarget.style.backgroundColor="#f9f9f9",xt.currentTarget.style.border="1px solid transparent"},children:rt.customerResponse||"(  )"})]}),rt.photos&&rt.photos.some(xt=>xt)&&f.jsxs("div",{style:{padding:"10px 0",borderTop:"1px solid #e0e0e0",borderBottom:"1px solid #e0e0e0"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px",fontWeight:"600"},children:" "}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:rt.photos.map((xt,Et)=>f.jsx("div",{style:{position:"relative"},children:xt?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:xt,alt:` ${Et+1}`,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"4px"}}),f.jsx("button",{onClick:()=>ki(ft,Et),style:{position:"absolute",top:"4px",right:"4px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}):null},Et))})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",rt.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",rt.agencyPhone?f.jsx("a",{href:`sms:${rt.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:rt.agencyPhone}):""]}),f.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["",f.jsx("input",{type:"time",value:rt.visitTime||"",onChange:xt=>{const Et=[...R.properties];Et[ft]={...Et[ft],visitTime:xt.target.value};const wt={...R,properties:Et};a(wt),V(wt)},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end",alignItems:"center"},children:[f.jsx("button",{onClick:()=>Wr(ft),style:{backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:" /",children:" "}),f.jsx("button",{onClick:()=>Be(ft),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>qe(ft),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},rt.id)):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."})}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:S,className:"btn-secondary",style:{padding:"8px 16px",fontSize:"14px"},children:""}),f.jsx("button",{onClick:()=>{alert("  ."),S()},className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:""})]}),O&&f.jsx(mt,{propertyToEdit:vt!==null?R.properties[vt]:null,editIndex:vt,onClose:()=>{nt(!1),St(null)}}),H!==null&&f.jsx("div",{className:"modal-overlay",style:{zIndex:1200},children:f.jsxs("div",{className:"modal-content",style:{width:"300px",padding:"20px"},children:[f.jsx("h3",{style:{marginTop:0,marginBottom:"20px",textAlign:"center"},children:" "}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[f.jsx("button",{onClick:()=>Pn("camera"),style:{padding:"12px 16px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:rt=>rt.target.style.backgroundColor="#1976D2",onMouseLeave:rt=>rt.target.style.backgroundColor="#2196F3",children:"  "}),f.jsx("button",{onClick:()=>Pn("file"),style:{padding:"12px 16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:rt=>rt.target.style.backgroundColor="#45a049",onMouseLeave:rt=>rt.target.style.backgroundColor="#4CAF50",children:"  "}),f.jsx("button",{onClick:()=>_t(null),style:{padding:"12px 16px",backgroundColor:"#999",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},onMouseEnter:rt=>rt.target.style.backgroundColor="#777",onMouseLeave:rt=>rt.target.style.backgroundColor="#999",children:""})]})]})}),f.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:yt,onChange:rt=>{const ft=H;if(ft!==null){const wt=(R.properties[ft]?.photos||["",""]).findIndex(Nt=>!Nt);wt!==-1&&ar(rt,ft,wt)}_t(null)},style:{display:"none"}}),f.jsx("input",{type:"file",accept:"image/*",ref:Dt,onChange:rt=>{const ft=H;if(ft!==null){const wt=(R.properties[ft]?.photos||["",""]).findIndex(Nt=>!Nt);wt!==-1&&ar(rt,ft,wt)}_t(null)},style:{display:"none"}})]})})};return f.jsxs("div",{className:"meeting-tab",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!y&&f.jsx("button",{onClick:()=>v(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+  "})}),g&&f.jsx(F,{onCancel:()=>{v(!1),q(null)},initialPropertiesData:L}),y?f.jsx(F,{meetingData:y,onCancel:()=>b(null)},y.id):k.length>0?f.jsxs(f.Fragment,{children:[f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:""}),f.jsx("th",{children:""})]})}),f.jsx("tbody",{children:k.map(R=>{const S=J(R.date);return f.jsxs("tr",{style:{backgroundColor:S?"rgba(211, 47, 47, 0.08)":"transparent",color:S?"#d32f2f":"inherit",fontWeight:S?"bold":"normal",cursor:"context-menu"},onContextMenu:vt=>T(vt,R),children:[f.jsx("td",{style:{color:S?"#d32f2f":"inherit"},children:it(R.date,R.properties?.length||0)}),f.jsx("td",{onClick:()=>V(R),style:{cursor:"pointer",color:S?"#d32f2f":"var(--primary-blue)",textDecoration:"underline",fontWeight:S?"bold":"normal"},children:dt(R.properties)})]},R.id)})})]}),et&&N&&f.jsxs("div",{className:"context-menu",style:{position:"fixed",top:et.y,left:et.x,zIndex:1e3},children:[f.jsx("button",{className:"context-menu-item",onClick:()=>{b(N),j()},children:""}),f.jsx("button",{className:"context-menu-item delete",onClick:()=>{l(N.id),j()},children:""})]}),et&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:j})]}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."}),C&&f.jsx(D,{meeting:C,onClose:()=>V(null)})]})},ob=({customerId:s,customerName:e,propertySelections:i,onSavePropertySelection:a,onDeletePropertySelection:l,onTabChange:h,onCreateMeetingFromSelection:p})=>{const[g,v]=gt.useState(!1),[y,b]=gt.useState(null),[C,V]=gt.useState(null),L=i.filter(F=>F.customerId===s).sort((F,it)=>new Date(it.createdAt)-new Date(F.createdAt)),q=({onCancel:F,selectionData:it})=>{const at=()=>it?{...it}:{properties:[]},[dt,et]=gt.useState(at()),[K,N]=gt.useState(!1),[w,T]=gt.useState(null),j=S=>{if(confirm("   ?")){const vt=dt.properties.filter((St,O)=>O!==S);et({...dt,properties:vt})}},D=()=>{const S={...dt,id:dt.id||Ai(),customerId:s,createdAt:dt.createdAt||new Date().toISOString()};a(S),v(!1),b(null),F()},R=({onClose:S,propertyToEdit:vt,editIndex:St})=>{const[O,nt]=gt.useState(vt||{roomName:"",agency:"",agencyPhone:"",info:"",status:$n[0]}),[ht,bt]=gt.useState("TEN"),I=U=>{const W=U.target.value,{propertyName:lt,agencyName:H,contactNumber:_t}=Ua(W,ht);nt({...O,info:W,roomName:lt||O.roomName,agency:H||O.agency,agencyPhone:_t||O.agencyPhone})},$=()=>{const U=O.info,W=Sy(U);if(!W){alert("     .  .");return}const lt={...O,info:W},{propertyName:H,agencyName:_t,contactNumber:yt}=Ua(W);lt.roomName=H||O.roomName,lt.agency=_t||O.agency,lt.agencyPhone=yt||O.agencyPhone,nt(lt)},z=()=>{if(St!=null){const U=[...dt.properties];U[St]={...O},et({...dt,properties:U})}else et({...dt,properties:[...dt.properties,{...O,id:Ai()}]});S()};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:St!=null?" ":" "}),f.jsx("button",{className:"btn-close",onClick:S,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[f.jsx("label",{style:{margin:0},children:" (  )"}),f.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[f.jsx("button",{onClick:()=>bt("TEN"),style:{padding:"6px 14px",backgroundColor:ht==="TEN"?"#2196F3":"transparent",color:ht==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:U=>{ht!=="TEN"&&(U.target.style.backgroundColor="#e0e0e0")},onMouseLeave:U=>{ht!=="TEN"&&(U.target.style.backgroundColor="transparent")},children:"TEN"}),f.jsx("button",{onClick:()=>bt(""),style:{padding:"6px 14px",backgroundColor:ht===""?"#2196F3":"transparent",color:ht===""?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:U=>{ht!==""&&(U.target.style.backgroundColor="#e0e0e0")},onMouseLeave:U=>{ht!==""&&(U.target.style.backgroundColor="transparent")},children:""})]})]}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:O.info,onChange:I}),f.jsx("button",{type:"button",onClick:$,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:U=>U.target.style.backgroundColor="#F57C00",onMouseLeave:U=>U.target.style.backgroundColor="#FF9800",children:"   "}),f.jsx("p",{className:"form-hint",children:ht==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:O.roomName,onChange:U=>nt({...O,roomName:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:O.status,onChange:U=>nt({...O,status:U.target.value}),children:$n.map(U=>f.jsx("option",{value:U,children:U},U))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:O.agency,onChange:U=>nt({...O,agency:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:O.agencyPhone,onChange:U=>nt({...O,agencyPhone:U.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:S,className:"btn-secondary",children:""}),f.jsx("button",{onClick:z,className:"btn-primary",children:St!=null?"":""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:[" - ",e?e.slice(0,30):""]}),f.jsx("button",{className:"btn-close",onClick:F,children:""})]}),f.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:" "}),dt.properties.length===0?f.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"  ."}):dt.properties.map((S,vt)=>f.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",S.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${S.status}`,value:S.status,onChange:St=>{const O=[...dt.properties];O[vt]={...O[vt],status:St.target.value},et({...dt,properties:O})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:$n.map(St=>f.jsx("option",{value:St,children:St},St))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),f.jsx("div",{className:"property-info-content",children:S.info})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",S.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",S.agencyPhone?f.jsx("a",{href:`sms:${S.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:S.agencyPhone}):""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>{T(vt),N(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>j(vt),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},S.id||vt)),f.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px",marginTop:"20px",borderTop:"1px solid #e0e0e0",paddingTop:"15px"},children:[f.jsx("button",{onClick:F,className:"btn-secondary",children:""}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginLeft:"auto"},children:[f.jsx("button",{onClick:()=>{T(null),N(!0)},style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:S=>S.target.style.backgroundColor="#1976D2",onMouseLeave:S=>S.target.style.backgroundColor="#2196F3",children:"+  "}),f.jsx("button",{onClick:D,className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold"},children:""})]})]}),K&&f.jsx(R,{onClose:()=>{N(!1),T(null)},propertyToEdit:w!==null?dt.properties[w]:null,editIndex:w})]})})},J=F=>F?new Date(F).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"",k=({selection:F,onClose:it})=>{const[at,dt]=gt.useState(null),[et,K]=gt.useState(!1),[N,w]=gt.useState(!1),T=O=>O.map(nt=>{const ht=nt.info.split(`
`).filter(bt=>bt.trim());return ht.length>1&&(ht.length>6&&ht.splice(6,1),ht.length>0&&ht.pop()),ht.join(`
`)}).join(`

`),j=()=>{if(F.properties.length===0){alert("  .");return}p(F.properties),it()},D=O=>{dt(O),K(!0)},R=O=>{if(confirm("  ?")){const nt=F.properties.filter((bt,I)=>I!==O),ht={...F,properties:nt};a(ht),V(ht)}},S=(O,nt)=>{const ht=[...F.properties];nt!=null?ht[nt]=O:ht.push({...O,id:Ai()});const bt={...F,properties:ht};a(bt),V(bt),K(!1),dt(null)},vt=({propertyToEdit:O,editIndex:nt,onClose:ht})=>{const[bt,I]=gt.useState(O||{roomName:"",agency:"",agencyPhone:"",info:"",status:$n[0]}),$=U=>{const W=U.target.value,{propertyName:lt,agencyName:H,contactNumber:_t}=Ua(W);I({...bt,info:W,roomName:lt||bt.roomName,agency:H||bt.agency,agencyPhone:_t||bt.agencyPhone})},z=()=>{const U=bt.info,W=Sy(U);if(!W){alert("     .  .");return}const lt={...bt,info:W},{propertyName:H,agencyName:_t,contactNumber:yt}=Ua(W);lt.roomName=H||bt.roomName,lt.agency=_t||bt.agency,lt.agencyPhone=yt||bt.agencyPhone,I(lt)};return f.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:f.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:" "}),f.jsx("button",{className:"btn-close",onClick:ht,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:" (  )"}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:bt.info,onChange:$}),f.jsx("button",{type:"button",onClick:z,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:U=>U.target.style.backgroundColor="#F57C00",onMouseLeave:U=>U.target.style.backgroundColor="#FF9800",children:"   "}),f.jsx("p",{className:"form-hint",children:source==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:bt.roomName,onChange:U=>I({...bt,roomName:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:bt.status,onChange:U=>I({...bt,status:U.target.value}),children:$n.map(U=>f.jsx("option",{value:U,children:U},U))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:bt.agency,onChange:U=>I({...bt,agency:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:bt.agencyPhone,onChange:U=>I({...bt,agencyPhone:U.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:ht,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>S(bt,nt),className:"btn-primary",children:""})]})]})})},St=({onClose:O})=>{const[nt,ht]=gt.useState(T(F.properties)),[bt,I]=gt.useState(!1),$=async()=>{try{await navigator.clipboard.writeText(nt),alert("  !")}catch(z){alert(" : "+z.message)}};return f.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:f.jsxs("div",{className:"modal-content",onClick:z=>z.stopPropagation(),style:{maxWidth:"800px"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:"  "}),f.jsx("button",{className:"btn-close",onClick:O,children:""})]}),f.jsx("div",{style:{padding:"20px"},children:bt?f.jsx("textarea",{value:nt,onChange:z=>ht(z.target.value),style:{width:"100%",minHeight:"400px",padding:"12px",fontSize:"14px",lineHeight:"1.6",border:"1px solid #e0e0e0",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}):f.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",fontSize:"14px",lineHeight:"1.6",maxHeight:"400px",overflowY:"auto",border:"1px solid #e0e0e0"},children:nt})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:O,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>I(!bt),className:"btn-primary",style:{marginLeft:"10px"},children:bt?"":""}),f.jsx("button",{onClick:$,className:"btn-primary",style:{marginLeft:"10px"},children:""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:["  - ",J(F.createdAt)]}),f.jsx("button",{className:"btn-close",onClick:it,children:""})]}),f.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:F.properties&&F.properties.length>0?F.properties.map((O,nt)=>f.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",O.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${O.status}`,value:O.status,onChange:ht=>{const bt=[...F.properties];bt[nt]={...bt[nt],status:ht.target.value};const I={...F,properties:bt};a(I),V(I)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:$n.map(ht=>f.jsx("option",{value:ht,children:ht},ht))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),f.jsx("div",{className:"property-info-content",children:O.info})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",O.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",O.agencyPhone?f.jsx("a",{href:`sms:${O.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:O.agencyPhone}):""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>D(nt),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>R(nt),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},O.id)):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."})}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("button",{onClick:it,className:"btn-primary",children:""}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>w(!0),disabled:!F.properties||F.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:!F.properties||F.properties.length===0?"not-allowed":"pointer",opacity:!F.properties||F.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:O=>{F.properties&&F.properties.length>0&&(O.target.style.backgroundColor="#d32f2f")},onMouseLeave:O=>{F.properties&&F.properties.length>0&&(O.target.style.backgroundColor="#f44336")},children:"  "}),f.jsx("button",{onClick:j,disabled:!F.properties||F.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:!F.properties||F.properties.length===0?"not-allowed":"pointer",opacity:!F.properties||F.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:O=>{F.properties&&F.properties.length>0&&(O.target.style.backgroundColor="#7B1FA2")},onMouseLeave:O=>{F.properties&&F.properties.length>0&&(O.target.style.backgroundColor="#9C27B0")},children:" "})]})]}),N&&f.jsx(St,{onClose:()=>w(!1)}),et&&f.jsx(vt,{propertyToEdit:at!==null?F.properties[at]:null,editIndex:at,onClose:()=>{K(!1),dt(null)}})]})})};return f.jsxs("div",{className:"meeting-tab",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!y&&f.jsx("button",{onClick:()=>v(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ "})}),g&&f.jsx(q,{onCancel:()=>v(!1)}),y?f.jsx(q,{selectionData:y,onCancel:()=>b(null)},y.id):L.length>0?f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:""}),f.jsx("th",{children:""}),f.jsx("th",{children:""})]})}),f.jsx("tbody",{children:L.map(F=>f.jsxs("tr",{children:[f.jsx("td",{children:J(F.createdAt)}),f.jsxs("td",{onClick:()=>V(F),style:{cursor:"pointer",color:"var(--primary-blue)",textDecoration:"underline"},children:[F.properties?.length||0," "]}),f.jsxs("td",{children:[f.jsx("button",{onClick:()=>b(F),style:{fontSize:"12px",padding:"4px 8px",marginRight:"5px"},children:""}),f.jsx("button",{onClick:()=>l(F.id),className:"btn-secondary",style:{fontSize:"12px",padding:"4px 8px"},children:""})]})]},F.id))})]}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."}),C&&f.jsx(k,{selection:C,onClose:()=>V(null)})]})},lb=({selectedCustomer:s,onClose:e,onEditCustomer:i,onUpdateCustomer:a,onDeleteCustomer:l,activities:h,onSaveActivity:p,onDeleteActivity:g,meetings:v,onSaveMeeting:y,onDeleteMeeting:b,propertySelections:C,onSavePropertySelection:V,onDeletePropertySelection:L})=>{const[q,J]=gt.useState(""),[k,F]=gt.useState(null);gt.useEffect(()=>{s&&(J(""),F(null))},[s?.id]);const it=!!s,at=K=>{const N={...s,status:K,progress:K===""?null:s.progress};a(N)},dt=K=>{const N={...s,progress:K};a(N)},et=K=>{const N=K.map(w=>({...w,visitTime:""}));F(N),J(" ")};return f.jsx("aside",{className:`detail-panel ${it?"open":""}`,children:it&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"panel-header",children:[f.jsxs("div",{children:[f.jsx("h3",{children:" "}),f.jsxs("span",{className:"created-date",children:[": ",new Date(s.createdAt).toLocaleDateString()]})]}),f.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[f.jsx("button",{onClick:K=>{K.stopPropagation(),i(s)},className:"btn-primary",style:{padding:"8px 16px"},children:""}),f.jsx("button",{onClick:K=>{K.stopPropagation(),l(s)},className:"btn-secondary",style:{padding:"8px 16px"},children:""}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]})]}),f.jsx("div",{style:{padding:"15px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f8f9fa"},children:f.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap"},children:[f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:""}),f.jsx("div",{style:{display:"flex",gap:"5px"},children:B1.map(K=>f.jsx("button",{type:"button",onClick:()=>at(K),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:s.status===K?"#4CAF50":"white",color:s.status===K?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:K},K))})]}),(s.status===""||s.status==="")&&f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:""}),f.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:L0.map(K=>f.jsx("button",{type:"button",onClick:()=>dt(K),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:s.progress===K?"#2196F3":"white",color:s.progress===K?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:K},K))})]})]})}),f.jsxs("div",{className:"panel-content",children:[f.jsx("div",{style:{display:"flex",gap:"4px",padding:"12px 15px",backgroundColor:"#e3f2fd",borderRadius:"8px",marginBottom:"15px",border:"1px solid #bbdefb"},children:[""," "," ",""].map((K,N)=>f.jsx("button",{onClick:()=>J(K),style:{flex:1,padding:"10px 16px",fontSize:"14px",fontWeight:"700",border:"none",borderRadius:"6px",backgroundColor:q===K?"white":"transparent",color:"#1a1a1a",cursor:"pointer",transition:"all 0.2s ease",boxShadow:q===K?"0 2px 8px rgba(33, 150, 243, 0.15)":"none",border:q===K?"1px solid #e0e0e0":"1px solid transparent"},onMouseEnter:w=>{q!==K&&(w.target.style.backgroundColor="#f9f9f9")},onMouseLeave:w=>{q!==K&&(w.target.style.backgroundColor="transparent")},children:K},K))}),f.jsx($1,{customer:s,onUpdateCustomer:a}),f.jsxs("div",{className:"tab-content",children:[q===""&&f.jsx(X1,{customer:s,onUpdateCustomer:a,activities:h,meetings:v,onTabChange:J}),q===" "&&f.jsx(Z1,{customerId:s.id,activities:h,onSaveActivity:p,onDeleteActivity:g}),q===" "&&f.jsx(ab,{customerId:s.id,customerName:s.name,meetings:v,onSaveMeeting:y,onDeleteMeeting:b,initialProperties:k,onClearInitialProperties:()=>F(null)}),q===""&&f.jsx(ob,{customerId:s.id,customerName:s.name,propertySelections:C,onSavePropertySelection:V,onDeletePropertySelection:L,onTabChange:J,onCreateMeetingFromSelection:et})]})]})]})})},ub=({selectedProperty:s,onClose:e,onEditProperty:i,onUpdateProperty:a,onDeleteProperty:l})=>{const[h,p]=gt.useState(null),[g,v]=gt.useState(""),[y,b]=gt.useState(null);if(gt.useEffect(()=>{s&&b(s)},[s]),!s)return null;const C=F=>F?`${Number(F).toLocaleString()} `:"-",V=(F,it)=>{p(F),v(it||"")},L=async()=>{if(h&&y){const F={...y,[h]:g};b(F),await a(F),p(null)}},q=()=>{p(null),v("")},J=F=>{F.key==="Enter"?L():F.key==="Escape"&&q()},k=(F,it,at,dt="text",et={})=>{const K=h===F,N=F==="price"?C(at):F==="createdAt"||F==="moveInDate"?at?at.slice(0,10):"-":at||"-";return f.jsxs("div",{style:{padding:"8px",backgroundColor:K?"#fff8f0":"#f9f9f9",borderRadius:"4px",cursor:"pointer",border:K?"1px solid #ff1493":"1px solid transparent",transition:"all 0.2s ease"},onDoubleClick:()=>V(F,at),children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:it}),K?f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[dt==="textarea"?f.jsx("textarea",{autoFocus:!0,value:g,onChange:w=>v(w.target.value),onKeyDown:J,onBlur:L,style:{flex:1,padding:"6px",border:"1px solid #ff1493",borderRadius:"3px",fontSize:"13px",fontFamily:"inherit",minHeight:"60px",resize:"vertical"}}):f.jsx("input",{autoFocus:!0,type:dt,value:g,onChange:w=>v(w.target.value),onKeyDown:J,onBlur:L,style:{flex:1,padding:"6px",border:"1px solid #ff1493",borderRadius:"3px",fontSize:"13px",fontFamily:"inherit"}}),f.jsx("button",{onClick:L,style:{padding:"4px 8px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:""}),f.jsx("button",{onClick:q,style:{padding:"4px 8px",backgroundColor:"#999",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:""})]}):f.jsx("p",{style:{margin:0,fontWeight:"bold",fontSize:"13px",color:F==="price"?"#2196F3":"#333"},children:N})]})};return f.jsxs("div",{className:"customer-detail-panel",style:{position:"fixed",right:0,top:0,height:"100vh",width:"800px",backgroundColor:"#fff",borderLeft:"1px solid #e0e0e0",boxShadow:"-2px 0 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",zIndex:50,overflowY:"auto"},children:[f.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"bold",color:"#2c3e50"},children:s.buildingName}),f.jsxs("p",{style:{margin:0,fontSize:"13px",color:"#7f8c8d"},children:[s.category,"  ",s.propertyType]})]}),f.jsx("button",{onClick:e,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#999",padding:"0 10px"},children:""})]}),f.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#999",marginBottom:"15px",fontStyle:"italic"},children:"     "}),f.jsxs("div",{style:{marginBottom:"25px"},children:[f.jsx("h4",{style:{margin:"0 0 12px 0",color:"#ff1493",fontSize:"14px",fontWeight:"bold"},children:" "}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[k("roomNumber","",y?.roomNumber),k("price","",y?.price,"number"),k("createdAt","",y?.createdAt,"date"),k("moveInDate","",y?.moveInDate,"date")]})]}),f.jsxs("div",{style:{marginBottom:"25px"},children:[f.jsx("h4",{style:{margin:"0 0 12px 0",color:"#ff1493",fontSize:"14px",fontWeight:"bold"},children:" "}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[k("ownerName","",y?.ownerName),k("ownerPhone","",y?.ownerPhone,"tel")]})]}),f.jsxs("div",{style:{marginBottom:"25px"},children:[f.jsx("h4",{style:{margin:"0 0 12px 0",color:"#ff1493",fontSize:"14px",fontWeight:"bold"},children:" "}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[k("leaseInfo","",y?.leaseInfo),k("tenantPhone","",y?.tenantPhone,"tel")]}),f.jsx("div",{style:{marginBottom:"12px"},children:k("memo","",y?.memo,"textarea")})]})]}),f.jsxs("div",{style:{padding:"15px 20px",borderTop:"1px solid #e0e0e0",backgroundColor:"#f9f9f9",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:e,className:"btn-secondary",style:{padding:"8px 16px",fontSize:"13px"},children:""}),f.jsx("button",{onClick:()=>i(s),className:"btn-primary",style:{padding:"8px 16px",fontSize:"13px"},children:" "}),f.jsx("button",{onClick:()=>{confirm("  ?")&&l(s)},style:{padding:"8px 16px",fontSize:"13px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:""})]})]})},cb=s=>{const e=s.trim().split(`
`);if(e.length<2)throw new Error("CSV    .");const i=Ay(e[0]),a={createdAt:["","created_at","createdAt",""],buildingName:["","building_name","buildingName"],roomNumber:["","room_number","roomNumber"],propertyType:["","property_type","propertyType",""],category:["","category"],price:["","price",""],moveInDate:["","move_in_date","moveInDate",""],ownerName:["","owner_name","ownerName"],ownerPhone:["","owner_phone","ownerPhone",""],leaseInfo:["","lease_info","leaseInfo"],tenantPhone:["","tenant_phone","tenantPhone",""],memo:["","memo",""]},l={};if(Object.entries(a).forEach(([p,g])=>{const v=i.findIndex(y=>g.includes(y.trim()));v!==-1&&(l[p]=v)}),l.buildingName===void 0)throw new Error('  ""   .');const h=[];for(let p=1;p<e.length;p++){const g=e[p].trim();if(g)try{const v=Ay(g);let y=Xn(v,l.createdAt,""),b;if(y.trim()){const V=new Date(y.trim());b=V.toString()==="Invalid Date"?new Date().toISOString():V.toISOString()}else b=new Date().toISOString();const C={id:hb(),createdAt:b,buildingName:Xn(v,l.buildingName,""),roomNumber:Xn(v,l.roomNumber,""),propertyType:Xn(v,l.propertyType,""),category:Xn(v,l.category,""),price:parseInt(Xn(v,l.price,"0"),10)||0,moveInDate:Xn(v,l.moveInDate,""),ownerName:Xn(v,l.ownerName,""),ownerPhone:Xn(v,l.ownerPhone,""),leaseInfo:Xn(v,l.leaseInfo,""),tenantPhone:Xn(v,l.tenantPhone,""),memo:Xn(v,l.memo,"")};C.buildingName.trim()&&h.push(C)}catch(v){console.warn(`CSV  ${p+1}  :`,v.message)}}if(h.length===0)throw new Error("     .");return h},Ay=s=>{const e=[];let i="",a=!1;for(let l=0;l<s.length;l++){const h=s[l],p=s[l+1];h==='"'?a&&p==='"'?(i+='"',l++):a=!a:h===","&&!a?(e.push(i.trim()),i=""):i+=h}return e.push(i.trim()),e},Xn=(s,e,i)=>e===void 0||e===-1||s[e]===void 0?i:s[e].trim()||i,hb=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,fb=({onImport:s,onClose:e})=>{const i=gt.useRef(null),[a,l]=gt.useState(!1),[h,p]=gt.useState(""),[g,v]=gt.useState(null),y=async C=>{const V=C.target.files[0];if(V){p(""),l(!0),v(null);try{const L=await V.text(),q=cb(L);v({total:q.length,preview:q.slice(0,3),all:q})}catch(L){p(`  : ${L.message}`)}finally{l(!1)}}},b=async()=>{if(g){l(!0);try{await s(g.all),alert(`${g.total}   .`),e()}catch(C){p(` : ${C.message}`)}finally{l(!1)}}};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",style:{maxWidth:"700px",maxHeight:"90vh"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:"  CSV "}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]}),f.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[f.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"12px",borderRadius:"4px",fontSize:"13px",color:"#1565c0"},children:[f.jsx("strong",{children:"CSV  :"}),f.jsx("br",{}),"    ( ): , , , , , , , , , , "]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"CSV  "}),f.jsx("input",{type:"file",ref:i,onChange:y,accept:".csv",disabled:a,style:{padding:"8px",border:"2px solid #ddd",borderRadius:"4px",width:"100%",cursor:"pointer"}})]}),h&&f.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"12px",borderRadius:"4px",color:"#c62828",fontSize:"13px",border:"1px solid #ef5350"},children:[" ",h]}),g&&f.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px"},children:[f.jsxs("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#2196F3"},children:[" ",g.total,"    "]}),f.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"12px",maxHeight:"200px",overflowY:"auto"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""}),f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""}),f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""}),f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""})]})}),f.jsx("tbody",{children:g.preview.map((C,V)=>f.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[f.jsx("td",{style:{padding:"6px"},children:C.buildingName}),f.jsx("td",{style:{padding:"6px"},children:C.roomNumber||"-"}),f.jsx("td",{style:{padding:"6px"},children:C.propertyType}),f.jsx("td",{style:{padding:"6px",textAlign:"right"},children:C.price?`${C.price}`:"-"})]},V))})]})}),g.total>3&&f.jsxs("div",{style:{fontSize:"12px",color:"#999",fontStyle:"italic"},children:["...  ",g.total-3,""]})]}),a&&f.jsx("div",{style:{textAlign:"center",color:"#999"},children:" ..."})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:e,disabled:a,className:"btn-secondary",children:""}),f.jsx("button",{onClick:b,disabled:!g||a,className:"btn-primary",style:{opacity:!g||a?.6:1,cursor:!g||a?"not-allowed":"pointer"},children:a?" ...":" "})]})]})})},db=()=>{};var wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=function(s){const e=[];let i=0;for(let a=0;a<s.length;a++){let l=s.charCodeAt(a);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++a)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},pb=function(s){const e=[];let i=0,a=0;for(;i<s.length;){const l=s[i++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const h=s[i++];e[a++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=s[i++],p=s[i++],g=s[i++],v=((l&7)<<18|(h&63)<<12|(p&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(v>>10)),e[a++]=String.fromCharCode(56320+(v&1023))}else{const h=s[i++],p=s[i++];e[a++]=String.fromCharCode((l&15)<<12|(h&63)<<6|p&63)}}return e.join("")},H0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<s.length;l+=3){const h=s[l],p=l+1<s.length,g=p?s[l+1]:0,v=l+2<s.length,y=v?s[l+2]:0,b=h>>2,C=(h&3)<<4|g>>4;let V=(g&15)<<2|y>>6,L=y&63;v||(L=64,p||(V=64)),a.push(i[b],i[C],i[V],i[L])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(q0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):pb(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<s.length;){const h=i[s.charAt(l++)],g=l<s.length?i[s.charAt(l)]:0;++l;const y=l<s.length?i[s.charAt(l)]:64;++l;const C=l<s.length?i[s.charAt(l)]:64;if(++l,h==null||g==null||y==null||C==null)throw new mb;const V=h<<2|g>>4;if(a.push(V),y!==64){const L=g<<4&240|y>>2;if(a.push(L),C!==64){const q=y<<6&192|C;a.push(q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class mb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gb=function(s){const e=q0(s);return H0.encodeByteArray(e,!0)},ic=function(s){return gb(s).replace(/\./g,"")},yb=function(s){try{return H0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=()=>vb().__FIREBASE_DEFAULTS__,xb=()=>{if(typeof process>"u"||typeof wy>"u")return;const s=wy.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},bb=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&yb(s[1]);return e&&JSON.parse(e)},bd=()=>{try{return db()||_b()||xb()||bb()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Eb=s=>bd()?.emulatorHosts?.[s],F0=s=>{const e=Eb(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},G0=()=>bd()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",l=s.iat||0,h=s.sub||s.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ic(JSON.stringify(i)),ic(JSON.stringify(p)),""].join(".")}const ol={};function Sb(){const s={prod:[],emulator:[]};for(const e of Object.keys(ol))ol[e]?s.emulator.push(e):s.prod.push(e);return s}function Ab(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let Cy=!1;function K0(s,e){if(typeof window>"u"||typeof document>"u"||!xc(window.location.host)||ol[s]===e||ol[s]||Cy)return;ol[s]=e;function i(V){return`__firebase__banner__${V}`}const a="__firebase__banner",h=Sb().prod.length>0;function p(){const V=document.getElementById(a);V&&V.remove()}function g(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function v(V,L){V.setAttribute("width","24"),V.setAttribute("id",L),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function y(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{Cy=!0,p()},V}function b(V,L){V.setAttribute("id",L),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function C(){const V=Ab(a),L=i("text"),q=document.getElementById(L)||document.createElement("span"),J=i("learnmore"),k=document.getElementById(J)||document.createElement("a"),F=i("preprendIcon"),it=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const at=V.element;g(at),b(k,J);const dt=y();v(it,F),at.append(it,q,k,dt),document.body.appendChild(at)}h?(q.innerText="Preview backend disconnected.",it.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(it.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cb(){const s=bd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rb(){return!Cb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Db(){try{return typeof indexedDB=="object"}catch{return!1}}function Nb(){return new Promise((s,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="FirebaseError";class Hs extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=jb,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,X0.prototype.create)}}class X0{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},l=`${this.service}/${e}`,h=this.errors[e],p=h?Ib(h,a):"Error",g=`${this.serviceName}: ${p} (${l}).`;return new Hs(l,g,a)}}function Ib(s,e){return s.replace(Mb,(i,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const Mb=/\{\$([^}]+)}/g;function rc(s,e){if(s===e)return!0;const i=Object.keys(s),a=Object.keys(e);for(const l of i){if(!a.includes(l))return!1;const h=s[l],p=e[l];if(Ry(h)&&Ry(p)){if(!rc(h,p))return!1}else if(h!==p)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function Ry(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(s){return s&&s._delegate?s._delegate:s}class Ba{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new Tb;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kb(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:l});a.resolve(h)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,p]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);a===g&&p.resolve(l)}return l}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const h=this.instances.get(a);return h&&e(h,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Ob(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ob(s){return s===Os?void 0:s}function kb(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new Vb(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ee||(ee={}));const Ub={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},zb=ee.INFO,Lb={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},Bb=(s,e,...i)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),l=Lb[e];if(l)console[l](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $0{constructor(e){this.name=e,this._logLevel=zb,this._logHandler=Bb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ub[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}}const qb=(s,e)=>e.some(i=>s instanceof i);let Dy,Ny;function Hb(){return Dy||(Dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fb(){return Ny||(Ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z0=new WeakMap,Wf=new WeakMap,W0=new WeakMap,qf=new WeakMap,Ed=new WeakMap;function Gb(s){const e=new Promise((i,a)=>{const l=()=>{s.removeEventListener("success",h),s.removeEventListener("error",p)},h=()=>{i(Br(s.result)),l()},p=()=>{a(s.error),l()};s.addEventListener("success",h),s.addEventListener("error",p)});return e.then(i=>{i instanceof IDBCursor&&Z0.set(i,s)}).catch(()=>{}),Ed.set(e,s),e}function Yb(s){if(Wf.has(s))return;const e=new Promise((i,a)=>{const l=()=>{s.removeEventListener("complete",h),s.removeEventListener("error",p),s.removeEventListener("abort",p)},h=()=>{i(),l()},p=()=>{a(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",h),s.addEventListener("error",p),s.addEventListener("abort",p)});Wf.set(s,e)}let Jf={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return Wf.get(s);if(e==="objectStoreNames")return s.objectStoreNames||W0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Br(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Qb(s){Jf=s(Jf)}function Kb(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=s.call(Hf(this),e,...i);return W0.set(a,e.sort?e.sort():[e]),Br(a)}:Fb().includes(s)?function(...e){return s.apply(Hf(this),e),Br(Z0.get(this))}:function(...e){return Br(s.apply(Hf(this),e))}}function Xb(s){return typeof s=="function"?Kb(s):(s instanceof IDBTransaction&&Yb(s),qb(s,Hb())?new Proxy(s,Jf):s)}function Br(s){if(s instanceof IDBRequest)return Gb(s);if(qf.has(s))return qf.get(s);const e=Xb(s);return e!==s&&(qf.set(s,e),Ed.set(e,s)),e}const Hf=s=>Ed.get(s);function $b(s,e,{blocked:i,upgrade:a,blocking:l,terminated:h}={}){const p=indexedDB.open(s,e),g=Br(p);return a&&p.addEventListener("upgradeneeded",v=>{a(Br(p.result),v.oldVersion,v.newVersion,Br(p.transaction),v)}),i&&p.addEventListener("blocked",v=>i(v.oldVersion,v.newVersion,v)),g.then(v=>{h&&v.addEventListener("close",()=>h()),l&&v.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const Zb=["get","getKey","getAll","getAllKeys","count"],Wb=["put","add","delete","clear"],Ff=new Map;function jy(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ff.get(e))return Ff.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,l=Wb.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||Zb.includes(i)))return;const h=async function(p,...g){const v=this.transaction(p,l?"readwrite":"readonly");let y=v.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[i](...g),l&&v.done]))[0]};return Ff.set(e,h),h}Qb(s=>({...s,get:(e,i,a)=>jy(e,i)||s.get(e,i,a),has:(e,i)=>!!jy(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(tE(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function tE(s){return s.getComponent()?.type==="VERSION"}const td="@firebase/app",Iy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new $0("@firebase/app"),eE="@firebase/app-compat",nE="@firebase/analytics-compat",iE="@firebase/analytics",rE="@firebase/app-check-compat",sE="@firebase/app-check",aE="@firebase/auth",oE="@firebase/auth-compat",lE="@firebase/database",uE="@firebase/data-connect",cE="@firebase/database-compat",hE="@firebase/functions",fE="@firebase/functions-compat",dE="@firebase/installations",pE="@firebase/installations-compat",mE="@firebase/messaging",gE="@firebase/messaging-compat",yE="@firebase/performance",vE="@firebase/performance-compat",_E="@firebase/remote-config",xE="@firebase/remote-config-compat",bE="@firebase/storage",EE="@firebase/storage-compat",TE="@firebase/firestore",SE="@firebase/ai",AE="@firebase/firestore-compat",wE="firebase",CE="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]",RE={[td]:"fire-core",[eE]:"fire-core-compat",[iE]:"fire-analytics",[nE]:"fire-analytics-compat",[sE]:"fire-app-check",[rE]:"fire-app-check-compat",[aE]:"fire-auth",[oE]:"fire-auth-compat",[lE]:"fire-rtdb",[uE]:"fire-data-connect",[cE]:"fire-rtdb-compat",[hE]:"fire-fn",[fE]:"fire-fn-compat",[dE]:"fire-iid",[pE]:"fire-iid-compat",[mE]:"fire-fcm",[gE]:"fire-fcm-compat",[yE]:"fire-perf",[vE]:"fire-perf-compat",[_E]:"fire-rc",[xE]:"fire-rc-compat",[bE]:"fire-gcs",[EE]:"fire-gcs-compat",[TE]:"fire-fst",[AE]:"fire-fst-compat",[SE]:"fire-vertex","fire-js":"fire-js",[wE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map,DE=new Map,nd=new Map;function My(s,e){try{s.container.addComponent(e)}catch(i){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function fl(s){const e=s.name;if(nd.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;nd.set(e,s);for(const i of sc.values())My(i,s);for(const i of DE.values())My(i,s);return!0}function J0(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function tv(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new X0("app","Firebase",NE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=CE;function nv(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const a={name:ed,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw qr.create("bad-app-name",{appName:String(l)});if(i||(i=G0()),!i)throw qr.create("no-options");const h=sc.get(l);if(h){if(rc(i,h.options)&&rc(a,h.config))return h;throw qr.create("duplicate-app",{appName:l})}const p=new Pb(l);for(const v of nd.values())p.addComponent(v);const g=new jE(i,a,p);return sc.set(l,g),g}function iv(s=ed){const e=sc.get(s);if(!e&&s===ed&&G0())return nv();if(!e)throw qr.create("no-app",{appName:s});return e}function Hr(s,e,i){let a=RE[s]??s;i&&(a+=`-${i}`);const l=a.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${a}" with version "${e}":`];l&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(p.join(" "));return}fl(new Ba(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="firebase-heartbeat-database",ME=1,dl="firebase-heartbeat-store";let Gf=null;function rv(){return Gf||(Gf=$b(IE,ME,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(dl)}catch(i){console.warn(i)}}}}).catch(s=>{throw qr.create("idb-open",{originalErrorMessage:s.message})})),Gf}async function VE(s){try{const i=(await rv()).transaction(dl),a=await i.objectStore(dl).get(sv(s));return await i.done,a}catch(e){if(e instanceof Hs)ir.warn(e.message);else{const i=qr.create("idb-get",{originalErrorMessage:e?.message});ir.warn(i.message)}}}async function Vy(s,e){try{const a=(await rv()).transaction(dl,"readwrite");await a.objectStore(dl).put(e,sv(s)),await a.done}catch(i){if(i instanceof Hs)ir.warn(i.message);else{const a=qr.create("idb-set",{originalErrorMessage:i?.message});ir.warn(a.message)}}}function sv(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=1024,kE=30;class PE{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new zE(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Oy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>kE){const l=LE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Oy(),{heartbeatsToSend:i,unsentEntries:a}=UE(this._heartbeatsCache.heartbeats),l=ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ir.warn(e),""}}}function Oy(){return new Date().toISOString().substring(0,10)}function UE(s,e=OE){const i=[];let a=s.slice();for(const l of s){const h=i.find(p=>p.agent===l.agent);if(h){if(h.dates.push(l.date),ky(i)>e){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),ky(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class zE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Db()?Nb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await VE(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ky(s){return ic(JSON.stringify({version:2,heartbeats:s})).length}function LE(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(s){fl(new Ba("platform-logger",e=>new Jb(e),"PRIVATE")),fl(new Ba("heartbeat",e=>new PE(e),"PRIVATE")),Hr(td,Iy,s),Hr(td,Iy,"esm2020"),Hr("fire-js","")}BE("");var Py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fr,av;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function T(){}T.prototype=w.prototype,N.F=w.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(j,D,R){for(var S=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)S[vt-2]=arguments[vt];return w.prototype[D].apply(j,S)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,w,T){T||(T=0);const j=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)j[D]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(D=0;D<16;++D)j[D]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=N.g[0],T=N.g[1],D=N.g[2];let R=N.g[3],S;S=w+(R^T&(D^R))+j[0]+3614090360&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[1]+3905402710&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[2]+606105819&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[3]+3250441966&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(R^T&(D^R))+j[4]+4118548399&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[5]+1200080426&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[6]+2821735955&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[7]+4249261313&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(R^T&(D^R))+j[8]+1770035416&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[9]+2336552879&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[10]+4294925233&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[11]+2304563134&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(R^T&(D^R))+j[12]+1804603682&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[13]+4254626195&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[14]+2792965006&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[15]+1236535329&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(D^R&(T^D))+j[1]+4129170786&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[6]+3225465664&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[11]+643717713&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[0]+3921069994&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^R&(T^D))+j[5]+3593408605&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[10]+38016083&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[15]+3634488961&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[4]+3889429448&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^R&(T^D))+j[9]+568446438&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[14]+3275163606&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[3]+4107603335&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[8]+1163531501&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^R&(T^D))+j[13]+2850285829&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[2]+4243563512&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[7]+1735328473&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[12]+2368359562&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(T^D^R)+j[5]+4294588738&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[8]+2272392833&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[11]+1839030562&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[14]+4259657740&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^R)+j[1]+2763975236&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[4]+1272893353&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[7]+4139469664&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[10]+3200236656&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^R)+j[13]+681279174&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[0]+3936430074&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[3]+3572445317&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[6]+76029189&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^R)+j[9]+3654602809&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[12]+3873151461&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[15]+530742520&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[2]+3299628645&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(D^(T|~R))+j[0]+4096336452&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[7]+1126891415&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[14]+2878612391&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[5]+4237533241&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~R))+j[12]+1700485571&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[3]+2399980690&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[10]+4293915773&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[1]+2240044497&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~R))+j[8]+1873313359&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[15]+4264355552&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[6]+2734768916&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[13]+1309151649&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~R))+j[4]+4149444226&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[11]+3174756917&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[2]+718787259&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+R&4294967295}a.prototype.v=function(N,w){w===void 0&&(w=N.length);const T=w-this.blockSize,j=this.C;let D=this.h,R=0;for(;R<w;){if(D==0)for(;R<=T;)l(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<w;)if(j[D++]=N.charCodeAt(R++),D==this.blockSize){l(this,j),D=0;break}}else for(;R<w;)if(j[D++]=N[R++],D==this.blockSize){l(this,j),D=0;break}}this.h=D,this.o+=w},a.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,T=0;T<4;++T)for(let j=0;j<32;j+=8)N[w++]=this.g[T]>>>j&255;return N};function h(N,w){var T=g;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=w(N)}function p(N,w){this.h=w;const T=[];let j=!0;for(let D=N.length-1;D>=0;D--){const R=N[D]|0;j&&R==w||(T[D]=R,j=!1)}this.g=T}var g={};function v(N){return-128<=N&&N<128?h(N,function(w){return new p([w|0],w<0?-1:0)}):new p([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return C;if(N<0)return k(y(-N));const w=[];let T=1;for(let j=0;N>=T;j++)w[j]=N/T|0,T*=4294967296;return new p(w,0)}function b(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return k(b(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=y(Math.pow(w,8));let j=C;for(let R=0;R<N.length;R+=8){var D=Math.min(8,N.length-R);const S=parseInt(N.substring(R,R+D),w);D<8?(D=y(Math.pow(w,D)),j=j.j(D).add(y(S))):(j=j.j(T),j=j.add(y(S)))}return j}var C=v(0),V=v(1),L=v(16777216);s=p.prototype,s.m=function(){if(J(this))return-k(this).m();let N=0,w=1;for(let T=0;T<this.g.length;T++){const j=this.i(T);N+=(j>=0?j:4294967296+j)*w,w*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(J(this))return"-"+k(this).toString(N);const w=y(Math.pow(N,6));var T=this;let j="";for(;;){const D=dt(T,w).g;T=F(T,D.j(w));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=D,q(T))return R+j;for(;R.length<6;)R="0"+R;j=R+j}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function J(N){return N.h==-1}s.l=function(N){return N=F(this,N),J(N)?-1:q(N)?0:1};function k(N){const w=N.g.length,T=[];for(let j=0;j<w;j++)T[j]=~N.g[j];return new p(T,~N.h).add(V)}s.abs=function(){return J(this)?k(this):this},s.add=function(N){const w=Math.max(this.g.length,N.g.length),T=[];let j=0;for(let D=0;D<=w;D++){let R=j+(this.i(D)&65535)+(N.i(D)&65535),S=(R>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);j=S>>>16,R&=65535,S&=65535,T[D]=S<<16|R}return new p(T,T[T.length-1]&-2147483648?-1:0)};function F(N,w){return N.add(k(w))}s.j=function(N){if(q(this)||q(N))return C;if(J(this))return J(N)?k(this).j(k(N)):k(k(this).j(N));if(J(N))return k(this.j(k(N)));if(this.l(L)<0&&N.l(L)<0)return y(this.m()*N.m());const w=this.g.length+N.g.length,T=[];for(var j=0;j<2*w;j++)T[j]=0;for(j=0;j<this.g.length;j++)for(let D=0;D<N.g.length;D++){const R=this.i(j)>>>16,S=this.i(j)&65535,vt=N.i(D)>>>16,St=N.i(D)&65535;T[2*j+2*D]+=S*St,it(T,2*j+2*D),T[2*j+2*D+1]+=R*St,it(T,2*j+2*D+1),T[2*j+2*D+1]+=S*vt,it(T,2*j+2*D+1),T[2*j+2*D+2]+=R*vt,it(T,2*j+2*D+2)}for(N=0;N<w;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=w;N<2*w;N++)T[N]=0;return new p(T,0)};function it(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function at(N,w){this.g=N,this.h=w}function dt(N,w){if(q(w))throw Error("division by zero");if(q(N))return new at(C,C);if(J(N))return w=dt(k(N),w),new at(k(w.g),k(w.h));if(J(w))return w=dt(N,k(w)),new at(k(w.g),w.h);if(N.g.length>30){if(J(N)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var T=V,j=w;j.l(N)<=0;)T=et(T),j=et(j);var D=K(T,1),R=K(j,1);for(j=K(j,2),T=K(T,2);!q(j);){var S=R.add(j);S.l(N)<=0&&(D=D.add(T),R=S),j=K(j,1),T=K(T,1)}return w=F(N,D.j(w)),new at(D,w)}for(D=C;N.l(w)>=0;){for(T=Math.max(1,Math.floor(N.m()/w.m())),j=Math.ceil(Math.log(T)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),R=y(T),S=R.j(w);J(S)||S.l(N)>0;)T-=j,R=y(T),S=R.j(w);q(R)&&(R=V),D=D.add(R),N=F(N,S)}return new at(D,N)}s.B=function(N){return dt(this,N).h},s.and=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let j=0;j<w;j++)T[j]=this.i(j)&N.i(j);return new p(T,this.h&N.h)},s.or=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let j=0;j<w;j++)T[j]=this.i(j)|N.i(j);return new p(T,this.h|N.h)},s.xor=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let j=0;j<w;j++)T[j]=this.i(j)^N.i(j);return new p(T,this.h^N.h)};function et(N){const w=N.g.length+1,T=[];for(let j=0;j<w;j++)T[j]=N.i(j)<<1|N.i(j-1)>>>31;return new p(T,N.h)}function K(N,w){const T=w>>5;w%=32;const j=N.g.length-T,D=[];for(let R=0;R<j;R++)D[R]=w>0?N.i(R+T)>>>w|N.i(R+T+1)<<32-w:N.i(R+T);return new p(D,N.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,av=a,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=y,p.fromString=b,Fr=p}).apply(typeof Py<"u"?Py:typeof self<"u"?self:typeof window<"u"?window:{});var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ov,il,lv,$u,id,uv,cv,hv;(function(){var s,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fu=="object"&&Fu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=i(this);function l(u,m){if(m)t:{var _=a;u=u.split(".");for(var A=0;A<u.length-1;A++){var Y=u[A];if(!(Y in _))break t;_=_[Y]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var _=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&_.push([A,m[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=v,y.apply(null,arguments)}function b(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function C(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(A,Y,tt){for(var Tt=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)Tt[qt-2]=arguments[qt];return m.prototype[Y].apply(A,Tt)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const m=u.length;if(m>0){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function q(u,m){for(let A=1;A<arguments.length;A++){const Y=arguments[A];var _=typeof Y;if(_=_!="object"?_:Y?Array.isArray(Y)?"array":_:"null",_=="array"||_=="object"&&typeof Y.length=="number"){_=u.length||0;const tt=Y.length||0;u.length=_+tt;for(let Tt=0;Tt<tt;Tt++)u[_+Tt]=Y[Tt]}else u.push(Y)}}class J{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(u){p.setTimeout(()=>{throw u},0)}function F(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class it{constructor(){this.h=this.g=null}add(m,_){const A=at.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var at=new J(()=>new dt,u=>u.reset());class dt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let et,K=!1,N=new it,w=()=>{const u=Promise.resolve(void 0);et=()=>{u.then(T)}};function T(){for(var u;u=F();){try{u.h.call(u.g)}catch(_){k(_)}var m=at;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}K=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function S(u){return/^[\s\xa0]*$/.test(u)}function vt(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}C(vt,D),vt.prototype.init=function(u,m){const _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&vt.Z.h.call(this)},vt.prototype.h=function(){vt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var St="closure_listenable_"+(Math.random()*1e6|0),O=0;function nt(u,m,_,A,Y){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=Y,this.key=++O,this.da=this.fa=!1}function ht(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function bt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function I(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function $(u){const m={};for(const _ in u)m[_]=u[_];return m}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(u,m){let _,A;for(let Y=1;Y<arguments.length;Y++){A=arguments[Y];for(_ in A)u[_]=A[_];for(let tt=0;tt<z.length;tt++)_=z[tt],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function W(u){this.src=u,this.g={},this.h=0}W.prototype.add=function(u,m,_,A,Y){const tt=u.toString();u=this.g[tt],u||(u=this.g[tt]=[],this.h++);const Tt=H(u,m,A,Y);return Tt>-1?(m=u[Tt],_||(m.fa=!1)):(m=new nt(m,this.src,tt,!!A,Y),m.fa=_,u.push(m)),m};function lt(u,m){const _=m.type;if(_ in u.g){var A=u.g[_],Y=Array.prototype.indexOf.call(A,m,void 0),tt;(tt=Y>=0)&&Array.prototype.splice.call(A,Y,1),tt&&(ht(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function H(u,m,_,A){for(let Y=0;Y<u.length;++Y){const tt=u[Y];if(!tt.da&&tt.listener==m&&tt.capture==!!_&&tt.ha==A)return Y}return-1}var _t="closure_lm_"+(Math.random()*1e6|0),yt={};function Dt(u,m,_,A,Y){if(Array.isArray(m)){for(let tt=0;tt<m.length;tt++)Dt(u,m[tt],_,A,Y);return null}return _=ci(_),u&&u[St]?u.J(m,_,g(A)?!!A.capture:!1,Y):Yt(u,m,_,!1,A,Y)}function Yt(u,m,_,A,Y,tt){if(!m)throw Error("Invalid event type");const Tt=g(Y)?!!Y.capture:!!Y;let qt=bn(u);if(qt||(u[_t]=qt=new W(u)),_=qt.add(m,_,A,Tt,tt),_.proxy)return _;if(A=Wt(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)R||(Y=Tt),Y===void 0&&(Y=!1),u.addEventListener(m.toString(),A,Y);else if(u.attachEvent)u.attachEvent(re(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Wt(){function u(_){return m.call(u.src,u.listener,_)}const m=zt;return u}function Be(u,m,_,A,Y){if(Array.isArray(m))for(var tt=0;tt<m.length;tt++)Be(u,m[tt],_,A,Y);else A=g(A)?!!A.capture:!!A,_=ci(_),u&&u[St]?(u=u.i,tt=String(m).toString(),tt in u.g&&(m=u.g[tt],_=H(m,_,A,Y),_>-1&&(ht(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[tt],u.h--)))):u&&(u=bn(u))&&(m=u.g[m.toString()],u=-1,m&&(u=H(m,_,A,Y)),(_=u>-1?m[u]:null)&&qe(_))}function qe(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[St])lt(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(re(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=bn(m))?(lt(_,u),_.h==0&&(_.src=null,m[_t]=null)):ht(u)}}}function re(u){return u in yt?yt[u]:yt[u]="on"+u}function zt(u,m){if(u.da)u=!0;else{m=new vt(m,this);const _=u.listener,A=u.ha||u.src;u.fa&&qe(u),u=_.call(A,m)}return u}function bn(u){return u=u[_t],u instanceof W?u:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function ci(u){return typeof u=="function"?u:(u[De]||(u[De]=function(m){return u.handleEvent(m)}),u[De])}function ue(){j.call(this),this.i=new W(this),this.M=this,this.G=null}C(ue,j),ue.prototype[St]=!0,ue.prototype.removeEventListener=function(u,m,_,A){Be(this,u,m,_,A)};function be(u,m){var _,A=u.G;if(A)for(_=[];A;A=A.G)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var Y=m;m=new D(A,u),U(m,Y)}Y=!0;let tt,Tt;if(_)for(Tt=_.length-1;Tt>=0;Tt--)tt=m.g=_[Tt],Y=En(tt,A,!0,m)&&Y;if(tt=m.g=u,Y=En(tt,A,!0,m)&&Y,Y=En(tt,A,!1,m)&&Y,_)for(Tt=0;Tt<_.length;Tt++)tt=m.g=_[Tt],Y=En(tt,A,!1,m)&&Y}ue.prototype.N=function(){if(ue.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let A=0;A<_.length;A++)ht(_[A]);delete u.g[m],u.h--}}this.G=null},ue.prototype.J=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},ue.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function En(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let Y=!0;for(let tt=0;tt<m.length;++tt){const Tt=m[tt];if(Tt&&!Tt.da&&Tt.capture==_){const qt=Tt.listener,ve=Tt.ha||Tt.src;Tt.fa&&lt(u.i,Tt),Y=qt.call(ve,A)!==!1&&Y}}return Y&&!A.defaultPrevented}function ar(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:p.setTimeout(u,m||0)}function ki(u){u.g=ar(()=>{u.g=null,u.i&&(u.i=!1,ki(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Wr extends j{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ki(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(u){j.call(this),this.h=u,this.g={}}C(Pn,j);var Un=[];function mt(u){bt(u.g,function(m,_){this.g.hasOwnProperty(_)&&qe(m)},u),u.g={}}Pn.prototype.N=function(){Pn.Z.N.call(this),mt(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rt=p.JSON.stringify,ft=p.JSON.parse,xt=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Et(){}function wt(){}var Nt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bt(){D.call(this,"d")}C(Bt,D);function jt(){D.call(this,"c")}C(jt,D);var At={},me=null;function He(){return me=me||new ue}At.Ia="serverreachability";function un(u){D.call(this,At.Ia,u)}C(un,D);function Tn(u){const m=He();be(m,new un(m))}At.STAT_EVENT="statevent";function Rn(u,m){D.call(this,At.STAT_EVENT,u),this.stat=m}C(Rn,D);function Ee(u){const m=He();be(m,new Rn(m,u))}At.Ja="timingevent";function Jr(u,m){D.call(this,At.Ja,u),this.size=m}C(Jr,D);function or(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function lr(){this.g=!0}lr.prototype.ua=function(){this.g=!1};function Wa(u,m,_,A,Y,tt){u.info(function(){if(u.g)if(tt){var Tt="",qt=tt.split("&");for(let ae=0;ae<qt.length;ae++){var ve=qt[ae].split("=");if(ve.length>1){const Ie=ve[0];ve=ve[1];const Dn=Ie.split("_");Tt=Dn.length>=2&&Dn[1]=="type"?Tt+(Ie+"="+ve+"&"):Tt+(Ie+"=redacted&")}}}else Tt=null;else Tt=tt;return"XMLHTTP REQ ("+A+") [attempt "+Y+"]: "+m+`
`+_+`
`+Tt})}function Ja(u,m,_,A,Y,tt,Tt){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Y+"]: "+m+`
`+_+`
`+tt+" "+Tt})}function Pi(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hi(u,_)+(A?" "+A:"")})}function Lc(u,m){u.info(function(){return"TIMEOUT: "+m})}lr.prototype.info=function(){};function hi(u,m){if(!u.g)return m;if(!m)return null;try{const tt=JSON.parse(m);if(tt){for(u=0;u<tt.length;u++)if(Array.isArray(tt[u])){var _=tt[u];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var Y=A[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let Tt=1;Tt<A.length;Tt++)A[Tt]=""}}}}return rt(tt)}catch{return m}}var Ne={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},en={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ui;function ts(){}C(ts,Et),ts.prototype.g=function(){return new XMLHttpRequest},Ui=new ts;function es(u){return encodeURIComponent(String(u))}function Bc(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Jn(u,m,_,A){this.j=u,this.i=m,this.l=_,this.S=A||1,this.V=new Pn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}var Ks={},fi={};function di(u,m,_){u.M=1,u.A=Li(Se(m)),u.u=_,u.R=!0,cr(u,null)}function cr(u,m){u.F=Date.now(),ns(u),u.B=Se(u.A);var _=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Il(_.i,"t",A),u.C=0,_=u.j.L,u.h=new ur,u.g=ra(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Wr(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,A=u.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Un[0]=Y.toString()),Y=Un);for(let tt=0;tt<Y.length;tt++){const Tt=Dt(_,Y[tt],A||m.handleEvent,!1,m.h||m);if(!Tt)break;m.g[Tt.key]=Tt}m=u.J?$(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Tn(),Wa(u.i,u.v,u.B,u.l,u.S,u.u)}Jn.prototype.ba=function(u){u=u.target;const m=this.O;m&&cn(u)==3?m.j():this.Y(u)},Jn.prototype.Y=function(u){try{if(u==this.g)t:{const qt=cn(this.g),ve=this.g.ya(),ae=this.g.ca();if(!(qt<3)&&(qt!=3||this.g&&(this.h.h||this.g.la()||ds(this.g)))){this.K||qt!=4||ve==7||(ve==8||ae<=0?Tn(3):Tn(2)),mi(this);var m=this.g.ca();this.X=m;var _=hr(this);if(this.o=m==200,Ja(this.i,this.v,this.B,this.l,this.S,qt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var A,Y=this.g;if((A=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(A)){var tt=A;break e}}tt=null}if(u=tt)Pi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xs(this,u);else{this.o=!1,this.m=3,Ee(12),gi(this),is(this);break t}}if(this.R){u=!0;let Ie;for(;!this.K&&this.C<_.length;)if(Ie=Dl(this,_),Ie==fi){qt==4&&(this.m=4,Ee(14),u=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ie==Ks){this.m=4,Ee(15),Pi(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Pi(this.i,this.l,Ie,null),Xs(this,Ie);if(je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||_.length!=0||this.h.h||(this.m=1,Ee(16),u=!1),this.o=this.o&&u,!u)Pi(this.i,this.l,_,"[Invalid Chunked Response]"),gi(this),is(this);else if(_.length>0&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.aa&&!Tt.P&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),uo(Tt),Tt.P=!0,Ee(11))}}else Pi(this.i,this.l,_,null),Xs(this,_);qt==4&&gi(this),this.o&&!this.K&&(qt==4?co(this.j,this):(this.o=!1,ns(this)))}else ps(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ee(12)):(this.m=0,Ee(13)),gi(this),is(this)}}}catch{}finally{}};function hr(u){if(!je(u))return u.g.la();const m=ds(u.g);if(m==="")return"";let _="";const A=m.length,Y=cn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gi(u),is(u),"";u.h.i=new p.TextDecoder}for(let tt=0;tt<A;tt++)u.h.h=!0,_+=u.h.i.decode(m[tt],{stream:!(Y&&tt==A-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function je(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Dl(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?fi:(_=Number(m.substring(_,A)),isNaN(_)?Ks:(A+=1,A+_>m.length?fi:(m=m.slice(A,A+_),u.C=A+_,m)))}Jn.prototype.cancel=function(){this.K=!0,gi(this)};function ns(u){u.T=Date.now()+u.H,pi(u,u.H)}function pi(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=or(y(u.aa,u),m)}function mi(u){u.D&&(p.clearTimeout(u.D),u.D=null)}Jn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Lc(this.i,this.B),this.M!=2&&(Tn(),Ee(17)),gi(this),this.m=2,is(this)):pi(this,this.T-u)};function is(u){u.j.I==0||u.K||co(u.j,u)}function gi(u){mi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,mt(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Xs(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||as(_.h,u))){if(!u.L&&as(_.h,u)&&_.I==3){try{var A=_.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Y=A;if(Y[0]==0){t:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ia(_),yi(_);else break t;lo(_),Ee(18)}}else _.xa=Y[1],0<_.xa-_.K&&Y[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=or(y(_.Va,_),6e3));zn(_.h)<=1&&_.ta&&(_.ta=void 0)}else Hi(_,11)}else if((u.L||_.g==u)&&ia(_),!S(m))for(Y=_.Ba.g.parse(m),m=0;m<Y.length;m++){let ae=Y[m];const Ie=ae[0];if(!(Ie<=_.K))if(_.K=Ie,ae=ae[1],_.I==2)if(ae[0]=="c"){_.M=ae[1],_.ba=ae[2];const Dn=ae[3];Dn!=null&&(_.ka=Dn,_.j.info("VER="+_.ka));const vi=ae[4];vi!=null&&(_.za=vi,_.j.info("SVER="+_.za));const ni=ae[5];ni!=null&&typeof ni=="number"&&ni>0&&(A=1.5*ni,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const ii=u.g;if(ii){const ri=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ri){var tt=A.h;tt.g||ri.indexOf("spdy")==-1&&ri.indexOf("quic")==-1&&ri.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&($s(tt,tt.h),tt.h=null))}if(A.G){const fo=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;fo&&(A.wa=fo,ce(A.J,A.G,fo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var Tt=u;if(A.na=Bl(A,A.L?A.ba:null,A.W),Tt.L){zi(A.h,Tt);var qt=Tt,ve=A.O;ve&&(qt.H=ve),qt.D&&(mi(qt),ns(qt)),A.g=Tt}else Pl(A);_.i.length>0&&vs(_)}else ae[0]!="stop"&&ae[0]!="close"||Hi(_,7);else _.I==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Hi(_,7):gs(_):ae[0]!="noop"&&_.l&&_.l.qa(ae),_.A=0)}}Tn(4)}catch{}}var qc=class{constructor(u,m){this.g=u,this.map=m}};function rs(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ss(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zn(u){return u.h?1:u.g?u.g.size:0}function as(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function $s(u,m){u.g?u.g.add(m):u.h=m}function zi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}rs.prototype.cancel=function(){if(this.i=Zs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Zs(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return L(u.i)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hc(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const A=u[_].indexOf("=");let Y,tt=null;A>=0?(Y=u[_].substring(0,A),tt=u[_].substring(A+1)):Y=u[_],m(Y,tt?decodeURIComponent(tt.replace(/\+/g," ")):"")}}}function ti(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof ti?(this.l=u.l,fr(this,u.j),this.o=u.o,this.g=u.g,os(this,u.u),this.h=u.h,dr(this,Ml(u.i)),this.m=u.m):u&&(m=String(u).match(Ws))?(this.l=!1,fr(this,m[1]||"",!0),this.o=ls(m[2]||""),this.g=ls(m[3]||"",!0),os(this,m[4]),this.h=ls(m[5]||"",!0),dr(this,m[6]||"",!0),this.m=ls(m[7]||"")):(this.l=!1,this.i=new Ln(null,this.l))}ti.prototype.toString=function(){const u=[];var m=this.j;m&&u.push($e(m,eo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push($e(m,eo,!0),"@"),u.push(es(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push($e(_,_.charAt(0)=="/"?pr:no,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",$e(_,jl)),u.join("")},ti.prototype.resolve=function(u){const m=Se(this);let _=!!u.j;_?fr(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var A=u.h;if(_)os(m,u.u);else if(_=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var Y=m.h.lastIndexOf("/");Y!=-1&&(A=m.h.slice(0,Y+1)+A)}if(Y=A,Y==".."||Y==".")A="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){A=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const tt=[];for(let Tt=0;Tt<Y.length;){const qt=Y[Tt++];qt=="."?A&&Tt==Y.length&&tt.push(""):qt==".."?((tt.length>1||tt.length==1&&tt[0]!="")&&tt.pop(),A&&Tt==Y.length&&tt.push("")):(tt.push(qt),A=!0)}A=tt.join("/")}else A=Y}return _?m.h=A:_=u.i.toString()!=="",_?dr(m,Ml(u.i)):_=!!u.m,_&&(m.m=u.m),m};function Se(u){return new ti(u)}function fr(u,m,_){u.j=_?ls(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function os(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function dr(u,m,_){m instanceof Ln?(u.i=m,so(u.i,u.l)):(_||(m=$e(m,Nl)),u.i=new Ln(m,u.l))}function ce(u,m,_){u.i.set(m,_)}function Li(u){return ce(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ls(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $e(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,to),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function to(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var eo=/[#\/\?@]/g,no=/[#\?:]/g,pr=/[#\?]/g,Nl=/[#\?@]/g,jl=/#/g;function Ln(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Bi(u){u.g||(u.g=new Map,u.h=0,u.i&&Hc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}s=Ln.prototype,s.add=function(u,m){Bi(this),this.i=null,u=ei(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function io(u,m){Bi(u),m=ei(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ro(u,m){return Bi(u),m=ei(u,m),u.g.has(m)}s.forEach=function(u,m){Bi(this),this.g.forEach(function(_,A){_.forEach(function(Y){u.call(m,Y,A,this)},this)},this)};function Js(u,m){Bi(u);let _=[];if(typeof m=="string")ro(u,m)&&(_=_.concat(u.g.get(ei(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}s.set=function(u,m){return Bi(this),this.i=null,u=ei(this,u),ro(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=Js(this,u),u.length>0?String(u[0]):m):m};function Il(u,m,_){io(u,m),_.length>0&&(u.i=null,u.g.set(ei(u,m),L(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var _=m[A];const Y=es(_);_=Js(this,_);for(let tt=0;tt<_.length;tt++){let Tt=Y;_[tt]!==""&&(Tt+="="+es(_[tt])),u.push(Tt)}}return this.i=u.join("&")};function Ml(u){const m=new Ln;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ei(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function so(u,m){m&&!u.j&&(Bi(u),u.i=null,u.g.forEach(function(_,A){const Y=A.toLowerCase();A!=Y&&(io(this,A),Il(this,Y,_))},u)),u.j=m}function ao(u,m){const _=new lr;if(p.Image){const A=new Image;A.onload=b(gn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=b(gn,_,"TestLoadImage: error",!1,m,A),A.onabort=b(gn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=b(gn,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function mr(u,m){const _=new lr,A=new AbortController,Y=setTimeout(()=>{A.abort(),gn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(tt=>{clearTimeout(Y),tt.ok?gn(_,"TestPingServer: ok",!0,m):gn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(Y),gn(_,"TestPingServer: error",!1,m)})}function gn(u,m,_,A,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),A(_)}catch{}}function Vl(){this.g=new xt}function us(u){this.i=u.Sb||null,this.h=u.ab||!1}C(us,Et),us.prototype.g=function(){return new cs(this.i,this.h)};function cs(u,m){ue.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(cs,ue),s=cs.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,qi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||p).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yn(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function gr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?yn(this):qi(this),this.readyState==3&&gr(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,yn(this))},s.Na=function(u){this.g&&(this.response=u,yn(this))},s.ga=function(){this.g&&yn(this)};function yn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,qi(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function qi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yr(u){let m="";return bt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Bn(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=yr(_),typeof u=="string"?_!=null&&es(_):ce(u,m,_))}function ge(u){ue.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(ge,ue);var ta=/^https?$/i,Ol=["POST","PUT"];s=ge.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ui.g(),this.g.onreadystatechange=V(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(tt){hs(this,tt);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Y in A)_.set(Y,A[Y]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const tt of A.keys())_.set(tt,A.get(tt));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(tt=>tt.toLowerCase()=="content-type"),Y=p.FormData&&u instanceof p.FormData,!(Array.prototype.indexOf.call(Ol,m,void 0)>=0)||A||Y||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,Tt]of _)this.g.setRequestHeader(tt,Tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(tt){hs(this,tt)}};function hs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,fs(u),Fe(u)}function fs(u){u.A||(u.A=!0,be(u,"complete"),be(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,be(this,"complete"),be(this,"abort"),Fe(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fe(this,!0)),ge.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?oo(this):this.Xa())},s.Xa=function(){oo(this)};function oo(u){if(u.h&&typeof h<"u"){if(u.v&&cn(u)==4)setTimeout(u.Ca.bind(u),0);else if(be(u,"readystatechange"),cn(u)==4){u.h=!1;try{const tt=u.ca();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=tt===0){let Tt=String(u.D).match(Ws)[1]||null;!Tt&&p.self&&p.self.location&&(Tt=p.self.location.protocol.slice(0,-1)),A=!ta.test(Tt?Tt.toLowerCase():"")}_=A}if(_)be(u,"complete"),be(u,"success");else{u.o=6;try{var Y=cn(u)>2?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.ca()+"]",fs(u)}}finally{Fe(u)}}}}function Fe(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||be(u,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function cn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return cn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ft(m)}};function ds(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ps(u){const m={};u=(u.g&&cn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(S(u[A]))continue;var _=Bc(u[A]);const Y=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const tt=m[Y]||[];m[Y]=tt,tt.push(_)}I(m,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ea(u){this.za=0,this.i=[],this.j=new lr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ms("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ms("baseRetryDelayMs",5e3,u),this.Za=ms("retryDelaySeedMs",1e4,u),this.Ta=ms("forwardChannelMaxRetries",2,u),this.va=ms("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new rs(u&&u.concurrentRequestLimit),this.Ba=new Vl,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ea.prototype,s.ka=8,s.I=1,s.connect=function(u,m,_,A){Ee(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=Bl(this,null,this.W),vs(this)};function gs(u){if(ys(u),u.I==3){var m=u.V++,_=Se(u.J);if(ce(_,"SID",u.M),ce(_,"RID",m),ce(_,"TYPE","terminate"),_s(u,_),m=new Jn(u,u.j,m),m.M=2,m.A=Li(Se(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.A,_=!0),_||(m.g=ra(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ns(m)}Ll(u)}function yi(u){u.g&&(uo(u),u.g.cancel(),u.g=null)}function ys(u){yi(u),u.v&&(p.clearTimeout(u.v),u.v=null),ia(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&p.clearTimeout(u.m),u.m=null)}function vs(u){if(!ss(u.h)&&!u.m){u.m=!0;var m=u.Ea;et||w(),K||(et(),K=!0),N.add(m,u),u.D=0}}function Fc(u,m){return zn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=or(y(u.Ea,u,m),zl(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const Y=new Jn(this,this.j,u);let tt=this.o;if(this.U&&(tt?(tt=$(tt),U(tt,this.U)):tt=this.U),this.u!==null||this.R||(Y.J=tt,tt=null),this.S)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=na(this,Y,m),_=Se(this.J),ce(_,"RID",u),ce(_,"CVER",22),this.G&&ce(_,"X-HTTP-Session-Id",this.G),_s(this,_),tt&&(this.R?m="headers="+es(yr(tt))+"&"+m:this.u&&Bn(_,this.u,tt)),$s(this.h,Y),this.Ra&&ce(_,"TYPE","init"),this.S?(ce(_,"$req",m),ce(_,"SID","null"),Y.U=!0,di(Y,_,null)):di(Y,_,m),this.I=2}}else this.I==3&&(u?kl(this,u):this.i.length==0||ss(this.h)||kl(this))};function kl(u,m){var _;m?_=m.l:_=u.V++;const A=Se(u.J);ce(A,"SID",u.M),ce(A,"RID",_),ce(A,"AID",u.K),_s(u,A),u.u&&u.o&&Bn(A,u.u,u.o),_=new Jn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=na(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),$s(u.h,_),di(_,A,m)}function _s(u,m){u.H&&bt(u.H,function(_,A){ce(m,A,_)}),u.l&&bt({},function(_,A){ce(m,A,_)})}function na(u,m,_){_=Math.min(u.i.length,_);const A=u.l?y(u.l.Ka,u.l,u):null;t:{var Y=u.i;let qt=-1;for(;;){const ve=["count="+_];qt==-1?_>0?(qt=Y[0].g,ve.push("ofs="+qt)):qt=0:ve.push("ofs="+qt);let ae=!0;for(let Ie=0;Ie<_;Ie++){var tt=Y[Ie].g;const Dn=Y[Ie].map;if(tt-=qt,tt<0)qt=Math.max(0,Y[Ie].g-100),ae=!1;else try{tt="req"+tt+"_"||"";try{var Tt=Dn instanceof Map?Dn:Object.entries(Dn);for(const[vi,ni]of Tt){let ii=ni;g(ni)&&(ii=rt(ni)),ve.push(tt+vi+"="+encodeURIComponent(ii))}}catch(vi){throw ve.push(tt+"type="+encodeURIComponent("_badmap")),vi}}catch{A&&A(Dn)}}if(ae){Tt=ve.join("&");break t}}Tt=void 0}return u=u.i.splice(0,_),m.G=u,Tt}function Pl(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;et||w(),K||(et(),K=!0),N.add(m,u),u.A=0}}function lo(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=or(y(u.Da,u),zl(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Ul(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=or(y(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ee(10),yi(this),Ul(this))};function uo(u){u.B!=null&&(p.clearTimeout(u.B),u.B=null)}function Ul(u){u.g=new Jn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Se(u.na);ce(m,"RID","rpc"),ce(m,"SID",u.M),ce(m,"AID",u.K),ce(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ce(m,"TO",u.ia),ce(m,"TYPE","xmlhttp"),_s(u,m),u.u&&u.o&&Bn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Li(Se(m)),_.u=null,_.R=!0,cr(_,u)}s.Va=function(){this.C!=null&&(this.C=null,yi(this),lo(this),Ee(19))};function ia(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function co(u,m){var _=null;if(u.g==m){ia(u),uo(u),u.g=null;var A=2}else if(as(u.h,m))_=m.G,zi(u.h,m),A=1;else return;if(u.I!=0){if(m.o)if(A==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var Y=u.D;A=He(),be(A,new Jr(A,_)),vs(u)}else Pl(u);else if(Y=m.m,Y==3||Y==0&&m.X>0||!(A==1&&Fc(u,m)||A==2&&lo(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),Y){case 1:Hi(u,5);break;case 4:Hi(u,10);break;case 3:Hi(u,6);break;default:Hi(u,2)}}}function zl(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function Hi(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),A=u.Ua;const Y=!A;A=new ti(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||fr(A,"https"),Li(A),Y?ao(A.toString(),_):mr(A.toString(),_)}else Ee(2);u.I=0,u.l&&u.l.pa(m),Ll(u),ys(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function Ll(u){if(u.I=0,u.ja=[],u.l){const m=Zs(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ja,m),q(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Bl(u,m,_){var A=_ instanceof ti?Se(_):new ti(_);if(A.g!="")m&&(A.g=m+"."+A.g),os(A,A.u);else{var Y=p.location;A=Y.protocol,m=m?m+"."+Y.hostname:Y.hostname,Y=+Y.port;const tt=new ti(null);A&&fr(tt,A),m&&(tt.g=m),Y&&os(tt,Y),_&&(tt.h=_),A=tt}return _=u.G,m=u.wa,_&&m&&ce(A,_,m),ce(A,"VER",u.ka),_s(u,A),A}function ra(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ge(new us({ab:_})):new ge(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ql(){}s=ql.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function sa(){}sa.prototype.g=function(u,m){return new vn(u,m)};function vn(u,m){ue.call(this),this.g=new ea(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!S(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!S(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new vr(this)}C(vn,ue),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){gs(this.g)},vn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=rt(u),u=_);m.i.push(new qc(m.Ya++,u)),m.I==3&&vs(m)},vn.prototype.N=function(){this.g.l=null,delete this.j,gs(this.g),delete this.g,vn.Z.N.call(this)};function ho(u){Bt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}C(ho,Bt);function Hl(){jt.call(this),this.status=1}C(Hl,jt);function vr(u){this.g=u}C(vr,ql),vr.prototype.ra=function(){be(this.g,"a")},vr.prototype.qa=function(u){be(this.g,new ho(u))},vr.prototype.pa=function(u){be(this.g,new Hl)},vr.prototype.oa=function(){be(this.g,"b")},sa.prototype.createWebChannel=sa.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,hv=function(){return new sa},cv=function(){return He()},uv=At,id={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,$u=Ne,en.COMPLETE="complete",lv=en,wt.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",ue.prototype.listen=ue.prototype.J,il=wt,ge.prototype.listenOnce=ge.prototype.K,ge.prototype.getLastError=ge.prototype.Ha,ge.prototype.getLastErrorCode=ge.prototype.ya,ge.prototype.getStatus=ge.prototype.ca,ge.prototype.getResponseJson=ge.prototype.La,ge.prototype.getResponseText=ge.prototype.la,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Fa,ov=ge}).apply(typeof Fu<"u"?Fu:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore",zy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new $0("@firebase/firestore");function Va(){return Bs.logLevel}function Ct(s,...e){if(Bs.logLevel<=ee.DEBUG){const i=e.map(Td);Bs.debug(`Firestore (${Ka}): ${s}`,...i)}}function rr(s,...e){if(Bs.logLevel<=ee.ERROR){const i=e.map(Td);Bs.error(`Firestore (${Ka}): ${s}`,...i)}}function qa(s,...e){if(Bs.logLevel<=ee.WARN){const i=e.map(Td);Bs.warn(`Firestore (${Ka}): ${s}`,...i)}}function Td(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,fv(s,a,i)}function fv(s,e,i){let a=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw rr(a),new Error(a)}function se(s,e,i,a){let l="Unexpected state";typeof i=="string"?l=i:a=i,s||fv(e,l,a)}function Ht(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends Hs{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(pn.UNAUTHENTICATED)))}shutdown(){}}class HE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class FE{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){se(this.o===void 0,42304);let a=this.i;const l=v=>this.i!==a?(a=this.i,i(v)):Promise.resolve();let h=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ps,e.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const v=h;e.enqueueRetryable((async()=>{await v.promise,await l(this.currentUser)}))},g=v=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ps)}}),0),p()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(se(typeof a.accessToken=="string",31837,{l:a}),new dv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class GE{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YE{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new GE(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QE{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){se(this.o===void 0,3512);const a=h=>{h.error!=null&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,Ct("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>a(h)))};const l=h=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>l(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ly(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(se(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Ly(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=KE(40);for(let h=0;h<l.length;++h)a.length<20&&l[h]<i&&(a+=e.charAt(l[h]%62))}return a}}function $t(s,e){return s<e?-1:s>e?1:0}function rd(s,e){const i=Math.min(s.length,e.length);for(let a=0;a<i;a++){const l=s.charAt(a),h=e.charAt(a);if(l!==h)return Yf(l)===Yf(h)?$t(l,h):Yf(l)?1:-1}return $t(s.length,e.length)}const XE=55296,$E=57343;function Yf(s){const e=s.charCodeAt(0);return e>=XE&&e<=$E}function Ha(s,e,i){return s.length===e.length&&s.every(((a,l)=>i(a,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="__name__";class Si{constructor(e,i,a){i===void 0?i=0:i>e.length&&Pt(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&Pt(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let l=0;l<a;l++){const h=Si.compareSegments(e.get(l),i.get(l));if(h!==0)return h}return $t(e.length,i.length)}static compareSegments(e,i){const a=Si.isNumericId(e),l=Si.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?Si.extractNumericId(e).compare(Si.extractNumericId(i)):rd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fr.fromString(e.substring(4,e.length-2))}}class _e extends Si{construct(e,i,a){return new _e(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new It(pt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((l=>l.length>0)))}return new _e(i)}static emptyPath(){return new _e([])}}const ZE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Si{construct(e,i,a){return new on(e,i,a)}static isValidIdentifier(e){return ZE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===By}static keyField(){return new on([By])}static fromServerFormat(e){const i=[];let a="",l=0;const h=()=>{if(a.length===0)throw new It(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let p=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new It(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new It(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=v,l+=2}else g==="`"?(p=!p,l++):g!=="."||p?(a+=g,l++):(h(),l++)}if(h(),p)throw new It(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(i)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.path=e}static fromPath(e){return new Vt(_e.fromString(e))}static fromName(e){return new Vt(_e.fromString(e).popFirst(5))}static empty(){return new Vt(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return _e.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vt(new _e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(s,e,i){if(!i)throw new It(pt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function WE(s,e,i,a){if(e===!0&&a===!0)throw new It(pt.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function qy(s){if(!Vt.isDocumentKey(s))throw new It(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Hy(s){if(Vt.isDocumentKey(s))throw new It(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function mv(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ad(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Pt(12329,{type:typeof s})}function Us(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new It(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Ad(s);throw new It(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(s,e){const i={typeString:s};return e&&(i.value=e),i}function bl(s,e){if(!mv(s))throw new It(pt.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const l=e[a].typeString,h="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){i=`JSON missing required field: '${a}'`;break}const p=s[a];if(l&&typeof p!==l){i=`JSON field '${a}' must be a ${l}.`;break}if(h!==void 0&&p!==h.value){i=`Expected '${a}' field to equal '${h.value}'`;break}}if(i)throw new It(pt.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=-62135596800,Gy=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Gy);return new xe(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new It(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new It(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Fy)throw new It(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gy}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bl(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:ze("string",xe._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new xe(0,0))}static max(){return new Lt(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function JE(s,e){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,l=Lt.fromTimestamp(a===1e9?new xe(i+1,0):new xe(i,a));return new Yr(l,Vt.empty(),e)}function tT(s){return new Yr(s.readTime,s.key,pl)}class Yr{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new Yr(Lt.min(),Vt.empty(),pl)}static max(){return new Yr(Lt.max(),Vt.empty(),pl)}}function eT(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=Vt.comparator(s.documentKey,e.documentKey),i!==0?i:$t(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(s){if(s.code!==pt.FAILED_PRECONDITION||s.message!==nT)throw s;Ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ct(((a,l)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,l)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof ct?i:ct.resolve(i)}catch(i){return ct.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):ct.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):ct.reject(i)}static resolve(e){return new ct(((i,a)=>{i(e)}))}static reject(e){return new ct(((i,a)=>{a(e)}))}static waitFor(e){return new ct(((i,a)=>{let l=0,h=0,p=!1;e.forEach((g=>{++l,g.next((()=>{++h,p&&h===l&&i()}),(v=>a(v)))})),p=!0,h===l&&i()}))}static or(e){let i=ct.resolve(!1);for(const a of e)i=i.next((l=>l?ct.resolve(l):a()));return i}static forEach(e,i){const a=[];return e.forEach(((l,h)=>{a.push(i.call(this,l,h))})),this.waitFor(a)}static mapArray(e,i){return new ct(((a,l)=>{const h=e.length,p=new Array(h);let g=0;for(let v=0;v<h;v++){const y=v;i(e[y]).next((b=>{p[y]=b,++g,g===h&&a(p)}),(b=>l(b)))}}))}static doWhile(e,i){return new ct(((a,l)=>{const h=()=>{e()===!0?i().next((()=>{h()}),l):a()};h()}))}}function rT(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function $a(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=-1;function Ec(s){return s==null}function ac(s){return s===0&&1/s==-1/0}function sT(s){return typeof s=="number"&&Number.isInteger(s)&&!ac(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="";function aT(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=Yy(e)),e=oT(s.get(i),e);return Yy(e)}function oT(s,e){let i=e;const a=s.length;for(let l=0;l<a;l++){const h=s.charAt(l);switch(h){case"\0":i+="";break;case gv:i+="";break;default:i+=h}}return i}function Yy(s){return s+gv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Fs(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function yv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,i){this.comparator=e,this.root=i||an.EMPTY}insert(e,i){return new we(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,i,a,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&l&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,i,a,l,h){this.key=e,this.value=i,this.color=a??an.RED,this.left=l??an.EMPTY,this.right=h??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,l,h){return new an(e??this.key,i??this.value,a??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let l=this;const h=a(e,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(e,i,a),null):h===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return an.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pt(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt(57766)}get value(){throw Pt(16141)}get color(){throw Pt(16727)}get left(){throw Pt(29726)}get right(){throw Pt(36894)}copy(e,i,a,l,h){return this}insert(e,i,a){return new an(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Ky(this.data.getIterator())}getIteratorFrom(e){return new Ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=a.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Xe(this.comparator);return i.data=e,i}}class Ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new li([])}unionWith(e){let i=new Xe(on.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new li(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new vv("Invalid base64 string: "+h):h}})(e);return new ln(i)}static fromUint8Array(e){const i=(function(l){let h="";for(let p=0;p<l.length;++p)h+=String.fromCharCode(l[p]);return h})(e);return new ln(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const lT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(s){if(se(!!s,39018),typeof s=="string"){let e=0;const i=lT.exec(s);if(se(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Oe(s.seconds),nanos:Oe(s.nanos)}}function Oe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Kr(s){return typeof s=="string"?ln.fromBase64String(s):ln.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="server_timestamp",xv="__type__",bv="__previous_value__",Ev="__local_write_time__";function Cd(s){return(s?.mapValue?.fields||{})[xv]?.stringValue===_v}function Tc(s){const e=s.mapValue.fields[bv];return Cd(e)?Tc(e):e}function ml(s){const e=Qr(s.mapValue.fields[Ev].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,i,a,l,h,p,g,v,y,b){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=b}}const oc="(default)";class gl{constructor(e,i){this.projectId=e,this.database=i||oc}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===oc}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="__type__",cT="__max__",Yu={mapValue:{}},Sv="__vector__",lc="value";function Xr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cd(s)?4:fT(s)?9007199254740991:hT(s)?10:11:Pt(28295,{value:s})}function ji(s,e){if(s===e)return!0;const i=Xr(s);if(i!==Xr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ml(s).isEqual(ml(e));case 3:return(function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const p=Qr(l.timestampValue),g=Qr(h.timestampValue);return p.seconds===g.seconds&&p.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,h){return Kr(l.bytesValue).isEqual(Kr(h.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,h){return Oe(l.geoPointValue.latitude)===Oe(h.geoPointValue.latitude)&&Oe(l.geoPointValue.longitude)===Oe(h.geoPointValue.longitude)})(s,e);case 2:return(function(l,h){if("integerValue"in l&&"integerValue"in h)return Oe(l.integerValue)===Oe(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const p=Oe(l.doubleValue),g=Oe(h.doubleValue);return p===g?ac(p)===ac(g):isNaN(p)&&isNaN(g)}return!1})(s,e);case 9:return Ha(s.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(l,h){const p=l.mapValue.fields||{},g=h.mapValue.fields||{};if(Qy(p)!==Qy(g))return!1;for(const v in p)if(p.hasOwnProperty(v)&&(g[v]===void 0||!ji(p[v],g[v])))return!1;return!0})(s,e);default:return Pt(52216,{left:s})}}function yl(s,e){return(s.values||[]).find((i=>ji(i,e)))!==void 0}function Fa(s,e){if(s===e)return 0;const i=Xr(s),a=Xr(e);if(i!==a)return $t(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return $t(s.booleanValue,e.booleanValue);case 2:return(function(h,p){const g=Oe(h.integerValue||h.doubleValue),v=Oe(p.integerValue||p.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(s,e);case 3:return Xy(s.timestampValue,e.timestampValue);case 4:return Xy(ml(s),ml(e));case 5:return rd(s.stringValue,e.stringValue);case 6:return(function(h,p){const g=Kr(h),v=Kr(p);return g.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(h,p){const g=h.split("/"),v=p.split("/");for(let y=0;y<g.length&&y<v.length;y++){const b=$t(g[y],v[y]);if(b!==0)return b}return $t(g.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(h,p){const g=$t(Oe(h.latitude),Oe(p.latitude));return g!==0?g:$t(Oe(h.longitude),Oe(p.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return $y(s.arrayValue,e.arrayValue);case 10:return(function(h,p){const g=h.fields||{},v=p.fields||{},y=g[lc]?.arrayValue,b=v[lc]?.arrayValue,C=$t(y?.values?.length||0,b?.values?.length||0);return C!==0?C:$y(y,b)})(s.mapValue,e.mapValue);case 11:return(function(h,p){if(h===Yu.mapValue&&p===Yu.mapValue)return 0;if(h===Yu.mapValue)return 1;if(p===Yu.mapValue)return-1;const g=h.fields||{},v=Object.keys(g),y=p.fields||{},b=Object.keys(y);v.sort(),b.sort();for(let C=0;C<v.length&&C<b.length;++C){const V=rd(v[C],b[C]);if(V!==0)return V;const L=Fa(g[v[C]],y[b[C]]);if(L!==0)return L}return $t(v.length,b.length)})(s.mapValue,e.mapValue);default:throw Pt(23264,{he:i})}}function Xy(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return $t(s,e);const i=Qr(s),a=Qr(e),l=$t(i.seconds,a.seconds);return l!==0?l:$t(i.nanos,a.nanos)}function $y(s,e){const i=s.values||[],a=e.values||[];for(let l=0;l<i.length&&l<a.length;++l){const h=Fa(i[l],a[l]);if(h)return h}return $t(i.length,a.length)}function Ga(s){return sd(s)}function sd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const a=Qr(i);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Kr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return Vt.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let a="[",l=!0;for(const h of i.values||[])l?l=!1:a+=",",a+=sd(h);return a+"]"})(s.arrayValue):"mapValue"in s?(function(i){const a=Object.keys(i.fields||{}).sort();let l="{",h=!0;for(const p of a)h?h=!1:l+=",",l+=`${p}:${sd(i.fields[p])}`;return l+"}"})(s.mapValue):Pt(61005,{value:s})}function Zu(s){switch(Xr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tc(s);return e?16+Zu(e):16;case 5:return 2*s.stringValue.length;case 6:return Kr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,h)=>l+Zu(h)),0)})(s.arrayValue);case 10:case 11:return(function(a){let l=0;return Fs(a.fields,((h,p)=>{l+=h.length+Zu(p)})),l})(s.mapValue);default:throw Pt(13486,{value:s})}}function ad(s){return!!s&&"integerValue"in s}function Rd(s){return!!s&&"arrayValue"in s}function Zy(s){return!!s&&"nullValue"in s}function Wy(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Wu(s){return!!s&&"mapValue"in s}function hT(s){return(s?.mapValue?.fields||{})[Tv]?.stringValue===Sv}function ll(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Fs(s.mapValue.fields,((i,a)=>e.mapValue.fields[i]=ll(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=ll(s.arrayValue.values[i]);return e}return{...s}}function fT(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===cT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Wu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(i)}setAll(e){let i=on.emptyPath(),a={},l=[];e.forEach(((p,g)=>{if(!i.isImmediateParentOf(g)){const v=this.getFieldsMap(i);this.applyChanges(v,a,l),a={},l=[],i=g.popLast()}p?a[g.lastSegment()]=ll(p):l.push(g.lastSegment())}));const h=this.getFieldsMap(i);this.applyChanges(h,a,l)}delete(e){const i=this.field(e.popLast());Wu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=i.mapValue.fields[e.get(a)];Wu(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,a){Fs(i,((l,h)=>e[l]=h));for(const l of a)delete e[l]}clone(){return new Zn(ll(this.value))}}function Av(s){const e=[];return Fs(s.fields,((i,a)=>{const l=new on([i]);if(Wu(a)){const h=Av(a.mapValue).fields;if(h.length===0)e.push(l);else for(const p of h)e.push(l.child(p))}else e.push(l)})),new li(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,i,a,l,h,p,g){this.key=e,this.documentType=i,this.version=a,this.readTime=l,this.createTime=h,this.data=p,this.documentState=g}static newInvalidDocument(e){return new mn(e,0,Lt.min(),Lt.min(),Lt.min(),Zn.empty(),0)}static newFoundDocument(e,i,a,l){return new mn(e,1,i,Lt.min(),a,l,0)}static newNoDocument(e,i){return new mn(e,2,i,Lt.min(),Lt.min(),Zn.empty(),0)}static newUnknownDocument(e,i){return new mn(e,3,i,Lt.min(),Lt.min(),Zn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,i){this.position=e,this.inclusive=i}}function Jy(s,e,i){let a=0;for(let l=0;l<s.position.length;l++){const h=e[l],p=s.position[l];if(h.field.isKeyField()?a=Vt.comparator(Vt.fromName(p.referenceValue),i.key):a=Fa(p,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function t0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!ji(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,i="asc"){this.field=e,this.dir=i}}function dT(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{}class Qe extends wv{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new mT(e,i,a):i==="array-contains"?new vT(e,a):i==="in"?new _T(e,a):i==="not-in"?new xT(e,a):i==="array-contains-any"?new bT(e,a):new Qe(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new gT(e,a):new yT(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Fa(i,this.value)):i!==null&&Xr(this.value)===Xr(i)&&this.matchesComparison(Fa(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends wv{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new Ii(e,i)}matches(e){return Cv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Cv(s){return s.op==="and"}function Rv(s){return pT(s)&&Cv(s)}function pT(s){for(const e of s.filters)if(e instanceof Ii)return!1;return!0}function od(s){if(s instanceof Qe)return s.field.canonicalString()+s.op.toString()+Ga(s.value);if(Rv(s))return s.filters.map((e=>od(e))).join(",");{const e=s.filters.map((i=>od(i))).join(",");return`${s.op}(${e})`}}function Dv(s,e){return s instanceof Qe?(function(a,l){return l instanceof Qe&&a.op===l.op&&a.field.isEqual(l.field)&&ji(a.value,l.value)})(s,e):s instanceof Ii?(function(a,l){return l instanceof Ii&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((h,p,g)=>h&&Dv(p,l.filters[g])),!0):!1})(s,e):void Pt(19439)}function Nv(s){return s instanceof Qe?(function(i){return`${i.field.canonicalString()} ${i.op} ${Ga(i.value)}`})(s):s instanceof Ii?(function(i){return i.op.toString()+" {"+i.getFilters().map(Nv).join(" ,")+"}"})(s):"Filter"}class mT extends Qe{constructor(e,i,a){super(e,i,a),this.key=Vt.fromName(a.referenceValue)}matches(e){const i=Vt.comparator(e.key,this.key);return this.matchesComparison(i)}}class gT extends Qe{constructor(e,i){super(e,"in",i),this.keys=jv("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class yT extends Qe{constructor(e,i){super(e,"not-in",i),this.keys=jv("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function jv(s,e){return(e.arrayValue?.values||[]).map((i=>Vt.fromName(i.referenceValue)))}class vT extends Qe{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Rd(i)&&yl(i.arrayValue,this.value)}}class _T extends Qe{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&yl(this.value.arrayValue,i)}}class xT extends Qe{constructor(e,i){super(e,"not-in",i)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!yl(this.value.arrayValue,i)}}class bT extends Qe{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Rd(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>yl(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,i=null,a=[],l=[],h=null,p=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=h,this.startAt=p,this.endAt=g,this.Te=null}}function e0(s,e=null,i=[],a=[],l=null,h=null,p=null){return new ET(s,e,i,a,l,h,p)}function Dd(s){const e=Ht(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>od(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(h){return h.field.canonicalString()+h.dir})(a))).join(","),Ec(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>Ga(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>Ga(a))).join(",")),e.Te=i}return e.Te}function Nd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!dT(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!Dv(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!t0(s.startAt,e.startAt)&&t0(s.endAt,e.endAt)}function ld(s){return Vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,i=null,a=[],l=[],h=null,p="F",g=null,v=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=h,this.limitType=p,this.startAt=g,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TT(s,e,i,a,l,h,p,g){return new Sc(s,e,i,a,l,h,p,g)}function jd(s){return new Sc(s)}function n0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function ST(s){return s.collectionGroup!==null}function ul(s){const e=Ht(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let g=new Xe(on.comparator);return p.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new cc(h,a))})),i.has(on.keyField().canonicalString())||e.Ie.push(new cc(on.keyField(),a))}return e.Ie}function wi(s){const e=Ht(s);return e.Ee||(e.Ee=AT(e,ul(s))),e.Ee}function AT(s,e){if(s.limitType==="F")return e0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const h=l.dir==="desc"?"asc":"desc";return new cc(l.field,h)}));const i=s.endAt?new uc(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new uc(s.startAt.position,s.startAt.inclusive):null;return e0(s.path,s.collectionGroup,e,s.filters,s.limit,i,a)}}function ud(s,e,i){return new Sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Ac(s,e){return Nd(wi(s),wi(e))&&s.limitType===e.limitType}function Iv(s){return`${Dd(wi(s))}|lt:${s.limitType}`}function Oa(s){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((l=>Nv(l))).join(", ")}]`),Ec(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((l=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(l))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((l=>Ga(l))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((l=>Ga(l))).join(",")),`Target(${a})`})(wi(s))}; limitType=${s.limitType})`}function wc(s,e){return e.isFoundDocument()&&(function(a,l){const h=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):Vt.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)})(s,e)&&(function(a,l){for(const h of ul(a))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0})(s,e)&&(function(a,l){for(const h of a.filters)if(!h.matches(l))return!1;return!0})(s,e)&&(function(a,l){return!(a.startAt&&!(function(p,g,v){const y=Jy(p,g,v);return p.inclusive?y<=0:y<0})(a.startAt,ul(a),l)||a.endAt&&!(function(p,g,v){const y=Jy(p,g,v);return p.inclusive?y>=0:y>0})(a.endAt,ul(a),l))})(s,e)}function wT(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Mv(s){return(e,i)=>{let a=!1;for(const l of ul(s)){const h=CT(l,e,i);if(h!==0)return h;a=a||l.field.isKeyField()}return 0}}function CT(s,e,i){const a=s.field.isKeyField()?Vt.comparator(e.key,i.key):(function(h,p,g){const v=p.data.field(h),y=g.data.field(h);return v!==null&&y!==null?Fa(v,y):Pt(42886)})(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Pt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[l,h]of a)if(this.equalsFn(l,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return void(l[h]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((i,a)=>{for(const[l,h]of a)e(l,h)}))}isEmpty(){return yv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new we(Vt.comparator);function sr(){return RT}const Vv=new we(Vt.comparator);function rl(...s){let e=Vv;for(const i of s)e=e.insert(i.key,i);return e}function Ov(s){let e=Vv;return s.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function ks(){return cl()}function kv(){return cl()}function cl(){return new Gs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const DT=new we(Vt.comparator),NT=new Xe(Vt.comparator);function Zt(...s){let e=NT;for(const i of s)e=e.add(i);return e}const jT=new Xe($t);function IT(){return jT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function Pv(s){return{integerValue:""+s}}function MT(s,e){return sT(e)?Pv(e):Id(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this._=void 0}}function VT(s,e,i){return s instanceof hc?(function(l,h){const p={fields:{[xv]:{stringValue:_v},[Ev]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&Cd(h)&&(h=Tc(h)),h&&(p.fields[bv]=h),{mapValue:p}})(i,e):s instanceof vl?zv(s,e):s instanceof _l?Lv(s,e):(function(l,h){const p=Uv(l,h),g=i0(p)+i0(l.Ae);return ad(p)&&ad(l.Ae)?Pv(g):Id(l.serializer,g)})(s,e)}function OT(s,e,i){return s instanceof vl?zv(s,e):s instanceof _l?Lv(s,e):i}function Uv(s,e){return s instanceof fc?(function(a){return ad(a)||(function(h){return!!h&&"doubleValue"in h})(a)})(e)?e:{integerValue:0}:null}class hc extends Cc{}class vl extends Cc{constructor(e){super(),this.elements=e}}function zv(s,e){const i=Bv(e);for(const a of s.elements)i.some((l=>ji(l,a)))||i.push(a);return{arrayValue:{values:i}}}class _l extends Cc{constructor(e){super(),this.elements=e}}function Lv(s,e){let i=Bv(e);for(const a of s.elements)i=i.filter((l=>!ji(l,a)));return{arrayValue:{values:i}}}class fc extends Cc{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function i0(s){return Oe(s.integerValue||s.doubleValue)}function Bv(s){return Rd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function kT(s,e){return s.field.isEqual(e.field)&&(function(a,l){return a instanceof vl&&l instanceof vl||a instanceof _l&&l instanceof _l?Ha(a.elements,l.elements,ji):a instanceof fc&&l instanceof fc?ji(a.Ae,l.Ae):a instanceof hc&&l instanceof hc})(s.transform,e.transform)}class PT{constructor(e,i){this.version=e,this.transformResults=i}}class Ci{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Rc{}function qv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Md(s.key,Ci.none()):new El(s.key,s.data,Ci.none());{const i=s.data,a=Zn.empty();let l=new Xe(on.comparator);for(let h of e.fields)if(!l.has(h)){let p=i.field(h);p===null&&h.length>1&&(h=h.popLast(),p=i.field(h)),p===null?a.delete(h):a.set(h,p),l=l.add(h)}return new Ys(s.key,a,new li(l.toArray()),Ci.none())}}function UT(s,e,i){s instanceof El?(function(l,h,p){const g=l.value.clone(),v=s0(l.fieldTransforms,h,p.transformResults);g.setAll(v),h.convertToFoundDocument(p.version,g).setHasCommittedMutations()})(s,e,i):s instanceof Ys?(function(l,h,p){if(!Ju(l.precondition,h))return void h.convertToUnknownDocument(p.version);const g=s0(l.fieldTransforms,h,p.transformResults),v=h.data;v.setAll(Hv(l)),v.setAll(g),h.convertToFoundDocument(p.version,v).setHasCommittedMutations()})(s,e,i):(function(l,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,i)}function hl(s,e,i,a){return s instanceof El?(function(h,p,g,v){if(!Ju(h.precondition,p))return g;const y=h.value.clone(),b=a0(h.fieldTransforms,v,p);return y.setAll(b),p.convertToFoundDocument(p.version,y).setHasLocalMutations(),null})(s,e,i,a):s instanceof Ys?(function(h,p,g,v){if(!Ju(h.precondition,p))return g;const y=a0(h.fieldTransforms,v,p),b=p.data;return b.setAll(Hv(h)),b.setAll(y),p.convertToFoundDocument(p.version,b).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((C=>C.field)))})(s,e,i,a):(function(h,p,g){return Ju(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):g})(s,e,i)}function zT(s,e){let i=null;for(const a of s.fieldTransforms){const l=e.data.field(a.field),h=Uv(a.transform,l||null);h!=null&&(i===null&&(i=Zn.empty()),i.set(a.field,h))}return i||null}function r0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Ha(a,l,((h,p)=>kT(h,p)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class El extends Rc{constructor(e,i,a,l=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ys extends Rc{constructor(e,i,a,l,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Hv(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}})),e}function s0(s,e,i){const a=new Map;se(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const h=s[l],p=h.transform,g=e.data.field(h.field);a.set(h.field,OT(p,g,i[l]))}return a}function a0(s,e,i){const a=new Map;for(const l of s){const h=l.transform,p=i.data.field(l.field);a.set(l.field,VT(h,p,e))}return a}class Md extends Rc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends Rc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,i,a,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(e.key)&&UT(h,e,a[l])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=hl(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=hl(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=kv();return this.mutations.forEach((l=>{const h=e.get(l.key),p=h.overlayedDocument;let g=this.applyToLocalView(p,h.mutatedFields);g=i.has(l.key)?null:g;const v=qv(p,g);v!==null&&a.set(l.key,v),p.isValidDocument()||p.convertToNoDocument(Lt.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Zt())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,((i,a)=>r0(i,a)))&&Ha(this.baseMutations,e.baseMutations,((i,a)=>r0(i,a)))}}class Vd{constructor(e,i,a,l){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(e,i,a){se(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return DT})();const h=e.mutations;for(let p=0;p<h.length;p++)l=l.insert(h[p].key,a[p].version);return new Vd(e,i,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,te;function FT(s){switch(s){case pt.OK:return Pt(64938);case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0;default:return Pt(15467,{code:s})}}function Fv(s){if(s===void 0)return rr("GRPC error has no .code"),pt.UNKNOWN;switch(s){case Ue.OK:return pt.OK;case Ue.CANCELLED:return pt.CANCELLED;case Ue.UNKNOWN:return pt.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return pt.INTERNAL;case Ue.UNAVAILABLE:return pt.UNAVAILABLE;case Ue.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case Ue.NOT_FOUND:return pt.NOT_FOUND;case Ue.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case Ue.ABORTED:return pt.ABORTED;case Ue.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case Ue.DATA_LOSS:return pt.DATA_LOSS;default:return Pt(39323,{code:s})}}(te=Ue||(Ue={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Fr([4294967295,4294967295],0);function o0(s){const e=GT().encode(s),i=new av;return i.update(e),new Uint8Array(i.digest())}function l0(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Fr([i,a],0),new Fr([l,h],0)]}class Od{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new sl(`Invalid padding: ${i}`);if(a<0)throw new sl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new sl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new sl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=Fr.fromNumber(this.ge)}ye(e,i,a){let l=e.add(i.multiply(Fr.fromNumber(a)));return l.compare(YT)===1&&(l=new Fr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=o0(e),[a,l]=l0(i);for(let h=0;h<this.hashCount;h++){const p=this.ye(a,l,h);if(!this.we(p))return!1}return!0}static create(e,i,a){const l=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),p=new Od(h,l,i);return a.forEach((g=>p.insert(g))),p}insert(e){if(this.ge===0)return;const i=o0(e),[a,l]=l0(i);for(let h=0;h<this.hashCount;h++){const p=this.ye(a,l,h);this.Se(p)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,i,a,l,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const l=new Map;return l.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Dc(Lt.min(),l,new we($t),sr(),Zt())}}class Tl{constructor(e,i,a,l,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new Tl(a,i,Zt(),Zt(),Zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,i,a,l){this.be=e,this.removedTargetIds=i,this.key=a,this.De=l}}class Gv{constructor(e,i){this.targetId=e,this.Ce=i}}class Yv{constructor(e,i,a=ln.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=l}}class u0{constructor(){this.ve=0,this.Fe=c0(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Zt(),i=Zt(),a=Zt();return this.Fe.forEach(((l,h)=>{switch(h){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:Pt(38017,{changeType:h})}})),new Tl(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=c0()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QT{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=Qu(),this.He=Qu(),this.Ye=new we($t)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:Pt(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,a=e.Ce.count,l=this.ot(i);if(l){const h=l.target;if(ld(h))if(a===0){const p=new Vt(h.path);this.et(i,p,mn.newNoDocument(p,Lt.min()))}else se(a===1,20013,{expectedCount:a});else{const p=this._t(i);if(p!==a){const g=this.ut(e),v=g?this.ct(g,e,p):1;if(v!==0){this.it(i);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:h=0}=i;let p,g;try{p=Kr(a).toUint8Array()}catch(v){if(v instanceof vv)return qa("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Od(p,l,h)}catch(v){return qa(v instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.ge===0?null:g}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let l=0;return a.forEach((h=>{const p=this.Ge.ht(),g=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.et(i,h,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((h,p)=>{const g=this.ot(p);if(g){if(h.current&&ld(g.target)){const v=new Vt(g.target.path);this.It(v).has(p)||this.Et(p,v)||this.et(p,v,mn.newNoDocument(v,e))}h.Be&&(i.set(p,h.ke()),h.qe())}}));let a=Zt();this.He.forEach(((h,p)=>{let g=!0;p.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(e)));const l=new Dc(e,i,this.Ye,this.je,a);return this.je=sr(),this.Je=Qu(),this.He=Qu(),this.Ye=new we($t),l}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new u0,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Xe($t),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Xe($t),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||Ct("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u0),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function Qu(){return new we(Vt.comparator)}function c0(){return new we(Vt.comparator)}const KT={asc:"ASCENDING",desc:"DESCENDING"},XT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$T={and:"AND",or:"OR"};class ZT{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function cd(s,e){return s.useProto3Json||Ec(e)?e:{value:e}}function dc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function WT(s,e){return dc(s,e.toTimestamp())}function Ri(s){return se(!!s,49232),Lt.fromTimestamp((function(i){const a=Qr(i);return new xe(a.seconds,a.nanos)})(s))}function kd(s,e){return hd(s,e).canonicalString()}function hd(s,e){const i=(function(l){return new _e(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function Kv(s){const e=_e.fromString(s);return se(Jv(e),10190,{key:e.toString()}),e}function fd(s,e){return kd(s.databaseId,e.path)}function Qf(s,e){const i=Kv(e);if(i.get(1)!==s.databaseId.projectId)throw new It(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new It(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Vt($v(i))}function Xv(s,e){return kd(s.databaseId,e)}function JT(s){const e=Kv(s);return e.length===4?_e.emptyPath():$v(e)}function dd(s){return new _e(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function $v(s){return se(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function h0(s,e,i){return{name:fd(s,e),fields:i.value.mapValue.fields}}function tS(s,e){let i;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Pt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],h=(function(y,b){return y.useProto3Json?(se(b===void 0||typeof b=="string",58123),ln.fromBase64String(b||"")):(se(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),ln.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),p=e.targetChange.cause,g=p&&(function(y){const b=y.code===void 0?pt.UNKNOWN:Fv(y.code);return new It(b,y.message||"")})(p);i=new Yv(a,l,h,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=Qf(s,a.document.name),h=Ri(a.document.updateTime),p=a.document.createTime?Ri(a.document.createTime):Lt.min(),g=new Zn({mapValue:{fields:a.document.fields}}),v=mn.newFoundDocument(l,h,p,g),y=a.targetIds||[],b=a.removedTargetIds||[];i=new tc(y,b,v.key,v)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=Qf(s,a.document),h=a.readTime?Ri(a.readTime):Lt.min(),p=mn.newNoDocument(l,h),g=a.removedTargetIds||[];i=new tc([],g,p.key,p)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=Qf(s,a.document),h=a.removedTargetIds||[];i=new tc([],h,l,null)}else{if(!("filter"in e))return Pt(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:h}=a,p=new HT(l,h),g=a.targetId;i=new Gv(g,p)}}return i}function eS(s,e){let i;if(e instanceof El)i={update:h0(s,e.key,e.value)};else if(e instanceof Md)i={delete:fd(s,e.key)};else if(e instanceof Ys)i={update:h0(s,e.key,e.data),updateMask:cS(e.fieldMask)};else{if(!(e instanceof LT))return Pt(16599,{Vt:e.type});i={verify:fd(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(h,p){const g=p.transform;if(g instanceof hc)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof vl)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof _l)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof fc)return{fieldPath:p.field.canonicalString(),increment:g.Ae};throw Pt(20930,{transform:p.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(l,h){return h.updateTime!==void 0?{updateTime:WT(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Pt(27497)})(s,e.precondition)),i}function nS(s,e){return s&&s.length>0?(se(e!==void 0,14353),s.map((i=>(function(l,h){let p=l.updateTime?Ri(l.updateTime):Ri(h);return p.isEqual(Lt.min())&&(p=Ri(h)),new PT(p,l.transformResults||[])})(i,e)))):[]}function iS(s,e){return{documents:[Xv(s,e.path)]}}function rS(s,e){const i={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=Xv(s,l);const h=(function(y){if(y.length!==0)return Wv(Ii.create(y,"and"))})(e.filters);h&&(i.structuredQuery.where=h);const p=(function(y){if(y.length!==0)return y.map((b=>(function(V){return{field:ka(V.field),direction:oS(V.dir)}})(b)))})(e.orderBy);p&&(i.structuredQuery.orderBy=p);const g=cd(s,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:i,parent:l}}function sS(s){let e=JT(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){se(a===1,65062);const b=i.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let h=[];i.where&&(h=(function(C){const V=Zv(C);return V instanceof Ii&&Rv(V)?V.getFilters():[V]})(i.where));let p=[];i.orderBy&&(p=(function(C){return C.map((V=>(function(q){return new cc(Pa(q.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(V)))})(i.orderBy));let g=null;i.limit&&(g=(function(C){let V;return V=typeof C=="object"?C.value:C,Ec(V)?null:V})(i.limit));let v=null;i.startAt&&(v=(function(C){const V=!!C.before,L=C.values||[];return new uc(L,V)})(i.startAt));let y=null;return i.endAt&&(y=(function(C){const V=!C.before,L=C.values||[];return new uc(L,V)})(i.endAt)),TT(e,l,p,h,g,"F",v,y)}function aS(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pt(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Zv(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Pa(i.unaryFilter.field);return Qe.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Pa(i.unaryFilter.field);return Qe.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Pa(i.unaryFilter.field);return Qe.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Pa(i.unaryFilter.field);return Qe.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pt(61313);default:return Pt(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Qe.create(Pa(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pt(58110);default:return Pt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return Ii.create(i.compositeFilter.filters.map((a=>Zv(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Pt(1026)}})(i.compositeFilter.op))})(s):Pt(30097,{filter:s})}function oS(s){return KT[s]}function lS(s){return XT[s]}function uS(s){return $T[s]}function ka(s){return{fieldPath:s.canonicalString()}}function Pa(s){return on.fromServerFormat(s.fieldPath)}function Wv(s){return s instanceof Qe?(function(i){if(i.op==="=="){if(Wy(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NAN"}};if(Zy(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Wy(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NOT_NAN"}};if(Zy(i.value))return{unaryFilter:{field:ka(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(i.field),op:lS(i.op),value:i.value}}})(s):s instanceof Ii?(function(i){const a=i.getFilters().map((l=>Wv(l)));return a.length===1?a[0]:{compositeFilter:{op:uS(i.op),filters:a}}})(s):Pt(54877,{filter:s})}function cS(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Jv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,i,a,l,h=Lt.min(),p=Lt.min(),g=ln.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.yt=e}}function fS(s){const e=sS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Cn=new pS}addToCollectionParentIndex(e,i){return this.Cn.add(i),ct.resolve()}getCollectionParents(e,i){return ct.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return ct.resolve()}deleteFieldIndex(e,i){return ct.resolve()}deleteAllFieldIndexes(e){return ct.resolve()}createTargetIndexes(e,i){return ct.resolve()}getDocumentsMatchingTarget(e,i){return ct.resolve(null)}getIndexType(e,i){return ct.resolve(0)}getFieldIndexes(e,i){return ct.resolve([])}getNextCollectionGroupToUpdate(e){return ct.resolve(null)}getMinOffset(e,i){return ct.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,i){return ct.resolve(Yr.min())}updateCollectionGroup(e,i,a){return ct.resolve()}updateIndexEntries(e,i){return ct.resolve()}}class pS{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i]||new Xe(_e.comparator),h=!l.has(a);return this.index[i]=l.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(e){return(this.index[e]||new Xe(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},t_=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(t_,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="LruGarbageCollector",mS=1048576;function p0([s,e],[i,a]){const l=$t(s,i);return l===0?$t(e,a):l}class gS{constructor(e){this.Ir=e,this.buffer=new Xe(p0),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();p0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class yS{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ct(d0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){$a(i)?Ct(d0,"Ignoring IndexedDB error during garbage collection: ",i):await Xa(i)}await this.Vr(3e5)}))}}class vS{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return ct.resolve(bc.ce);const a=new gS(i);return this.mr.forEachTarget(e,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(Ct("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(f0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,l,h,p,g,v,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(Ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,p=Date.now(),this.nthSequenceNumber(e,l)))).next((C=>(a=C,g=Date.now(),this.removeTargets(e,a,i)))).next((C=>(h=C,v=Date.now(),this.removeOrphanedDocuments(e,a)))).next((C=>(y=Date.now(),Va()<=ee.DEBUG&&Ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-b}ms
	Determined least recently used ${l} in `+(g-p)+`ms
	Removed ${h} targets in `+(v-g)+`ms
	Removed ${C} documents in `+(y-v)+`ms
Total Duration: ${y-b}ms`),ct.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:C}))))}}function _S(s,e){return new vS(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.changes=new Gs((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?ct.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,i,a,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(a!==null&&hl(a.mutation,l,li.empty(),xe.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,Zt()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=Zt()){const l=ks();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,a).next((h=>{let p=rl();return h.forEach(((g,v)=>{p=p.insert(g,v.overlayedDocument)})),p}))))}getOverlayedDocuments(e,i){const a=ks();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,Zt())))}populateOverlays(e,i,a){const l=[];return a.forEach((h=>{i.has(h)||l.push(h)})),this.documentOverlayCache.getOverlays(e,l).next((h=>{h.forEach(((p,g)=>{i.set(p,g)}))}))}computeViews(e,i,a,l){let h=sr();const p=cl(),g=(function(){return cl()})();return i.forEach(((v,y)=>{const b=a.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof Ys)?h=h.insert(y.key,y):b!==void 0?(p.set(y.key,b.mutation.getFieldMask()),hl(b.mutation,y,b.mutation.getFieldMask(),xe.now())):p.set(y.key,li.empty())})),this.recalculateAndSaveOverlays(e,h).next((v=>(v.forEach(((y,b)=>p.set(y,b))),i.forEach(((y,b)=>g.set(y,new bS(b,p.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,i){const a=cl();let l=new we(((p,g)=>p-g)),h=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((p=>{for(const g of p)g.keys().forEach((v=>{const y=i.get(v);if(y===null)return;let b=a.get(v)||li.empty();b=g.applyToLocalView(y,b),a.set(v,b);const C=(l.get(g.batchId)||Zt()).add(v);l=l.insert(g.batchId,C)}))})).next((()=>{const p=[],g=l.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),y=v.key,b=v.value,C=kv();b.forEach((V=>{if(!h.has(V)){const L=qv(i.get(V),a.get(V));L!==null&&C.set(V,L),h=h.add(V)}})),p.push(this.documentOverlayCache.saveOverlays(e,y,C))}return ct.waitFor(p)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,l){return(function(p){return Vt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):ST(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,l):this.getDocumentsMatchingCollectionQuery(e,i,a,l)}getNextDocuments(e,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,l).next((h=>{const p=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,l-h.size):ct.resolve(ks());let g=pl,v=h;return p.next((y=>ct.forEach(y,((b,C)=>(g<C.largestBatchId&&(g=C.largestBatchId),h.get(b)?ct.resolve():this.remoteDocumentCache.getEntry(e,b).next((V=>{v=v.insert(b,V)}))))).next((()=>this.populateOverlays(e,y,h))).next((()=>this.computeViews(e,v,y,Zt()))).next((b=>({batchId:g,changes:Ov(b)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Vt(i)).next((a=>{let l=rl();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,l){const h=i.collectionGroup;let p=rl();return this.indexManager.getCollectionParents(e,h).next((g=>ct.forEach(g,(v=>{const y=(function(C,V){return new Sc(V,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(i,v.child(h));return this.getDocumentsMatchingCollectionQuery(e,y,a,l).next((b=>{b.forEach(((C,V)=>{p=p.insert(C,V)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,i,a,l){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,l)))).next((p=>{h.forEach(((v,y)=>{const b=y.getKey();p.get(b)===null&&(p=p.insert(b,mn.newInvalidDocument(b)))}));let g=rl();return p.forEach(((v,y)=>{const b=h.get(v);b!==void 0&&hl(b.mutation,y,li.empty(),xe.now()),wc(i,y)&&(g=g.insert(v,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return ct.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ri(l.createTime)}})(i)),ct.resolve()}getNamedQuery(e,i){return ct.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:fS(l.bundledQuery),readTime:Ri(l.readTime)}})(i)),ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.overlays=new we(Vt.comparator),this.qr=new Map}getOverlay(e,i){return ct.resolve(this.overlays.get(i))}getOverlays(e,i){const a=ks();return ct.forEach(i,(l=>this.getOverlay(e,l).next((h=>{h!==null&&a.set(l,h)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((l,h)=>{this.St(e,i,h)})),ct.resolve()}removeOverlaysForBatchId(e,i,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(a)),ct.resolve()}getOverlaysForCollection(e,i,a){const l=ks(),h=i.length+1,p=new Vt(i.child("")),g=this.overlays.getIteratorFrom(p);for(;g.hasNext();){const v=g.getNext().value,y=v.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===h&&v.largestBatchId>a&&l.set(v.getKey(),v)}return ct.resolve(l)}getOverlaysForCollectionGroup(e,i,a,l){let h=new we(((y,b)=>y-b));const p=this.overlays.getIterator();for(;p.hasNext();){const y=p.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>a){let b=h.get(y.largestBatchId);b===null&&(b=ks(),h=h.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=ks(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,b)=>g.set(y,b))),!(g.size()>=l)););return ct.resolve(g)}St(e,i,a){const l=this.overlays.get(a.key);if(l!==null){const p=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(a.key,new qT(i,a));let h=this.qr.get(i);h===void 0&&(h=Zt(),this.qr.set(i,h)),this.qr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return ct.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this.Qr=new Xe(tn.$r),this.Ur=new Xe(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new tn(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new tn(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new Vt(new _e([])),a=new tn(i,e),l=new tn(i,e+1),h=[];return this.Ur.forEachInRange([a,l],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Vt(new _e([])),a=new tn(i,e),l=new tn(i,e+1);let h=Zt();return this.Ur.forEachInRange([a,l],(p=>{h=h.add(p.key)})),h}containsKey(e){const i=new tn(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class tn{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Vt.comparator(e.key,i.key)||$t(e.Yr,i.Yr)}static Kr(e,i){return $t(e.Yr,i.Yr)||Vt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(tn.$r)}checkEmpty(e){return ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new BT(h,i,a,l);this.mutationQueue.push(p);for(const g of l)this.Zr=this.Zr.add(new tn(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ct.resolve(p)}lookupMutationBatch(e,i){return ct.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,l=this.ei(a),h=l<0?0:l;return ct.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(this.mutationQueue.length===0?wd:this.tr-1)}getAllMutationBatches(e){return ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new tn(i,0),l=new tn(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([a,l],(p=>{const g=this.Xr(p.Yr);h.push(g)})),ct.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Xe($t);return i.forEach((l=>{const h=new tn(l,0),p=new tn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(g=>{a=a.add(g.Yr)}))})),ct.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,l=a.length+1;let h=a;Vt.isDocumentKey(h)||(h=h.child(""));const p=new tn(new Vt(h),0);let g=new Xe($t);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!a.isPrefixOf(y)&&(y.length===l&&(g=g.add(v.Yr)),!0)}),p),ct.resolve(this.ti(g))}ti(e){const i=[];return e.forEach((a=>{const l=this.Xr(a);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){se(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ct.forEach(i.mutations,(l=>{const h=new tn(l.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new tn(i,0),l=this.Zr.firstAfterOrEqual(a);return ct.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ct.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.ri=e,this.docs=(function(){return new we(Vt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,l=this.docs.get(a),h=l?l.size:0,p=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ct.resolve(a?a.document.mutableCopy():mn.newInvalidDocument(i))}getEntries(e,i){let a=sr();return i.forEach((l=>{const h=this.docs.get(l);a=a.insert(l,h?h.document.mutableCopy():mn.newInvalidDocument(l))})),ct.resolve(a)}getDocumentsMatchingQuery(e,i,a,l){let h=sr();const p=i.path,g=new Vt(p.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:y,value:{document:b}}=v.getNext();if(!p.isPrefixOf(y.path))break;y.path.length>p.length+1||eT(tT(b),a)<=0||(l.has(b.key)||wc(i,b))&&(h=h.insert(b.key,b.mutableCopy()))}return ct.resolve(h)}getAllFromCollectionGroup(e,i,a,l){Pt(9500)}ii(e,i){return ct.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new RS(this)}getSize(e){return ct.resolve(this.size)}}class RS extends xS{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(a)})),ct.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.persistence=e,this.si=new Gs((i=>Dd(i)),Nd),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.oi=0,this._i=new Pd,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(e,i){return this.si.forEach(((a,l)=>i(l))),ct.resolve()}getLastRemoteSnapshotVersion(e){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ct.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),ct.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Ya(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,ct.resolve()}updateTargetData(e,i){return this.Pr(i),ct.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,ct.resolve()}removeTargets(e,i,a){let l=0;const h=[];return this.si.forEach(((p,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)})),ct.waitFor(h).next((()=>l))}getTargetCount(e){return ct.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return ct.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),ct.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const l=this.persistence.referenceDelegate,h=[];return l&&i.forEach((p=>{h.push(l.markPotentiallyOrphaned(e,p))})),ct.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),ct.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return ct.resolve(a)}containsKey(e,i){return ct.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,i){this.ui={},this.overlays={},this.ci=new bc(0),this.li=!1,this.li=!0,this.hi=new AS,this.referenceDelegate=e(this),this.Pi=new DS(this),this.indexManager=new dS,this.remoteDocumentCache=(function(l){return new CS(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new hS(i),this.Ii=new TS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new SS,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new wS(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){Ct("MemoryPersistence","Starting transaction:",e);const l=new NS(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((h=>this.referenceDelegate.di(l).next((()=>h)))).toPromise().then((h=>(l.raiseOnCommittedEvent(),h)))}Ai(e,i){return ct.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class NS extends iT{constructor(e){super(),this.currentSequenceNumber=e}}class Ud{constructor(e){this.persistence=e,this.Ri=new Pd,this.Vi=null}static mi(e){return new Ud(e)}get fi(){if(this.Vi)return this.Vi;throw Pt(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),ct.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),ct.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),ct.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((h=>this.fi.add(h.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.fi,(a=>{const l=Vt.fromPath(a);return this.gi(e,l).next((h=>{h||i.removeEntry(l,Lt.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return ct.or([()=>ct.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class pc{constructor(e,i){this.persistence=e,this.pi=new Gs((a=>aT(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=_S(this,i)}static mi(e,i){return new pc(e,i)}Ei(){}di(e){return ct.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((l=>a+l))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return ct.forEach(this.pi,((a,l)=>this.br(e,a,l).next((h=>h?ct.resolve():i(l)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(e,(p=>this.br(e,p,i).next((g=>{g||(a++,h.removeEntry(p,Lt.min()))})))).next((()=>h.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),ct.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ct.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ct.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),ct.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Zu(e.data.value)),i}br(e,i,a){return ct.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return ct.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,i,a,l){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=l}static As(e,i){let a=Zt(),l=Zt();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new zd(e,i.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Rb()?8:rT(wb())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,l){const h={result:null};return this.ys(e,i).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(e,i,l,a).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new jS;return this.Ss(e,i,p).next((g=>{if(h.result=g,this.Vs)return this.bs(e,i,p,g.size)}))})).next((()=>h.result))}bs(e,i,a,l){return a.documentReadCount<this.fs?(Va()<=ee.DEBUG&&Ct("QueryEngine","SDK will not create cache indexes for query:",Oa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ct.resolve()):(Va()<=ee.DEBUG&&Ct("QueryEngine","Query:",Oa(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(Va()<=ee.DEBUG&&Ct("QueryEngine","The SDK decides to create cache indexes for query:",Oa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wi(i))):ct.resolve())}ys(e,i){if(n0(i))return ct.resolve(null);let a=wi(i);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=ud(i,null,"F"),a=wi(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((h=>{const p=Zt(...h);return this.ps.getDocuments(e,p).next((g=>this.indexManager.getMinOffset(e,a).next((v=>{const y=this.Ds(i,g);return this.Cs(i,y,p,v.readTime)?this.ys(e,ud(i,null,"F")):this.vs(e,y,i,v)}))))})))))}ws(e,i,a,l){return n0(i)||l.isEqual(Lt.min())?ct.resolve(null):this.ps.getDocuments(e,a).next((h=>{const p=this.Ds(i,h);return this.Cs(i,p,a,l)?ct.resolve(null):(Va()<=ee.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Oa(i)),this.vs(e,p,i,JE(l,pl)).next((g=>g)))}))}Ds(e,i){let a=new Xe(Mv(e));return i.forEach(((l,h)=>{wc(e,h)&&(a=a.add(h))})),a}Cs(e,i,a,l){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(e,i,a){return Va()<=ee.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",Oa(i)),this.ps.getDocumentsMatchingQuery(e,i,Yr.min(),a)}vs(e,i,a,l){return this.ps.getDocumentsMatchingQuery(e,a,l).next((h=>(i.forEach((p=>{h=h.insert(p.key,p)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="LocalStore",MS=3e8;class VS{constructor(e,i,a,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new we($t),this.xs=new Gs((h=>Dd(h)),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ES(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function OS(s,e,i,a){return new VS(s,e,i,a)}async function n_(s,e){const i=Ht(s);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next((h=>(l=h,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((h=>{const p=[],g=[];let v=Zt();for(const y of l){p.push(y.batchId);for(const b of y.mutations)v=v.add(b.key)}for(const y of h){g.push(y.batchId);for(const b of y.mutations)v=v.add(b.key)}return i.localDocuments.getDocuments(a,v).next((y=>({Ls:y,removedBatchIds:p,addedBatchIds:g})))}))}))}function kS(s,e){const i=Ht(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,v,y,b){const C=y.batch,V=C.keys();let L=ct.resolve();return V.forEach((q=>{L=L.next((()=>b.getEntry(v,q))).next((J=>{const k=y.docVersions.get(q);se(k!==null,48541),J.version.compareTo(k)<0&&(C.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),b.addEntry(J)))}))})),L.next((()=>g.mutationQueue.removeMutationBatch(v,C)))})(i,a,e,h).next((()=>h.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let v=Zt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(v=v.add(g.batch.mutations[y].key));return v})(e)))).next((()=>i.localDocuments.getDocuments(a,l)))}))}function i_(s){const e=Ht(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function PS(s,e){const i=Ht(s),a=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];e.targetChanges.forEach(((b,C)=>{const V=l.get(C);if(!V)return;g.push(i.Pi.removeMatchingKeys(h,b.removedDocuments,C).next((()=>i.Pi.addMatchingKeys(h,b.addedDocuments,C))));let L=V.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(C)!==null?L=L.withResumeToken(ln.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,a)),l=l.insert(C,L),(function(J,k,F){return J.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=MS?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(V,L,b)&&g.push(i.Pi.updateTargetData(h,L))}));let v=sr(),y=Zt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,b))})),g.push(US(h,p,e.documentUpdates).next((b=>{v=b.ks,y=b.qs}))),!a.isEqual(Lt.min())){const b=i.Pi.getLastRemoteSnapshotVersion(h).next((C=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,a)));g.push(b)}return ct.waitFor(g).next((()=>p.apply(h))).next((()=>i.localDocuments.getLocalViewOfDocuments(h,v,y))).next((()=>v))})).then((h=>(i.Ms=l,h)))}function US(s,e,i){let a=Zt(),l=Zt();return i.forEach((h=>a=a.add(h))),e.getEntries(s,a).next((h=>{let p=sr();return i.forEach(((g,v)=>{const y=h.get(g);v.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),v.isNoDocument()&&v.version.isEqual(Lt.min())?(e.removeEntry(g,v.readTime),p=p.insert(g,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),p=p.insert(g,v)):Ct(Ld,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",v.version)})),{ks:p,qs:l}}))}function zS(s,e){const i=Ht(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=wd),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function LS(s,e){const i=Ht(s);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return i.Pi.getTargetData(a,e).next((h=>h?(l=h,ct.resolve(l)):i.Pi.allocateTargetId(a).next((p=>(l=new Lr(e,p,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=i.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function pd(s,e,i){const a=Ht(s),l=a.Ms.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,(p=>a.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!$a(p))throw p;Ct(Ld,`Failed to update sequence numbers for target ${e}: ${p}`)}a.Ms=a.Ms.remove(e),a.xs.delete(l.target)}function m0(s,e,i){const a=Ht(s);let l=Lt.min(),h=Zt();return a.persistence.runTransaction("Execute query","readwrite",(p=>(function(v,y,b){const C=Ht(v),V=C.xs.get(b);return V!==void 0?ct.resolve(C.Ms.get(V)):C.Pi.getTargetData(y,b)})(a,p,wi(e)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(p,g.targetId).next((v=>{h=v}))})).next((()=>a.Fs.getDocumentsMatchingQuery(p,e,i?l:Lt.min(),i?h:Zt()))).next((g=>(BS(a,wT(e),g),{documents:g,Qs:h})))))}function BS(s,e,i){let a=s.Os.get(e)||Lt.min();i.forEach(((l,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)})),s.Os.set(e,a)}class g0{constructor(){this.activeTargetIds=IT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qS{constructor(){this.Mo=new g0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new g0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="ConnectivityMonitor";class v0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ct(y0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ct(y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=null;function md(){return Ku===null?Ku=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ku++,"0x"+Ku.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="RestConnection",FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===oc?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(e,i,a,l,h){const p=md(),g=this.zo(e,i.toUriEncodedString());Ct(Kf,`Sending RPC '${e}' ${p}:`,g,a);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,l,h);const{host:y}=new URL(g),b=xc(y);return this.Jo(e,g,v,a,b).then((C=>(Ct(Kf,`Received RPC '${e}' ${p}: `,C),C)),(C=>{throw qa(Kf,`RPC '${e}' ${p} failed with error: `,C,"url: ",g,"request:",a),C}))}Ho(e,i,a,l,h,p){return this.Go(e,i,a,l,h)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ka})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,h)=>e[h]=l)),a&&a.headers.forEach(((l,h)=>e[h]=l))}zo(e,i){const a=FS[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class QS extends GS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,l,h){const p=md();return new Promise(((g,v)=>{const y=new ov;y.setWithCredentials(!0),y.listenOnce(lv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case $u.NO_ERROR:const C=y.getResponseJson();Ct(dn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(C)),g(C);break;case $u.TIMEOUT:Ct(dn,`RPC '${e}' ${p} timed out`),v(new It(pt.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const V=y.getStatus();if(Ct(dn,`RPC '${e}' ${p} failed with status:`,V,"response text:",y.getResponseText()),V>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const q=L?.error;if(q&&q.status&&q.message){const J=(function(F){const it=F.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(it)>=0?it:pt.UNKNOWN})(q.status);v(new It(J,q.message))}else v(new It(pt.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new It(pt.UNAVAILABLE,"Connection failed."));break;default:Pt(9055,{l_:e,streamId:p,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ct(dn,`RPC '${e}' ${p} completed.`)}}));const b=JSON.stringify(l);Ct(dn,`RPC '${e}' ${p} sending request:`,l),y.send(i,"POST",b,a,15)}))}T_(e,i,a){const l=md(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=hv(),g=cv(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,i,a),v.encodeInitMessageHeaders=!0;const b=h.join("");Ct(dn,`Creating RPC '${e}' stream ${l}: ${b}`,v);const C=p.createWebChannel(b,v);this.I_(C);let V=!1,L=!1;const q=new YS({Yo:k=>{L?Ct(dn,`Not sending because RPC '${e}' stream ${l} is closed:`,k):(V||(Ct(dn,`Opening RPC '${e}' stream ${l} transport.`),C.open(),V=!0),Ct(dn,`RPC '${e}' stream ${l} sending:`,k),C.send(k))},Zo:()=>C.close()}),J=(k,F,it)=>{k.listen(F,(at=>{try{it(at)}catch(dt){setTimeout((()=>{throw dt}),0)}}))};return J(C,il.EventType.OPEN,(()=>{L||(Ct(dn,`RPC '${e}' stream ${l} transport opened.`),q.o_())})),J(C,il.EventType.CLOSE,(()=>{L||(L=!0,Ct(dn,`RPC '${e}' stream ${l} transport closed`),q.a_(),this.E_(C))})),J(C,il.EventType.ERROR,(k=>{L||(L=!0,qa(dn,`RPC '${e}' stream ${l} transport errored. Name:`,k.name,"Message:",k.message),q.a_(new It(pt.UNAVAILABLE,"The operation could not be completed")))})),J(C,il.EventType.MESSAGE,(k=>{if(!L){const F=k.data[0];se(!!F,16349);const it=F,at=it?.error||it[0]?.error;if(at){Ct(dn,`RPC '${e}' stream ${l} received error:`,at);const dt=at.status;let et=(function(w){const T=Ue[w];if(T!==void 0)return Fv(T)})(dt),K=at.message;et===void 0&&(et=pt.INTERNAL,K="Unknown error status: "+dt+" with message "+at.message),L=!0,q.a_(new It(et,K)),C.close()}else Ct(dn,`RPC '${e}' stream ${l} received:`,F),q.u_(F)}})),J(g,uv.STAT_EVENT,(k=>{k.stat===id.PROXY?Ct(dn,`RPC '${e}' stream ${l} detected buffering proxy`):k.stat===id.NOPROXY&&Ct(dn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(s){return new ZT(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,i,a=1e3,l=1.5,h=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-a);l>0&&Ct("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="PersistentStream";class s_{constructor(e,i,a,l,h,p,g,v){this.Mi=e,this.S_=a,this.b_=l,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r_(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===pt.RESOURCE_EXHAUSTED?(rr(i.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===i&&this.G_(a,l)}),(a=>{e((()=>{const l=new It(pt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ct(_0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(Ct(_0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KS extends s_{constructor(e,i,a,l,h,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,p),this.serializer=h}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=tS(this.serializer,e),a=(function(h){if(!("targetChange"in h))return Lt.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?Lt.min():p.readTime?Ri(p.readTime):Lt.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=dd(this.serializer),i.addTarget=(function(h,p){let g;const v=p.target;if(g=ld(v)?{documents:iS(h,v)}:{query:rS(h,v).ft},g.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){g.resumeToken=Qv(h,p.resumeToken);const y=cd(h,p.expectedCount);y!==null&&(g.expectedCount=y)}else if(p.snapshotVersion.compareTo(Lt.min())>0){g.readTime=dc(h,p.snapshotVersion.toTimestamp());const y=cd(h,p.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const a=aS(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=dd(this.serializer),i.removeTarget=e,this.q_(i)}}class XS extends s_{constructor(e,i,a,l,h,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=nS(e.writeResults,e.commitTime),a=Ri(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=dd(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>eS(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{}class ZS extends $S{constructor(e,i,a,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new It(pt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(e,hd(i,a),l,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new It(pt.UNKNOWN,h.toString())}))}Ho(e,i,a,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,g])=>this.connection.Ho(e,hd(i,a),l,p,g,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new It(pt.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WS{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(i),this.aa=!1):Ct("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="RemoteStore";class JS{constructor(e,i,a,l,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{a.enqueueAndForget((async()=>{Qs(this)&&(Ct(qs,"Restarting streams for network reachability change."),await(async function(v){const y=Ht(v);y.Ea.add(4),await Sl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await jc(y)})(this))}))})),this.Ra=new WS(a,l)}}async function jc(s){if(Qs(s))for(const e of s.da)await e(!0)}async function Sl(s){for(const e of s.da)await e(!1)}function a_(s,e){const i=Ht(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),Fd(i)?Hd(i):Za(i).O_()&&qd(i,e))}function Bd(s,e){const i=Ht(s),a=Za(i);i.Ia.delete(e),a.O_()&&o_(i,e),i.Ia.size===0&&(a.O_()?a.L_():Qs(i)&&i.Ra.set("Unknown"))}function qd(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Za(s).Y_(e)}function o_(s,e){s.Va.Ue(e),Za(s).Z_(e)}function Hd(s){s.Va=new QT({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Za(s).start(),s.Ra.ua()}function Fd(s){return Qs(s)&&!Za(s).x_()&&s.Ia.size>0}function Qs(s){return Ht(s).Ea.size===0}function l_(s){s.Va=void 0}async function tA(s){s.Ra.set("Online")}async function eA(s){s.Ia.forEach(((e,i)=>{qd(s,e)}))}async function nA(s,e){l_(s),Fd(s)?(s.Ra.ha(e),Hd(s)):s.Ra.set("Unknown")}async function iA(s,e,i){if(s.Ra.set("Online"),e instanceof Yv&&e.state===2&&e.cause)try{await(async function(l,h){const p=h.cause;for(const g of h.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,p),l.Ia.delete(g),l.Va.removeTarget(g))})(s,e)}catch(a){Ct(qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await mc(s,a)}else if(e instanceof tc?s.Va.Ze(e):e instanceof Gv?s.Va.st(e):s.Va.tt(e),!i.isEqual(Lt.min()))try{const a=await i_(s.localStore);i.compareTo(a)>=0&&await(function(h,p){const g=h.Va.Tt(p);return g.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const b=h.Ia.get(y);b&&h.Ia.set(y,b.withResumeToken(v.resumeToken,p))}})),g.targetMismatches.forEach(((v,y)=>{const b=h.Ia.get(v);if(!b)return;h.Ia.set(v,b.withResumeToken(ln.EMPTY_BYTE_STRING,b.snapshotVersion)),o_(h,v);const C=new Lr(b.target,v,y,b.sequenceNumber);qd(h,C)})),h.remoteSyncer.applyRemoteEvent(g)})(s,i)}catch(a){Ct(qs,"Failed to raise snapshot:",a),await mc(s,a)}}async function mc(s,e,i){if(!$a(e))throw e;s.Ea.add(1),await Sl(s),s.Ra.set("Offline"),i||(i=()=>i_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ct(qs,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await jc(s)}))}function u_(s,e){return e().catch((i=>mc(s,i,e)))}async function Ic(s){const e=Ht(s),i=$r(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wd;for(;rA(e);)try{const l=await zS(e.localStore,a);if(l===null){e.Ta.length===0&&i.L_();break}a=l.batchId,sA(e,l)}catch(l){await mc(e,l)}c_(e)&&h_(e)}function rA(s){return Qs(s)&&s.Ta.length<10}function sA(s,e){s.Ta.push(e);const i=$r(s);i.O_()&&i.X_&&i.ea(e.mutations)}function c_(s){return Qs(s)&&!$r(s).x_()&&s.Ta.length>0}function h_(s){$r(s).start()}async function aA(s){$r(s).ra()}async function oA(s){const e=$r(s);for(const i of s.Ta)e.ea(i.mutations)}async function lA(s,e,i){const a=s.Ta.shift(),l=Vd.from(a,e,i);await u_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Ic(s)}async function uA(s,e){e&&$r(s).X_&&await(async function(a,l){if((function(p){return FT(p)&&p!==pt.ABORTED})(l.code)){const h=a.Ta.shift();$r(a).B_(),await u_(a,(()=>a.remoteSyncer.rejectFailedWrite(h.batchId,l))),await Ic(a)}})(s,e),c_(s)&&h_(s)}async function x0(s,e){const i=Ht(s);i.asyncQueue.verifyOperationInProgress(),Ct(qs,"RemoteStore received new credentials");const a=Qs(i);i.Ea.add(3),await Sl(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await jc(i)}async function cA(s,e){const i=Ht(s);e?(i.Ea.delete(2),await jc(i)):e||(i.Ea.add(2),await Sl(i),i.Ra.set("Unknown"))}function Za(s){return s.ma||(s.ma=(function(i,a,l){const h=Ht(i);return h.sa(),new KS(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(s.datastore,s.asyncQueue,{Xo:tA.bind(null,s),t_:eA.bind(null,s),r_:nA.bind(null,s),H_:iA.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Fd(s)?Hd(s):s.Ra.set("Unknown")):(await s.ma.stop(),l_(s))}))),s.ma}function $r(s){return s.fa||(s.fa=(function(i,a,l){const h=Ht(i);return h.sa(),new XS(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:aA.bind(null,s),r_:uA.bind(null,s),ta:oA.bind(null,s),na:lA.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ic(s)):(await s.fa.stop(),s.Ta.length>0&&(Ct(qs,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,i,a,l,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=h,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,l,h){const p=Date.now()+a,g=new Gd(e,i,p,l,h);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(s,e){if(rr("AsyncQueue",`${e}: ${s}`),$a(s))return new It(pt.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Vt.comparator(i.key,a.key):(i,a)=>Vt.comparator(i.key,a.key),this.keyedMap=rl(),this.sortedSet=new we(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=a.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new za;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.ga=new we(Vt.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Pt(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class Qa{constructor(e,i,a,l,h,p,g,v,y){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,i,a,l,h){const p=[];return i.forEach((g=>{p.push({type:0,doc:g})})),new Qa(e,i,za.emptySet(i),p,a,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class fA{constructor(){this.queries=E0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const l=Ht(i),h=l.queries;l.queries=E0(),h.forEach(((p,g)=>{for(const v of g.Sa)v.onError(a)}))})(this,new It(pt.ABORTED,"Firestore shutting down"))}}function E0(){return new Gs((s=>Iv(s)),Ac)}async function dA(s,e){const i=Ht(s);let a=3;const l=e.query;let h=i.queries.get(l);h?!h.ba()&&e.Da()&&(a=2):(h=new hA,a=e.Da()?0:1);try{switch(a){case 0:h.wa=await i.onListen(l,!0);break;case 1:h.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(p){const g=Yd(p,`Initialization of query '${Oa(e.query)}' failed`);return void e.onError(g)}i.queries.set(l,h),h.Sa.push(e),e.va(i.onlineState),h.wa&&e.Fa(h.wa)&&Qd(i)}async function pA(s,e){const i=Ht(s),a=e.query;let l=3;const h=i.queries.get(a);if(h){const p=h.Sa.indexOf(e);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?l=e.Da()?0:1:!h.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function mA(s,e){const i=Ht(s);let a=!1;for(const l of e){const h=l.query,p=i.queries.get(h);if(p){for(const g of p.Sa)g.Fa(l)&&(a=!0);p.wa=l}}a&&Qd(i)}function gA(s,e,i){const a=Ht(s),l=a.queries.get(e);if(l)for(const h of l.Sa)h.onError(i);a.queries.delete(e)}function Qd(s){s.Ca.forEach((e=>{e.next()}))}var gd,T0;(T0=gd||(gd={})).Ma="default",T0.Cache="cache";class yA{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new Qa(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=Qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this.key=e}}class d_{constructor(e){this.key=e}}class vA{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Zt(),this.mutatedKeys=Zt(),this.eu=Mv(e),this.tu=new za(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new b0,l=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,p=l,g=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,C)=>{const V=l.get(b),L=wc(this.query,C)?C:null,q=!!V&&this.mutatedKeys.has(V.key),J=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let k=!1;V&&L?V.data.isEqual(L.data)?q!==J&&(a.track({type:3,doc:L}),k=!0):this.su(V,L)||(a.track({type:2,doc:L}),k=!0,(v&&this.eu(L,v)>0||y&&this.eu(L,y)<0)&&(g=!0)):!V&&L?(a.track({type:0,doc:L}),k=!0):V&&!L&&(a.track({type:1,doc:V}),k=!0,(v||y)&&(g=!0)),k&&(L?(p=p.add(L),h=J?h.add(b):h.delete(b)):(p=p.delete(b),h=h.delete(b)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const b=this.query.limitType==="F"?p.last():p.first();p=p.delete(b.key),h=h.delete(b.key),a.track({type:1,doc:b})}return{tu:p,iu:a,Cs:g,mutatedKeys:h}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,l){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((b,C)=>(function(L,q){const J=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt(20277,{Rt:k})}};return J(L)-J(q)})(b.type,C.type)||this.eu(b.doc,C.doc))),this.ou(a),l=l??!1;const g=i&&!l?this._u():[],v=this.Xa.size===0&&this.current&&!l?1:0,y=v!==this.Za;return this.Za=v,p.length!==0||y?{snapshot:new Qa(this.query,e.tu,h,p,e.mutatedKeys,v===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Zt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new d_(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new f_(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=Zt();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return Qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kd="SyncEngine";class _A{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class xA{constructor(e){this.key=e,this.hu=!1}}class bA{constructor(e,i,a,l,h,p){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Gs((g=>Iv(g)),Ac),this.Iu=new Map,this.Eu=new Set,this.du=new we(Vt.comparator),this.Au=new Map,this.Ru=new Pd,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EA(s,e,i=!0){const a=__(s);let l;const h=a.Tu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await p_(a,e,i,!0),l}async function TA(s,e){const i=__(s);await p_(i,e,!0,!1)}async function p_(s,e,i,a){const l=await LS(s.localStore,wi(e)),h=l.targetId,p=s.sharedClientState.addLocalQueryTarget(h,i);let g;return a&&(g=await SA(s,e,h,p==="current",l.resumeToken)),s.isPrimaryClient&&i&&a_(s.remoteStore,l),g}async function SA(s,e,i,a,l){s.pu=(C,V,L)=>(async function(J,k,F,it){let at=k.view.ru(F);at.Cs&&(at=await m0(J.localStore,k.query,!1).then((({documents:N})=>k.view.ru(N,at))));const dt=it&&it.targetChanges.get(k.targetId),et=it&&it.targetMismatches.get(k.targetId)!=null,K=k.view.applyChanges(at,J.isPrimaryClient,dt,et);return A0(J,k.targetId,K.au),K.snapshot})(s,C,V,L);const h=await m0(s.localStore,e,!0),p=new vA(e,h.Qs),g=p.ru(h.documents),v=Tl.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",l),y=p.applyChanges(g,s.isPrimaryClient,v);A0(s,i,y.au);const b=new _A(e,i,p);return s.Tu.set(e,b),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),y.snapshot}async function AA(s,e,i){const a=Ht(s),l=a.Tu.get(e),h=a.Iu.get(l.targetId);if(h.length>1)return a.Iu.set(l.targetId,h.filter((p=>!Ac(p,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await pd(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),i&&Bd(a.remoteStore,l.targetId),yd(a,l.targetId)})).catch(Xa)):(yd(a,l.targetId),await pd(a.localStore,l.targetId,!0))}async function wA(s,e){const i=Ht(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Bd(i.remoteStore,a.targetId))}async function CA(s,e,i){const a=VA(s);try{const l=await(function(p,g){const v=Ht(p),y=xe.now(),b=g.reduce(((L,q)=>L.add(q.key)),Zt());let C,V;return v.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let q=sr(),J=Zt();return v.Ns.getEntries(L,b).next((k=>{q=k,q.forEach(((F,it)=>{it.isValidDocument()||(J=J.add(F))}))})).next((()=>v.localDocuments.getOverlayedDocuments(L,q))).next((k=>{C=k;const F=[];for(const it of g){const at=zT(it,C.get(it.key).overlayedDocument);at!=null&&F.push(new Ys(it.key,at,Av(at.value.mapValue),Ci.exists(!0)))}return v.mutationQueue.addMutationBatch(L,y,F,g)})).next((k=>{V=k;const F=k.applyToLocalDocumentSet(C,J);return v.documentOverlayCache.saveOverlays(L,k.batchId,F)}))})).then((()=>({batchId:V.batchId,changes:Ov(C)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(p,g,v){let y=p.Vu[p.currentUser.toKey()];y||(y=new we($t)),y=y.insert(g,v),p.Vu[p.currentUser.toKey()]=y})(a,l.batchId,i),await Al(a,l.changes),await Ic(a.remoteStore)}catch(l){const h=Yd(l,"Failed to persist write");i.reject(h)}}async function m_(s,e){const i=Ht(s);try{const a=await PS(i.localStore,e);e.targetChanges.forEach(((l,h)=>{const p=i.Au.get(h);p&&(se(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?se(p.hu,14607):l.removedDocuments.size>0&&(se(p.hu,42227),p.hu=!1))})),await Al(i,a,e)}catch(a){await Xa(a)}}function S0(s,e,i){const a=Ht(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.Tu.forEach(((h,p)=>{const g=p.view.va(e);g.snapshot&&l.push(g.snapshot)})),(function(p,g){const v=Ht(p);v.onlineState=g;let y=!1;v.queries.forEach(((b,C)=>{for(const V of C.Sa)V.va(g)&&(y=!0)})),y&&Qd(v)})(a.eventManager,e),l.length&&a.Pu.H_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function RA(s,e,i){const a=Ht(s);a.sharedClientState.updateQueryState(e,"rejected",i);const l=a.Au.get(e),h=l&&l.key;if(h){let p=new we(Vt.comparator);p=p.insert(h,mn.newNoDocument(h,Lt.min()));const g=Zt().add(h),v=new Dc(Lt.min(),new Map,new we($t),p,g);await m_(a,v),a.du=a.du.remove(h),a.Au.delete(e),Xd(a)}else await pd(a.localStore,e,!1).then((()=>yd(a,e,i))).catch(Xa)}async function DA(s,e){const i=Ht(s),a=e.batch.batchId;try{const l=await kS(i.localStore,e);y_(i,a,null),g_(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Al(i,l)}catch(l){await Xa(l)}}async function NA(s,e,i){const a=Ht(s);try{const l=await(function(p,g){const v=Ht(p);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return v.mutationQueue.lookupMutationBatch(y,g).next((C=>(se(C!==null,37113),b=C.keys(),v.mutationQueue.removeMutationBatch(y,C)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,b,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>v.localDocuments.getDocuments(y,b)))}))})(a.localStore,e);y_(a,e,i),g_(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await Al(a,l)}catch(l){await Xa(l)}}function g_(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function y_(s,e,i){const a=Ht(s);let l=a.Vu[a.currentUser.toKey()];if(l){const h=l.get(e);h&&(i?h.reject(i):h.resolve(),l=l.remove(e)),a.Vu[a.currentUser.toKey()]=l}}function yd(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),i&&s.Pu.yu(a,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||v_(s,a)}))}function v_(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(Bd(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),Xd(s))}function A0(s,e,i){for(const a of i)a instanceof f_?(s.Ru.addReference(a.key,e),jA(s,a)):a instanceof d_?(Ct(Kd,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||v_(s,a.key)):Pt(19791,{wu:a})}function jA(s,e){const i=e.key,a=i.path.canonicalString();s.du.get(i)||s.Eu.has(a)||(Ct(Kd,"New document in limbo: "+i),s.Eu.add(a),Xd(s))}function Xd(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new Vt(_e.fromString(e)),a=s.fu.next();s.Au.set(a,new xA(i)),s.du=s.du.insert(i,a),a_(s.remoteStore,new Lr(wi(jd(i.path)),a,"TargetPurposeLimboResolution",bc.ce))}}async function Al(s,e,i){const a=Ht(s),l=[],h=[],p=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,v)=>{p.push(a.pu(v,e,i).then((y=>{if((y||i)&&a.isPrimaryClient){const b=y?!y.fromCache:i?.targetChanges.get(v.targetId)?.current;a.sharedClientState.updateQueryState(v.targetId,b?"current":"not-current")}if(y){l.push(y);const b=zd.As(v.targetId,y);h.push(b)}})))})),await Promise.all(p),a.Pu.H_(l),await(async function(v,y){const b=Ht(v);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>ct.forEach(y,(V=>ct.forEach(V.Es,(L=>b.persistence.referenceDelegate.addReference(C,V.targetId,L))).next((()=>ct.forEach(V.ds,(L=>b.persistence.referenceDelegate.removeReference(C,V.targetId,L)))))))))}catch(C){if(!$a(C))throw C;Ct(Ld,"Failed to update sequence numbers: "+C)}for(const C of y){const V=C.targetId;if(!C.fromCache){const L=b.Ms.get(V),q=L.snapshotVersion,J=L.withLastLimboFreeSnapshotVersion(q);b.Ms=b.Ms.insert(V,J)}}})(a.localStore,h))}async function IA(s,e){const i=Ht(s);if(!i.currentUser.isEqual(e)){Ct(Kd,"User change. New user:",e.toKey());const a=await n_(i.localStore,e);i.currentUser=e,(function(h,p){h.mu.forEach((g=>{g.forEach((v=>{v.reject(new It(pt.CANCELLED,p))}))})),h.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Al(i,a.Ls)}}function MA(s,e){const i=Ht(s),a=i.Au.get(e);if(a&&a.hu)return Zt().add(a.key);{let l=Zt();const h=i.Iu.get(e);if(!h)return l;for(const p of h){const g=i.Tu.get(p);l=l.unionWith(g.view.nu)}return l}}function __(s){const e=Ht(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=m_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RA.bind(null,e),e.Pu.H_=mA.bind(null,e.eventManager),e.Pu.yu=gA.bind(null,e.eventManager),e}function VA(s){const e=Ht(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NA.bind(null,e),e}class gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return OS(this.persistence,new IS,e.initialUser,this.serializer)}Cu(e){return new e_(Ud.mi,this.serializer)}Du(e){return new qS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gc.provider={build:()=>new gc};class OA extends gc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){se(this.persistence.referenceDelegate instanceof pc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new yS(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new e_((a=>pc.mi(a,i)),this.serializer)}}class vd{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>S0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=IA.bind(null,this.syncEngine),await cA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fA})()}createDatastore(e){const i=Nc(e.databaseInfo.databaseId),a=(function(h){return new QS(h)})(e.databaseInfo);return(function(h,p,g,v){return new ZS(h,p,g,v)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,l,h,p,g){return new JS(a,l,h,p,g)})(this.localStore,this.datastore,e.asyncQueue,(i=>S0(this.syncEngine,i,0)),(function(){return v0.v()?new v0:new HS})())}createSyncEngine(e,i){return(function(l,h,p,g,v,y,b){const C=new bA(l,h,p,g,v,y);return b&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Ht(i);Ct(qs,"RemoteStore shutting down."),a.Ea.add(5),await Sl(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vd.provider={build:()=>new vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="FirestoreClient";class PA{constructor(e,i,a,l,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=pn.UNAUTHENTICATED,this.clientId=Sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,(async p=>{Ct(Zr,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(a,(p=>(Ct(Zr,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=Yd(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function $f(s,e){s.asyncQueue.verifyOperationInProgress(),Ct(Zr,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener((async l=>{a.isEqual(l)||(await n_(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function w0(s,e){s.asyncQueue.verifyOperationInProgress();const i=await UA(s);Ct(Zr,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((a=>x0(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,l)=>x0(e.remoteStore,l))),s._onlineComponents=e}async function UA(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ct(Zr,"Using user provided OfflineComponentProvider");try{await $f(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===pt.FAILED_PRECONDITION||l.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;qa("Error using user provided cache. Falling back to memory cache: "+i),await $f(s,new gc)}}else Ct(Zr,"Using default OfflineComponentProvider"),await $f(s,new OA(void 0));return s._offlineComponents}async function x_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ct(Zr,"Using user provided OnlineComponentProvider"),await w0(s,s._uninitializedComponentsProvider._online)):(Ct(Zr,"Using default OnlineComponentProvider"),await w0(s,new vd))),s._onlineComponents}function zA(s){return x_(s).then((e=>e.syncEngine))}async function C0(s){const e=await x_(s),i=e.eventManager;return i.onListen=EA.bind(null,e.syncEngine),i.onUnlisten=AA.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=TA.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=wA.bind(null,e.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="firestore.googleapis.com",D0=!0;class N0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new It(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E_,this.ssl=D0}else this.host=e.host,this.ssl=e.ssl??D0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=t_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mS)throw new It(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b_(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new It(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new It(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new It(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,i,a,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new qE;switch(a.type){case"firstParty":return new YE(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new It(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=R0.get(i);a&&(Ct("ComponentProvider","Removing Datastore"),R0.delete(i),a.terminate())})(this),Promise.resolve()}}function LA(s,e,i,a={}){s=Us(s,Mc);const l=xc(e),h=s._getSettings(),p={...h,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${i}`;l&&(Y0(`https://${g}`),K0("Firestore",!0)),h.host!==E_&&h.host!==g&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:g,ssl:l,emulatorOptions:a};if(!rc(v,p)&&(s._setSettings(v),a.mockUserToken)){let y,b;if(typeof a.mockUserToken=="string")y=a.mockUserToken,b=pn.MOCK_USER;else{y=Q0(a.mockUserToken,s._app?.options.projectId);const C=a.mockUserToken.sub||a.mockUserToken.user_id;if(!C)throw new It(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new pn(C)}s._authCredentials=new HE(new dv(y,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Vc(this.firestore,e,this._query)}}class Ke{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ke(this.firestore,e,this._key)}toJSON(){return{type:Ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(bl(i,Ke._jsonSchema))return new Ke(e,a||null,new Vt(_e.fromString(i.referencePath)))}}Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:ze("string",Ke._jsonSchemaVersion),referencePath:ze("string")};class Gr extends Vc{constructor(e,i,a){super(e,i,jd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new Vt(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function wl(s,e,...i){if(s=Ls(s),pv("collection","path",e),s instanceof Mc){const a=_e.fromString(e,...i);return Hy(a),new Gr(s,null,a)}{if(!(s instanceof Ke||s instanceof Gr))throw new It(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(_e.fromString(e,...i));return Hy(a),new Gr(s.firestore,null,a)}}function xn(s,e,...i){if(s=Ls(s),arguments.length===1&&(e=Sd.newId()),pv("doc","path",e),s instanceof Mc){const a=_e.fromString(e,...i);return qy(a),new Ke(s,null,new Vt(a))}{if(!(s instanceof Ke||s instanceof Gr))throw new It(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(_e.fromString(e,...i));return qy(a),new Ke(s.firestore,s instanceof Gr?s.converter:null,new Vt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="AsyncQueue";class I0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r_(this,"async_queue_retry"),this._c=()=>{const a=Xf();a&&Ct(j0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=Xf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Xf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ps;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$a(e))throw e;Ct(j0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",M0(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=Gd.createAndSchedule(this,e,i,a,(h=>this.hc(h)));return this.tc.push(l),l}uc(){this.nc&&Pt(47125,{Pc:M0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function M0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(s){return(function(i,a){if(typeof i!="object"||i===null)return!1;const l=i;for(const h of a)if(h in l&&typeof l[h]=="function")return!0;return!1})(s,["next","error","complete"])}class xl extends Mc{constructor(e,i,a,l){super(e,i,a,l),this.type="firestore",this._queue=new I0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I0(e),this._firestoreClient=void 0,await e}}}function BA(s,e){const i=typeof s=="object"?s:iv(),a=typeof s=="string"?s:oc,l=J0(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const h=F0("firestore");h&&LA(l,...h)}return l}function T_(s){if(s._terminated)throw new It(pt.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||qA(s),s._firestoreClient}function qA(s){const e=s._freezeSettings(),i=(function(l,h,p,g){return new uT(l,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,b_(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new PA(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(ln.fromBase64String(e))}catch(i){throw new It(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Wn(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bl(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:ze("string",Wn._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new It(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new It(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new It(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(bl(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:ze("string",Di._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==l[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bl(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Ni(e.vectorValues);throw new It(pt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:ze("string",Ni._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=/^__.*__$/;class FA{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,i,this.fieldTransforms):new El(e,this.data,i,this.fieldTransforms)}}function A_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt(40011,{Ac:s})}}class Zd{constructor(e,i,a,l,h,p){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(A_(this.Ac)&&HA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GA{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Nc(e)}Cc(e,i,a,l=!1){return new Zd({Ac:e,methodName:i,Dc:a,path:on.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function YA(s){const e=s._freezeSettings(),i=Nc(s._databaseId);return new GA(s._databaseId,!!e.ignoreUndefinedProperties,i)}function QA(s,e,i,a,l,h={}){const p=s.Cc(h.merge||h.mergeFields?2:0,e,i,l);D_("Data must be an object, but it was:",p,a);const g=C_(a,p);let v,y;if(h.merge)v=new li(p.fieldMask),y=p.fieldTransforms;else if(h.mergeFields){const b=[];for(const C of h.mergeFields){const V=KA(e,C,i);if(!p.contains(V))throw new It(pt.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);$A(b,V)||b.push(V)}v=new li(b),y=p.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,y=p.fieldTransforms;return new FA(new Zn(g),v,y)}function w_(s,e){if(R_(s=Ls(s)))return D_("Unsupported field value:",e,s),C_(s,e);if(s instanceof S_)return(function(a,l){if(!A_(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(l);h&&l.fieldTransforms.push(h)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,l){const h=[];let p=0;for(const g of a){let v=w_(g,l.wc(p));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),p++}return{arrayValue:{values:h}}})(s,e)}return(function(a,l){if((a=Ls(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return MT(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=xe.fromDate(a);return{timestampValue:dc(l.serializer,h)}}if(a instanceof xe){const h=new xe(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:dc(l.serializer,h)}}if(a instanceof Di)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Wn)return{bytesValue:Qv(l.serializer,a._byteString)};if(a instanceof Ke){const h=l.databaseId,p=a.firestore._databaseId;if(!p.isEqual(h))throw l.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:kd(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Ni)return(function(p,g){return{mapValue:{fields:{[Tv]:{stringValue:Sv},[lc]:{arrayValue:{values:p.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Id(g.serializer,y)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${Ad(a)}`)})(s,e)}function C_(s,e){const i={};return yv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(s,((a,l)=>{const h=w_(l,e.mc(a));h!=null&&(i[a]=h)})),{mapValue:{fields:i}}}function R_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof xe||s instanceof Di||s instanceof Wn||s instanceof Ke||s instanceof S_||s instanceof Ni)}function D_(s,e,i){if(!R_(i)||!mv(i)){const a=Ad(i);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function KA(s,e,i){if((e=Ls(e))instanceof $d)return e._internalPath;if(typeof e=="string")return N_(s,e);throw yc("Field path arguments must be of type string or ",s,!1,void 0,i)}const XA=new RegExp("[~\\*/\\[\\]]");function N_(s,e,i){if(e.search(XA)>=0)throw yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new $d(...e.split("."))._internalPath}catch{throw yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function yc(s,e,i,a,l){const h=a&&!a.isEmpty(),p=l!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(h||p)&&(v+=" (found",h&&(v+=` in field ${a}`),p&&(v+=` in document ${l}`),v+=")"),new It(pt.INVALID_ARGUMENT,g+s+v)}function $A(s,e){return s.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,i,a,l,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(I_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class ZA extends j_{data(){return super.data()}}function I_(s,e){return typeof e=="string"?N_(s,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new It(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JA{convertValue(e,i="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Pt(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return Fs(e,((l,h)=>{a[l]=this.convertValue(h,i)})),a}convertVectorValue(e){const i=e.fields?.[lc].arrayValue?.values?.map((a=>Oe(a.doubleValue)));return new Ni(i)}convertGeoPoint(e){return new Di(Oe(e.latitude),Oe(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=Tc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const i=Qr(e);return new xe(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=_e.fromString(e);se(Jv(a),9688,{name:e});const l=new gl(a.get(1),a.get(3)),h=new Vt(a.popFirst(5));return l.isEqual(i)||rr(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(s,e,i){let a;return a=s?s.toFirestore(e):e,a}class al{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zs extends j_{constructor(e,i,a,l,h,p){super(e,i,a,l,p),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(I_("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new It(pt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=zs._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:ze("string",zs._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class ec extends zs{data(e={}){return super.data(e)}}class La{constructor(e,i,a,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new al(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new ec(this._firestore,this._userDataWriter,a.key,a,new al(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new It(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,h){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map((g=>{const v=new ec(l._firestore,l._userDataWriter,g.doc.key,g.doc,new al(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:p++}}))}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>h||g.type!==3)).map((g=>{const v=new ec(l._firestore,l._userDataWriter,g.doc.key,g.doc,new al(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return g.type!==0&&(y=p.indexOf(g.doc.key),p=p.delete(g.doc.key)),g.type!==1&&(p=p.add(g.doc),b=p.indexOf(g.doc.key)),{type:e2(g.type),doc:v,oldIndex:y,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new It(pt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=La._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],l=[];return this.docs.forEach((h=>{h._document!==null&&(i.push(h._document),a.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt(61501,{type:s})}}La._jsonSchemaVersion="firestore/querySnapshot/1.0",La._jsonSchema={type:ze("string",La._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class M_ extends JA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,i)}}function Vi(s,e,i){s=Us(s,Ke);const a=Us(s.firestore,xl),l=t2(s.converter,e);return V_(a,[QA(YA(a),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,Ci.none())])}function Cl(s){return V_(Us(s.firestore,xl),[new Md(s._key,Ci.none())])}function Rl(s,...e){s=Ls(s);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||V0(e[a])||(i=e[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(V0(e[a])){const v=e[a];e[a]=v.next?.bind(v),e[a+1]=v.error?.bind(v),e[a+2]=v.complete?.bind(v)}let h,p,g;if(s instanceof Ke)p=Us(s.firestore,xl),g=jd(s._key.path),h={next:v=>{e[a]&&e[a](n2(p,s,v))},error:e[a+1],complete:e[a+2]};else{const v=Us(s,Vc);p=Us(v.firestore,xl),g=v._query;const y=new M_(p);h={next:b=>{e[a]&&e[a](new La(p,y,v,b))},error:e[a+1],complete:e[a+2]},WA(s._query)}return(function(y,b,C,V){const L=new kA(V),q=new yA(b,L,C);return y.asyncQueue.enqueueAndForget((async()=>dA(await C0(y),q))),()=>{L.Nu(),y.asyncQueue.enqueueAndForget((async()=>pA(await C0(y),q)))}})(T_(p),g,l,h)}function V_(s,e){return(function(a,l){const h=new Ps;return a.asyncQueue.enqueueAndForget((async()=>CA(await zA(a),l,h))),h.promise})(T_(s),e)}function n2(s,e,i){const a=i.docs.get(e._key),l=new M_(s);return new zs(s,l,e._key,a,new al(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(l){Ka=l})(ev),fl(new Ba("firestore",((a,{instanceIdentifier:l,options:h})=>{const p=a.getProvider("app").getImmediate(),g=new xl(new FE(a.getProvider("auth-internal")),new QE(p,a.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new It(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(y.options.projectId,b)})(p,l),p);return h={useFetchStreams:i,...h},g._setSettings(h),g}),"PUBLIC").setMultipleInstances(!0)),Hr(Uy,zy,e),Hr(Uy,zy,"esm2020")})();var i2="firebase",r2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr(i2,r2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="firebasestorage.googleapis.com",s2="storageBucket",a2=120*1e3,o2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Hs{constructor(e,i,a=0){super(Zf(e),`Firebase Storage: ${i} (${Zf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mi;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mi||(Mi={}));function Zf(s){return"storage/"+s}function l2(){const s="An unknown error occurred, please check the error payload for server response.";return new Oi(Mi.UNKNOWN,s)}function u2(){return new Oi(Mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c2(){return new Oi(Mi.CANCELED,"User canceled the upload/download.")}function h2(s){return new Oi(Mi.INVALID_URL,"Invalid URL '"+s+"'.")}function f2(s){return new Oi(Mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function O0(s){return new Oi(Mi.INVALID_ARGUMENT,s)}function k_(){return new Oi(Mi.APP_DELETED,"The Firebase app was deleted.")}function d2(s){return new Oi(Mi.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let a;try{a=ui.makeFromUrl(e,i)}catch{return new ui(e,"")}if(a.path==="")return a;throw f2(e)}static makeFromUrl(e,i){let a=null;const l="([A-Za-z0-9.\\-_]+)";function h(dt){dt.path.charAt(dt.path.length-1)==="/"&&(dt.path_=dt.path_.slice(0,-1))}const p="(/(.*))?$",g=new RegExp("^gs://"+l+p,"i"),v={bucket:1,path:3};function y(dt){dt.path_=decodeURIComponent(dt.path)}const b="v[A-Za-z0-9_]+",C=i.replace(/[.]/g,"\\."),V="(/([^?#]*).*)?$",L=new RegExp(`^https?://${C}/${b}/b/${l}/o${V}`,"i"),q={bucket:1,path:3},J=i===O_?"(?:storage.googleapis.com|storage.cloud.google.com)":i,k="([^?#]*)",F=new RegExp(`^https?://${J}/${l}/${k}`,"i"),at=[{regex:g,indices:v,postModify:h},{regex:L,indices:q,postModify:y},{regex:F,indices:{bucket:1,path:2},postModify:y}];for(let dt=0;dt<at.length;dt++){const et=at[dt],K=et.regex.exec(e);if(K){const N=K[et.indices.bucket];let w=K[et.indices.path];w||(w=""),a=new ui(N,w),et.postModify(a);break}}if(a==null)throw h2(e);return a}}class p2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(s,e,i){let a=1,l=null,h=null,p=!1,g=0;function v(){return g===2}let y=!1;function b(...k){y||(y=!0,e.apply(null,k))}function C(k){l=setTimeout(()=>{l=null,s(L,v())},k)}function V(){h&&clearTimeout(h)}function L(k,...F){if(y){V();return}if(k){V(),b.call(null,k,...F);return}if(v()||p){V(),b.call(null,k,...F);return}a<64&&(a*=2);let at;g===1?(g=2,at=0):at=(a+Math.random())*1e3,C(at)}let q=!1;function J(k){q||(q=!0,V(),!y&&(l!==null?(k||(g=2),clearTimeout(l),C(0)):k||(g=1)))}return C(0),h=setTimeout(()=>{p=!0,J(!0)},i),J}function g2(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(s){return s!==void 0}function k0(s,e,i,a){if(a<e)throw O0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>i)throw O0(`Invalid value for '${s}'. Expected ${i} or less.`)}function v2(s){const e=encodeURIComponent;let i="?";for(const a in s)if(s.hasOwnProperty(a)){const l=e(a)+"="+e(s[a]);i=i+l+"&"}return i=i.slice(0,-1),i}var vc;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(vc||(vc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(s,e){const i=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,h=e.indexOf(s)!==-1;return i||l||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,i,a,l,h,p,g,v,y,b,C,V=!0,L=!1){this.url_=e,this.method_=i,this.headers_=a,this.body_=l,this.successCodes_=h,this.additionalRetryCodes_=p,this.callback_=g,this.errorCallback_=v,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=C,this.retry=V,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,J)=>{this.resolve_=q,this.reject_=J,this.start_()})}start_(){const e=(a,l)=>{if(l){a(!1,new Xu(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const p=g=>{const v=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,y)};this.progressCallback_!==null&&h.addUploadProgressListener(p),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(p),this.pendingConnection_=null;const g=h.getErrorCode()===vc.NO_ERROR,v=h.getStatus();if(!g||_2(v,this.additionalRetryCodes_)&&this.retry){const b=h.getErrorCode()===vc.ABORT;a(!1,new Xu(!1,null,b));return}const y=this.successCodes_.indexOf(v)!==-1;a(!0,new Xu(y,h))})},i=(a,l)=>{const h=this.resolve_,p=this.reject_,g=l.connection;if(l.wasSuccessCode)try{const v=this.callback_(g,g.getResponse());y2(v)?h(v):h()}catch(v){p(v)}else if(g!==null){const v=l2();v.serverResponse=g.getErrorText(),this.errorCallback_?p(this.errorCallback_(g,v)):p(v)}else if(l.canceled){const v=this.appDelete_?k_():c2();p(v)}else{const v=u2();p(v)}};this.canceled_?i(!1,new Xu(!1,null,!0)):this.backoffId_=m2(e,i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xu{constructor(e,i,a){this.wasSuccessCode=e,this.connection=i,this.canceled=!!a}}function b2(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function E2(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T2(s,e){e&&(s["X-Firebase-GMPID"]=e)}function S2(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function A2(s,e,i,a,l,h,p=!0,g=!1){const v=v2(s.urlParams),y=s.url+v,b=Object.assign({},s.headers);return T2(b,e),b2(b,i),E2(b,h),S2(b,a),new x2(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,p,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function C2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,i){this._service=e,i instanceof ui?this._location=i:this._location=ui.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new _c(e,i)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C2(this._location.path)}get storage(){return this._service}get parent(){const e=w2(this._location.path);if(e===null)return null;const i=new ui(this._location.bucket,e);return new _c(this._service,i)}_throwIfRoot(e){if(this._location.path==="")throw d2(e)}}function P0(s,e){const i=e?.[s2];return i==null?null:ui.makeFromBucketSpec(i,s)}function R2(s,e,i,a={}){s.host=`${e}:${i}`;const l=xc(e);l&&(Y0(`https://${s.host}/b`),K0("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:h}=a;h&&(s._overrideAuthToken=typeof h=="string"?h:Q0(h,s.app.options.projectId))}class D2{constructor(e,i,a,l,h,p=!1){this.app=e,this._authProvider=i,this._appCheckProvider=a,this._url=l,this._firebaseVersion=h,this._isUsingEmulator=p,this._bucket=null,this._host=O_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a2,this._maxUploadRetryTime=o2,this._requests=new Set,l!=null?this._bucket=ui.makeFromBucketSpec(l,this._host):this._bucket=P0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ui.makeFromBucketSpec(this._url,e):this._bucket=P0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const i=await e.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if(tv(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _c(this,e)}_makeRequest(e,i,a,l,h=!0){if(this._deleted)return new p2(k_());{const p=A2(e,this._appId,a,l,i,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(p),p.getPromise().then(()=>this._requests.delete(p),()=>this._requests.delete(p)),p}}async makeRequestWithTokens(e,i){const[a,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,i,a,l).getPromise()}}const U0="@firebase/storage",z0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="storage";function N2(s=iv(),e){s=Ls(s);const a=J0(s,P_).getImmediate({identifier:e}),l=F0("storage");return l&&j2(a,...l),a}function j2(s,e,i,a={}){R2(s,e,i,a)}function I2(s,{instanceIdentifier:e}){const i=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new D2(i,a,l,e,ev)}function M2(){fl(new Ba(P_,I2,"PUBLIC").setMultipleInstances(!0)),Hr(U0,z0,""),Hr(U0,z0,"esm2020")}M2();const V2={apiKey:"AIzaSyAZBf9fUWZoXnYJyBvBGEvpiu7DbHkG5Iw",authDomain:"crm-ver2.firebaseapp.com",projectId:"crm-ver2",storageBucket:"crm-ver2.firebasestorage.app",messagingSenderId:"993359540287",appId:"1:993359540287:web:43ad484af7c6616780088a"},U_=nv(V2),Le=BA(U_);N2(U_);const Oc="customers",kc="activities",Pc="meetings",Uc="propertySelections",zc="properties",O2=async s=>{try{const e=s.map(i=>Vi(xn(Le,Oc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving customers:",e)}},nc=async s=>{try{await Vi(xn(Le,Oc,s.id),s)}catch(e){console.error("Error saving customer:",e)}},z_=async s=>{try{await Cl(xn(Le,Oc,s))}catch(e){console.error("Error deleting customer:",e)}},L_=s=>Rl(wl(Le,Oc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in customers subscription:",e)}),k2=async s=>{try{const e=s.map(i=>Vi(xn(Le,kc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving activities:",e)}},B_=async s=>{try{await Vi(xn(Le,kc,s.id),s)}catch(e){console.error("Error saving activity:",e)}},q_=async s=>{try{await Cl(xn(Le,kc,s))}catch(e){console.error("Error deleting activity:",e)}},H_=s=>Rl(wl(Le,kc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in activities subscription:",e)}),P2=async s=>{try{const e=s.map(i=>Vi(xn(Le,Pc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving meetings:",e)}},F_=async s=>{try{await Vi(xn(Le,Pc,s.id),s)}catch(e){console.error("Error saving meeting:",e)}},G_=async s=>{try{await Cl(xn(Le,Pc,s))}catch(e){console.error("Error deleting meeting:",e)}},Y_=s=>Rl(wl(Le,Pc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in meetings subscription:",e)}),U2=async s=>{try{const e=s.map(i=>Vi(xn(Le,Uc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving property selections:",e)}},Q_=async s=>{try{await Vi(xn(Le,Uc,s.id),s)}catch(e){console.error("Error saving property selection:",e)}},K_=async s=>{try{await Cl(xn(Le,Uc,s))}catch(e){console.error("Error deleting property selection:",e)}},X_=s=>Rl(wl(Le,Uc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in property selections subscription:",e)}),$_=async s=>{try{const e=s.map(i=>Vi(xn(Le,zc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving properties:",e)}},Z_=async s=>{try{await Vi(xn(Le,zc,s.id),s)}catch(e){console.error("Error saving property:",e)}},W_=async s=>{try{await Cl(xn(Le,zc,s))}catch(e){console.error("Error deleting property:",e)}},J_=s=>Rl(wl(Le,zc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in properties subscription:",e)}),z2=Object.freeze(Object.defineProperty({__proto__:null,deleteActivity:q_,deleteCustomer:z_,deleteMeeting:G_,deleteProperty:W_,deletePropertySelection:K_,saveActivities:k2,saveActivity:B_,saveCustomer:nc,saveCustomers:O2,saveMeeting:F_,saveMeetings:P2,saveProperties:$_,saveProperty:Z_,savePropertySelection:Q_,savePropertySelections:U2,subscribeToActivities:H_,subscribeToCustomers:L_,subscribeToMeetings:Y_,subscribeToProperties:J_,subscribeToPropertySelections:X_},Symbol.toStringTag,{value:"Module"}));new Date().toISOString(),new Date().toISOString(),new Date().toISOString();function L2(){const[s,e]=gt.useState([]),[i,a]=gt.useState([]),[l,h]=gt.useState([]),[p,g]=gt.useState([]),[v,y]=gt.useState([]),[b,C]=gt.useState(null),[V,L]=gt.useState(null),[q,J]=gt.useState(!1),[k,F]=gt.useState(!1),[it,at]=gt.useState(null),[dt,et]=gt.useState(null),[K,N]=gt.useState(""),[w,T]=gt.useState(""),[j,D]=gt.useState(null),[R,S]=gt.useState(!1),[vt,St]=gt.useState(""),[O,nt]=gt.useState(!1),ht=gt.useRef(null);gt.useEffect(()=>{const mt=L_(wt=>{e(wt)}),rt=H_(wt=>{a(wt)}),ft=Y_(wt=>{h(wt)}),xt=X_(wt=>{g(wt)}),Et=J_(wt=>{y(wt)});return()=>{mt(),rt(),ft(),xt(),Et()}},[]),gt.useEffect(()=>{if(s.length===0||l.length===0)return;const mt=new Date;mt.setHours(0,0,0,0),s.forEach(rt=>{l.filter(Et=>Et.customerId===rt.id).some(Et=>{const wt=new Date(Et.date);return wt.setHours(0,0,0,0),wt<mt})&&rt.status===""&&nc({...rt,status:""})})},[s,l]);const bt=mt=>{vt===""?(N(mt),D(null)):T(mt)},I=mt=>{D(mt)},$=mt=>{b===mt.id?C(null):C(mt.id)},z=(mt=null)=>{at(mt),J(!0),mt&&mt.id===b&&C(null)},U=()=>{J(!1),at(null)},W=async mt=>{await nc(mt)},lt=async mt=>{const rt={...mt,isFavorite:!mt.isFavorite};await nc(rt)},H=async mt=>{confirm(`"${mt.name}"   ?`)&&(await z_(mt.id),b===mt.id&&C(null))},_t=async mt=>{await B_(mt)},yt=async mt=>{confirm("   ?")&&await q_(mt)},Dt=async mt=>{await F_(mt)},Yt=async mt=>{confirm("   ?")&&await G_(mt)},Wt=async mt=>{await Q_(mt)},Be=async mt=>{confirm("   ?")&&await K_(mt)},qe=mt=>{V===mt.id?L(null):L(mt.id)},re=(mt=null)=>{et(mt),F(!0),mt&&mt.id===V&&L(null)},zt=()=>{F(!1),et(null)},bn=async mt=>{await Z_(mt)},De=async mt=>{confirm(`"${mt.buildingName}"   ?`)&&(await W_(mt.id),V===mt.id&&L(null))},ci=async mt=>{try{await $_(mt)}catch(rt){throw console.error("Error importing properties:",rt),rt}},ue=()=>{const mt={customers:s,activities:i,meetings:l,propertySelections:p,properties:v},rt=new Blob([JSON.stringify(mt,null,2)],{type:"application/json"}),ft=URL.createObjectURL(rt),xt=document.createElement("a");xt.href=ft,xt.download=`customer-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(xt),xt.click(),document.body.removeChild(xt),URL.revokeObjectURL(ft)},be=async mt=>{const rt=mt.target.files[0];if(!rt)return;const ft=new FileReader;ft.onload=async xt=>{try{const Et=JSON.parse(xt.target.result);if(Et&&Array.isArray(Et.customers)&&Array.isArray(Et.activities)){const{saveCustomers:wt,saveActivities:Nt,saveMeetings:Bt,savePropertySelections:jt,saveProperties:At}=await L1(async()=>{const{saveCustomers:me,saveActivities:He,saveMeetings:un,savePropertySelections:Tn,saveProperties:Rn}=await Promise.resolve().then(()=>z2);return{saveCustomers:me,saveActivities:He,saveMeetings:un,savePropertySelections:Tn,saveProperties:Rn}},void 0);await wt(Et.customers||[]),await Nt(Et.activities||[]),await Bt(Et.meetings||[]),await jt(Et.propertySelections||[]),await At(Et.properties||[]),alert("  .")}else throw new Error("  .")}catch(Et){alert(` : ${Et.message}`)}},ft.readAsText(rt),mt.target.value=null},En=mt=>{const rt=i.filter(xt=>xt.customerId===mt);if(rt.length===0)return null;const ft=rt.sort((xt,Et)=>new Date(Et.date)-new Date(xt.date));return new Date(ft[0].date)},ar=mt=>({:"   ",:"    ",:"    ",:"    ",:"    ",:"      ",:"      ",:"     ",:"  (, ,  )   ",:"  (, ,  )   ",:"       (  ).     "})[mt]||"",ki=(()=>{const mt=new Date;mt.setHours(0,0,0,0);let rt=s.filter(ft=>{if(K==="")return ft.isFavorite;if(K==="")return ft.status==="";if(K==="")return l.filter(Nt=>Nt.customerId===ft.id).some(Nt=>{const Bt=new Date(Nt.date);return Bt.setHours(0,0,0,0),Bt.getTime()===mt.getTime()});if(K==="")return l.filter(Nt=>Nt.customerId===ft.id).some(Nt=>{const Bt=new Date(Nt.date);return Bt.setHours(0,0,0,0),Bt>mt});if(K==="")return i.filter(Nt=>Nt.customerId===ft.id).some(Nt=>{const Bt=new Date(Nt.date);return Bt.setHours(0,0,0,0),Bt.getTime()===mt.getTime()});if(K==="")return i.filter(Nt=>Nt.customerId===ft.id).some(Nt=>{const Bt=new Date(Nt.date);Bt.setHours(0,0,0,0);const jt=new Date(mt);return jt.setDate(jt.getDate()-1),Bt.getTime()===jt.getTime()});if(K===""){if(ft.status==="")return!1;const wt=i.filter(jt=>jt.customerId===ft.id),Nt=new Date(mt),Bt=new Date(mt);return Bt.setDate(Bt.getDate()-1),!wt.some(jt=>{const At=new Date(jt.date);return At.setHours(0,0,0,0),At.getTime()===Nt.getTime()||At.getTime()===Bt.getTime()})}if(K===""){const wt=i.filter(Nt=>Nt.customerId===ft.id);return wt.length===0?!1:wt.some(Nt=>!(Nt.followUps||[]).some(jt=>jt.author===""))}const xt=K===""||ft.status===K,Et=!j||ft.progress===j;return xt&&Et});return K===""?rt.sort((ft,xt)=>{const Et=l.filter(jt=>{const At=new Date(jt.date);return At.setHours(0,0,0,0),jt.customerId===ft.id&&At.getTime()===mt.getTime()}),wt=l.filter(jt=>{const At=new Date(jt.date);return At.setHours(0,0,0,0),jt.customerId===xt.id&&At.getTime()===mt.getTime()});if(Et.length===0)return 1;if(wt.length===0)return-1;const Nt=new Date(Et[0].date).getTime(),Bt=new Date(wt[0].date).getTime();return Nt-Bt}):K===""?rt.sort((ft,xt)=>{const Et=l.filter(jt=>{const At=new Date(jt.date);return At.setHours(0,0,0,0),jt.customerId===ft.id&&At>mt}),wt=l.filter(jt=>{const At=new Date(jt.date);return At.setHours(0,0,0,0),jt.customerId===xt.id&&At>mt});if(Et.length===0)return 1;if(wt.length===0)return-1;const Nt=Et.sort((jt,At)=>new Date(jt.date)-new Date(At.date))[0],Bt=wt.sort((jt,At)=>new Date(jt.date)-new Date(At.date))[0];return new Date(Nt.date)-new Date(Bt.date)}):K===""?rt.sort((ft,xt)=>{const Et=i.filter(jt=>jt.customerId===ft.id&&new Date(jt.date).toDateString()===mt.toDateString()),wt=i.filter(jt=>jt.customerId===xt.id&&new Date(jt.date).toDateString()===mt.toDateString());if(Et.length===0)return 1;if(wt.length===0)return-1;const Nt=Et.sort((jt,At)=>new Date(At.date)-new Date(jt.date))[0],Bt=wt.sort((jt,At)=>new Date(At.date)-new Date(jt.date))[0];return new Date(Bt.date)-new Date(Nt.date)}):K===""?rt.sort((ft,xt)=>{const Et=new Date(mt);Et.setDate(Et.getDate()-1);const wt=i.filter(At=>At.customerId===ft.id&&new Date(At.date).toDateString()===Et.toDateString()),Nt=i.filter(At=>At.customerId===xt.id&&new Date(At.date).toDateString()===Et.toDateString());if(wt.length===0)return 1;if(Nt.length===0)return-1;const Bt=wt.sort((At,me)=>new Date(me.date)-new Date(At.date))[0],jt=Nt.sort((At,me)=>new Date(me.date)-new Date(At.date))[0];return new Date(jt.date)-new Date(Bt.date)}):K===""&&rt.sort((ft,xt)=>{const Et=En(ft.id),wt=En(xt.id);return Et?wt?Et-wt:-1:1}),rt})(),Wr=w===""?v:v.filter(mt=>mt.category===w),Pn=s.find(mt=>mt.id===b),Un=v.find(mt=>mt.id===V);return f.jsxs("div",{className:"app-container",style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw"},children:[R&&f.jsx("div",{className:"mobile-overlay",onClick:()=>S(!1)}),f.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[f.jsx(q1,{activeTab:vt,activeFilter:vt===""?K:w,onFilterChange:bt,customers:s,meetings:l,activities:i,properties:v,isMobileOpen:R,onMobileClose:()=>S(!1)}),f.jsxs("div",{className:"main-content",style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[f.jsxs("header",{className:"main-header",children:[f.jsx("button",{className:"hamburger-btn",onClick:()=>S(!0),children:""}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[f.jsx("h1",{children:vt===""?" ":""}),vt===""&&K!==""&&f.jsxs("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:[": ",K," - ",ar(K)]})]}),f.jsx("div",{className:"header-actions",children:vt===""?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>z(),className:"btn-primary",children:"+  "}),f.jsx("button",{onClick:ue,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>ht.current?.click(),className:"btn-secondary",children:""}),f.jsx("input",{type:"file",ref:ht,onChange:be,style:{display:"none"},accept:".json"})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>re(),className:"btn-primary",children:"+  "}),f.jsx("button",{onClick:()=>nt(!0),className:"btn-secondary",children:"CSV "}),f.jsx("button",{onClick:ue,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>ht.current?.click(),className:"btn-secondary",children:""}),f.jsx("input",{type:"file",ref:ht,onChange:be,style:{display:"none"},accept:".json"})]})})]}),f.jsx("main",{className:"table-container",style:{flex:1,overflow:"auto"},children:vt===""?f.jsx(H1,{customers:ki,onSelectCustomer:$,onEdit:z,onDelete:H,selectedCustomerId:b,activeFilter:K,activeProgressFilter:j,onProgressFilterChange:I,allCustomers:s,onFavoriteCustomer:lt,activities:i,meetings:l}):f.jsx(F1,{properties:Wr,onSelectProperty:qe,onEdit:re,onDelete:De,selectedPropertyId:V})})]})]}),f.jsxs("div",{className:"tab-bar",style:{display:"flex",borderTop:"2px solid #e0e0e0",backgroundColor:"#f8f8f8",height:"70px",justifyContent:"flex-end",paddingRight:"40px",gap:"60px",alignItems:"center"},children:[f.jsx("button",{onClick:()=>St(""),style:{padding:"12px 24px",fontSize:"18px",fontWeight:"bold",color:vt===""?"#000":"#888",border:"none",backgroundColor:vt===""?"#fff":"transparent",borderBottom:vt===""?"4px solid #FF6B9D":"4px solid transparent",borderRadius:vt===""?"8px 8px 0 0":"0",cursor:"pointer",transition:"all 0.3s ease",boxShadow:vt===""?"0 -2px 8px rgba(0,0,0,0.08)":"none"},children:" "}),f.jsx("button",{onClick:()=>St(""),style:{padding:"12px 24px",fontSize:"18px",fontWeight:"bold",color:vt===""?"#000":"#888",border:"none",backgroundColor:vt===""?"#fff":"transparent",borderBottom:vt===""?"4px solid #2196F3":"4px solid transparent",borderRadius:vt===""?"8px 8px 0 0":"0",cursor:"pointer",transition:"all 0.3s ease",boxShadow:vt===""?"0 -2px 8px rgba(0,0,0,0.08)":"none"},children:" "})]}),vt===""&&f.jsxs(f.Fragment,{children:[f.jsx(lb,{selectedCustomer:Pn,onClose:()=>C(null),onEditCustomer:z,onUpdateCustomer:W,onDeleteCustomer:H,activities:i,onSaveActivity:_t,onDeleteActivity:yt,meetings:l,onSaveMeeting:Dt,onDeleteMeeting:Yt,propertySelections:p,onSavePropertySelection:Wt,onDeletePropertySelection:Be}),f.jsx(Q1,{isOpen:q,onClose:U,onSave:W,editData:it})]}),vt===""&&f.jsxs(f.Fragment,{children:[f.jsx(ub,{selectedProperty:Un,onClose:()=>L(null),onEditProperty:re,onUpdateProperty:bn,onDeleteProperty:De}),f.jsx(K1,{isOpen:k,onClose:zt,onSave:bn,editData:dt}),O&&f.jsx(fb,{onImport:ci,onClose:()=>nt(!1)})]})]})}P1.createRoot(document.getElementById("root")).render(f.jsx(gt.StrictMode,{children:f.jsx(L2,{})}));
