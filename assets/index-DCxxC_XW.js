(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();var Of={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function vE(){if(oy)return Ql;oy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,h){var d=null;if(h!==void 0&&(d=""+h),o.key!==void 0&&(d=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:h}}return Ql.Fragment=e,Ql.jsx=i,Ql.jsxs=i,Ql}var uy;function EE(){return uy||(uy=1,Of.exports=vE()),Of.exports}var p=EE(),jf={exports:{}},jt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function TE(){if(cy)return jt;cy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.iterator;function I(x){return x===null||typeof x!="object"?null:(x=C&&x[C]||x["@@iterator"],typeof x=="function"?x:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,ot={};function X(x,U,K){this.props=x,this.context=U,this.refs=ot,this.updater=K||L}X.prototype.isReactComponent={},X.prototype.setState=function(x,U){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,U,"setState")},X.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function ut(){}ut.prototype=X.prototype;function et(x,U,K){this.props=x,this.context=U,this.refs=ot,this.updater=K||L}var ht=et.prototype=new ut;ht.constructor=et,z(ht,X.prototype),ht.isPureReactComponent=!0;var dt=Array.isArray,ct={H:null,A:null,T:null,S:null,V:null},it=Object.prototype.hasOwnProperty;function N(x,U,K,Q,mt,rt){return K=rt.ref,{$$typeof:r,type:x,key:U,ref:K!==void 0?K:null,props:rt}}function S(x,U){return N(x.type,U,void 0,void 0,void 0,x.props)}function R(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function V(x){var U={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(K){return U[K]})}var D=/\/+/g;function O(x,U){return typeof x=="object"&&x!==null&&x.key!=null?V(""+x.key):U.toString(36)}function w(){}function gt(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(w,w):(x.status="pending",x.then(function(U){x.status==="pending"&&(x.status="fulfilled",x.value=U)},function(U){x.status==="pending"&&(x.status="rejected",x.reason=U)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function nt(x,U,K,Q,mt){var rt=typeof x;(rt==="undefined"||rt==="boolean")&&(x=null);var W=!1;if(x===null)W=!0;else switch(rt){case"bigint":case"string":case"number":W=!0;break;case"object":switch(x.$$typeof){case r:case e:W=!0;break;case b:return W=x._init,nt(W(x._payload),U,K,Q,mt)}}if(W)return mt=mt(x),W=Q===""?"."+O(x,0):Q,dt(mt)?(K="",W!=null&&(K=W.replace(D,"$&/")+"/"),nt(mt,U,K,"",function(bt){return bt})):mt!=null&&(R(mt)&&(mt=S(mt,K+(mt.key==null||x&&x.key===mt.key?"":(""+mt.key).replace(D,"$&/")+"/")+W)),U.push(mt)),1;W=0;var Et=Q===""?".":Q+":";if(dt(x))for(var _t=0;_t<x.length;_t++)Q=x[_t],rt=Et+O(Q,_t),W+=nt(Q,U,K,rt,mt);else if(_t=I(x),typeof _t=="function")for(x=_t.call(x),_t=0;!(Q=x.next()).done;)Q=Q.value,rt=Et+O(Q,_t++),W+=nt(Q,U,K,rt,mt);else if(rt==="object"){if(typeof x.then=="function")return nt(gt(x),U,K,Q,mt);throw U=String(x),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return W}function P(x,U,K){if(x==null)return x;var Q=[],mt=0;return nt(x,Q,"","",function(rt){return U.call(K,rt,mt++)}),Q}function J(x){if(x._status===-1){var U=x._result;U=U(),U.then(function(K){(x._status===0||x._status===-1)&&(x._status=1,x._result=K)},function(K){(x._status===0||x._status===-1)&&(x._status=2,x._result=K)}),x._status===-1&&(x._status=0,x._result=U)}if(x._status===1)return x._result.default;throw x._result}var H=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function Z(){}return jt.Children={map:P,forEach:function(x,U,K){P(x,function(){U.apply(this,arguments)},K)},count:function(x){var U=0;return P(x,function(){U++}),U},toArray:function(x){return P(x,function(U){return U})||[]},only:function(x){if(!R(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},jt.Component=X,jt.Fragment=i,jt.Profiler=o,jt.PureComponent=et,jt.StrictMode=a,jt.Suspense=y,jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct,jt.__COMPILER_RUNTIME={__proto__:null,c:function(x){return ct.H.useMemoCache(x)}},jt.cache=function(x){return function(){return x.apply(null,arguments)}},jt.cloneElement=function(x,U,K){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var Q=z({},x.props),mt=x.key,rt=void 0;if(U!=null)for(W in U.ref!==void 0&&(rt=void 0),U.key!==void 0&&(mt=""+U.key),U)!it.call(U,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&U.ref===void 0||(Q[W]=U[W]);var W=arguments.length-2;if(W===1)Q.children=K;else if(1<W){for(var Et=Array(W),_t=0;_t<W;_t++)Et[_t]=arguments[_t+2];Q.children=Et}return N(x.type,mt,void 0,void 0,rt,Q)},jt.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:h,_context:x},x},jt.createElement=function(x,U,K){var Q,mt={},rt=null;if(U!=null)for(Q in U.key!==void 0&&(rt=""+U.key),U)it.call(U,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(mt[Q]=U[Q]);var W=arguments.length-2;if(W===1)mt.children=K;else if(1<W){for(var Et=Array(W),_t=0;_t<W;_t++)Et[_t]=arguments[_t+2];mt.children=Et}if(x&&x.defaultProps)for(Q in W=x.defaultProps,W)mt[Q]===void 0&&(mt[Q]=W[Q]);return N(x,rt,void 0,void 0,null,mt)},jt.createRef=function(){return{current:null}},jt.forwardRef=function(x){return{$$typeof:g,render:x}},jt.isValidElement=R,jt.lazy=function(x){return{$$typeof:b,_payload:{_status:-1,_result:x},_init:J}},jt.memo=function(x,U){return{$$typeof:_,type:x,compare:U===void 0?null:U}},jt.startTransition=function(x){var U=ct.T,K={};ct.T=K;try{var Q=x(),mt=ct.S;mt!==null&&mt(K,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Z,H)}catch(rt){H(rt)}finally{ct.T=U}},jt.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()},jt.use=function(x){return ct.H.use(x)},jt.useActionState=function(x,U,K){return ct.H.useActionState(x,U,K)},jt.useCallback=function(x,U){return ct.H.useCallback(x,U)},jt.useContext=function(x){return ct.H.useContext(x)},jt.useDebugValue=function(){},jt.useDeferredValue=function(x,U){return ct.H.useDeferredValue(x,U)},jt.useEffect=function(x,U,K){var Q=ct.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(x,U)},jt.useId=function(){return ct.H.useId()},jt.useImperativeHandle=function(x,U,K){return ct.H.useImperativeHandle(x,U,K)},jt.useInsertionEffect=function(x,U){return ct.H.useInsertionEffect(x,U)},jt.useLayoutEffect=function(x,U){return ct.H.useLayoutEffect(x,U)},jt.useMemo=function(x,U){return ct.H.useMemo(x,U)},jt.useOptimistic=function(x,U){return ct.H.useOptimistic(x,U)},jt.useReducer=function(x,U,K){return ct.H.useReducer(x,U,K)},jt.useRef=function(x){return ct.H.useRef(x)},jt.useState=function(x){return ct.H.useState(x)},jt.useSyncExternalStore=function(x,U,K){return ct.H.useSyncExternalStore(x,U,K)},jt.useTransition=function(){return ct.H.useTransition()},jt.version="19.1.1",jt}var hy;function yd(){return hy||(hy=1,jf.exports=TE()),jf.exports}var Tt=yd(),Pf={exports:{}},Yl={},Uf={exports:{}},kf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function bE(){return fy||(fy=1,(function(r){function e(P,J){var H=P.length;P.push(J);t:for(;0<H;){var Z=H-1>>>1,x=P[Z];if(0<o(x,J))P[Z]=J,P[H]=x,H=Z;else break t}}function i(P){return P.length===0?null:P[0]}function a(P){if(P.length===0)return null;var J=P[0],H=P.pop();if(H!==J){P[0]=H;t:for(var Z=0,x=P.length,U=x>>>1;Z<U;){var K=2*(Z+1)-1,Q=P[K],mt=K+1,rt=P[mt];if(0>o(Q,H))mt<x&&0>o(rt,Q)?(P[Z]=rt,P[mt]=H,Z=mt):(P[Z]=Q,P[K]=H,Z=K);else if(mt<x&&0>o(rt,H))P[Z]=rt,P[mt]=H,Z=mt;else break t}}return J}function o(P,J){var H=P.sortIndex-J.sortIndex;return H!==0?H:P.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var y=[],_=[],b=1,C=null,I=3,L=!1,z=!1,ot=!1,X=!1,ut=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;function dt(P){for(var J=i(_);J!==null;){if(J.callback===null)a(_);else if(J.startTime<=P)a(_),J.sortIndex=J.expirationTime,e(y,J);else break;J=i(_)}}function ct(P){if(ot=!1,dt(P),!z)if(i(y)!==null)z=!0,it||(it=!0,O());else{var J=i(_);J!==null&&nt(ct,J.startTime-P)}}var it=!1,N=-1,S=5,R=-1;function V(){return X?!0:!(r.unstable_now()-R<S)}function D(){if(X=!1,it){var P=r.unstable_now();R=P;var J=!0;try{t:{z=!1,ot&&(ot=!1,et(N),N=-1),L=!0;var H=I;try{e:{for(dt(P),C=i(y);C!==null&&!(C.expirationTime>P&&V());){var Z=C.callback;if(typeof Z=="function"){C.callback=null,I=C.priorityLevel;var x=Z(C.expirationTime<=P);if(P=r.unstable_now(),typeof x=="function"){C.callback=x,dt(P),J=!0;break e}C===i(y)&&a(y),dt(P)}else a(y);C=i(y)}if(C!==null)J=!0;else{var U=i(_);U!==null&&nt(ct,U.startTime-P),J=!1}}break t}finally{C=null,I=H,L=!1}J=void 0}}finally{J?O():it=!1}}}var O;if(typeof ht=="function")O=function(){ht(D)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,gt=w.port2;w.port1.onmessage=D,O=function(){gt.postMessage(null)}}else O=function(){ut(D,0)};function nt(P,J){N=ut(function(){P(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(P){switch(I){case 1:case 2:case 3:var J=3;break;default:J=I}var H=I;I=J;try{return P()}finally{I=H}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function(P,J){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var H=I;I=P;try{return J()}finally{I=H}},r.unstable_scheduleCallback=function(P,J,H){var Z=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,P){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=H+x,P={id:b++,callback:J,priorityLevel:P,startTime:H,expirationTime:x,sortIndex:-1},H>Z?(P.sortIndex=H,e(_,P),i(y)===null&&P===i(_)&&(ot?(et(N),N=-1):ot=!0,nt(ct,H-Z))):(P.sortIndex=x,e(y,P),z||L||(z=!0,it||(it=!0,O()))),P},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(P){var J=I;return function(){var H=I;I=J;try{return P.apply(this,arguments)}finally{I=H}}}})(kf)),kf}var dy;function SE(){return dy||(dy=1,Uf.exports=bE()),Uf.exports}var Lf={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function AE(){if(my)return Ze;my=1;var r=yd();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(y,_,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:C==null?null:""+C,children:y,containerInfo:_,implementation:b}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ze.createPortal=function(y,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return h(y,_,null,b)},Ze.flushSync=function(y){var _=d.T,b=a.p;try{if(d.T=null,a.p=2,y)return y()}finally{d.T=_,a.p=b,a.d.f()}},Ze.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(y,_))},Ze.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},Ze.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var b=_.as,C=g(b,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,L=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?a.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:C,integrity:I,fetchPriority:L}):b==="script"&&a.d.X(y,{crossOrigin:C,integrity:I,fetchPriority:L,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ze.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=g(_.as,_.crossOrigin);a.d.M(y,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(y)},Ze.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,C=g(b,_.crossOrigin);a.d.L(y,b,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ze.preloadModule=function(y,_){if(typeof y=="string")if(_){var b=g(_.as,_.crossOrigin);a.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(y)},Ze.requestFormReset=function(y){a.d.r(y)},Ze.unstable_batchedUpdates=function(y,_){return y(_)},Ze.useFormState=function(y,_,b){return d.H.useFormState(y,_,b)},Ze.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ze.version="19.1.1",Ze}var py;function xE(){if(py)return Lf.exports;py=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lf.exports=AE(),Lf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function RE(){if(gy)return Yl;gy=1;var r=SE(),e=yd(),i=xE();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(a(188))}function y(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,l=n;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return g(c),t;if(f===l)return g(c),n;f=f.sibling}throw Error(a(188))}if(s.return!==l.return)s=c,l=f;else{for(var E=!1,T=c.child;T;){if(T===s){E=!0,s=c,l=f;break}if(T===l){E=!0,l=c,s=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===s){E=!0,s=f,l=c;break}if(T===l){E=!0,l=f,s=c;break}T=T.sibling}if(!E)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,C=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),ot=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ut=Symbol.for("react.provider"),et=Symbol.for("react.consumer"),ht=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),it=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function gt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case X:return"Profiler";case ot:return"StrictMode";case ct:return"Suspense";case it:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case ht:return(t.displayName||"Context")+".Provider";case et:return(t._context.displayName||"Context")+".Consumer";case dt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:gt(t.type)||"Memo";case S:n=t._payload,t=t._init;try{return gt(t(n))}catch{}}return null}var nt=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Z=[],x=-1;function U(t){return{current:t}}function K(t){0>x||(t.current=Z[x],Z[x]=null,x--)}function Q(t,n){x++,Z[x]=t.current,t.current=n}var mt=U(null),rt=U(null),W=U(null),Et=U(null);function _t(t,n){switch(Q(W,n),Q(rt,t),Q(mt,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Pg(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Pg(n),t=Ug(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(mt),Q(mt,t)}function bt(){K(mt),K(rt),K(W)}function kt(t){t.memoizedState!==null&&Q(Et,t);var n=mt.current,s=Ug(n,t.type);n!==s&&(Q(rt,t),Q(mt,s))}function Lt(t){rt.current===t&&(K(mt),K(rt)),Et.current===t&&(K(Et),Bl._currentValue=H)}var Yt=Object.prototype.hasOwnProperty,Nt=r.unstable_scheduleCallback,Ot=r.unstable_cancelCallback,vi=r.unstable_shouldYield,zs=r.unstable_requestPaint,Ye=r.unstable_now,_o=r.unstable_getCurrentPriorityLevel,we=r.unstable_ImmediatePriority,Oe=r.unstable_UserBlockingPriority,Ei=r.unstable_NormalPriority,jc=r.unstable_LowPriority,qa=r.unstable_IdlePriority,Pc=r.log,Bs=r.unstable_setDisableYieldValue,Fi=null,Ke=null;function En(t){if(typeof Pc=="function"&&Bs(t),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Fi,t)}catch{}}var nn=Math.clz32?Math.clz32:Eo,Uc=Math.log,vo=Math.LN2;function Eo(t){return t>>>=0,t===0?32:31-(Uc(t)/vo|0)|0}var Kn=256,Gi=4194304;function Pn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Tn(t,n,s){var l=t.pendingLanes;if(l===0)return 0;var c=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?c=Pn(l):(E&=T,E!==0?c=Pn(E):s||(s=T&~t,s!==0&&(c=Pn(s))))):(T=l&~f,T!==0?c=Pn(T):E!==0?c=Pn(E):s||(s=l&~t,s!==0&&(c=Pn(s)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,s=n&-n,f>=s||f===32&&(s&4194048)!==0)?n:c}function Qi(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Pr(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ha(){var t=Kn;return Kn<<=1,(Kn&4194048)===0&&(Kn=256),t}function Yi(){var t=Gi;return Gi<<=1,(Gi&62914560)===0&&(Gi=4194304),t}function Ur(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function ge(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function To(t,n,s,l,c,f){var E=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,M=t.expirationTimes,F=t.hiddenUpdates;for(s=E&~s;0<s;){var tt=31-nn(s),at=1<<tt;T[tt]=0,M[tt]=-1;var G=F[tt];if(G!==null)for(F[tt]=null,tt=0;tt<G.length;tt++){var Y=G[tt];Y!==null&&(Y.lane&=-536870913)}s&=~at}l!==0&&Ki(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~n))}function Ki(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-nn(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function Xi(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-nn(s),c=1<<l;c&n|t[l]&n&&(t[l]|=n),s&=~c}}function Fa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ga(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ti(){var t=J.p;return t!==0?t:(t=window.event,t===void 0?32:ny(t.type))}function kc(t,n){var s=J.p;try{return J.p=t,n()}finally{J.p=s}}var Xn=Math.random().toString(36).slice(2),ye="__reactFiber$"+Xn,ze="__reactProps$"+Xn,bi="__reactContainer$"+Xn,qs="__reactEvents$"+Xn,Hs="__reactListeners$"+Xn,Lc="__reactHandles$"+Xn,Un="__reactResources$"+Xn,$i="__reactMarker$"+Xn;function kr(t){delete t[ye],delete t[ze],delete t[qs],delete t[Hs],delete t[Lc]}function $n(t){var n=t[ye];if(n)return n;for(var s=t.parentNode;s;){if(n=s[bi]||s[ye]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Bg(t);t!==null;){if(s=t[ye])return s;t=Bg(t)}return n}t=s,s=t.parentNode}return null}function Zn(t){if(t=t[ye]||t[bi]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Zi(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Ji(t){var n=t[Un];return n||(n=t[Un]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function _e(t){t[$i]=!0}var bo=new Set,Fs={};function Jn(t,n){Wn(t,n),Wn(t+"Capture",n)}function Wn(t,n){for(Fs[t]=n,t=0;t<n.length;t++)bo.add(n[t])}var Gs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ti={},Lr={};function zc(t){return Yt.call(Lr,t)?!0:Yt.call(ti,t)?!1:Gs.test(t)?Lr[t]=!0:(ti[t]=!0,!1)}function Qs(t,n,s){if(zc(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function Ys(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function bn(t,n,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+l)}}var Ks,zr;function Si(t){if(Ks===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Ks=n&&n[1]||"",zr=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ks+t+zr}var Br=!1;function qr(t,n){if(!t||Br)return"";Br=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(Y){var G=Y}Reflect.construct(t,[],at)}else{try{at.call()}catch(Y){G=Y}t.call(at.prototype)}}else{try{throw Error()}catch(Y){G=Y}(at=t())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var M=E.split(`
`),F=T.split(`
`);for(c=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;if(l===M.length||c===F.length)for(l=M.length-1,c=F.length-1;1<=l&&0<=c&&M[l]!==F[c];)c--;for(;1<=l&&0<=c;l--,c--)if(M[l]!==F[c]){if(l!==1||c!==1)do if(l--,c--,0>c||M[l]!==F[c]){var tt=`
`+M[l].replace(" at new "," at ");return t.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",t.displayName)),tt}while(1<=l&&0<=c);break}}}finally{Br=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Si(s):""}function Bc(t){switch(t.tag){case 26:case 27:case 5:return Si(t.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return qr(t.type,!1);case 11:return qr(t.type.render,!1);case 1:return qr(t.type,!0);case 31:return Si("Activity");default:return""}}function kn(t){try{var n="";do n+=Bc(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function he(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Xs(t){var n=Wi(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ts(t){t._valueTracker||(t._valueTracker=Xs(t))}function te(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=Wi(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function Ai(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $s=/[\n"\\]/g;function je(t){return t.replace($s,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Qa(t,n,s,l,c,f,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),n!=null?E==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+he(n)):t.value!==""+he(n)&&(t.value=""+he(n)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),n!=null?Ka(t,E,he(n)):s!=null?Ka(t,E,he(s)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+he(T):t.removeAttribute("name")}function Ya(t,n,s,l,c,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;s=s!=null?""+he(s):"",n=n!=null?""+he(n):s,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function Ka(t,n,s){n==="number"&&Ai(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function es(t,n,s,l){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&l&&(t[s].defaultSelected=!0)}else{for(s=""+he(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function So(t,n,s){if(n!=null&&(n=""+he(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+he(s):""}function Ao(t,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(nt(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=he(n),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function Sn(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var xi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xa(t,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,s):typeof s!="number"||s===0||xi.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function $a(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&s[c]!==l&&Xa(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&Xa(t,f,n[f])}function Hr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ro=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ln(t){return Ro.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Za=null;function Ja(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ns=null,sn=null;function wo(t){var n=Zn(t);if(n&&(t=n.stateNode)){var s=t[ze]||null;t:switch(t=n.stateNode,n.type){case"input":if(Qa(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+je(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var c=l[ze]||null;if(!c)throw Error(a(90));Qa(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===t.form&&te(l)}break t;case"textarea":So(t,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&es(t,!!s.multiple,n,!1)}}}var Zs=!1;function Js(t,n,s){if(Zs)return t(n,s);Zs=!0;try{var l=t(n);return l}finally{if(Zs=!1,(ns!==null||sn!==null)&&(gu(),ns&&(n=ns,t=sn,sn=ns=null,wo(n),t)))for(n=0;n<t.length;n++)wo(t[n])}}function is(t,n){var s=t.stateNode;if(s===null)return null;var l=s[ze]||null;if(l===null)return null;s=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(rn)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Ri=!1}var An=null,re=null,Fr=null;function Co(){if(Fr)return Fr;var t,n=re,s=n.length,l,c="value"in An?An.value:An.textContent,f=c.length;for(t=0;t<s&&n[t]===c[t];t++);var E=s-t;for(l=1;l<=E&&n[s-l]===c[f-l];l++);return Fr=c.slice(t,1<l?1-l:void 0)}function Ws(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function tr(){return!0}function Wa(){return!1}function Ce(t){function n(s,l,c,f,E){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?tr:Wa,this.isPropagationStopped=Wa,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),n}var Xe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},er=Ce(Xe),nr=b({},Xe,{view:0,detail:0}),ir=Ce(nr),Gr,sr,ei,rr=b({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(Gr=t.screenX-ei.screenX,sr=t.screenY-ei.screenY):sr=Gr=0,ei=t),Gr)},movementY:function(t){return"movementY"in t?t.movementY:sr}}),ar=Ce(rr),qc=b({},rr,{dataTransfer:0}),Do=Ce(qc),lr=b({},nr,{relatedTarget:0}),Qr=Ce(lr),No=b({},Xe,{animationName:0,elapsedTime:0,pseudoElement:0}),tl=Ce(No),el=b({},Xe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Io=Ce(el),Yr=b({},Xe,{data:0}),nl=Ce(Yr),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Vo[t])?!!n[t]:!1}function Kr(){return Oo}var jo=b({},nr,{key:function(t){if(t.key){var n=Mo[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ws(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(t){return t.type==="keypress"?Ws(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ws(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xr=Ce(jo),an=b({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=Ce(an),Po=b({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),rs=Ce(Po),u=b({},Xe,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Ce(u),v=b({},rr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Ce(v),q=b({},Xe,{newState:0,oldState:0}),$=Ce(q),pt=[9,13,27,32],Mt=rn&&"CompositionEvent"in window,le=null;rn&&"documentMode"in document&&(le=document.documentMode);var Zt=rn&&"TextEvent"in window&&!le,ve=rn&&(!Mt||le&&8<le&&11>=le),fn=" ",ni=!1;function zn(t,n){switch(t){case"keyup":return pt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qn=!1;function sl(t,n){switch(t){case"compositionend":return Bn(n);case"keypress":return n.which!==32?null:(ni=!0,fn);case"textInput":return t=n.data,t===fn&&ni?null:t;default:return null}}function Q0(t,n){if(qn)return t==="compositionend"||!Mt&&zn(t,n)?(t=Co(),Fr=re=An=null,qn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ve&&n.locale!=="ko"?null:n.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Y0[t.type]:n==="textarea"}function Zd(t,n,s,l){ns?sn?sn.push(l):sn=[l]:ns=l,n=bu(n,"onChange"),0<n.length&&(s=new er("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var rl=null,al=null;function K0(t){Ig(t,0)}function Uo(t){var n=Zi(t);if(te(n))return t}function Jd(t,n){if(t==="change")return n}var Wd=!1;if(rn){var Hc;if(rn){var Fc="oninput"in document;if(!Fc){var tm=document.createElement("div");tm.setAttribute("oninput","return;"),Fc=typeof tm.oninput=="function"}Hc=Fc}else Hc=!1;Wd=Hc&&(!document.documentMode||9<document.documentMode)}function em(){rl&&(rl.detachEvent("onpropertychange",nm),al=rl=null)}function nm(t){if(t.propertyName==="value"&&Uo(al)){var n=[];Zd(n,al,t,Ja(t)),Js(K0,n)}}function X0(t,n,s){t==="focusin"?(em(),rl=n,al=s,rl.attachEvent("onpropertychange",nm)):t==="focusout"&&em()}function $0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uo(al)}function Z0(t,n){if(t==="click")return Uo(n)}function J0(t,n){if(t==="input"||t==="change")return Uo(n)}function W0(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var dn=typeof Object.is=="function"?Object.is:W0;function ll(t,n){if(dn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!Yt.call(n,c)||!dn(t[c],n[c]))return!1}return!0}function im(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sm(t,n){var s=im(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=im(s)}}function rm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?rm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function am(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ai(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Ai(t.document)}return n}function Gc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var t1=rn&&"documentMode"in document&&11>=document.documentMode,$r=null,Qc=null,ol=null,Yc=!1;function lm(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Yc||$r==null||$r!==Ai(l)||(l=$r,"selectionStart"in l&&Gc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&ll(ol,l)||(ol=l,l=bu(Qc,"onSelect"),0<l.length&&(n=new er("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=$r)))}function or(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Zr={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},Kc={},om={};rn&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function ur(t){if(Kc[t])return Kc[t];if(!Zr[t])return t;var n=Zr[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in om)return Kc[t]=n[s];return t}var um=ur("animationend"),cm=ur("animationiteration"),hm=ur("animationstart"),e1=ur("transitionrun"),n1=ur("transitionstart"),i1=ur("transitioncancel"),fm=ur("transitionend"),dm=new Map,Xc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xc.push("scrollEnd");function Hn(t,n){dm.set(t,n),Jn(n,[t])}var mm=new WeakMap;function xn(t,n){if(typeof t=="object"&&t!==null){var s=mm.get(t);return s!==void 0?s:(n={value:t,source:n,stack:kn(n)},mm.set(t,n),n)}return{value:t,source:n,stack:kn(n)}}var Rn=[],Jr=0,$c=0;function ko(){for(var t=Jr,n=$c=Jr=0;n<t;){var s=Rn[n];Rn[n++]=null;var l=Rn[n];Rn[n++]=null;var c=Rn[n];Rn[n++]=null;var f=Rn[n];if(Rn[n++]=null,l!==null&&c!==null){var E=l.pending;E===null?c.next=c:(c.next=E.next,E.next=c),l.pending=c}f!==0&&pm(s,c,f)}}function Lo(t,n,s,l){Rn[Jr++]=t,Rn[Jr++]=n,Rn[Jr++]=s,Rn[Jr++]=l,$c|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Zc(t,n,s,l){return Lo(t,n,s,l),zo(t)}function Wr(t,n){return Lo(t,null,null,n),zo(t)}function pm(t,n,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var c=!1,f=t.return;f!==null;)f.childLanes|=s,l=f.alternate,l!==null&&(l.childLanes|=s),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-nn(s),t=f.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=s|536870912),f):null}function zo(t){if(50<Vl)throw Vl=0,sf=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var ta={};function s1(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,n,s,l){return new s1(t,n,s,l)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ci(t,n){var s=t.alternate;return s===null?(s=mn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function gm(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Bo(t,n,s,l,c,f){var E=0;if(l=t,typeof t=="function")Jc(t)&&(E=1);else if(typeof t=="string")E=aE(t,s,mt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case R:return t=mn(31,s,n,c),t.elementType=R,t.lanes=f,t;case z:return cr(s.children,c,f,n);case ot:E=8,c|=24;break;case X:return t=mn(12,s,n,c|2),t.elementType=X,t.lanes=f,t;case ct:return t=mn(13,s,n,c),t.elementType=ct,t.lanes=f,t;case it:return t=mn(19,s,n,c),t.elementType=it,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ut:case ht:E=10;break t;case et:E=9;break t;case dt:E=11;break t;case N:E=14;break t;case S:E=16,l=null;break t}E=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=mn(E,s,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function cr(t,n,s,l){return t=mn(7,t,l,n),t.lanes=s,t}function Wc(t,n,s){return t=mn(6,t,null,n),t.lanes=s,t}function th(t,n,s){return n=mn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ea=[],na=0,qo=null,Ho=0,wn=[],Cn=0,hr=null,Di=1,Ni="";function fr(t,n){ea[na++]=Ho,ea[na++]=qo,qo=t,Ho=n}function ym(t,n,s){wn[Cn++]=Di,wn[Cn++]=Ni,wn[Cn++]=hr,hr=t;var l=Di;t=Ni;var c=32-nn(l)-1;l&=~(1<<c),s+=1;var f=32-nn(n)+c;if(30<f){var E=c-c%5;f=(l&(1<<E)-1).toString(32),l>>=E,c-=E,Di=1<<32-nn(n)+c|s<<c|l,Ni=f+t}else Di=1<<f|s<<c|l,Ni=t}function eh(t){t.return!==null&&(fr(t,1),ym(t,1,0))}function nh(t){for(;t===qo;)qo=ea[--na],ea[na]=null,Ho=ea[--na],ea[na]=null;for(;t===hr;)hr=wn[--Cn],wn[Cn]=null,Ni=wn[--Cn],wn[Cn]=null,Di=wn[--Cn],wn[Cn]=null}var ln=null,me=null,Xt=!1,dr=null,ii=!1,ih=Error(a(519));function mr(t){var n=Error(a(418,""));throw hl(xn(n,t)),ih}function _m(t){var n=t.stateNode,s=t.type,l=t.memoizedProps;switch(n[ye]=t,n[ze]=l,s){case"dialog":Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":case"embed":Bt("load",n);break;case"video":case"audio":for(s=0;s<jl.length;s++)Bt(jl[s],n);break;case"source":Bt("error",n);break;case"img":case"image":case"link":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"input":Bt("invalid",n),Ya(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ts(n);break;case"select":Bt("invalid",n);break;case"textarea":Bt("invalid",n),Ao(n,l.value,l.defaultValue,l.children),ts(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||jg(n.textContent,s)?(l.popover!=null&&(Bt("beforetoggle",n),Bt("toggle",n)),l.onScroll!=null&&Bt("scroll",n),l.onScrollEnd!=null&&Bt("scrollend",n),l.onClick!=null&&(n.onclick=Su),n=!0):n=!1,n||mr(t)}function vm(t){for(ln=t.return;ln;)switch(ln.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:ln=ln.return}}function ul(t){if(t!==ln)return!1;if(!Xt)return vm(t),Xt=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Ef(t.type,t.memoizedProps)),s=!s),s&&me&&mr(t),vm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){me=Gn(t.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}me=null}}else n===27?(n=me,Ts(t.type)?(t=Af,Af=null,me=t):me=n):me=ln?Gn(t.stateNode.nextSibling):null;return!0}function cl(){me=ln=null,Xt=!1}function Em(){var t=dr;return t!==null&&(cn===null?cn=t:cn.push.apply(cn,t),dr=null),t}function hl(t){dr===null?dr=[t]:dr.push(t)}var sh=U(null),pr=null,Ii=null;function as(t,n,s){Q(sh,n._currentValue),n._currentValue=s}function Mi(t){t._currentValue=sh.current,K(sh)}function rh(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function ah(t,n,s,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var E=c.child;f=f.firstContext;t:for(;f!==null;){var T=f;f=c;for(var M=0;M<n.length;M++)if(T.context===n[M]){f.lanes|=s,T=f.alternate,T!==null&&(T.lanes|=s),rh(f.return,s,t),l||(E=null);break t}f=T.next}}else if(c.tag===18){if(E=c.return,E===null)throw Error(a(341));E.lanes|=s,f=E.alternate,f!==null&&(f.lanes|=s),rh(E,s,t),E=null}else E=c.child;if(E!==null)E.return=c;else for(E=c;E!==null;){if(E===t){E=null;break}if(c=E.sibling,c!==null){c.return=E.return,E=c;break}E=E.return}c=E}}function fl(t,n,s,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var E=c.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var T=c.type;dn(c.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(c===Et.current){if(E=c.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Bl):t=[Bl])}c=c.return}t!==null&&ah(n,t,s,l),n.flags|=262144}function Fo(t){for(t=t.firstContext;t!==null;){if(!dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function gr(t){pr=t,Ii=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $e(t){return Tm(pr,t)}function Go(t,n){return pr===null&&gr(t),Tm(t,n)}function Tm(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Ii===null){if(t===null)throw Error(a(308));Ii=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ii=Ii.next=n;return s}var r1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},a1=r.unstable_scheduleCallback,l1=r.unstable_NormalPriority,De={$$typeof:ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lh(){return{controller:new r1,data:new Map,refCount:0}}function dl(t){t.refCount--,t.refCount===0&&a1(l1,function(){t.controller.abort()})}var ml=null,oh=0,ia=0,sa=null;function o1(t,n){if(ml===null){var s=ml=[];oh=0,ia=hf(),sa={status:"pending",value:void 0,then:function(l){s.push(l)}}}return oh++,n.then(bm,bm),n}function bm(){if(--oh===0&&ml!==null){sa!==null&&(sa.status="fulfilled");var t=ml;ml=null,ia=0,sa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function u1(t,n){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<s.length;c++)(0,s[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var Sm=P.S;P.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&o1(t,n),Sm!==null&&Sm(t,n)};var yr=U(null);function uh(){var t=yr.current;return t!==null?t:ae.pooledCache}function Qo(t,n){n===null?Q(yr,yr.current):Q(yr,n.pool)}function Am(){var t=uh();return t===null?null:{parent:De._currentValue,pool:t}}var pl=Error(a(460)),xm=Error(a(474)),Yo=Error(a(542)),ch={then:function(){}};function Rm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ko(){}function wm(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Ko,Ko),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dm(t),t;default:if(typeof n.status=="string")n.then(Ko,Ko);else{if(t=ae,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dm(t),t}throw gl=n,pl}}var gl=null;function Cm(){if(gl===null)throw Error(a(459));var t=gl;return gl=null,t}function Dm(t){if(t===pl||t===Yo)throw Error(a(483))}var ls=!1;function hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function os(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function us(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Jt&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=zo(t),pm(t,null,s),n}return Lo(t,l,n,s),zo(t)}function yl(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Xi(t,s)}}function dh(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var E={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?c=f=E:f=f.next=E,s=s.next}while(s!==null);f===null?c=f=n:f=f.next=n}else c=f=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var mh=!1;function _l(){if(mh){var t=sa;if(t!==null)throw t}}function vl(t,n,s,l){mh=!1;var c=t.updateQueue;ls=!1;var f=c.firstBaseUpdate,E=c.lastBaseUpdate,T=c.shared.pending;if(T!==null){c.shared.pending=null;var M=T,F=M.next;M.next=null,E===null?f=F:E.next=F,E=M;var tt=t.alternate;tt!==null&&(tt=tt.updateQueue,T=tt.lastBaseUpdate,T!==E&&(T===null?tt.firstBaseUpdate=F:T.next=F,tt.lastBaseUpdate=M))}if(f!==null){var at=c.baseState;E=0,tt=F=M=null,T=f;do{var G=T.lane&-536870913,Y=G!==T.lane;if(Y?(Ft&G)===G:(l&G)===G){G!==0&&G===ia&&(mh=!0),tt!==null&&(tt=tt.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Dt=t,Rt=T;G=n;var ie=s;switch(Rt.tag){case 1:if(Dt=Rt.payload,typeof Dt=="function"){at=Dt.call(ie,at,G);break t}at=Dt;break t;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Rt.payload,G=typeof Dt=="function"?Dt.call(ie,at,G):Dt,G==null)break t;at=b({},at,G);break t;case 2:ls=!0}}G=T.callback,G!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=c.callbacks,Y===null?c.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},tt===null?(F=tt=Y,M=at):tt=tt.next=Y,E|=G;if(T=T.next,T===null){if(T=c.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,c.lastBaseUpdate=Y,c.shared.pending=null}}while(!0);tt===null&&(M=at),c.baseState=M,c.firstBaseUpdate=F,c.lastBaseUpdate=tt,f===null&&(c.shared.lanes=0),ys|=E,t.lanes=E,t.memoizedState=at}}function Nm(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Im(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Nm(s[t],n)}var ra=U(null),Xo=U(0);function Mm(t,n){t=Li,Q(Xo,t),Q(ra,n),Li=t|n.baseLanes}function ph(){Q(Xo,Li),Q(ra,ra.current)}function gh(){Li=Xo.current,K(ra),K(Xo)}var cs=0,Pt=null,ee=null,Se=null,$o=!1,aa=!1,_r=!1,Zo=0,El=0,la=null,c1=0;function Ee(){throw Error(a(321))}function yh(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!dn(t[s],n[s]))return!1;return!0}function _h(t,n,s,l,c,f){return cs=f,Pt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=t===null||t.memoizedState===null?pp:gp,_r=!1,f=s(l,c),_r=!1,aa&&(f=Om(n,s,l,c)),Vm(t),f}function Vm(t){P.H=iu;var n=ee!==null&&ee.next!==null;if(cs=0,Se=ee=Pt=null,$o=!1,El=0,la=null,n)throw Error(a(300));t===null||Pe||(t=t.dependencies,t!==null&&Fo(t)&&(Pe=!0))}function Om(t,n,s,l){Pt=t;var c=0;do{if(aa&&(la=null),El=0,aa=!1,25<=c)throw Error(a(301));if(c+=1,Se=ee=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}P.H=y1,f=n(s,l)}while(aa);return f}function h1(){var t=P.H,n=t.useState()[0];return n=typeof n.then=="function"?Tl(n):n,t=t.useState()[0],(ee!==null?ee.memoizedState:null)!==t&&(Pt.flags|=1024),n}function vh(){var t=Zo!==0;return Zo=0,t}function Eh(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Th(t){if($o){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}$o=!1}cs=0,Se=ee=Pt=null,aa=!1,El=Zo=0,la=null}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?Pt.memoizedState=Se=t:Se=Se.next=t,Se}function Ae(){if(ee===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=ee.next;var n=Se===null?Pt.memoizedState:Se.next;if(n!==null)Se=n,ee=t;else{if(t===null)throw Pt.alternate===null?Error(a(467)):Error(a(310));ee=t,t={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},Se===null?Pt.memoizedState=Se=t:Se=Se.next=t}return Se}function bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(t){var n=El;return El+=1,la===null&&(la=[]),t=wm(la,t,n),n=Pt,(Se===null?n.memoizedState:Se.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?pp:gp),t}function Jo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Tl(t);if(t.$$typeof===ht)return $e(t)}throw Error(a(438,String(t)))}function Sh(t){var n=null,s=Pt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=Pt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=bh(),Pt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),l=0;l<t;l++)s[l]=V;return n.index++,s}function Vi(t,n){return typeof n=="function"?n(t):n}function Wo(t){var n=Ae();return Ah(n,ee,t)}function Ah(t,n,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var E=c.next;c.next=f.next,f.next=E}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var T=E=null,M=null,F=n,tt=!1;do{var at=F.lane&-536870913;if(at!==F.lane?(Ft&at)===at:(cs&at)===at){var G=F.revertLane;if(G===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),at===ia&&(tt=!0);else if((cs&G)===G){F=F.next,G===ia&&(tt=!0);continue}else at={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(T=M=at,E=f):M=M.next=at,Pt.lanes|=G,ys|=G;at=F.action,_r&&s(f,at),f=F.hasEagerState?F.eagerState:s(f,at)}else G={lane:at,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(T=M=G,E=f):M=M.next=G,Pt.lanes|=at,ys|=at;F=F.next}while(F!==null&&F!==n);if(M===null?E=f:M.next=T,!dn(f,t.memoizedState)&&(Pe=!0,tt&&(s=sa,s!==null)))throw s;t.memoizedState=f,t.baseState=E,t.baseQueue=M,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function xh(t){var n=Ae(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,c=s.pending,f=n.memoizedState;if(c!==null){s.pending=null;var E=c=c.next;do f=t(f,E.action),E=E.next;while(E!==c);dn(f,n.memoizedState)||(Pe=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),s.lastRenderedState=f}return[f,l]}function jm(t,n,s){var l=Pt,c=Ae(),f=Xt;if(f){if(s===void 0)throw Error(a(407));s=s()}else s=n();var E=!dn((ee||c).memoizedState,s);E&&(c.memoizedState=s,Pe=!0),c=c.queue;var T=km.bind(null,l,c,t);if(bl(2048,8,T,[t]),c.getSnapshot!==n||E||Se!==null&&Se.memoizedState.tag&1){if(l.flags|=2048,oa(9,tu(),Um.bind(null,l,c,s,n),null),ae===null)throw Error(a(349));f||(cs&124)!==0||Pm(l,n,s)}return s}function Pm(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Pt.updateQueue,n===null?(n=bh(),Pt.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function Um(t,n,s,l){n.value=s,n.getSnapshot=l,Lm(n)&&zm(t)}function km(t,n,s){return s(function(){Lm(n)&&zm(t)})}function Lm(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!dn(t,s)}catch{return!0}}function zm(t){var n=Wr(t,2);n!==null&&vn(n,t,2)}function Rh(t){var n=on();if(typeof t=="function"){var s=t;if(t=s(),_r){En(!0);try{s()}finally{En(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},n}function Bm(t,n,s,l){return t.baseState=s,Ah(t,ee,typeof l=="function"?l:Vi)}function f1(t,n,s,l,c){if(nu(t))throw Error(a(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};P.T!==null?s(!0):f.isTransition=!1,l(f),s=n.pending,s===null?(f.next=n.pending=f,qm(n,f)):(f.next=s.next,n.pending=s.next=f)}}function qm(t,n){var s=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=P.T,E={};P.T=E;try{var T=s(c,l),M=P.S;M!==null&&M(E,T),Hm(t,n,T)}catch(F){wh(t,n,F)}finally{P.T=f}}else try{f=s(c,l),Hm(t,n,f)}catch(F){wh(t,n,F)}}function Hm(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Fm(t,n,l)},function(l){return wh(t,n,l)}):Fm(t,n,s)}function Fm(t,n,s){n.status="fulfilled",n.value=s,Gm(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,qm(t,s)))}function wh(t,n,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,Gm(n),n=n.next;while(n!==l)}t.action=null}function Gm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Qm(t,n){return n}function Ym(t,n){if(Xt){var s=ae.formState;if(s!==null){t:{var l=Pt;if(Xt){if(me){e:{for(var c=me,f=ii;c.nodeType!==8;){if(!f){c=null;break e}if(c=Gn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){me=Gn(c.nextSibling),l=c.data==="F!";break t}}mr(l)}l=!1}l&&(n=s[0])}}return s=on(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qm,lastRenderedState:n},s.queue=l,s=fp.bind(null,Pt,l),l.dispatch=s,l=Rh(!1),f=Mh.bind(null,Pt,!1,l.queue),l=on(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,s=f1.bind(null,Pt,c,f,s),c.dispatch=s,l.memoizedState=t,[n,s,!1]}function Km(t){var n=Ae();return Xm(n,ee,t)}function Xm(t,n,s){if(n=Ah(t,n,Qm)[0],t=Wo(Vi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Tl(n)}catch(E){throw E===pl?Yo:E}else l=n;n=Ae();var c=n.queue,f=c.dispatch;return s!==n.memoizedState&&(Pt.flags|=2048,oa(9,tu(),d1.bind(null,c,s),null)),[l,f,t]}function d1(t,n){t.action=n}function $m(t){var n=Ae(),s=ee;if(s!==null)return Xm(n,s,t);Ae(),n=n.memoizedState,s=Ae();var l=s.queue.dispatch;return s.memoizedState=t,[n,l,!1]}function oa(t,n,s,l){return t={tag:t,create:s,deps:l,inst:n,next:null},n=Pt.updateQueue,n===null&&(n=bh(),Pt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t),t}function tu(){return{destroy:void 0,resource:void 0}}function Zm(){return Ae().memoizedState}function eu(t,n,s,l){var c=on();l=l===void 0?null:l,Pt.flags|=t,c.memoizedState=oa(1|n,tu(),s,l)}function bl(t,n,s,l){var c=Ae();l=l===void 0?null:l;var f=c.memoizedState.inst;ee!==null&&l!==null&&yh(l,ee.memoizedState.deps)?c.memoizedState=oa(n,f,s,l):(Pt.flags|=t,c.memoizedState=oa(1|n,f,s,l))}function Jm(t,n){eu(8390656,8,t,n)}function Wm(t,n){bl(2048,8,t,n)}function tp(t,n){return bl(4,2,t,n)}function ep(t,n){return bl(4,4,t,n)}function np(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ip(t,n,s){s=s!=null?s.concat([t]):null,bl(4,4,np.bind(null,n,t),s)}function Ch(){}function sp(t,n){var s=Ae();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&yh(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function rp(t,n){var s=Ae();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&yh(n,l[1]))return l[0];if(l=t(),_r){En(!0);try{t()}finally{En(!1)}}return s.memoizedState=[l,n],l}function Dh(t,n,s){return s===void 0||(cs&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=og(),Pt.lanes|=t,ys|=t,s)}function ap(t,n,s,l){return dn(s,n)?s:ra.current!==null?(t=Dh(t,s,l),dn(t,n)||(Pe=!0),t):(cs&42)===0?(Pe=!0,t.memoizedState=s):(t=og(),Pt.lanes|=t,ys|=t,n)}function lp(t,n,s,l,c){var f=J.p;J.p=f!==0&&8>f?f:8;var E=P.T,T={};P.T=T,Mh(t,!1,n,s);try{var M=c(),F=P.S;if(F!==null&&F(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var tt=u1(M,l);Sl(t,n,tt,_n(t))}else Sl(t,n,l,_n(t))}catch(at){Sl(t,n,{then:function(){},status:"rejected",reason:at},_n())}finally{J.p=f,P.T=E}}function m1(){}function Nh(t,n,s,l){if(t.tag!==5)throw Error(a(476));var c=op(t).queue;lp(t,c,n,H,s===null?m1:function(){return up(t),s(l)})}function op(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:H},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function up(t){var n=op(t).next.queue;Sl(t,n,{},_n())}function Ih(){return $e(Bl)}function cp(){return Ae().memoizedState}function hp(){return Ae().memoizedState}function p1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=_n();t=os(s);var l=us(n,t,s);l!==null&&(vn(l,n,s),yl(l,n,s)),n={cache:lh()},t.payload=n;return}n=n.return}}function g1(t,n,s){var l=_n();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},nu(t)?dp(n,s):(s=Zc(t,n,s,l),s!==null&&(vn(s,t,l),mp(s,n,l)))}function fp(t,n,s){var l=_n();Sl(t,n,s,l)}function Sl(t,n,s,l){var c={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(nu(t))dp(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var E=n.lastRenderedState,T=f(E,s);if(c.hasEagerState=!0,c.eagerState=T,dn(T,E))return Lo(t,n,c,0),ae===null&&ko(),!1}catch{}finally{}if(s=Zc(t,n,c,l),s!==null)return vn(s,t,l),mp(s,n,l),!0}return!1}function Mh(t,n,s,l){if(l={lane:2,revertLane:hf(),action:l,hasEagerState:!1,eagerState:null,next:null},nu(t)){if(n)throw Error(a(479))}else n=Zc(t,s,l,2),n!==null&&vn(n,t,2)}function nu(t){var n=t.alternate;return t===Pt||n!==null&&n===Pt}function dp(t,n){aa=$o=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function mp(t,n,s){if((s&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Xi(t,s)}}var iu={readContext:$e,use:Jo,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useLayoutEffect:Ee,useInsertionEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useSyncExternalStore:Ee,useId:Ee,useHostTransitionStatus:Ee,useFormState:Ee,useActionState:Ee,useOptimistic:Ee,useMemoCache:Ee,useCacheRefresh:Ee},pp={readContext:$e,use:Jo,useCallback:function(t,n){return on().memoizedState=[t,n===void 0?null:n],t},useContext:$e,useEffect:Jm,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,eu(4194308,4,np.bind(null,n,t),s)},useLayoutEffect:function(t,n){return eu(4194308,4,t,n)},useInsertionEffect:function(t,n){eu(4,2,t,n)},useMemo:function(t,n){var s=on();n=n===void 0?null:n;var l=t();if(_r){En(!0);try{t()}finally{En(!1)}}return s.memoizedState=[l,n],l},useReducer:function(t,n,s){var l=on();if(s!==void 0){var c=s(n);if(_r){En(!0);try{s(n)}finally{En(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=g1.bind(null,Pt,t),[l.memoizedState,t]},useRef:function(t){var n=on();return t={current:t},n.memoizedState=t},useState:function(t){t=Rh(t);var n=t.queue,s=fp.bind(null,Pt,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Ch,useDeferredValue:function(t,n){var s=on();return Dh(s,t,n)},useTransition:function(){var t=Rh(!1);return t=lp.bind(null,Pt,t.queue,!0,!1),on().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var l=Pt,c=on();if(Xt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),ae===null)throw Error(a(349));(Ft&124)!==0||Pm(l,n,s)}c.memoizedState=s;var f={value:s,getSnapshot:n};return c.queue=f,Jm(km.bind(null,l,f,t),[t]),l.flags|=2048,oa(9,tu(),Um.bind(null,l,f,s,n),null),s},useId:function(){var t=on(),n=ae.identifierPrefix;if(Xt){var s=Ni,l=Di;s=(l&~(1<<32-nn(l)-1)).toString(32)+s,n="«"+n+"R"+s,s=Zo++,0<s&&(n+="H"+s.toString(32)),n+="»"}else s=c1++,n="«"+n+"r"+s.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:Ih,useFormState:Ym,useActionState:Ym,useOptimistic:function(t){var n=on();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Mh.bind(null,Pt,!0,s),s.dispatch=n,[t,n]},useMemoCache:Sh,useCacheRefresh:function(){return on().memoizedState=p1.bind(null,Pt)}},gp={readContext:$e,use:Jo,useCallback:sp,useContext:$e,useEffect:Wm,useImperativeHandle:ip,useInsertionEffect:tp,useLayoutEffect:ep,useMemo:rp,useReducer:Wo,useRef:Zm,useState:function(){return Wo(Vi)},useDebugValue:Ch,useDeferredValue:function(t,n){var s=Ae();return ap(s,ee.memoizedState,t,n)},useTransition:function(){var t=Wo(Vi)[0],n=Ae().memoizedState;return[typeof t=="boolean"?t:Tl(t),n]},useSyncExternalStore:jm,useId:cp,useHostTransitionStatus:Ih,useFormState:Km,useActionState:Km,useOptimistic:function(t,n){var s=Ae();return Bm(s,ee,t,n)},useMemoCache:Sh,useCacheRefresh:hp},y1={readContext:$e,use:Jo,useCallback:sp,useContext:$e,useEffect:Wm,useImperativeHandle:ip,useInsertionEffect:tp,useLayoutEffect:ep,useMemo:rp,useReducer:xh,useRef:Zm,useState:function(){return xh(Vi)},useDebugValue:Ch,useDeferredValue:function(t,n){var s=Ae();return ee===null?Dh(s,t,n):ap(s,ee.memoizedState,t,n)},useTransition:function(){var t=xh(Vi)[0],n=Ae().memoizedState;return[typeof t=="boolean"?t:Tl(t),n]},useSyncExternalStore:jm,useId:cp,useHostTransitionStatus:Ih,useFormState:$m,useActionState:$m,useOptimistic:function(t,n){var s=Ae();return ee!==null?Bm(s,ee,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Sh,useCacheRefresh:hp},ua=null,Al=0;function su(t){var n=Al;return Al+=1,ua===null&&(ua=[]),wm(ua,t,n)}function xl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function ru(t,n){throw n.$$typeof===C?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function yp(t){var n=t._init;return n(t._payload)}function _p(t){function n(k,j){if(t){var B=k.deletions;B===null?(k.deletions=[j],k.flags|=16):B.push(j)}}function s(k,j){if(!t)return null;for(;j!==null;)n(k,j),j=j.sibling;return null}function l(k){for(var j=new Map;k!==null;)k.key!==null?j.set(k.key,k):j.set(k.index,k),k=k.sibling;return j}function c(k,j){return k=Ci(k,j),k.index=0,k.sibling=null,k}function f(k,j,B){return k.index=B,t?(B=k.alternate,B!==null?(B=B.index,B<j?(k.flags|=67108866,j):B):(k.flags|=67108866,j)):(k.flags|=1048576,j)}function E(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function T(k,j,B,st){return j===null||j.tag!==6?(j=Wc(B,k.mode,st),j.return=k,j):(j=c(j,B),j.return=k,j)}function M(k,j,B,st){var vt=B.type;return vt===z?tt(k,j,B.props.children,st,B.key):j!==null&&(j.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===S&&yp(vt)===j.type)?(j=c(j,B.props),xl(j,B),j.return=k,j):(j=Bo(B.type,B.key,B.props,null,k.mode,st),xl(j,B),j.return=k,j)}function F(k,j,B,st){return j===null||j.tag!==4||j.stateNode.containerInfo!==B.containerInfo||j.stateNode.implementation!==B.implementation?(j=th(B,k.mode,st),j.return=k,j):(j=c(j,B.children||[]),j.return=k,j)}function tt(k,j,B,st,vt){return j===null||j.tag!==7?(j=cr(B,k.mode,st,vt),j.return=k,j):(j=c(j,B),j.return=k,j)}function at(k,j,B){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Wc(""+j,k.mode,B),j.return=k,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return B=Bo(j.type,j.key,j.props,null,k.mode,B),xl(B,j),B.return=k,B;case L:return j=th(j,k.mode,B),j.return=k,j;case S:var st=j._init;return j=st(j._payload),at(k,j,B)}if(nt(j)||O(j))return j=cr(j,k.mode,B,null),j.return=k,j;if(typeof j.then=="function")return at(k,su(j),B);if(j.$$typeof===ht)return at(k,Go(k,j),B);ru(k,j)}return null}function G(k,j,B,st){var vt=j!==null?j.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return vt!==null?null:T(k,j,""+B,st);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return B.key===vt?M(k,j,B,st):null;case L:return B.key===vt?F(k,j,B,st):null;case S:return vt=B._init,B=vt(B._payload),G(k,j,B,st)}if(nt(B)||O(B))return vt!==null?null:tt(k,j,B,st,null);if(typeof B.then=="function")return G(k,j,su(B),st);if(B.$$typeof===ht)return G(k,j,Go(k,B),st);ru(k,B)}return null}function Y(k,j,B,st,vt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return k=k.get(B)||null,T(j,k,""+st,vt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case I:return k=k.get(st.key===null?B:st.key)||null,M(j,k,st,vt);case L:return k=k.get(st.key===null?B:st.key)||null,F(j,k,st,vt);case S:var Ut=st._init;return st=Ut(st._payload),Y(k,j,B,st,vt)}if(nt(st)||O(st))return k=k.get(B)||null,tt(j,k,st,vt,null);if(typeof st.then=="function")return Y(k,j,B,su(st),vt);if(st.$$typeof===ht)return Y(k,j,B,Go(j,st),vt);ru(j,st)}return null}function Dt(k,j,B,st){for(var vt=null,Ut=null,At=j,wt=j=0,ke=null;At!==null&&wt<B.length;wt++){At.index>wt?(ke=At,At=null):ke=At.sibling;var Kt=G(k,At,B[wt],st);if(Kt===null){At===null&&(At=ke);break}t&&At&&Kt.alternate===null&&n(k,At),j=f(Kt,j,wt),Ut===null?vt=Kt:Ut.sibling=Kt,Ut=Kt,At=ke}if(wt===B.length)return s(k,At),Xt&&fr(k,wt),vt;if(At===null){for(;wt<B.length;wt++)At=at(k,B[wt],st),At!==null&&(j=f(At,j,wt),Ut===null?vt=At:Ut.sibling=At,Ut=At);return Xt&&fr(k,wt),vt}for(At=l(At);wt<B.length;wt++)ke=Y(At,k,wt,B[wt],st),ke!==null&&(t&&ke.alternate!==null&&At.delete(ke.key===null?wt:ke.key),j=f(ke,j,wt),Ut===null?vt=ke:Ut.sibling=ke,Ut=ke);return t&&At.forEach(function(Rs){return n(k,Rs)}),Xt&&fr(k,wt),vt}function Rt(k,j,B,st){if(B==null)throw Error(a(151));for(var vt=null,Ut=null,At=j,wt=j=0,ke=null,Kt=B.next();At!==null&&!Kt.done;wt++,Kt=B.next()){At.index>wt?(ke=At,At=null):ke=At.sibling;var Rs=G(k,At,Kt.value,st);if(Rs===null){At===null&&(At=ke);break}t&&At&&Rs.alternate===null&&n(k,At),j=f(Rs,j,wt),Ut===null?vt=Rs:Ut.sibling=Rs,Ut=Rs,At=ke}if(Kt.done)return s(k,At),Xt&&fr(k,wt),vt;if(At===null){for(;!Kt.done;wt++,Kt=B.next())Kt=at(k,Kt.value,st),Kt!==null&&(j=f(Kt,j,wt),Ut===null?vt=Kt:Ut.sibling=Kt,Ut=Kt);return Xt&&fr(k,wt),vt}for(At=l(At);!Kt.done;wt++,Kt=B.next())Kt=Y(At,k,wt,Kt.value,st),Kt!==null&&(t&&Kt.alternate!==null&&At.delete(Kt.key===null?wt:Kt.key),j=f(Kt,j,wt),Ut===null?vt=Kt:Ut.sibling=Kt,Ut=Kt);return t&&At.forEach(function(_E){return n(k,_E)}),Xt&&fr(k,wt),vt}function ie(k,j,B,st){if(typeof B=="object"&&B!==null&&B.type===z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case I:t:{for(var vt=B.key;j!==null;){if(j.key===vt){if(vt=B.type,vt===z){if(j.tag===7){s(k,j.sibling),st=c(j,B.props.children),st.return=k,k=st;break t}}else if(j.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===S&&yp(vt)===j.type){s(k,j.sibling),st=c(j,B.props),xl(st,B),st.return=k,k=st;break t}s(k,j);break}else n(k,j);j=j.sibling}B.type===z?(st=cr(B.props.children,k.mode,st,B.key),st.return=k,k=st):(st=Bo(B.type,B.key,B.props,null,k.mode,st),xl(st,B),st.return=k,k=st)}return E(k);case L:t:{for(vt=B.key;j!==null;){if(j.key===vt)if(j.tag===4&&j.stateNode.containerInfo===B.containerInfo&&j.stateNode.implementation===B.implementation){s(k,j.sibling),st=c(j,B.children||[]),st.return=k,k=st;break t}else{s(k,j);break}else n(k,j);j=j.sibling}st=th(B,k.mode,st),st.return=k,k=st}return E(k);case S:return vt=B._init,B=vt(B._payload),ie(k,j,B,st)}if(nt(B))return Dt(k,j,B,st);if(O(B)){if(vt=O(B),typeof vt!="function")throw Error(a(150));return B=vt.call(B),Rt(k,j,B,st)}if(typeof B.then=="function")return ie(k,j,su(B),st);if(B.$$typeof===ht)return ie(k,j,Go(k,B),st);ru(k,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,j!==null&&j.tag===6?(s(k,j.sibling),st=c(j,B),st.return=k,k=st):(s(k,j),st=Wc(B,k.mode,st),st.return=k,k=st),E(k)):s(k,j)}return function(k,j,B,st){try{Al=0;var vt=ie(k,j,B,st);return ua=null,vt}catch(At){if(At===pl||At===Yo)throw At;var Ut=mn(29,At,null,k.mode);return Ut.lanes=st,Ut.return=k,Ut}finally{}}}var ca=_p(!0),vp=_p(!1),Dn=U(null),si=null;function hs(t){var n=t.alternate;Q(Ne,Ne.current&1),Q(Dn,t),si===null&&(n===null||ra.current!==null||n.memoizedState!==null)&&(si=t)}function Ep(t){if(t.tag===22){if(Q(Ne,Ne.current),Q(Dn,t),si===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(si=t)}}else fs()}function fs(){Q(Ne,Ne.current),Q(Dn,Dn.current)}function Oi(t){K(Dn),si===t&&(si=null),K(Ne)}var Ne=U(0);function au(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Sf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Vh(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:b({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Oh={enqueueSetState:function(t,n,s){t=t._reactInternals;var l=_n(),c=os(l);c.payload=n,s!=null&&(c.callback=s),n=us(t,c,l),n!==null&&(vn(n,t,l),yl(n,t,l))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=_n(),c=os(l);c.tag=1,c.payload=n,s!=null&&(c.callback=s),n=us(t,c,l),n!==null&&(vn(n,t,l),yl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=_n(),l=os(s);l.tag=2,n!=null&&(l.callback=n),n=us(t,l,s),n!==null&&(vn(n,t,s),yl(n,t,s))}};function Tp(t,n,s,l,c,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):n.prototype&&n.prototype.isPureReactComponent?!ll(s,l)||!ll(c,f):!0}function bp(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&Oh.enqueueReplaceState(n,n.state,null)}function vr(t,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(t=t.defaultProps){s===n&&(s=b({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}var lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Sp(t){lu(t)}function Ap(t){console.error(t)}function xp(t){lu(t)}function ou(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Rp(t,n,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function jh(t,n,s){return s=os(s),s.tag=3,s.payload={element:null},s.callback=function(){ou(t,n)},s}function wp(t){return t=os(t),t.tag=3,t}function Cp(t,n,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){Rp(n,s,l)}}var E=s.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){Rp(n,s,l),typeof c!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function _1(t,n,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&fl(n,s,c,!0),s=Dn.current,s!==null){switch(s.tag){case 13:return si===null?af():s.alternate===null&&pe===0&&(pe=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===ch?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),of(t,l,c)),!1;case 22:return s.flags|=65536,l===ch?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),of(t,l,c)),!1}throw Error(a(435,s.tag))}return of(t,l,c),af(),!1}if(Xt)return n=Dn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==ih&&(t=Error(a(422),{cause:l}),hl(xn(t,s)))):(l!==ih&&(n=Error(a(423),{cause:l}),hl(xn(n,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=xn(l,s),c=jh(t.stateNode,l,c),dh(t,c),pe!==4&&(pe=2)),!1;var f=Error(a(520),{cause:l});if(f=xn(f,s),Ml===null?Ml=[f]:Ml.push(f),pe!==4&&(pe=2),n===null)return!0;l=xn(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=jh(s.stateNode,l,t),dh(s,t),!1;case 1:if(n=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(_s===null||!_s.has(f))))return s.flags|=65536,c&=-c,s.lanes|=c,c=wp(c),Cp(c,t,s,l),dh(s,c),!1}s=s.return}while(s!==null);return!1}var Dp=Error(a(461)),Pe=!1;function Be(t,n,s,l){n.child=t===null?vp(n,null,s,l):ca(n,t.child,s,l)}function Np(t,n,s,l,c){s=s.render;var f=n.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return gr(n),l=_h(t,n,s,E,f,c),T=vh(),t!==null&&!Pe?(Eh(t,n,c),ji(t,n,c)):(Xt&&T&&eh(n),n.flags|=1,Be(t,n,l,c),n.child)}function Ip(t,n,s,l,c){if(t===null){var f=s.type;return typeof f=="function"&&!Jc(f)&&f.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=f,Mp(t,n,f,l,c)):(t=Bo(s.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Hh(t,c)){var E=f.memoizedProps;if(s=s.compare,s=s!==null?s:ll,s(E,l)&&t.ref===n.ref)return ji(t,n,c)}return n.flags|=1,t=Ci(f,l),t.ref=n.ref,t.return=n,n.child=t}function Mp(t,n,s,l,c){if(t!==null){var f=t.memoizedProps;if(ll(f,l)&&t.ref===n.ref)if(Pe=!1,n.pendingProps=l=f,Hh(t,c))(t.flags&131072)!==0&&(Pe=!0);else return n.lanes=t.lanes,ji(t,n,c)}return Ph(t,n,s,l,c)}function Vp(t,n,s){var l=n.pendingProps,c=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=f!==null?f.baseLanes|s:s,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~l}else n.childLanes=0,n.child=null;return Op(t,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qo(n,f!==null?f.cachePool:null),f!==null?Mm(n,f):ph(),Ep(n);else return n.lanes=n.childLanes=536870912,Op(t,n,f!==null?f.baseLanes|s:s,s)}else f!==null?(Qo(n,f.cachePool),Mm(n,f),fs(),n.memoizedState=null):(t!==null&&Qo(n,null),ph(),fs());return Be(t,n,c,s),n.child}function Op(t,n,s,l){var c=uh();return c=c===null?null:{parent:De._currentValue,pool:c},n.memoizedState={baseLanes:s,cachePool:c},t!==null&&Qo(n,null),ph(),Ep(n),t!==null&&fl(t,n,l,!0),null}function uu(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function Ph(t,n,s,l,c){return gr(n),s=_h(t,n,s,l,void 0,c),l=vh(),t!==null&&!Pe?(Eh(t,n,c),ji(t,n,c)):(Xt&&l&&eh(n),n.flags|=1,Be(t,n,s,c),n.child)}function jp(t,n,s,l,c,f){return gr(n),n.updateQueue=null,s=Om(n,l,s,c),Vm(t),l=vh(),t!==null&&!Pe?(Eh(t,n,f),ji(t,n,f)):(Xt&&l&&eh(n),n.flags|=1,Be(t,n,s,f),n.child)}function Pp(t,n,s,l,c){if(gr(n),n.stateNode===null){var f=ta,E=s.contextType;typeof E=="object"&&E!==null&&(f=$e(E)),f=new s(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Oh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},hh(n),E=s.contextType,f.context=typeof E=="object"&&E!==null?$e(E):ta,f.state=n.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(Vh(n,s,E,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&Oh.enqueueReplaceState(f,f.state,null),vl(n,l,f,c),_l(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var T=n.memoizedProps,M=vr(s,T);f.props=M;var F=f.context,tt=s.contextType;E=ta,typeof tt=="object"&&tt!==null&&(E=$e(tt));var at=s.getDerivedStateFromProps;tt=typeof at=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,tt||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||F!==E)&&bp(n,f,l,E),ls=!1;var G=n.memoizedState;f.state=G,vl(n,l,f,c),_l(),F=n.memoizedState,T||G!==F||ls?(typeof at=="function"&&(Vh(n,s,at,l),F=n.memoizedState),(M=ls||Tp(n,s,M,l,G,F,E))?(tt||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),f.props=l,f.state=F,f.context=E,l=M):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,fh(t,n),E=n.memoizedProps,tt=vr(s,E),f.props=tt,at=n.pendingProps,G=f.context,F=s.contextType,M=ta,typeof F=="object"&&F!==null&&(M=$e(F)),T=s.getDerivedStateFromProps,(F=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==at||G!==M)&&bp(n,f,l,M),ls=!1,G=n.memoizedState,f.state=G,vl(n,l,f,c),_l();var Y=n.memoizedState;E!==at||G!==Y||ls||t!==null&&t.dependencies!==null&&Fo(t.dependencies)?(typeof T=="function"&&(Vh(n,s,T,l),Y=n.memoizedState),(tt=ls||Tp(n,s,tt,l,G,Y,M)||t!==null&&t.dependencies!==null&&Fo(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Y,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Y,M)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Y),f.props=l,f.state=Y,f.context=M,l=tt):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,uu(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=ca(n,t.child,null,c),n.child=ca(n,null,s,c)):Be(t,n,s,c),n.memoizedState=f.state,t=n.child):t=ji(t,n,c),t}function Up(t,n,s,l){return cl(),n.flags|=256,Be(t,n,s,l),n.child}var Uh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kh(t){return{baseLanes:t,cachePool:Am()}}function Lh(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=Nn),t}function kp(t,n,s){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(Ne.current&2)!==0),E&&(c=!0,n.flags&=-129),E=(n.flags&32)!==0,n.flags&=-33,t===null){if(Xt){if(c?hs(n):fs(),Xt){var T=me,M;if(M=T){t:{for(M=T,T=ii;M.nodeType!==8;){if(!T){T=null;break t}if(M=Gn(M.nextSibling),M===null){T=null;break t}}T=M}T!==null?(n.memoizedState={dehydrated:T,treeContext:hr!==null?{id:Di,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},M=mn(18,null,null,0),M.stateNode=T,M.return=n,n.child=M,ln=n,me=null,M=!0):M=!1}M||mr(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Sf(T)?n.lanes=32:n.lanes=536870912,null;Oi(n)}return T=l.children,l=l.fallback,c?(fs(),c=n.mode,T=cu({mode:"hidden",children:T},c),l=cr(l,c,s,null),T.return=n,l.return=n,T.sibling=l,n.child=T,c=n.child,c.memoizedState=kh(s),c.childLanes=Lh(t,E,s),n.memoizedState=Uh,l):(hs(n),zh(n,T))}if(M=t.memoizedState,M!==null&&(T=M.dehydrated,T!==null)){if(f)n.flags&256?(hs(n),n.flags&=-257,n=Bh(t,n,s)):n.memoizedState!==null?(fs(),n.child=t.child,n.flags|=128,n=null):(fs(),c=l.fallback,T=n.mode,l=cu({mode:"visible",children:l.children},T),c=cr(c,T,s,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,ca(n,t.child,null,s),l=n.child,l.memoizedState=kh(s),l.childLanes=Lh(t,E,s),n.memoizedState=Uh,n=c);else if(hs(n),Sf(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(a(419)),l.stack="",l.digest=E,hl({value:l,source:null,stack:null}),n=Bh(t,n,s)}else if(Pe||fl(t,n,s,!1),E=(s&t.childLanes)!==0,Pe||E){if(E=ae,E!==null&&(l=s&-s,l=(l&42)!==0?1:Fa(l),l=(l&(E.suspendedLanes|s))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Wr(t,l),vn(E,t,l),Dp;T.data==="$?"||af(),n=Bh(t,n,s)}else T.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=M.treeContext,me=Gn(T.nextSibling),ln=n,Xt=!0,dr=null,ii=!1,t!==null&&(wn[Cn++]=Di,wn[Cn++]=Ni,wn[Cn++]=hr,Di=t.id,Ni=t.overflow,hr=n),n=zh(n,l.children),n.flags|=4096);return n}return c?(fs(),c=l.fallback,T=n.mode,M=t.child,F=M.sibling,l=Ci(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,F!==null?c=Ci(F,c):(c=cr(c,T,s,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,T=t.child.memoizedState,T===null?T=kh(s):(M=T.cachePool,M!==null?(F=De._currentValue,M=M.parent!==F?{parent:F,pool:F}:M):M=Am(),T={baseLanes:T.baseLanes|s,cachePool:M}),c.memoizedState=T,c.childLanes=Lh(t,E,s),n.memoizedState=Uh,l):(hs(n),s=t.child,t=s.sibling,s=Ci(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,t!==null&&(E=n.deletions,E===null?(n.deletions=[t],n.flags|=16):E.push(t)),n.child=s,n.memoizedState=null,s)}function zh(t,n){return n=cu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function cu(t,n){return t=mn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Bh(t,n,s){return ca(n,t.child,null,s),t=zh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Lp(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),rh(t.return,n,s)}function qh(t,n,s,l,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=s,f.tailMode=c)}function zp(t,n,s){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(Be(t,n,l.children,s),l=Ne.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lp(t,s,n);else if(t.tag===19)Lp(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Q(Ne,l),c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&au(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),qh(n,!1,c,s,f);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&au(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}qh(n,!0,s,null,f);break;case"together":qh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ji(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),ys|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(fl(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Ci(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Ci(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function Hh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Fo(t)))}function v1(t,n,s){switch(n.tag){case 3:_t(n,n.stateNode.containerInfo),as(n,De,t.memoizedState.cache),cl();break;case 27:case 5:kt(n);break;case 4:_t(n,n.stateNode.containerInfo);break;case 10:as(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(hs(n),n.flags|=128,null):(s&n.child.childLanes)!==0?kp(t,n,s):(hs(n),t=ji(t,n,s),t!==null?t.sibling:null);hs(n);break;case 19:var c=(t.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(fl(t,n,s,!1),l=(s&n.childLanes)!==0),c){if(l)return zp(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Q(Ne,Ne.current),l)break;return null;case 22:case 23:return n.lanes=0,Vp(t,n,s);case 24:as(n,De,t.memoizedState.cache)}return ji(t,n,s)}function Bp(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)Pe=!0;else{if(!Hh(t,s)&&(n.flags&128)===0)return Pe=!1,v1(t,n,s);Pe=(t.flags&131072)!==0}else Pe=!1,Xt&&(n.flags&1048576)!==0&&ym(n,Ho,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Jc(l)?(t=vr(l,t),n.tag=1,n=Pp(null,n,l,t,s)):(n.tag=0,n=Ph(null,n,l,t,s));else{if(l!=null){if(c=l.$$typeof,c===dt){n.tag=11,n=Np(null,n,l,t,s);break t}else if(c===N){n.tag=14,n=Ip(null,n,l,t,s);break t}}throw n=gt(l)||l,Error(a(306,n,""))}}return n;case 0:return Ph(t,n,n.type,n.pendingProps,s);case 1:return l=n.type,c=vr(l,n.pendingProps),Pp(t,n,l,c,s);case 3:t:{if(_t(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var f=n.memoizedState;c=f.element,fh(t,n),vl(n,l,null,s);var E=n.memoizedState;if(l=E.cache,as(n,De,l),l!==f.cache&&ah(n,[De],s,!0),_l(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Up(t,n,l,s);break t}else if(l!==c){c=xn(Error(a(424)),n),hl(c),n=Up(t,n,l,s);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(me=Gn(t.firstChild),ln=n,Xt=!0,dr=null,ii=!0,s=vp(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(cl(),l===c){n=ji(t,n,s);break t}Be(t,n,l,s)}n=n.child}return n;case 26:return uu(t,n),t===null?(s=Gg(n.type,null,n.pendingProps,null))?n.memoizedState=s:Xt||(s=n.type,t=n.pendingProps,l=Au(W.current).createElement(s),l[ye]=n,l[ze]=t,He(l,s,t),_e(l),n.stateNode=l):n.memoizedState=Gg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return kt(n),t===null&&Xt&&(l=n.stateNode=qg(n.type,n.pendingProps,W.current),ln=n,ii=!0,c=me,Ts(n.type)?(Af=c,me=Gn(l.firstChild)):me=c),Be(t,n,n.pendingProps.children,s),uu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Xt&&((c=l=me)&&(l=Y1(l,n.type,n.pendingProps,ii),l!==null?(n.stateNode=l,ln=n,me=Gn(l.firstChild),ii=!1,c=!0):c=!1),c||mr(n)),kt(n),c=n.type,f=n.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,Ef(c,f)?l=null:E!==null&&Ef(c,E)&&(n.flags|=32),n.memoizedState!==null&&(c=_h(t,n,h1,null,null,s),Bl._currentValue=c),uu(t,n),Be(t,n,l,s),n.child;case 6:return t===null&&Xt&&((t=s=me)&&(s=K1(s,n.pendingProps,ii),s!==null?(n.stateNode=s,ln=n,me=null,t=!0):t=!1),t||mr(n)),null;case 13:return kp(t,n,s);case 4:return _t(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ca(n,null,l,s):Be(t,n,l,s),n.child;case 11:return Np(t,n,n.type,n.pendingProps,s);case 7:return Be(t,n,n.pendingProps,s),n.child;case 8:return Be(t,n,n.pendingProps.children,s),n.child;case 12:return Be(t,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,as(n,n.type,l.value),Be(t,n,l.children,s),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,gr(n),c=$e(c),l=l(c),n.flags|=1,Be(t,n,l,s),n.child;case 14:return Ip(t,n,n.type,n.pendingProps,s);case 15:return Mp(t,n,n.type,n.pendingProps,s);case 19:return zp(t,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},t===null?(s=cu(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Ci(t.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return Vp(t,n,s);case 24:return gr(n),l=$e(De),t===null?(c=uh(),c===null&&(c=ae,f=lh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=s),c=f),n.memoizedState={parent:l,cache:c},hh(n),as(n,De,c)):((t.lanes&s)!==0&&(fh(t,n),vl(n,null,null,s),_l()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),as(n,De,l)):(l=f.cache,as(n,De,l),l!==c.cache&&ah(n,[De],s,!0))),Be(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Pi(t){t.flags|=4}function qp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$g(n)){if(n=Dn.current,n!==null&&((Ft&4194048)===Ft?si!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||n!==si))throw gl=ch,xm;t.flags|=8192}}function hu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Yi():536870912,t.lanes|=n,ma|=n)}function Rl(t,n){if(!Xt)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function fe(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function E1(t,n,s){var l=n.pendingProps;switch(nh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(n),null;case 1:return fe(n),null;case 3:return s=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Mi(De),bt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ul(n)?Pi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Em())),fe(n),null;case 26:return s=n.memoizedState,t===null?(Pi(n),s!==null?(fe(n),qp(n,s)):(fe(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Pi(n),fe(n),qp(n,s)):(fe(n),n.flags&=-16777217):(t.memoizedProps!==l&&Pi(n),fe(n),n.flags&=-16777217),null;case 27:Lt(n),s=W.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Pi(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return fe(n),null}t=mt.current,ul(n)?_m(n):(t=qg(c,l,s),n.stateNode=t,Pi(n))}return fe(n),null;case 5:if(Lt(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Pi(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return fe(n),null}if(t=mt.current,ul(n))_m(n);else{switch(c=Au(W.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(s,{is:l.is}):c.createElement(s)}}t[ye]=n,t[ze]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(He(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Pi(n)}}return fe(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Pi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=W.current,ul(n)){if(t=n.stateNode,s=n.memoizedProps,l=null,c=ln,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[ye]=n,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||jg(t.nodeValue,s)),t||mr(n)}else t=Au(t).createTextNode(l),t[ye]=n,n.stateNode=t}return fe(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=ul(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[ye]=n}else cl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;fe(n),c=!1}else c=Em(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Oi(n),n):(Oi(n),null)}if(Oi(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),hu(n,n.updateQueue),fe(n),null;case 4:return bt(),t===null&&pf(n.stateNode.containerInfo),fe(n),null;case 10:return Mi(n.type),fe(n),null;case 19:if(K(Ne),c=n.memoizedState,c===null)return fe(n),null;if(l=(n.flags&128)!==0,f=c.rendering,f===null)if(l)Rl(c,!1);else{if(pe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=au(t),f!==null){for(n.flags|=128,Rl(c,!1),t=f.updateQueue,n.updateQueue=t,hu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)gm(s,t),s=s.sibling;return Q(Ne,Ne.current&1|2),n.child}t=t.sibling}c.tail!==null&&Ye()>mu&&(n.flags|=128,l=!0,Rl(c,!1),n.lanes=4194304)}else{if(!l)if(t=au(f),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,hu(n,t),Rl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Xt)return fe(n),null}else 2*Ye()-c.renderingStartTime>mu&&s!==536870912&&(n.flags|=128,l=!0,Rl(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ye(),n.sibling=null,t=Ne.current,Q(Ne,l?t&1|2:t&1),n):(fe(n),null);case 22:case 23:return Oi(n),gh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(fe(n),n.subtreeFlags&6&&(n.flags|=8192)):fe(n),s=n.updateQueue,s!==null&&hu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),t!==null&&K(yr),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Mi(De),fe(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function T1(t,n){switch(nh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Mi(De),bt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Lt(n),null;case 13:if(Oi(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));cl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return K(Ne),null;case 4:return bt(),null;case 10:return Mi(n.type),null;case 22:case 23:return Oi(n),gh(),t!==null&&K(yr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Mi(De),null;case 25:return null;default:return null}}function Hp(t,n){switch(nh(n),n.tag){case 3:Mi(De),bt();break;case 26:case 27:case 5:Lt(n);break;case 4:bt();break;case 13:Oi(n);break;case 19:K(Ne);break;case 10:Mi(n.type);break;case 22:case 23:Oi(n),gh(),t!==null&&K(yr);break;case 24:Mi(De)}}function wl(t,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&t)===t){l=void 0;var f=s.create,E=s.inst;l=f(),E.destroy=l}s=s.next}while(s!==c)}}catch(T){se(n,n.return,T)}}function ds(t,n,s){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,c=n;var M=s,F=T;try{F()}catch(tt){se(c,M,tt)}}}l=l.next}while(l!==f)}}catch(tt){se(n,n.return,tt)}}function Fp(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{Im(n,s)}catch(l){se(t,t.return,l)}}}function Gp(t,n,s){s.props=vr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){se(t,n,l)}}function Cl(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(c){se(t,n,c)}}function ri(t,n){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){se(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){se(t,n,c)}else s.current=null}function Qp(t){var n=t.type,s=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){se(t,t.return,c)}}function Fh(t,n,s){try{var l=t.stateNode;q1(l,t.type,s,n),l[ze]=n}catch(c){se(t,t.return,c)}}function Yp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ts(t.type)||t.tag===4}function Gh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Yp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ts(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qh(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Su));else if(l!==4&&(l===27&&Ts(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Qh(t,n,s),t=t.sibling;t!==null;)Qh(t,n,s),t=t.sibling}function fu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(l===27&&Ts(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(fu(t,n,s),t=t.sibling;t!==null;)fu(t,n,s),t=t.sibling}function Kp(t){var n=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);He(n,l,s),n[ye]=t,n[ze]=s}catch(f){se(t,t.return,f)}}var Ui=!1,Te=!1,Yh=!1,Xp=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function b1(t,n){if(t=t.containerInfo,_f=Nu,t=am(t),Gc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break t}var E=0,T=-1,M=-1,F=0,tt=0,at=t,G=null;e:for(;;){for(var Y;at!==s||c!==0&&at.nodeType!==3||(T=E+c),at!==f||l!==0&&at.nodeType!==3||(M=E+l),at.nodeType===3&&(E+=at.nodeValue.length),(Y=at.firstChild)!==null;)G=at,at=Y;for(;;){if(at===t)break e;if(G===s&&++F===c&&(T=E),G===f&&++tt===l&&(M=E),(Y=at.nextSibling)!==null)break;at=G,G=at.parentNode}at=Y}s=T===-1||M===-1?null:{start:T,end:M}}else s=null}s=s||{start:0,end:0}}else s=null;for(vf={focusedElem:t,selectionRange:s},Nu=!1,Ue=n;Ue!==null;)if(n=Ue,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Ue=t;else for(;Ue!==null;){switch(n=Ue,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,s=n,c=f.memoizedProps,f=f.memoizedState,l=s.stateNode;try{var Dt=vr(s.type,c,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Dt,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Rt){se(s,s.return,Rt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)bf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,Ue=t;break}Ue=n.return}}function $p(t,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ms(t,s),l&4&&wl(5,s);break;case 1:if(ms(t,s),l&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(E){se(s,s.return,E)}else{var c=vr(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(E){se(s,s.return,E)}}l&64&&Fp(s),l&512&&Cl(s,s.return);break;case 3:if(ms(t,s),l&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Im(t,n)}catch(E){se(s,s.return,E)}}break;case 27:n===null&&l&4&&Kp(s);case 26:case 5:ms(t,s),n===null&&l&4&&Qp(s),l&512&&Cl(s,s.return);break;case 12:ms(t,s);break;case 13:ms(t,s),l&4&&Wp(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=I1.bind(null,s),X1(t,s))));break;case 22:if(l=s.memoizedState!==null||Ui,!l){n=n!==null&&n.memoizedState!==null||Te,c=Ui;var f=Te;Ui=l,(Te=n)&&!f?ps(t,s,(s.subtreeFlags&8772)!==0):ms(t,s),Ui=c,Te=f}break;case 30:break;default:ms(t,s)}}function Zp(t){var n=t.alternate;n!==null&&(t.alternate=null,Zp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&kr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ce=null,un=!1;function ki(t,n,s){for(s=s.child;s!==null;)Jp(t,n,s),s=s.sibling}function Jp(t,n,s){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Fi,s)}catch{}switch(s.tag){case 26:Te||ri(s,n),ki(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Te||ri(s,n);var l=ce,c=un;Ts(s.type)&&(ce=s.stateNode,un=!1),ki(t,n,s),Ul(s.stateNode),ce=l,un=c;break;case 5:Te||ri(s,n);case 6:if(l=ce,c=un,ce=null,ki(t,n,s),ce=l,un=c,ce!==null)if(un)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(s.stateNode)}catch(f){se(s,n,f)}else try{ce.removeChild(s.stateNode)}catch(f){se(s,n,f)}break;case 18:ce!==null&&(un?(t=ce,zg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Gl(t)):zg(ce,s.stateNode));break;case 4:l=ce,c=un,ce=s.stateNode.containerInfo,un=!0,ki(t,n,s),ce=l,un=c;break;case 0:case 11:case 14:case 15:Te||ds(2,s,n),Te||ds(4,s,n),ki(t,n,s);break;case 1:Te||(ri(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Gp(s,n,l)),ki(t,n,s);break;case 21:ki(t,n,s);break;case 22:Te=(l=Te)||s.memoizedState!==null,ki(t,n,s),Te=l;break;default:ki(t,n,s)}}function Wp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gl(t)}catch(s){se(n,n.return,s)}}function S1(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Xp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Xp),n;default:throw Error(a(435,t.tag))}}function Kh(t,n){var s=S1(t);n.forEach(function(l){var c=M1.bind(null,t,l);s.has(l)||(s.add(l),l.then(c,c))})}function pn(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],f=t,E=n,T=E;t:for(;T!==null;){switch(T.tag){case 27:if(Ts(T.type)){ce=T.stateNode,un=!1;break t}break;case 5:ce=T.stateNode,un=!1;break t;case 3:case 4:ce=T.stateNode.containerInfo,un=!0;break t}T=T.return}if(ce===null)throw Error(a(160));Jp(f,E,c),ce=null,un=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)tg(n,t),n=n.sibling}var Fn=null;function tg(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pn(n,t),gn(t),l&4&&(ds(3,t,t.return),wl(3,t),ds(5,t,t.return));break;case 1:pn(n,t),gn(t),l&512&&(Te||s===null||ri(s,s.return)),l&64&&Ui&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=Fn;if(pn(n,t),gn(t),l&512&&(Te||s===null||ri(s,s.return)),l&4){var f=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){t:{l=t.type,s=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[$i]||f[ye]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),He(f,l,s),f[ye]=t,_e(f),l=f;break t;case"link":var E=Kg("link","href",c).get(l+(s.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){E.splice(T,1);break e}}f=c.createElement(l),He(f,l,s),c.head.appendChild(f);break;case"meta":if(E=Kg("meta","content",c).get(l+(s.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){E.splice(T,1);break e}}f=c.createElement(l),He(f,l,s),c.head.appendChild(f);break;default:throw Error(a(468,l))}f[ye]=t,_e(f),l=f}t.stateNode=l}else Xg(c,t.type,t.stateNode);else t.stateNode=Yg(c,l,t.memoizedProps);else f!==l?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,l===null?Xg(c,t.type,t.stateNode):Yg(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Fh(t,t.memoizedProps,s.memoizedProps)}break;case 27:pn(n,t),gn(t),l&512&&(Te||s===null||ri(s,s.return)),s!==null&&l&4&&Fh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(pn(n,t),gn(t),l&512&&(Te||s===null||ri(s,s.return)),t.flags&32){c=t.stateNode;try{Sn(c,"")}catch(Y){se(t,t.return,Y)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,Fh(t,c,s!==null?s.memoizedProps:c)),l&1024&&(Yh=!0);break;case 6:if(pn(n,t),gn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(Y){se(t,t.return,Y)}}break;case 3:if(wu=null,c=Fn,Fn=xu(n.containerInfo),pn(n,t),Fn=c,gn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Gl(n.containerInfo)}catch(Y){se(t,t.return,Y)}Yh&&(Yh=!1,eg(t));break;case 4:l=Fn,Fn=xu(t.stateNode.containerInfo),pn(n,t),gn(t),Fn=l;break;case 12:pn(n,t),gn(t);break;case 13:pn(n,t),gn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(tf=Ye()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kh(t,l)));break;case 22:c=t.memoizedState!==null;var M=s!==null&&s.memoizedState!==null,F=Ui,tt=Te;if(Ui=F||c,Te=tt||M,pn(n,t),Te=tt,Ui=F,gn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(s===null||M||Ui||Te||Er(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){M=s=n;try{if(f=M.stateNode,c)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=M.stateNode;var at=M.memoizedProps.style,G=at!=null&&at.hasOwnProperty("display")?at.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){se(M,M.return,Y)}}}else if(n.tag===6){if(s===null){M=n;try{M.stateNode.nodeValue=c?"":M.memoizedProps}catch(Y){se(M,M.return,Y)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Kh(t,s))));break;case 19:pn(n,t),gn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kh(t,l)));break;case 30:break;case 21:break;default:pn(n,t),gn(t)}}function gn(t){var n=t.flags;if(n&2){try{for(var s,l=t.return;l!==null;){if(Yp(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var c=s.stateNode,f=Gh(t);fu(t,f,c);break;case 5:var E=s.stateNode;s.flags&32&&(Sn(E,""),s.flags&=-33);var T=Gh(t);fu(t,T,E);break;case 3:case 4:var M=s.stateNode.containerInfo,F=Gh(t);Qh(t,F,M);break;default:throw Error(a(161))}}catch(tt){se(t,t.return,tt)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function eg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;eg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ms(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)$p(t,n.alternate,n),n=n.sibling}function Er(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ds(4,n,n.return),Er(n);break;case 1:ri(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Gp(n,n.return,s),Er(n);break;case 27:Ul(n.stateNode);case 26:case 5:ri(n,n.return),Er(n);break;case 22:n.memoizedState===null&&Er(n);break;case 30:Er(n);break;default:Er(n)}t=t.sibling}}function ps(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,E=f.flags;switch(f.tag){case 0:case 11:case 15:ps(c,f,s),wl(4,f);break;case 1:if(ps(c,f,s),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(F){se(l,l.return,F)}if(l=f,c=l.updateQueue,c!==null){var T=l.stateNode;try{var M=c.shared.hiddenCallbacks;if(M!==null)for(c.shared.hiddenCallbacks=null,c=0;c<M.length;c++)Nm(M[c],T)}catch(F){se(l,l.return,F)}}s&&E&64&&Fp(f),Cl(f,f.return);break;case 27:Kp(f);case 26:case 5:ps(c,f,s),s&&l===null&&E&4&&Qp(f),Cl(f,f.return);break;case 12:ps(c,f,s);break;case 13:ps(c,f,s),s&&E&4&&Wp(c,f);break;case 22:f.memoizedState===null&&ps(c,f,s),Cl(f,f.return);break;case 30:break;default:ps(c,f,s)}n=n.sibling}}function Xh(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&dl(s))}function $h(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&dl(t))}function ai(t,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ng(t,n,s,l),n=n.sibling}function ng(t,n,s,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ai(t,n,s,l),c&2048&&wl(9,n);break;case 1:ai(t,n,s,l);break;case 3:ai(t,n,s,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&dl(t)));break;case 12:if(c&2048){ai(t,n,s,l),t=n.stateNode;try{var f=n.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){se(n,n.return,M)}}else ai(t,n,s,l);break;case 13:ai(t,n,s,l);break;case 23:break;case 22:f=n.stateNode,E=n.alternate,n.memoizedState!==null?f._visibility&2?ai(t,n,s,l):Dl(t,n):f._visibility&2?ai(t,n,s,l):(f._visibility|=2,ha(t,n,s,l,(n.subtreeFlags&10256)!==0)),c&2048&&Xh(E,n);break;case 24:ai(t,n,s,l),c&2048&&$h(n.alternate,n);break;default:ai(t,n,s,l)}}function ha(t,n,s,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,E=n,T=s,M=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:ha(f,E,T,M,c),wl(8,E);break;case 23:break;case 22:var tt=E.stateNode;E.memoizedState!==null?tt._visibility&2?ha(f,E,T,M,c):Dl(f,E):(tt._visibility|=2,ha(f,E,T,M,c)),c&&F&2048&&Xh(E.alternate,E);break;case 24:ha(f,E,T,M,c),c&&F&2048&&$h(E.alternate,E);break;default:ha(f,E,T,M,c)}n=n.sibling}}function Dl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,l=n,c=l.flags;switch(l.tag){case 22:Dl(s,l),c&2048&&Xh(l.alternate,l);break;case 24:Dl(s,l),c&2048&&$h(l.alternate,l);break;default:Dl(s,l)}n=n.sibling}}var Nl=8192;function fa(t){if(t.subtreeFlags&Nl)for(t=t.child;t!==null;)ig(t),t=t.sibling}function ig(t){switch(t.tag){case 26:fa(t),t.flags&Nl&&t.memoizedState!==null&&oE(Fn,t.memoizedState,t.memoizedProps);break;case 5:fa(t);break;case 3:case 4:var n=Fn;Fn=xu(t.stateNode.containerInfo),fa(t),Fn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Nl,Nl=16777216,fa(t),Nl=n):fa(t));break;default:fa(t)}}function sg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Il(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Ue=l,ag(l,t)}sg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rg(t),t=t.sibling}function rg(t){switch(t.tag){case 0:case 11:case 15:Il(t),t.flags&2048&&ds(9,t,t.return);break;case 3:Il(t);break;case 12:Il(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,du(t)):Il(t);break;default:Il(t)}}function du(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];Ue=l,ag(l,t)}sg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ds(8,n,n.return),du(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,du(n));break;default:du(n)}t=t.sibling}}function ag(t,n){for(;Ue!==null;){var s=Ue;switch(s.tag){case 0:case 11:case 15:ds(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Ue=l;else t:for(s=t;Ue!==null;){l=Ue;var c=l.sibling,f=l.return;if(Zp(l),l===s){Ue=null;break t}if(c!==null){c.return=f,Ue=c;break t}Ue=f}}}var A1={getCacheForType:function(t){var n=$e(De),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},x1=typeof WeakMap=="function"?WeakMap:Map,Jt=0,ae=null,zt=null,Ft=0,Wt=0,yn=null,gs=!1,da=!1,Zh=!1,Li=0,pe=0,ys=0,Tr=0,Jh=0,Nn=0,ma=0,Ml=null,cn=null,Wh=!1,tf=0,mu=1/0,pu=null,_s=null,qe=0,vs=null,pa=null,ga=0,ef=0,nf=null,lg=null,Vl=0,sf=null;function _n(){if((Jt&2)!==0&&Ft!==0)return Ft&-Ft;if(P.T!==null){var t=ia;return t!==0?t:hf()}return Ti()}function og(){Nn===0&&(Nn=(Ft&536870912)===0||Xt?Ha():536870912);var t=Dn.current;return t!==null&&(t.flags|=32),Nn}function vn(t,n,s){(t===ae&&(Wt===2||Wt===9)||t.cancelPendingCommit!==null)&&(ya(t,0),Es(t,Ft,Nn,!1)),ge(t,s),((Jt&2)===0||t!==ae)&&(t===ae&&((Jt&2)===0&&(Tr|=s),pe===4&&Es(t,Ft,Nn,!1)),li(t))}function ug(t,n,s){if((Jt&6)!==0)throw Error(a(327));var l=!s&&(n&124)===0&&(n&t.expiredLanes)===0||Qi(t,n),c=l?C1(t,n):lf(t,n,!0),f=l;do{if(c===0){da&&!l&&Es(t,n,0,!1);break}else{if(s=t.current.alternate,f&&!R1(s)){c=lf(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){n=E;t:{var T=t;c=Ml;var M=T.current.memoizedState.isDehydrated;if(M&&(ya(T,E).flags|=256),E=lf(T,E,!1),E!==2){if(Zh&&!M){T.errorRecoveryDisabledLanes|=f,Tr|=f,c=4;break t}f=cn,cn=c,f!==null&&(cn===null?cn=f:cn.push.apply(cn,f))}c=E}if(f=!1,c!==2)continue}}if(c===1){ya(t,0),Es(t,n,0,!0);break}t:{switch(l=t,f=c,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Es(l,n,Nn,!gs);break t;case 2:cn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=tf+300-Ye(),10<c)){if(Es(l,n,Nn,!gs),Tn(l,0,!0)!==0)break t;l.timeoutHandle=kg(cg.bind(null,l,s,cn,pu,Wh,n,Nn,Tr,ma,gs,f,2,-0,0),c);break t}cg(l,s,cn,pu,Wh,n,Nn,Tr,ma,gs,f,0,-0,0)}}break}while(!0);li(t)}function cg(t,n,s,l,c,f,E,T,M,F,tt,at,G,Y){if(t.timeoutHandle=-1,at=n.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:lE},ig(n),at=uE(),at!==null)){t.cancelPendingCommit=at(yg.bind(null,t,n,f,s,l,c,E,T,M,tt,1,G,Y)),Es(t,f,E,!F);return}yg(t,n,f,s,l,c,E,T,M)}function R1(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],f=c.getSnapshot;c=c.value;try{if(!dn(f(),c))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Es(t,n,s,l){n&=~Jh,n&=~Tr,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-nn(c),E=1<<f;l[f]=-1,c&=~E}s!==0&&Ki(t,s,n)}function gu(){return(Jt&6)===0?(Ol(0),!1):!0}function rf(){if(zt!==null){if(Wt===0)var t=zt.return;else t=zt,Ii=pr=null,Th(t),ua=null,Al=0,t=zt;for(;t!==null;)Hp(t.alternate,t),t=t.return;zt=null}}function ya(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,F1(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),rf(),ae=t,zt=s=Ci(t.current,null),Ft=n,Wt=0,yn=null,gs=!1,da=Qi(t,n),Zh=!1,ma=Nn=Jh=Tr=ys=pe=0,cn=Ml=null,Wh=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-nn(l),f=1<<c;n|=t[c],l&=~f}return Li=n,ko(),s}function hg(t,n){Pt=null,P.H=iu,n===pl||n===Yo?(n=Cm(),Wt=3):n===xm?(n=Cm(),Wt=4):Wt=n===Dp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,yn=n,zt===null&&(pe=1,ou(t,xn(n,t.current)))}function fg(){var t=P.H;return P.H=iu,t===null?iu:t}function dg(){var t=P.A;return P.A=A1,t}function af(){pe=4,gs||(Ft&4194048)!==Ft&&Dn.current!==null||(da=!0),(ys&134217727)===0&&(Tr&134217727)===0||ae===null||Es(ae,Ft,Nn,!1)}function lf(t,n,s){var l=Jt;Jt|=2;var c=fg(),f=dg();(ae!==t||Ft!==n)&&(pu=null,ya(t,n)),n=!1;var E=pe;t:do try{if(Wt!==0&&zt!==null){var T=zt,M=yn;switch(Wt){case 8:rf(),E=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(n=!0);var F=Wt;if(Wt=0,yn=null,_a(t,T,M,F),s&&da){E=0;break t}break;default:F=Wt,Wt=0,yn=null,_a(t,T,M,F)}}w1(),E=pe;break}catch(tt){hg(t,tt)}while(!0);return n&&t.shellSuspendCounter++,Ii=pr=null,Jt=l,P.H=c,P.A=f,zt===null&&(ae=null,Ft=0,ko()),E}function w1(){for(;zt!==null;)mg(zt)}function C1(t,n){var s=Jt;Jt|=2;var l=fg(),c=dg();ae!==t||Ft!==n?(pu=null,mu=Ye()+500,ya(t,n)):da=Qi(t,n);t:do try{if(Wt!==0&&zt!==null){n=zt;var f=yn;e:switch(Wt){case 1:Wt=0,yn=null,_a(t,n,f,1);break;case 2:case 9:if(Rm(f)){Wt=0,yn=null,pg(n);break}n=function(){Wt!==2&&Wt!==9||ae!==t||(Wt=7),li(t)},f.then(n,n);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:Rm(f)?(Wt=0,yn=null,pg(n)):(Wt=0,yn=null,_a(t,n,f,7));break;case 5:var E=null;switch(zt.tag){case 26:E=zt.memoizedState;case 5:case 27:var T=zt;if(!E||$g(E)){Wt=0,yn=null;var M=T.sibling;if(M!==null)zt=M;else{var F=T.return;F!==null?(zt=F,yu(F)):zt=null}break e}}Wt=0,yn=null,_a(t,n,f,5);break;case 6:Wt=0,yn=null,_a(t,n,f,6);break;case 8:rf(),pe=6;break t;default:throw Error(a(462))}}D1();break}catch(tt){hg(t,tt)}while(!0);return Ii=pr=null,P.H=l,P.A=c,Jt=s,zt!==null?0:(ae=null,Ft=0,ko(),pe)}function D1(){for(;zt!==null&&!vi();)mg(zt)}function mg(t){var n=Bp(t.alternate,t,Li);t.memoizedProps=t.pendingProps,n===null?yu(t):zt=n}function pg(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=jp(s,n,n.pendingProps,n.type,void 0,Ft);break;case 11:n=jp(s,n,n.pendingProps,n.type.render,n.ref,Ft);break;case 5:Th(n);default:Hp(s,n),n=zt=gm(n,Li),n=Bp(s,n,Li)}t.memoizedProps=t.pendingProps,n===null?yu(t):zt=n}function _a(t,n,s,l){Ii=pr=null,Th(n),ua=null,Al=0;var c=n.return;try{if(_1(t,c,n,s,Ft)){pe=1,ou(t,xn(s,t.current)),zt=null;return}}catch(f){if(c!==null)throw zt=c,f;pe=1,ou(t,xn(s,t.current)),zt=null;return}n.flags&32768?(Xt||l===1?t=!0:da||(Ft&536870912)!==0?t=!1:(gs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),gg(n,t)):yu(n)}function yu(t){var n=t;do{if((n.flags&32768)!==0){gg(n,gs);return}t=n.return;var s=E1(n.alternate,n,Li);if(s!==null){zt=s;return}if(n=n.sibling,n!==null){zt=n;return}zt=n=t}while(n!==null);pe===0&&(pe=5)}function gg(t,n){do{var s=T1(t.alternate,t);if(s!==null){s.flags&=32767,zt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){zt=t;return}zt=t=s}while(t!==null);pe=6,zt=null}function yg(t,n,s,l,c,f,E,T,M){t.cancelPendingCommit=null;do _u();while(qe!==0);if((Jt&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=$c,To(t,s,f,E,T,M),t===ae&&(zt=ae=null,Ft=0),pa=n,vs=t,ga=s,ef=f,nf=c,lg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,V1(Ei,function(){return bg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,c=J.p,J.p=2,E=Jt,Jt|=4;try{b1(t,n,s)}finally{Jt=E,J.p=c,P.T=l}}qe=1,_g(),vg(),Eg()}}function _g(){if(qe===1){qe=0;var t=vs,n=pa,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=P.T,P.T=null;var l=J.p;J.p=2;var c=Jt;Jt|=4;try{tg(n,t);var f=vf,E=am(t.containerInfo),T=f.focusedElem,M=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&rm(T.ownerDocument.documentElement,T)){if(M!==null&&Gc(T)){var F=M.start,tt=M.end;if(tt===void 0&&(tt=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(tt,T.value.length);else{var at=T.ownerDocument||document,G=at&&at.defaultView||window;if(G.getSelection){var Y=G.getSelection(),Dt=T.textContent.length,Rt=Math.min(M.start,Dt),ie=M.end===void 0?Rt:Math.min(M.end,Dt);!Y.extend&&Rt>ie&&(E=ie,ie=Rt,Rt=E);var k=sm(T,Rt),j=sm(T,ie);if(k&&j&&(Y.rangeCount!==1||Y.anchorNode!==k.node||Y.anchorOffset!==k.offset||Y.focusNode!==j.node||Y.focusOffset!==j.offset)){var B=at.createRange();B.setStart(k.node,k.offset),Y.removeAllRanges(),Rt>ie?(Y.addRange(B),Y.extend(j.node,j.offset)):(B.setEnd(j.node,j.offset),Y.addRange(B))}}}}for(at=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&at.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<at.length;T++){var st=at[T];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}Nu=!!_f,vf=_f=null}finally{Jt=c,J.p=l,P.T=s}}t.current=n,qe=2}}function vg(){if(qe===2){qe=0;var t=vs,n=pa,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=P.T,P.T=null;var l=J.p;J.p=2;var c=Jt;Jt|=4;try{$p(t,n.alternate,n)}finally{Jt=c,J.p=l,P.T=s}}qe=3}}function Eg(){if(qe===4||qe===3){qe=0,zs();var t=vs,n=pa,s=ga,l=lg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qe=5:(qe=0,pa=vs=null,Tg(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(_s=null),Ga(s),n=n.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Fi,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=P.T,c=J.p,J.p=2,P.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{P.T=n,J.p=c}}(ga&3)!==0&&_u(),li(t),c=t.pendingLanes,(s&4194090)!==0&&(c&42)!==0?t===sf?Vl++:(Vl=0,sf=t):Vl=0,Ol(0)}}function Tg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,dl(n)))}function _u(t){return _g(),vg(),Eg(),bg()}function bg(){if(qe!==5)return!1;var t=vs,n=ef;ef=0;var s=Ga(ga),l=P.T,c=J.p;try{J.p=32>s?32:s,P.T=null,s=nf,nf=null;var f=vs,E=ga;if(qe=0,pa=vs=null,ga=0,(Jt&6)!==0)throw Error(a(331));var T=Jt;if(Jt|=4,rg(f.current),ng(f,f.current,E,s),Jt=T,Ol(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Fi,f)}catch{}return!0}finally{J.p=c,P.T=l,Tg(t,n)}}function Sg(t,n,s){n=xn(s,n),n=jh(t.stateNode,n,2),t=us(t,n,2),t!==null&&(ge(t,2),li(t))}function se(t,n,s){if(t.tag===3)Sg(t,t,s);else for(;n!==null;){if(n.tag===3){Sg(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(_s===null||!_s.has(l))){t=xn(s,t),s=wp(2),l=us(n,s,2),l!==null&&(Cp(s,l,n,t),ge(l,2),li(l));break}}n=n.return}}function of(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new x1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(Zh=!0,c.add(s),t=N1.bind(null,t,n,s),n.then(t,t))}function N1(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,ae===t&&(Ft&s)===s&&(pe===4||pe===3&&(Ft&62914560)===Ft&&300>Ye()-tf?(Jt&2)===0&&ya(t,0):Jh|=s,ma===Ft&&(ma=0)),li(t)}function Ag(t,n){n===0&&(n=Yi()),t=Wr(t,n),t!==null&&(ge(t,n),li(t))}function I1(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Ag(t,s)}function M1(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),Ag(t,s)}function V1(t,n){return Nt(t,n)}var vu=null,va=null,uf=!1,Eu=!1,cf=!1,br=0;function li(t){t!==va&&t.next===null&&(va===null?vu=va=t:va=va.next=t),Eu=!0,uf||(uf=!0,j1())}function Ol(t,n){if(!cf&&Eu){cf=!0;do for(var s=!1,l=vu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-nn(42|t)+1)-1,f&=c&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,Cg(l,f))}else f=Ft,f=Tn(l,l===ae?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Qi(l,f)||(s=!0,Cg(l,f));l=l.next}while(s);cf=!1}}function O1(){xg()}function xg(){Eu=uf=!1;var t=0;br!==0&&(H1()&&(t=br),br=0);for(var n=Ye(),s=null,l=vu;l!==null;){var c=l.next,f=Rg(l,n);f===0?(l.next=null,s===null?vu=c:s.next=c,c===null&&(va=s)):(s=l,(t!==0||(f&3)!==0)&&(Eu=!0)),l=c}Ol(t)}function Rg(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-nn(f),T=1<<E,M=c[E];M===-1?((T&s)===0||(T&l)!==0)&&(c[E]=Pr(T,n)):M<=n&&(t.expiredLanes|=T),f&=~T}if(n=ae,s=Ft,s=Tn(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===n&&(Wt===2||Wt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ot(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Qi(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(l!==null&&Ot(l),Ga(s)){case 2:case 8:s=Oe;break;case 32:s=Ei;break;case 268435456:s=qa;break;default:s=Ei}return l=wg.bind(null,t),s=Nt(s,l),t.callbackPriority=n,t.callbackNode=s,n}return l!==null&&l!==null&&Ot(l),t.callbackPriority=2,t.callbackNode=null,2}function wg(t,n){if(qe!==0&&qe!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(_u()&&t.callbackNode!==s)return null;var l=Ft;return l=Tn(t,t===ae?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ug(t,l,n),Rg(t,Ye()),t.callbackNode!=null&&t.callbackNode===s?wg.bind(null,t):null)}function Cg(t,n){if(_u())return null;ug(t,n,!0)}function j1(){G1(function(){(Jt&6)!==0?Nt(we,O1):xg()})}function hf(){return br===0&&(br=Ha()),br}function Dg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ln(""+t)}function Ng(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function P1(t,n,s,l,c){if(n==="submit"&&s&&s.stateNode===c){var f=Dg((c[ze]||null).action),E=l.submitter;E&&(n=(n=E[ze]||null)?Dg(n.formAction):E.getAttribute("formAction"),n!==null&&(f=n,E=null));var T=new er("action","action",null,l,c);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(br!==0){var M=E?Ng(c,E):new FormData(c);Nh(s,{pending:!0,data:M,method:c.method,action:f},null,M)}}else typeof f=="function"&&(T.preventDefault(),M=E?Ng(c,E):new FormData(c),Nh(s,{pending:!0,data:M,method:c.method,action:f},f,M))},currentTarget:c}]})}}for(var ff=0;ff<Xc.length;ff++){var df=Xc[ff],U1=df.toLowerCase(),k1=df[0].toUpperCase()+df.slice(1);Hn(U1,"on"+k1)}Hn(um,"onAnimationEnd"),Hn(cm,"onAnimationIteration"),Hn(hm,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(e1,"onTransitionRun"),Hn(n1,"onTransitionStart"),Hn(i1,"onTransitionCancel"),Hn(fm,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function Ig(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],c=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var E=l.length-1;0<=E;E--){var T=l[E],M=T.instance,F=T.currentTarget;if(T=T.listener,M!==f&&c.isPropagationStopped())break t;f=T,c.currentTarget=F;try{f(c)}catch(tt){lu(tt)}c.currentTarget=null,f=M}else for(E=0;E<l.length;E++){if(T=l[E],M=T.instance,F=T.currentTarget,T=T.listener,M!==f&&c.isPropagationStopped())break t;f=T,c.currentTarget=F;try{f(c)}catch(tt){lu(tt)}c.currentTarget=null,f=M}}}}function Bt(t,n){var s=n[qs];s===void 0&&(s=n[qs]=new Set);var l=t+"__bubble";s.has(l)||(Mg(n,t,2,!1),s.add(l))}function mf(t,n,s){var l=0;n&&(l|=4),Mg(s,t,l,n)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function pf(t){if(!t[Tu]){t[Tu]=!0,bo.forEach(function(s){s!=="selectionchange"&&(L1.has(s)||mf(s,!1,t),mf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Tu]||(n[Tu]=!0,mf("selectionchange",!1,n))}}function Mg(t,n,s,l){switch(ny(n)){case 2:var c=fE;break;case 8:c=dE;break;default:c=Df}s=c.bind(null,n,s,t),c=void 0,!Ri||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function gf(t,n,s,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===c)break;if(E===4)for(E=l.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===c)return;E=E.return}for(;T!==null;){if(E=$n(T),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){l=f=E;continue t}T=T.parentNode}}l=l.return}Js(function(){var F=f,tt=Ja(s),at=[];t:{var G=dm.get(t);if(G!==void 0){var Y=er,Dt=t;switch(t){case"keypress":if(Ws(s)===0)break t;case"keydown":case"keyup":Y=Xr;break;case"focusin":Dt="focus",Y=Qr;break;case"focusout":Dt="blur",Y=Qr;break;case"beforeblur":case"afterblur":Y=Qr;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Do;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=rs;break;case um:case cm:case hm:Y=tl;break;case fm:Y=m;break;case"scroll":case"scrollend":Y=ir;break;case"wheel":Y=A;break;case"copy":case"cut":case"paste":Y=Io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=il;break;case"toggle":case"beforetoggle":Y=$}var Rt=(n&4)!==0,ie=!Rt&&(t==="scroll"||t==="scrollend"),k=Rt?G!==null?G+"Capture":null:G;Rt=[];for(var j=F,B;j!==null;){var st=j;if(B=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||B===null||k===null||(st=is(j,k),st!=null&&Rt.push(Pl(j,st,B))),ie)break;j=j.return}0<Rt.length&&(G=new Y(G,Dt,null,s,tt),at.push({event:G,listeners:Rt}))}}if((n&7)===0){t:{if(G=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",G&&s!==Za&&(Dt=s.relatedTarget||s.fromElement)&&($n(Dt)||Dt[bi]))break t;if((Y||G)&&(G=tt.window===tt?tt:(G=tt.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(Dt=s.relatedTarget||s.toElement,Y=F,Dt=Dt?$n(Dt):null,Dt!==null&&(ie=h(Dt),Rt=Dt.tag,Dt!==ie||Rt!==5&&Rt!==27&&Rt!==6)&&(Dt=null)):(Y=null,Dt=F),Y!==Dt)){if(Rt=ar,st="onMouseLeave",k="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Rt=il,st="onPointerLeave",k="onPointerEnter",j="pointer"),ie=Y==null?G:Zi(Y),B=Dt==null?G:Zi(Dt),G=new Rt(st,j+"leave",Y,s,tt),G.target=ie,G.relatedTarget=B,st=null,$n(tt)===F&&(Rt=new Rt(k,j+"enter",Dt,s,tt),Rt.target=B,Rt.relatedTarget=ie,st=Rt),ie=st,Y&&Dt)e:{for(Rt=Y,k=Dt,j=0,B=Rt;B;B=Ea(B))j++;for(B=0,st=k;st;st=Ea(st))B++;for(;0<j-B;)Rt=Ea(Rt),j--;for(;0<B-j;)k=Ea(k),B--;for(;j--;){if(Rt===k||k!==null&&Rt===k.alternate)break e;Rt=Ea(Rt),k=Ea(k)}Rt=null}else Rt=null;Y!==null&&Vg(at,G,Y,Rt,!1),Dt!==null&&ie!==null&&Vg(at,ie,Dt,Rt,!0)}}t:{if(G=F?Zi(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var vt=Jd;else if($d(G))if(Wd)vt=J0;else{vt=$0;var Ut=X0}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Hr(F.elementType)&&(vt=Jd):vt=Z0;if(vt&&(vt=vt(t,F))){Zd(at,vt,s,tt);break t}Ut&&Ut(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Ka(G,"number",G.value)}switch(Ut=F?Zi(F):window,t){case"focusin":($d(Ut)||Ut.contentEditable==="true")&&($r=Ut,Qc=F,ol=null);break;case"focusout":ol=Qc=$r=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,lm(at,s,tt);break;case"selectionchange":if(t1)break;case"keydown":case"keyup":lm(at,s,tt)}var At;if(Mt)t:{switch(t){case"compositionstart":var wt="onCompositionStart";break t;case"compositionend":wt="onCompositionEnd";break t;case"compositionupdate":wt="onCompositionUpdate";break t}wt=void 0}else qn?zn(t,s)&&(wt="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(wt="onCompositionStart");wt&&(ve&&s.locale!=="ko"&&(qn||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&qn&&(At=Co()):(An=tt,re="value"in An?An.value:An.textContent,qn=!0)),Ut=bu(F,wt),0<Ut.length&&(wt=new nl(wt,t,null,s,tt),at.push({event:wt,listeners:Ut}),At?wt.data=At:(At=Bn(s),At!==null&&(wt.data=At)))),(At=Zt?sl(t,s):Q0(t,s))&&(wt=bu(F,"onBeforeInput"),0<wt.length&&(Ut=new nl("onBeforeInput","beforeinput",null,s,tt),at.push({event:Ut,listeners:wt}),Ut.data=At)),P1(at,t,F,s,tt)}Ig(at,n)})}function Pl(t,n,s){return{instance:t,listener:n,currentTarget:s}}function bu(t,n){for(var s=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=is(t,s),c!=null&&l.unshift(Pl(t,c,f)),c=is(t,n),c!=null&&l.push(Pl(t,c,f))),t.tag===3)return l;t=t.return}return[]}function Ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vg(t,n,s,l,c){for(var f=n._reactName,E=[];s!==null&&s!==l;){var T=s,M=T.alternate,F=T.stateNode;if(T=T.tag,M!==null&&M===l)break;T!==5&&T!==26&&T!==27||F===null||(M=F,c?(F=is(s,f),F!=null&&E.unshift(Pl(s,F,M))):c||(F=is(s,f),F!=null&&E.push(Pl(s,F,M)))),s=s.return}E.length!==0&&t.push({event:n,listeners:E})}var z1=/\r\n?/g,B1=/\u0000|\uFFFD/g;function Og(t){return(typeof t=="string"?t:""+t).replace(z1,`
`).replace(B1,"")}function jg(t,n){return n=Og(n),Og(t)===n}function Su(){}function ne(t,n,s,l,c,f){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Sn(t,""+l);break;case"className":Ys(t,"class",l);break;case"tabIndex":Ys(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ys(t,s,l);break;case"style":$a(t,l,f);break;case"data":if(n!=="object"){Ys(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Ln(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(n!=="input"&&ne(t,n,"name",c.name,c,null),ne(t,n,"formEncType",c.formEncType,c,null),ne(t,n,"formMethod",c.formMethod,c,null),ne(t,n,"formTarget",c.formTarget,c,null)):(ne(t,n,"encType",c.encType,c,null),ne(t,n,"method",c.method,c,null),ne(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Ln(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Su);break;case"onScroll":l!=null&&Bt("scroll",t);break;case"onScrollEnd":l!=null&&Bt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Ln(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Bt("beforetoggle",t),Bt("toggle",t),Qs(t,"popover",l);break;case"xlinkActuate":bn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":bn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":bn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":bn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":bn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":bn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":bn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":bn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":bn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Qs(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=xo.get(s)||s,Qs(t,s,l))}}function yf(t,n,s,l,c,f){switch(s){case"style":$a(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&Sn(t,""+l);break;case"onScroll":l!=null&&Bt("scroll",t);break;case"onScrollEnd":l!=null&&Bt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Su);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fs.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),n=s.slice(2,c?s.length-7:void 0),f=t[ze]||null,f=f!=null?f[s]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,l,c);break t}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Qs(t,s,l)}}}function He(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",t),Bt("load",t);var l=!1,c=!1,f;for(f in s)if(s.hasOwnProperty(f)){var E=s[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ne(t,n,f,E,s,null)}}c&&ne(t,n,"srcSet",s.srcSet,s,null),l&&ne(t,n,"src",s.src,s,null);return;case"input":Bt("invalid",t);var T=f=E=c=null,M=null,F=null;for(l in s)if(s.hasOwnProperty(l)){var tt=s[l];if(tt!=null)switch(l){case"name":c=tt;break;case"type":E=tt;break;case"checked":M=tt;break;case"defaultChecked":F=tt;break;case"value":f=tt;break;case"defaultValue":T=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,n));break;default:ne(t,n,l,tt,s,null)}}Ya(t,f,T,M,F,E,c,!1),ts(t);return;case"select":Bt("invalid",t),l=E=f=null;for(c in s)if(s.hasOwnProperty(c)&&(T=s[c],T!=null))switch(c){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:ne(t,n,c,T,s,null)}n=f,s=E,t.multiple=!!l,n!=null?es(t,!!l,n,!1):s!=null&&es(t,!!l,s,!0);return;case"textarea":Bt("invalid",t),f=c=l=null;for(E in s)if(s.hasOwnProperty(E)&&(T=s[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":c=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:ne(t,n,E,T,s,null)}Ao(t,l,c,f),ts(t);return;case"option":for(M in s)if(s.hasOwnProperty(M)&&(l=s[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ne(t,n,M,l,s,null)}return;case"dialog":Bt("beforetoggle",t),Bt("toggle",t),Bt("cancel",t),Bt("close",t);break;case"iframe":case"object":Bt("load",t);break;case"video":case"audio":for(l=0;l<jl.length;l++)Bt(jl[l],t);break;case"image":Bt("error",t),Bt("load",t);break;case"details":Bt("toggle",t);break;case"embed":case"source":case"link":Bt("error",t),Bt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in s)if(s.hasOwnProperty(F)&&(l=s[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ne(t,n,F,l,s,null)}return;default:if(Hr(n)){for(tt in s)s.hasOwnProperty(tt)&&(l=s[tt],l!==void 0&&yf(t,n,tt,l,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(l=s[T],l!=null&&ne(t,n,T,l,s,null))}function q1(t,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,E=null,T=null,M=null,F=null,tt=null;for(Y in s){var at=s[Y];if(s.hasOwnProperty(Y)&&at!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":M=at;default:l.hasOwnProperty(Y)||ne(t,n,Y,null,l,at)}}for(var G in l){var Y=l[G];if(at=s[G],l.hasOwnProperty(G)&&(Y!=null||at!=null))switch(G){case"type":f=Y;break;case"name":c=Y;break;case"checked":F=Y;break;case"defaultChecked":tt=Y;break;case"value":E=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,n));break;default:Y!==at&&ne(t,n,G,Y,l,at)}}Qa(t,E,T,M,F,tt,f,c);return;case"select":Y=E=T=G=null;for(f in s)if(M=s[f],s.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":Y=M;default:l.hasOwnProperty(f)||ne(t,n,f,null,l,M)}for(c in l)if(f=l[c],M=s[c],l.hasOwnProperty(c)&&(f!=null||M!=null))switch(c){case"value":G=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==M&&ne(t,n,c,f,l,M)}n=T,s=E,l=Y,G!=null?es(t,!!s,G,!1):!!l!=!!s&&(n!=null?es(t,!!s,n,!0):es(t,!!s,s?[]:"",!1));return;case"textarea":Y=G=null;for(T in s)if(c=s[T],s.hasOwnProperty(T)&&c!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ne(t,n,T,null,l,c)}for(E in l)if(c=l[E],f=s[E],l.hasOwnProperty(E)&&(c!=null||f!=null))switch(E){case"value":G=c;break;case"defaultValue":Y=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==f&&ne(t,n,E,c,l,f)}So(t,G,Y);return;case"option":for(var Dt in s)if(G=s[Dt],s.hasOwnProperty(Dt)&&G!=null&&!l.hasOwnProperty(Dt))switch(Dt){case"selected":t.selected=!1;break;default:ne(t,n,Dt,null,l,G)}for(M in l)if(G=l[M],Y=s[M],l.hasOwnProperty(M)&&G!==Y&&(G!=null||Y!=null))switch(M){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ne(t,n,M,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in s)G=s[Rt],s.hasOwnProperty(Rt)&&G!=null&&!l.hasOwnProperty(Rt)&&ne(t,n,Rt,null,l,G);for(F in l)if(G=l[F],Y=s[F],l.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(a(137,n));break;default:ne(t,n,F,G,l,Y)}return;default:if(Hr(n)){for(var ie in s)G=s[ie],s.hasOwnProperty(ie)&&G!==void 0&&!l.hasOwnProperty(ie)&&yf(t,n,ie,void 0,l,G);for(tt in l)G=l[tt],Y=s[tt],!l.hasOwnProperty(tt)||G===Y||G===void 0&&Y===void 0||yf(t,n,tt,G,l,Y);return}}for(var k in s)G=s[k],s.hasOwnProperty(k)&&G!=null&&!l.hasOwnProperty(k)&&ne(t,n,k,null,l,G);for(at in l)G=l[at],Y=s[at],!l.hasOwnProperty(at)||G===Y||G==null&&Y==null||ne(t,n,at,G,l,Y)}var _f=null,vf=null;function Au(t){return t.nodeType===9?t:t.ownerDocument}function Pg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ug(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ef(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Tf=null;function H1(){var t=window.event;return t&&t.type==="popstate"?t===Tf?!1:(Tf=t,!0):(Tf=null,!1)}var kg=typeof setTimeout=="function"?setTimeout:void 0,F1=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(t){return Lg.resolve(null).then(t).catch(Q1)}:kg;function Q1(t){setTimeout(function(){throw t})}function Ts(t){return t==="head"}function zg(t,n){var s=n,l=0,c=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(0<l&&8>l){s=l;var E=t.ownerDocument;if(s&1&&Ul(E.documentElement),s&2&&Ul(E.body),s&4)for(s=E.head,Ul(s),E=s.firstChild;E;){var T=E.nextSibling,M=E.nodeName;E[$i]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||s.removeChild(E),E=T}}if(c===0){t.removeChild(f),Gl(n);return}c--}else s==="$"||s==="$?"||s==="$!"?c++:l=s.charCodeAt(0)-48;else l=0;s=f}while(s);Gl(n)}function bf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":bf(s),kr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Y1(t,n,s,l){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[$i])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function K1(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Gn(t.nextSibling),t===null))return null;return t}function Sf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function X1(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Gn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Af=null;function Bg(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function qg(t,n,s){switch(n=Au(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ul(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);kr(t)}var In=new Map,Hg=new Set;function xu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var zi=J.d;J.d={f:$1,r:Z1,D:J1,C:W1,L:tE,m:eE,X:iE,S:nE,M:sE};function $1(){var t=zi.f(),n=gu();return t||n}function Z1(t){var n=Zn(t);n!==null&&n.tag===5&&n.type==="form"?up(n):zi.r(t)}var Ta=typeof document>"u"?null:document;function Fg(t,n,s){var l=Ta;if(l&&typeof n=="string"&&n){var c=je(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Hg.has(c)||(Hg.add(c),t={rel:t,crossOrigin:s,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),He(n,"link",t),_e(n),l.head.appendChild(n)))}}function J1(t){zi.D(t),Fg("dns-prefetch",t,null)}function W1(t,n){zi.C(t,n),Fg("preconnect",t,n)}function tE(t,n,s){zi.L(t,n,s);var l=Ta;if(l&&t&&n){var c='link[rel="preload"][as="'+je(n)+'"]';n==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+je(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+je(s.imageSizes)+'"]')):c+='[href="'+je(t)+'"]';var f=c;switch(n){case"style":f=ba(t);break;case"script":f=Sa(t)}In.has(f)||(t=b({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),In.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(kl(f))||n==="script"&&l.querySelector(Ll(f))||(n=l.createElement("link"),He(n,"link",t),_e(n),l.head.appendChild(n)))}}function eE(t,n){zi.m(t,n);var s=Ta;if(s&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+je(l)+'"][href="'+je(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Sa(t)}if(!In.has(f)&&(t=b({rel:"modulepreload",href:t},n),In.set(f,t),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ll(f)))return}l=s.createElement("link"),He(l,"link",t),_e(l),s.head.appendChild(l)}}}function nE(t,n,s){zi.S(t,n,s);var l=Ta;if(l&&t){var c=Ji(l).hoistableStyles,f=ba(t);n=n||"default";var E=c.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(kl(f)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},s),(s=In.get(f))&&xf(t,s);var M=E=l.createElement("link");_e(M),He(M,"link",t),M._p=new Promise(function(F,tt){M.onload=F,M.onerror=tt}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ru(E,n,l)}E={type:"stylesheet",instance:E,count:1,state:T},c.set(f,E)}}}function iE(t,n){zi.X(t,n);var s=Ta;if(s&&t){var l=Ji(s).hoistableScripts,c=Sa(t),f=l.get(c);f||(f=s.querySelector(Ll(c)),f||(t=b({src:t,async:!0},n),(n=In.get(c))&&Rf(t,n),f=s.createElement("script"),_e(f),He(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function sE(t,n){zi.M(t,n);var s=Ta;if(s&&t){var l=Ji(s).hoistableScripts,c=Sa(t),f=l.get(c);f||(f=s.querySelector(Ll(c)),f||(t=b({src:t,async:!0,type:"module"},n),(n=In.get(c))&&Rf(t,n),f=s.createElement("script"),_e(f),He(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Gg(t,n,s,l){var c=(c=W.current)?xu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=ba(s.href),s=Ji(c).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=ba(s.href);var f=Ji(c).hoistableStyles,E=f.get(t);if(E||(c=c.ownerDocument||c,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=c.querySelector(kl(t)))&&!f._p&&(E.instance=f,E.state.loading=5),In.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},In.set(t,s),f||rE(c,t,s,E.state))),n&&l===null)throw Error(a(528,""));return E}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Sa(s),s=Ji(c).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ba(t){return'href="'+je(t)+'"'}function kl(t){return'link[rel="stylesheet"]['+t+"]"}function Qg(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function rE(t,n,s,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),He(n,"link",s),_e(n),t.head.appendChild(n))}function Sa(t){return'[src="'+je(t)+'"]'}function Ll(t){return"script[async]"+t}function Yg(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+je(s.href)+'"]');if(l)return n.instance=l,_e(l),l;var c=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),_e(l),He(l,"style",c),Ru(l,s.precedence,t),n.instance=l;case"stylesheet":c=ba(s.href);var f=t.querySelector(kl(c));if(f)return n.state.loading|=4,n.instance=f,_e(f),f;l=Qg(s),(c=In.get(c))&&xf(l,c),f=(t.ownerDocument||t).createElement("link"),_e(f);var E=f;return E._p=new Promise(function(T,M){E.onload=T,E.onerror=M}),He(f,"link",l),n.state.loading|=4,Ru(f,s.precedence,t),n.instance=f;case"script":return f=Sa(s.src),(c=t.querySelector(Ll(f)))?(n.instance=c,_e(c),c):(l=s,(c=In.get(f))&&(l=b({},s),Rf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),_e(c),He(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Ru(l,s.precedence,t));return n.instance}function Ru(t,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===n)f=T;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function xf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Rf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var wu=null;function Kg(t,n,s){if(wu===null){var l=new Map,c=wu=new Map;c.set(s,l)}else c=wu,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var f=s[c];if(!(f[$i]||f[ye]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(n)||"";E=t+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function Xg(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function aE(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function $g(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var zl=null;function lE(){}function oE(t,n,s){if(zl===null)throw Error(a(475));var l=zl;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=ba(s.href),f=t.querySelector(kl(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Cu.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=f,_e(f);return}f=t.ownerDocument||t,s=Qg(s),(c=In.get(c))&&xf(s,c),f=f.createElement("link"),_e(f);var E=f;E._p=new Promise(function(T,M){E.onload=T,E.onerror=M}),He(f,"link",s),n.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Cu.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function uE(){if(zl===null)throw Error(a(475));var t=zl;return t.stylesheets&&t.count===0&&wf(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&wf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Cu(){if(this.count--,this.count===0){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Du=null;function wf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Du=new Map,n.forEach(cE,t),Du=null,Cu.call(t))}function cE(t,n){if(!(n.state.loading&4)){var s=Du.get(t);if(s)var l=s.get(null);else{s=new Map,Du.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var E=c[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(s.set(E.dataset.precedence,E),l=E)}l&&s.set(null,l)}c=n.instance,E=c.getAttribute("data-precedence"),f=s.get(E)||l,f===l&&s.set(null,c),s.set(E,c),this.count++,l=Cu.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Bl={$$typeof:ht,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function hE(t,n,s,l,c,f,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Zg(t,n,s,l,c,f,E,T,M,F,tt,at){return t=new hE(t,n,s,E,T,M,F,at),n=1,f===!0&&(n|=24),f=mn(3,null,null,n),t.current=f,f.stateNode=t,n=lh(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:s,cache:n},hh(f),t}function Jg(t){return t?(t=ta,t):ta}function Wg(t,n,s,l,c,f){c=Jg(c),l.context===null?l.context=c:l.pendingContext=c,l=os(n),l.payload={element:s},f=f===void 0?null:f,f!==null&&(l.callback=f),s=us(t,l,n),s!==null&&(vn(s,t,n),yl(s,t,n))}function ty(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Cf(t,n){ty(t,n),(t=t.alternate)&&ty(t,n)}function ey(t){if(t.tag===13){var n=Wr(t,67108864);n!==null&&vn(n,t,67108864),Cf(t,67108864)}}var Nu=!0;function fE(t,n,s,l){var c=P.T;P.T=null;var f=J.p;try{J.p=2,Df(t,n,s,l)}finally{J.p=f,P.T=c}}function dE(t,n,s,l){var c=P.T;P.T=null;var f=J.p;try{J.p=8,Df(t,n,s,l)}finally{J.p=f,P.T=c}}function Df(t,n,s,l){if(Nu){var c=Nf(l);if(c===null)gf(t,n,l,Iu,s),iy(t,l);else if(pE(c,t,n,s,l))l.stopPropagation();else if(iy(t,l),n&4&&-1<mE.indexOf(t)){for(;c!==null;){var f=Zn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Pn(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var M=1<<31-nn(E);T.entanglements[1]|=M,E&=~M}li(f),(Jt&6)===0&&(mu=Ye()+500,Ol(0))}}break;case 13:T=Wr(f,2),T!==null&&vn(T,f,2),gu(),Cf(f,2)}if(f=Nf(l),f===null&&gf(t,n,l,Iu,s),f===c)break;c=f}c!==null&&l.stopPropagation()}else gf(t,n,l,null,s)}}function Nf(t){return t=Ja(t),If(t)}var Iu=null;function If(t){if(Iu=null,t=$n(t),t!==null){var n=h(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=d(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Iu=t,null}function ny(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_o()){case we:return 2;case Oe:return 8;case Ei:case jc:return 32;case qa:return 268435456;default:return 32}default:return 32}}var Mf=!1,bs=null,Ss=null,As=null,ql=new Map,Hl=new Map,xs=[],mE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iy(t,n){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":ql.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(n.pointerId)}}function Fl(t,n,s,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Zn(n),n!==null&&ey(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function pE(t,n,s,l,c){switch(n){case"focusin":return bs=Fl(bs,t,n,s,l,c),!0;case"dragenter":return Ss=Fl(Ss,t,n,s,l,c),!0;case"mouseover":return As=Fl(As,t,n,s,l,c),!0;case"pointerover":var f=c.pointerId;return ql.set(f,Fl(ql.get(f)||null,t,n,s,l,c)),!0;case"gotpointercapture":return f=c.pointerId,Hl.set(f,Fl(Hl.get(f)||null,t,n,s,l,c)),!0}return!1}function sy(t){var n=$n(t.target);if(n!==null){var s=h(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){t.blockedOn=n,kc(t.priority,function(){if(s.tag===13){var l=_n();l=Fa(l);var c=Wr(s,l);c!==null&&vn(c,s,l),Cf(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Nf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Za=l,s.target.dispatchEvent(l),Za=null}else return n=Zn(s),n!==null&&ey(n),t.blockedOn=s,!1;n.shift()}return!0}function ry(t,n,s){Mu(t)&&s.delete(n)}function gE(){Mf=!1,bs!==null&&Mu(bs)&&(bs=null),Ss!==null&&Mu(Ss)&&(Ss=null),As!==null&&Mu(As)&&(As=null),ql.forEach(ry),Hl.forEach(ry)}function Vu(t,n){t.blockedOn===n&&(t.blockedOn=null,Mf||(Mf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,gE)))}var Ou=null;function ay(t){Ou!==t&&(Ou=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ou===t&&(Ou=null);for(var n=0;n<t.length;n+=3){var s=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(If(l||s)===null)continue;break}var f=Zn(s);f!==null&&(t.splice(n,3),n-=3,Nh(f,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function Gl(t){function n(M){return Vu(M,t)}bs!==null&&Vu(bs,t),Ss!==null&&Vu(Ss,t),As!==null&&Vu(As,t),ql.forEach(n),Hl.forEach(n);for(var s=0;s<xs.length;s++){var l=xs[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<xs.length&&(s=xs[0],s.blockedOn===null);)sy(s),s.blockedOn===null&&xs.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],f=s[l+1],E=c[ze]||null;if(typeof f=="function")E||ay(s);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(c=f,E=f[ze]||null)T=E.formAction;else if(If(c)!==null)continue}else T=E.action;typeof T=="function"?s[l+1]=T:(s.splice(l,3),l-=3),ay(s)}}}function Vf(t){this._internalRoot=t}ju.prototype.render=Vf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=_n();Wg(s,l,t,n,null,null)},ju.prototype.unmount=Vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Wg(t.current,2,null,t,null,null),gu(),n[bi]=null}};function ju(t){this._internalRoot=t}ju.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ti();t={blockedOn:null,target:t,priority:n};for(var s=0;s<xs.length&&n!==0&&n<xs[s].priority;s++);xs.splice(s,0,t),s===0&&sy(t)}};var ly=e.version;if(ly!=="19.1.1")throw Error(a(527,ly,"19.1.1"));J.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var yE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pu.isDisabled&&Pu.supportsFiber)try{Fi=Pu.inject(yE),Ke=Pu}catch{}}return Yl.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,l="",c=Sp,f=Ap,E=xp,T=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(E=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=Zg(t,1,!1,null,null,s,l,c,f,E,T,null),t[bi]=n.current,pf(t),new Vf(n)},Yl.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var l=!1,c="",f=Sp,E=Ap,T=xp,M=null,F=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(E=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks),s.formState!==void 0&&(F=s.formState)),n=Zg(t,1,!0,n,s??null,l,c,f,E,T,M,F),n.context=Jg(null),s=n.current,l=_n(),l=Fa(l),c=os(l),c.callback=null,us(s,c,l),s=l,n.current.lanes=s,ge(n,s),li(n),t[bi]=n.current,pf(t),new ju(n)},Yl.version="19.1.1",Yl}var yy;function wE(){if(yy)return Pf.exports;yy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pf.exports=RE(),Pf.exports}var CE=wE();const DE="modulepreload",NE=function(r){return"/CRM_VER.4/"+r},_y={},IE=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let _=function(b){return Promise.all(b.map(C=>Promise.resolve(C).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var d=_;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),y=g?.nonce||g?.getAttribute("nonce");o=_(i.map(b=>{if(b=NE(b),b in _y)return;_y[b]=!0;const C=b.endsWith(".css"),I=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${I}`))return;const L=document.createElement("link");if(L.rel=C?"stylesheet":DE,C||(L.as="script"),L.crossOrigin="",L.href=b,y&&L.setAttribute("nonce",y),document.head.appendChild(L),C)return new Promise((z,ot)=>{L.addEventListener("load",z),L.addEventListener("error",()=>ot(new Error(`Unable to preload CSS for ${b}`)))})}))}function h(g){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=g,window.dispatchEvent(y),!y.defaultPrevented)throw g}return o.then(g=>{for(const y of g||[])y.status==="rejected"&&h(y.reason);return e().catch(h)})},vy=["네이버광고","블로그","워킹","지인소개","기존고객","기타"],Ey=["매매","월세","전세","상가","사무실","지식산업센터","아파트"],ME=["신규","진행중","장기관리고객","보류"],P_=["매물제안예정","매물제안중","미팅예정","접수후대기중"],Mn=["확인전","확인중","볼수있음","오늘못봄","계약됨"],VE=({activeFilter:r,onFilterChange:e,customers:i,meetings:a,activities:o,isMobileOpen:h,onMobileClose:d})=>{const[g,y]=Tt.useState(!1),_=I=>{const L=new Date;return L.setHours(0,0,0,0),I==="전체"?i.length:I==="집중고객"?i.filter(z=>z.isFavorite).length:I==="장기관리고객"?i.filter(z=>z.status==="장기관리고객").length:I==="오늘미팅"?i.filter(z=>a.filter(X=>X.customerId===z.id).some(X=>{const ut=new Date(X.date);return ut.setHours(0,0,0,0),ut.getTime()===L.getTime()})).length:I==="미팅일확정"?i.filter(z=>a.filter(X=>X.customerId===z.id).some(X=>{const ut=new Date(X.date);return ut.setHours(0,0,0,0),ut>L})).length:I==="오늘연락"?i.filter(z=>o.filter(X=>X.customerId===z.id).some(X=>{const ut=new Date(X.date);return ut.setHours(0,0,0,0),ut.getTime()===L.getTime()})).length:I==="어제연락"?i.filter(z=>o.filter(X=>X.customerId===z.id).some(X=>{const ut=new Date(X.date);ut.setHours(0,0,0,0);const et=new Date(L);return et.setDate(et.getDate()-1),ut.getTime()===et.getTime()})).length:I==="연락할고객"?i.filter(z=>{if(z.status==="보류")return!1;const ot=o.filter(et=>et.customerId===z.id),X=new Date(L),ut=new Date(L);return ut.setDate(ut.getDate()-1),!ot.some(et=>{const ht=new Date(et.date);return ht.setHours(0,0,0,0),ht.getTime()===X.getTime()||ht.getTime()===ut.getTime()})}).length:i.filter(z=>z.status===I).length},b=["전체","보류","신규","진행중","장기관리고객","집중고객","오늘미팅","미팅일확정","오늘연락","어제연락","연락할고객"],C=I=>{e(I),d()};return p.jsxs("aside",{className:`filter-sidebar ${g?"collapsed":""} ${h?"mobile-open":""}`,children:[p.jsxs("div",{className:"filter-header",children:[!g&&p.jsx("h4",{children:"필터"}),p.jsx("button",{onClick:()=>y(!g),className:"btn-close desktop-only",children:g?"☰":"✕"}),p.jsx("button",{onClick:d,className:"btn-close mobile-only",children:"✕"})]}),!g&&p.jsx("ul",{className:"filter-list",children:b.map(I=>p.jsxs("li",{className:`filter-item ${r===I?"active":""}`,onClick:()=>C(I),children:[p.jsx("span",{children:I}),p.jsx("span",{className:"count-badge",children:_(I)})]},I))})]})},OE=({customers:r,onSelectCustomer:e,onEdit:i,onDelete:a,selectedCustomerId:o,activeFilter:h,activeProgressFilter:d,onProgressFilterChange:g,allCustomers:y,onFavoriteCustomer:_})=>{const[b,C]=Tt.useState(""),[I,L]=Tt.useState({visible:!1,x:0,y:0,selectedCustomer:null}),[z,ot]=Tt.useState({key:"createdAt",direction:"desc"}),X=Tt.useMemo(()=>[...r.filter(J=>J.name.toLowerCase().includes(b.toLowerCase())||J.phone.includes(b))].sort((J,H)=>{if(J.isFavorite&&!H.isFavorite)return-1;if(!J.isFavorite&&H.isFavorite)return 1;const Z=J[z.key],x=H[z.key];if(Z==null&&x==null)return 0;if(Z==null)return 1;if(x==null)return-1;if(z.key==="hopefulDeposit"||z.key==="hopefulMonthlyRent"){const Q=Number(Z)||0,mt=Number(x)||0;return z.direction==="asc"?Q-mt:mt-Q}const U=String(Z).toLowerCase(),K=String(x).toLowerCase();return U<K?z.direction==="asc"?-1:1:U>K?z.direction==="asc"?1:-1:0}),[r,b,z]),ut=(nt,P)=>{nt.preventDefault(),L({visible:!0,x:nt.pageX,y:nt.pageY,selectedCustomer:P})},et=()=>{L({...I,visible:!1})},ht=()=>{I.selectedCustomer&&_(I.selectedCustomer),et()},dt=nt=>y.filter(P=>(h==="전체"||P.status===h)&&P.progress===nt).length,ct=h==="신규"||h==="진행중",it=nt=>{ot(P=>({key:nt,direction:P.key===nt&&P.direction==="asc"?"desc":"asc"}))},N=nt=>z.key!==nt?" ↕":z.direction==="asc"?" ↑":" ↓",S=nt=>{switch(nt){case"매매":return"rgba(229, 57, 53, 0.12)";case"전세":return"rgba(67, 160, 71, 0.12)";case"월세":return"rgba(255, 179, 0, 0.12)";default:return"transparent"}},R=nt=>{if(!nt)return"";const P=new Date(nt),J=P.getMonth()+1,H=P.getDate();return`${J}월${H}일`},V=nt=>{const P=R(nt);return X.filter(J=>R(J.createdAt)===P).length},D=(nt,P)=>{if(P>0){const Z=X[P-1];if(R(nt.createdAt)===R(Z.createdAt))return 0}const J=R(nt.createdAt);let H=1;for(let Z=P+1;Z<X.length&&R(X[Z].createdAt)===J;Z++)H++;return H},O=(nt,P)=>{let J=0;for(let H=0;H<P;H++)(H===0||R(X[H].createdAt)!==R(X[H-1].createdAt))&&J++;return J},w=nt=>nt%2===0?"#fafafa":"#f0f4ff",gt=(nt,P)=>{if(P===0)return{};const J=R(nt.createdAt);return R(X[P-1].createdAt)!==J?{borderTop:"12px solid white"}:{}};return p.jsxs("div",{className:"table-container",onClick:et,children:[p.jsx("div",{style:{marginBottom:"15px"},children:p.jsx("input",{type:"text",placeholder:"고객명, 연락처 검색...",value:b,onChange:nt=>C(nt.target.value),style:{width:"100%",padding:"8px"}})}),p.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"15px",fontSize:"13px",alignItems:"center"},children:[p.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:"매물 종류:"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(229, 57, 53, 0.12)",border:"1px solid rgba(229, 57, 53, 0.3)",borderRadius:"3px"}}),p.jsx("span",{children:"매매"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(67, 160, 71, 0.12)",border:"1px solid rgba(67, 160, 71, 0.3)",borderRadius:"3px"}}),p.jsx("span",{children:"전세"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(255, 179, 0, 0.12)",border:"1px solid rgba(255, 179, 0, 0.3)",borderRadius:"3px"}}),p.jsx("span",{children:"월세"})]})]}),ct&&p.jsxs("div",{className:"progress-tabs",style:{marginBottom:"15px"},children:[p.jsxs("button",{className:`progress-tab ${d?"":"active"}`,onClick:()=>g(null),children:["전체 (",y.filter(nt=>h==="전체"||nt.status===h).length,")"]}),P_.map(nt=>p.jsxs("button",{className:`progress-tab ${d===nt?"active":""} progress-${nt}`,onClick:()=>g(nt),children:[nt," (",dt(nt),")"]},nt))]}),p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{onClick:()=>it("createdAt"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["접수일",N("createdAt")]}),p.jsxs("th",{onClick:()=>it("name"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["고객명",N("name")]}),p.jsx("th",{children:"연락처"}),p.jsxs("th",{onClick:()=>it("moveInDate"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["입주희망일",N("moveInDate")]}),p.jsxs("th",{onClick:()=>it("hopefulDeposit"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["희망보증금",N("hopefulDeposit")]}),p.jsxs("th",{onClick:()=>it("hopefulMonthlyRent"),style:{cursor:"pointer",userSelect:"none"},title:"클릭하여 정렬",children:["희망월세",N("hopefulMonthlyRent")]}),p.jsx("th",{children:"금액 지역 상세정보"}),p.jsx("th",{children:"매물종류"})]})}),p.jsx("tbody",{children:X.map((nt,P)=>{const J=D(nt,P),H=O(nt,P),Z=gt(nt,P);return p.jsxs("tr",{className:o===nt.id?"selected":"",onClick:()=>e(nt),onContextMenu:x=>ut(x,nt),style:{backgroundColor:nt.isFavorite?"rgba(156, 39, 176, 0.15)":S(nt.propertyType),borderLeft:nt.isFavorite?"3px solid #9C27B0":"none",boxShadow:nt.isFavorite?"0 2px 4px rgba(156, 39, 176, 0.3)":"none",...Z},children:[J>0&&p.jsxs("td",{rowSpan:J,style:{verticalAlign:"middle",textAlign:"center",backgroundColor:w(H),fontWeight:"500"},children:[R(nt.createdAt),"(",V(nt.createdAt),"명)"]}),p.jsxs("td",{className:"customer-name",title:nt.name,children:[nt.isFavorite&&p.jsx("span",{style:{marginRight:"6px",color:"#9C27B0"},children:"⭐"}),nt.name]}),p.jsx("td",{children:p.jsx("a",{href:`sms:${nt.phone}`,children:nt.phone})}),p.jsx("td",{children:nt.moveInDate}),p.jsx("td",{children:nt.hopefulDeposit?`${nt.hopefulDeposit}만원`:"-"}),p.jsx("td",{children:nt.hopefulMonthlyRent?`${nt.hopefulMonthlyRent}만원`:"-"}),p.jsx("td",{className:"preferred-area",title:nt.preferredArea,children:nt.preferredArea}),p.jsx("td",{children:nt.propertyType})]},nt.id)})})]}),I.visible&&p.jsx("div",{style:{top:I.y,left:I.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:p.jsx("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:ht,children:I.selectedCustomer?.isFavorite?"⭐ 즐겨찾기 취소":"☆ 즐겨찾기 추가"})})})]})},jE=r=>!r.name||r.name.trim()===""?(alert("고객명은 필수 입력 항목입니다."),!1):r.phone&&!PE(r.phone)?(alert("연락처는 010-xxxx-xxxx 형식으로 입력하세요."),!1):!0,PE=r=>r?/^010-\d{4}-\d{4}$/.test(r):!0,ui=()=>"_"+Math.random().toString(36).substr(2,9),U_=r=>{if(!r)return"";try{return new Date(r).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date-time:",r,e),""}},UE=({isOpen:r,onClose:e,onSave:i,editData:a})=>{const o=()=>({id:a?.id||null,name:a?.name||"",phone:a?.phone||"",source:a?.source||vy[0],propertyType:a?.propertyType||Ey[0],preferredArea:a?.preferredArea||"",hopefulDeposit:a?.hopefulDeposit||"",hopefulMonthlyRent:a?.hopefulMonthlyRent||"",moveInDate:a?.moveInDate||"",memo:a?.memo||"",status:a?.status||"신규",progress:a?.progress||"매물제안예정",createdAt:a?.createdAt||new Date().toISOString()}),[h,d]=Tt.useState(o());if(Tt.useEffect(()=>{d(o())},[a,r]),!r)return null;const g=b=>{const{name:C,value:I}=b.target;d(L=>({...L,[C]:I}))},y=b=>{let C=b.target.value.replace(/[^0-9]/g,"");C.length>3&&C.length<=7?C=`${C.slice(0,3)}-${C.slice(3)}`:C.length>7&&(C=`${C.slice(0,3)}-${C.slice(3,7)}-${C.slice(7,11)}`),d(I=>({...I,phone:C}))},_=()=>{const b={...h,id:h.id||ui(),hopefulDeposit:parseInt(h.hopefulDeposit,10)||0,hopefulMonthlyRent:parseInt(h.hopefulMonthlyRent,10)||0};jE(b)&&(i(b),e())};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",paddingBottom:"10px"},children:[p.jsx("h3",{children:a?"고객 수정":"고객 추가"}),p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:"경로"}),p.jsx("select",{name:"source",value:h.source,onChange:g,style:{fontSize:"14px"},children:vy.map(b=>p.jsx("option",{value:b,children:b},b))}),p.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:"종류"}),p.jsx("select",{name:"propertyType",value:h.propertyType,onChange:g,style:{fontSize:"14px"},children:Ey.map(b=>p.jsx("option",{value:b,children:b},b))}),p.jsx("button",{onClick:e,className:"btn-close",children:"✕"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"고객명 *"}),p.jsx("input",{type:"text",name:"name",value:h.name,onChange:g,placeholder:"성별 선호매물 특징",required:!0})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:y,placeholder:"010-xxxx-xxxx"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"입주희망일"}),p.jsx("input",{type:"date",name:"moveInDate",value:h.moveInDate,onChange:g})]})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"희망보증금 (만원)"}),p.jsx("input",{type:"number",name:"hopefulDeposit",value:h.hopefulDeposit,onChange:g})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"희망월세 (만원)"}),p.jsx("input",{type:"number",name:"hopefulMonthlyRent",value:h.hopefulMonthlyRent,onChange:g})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"금액 지역 입주시기 상세정보"}),p.jsx("textarea",{name:"preferredArea",value:h.preferredArea,onChange:g,rows:"2"})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:e,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:_,className:"btn-primary",children:"저장"})]})]})})},kE=({customer:r,onUpdateCustomer:e,activities:i=[],meetings:a=[],onTabChange:o})=>{const[h,d]=Tt.useState(!1),[g,y]=Tt.useState(r.preferredArea||"");if(!r)return null;Tt.useEffect(()=>{y(r.preferredArea||""),d(!1)},[r.id]);const _=()=>{e({...r,preferredArea:g}),d(!1)},b=()=>{y(r.preferredArea||""),d(!1)},C=et=>{et.key==="Enter"&&et.ctrlKey?h&&_():et.key==="Escape"&&h&&b()},I=i.filter(et=>et.customerId===r.id).sort((et,ht)=>new Date(ht.date)-new Date(et.date)),L=a.filter(et=>et.customerId===r.id).sort((et,ht)=>new Date(ht.date)-new Date(et.date)),z=I.slice(0,3),ot=L.slice(0,3),X=L.find(et=>new Date(et.date)>new Date),ut=(et,ht=40)=>et?et.length>ht?et.slice(0,ht)+"...":et:"-";return p.jsxs("div",{className:"basic-info-container",children:[p.jsxs("div",{className:"info-section",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"15px",flexWrap:"wrap"},children:[p.jsx("h4",{style:{margin:0},children:"기본 정보"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontWeight:"bold",color:"#555",fontSize:"12px"},children:"고객명"}),p.jsx("p",{style:{margin:0,fontWeight:"bold",fontSize:"14px",color:"#2196F3"},children:r.name})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px"},children:[p.jsx("span",{style:{color:"#888"},children:"경로:"}),p.jsx("span",{style:{fontWeight:"bold"},children:r.source})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px"},children:[p.jsx("span",{style:{color:"#888"},children:"매물종류:"}),p.jsx("span",{style:{fontWeight:"bold"},children:r.propertyType})]})]}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{children:[p.jsx("span",{children:"연락처"}),p.jsx("p",{children:p.jsx("a",{href:`sms:${r.phone}`,style:{color:"#2196F3",textDecoration:"none",cursor:"pointer"},children:r.phone})})]}),p.jsxs("div",{children:[p.jsx("span",{children:"입주희망일"}),p.jsx("p",{children:r.moveInDate})]}),p.jsxs("div",{children:[p.jsx("span",{children:"희망보증금"}),p.jsx("p",{children:r.hopefulDeposit?`${r.hopefulDeposit}만원`:"-"})]}),p.jsxs("div",{children:[p.jsx("span",{children:"희망월세"}),p.jsx("p",{children:r.hopefulMonthlyRent?`${r.hopefulMonthlyRent}만원`:"-"})]})]})]}),p.jsxs("div",{className:"info-section",children:[p.jsx("h4",{children:"금액 지역 입주시기 상세정보"}),h?p.jsxs("div",{children:[p.jsx("textarea",{value:g,onChange:et=>y(et.target.value),onKeyDown:C,placeholder:"금액, 지역, 입주시기 등 상세정보를 입력하세요... (Ctrl+Enter로 저장, Esc로 취소)",style:{width:"100%",minHeight:"80px",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontFamily:"inherit",fontSize:"14px",resize:"vertical"},autoFocus:!0}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[p.jsx("button",{onClick:_,style:{padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"저장"}),p.jsx("button",{onClick:b,style:{padding:"6px 12px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"취소"})]})]}):p.jsx("p",{onClick:()=>d(!0),style:{cursor:"pointer",padding:"8px",borderRadius:"4px",backgroundColor:"#f5f5f5",minHeight:"40px",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",transition:"background-color 0.2s"},onMouseEnter:et=>et.currentTarget.style.backgroundColor="#efefef",onMouseLeave:et=>et.currentTarget.style.backgroundColor="#f5f5f5",children:r.preferredArea||"(클릭하여 추가)"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px",margin:"15px"},children:[p.jsxs("div",{onClick:()=>o&&o("활동 내역"),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:et=>{et.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",et.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:et=>{et.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",et.currentTarget.style.transform="translateY(0)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[p.jsx("span",{style:{fontSize:"20px"},children:"📊"}),p.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:"활동 내역"})]}),p.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:["총 ",p.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:I.length}),"건의 활동",I.length>0&&p.jsxs("span",{style:{color:"#888",marginLeft:"8px"},children:["(최근: ",I[0].date,")"]})]}),z.length>0?p.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:z.map((et,ht)=>p.jsxs("div",{style:{padding:"6px 0",borderTop:ht>0?"1px solid #f0f0f0":"none",color:"#555"},children:[p.jsx("span",{style:{color:"#999",marginRight:"4px"},children:et.date}),ut(et.content,30)]},ht))}):p.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:"활동이 없습니다"})]}),p.jsxs("div",{onClick:()=>o&&o("미팅 내역"),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:et=>{et.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",et.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:et=>{et.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",et.currentTarget.style.transform="translateY(0)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[p.jsx("span",{style:{fontSize:"20px"},children:"📅"}),p.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:"미팅 내역"})]}),p.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:["총 ",p.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:L.length}),"건의 미팅",X&&p.jsxs("span",{style:{color:"#16a085",marginLeft:"8px",fontWeight:"bold"},children:["(다음: ",X.date.slice(0,10),")"]})]}),ot.length>0?p.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:ot.map((et,ht)=>p.jsxs("div",{style:{padding:"6px 0",borderTop:ht>0?"1px solid #f0f0f0":"none",color:"#555"},children:[p.jsx("span",{style:{color:"#999",marginRight:"4px"},children:et.date.slice(0,10)}),p.jsxs("span",{style:{color:"#2196F3",fontWeight:"bold"},children:[et.properties?.length||0,"개 매물"]})]},ht))}):p.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:"미팅이 없습니다"})]})]})]})},LE=({customerId:r,activities:e,onSaveActivity:i,onDeleteActivity:a})=>{const[o,h]=Tt.useState(!1),[d,g]=Tt.useState(null),[y,_]=Tt.useState(null),[b,C]=Tt.useState({visible:!1,x:0,y:0,selectedActivity:null}),I=e.filter(S=>S.customerId===r).sort((S,R)=>new Date(R.date)-new Date(S.date)),L=S=>{i(S),h(!1),g(null)},z=(S,R)=>{S.preventDefault(),C({visible:!0,x:S.pageX,y:S.pageY,selectedActivity:R})},ot=()=>{C({...b,visible:!1})},X=()=>{b.selectedActivity&&g(b.selectedActivity),ot()},ut=()=>{b.selectedActivity&&a(b.selectedActivity.id),ot()},et=S=>{if(!S)return"";if(S.includes(" ")){const R=S.split(" "),V=R[0].slice(5),D=R[1];return`${V} ${D}`}return S.length===10?S.slice(5,10):S},ht=S=>S.followUps&&S.followUps.length>0?[...S.followUps].sort((V,D)=>new Date(D.date)-new Date(V.date))[0].content:"",dt=(S,R=50)=>S?S.length>R?S.slice(0,R)+"...":S:"-",ct=({activity:S,onClose:R})=>{const[V,D]=Tt.useState(S.followUps||[]),[O,w]=Tt.useState(null),[gt,nt]=Tt.useState(""),[P,J]=Tt.useState(null),H=()=>{if(!gt.trim())return;const Q={id:ui(),date:new Date().toISOString(),content:gt,createdAt:new Date().toISOString()},mt=[...V,Q],rt={...S,followUps:mt};L(rt),D(mt),nt("")},Z=Q=>{Q.key==="Enter"&&Q.ctrlKey&&H()},x=Q=>{if(confirm("이 후속 기록을 삭제하시겠습니까?")){const mt=V.filter(W=>W.id!==Q),rt={...S,followUps:mt};L(rt),D(mt)}},U=(Q,mt)=>{const rt=V.map(Et=>Et.id===Q?{...Et,content:mt}:Et),W={...S,followUps:rt};L(W),D(rt),w(null)},K=[...V].sort((Q,mt)=>new Date(mt.date)-new Date(Q.date));return p.jsx("div",{className:"modal-overlay",onClick:R,children:p.jsxs("div",{className:"modal-content",onClick:Q=>Q.stopPropagation(),style:{maxWidth:"700px"},children:[p.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("h3",{style:{margin:0},children:"활동 상세"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[p.jsx("span",{style:{fontSize:"16px",color:"#2c3e50",fontWeight:"500"},children:S.date}),p.jsx("button",{className:"btn-close",onClick:R,children:"×"})]})]}),p.jsxs("div",{style:{padding:"20px 0"},children:[p.jsx("div",{style:{marginBottom:"25px"},children:p.jsx("p",{style:{margin:0,fontSize:"16px",whiteSpace:"pre-line",lineHeight:"1.6",fontWeight:"bold"},children:S.content})}),p.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px",marginBottom:"25px"},children:[p.jsx("div",{style:{marginBottom:"15px"},children:p.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["📝 후속 기록 (",V.length,")"]})}),p.jsxs("div",{style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"5px",padding:"10px",marginBottom:"15px"},children:[p.jsx("textarea",{value:gt,onChange:Q=>nt(Q.target.value),onKeyDown:Z,placeholder:"후속 기록을 입력하세요... (Ctrl+Enter로 입력)",style:{width:"100%",padding:"8px",minHeight:"60px",border:"none",outline:"none",resize:"vertical",fontFamily:"inherit"}}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("button",{onClick:()=>nt(Q=>Q?Q+`
[나] `:"[나] "),style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#e3f2fd",color:"#2196F3",border:"1px solid #2196F3",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"나"}),p.jsx("button",{onClick:()=>nt(Q=>Q?Q+`
[고객] `:"[고객] "),style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#f3e5f5",color:"#9c27b0",border:"1px solid #9c27b0",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"고객"})]}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("button",{onClick:H,className:"btn-primary",style:{fontSize:"12px",padding:"6px 16px"},children:"입력"}),p.jsx("button",{onClick:()=>nt(""),style:{fontSize:"12px",padding:"6px 16px",backgroundColor:"#f5f5f5",color:"#666",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"초기화"})]})]})]}),K.length>0?K.map(Q=>p.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"5px",marginBottom:"10px",borderLeft:"3px solid var(--primary-blue)"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsx("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:U_(Q.date)}),p.jsxs("div",{style:{display:"flex",gap:"5px"},children:[p.jsx("button",{onClick:()=>w(Q.id),style:{fontSize:"11px",padding:"3px 8px"},children:"수정"}),p.jsx("button",{onClick:()=>x(Q.id),className:"btn-secondary",style:{fontSize:"11px",padding:"3px 8px"},children:"삭제"})]})]}),O===Q.id?p.jsx("div",{children:p.jsx("textarea",{defaultValue:Q.content,onBlur:mt=>U(Q.id,mt.target.value),style:{width:"100%",padding:"8px",minHeight:"60px"},autoFocus:!0})}):p.jsx("p",{style:{margin:0,fontSize:"14px",whiteSpace:"pre-line",lineHeight:"1.5"},children:Q.content})]},Q.id)):p.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"후속 기록이 없습니다."})]}),S.images&&S.images.length>0&&p.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px"},children:[p.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["첨부 이미지 (",S.images.length,")"]}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px",marginTop:"10px"},children:S.images.map((Q,mt)=>p.jsx("div",{style:{position:"relative"},children:p.jsx("img",{src:Q.url,alt:`활동 이미지 ${mt+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"5px",cursor:"pointer",border:"1px solid #e0e0e0"},onClick:()=>J(Q.url)})},mt))})]}),P&&p.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},onClick:()=>J(null),children:[p.jsx("img",{src:P,alt:"확대 이미지",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain"},onClick:Q=>Q.stopPropagation()}),p.jsx("button",{onClick:()=>J(null),style:{position:"absolute",top:"20px",right:"20px",background:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"24px",cursor:"pointer",color:"#333"},children:"×"})]})]}),p.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("button",{onClick:()=>{confirm("이 활동을 삭제하시겠습니까?")&&(a(S.id),R())},className:"btn-secondary",style:{backgroundColor:"#f44336"},children:"삭제"}),p.jsxs("div",{style:{display:"flex",gap:"10px"},children:[p.jsx("button",{onClick:R,className:"btn-secondary",children:"닫기"}),p.jsx("button",{onClick:()=>{g(S),R()},className:"btn-primary",children:"수정"})]})]})]})})},it=({activity:S,onCancel:R})=>{const V=()=>{if(S&&S.date)return S.date;const x=new Date,U=x.getFullYear(),K=String(x.getMonth()+1).padStart(2,"0"),Q=String(x.getDate()).padStart(2,"0"),mt=String(x.getHours()).padStart(2,"0"),rt=String(x.getMinutes()).padStart(2,"0");return`${U}-${K}-${Q} ${mt}:${rt}`},[D,O]=Tt.useState(S||{date:V(),content:"",images:[]}),[w,gt]=Tt.useState(!1),nt=x=>{const{name:U,value:K}=x.target;O(Q=>({...Q,[U]:K}))},P=x=>new Promise((U,K)=>{const Q=new FileReader;Q.onload=()=>U(Q.result),Q.onerror=K,Q.readAsDataURL(x)}),J=async x=>{const U=Array.from(x.target.files);if(U.length===0)return;gt(!0);const K=[];for(const Q of U){if(!Q.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다.");continue}if(Q.size>1024*1024){alert(`${Q.name}은(는) 1MB보다 큽니다. 더 작은 이미지를 사용해주세요.`);continue}try{const mt=await P(Q);K.push({url:mt,name:Q.name})}catch(mt){console.error("이미지 변환 실패:",mt),alert("이미지 처리에 실패했습니다.")}}O(Q=>({...Q,images:[...Q.images||[],...K]})),gt(!1),x.target.value=""},H=x=>{O(U=>({...U,images:U.images.filter((K,Q)=>Q!==x)}))},Z=()=>{const x={...D,id:D.id||ui(),customerId:r,date:D.date};L(x)};return p.jsx("div",{className:"modal-overlay",onClick:R,children:p.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("h3",{style:{margin:0},children:"활동 기록"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[p.jsx("input",{type:"text",name:"date",value:D.date,onChange:nt,placeholder:"YYYY-MM-DD HH:mm",style:{padding:"6px 8px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",width:"160px"}}),p.jsx("button",{className:"btn-close",onClick:R,children:"×"})]})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1",display:"none"},children:[p.jsx("label",{children:"활동일 *"}),p.jsx("input",{type:"date",name:"date",value:D.date,onChange:nt})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"활동 내용 *"}),p.jsx("textarea",{name:"content",value:D.content,onChange:nt,placeholder:`활동 내용을 자유롭게 입력하세요
예: 전화 통화, 매물 3개 제안함`})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"이미지 첨부"}),p.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,onChange:J,disabled:w}),w&&p.jsx("p",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:"업로드 중..."}),D.images&&D.images.length>0&&p.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",marginTop:"10px"},children:D.images.map((x,U)=>p.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[p.jsx("img",{src:x.url,alt:`첨부 ${U+1}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}),p.jsx("button",{type:"button",onClick:()=>H(U),style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",cursor:"pointer",padding:0},children:"×"})]},U))})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:R,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:Z,className:"btn-primary",disabled:w,children:"저장"})]})]})})},N=y?I.find(S=>S.id===y.id):null;return p.jsxs("div",{className:"activity-tab",children:[p.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!o&&!d&&p.jsx("button",{onClick:()=>h(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 활동 추가"})}),o&&p.jsx(it,{onCancel:()=>h(!1)}),d?p.jsx(it,{activity:d,onCancel:()=>g(null)}):I.length>0?p.jsx("div",{onClick:ot,children:p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{style:{width:"80px"},children:"활동일"}),p.jsx("th",{style:{width:"360px"},children:"활동 내용"}),p.jsx("th",{style:{width:"720px"},children:"후속기록"})]})}),p.jsx("tbody",{children:I.map(S=>p.jsxs("tr",{onContextMenu:R=>z(R,S),style:{cursor:"context-menu"},children:[p.jsx("td",{style:{fontSize:"13px"},children:et(S.date)}),p.jsxs("td",{onClick:()=>_(S),style:{cursor:"pointer",fontSize:"13px",width:"360px",maxWidth:"360px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:S.content,children:[dt(S.content||"",30),S.followUps&&S.followUps.length>0&&p.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#7f8c8d"},children:["💬",S.followUps.length]}),S.images&&S.images.length>0&&p.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#7f8c8d"},children:["📷",S.images.length]})]}),p.jsx("td",{onClick:()=>_(S),style:{cursor:"pointer",fontSize:"13px",width:"720px",maxWidth:"720px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:ht(S),children:dt(ht(S),50)})]},S.id))})]})}):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 활동이 없습니다."}),N&&p.jsx(ct,{activity:N,onClose:()=>_(null)}),b.visible&&p.jsx("div",{style:{top:b.y,left:b.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:p.jsxs("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:[p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:X,children:"수정"}),p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:ut,children:"삭제"}),p.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:ot,children:"취소"})]})})]})},zE=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");return e.length>=2?e[1].trim():""},BE=r=>{if(!r)return"";const e=r.split(`
`).filter(i=>i.trim()!=="");return e.length>=7?e[6].trim():""},_d=r=>{if(!r)return"";const e=r.split(`
`).filter(o=>o.trim()!==""),i=o=>{if(o.match(/관리소|관리팀|관리사무소/i)||o.match(/(팩\s*스|팩스|fax|FAX)\s*[\d\-]/i))return null;const h=/(전\s*화\s*번\s*호|전화번호)\s*(02[-\s]?\d{3,4}[-\s]?\d{4})/,d=o.match(h);if(d)return d[2].replace(/\s/g,"").trim();const g=/(02[-\s]?\d{3,4}[-\s]?\d{4})/,y=o.match(g);if(y)return y[1].replace(/\s/g,"").trim();const _=/(핸드폰\s*번호|휴대폰\s*번호)\s*(01[0-9][-\s]?\d{3,4}[-\s]?\d{4})/,b=o.match(_);if(b)return b[2].replace(/\s/g,"").trim();const C=/(01[0-9][-\s]?\d{3,4}[-\s]?\d{4})/,I=o.match(C);if(I)return I[1].replace(/\s/g,"").trim();const L=/(\d{2,3}[-\s]?\d{3,4}[-\s]?\d{4})/,z=o.match(L);return z?z[1].replace(/\s/g,"").trim():null};let a=-1;for(let o=0;o<e.length;o++)if(e[o].match(/공인중개사.*사무소|중개법인/)){a=o;break}if(a>=0){const o=i(e[a]);if(o)return o}if(a>=0&&a<e.length-1)for(let o=a+1;o<Math.min(a+10,e.length);o++){const h=i(e[o]);if(h)return h}if(a<0&&e.length>0){const o=i(e[e.length-1]);if(o)return o}return""},Ca=r=>{if(!r)return{propertyName:"",agencyName:"",contactNumber:""};const e=r.split(`
`).filter(a=>a.trim()!=="");if(e.some(a=>a.includes("소재지:"))){let a="",o="",h="";for(const d of e)if(d.includes("소재지:")){const g=d.match(/소재지:\s*(.+?)\(/);g&&(a=g[1].trim())}else if(d.includes("부동산:"))o=d.replace("부동산:","").trim();else if(d.includes("연락처:")&&!d.match(/\b(팩스|fax|FAX|관리소|관리팀|관리사무소)\b/i)){const g=d.match(/연락처:\s*([\d\-]+)/);g&&(h=g[1].trim())}return{propertyName:a,agencyName:o,contactNumber:h}}else return{propertyName:zE(r),agencyName:BE(r),contactNumber:_d(r)}},qE=r=>r.includes("계약/전용면적")||r.includes("해당층/총층")||r.includes("매물특징"),HE=r=>{let e="🏠 매물정보",i="";const a=r.split(`
`).filter(ht=>ht.trim());if(a.length>0){const dt=a[0].trim().replace(/\s*\d+동\s*(저층|고층|중층)?.*$/,"").trim();dt&&(i=`• 소재지: ${dt}`)}let o="";const h=r.match(/월세(\d+)억\s*([0-9,]+)\/(\d+)/);if(h){const ht=h[1],dt=h[2],ct=h[3];o=`• 임대료: ${parseInt(ht)*1e4+parseInt(dt.replace(/,/g,""))}/${ct}`}let d="";const g=r.match(/계약\/전용면적\s*([\d.]+)㎡\/([\d.]+)㎡/),y=r.match(/방수\/욕실수\s*(\d+)\/(\d+)/);if(g&&y){const ht=parseFloat(g[1]),dt=parseFloat(g[2]),ct=Math.min(ht,dt).toString(),it=y[1],N=y[2],S=Math.round(parseFloat(ct)/3.3058);d=`• 구조정보: ${ct}㎡ (약${S}평)/방${it},욕실${N}`}let _="";const b=a[0]?.match(/(\d+)동/),C=r.match(/해당층\/총층\s*([^/]+)\/(\d+)층/);if(b&&C){const ht=b[1],dt=C[1].trim();_=`• 동/층: ${ht}동/${dt}`}let I="";const L=r.match(/매물특징\s*(.+?)(?=계약\/전용면적|해당층|$)/);if(L){const ht=L[1].trim();ht&&(I=`• 특징: ${ht}`)}let z="",ot=r.match(/중개사\s*(.+?공인중개사사무소)/);ot||(ot=r.match(/중개[사법인]*\s*(.+?중개법인)/)),ot&&(z=`• 부동산: ${ot[1].trim()}`);let X="";const ut=_d(r);return ut&&(X=`• 연락처: ${ut}`),[e,i,o,d,_,I,z,X].filter(ht=>ht!=="").join(`
`)},FE=r=>{let e="🏠 매물정보",i="";const a=r.match(/물\s*건\s*명\s*(.+?)(?=건축|$)/s),o=r.match(/소\s*재\s*지\s*(.+?)(?=공개여부|대\s*분|$)/);if(a&&o){const it=a[1].trim().split(`
`)[0].trim(),N=o[1].trim().split(/\s+/)[0];i=`• 소재지: ${it}(${N})`}else a&&(i=`• 소재지: ${a[1].trim().split(`
`)[0].trim()}`);let h="",d=r.match(/현\s*보\s*증\s*금\s*([0-9,]+)/),g=r.match(/현\s*월\s*세\s*([0-9,]+)/);if(d||(d=r.match(/보\s*증\s*금\s*([0-9,]+)/)),g||(g=r.match(/월\s*세\s*([0-9,]+)/)),d&&g){const it=d[1].trim(),N=g[1].trim();h=`• 임대료: ${it}/${N}`}let y="";const _=r.match(/전용면적[\s(]*([0-9.]+)[\s)]*[\s]*([0-9.]*)/);let b="";if(_){const it=parseFloat(_[1]);if(_[2]&&_[2].trim()){const N=parseFloat(_[2].trim());b=Math.min(it,N).toString()}else b=it.toString()}const C=r.match(/방\s*수\s*(\d+)/),I=r.match(/욕\s*실\s*수\s*(\d+)/);if(b){const it=C?C[1].trim():"0",N=I?I[1].trim():"0",S=Math.round(parseFloat(b)/3.3058);y=`• 구조정보: ${b}㎡ (약${S}평)/방${it},욕실${N}`}let L="",z=r.match(/(\d+)동\s*\[(\d+)\s*\/\s*(\d+)\]/);if(z){const it=z[1],N=z[2];L=`• 동/층: ${it}동/${N}층`}else if(z=r.match(/(\d+)동\s*\[([^\]]+)\]/),z){const it=z[1],N=z[2].trim();L=`• 동/층: ${it}동/${N}`}let ot="";const X=r.match(/공개비고\s*(.+?)(?=매물메모|비고|복도구조|$)/s);if(X){const it=X[1].trim().replace(/\s+/g," ");it&&(ot=`• 특징: ${it}`)}let ut="",et=r.match(/(.+?공인중개사.*?사무소)/);et||(et=r.match(/(.+?중개법인)/)),et&&(ut=`• 부동산: ${et[1].trim()}`);let ht="";const dt=_d(r);return dt&&(ht=`• 연락처: ${dt}`),[e,i,h,y,L,ot,ut,ht].filter(it=>it!=="").join(`
`)},Ty=r=>r?qE(r)?HE(r):FE(r):"",GE=({customerId:r,customerName:e,meetings:i,onSaveMeeting:a,onDeleteMeeting:o,initialProperties:h,onClearInitialProperties:d})=>{const[g,y]=Tt.useState(!1),[_,b]=Tt.useState(null),[C,I]=Tt.useState(null),[L,z]=Tt.useState(null);Tt.useEffect(()=>{h&&h.length>0&&(z(h),y(!0),d&&d())},[h,d]);const ot=i.filter(ct=>ct.customerId===r),X=({onCancel:ct,meetingData:it,initialPropertiesData:N})=>{const S=()=>{if(it){const Z=it.date||new Date().toISOString().slice(0,16);return{...it,date:Z.slice(0,10),time:it.time||Z.slice(11,16)}}return{date:new Date().toISOString().slice(0,10),time:"12:00",properties:N||[]}},[R,V]=Tt.useState(S()),[D,O]=Tt.useState(!1),[w,gt]=Tt.useState(null),nt=Z=>{V({...R,[Z.target.name]:Z.target.value})},P=Z=>{if(confirm("정말 이 매물을 삭제하시겠습니까?")){const x=R.properties.filter((U,K)=>K!==Z);V({...R,properties:x})}},J=()=>{const Z={...R,id:R.id||ui(),customerId:r,date:`${R.date}T${R.time}:00`};a(Z),y(!1),b(null),ct()},H=({onClose:Z,propertyToEdit:x,editIndex:U})=>{const[K,Q]=Tt.useState(x||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",status:Mn[0]}),mt=W=>{const Et=W.target.value,{propertyName:_t,agencyName:bt,contactNumber:kt}=Ca(Et);Q({...K,info:Et,roomName:_t||K.roomName,agency:bt||K.agency,agencyPhone:kt||K.agencyPhone})},rt=()=>{if(U!=null){const W=[...R.properties];W[U]={...K},V({...R,properties:W})}else V({...R,properties:[...R.properties,{...K,id:ui()}]});Z()};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:U!=null?"매물 수정":"매물 추가"}),p.jsx("button",{className:"btn-close",onClick:Z,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:K.info,onChange:mt}),p.jsx("p",{className:"form-hint",children:"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:K.roomName,onChange:W=>Q({...K,roomName:W.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:K.agencyPhone,onChange:W=>Q({...K,agencyPhone:W.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"방문시간"}),p.jsx("input",{type:"time",value:K.visitTime,onChange:W=>Q({...K,visitTime:W.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:K.status,onChange:W=>Q({...K,status:W.target.value}),children:Mn.map(W=>p.jsx("option",{value:W,children:W},W))})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:K.agency,onChange:W=>Q({...K,agency:W.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:Z,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:rt,className:"btn-primary",children:U!=null?"수정":"추가"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["미팅 추가 - ",e?e.slice(0,30):""]}),p.jsx("button",{className:"btn-close",onClick:ct,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"미팅 날짜"}),p.jsx("input",{type:"date",name:"date",value:R.date,onChange:nt})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"미팅 시간"}),p.jsx("input",{type:"time",name:"time",value:R.time,onChange:nt})]})]}),p.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:"매물 준비"}),R.properties.length===0?p.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"준비된 매물이 없습니다."}):R.properties.map((Z,x)=>p.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",Z.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${Z.status}`,value:Z.status,onChange:U=>{const K=[...R.properties];K[x]={...K[x],status:U.target.value},V({...R,properties:K})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Mn.map(U=>p.jsx("option",{value:U,children:U},U))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:Z.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",Z.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",Z.agencyPhone?p.jsx("a",{href:`sms:${Z.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:Z.agencyPhone}):""]}),p.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["🕐",p.jsx("input",{type:"time",value:Z.visitTime||"",onChange:U=>{const K=[...R.properties];K[x]={...K[x],visitTime:U.target.value},V({...R,properties:K})},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),"방문"]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>{gt(x),O(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>P(x),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},Z.id||x)),p.jsx("div",{style:{textAlign:"center",margin:"20px 0",borderTop:"1px dashed #ccc",paddingTop:"20px"},children:p.jsx("button",{onClick:()=>{gt(null),O(!0)},className:"btn-primary",children:"+ 매물 추가"})}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:ct,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:J,className:"btn-primary",children:"저장"})]}),D&&p.jsx(H,{onClose:()=>{O(!1),gt(null)},propertyToEdit:w!==null?R.properties[w]:null,editIndex:w})]})})},ut=ct=>{if(!ct)return"";const[it,N]=ct.split(":"),S=parseInt(it),R=S<12?"오전":"오후",V=S===0?12:S>12?S-12:S;return`${R} ${V}:${N}`},et=ct=>ct?ct.slice(0,10):"",ht=ct=>{if(!ct)return"";const it=ct.slice(11,16);return ut(it)},dt=({meeting:ct,onClose:it})=>{const[N,S]=Tt.useState(null),[R,V]=Tt.useState(!1),D=ct.properties?ct.properties.map((P,J)=>({prop:P,originalIndex:J})).sort((P,J)=>P.prop.visitTime?J.prop.visitTime?P.prop.visitTime.localeCompare(J.prop.visitTime):-1:1):[],O=P=>{S(P),V(!0)},w=P=>{if(confirm("이 매물을 삭제하시겠습니까?")){const J=ct.properties.filter((Z,x)=>x!==P),H={...ct,properties:J};a(H),I(H)}},gt=(P,J)=>{const H=[...ct.properties];J!=null?H[J]=P:H.push({...P,id:ui()});const Z={...ct,properties:H};a(Z),I(Z),V(!1),S(null)},nt=({propertyToEdit:P,editIndex:J,onClose:H})=>{const[Z,x]=Tt.useState(P||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",status:Mn[0]}),U=K=>{const Q=K.target.value,{propertyName:mt,agencyName:rt,contactNumber:W}=Ca(Q);x({...Z,info:Q,roomName:mt||Z.roomName,agency:rt||Z.agency,agencyPhone:W||Z.agencyPhone})};return p.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:p.jsxs("div",{className:"modal-content",onClick:K=>K.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"매물 수정"}),p.jsx("button",{className:"btn-close",onClick:H,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:Z.info,onChange:U}),p.jsx("p",{className:"form-hint",children:"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:Z.roomName,onChange:K=>x({...Z,roomName:K.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:Z.agencyPhone,onChange:K=>x({...Z,agencyPhone:K.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"방문시간"}),p.jsx("input",{type:"time",value:Z.visitTime,onChange:K=>x({...Z,visitTime:K.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:Z.status,onChange:K=>x({...Z,status:K.target.value}),children:Mn.map(K=>p.jsx("option",{value:K,children:K},K))})]}),p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:Z.agency,onChange:K=>x({...Z,agency:K.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:H,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:()=>gt(Z,J),className:"btn-primary",children:"수정"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["미팅 매물 - ",U_(ct.date)]}),p.jsx("button",{className:"btn-close",onClick:it,children:"×"})]}),p.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:D.length>0?D.map(({prop:P,originalIndex:J})=>p.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",P.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${P.status}`,value:P.status,onChange:H=>{const Z=[...ct.properties];Z[J]={...Z[J],status:H.target.value};const x={...ct,properties:Z};a(x),I(x)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Mn.map(H=>p.jsx("option",{value:H,children:H},H))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:P.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",P.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",P.agencyPhone?p.jsx("a",{href:`sms:${P.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:P.agencyPhone}):""]}),p.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["🕐",p.jsx("input",{type:"time",value:P.visitTime||"",onChange:H=>{const Z=[...ct.properties];Z[J]={...Z[J],visitTime:H.target.value};const x={...ct,properties:Z};a(x),I(x)},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),"방문"]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>O(J),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>w(J),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},P.id)):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 매물이 없습니다."})}),p.jsx("div",{className:"modal-footer",children:p.jsx("button",{onClick:it,className:"btn-primary",children:"닫기"})}),R&&p.jsx(nt,{propertyToEdit:N!==null?ct.properties[N]:null,editIndex:N,onClose:()=>{V(!1),S(null)}})]})})};return p.jsxs("div",{className:"meeting-tab",children:[p.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!_&&p.jsx("button",{onClick:()=>y(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 미팅 추가"})}),g&&p.jsx(X,{onCancel:()=>{y(!1),z(null)},initialPropertiesData:L}),_?p.jsx(X,{meetingData:_,onCancel:()=>b(null)},_.id):ot.length>0?p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"미팅날짜"}),p.jsx("th",{children:"미팅시간"}),p.jsx("th",{children:"매물수"}),p.jsx("th",{children:"액션"})]})}),p.jsx("tbody",{children:ot.map(ct=>p.jsxs("tr",{children:[p.jsx("td",{children:et(ct.date)}),p.jsx("td",{children:ht(ct.date)}),p.jsxs("td",{onClick:()=>I(ct),style:{cursor:"pointer",color:"var(--primary-blue)",textDecoration:"underline"},children:[ct.properties?.length||0,"개 매물"]}),p.jsxs("td",{children:[p.jsx("button",{onClick:()=>b(ct),style:{fontSize:"12px",padding:"4px 8px",marginRight:"5px"},children:"수정"}),p.jsx("button",{onClick:()=>o(ct.id),className:"btn-secondary",style:{fontSize:"12px",padding:"4px 8px"},children:"삭제"})]})]},ct.id))})]}):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 미팅이 없습니다."}),C&&p.jsx(dt,{meeting:C,onClose:()=>I(null)})]})},QE=({customerId:r,customerName:e,propertySelections:i,onSavePropertySelection:a,onDeletePropertySelection:o,onTabChange:h,onCreateMeetingFromSelection:d})=>{const[g,y]=Tt.useState(!1),[_,b]=Tt.useState(null),[C,I]=Tt.useState(null),L=i.filter(ut=>ut.customerId===r),z=({onCancel:ut,selectionData:et})=>{const ht=()=>et?{...et}:{properties:[]},[dt,ct]=Tt.useState(ht()),[it,N]=Tt.useState(!1),[S,R]=Tt.useState(null),[V,D]=Tt.useState(!1),O=H=>{if(confirm("정말 이 매물을 삭제하시겠습니까?")){const Z=dt.properties.filter((x,U)=>U!==H);ct({...dt,properties:Z})}},w=()=>{const H={...dt,id:dt.id||ui(),customerId:r,createdAt:dt.createdAt||new Date().toISOString()};a(H),y(!1),b(null),ut()},gt=()=>{if(dt.properties.length===0){alert("매물을 먼저 추가해주세요.");return}const H={...dt,id:dt.id||ui(),customerId:r,createdAt:dt.createdAt||new Date().toISOString()};a(H),d(dt.properties),y(!1),b(null),ut()},nt=H=>H.map(Z=>{const x=Z.info.split(`
`).filter(U=>U.trim());return x.length>1&&(x.length>6&&x.splice(6,1),x.length>0&&x.pop()),x.join(`
`)}).join(`

`),P=({onClose:H})=>{const[Z,x]=Tt.useState(nt(dt.properties)),[U,K]=Tt.useState(!1),Q=async()=>{try{await navigator.clipboard.writeText(Z),alert("보고서가 클립보드에 복사되었습니다!")}catch(mt){alert("복사에 실패했습니다: "+mt.message)}};return p.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:p.jsxs("div",{className:"modal-content",onClick:mt=>mt.stopPropagation(),style:{maxWidth:"800px"},children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"매물 브리핑 보고서"}),p.jsx("button",{className:"btn-close",onClick:H,children:"×"})]}),p.jsx("div",{style:{padding:"20px"},children:U?p.jsx("textarea",{value:Z,onChange:mt=>x(mt.target.value),style:{width:"100%",minHeight:"400px",padding:"12px",fontSize:"14px",lineHeight:"1.6",border:"1px solid #e0e0e0",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}):p.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",fontSize:"14px",lineHeight:"1.6",maxHeight:"400px",overflowY:"auto",border:"1px solid #e0e0e0"},children:Z})}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:H,className:"btn-secondary",children:"닫기"}),p.jsx("button",{onClick:()=>K(!U),className:"btn-primary",style:{marginLeft:"10px"},children:U?"완료":"수정"}),p.jsx("button",{onClick:Q,className:"btn-primary",style:{marginLeft:"10px"},children:"복사"})]})]})})},J=({onClose:H,propertyToEdit:Z,editIndex:x})=>{const[U,K]=Tt.useState(Z||{roomName:"",agency:"",agencyPhone:"",info:"",status:Mn[0]}),Q=W=>{const Et=W.target.value,{propertyName:_t,agencyName:bt,contactNumber:kt}=Ca(Et);K({...U,info:Et,roomName:_t||U.roomName,agency:bt||U.agency,agencyPhone:kt||U.agencyPhone})},mt=()=>{const W=U.info,Et=Ty(W);if(!Et){alert("매물정보에서 필요한 데이터를 추출할 수 없습니다. 정보를 확인해주세요.");return}const _t={...U,info:Et},{propertyName:bt,agencyName:kt,contactNumber:Lt}=Ca(Et);_t.roomName=bt||U.roomName,_t.agency=kt||U.agency,_t.agencyPhone=Lt||U.agencyPhone,K(_t)},rt=()=>{if(x!=null){const W=[...dt.properties];W[x]={...U},ct({...dt,properties:W})}else ct({...dt,properties:[...dt.properties,{...U,id:ui()}]});H()};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:x!=null?"매물 수정":"매물 추가"}),p.jsx("button",{className:"btn-close",onClick:H,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:U.info,onChange:Q}),p.jsx("button",{type:"button",onClick:mt,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:W=>W.target.style.backgroundColor="#F57C00",onMouseLeave:W=>W.target.style.backgroundColor="#FF9800",children:"⚡ 매물정보 자동 생성"}),p.jsx("p",{className:"form-hint",children:"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:U.roomName,onChange:W=>K({...U,roomName:W.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:U.status,onChange:W=>K({...U,status:W.target.value}),children:Mn.map(W=>p.jsx("option",{value:W,children:W},W))})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:U.agency,onChange:W=>K({...U,agency:W.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:U.agencyPhone,onChange:W=>K({...U,agencyPhone:W.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:H,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:rt,className:"btn-primary",children:x!=null?"수정":"추가"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["매물선정 - ",e?e.slice(0,30):""]}),p.jsx("button",{className:"btn-close",onClick:ut,children:"×"})]}),p.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:"선정 매물"}),dt.properties.length===0?p.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"선정된 매물이 없습니다."}):dt.properties.map((H,Z)=>p.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",H.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${H.status}`,value:H.status,onChange:x=>{const U=[...dt.properties];U[Z]={...U[Z],status:x.target.value},ct({...dt,properties:U})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Mn.map(x=>p.jsx("option",{value:x,children:x},x))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:H.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",H.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",H.agencyPhone?p.jsx("a",{href:`sms:${H.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:H.agencyPhone}):""]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>{R(Z),N(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>O(Z),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},H.id||Z)),p.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px",marginTop:"20px",borderTop:"1px solid #e0e0e0",paddingTop:"15px"},children:[p.jsx("button",{onClick:ut,className:"btn-secondary",children:"취소"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginLeft:"auto"},children:[p.jsx("button",{onClick:()=>{R(null),N(!0)},style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:H=>H.target.style.backgroundColor="#1976D2",onMouseLeave:H=>H.target.style.backgroundColor="#2196F3",children:"+ 매물 추가"}),p.jsx("button",{onClick:()=>D(!0),disabled:dt.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:dt.properties.length===0?"not-allowed":"pointer",opacity:dt.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:H=>{dt.properties.length>0&&(H.target.style.backgroundColor="#d32f2f")},onMouseLeave:H=>{dt.properties.length>0&&(H.target.style.backgroundColor="#f44336")},children:"📋 보고서 생성"}),p.jsx("button",{onClick:gt,disabled:dt.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:dt.properties.length===0?"not-allowed":"pointer",opacity:dt.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:H=>{dt.properties.length>0&&(H.target.style.backgroundColor="#7B1FA2")},onMouseLeave:H=>{dt.properties.length>0&&(H.target.style.backgroundColor="#9C27B0")},children:"📅 미팅내역추가"}),p.jsx("button",{onClick:w,className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold"},children:"저장"})]})]}),it&&p.jsx(J,{onClose:()=>{N(!1),R(null)},propertyToEdit:S!==null?dt.properties[S]:null,editIndex:S}),V&&p.jsx(P,{onClose:()=>D(!1)})]})})},ot=ut=>ut?new Date(ut).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"",X=({selection:ut,onClose:et})=>{const[ht,dt]=Tt.useState(null),[ct,it]=Tt.useState(!1),N=D=>{dt(D),it(!0)},S=D=>{if(confirm("이 매물을 삭제하시겠습니까?")){const O=ut.properties.filter((gt,nt)=>nt!==D),w={...ut,properties:O};a(w),I(w)}},R=(D,O)=>{const w=[...ut.properties];O!=null?w[O]=D:w.push({...D,id:ui()});const gt={...ut,properties:w};a(gt),I(gt),it(!1),dt(null)},V=({propertyToEdit:D,editIndex:O,onClose:w})=>{const[gt,nt]=Tt.useState(D||{roomName:"",agency:"",agencyPhone:"",info:"",status:Mn[0]}),P=H=>{const Z=H.target.value,{propertyName:x,agencyName:U,contactNumber:K}=Ca(Z);nt({...gt,info:Z,roomName:x||gt.roomName,agency:U||gt.agency,agencyPhone:K||gt.agencyPhone})},J=()=>{const H=gt.info,Z=Ty(H);if(!Z){alert("매물정보에서 필요한 데이터를 추출할 수 없습니다. 정보를 확인해주세요.");return}const x={...gt,info:Z},{propertyName:U,agencyName:K,contactNumber:Q}=Ca(Z);x.roomName=U||gt.roomName,x.agency=K||gt.agency,x.agencyPhone=Q||gt.agencyPhone,nt(x)};return p.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:p.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"매물 수정"}),p.jsx("button",{className:"btn-close",onClick:w,children:"×"})]}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[p.jsx("label",{children:"매물정보 (전체 텍스트 붙여넣기)"}),p.jsx("textarea",{className:"large",placeholder:`매물 정보를 붙여넣으세요
2번째 줄 → 호실명 자동입력
7번째 줄 → 부동산 자동입력
마지막 줄 → 연락처 자동입력`,value:gt.info,onChange:P}),p.jsx("button",{type:"button",onClick:J,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:H=>H.target.style.backgroundColor="#F57C00",onMouseLeave:H=>H.target.style.backgroundColor="#FF9800",children:"⚡ 매물정보 자동 생성"}),p.jsx("p",{className:"form-hint",children:"매물 정보를 붙여넣으면 2번째 줄이 호실명, 7번째 줄이 부동산, 마지막 줄이 연락처로 자동 입력됩니다."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"호실명"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:gt.roomName,onChange:H=>nt({...gt,roomName:H.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"준비상태"}),p.jsx("select",{value:gt.status,onChange:H=>nt({...gt,status:H.target.value}),children:Mn.map(H=>p.jsx("option",{value:H,children:H},H))})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"부동산"}),p.jsx("input",{type:"text",value:gt.agency,onChange:H=>nt({...gt,agency:H.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"연락처"}),p.jsx("input",{type:"text",placeholder:"자동 입력되지만 수정 가능합니다",value:gt.agencyPhone,onChange:H=>nt({...gt,agencyPhone:H.target.value})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:w,className:"btn-secondary",children:"취소"}),p.jsx("button",{onClick:()=>R(gt,O),className:"btn-primary",children:"수정"})]})]})})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",onClick:D=>D.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["선정 매물 - ",ot(ut.createdAt)]}),p.jsx("button",{className:"btn-close",onClick:et,children:"×"})]}),p.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:ut.properties&&ut.properties.length>0?ut.properties.map((D,O)=>p.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[p.jsxs("div",{className:"property-card-header",children:[p.jsxs("div",{className:"property-room-name",children:["🏠 ",D.roomName||"미지정"]}),p.jsx("select",{className:`property-status-badge status-${D.status}`,value:D.status,onChange:w=>{const gt=[...ut.properties];gt[O]={...gt[O],status:w.target.value};const nt={...ut,properties:gt};a(nt),I(nt)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Mn.map(w=>p.jsx("option",{value:w,children:w},w))})]}),p.jsxs("div",{className:"property-card-body",children:[p.jsx("div",{className:"property-info-label",children:"📋 매물정보"}),p.jsx("div",{className:"property-info-content",children:D.info})]}),p.jsxs("div",{className:"property-card-footer",children:[p.jsxs("span",{className:"property-detail",children:["🏢 ",D.agency]}),p.jsxs("span",{className:"property-detail",children:["📞 ",D.agencyPhone?p.jsx("a",{href:`sms:${D.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:D.agencyPhone}):""]})]}),p.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>N(O),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:"수정"}),p.jsx("button",{onClick:()=>S(O),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:"삭제"})]})]},D.id)):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 매물이 없습니다."})}),p.jsx("div",{className:"modal-footer",children:p.jsx("button",{onClick:et,className:"btn-primary",children:"닫기"})}),ct&&p.jsx(V,{propertyToEdit:ht!==null?ut.properties[ht]:null,editIndex:ht,onClose:()=>{it(!1),dt(null)}})]})})};return p.jsxs("div",{className:"meeting-tab",children:[p.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!_&&p.jsx("button",{onClick:()=>y(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ 매물선정"})}),g&&p.jsx(z,{onCancel:()=>y(!1)}),_?p.jsx(z,{selectionData:_,onCancel:()=>b(null)},_.id):L.length>0?p.jsxs("table",{className:"customer-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"생성일자"}),p.jsx("th",{children:"매물수"}),p.jsx("th",{children:"액션"})]})}),p.jsx("tbody",{children:L.map(ut=>p.jsxs("tr",{children:[p.jsx("td",{children:ot(ut.createdAt)}),p.jsxs("td",{onClick:()=>I(ut),style:{cursor:"pointer",color:"var(--primary-blue)",textDecoration:"underline"},children:[ut.properties?.length||0,"개 매물"]}),p.jsxs("td",{children:[p.jsx("button",{onClick:()=>b(ut),style:{fontSize:"12px",padding:"4px 8px",marginRight:"5px"},children:"수정"}),p.jsx("button",{onClick:()=>o(ut.id),className:"btn-secondary",style:{fontSize:"12px",padding:"4px 8px"},children:"삭제"})]})]},ut.id))})]}):p.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"등록된 매물선정이 없습니다."}),C&&p.jsx(X,{selection:C,onClose:()=>I(null)})]})},YE=({selectedCustomer:r,onClose:e,onEditCustomer:i,onUpdateCustomer:a,onDeleteCustomer:o,activities:h,onSaveActivity:d,onDeleteActivity:g,meetings:y,onSaveMeeting:_,onDeleteMeeting:b,propertySelections:C,onSavePropertySelection:I,onDeletePropertySelection:L})=>{const[z,ot]=Tt.useState("기본정보"),[X,ut]=Tt.useState(null);Tt.useEffect(()=>{r&&(ot("기본정보"),ut(null))},[r?.id]);const et=!!r,ht=it=>{const N={...r,status:it,progress:it==="보류"?null:r.progress};a(N)},dt=it=>{const N={...r,progress:it};a(N)},ct=it=>{const N=it.map(S=>({...S,visitTime:""}));ut(N),ot("미팅 내역")};return p.jsx("aside",{className:`detail-panel ${et?"open":""}`,children:et&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"panel-header",children:[p.jsxs("div",{children:[p.jsx("h3",{children:"고객 상세"}),p.jsxs("span",{className:"created-date",children:["접수일자: ",new Date(r.createdAt).toLocaleDateString()]})]}),p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("button",{onClick:it=>{it.stopPropagation(),i(r)},className:"btn-primary",style:{padding:"8px 16px"},children:"수정"}),p.jsx("button",{onClick:it=>{it.stopPropagation(),o(r)},className:"btn-secondary",style:{padding:"8px 16px"},children:"삭제"}),p.jsx("button",{onClick:e,className:"btn-close",children:"✕"})]})]}),p.jsx("div",{style:{padding:"15px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f8f9fa"},children:p.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap"},children:[p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:"상태"}),p.jsx("div",{style:{display:"flex",gap:"5px"},children:ME.map(it=>p.jsx("button",{type:"button",onClick:()=>ht(it),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:r.status===it?"#4CAF50":"white",color:r.status===it?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:it},it))})]}),(r.status==="신규"||r.status==="진행중")&&p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:"진행상황"}),p.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:P_.map(it=>p.jsx("button",{type:"button",onClick:()=>dt(it),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:r.progress===it?"#2196F3":"white",color:r.progress===it?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:it},it))})]})]})}),p.jsxs("div",{className:"panel-content",children:[p.jsx("div",{style:{display:"flex",gap:"4px",padding:"12px 15px",backgroundColor:"#e3f2fd",borderRadius:"8px",marginBottom:"15px",border:"1px solid #bbdefb"},children:["기본정보","활동 내역","미팅 내역","매물선정"].map((it,N)=>p.jsx("button",{onClick:()=>ot(it),style:{flex:1,padding:"10px 16px",fontSize:"14px",fontWeight:"700",border:"none",borderRadius:"6px",backgroundColor:z===it?"white":"transparent",color:"#1a1a1a",cursor:"pointer",transition:"all 0.2s ease",boxShadow:z===it?"0 2px 8px rgba(33, 150, 243, 0.15)":"none",border:z===it?"1px solid #e0e0e0":"1px solid transparent"},onMouseEnter:S=>{z!==it&&(S.target.style.backgroundColor="#f9f9f9")},onMouseLeave:S=>{z!==it&&(S.target.style.backgroundColor="transparent")},children:it},it))}),p.jsxs("div",{className:"tab-content",children:[z==="기본정보"&&p.jsx(kE,{customer:r,onUpdateCustomer:a,activities:h,meetings:y,onTabChange:ot}),z==="활동 내역"&&p.jsx(LE,{customerId:r.id,activities:h,onSaveActivity:d,onDeleteActivity:g}),z==="미팅 내역"&&p.jsx(GE,{customerId:r.id,customerName:r.name,meetings:y,onSaveMeeting:_,onDeleteMeeting:b,initialProperties:X,onClearInitialProperties:()=>ut(null)}),z==="매물선정"&&p.jsx(QE,{customerId:r.id,customerName:r.name,propertySelections:C,onSavePropertySelection:I,onDeletePropertySelection:L,onTabChange:ot,onCreateMeetingFromSelection:ct})]})]})]})})},KE=()=>{};var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},XE=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const h=r[i++];e[a++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=r[i++],d=r[i++],g=r[i++],y=((o&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(y>>10)),e[a++]=String.fromCharCode(56320+(y&1023))}else{const h=r[i++],d=r[i++];e[a++]=String.fromCharCode((o&15)<<12|(h&63)<<6|d&63)}}return e.join("")},L_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const h=r[o],d=o+1<r.length,g=d?r[o+1]:0,y=o+2<r.length,_=y?r[o+2]:0,b=h>>2,C=(h&3)<<4|g>>4;let I=(g&15)<<2|_>>6,L=_&63;y||(L=64,d||(I=64)),a.push(i[b],i[C],i[I],i[L])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(k_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):XE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const h=i[r.charAt(o++)],g=o<r.length?i[r.charAt(o)]:0;++o;const _=o<r.length?i[r.charAt(o)]:64;++o;const C=o<r.length?i[r.charAt(o)]:64;if(++o,h==null||g==null||_==null||C==null)throw new $E;const I=h<<2|g>>4;if(a.push(I),_!==64){const L=g<<4&240|_>>2;if(a.push(L),C!==64){const z=_<<6&192|C;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class $E extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZE=function(r){const e=k_(r);return L_.encodeByteArray(e,!0)},$u=function(r){return ZE(r).replace(/\./g,"")},JE=function(r){try{return L_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=()=>WE().__FIREBASE_DEFAULTS__,eT=()=>{if(typeof process>"u"||typeof by>"u")return;const r=by.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},nT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&JE(r[1]);return e&&JSON.parse(e)},vd=()=>{try{return KE()||tT()||eT()||nT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iT=r=>vd()?.emulatorHosts?.[r],z_=r=>{const e=iT(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},B_=()=>vd()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[$u(JSON.stringify(i)),$u(JSON.stringify(d)),""].join(".")}const Jl={};function rT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?r.emulator.push(e):r.prod.push(e);return r}function aT(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let Sy=!1;function F_(r,e){if(typeof window>"u"||typeof document>"u"||!dc(window.location.host)||Jl[r]===e||Jl[r]||Sy)return;Jl[r]=e;function i(I){return`__firebase__banner__${I}`}const a="__firebase__banner",h=rT().prod.length>0;function d(){const I=document.getElementById(a);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function y(I,L){I.setAttribute("width","24"),I.setAttribute("id",L),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function _(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Sy=!0,d()},I}function b(I,L){I.setAttribute("id",L),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function C(){const I=aT(a),L=i("text"),z=document.getElementById(L)||document.createElement("span"),ot=i("learnmore"),X=document.getElementById(ot)||document.createElement("a"),ut=i("preprendIcon"),et=document.getElementById(ut)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ht=I.element;g(ht),b(X,ot);const dt=_();y(et,ut),ht.append(et,z,X,dt),document.body.appendChild(ht)}h?(z.innerText="Preview backend disconnected.",et.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(et.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oT(){const r=vd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uT(){return!oT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cT(){try{return typeof indexedDB=="object"}catch{return!1}}function hT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="FirebaseError";class Ir extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=fT,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G_.prototype.create)}}class G_{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],d=h?dT(h,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Ir(o,g,a)}}function dT(r,e){return r.replace(mT,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const mT=/\{\$([^}]+)}/g;function Zu(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const h=r[o],d=e[o];if(Ay(h)&&Ay(d)){if(!Zu(h,d))return!1}else if(h!==d)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function Ay(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(r){return r&&r._delegate?r._delegate:r}class Ia{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new sT;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yT(e))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});a.resolve(h)}catch{}}}}clearInstance(e=Sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sr){return this.instances.has(e)}getOptions(e=Sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);a===g&&d.resolve(o)}return o}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const h=this.instances.get(a);return h&&e(h,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:gT(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Sr){return this.component?this.component.multipleInstances?e:Sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gT(r){return r===Sr?void 0:r}function yT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new pT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Qt||(Qt={}));const vT={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},ET=Qt.INFO,TT={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},bT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=TT[e];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Q_{constructor(e){this.name=e,this._logLevel=ET,this._logHandler=bT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const ST=(r,e)=>e.some(i=>r instanceof i);let xy,Ry;function AT(){return xy||(xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xT(){return Ry||(Ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y_=new WeakMap,$f=new WeakMap,K_=new WeakMap,zf=new WeakMap,Ed=new WeakMap;function RT(r){const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{i(Cs(r.result)),o()},d=()=>{a(r.error),o()};r.addEventListener("success",h),r.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&Y_.set(i,r)}).catch(()=>{}),Ed.set(e,r),e}function wT(r){if($f.has(r))return;const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{i(),o()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});$f.set(r,e)}let Zf={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return $f.get(r);if(e==="objectStoreNames")return r.objectStoreNames||K_.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Cs(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function CT(r){Zf=r(Zf)}function DT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(Bf(this),e,...i);return K_.set(a,e.sort?e.sort():[e]),Cs(a)}:xT().includes(r)?function(...e){return r.apply(Bf(this),e),Cs(Y_.get(this))}:function(...e){return Cs(r.apply(Bf(this),e))}}function NT(r){return typeof r=="function"?DT(r):(r instanceof IDBTransaction&&wT(r),ST(r,AT())?new Proxy(r,Zf):r)}function Cs(r){if(r instanceof IDBRequest)return RT(r);if(zf.has(r))return zf.get(r);const e=NT(r);return e!==r&&(zf.set(r,e),Ed.set(e,r)),e}const Bf=r=>Ed.get(r);function IT(r,e,{blocked:i,upgrade:a,blocking:o,terminated:h}={}){const d=indexedDB.open(r,e),g=Cs(d);return a&&d.addEventListener("upgradeneeded",y=>{a(Cs(d.result),y.oldVersion,y.newVersion,Cs(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{h&&y.addEventListener("close",()=>h()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const MT=["get","getKey","getAll","getAllKeys","count"],VT=["put","add","delete","clear"],qf=new Map;function wy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(qf.get(e))return qf.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=VT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||MT.includes(i)))return;const h=async function(d,...g){const y=this.transaction(d,o?"readwrite":"readonly");let _=y.store;return a&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),o&&y.done]))[0]};return qf.set(e,h),h}CT(r=>({...r,get:(e,i,a)=>wy(e,i)||r.get(e,i,a),has:(e,i)=>!!wy(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(jT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function jT(r){return r.getComponent()?.type==="VERSION"}const Jf="@firebase/app",Cy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Q_("@firebase/app"),PT="@firebase/app-compat",UT="@firebase/analytics-compat",kT="@firebase/analytics",LT="@firebase/app-check-compat",zT="@firebase/app-check",BT="@firebase/auth",qT="@firebase/auth-compat",HT="@firebase/database",FT="@firebase/data-connect",GT="@firebase/database-compat",QT="@firebase/functions",YT="@firebase/functions-compat",KT="@firebase/installations",XT="@firebase/installations-compat",$T="@firebase/messaging",ZT="@firebase/messaging-compat",JT="@firebase/performance",WT="@firebase/performance-compat",tb="@firebase/remote-config",eb="@firebase/remote-config-compat",nb="@firebase/storage",ib="@firebase/storage-compat",sb="@firebase/firestore",rb="@firebase/ai",ab="@firebase/firestore-compat",lb="firebase",ob="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",ub={[Jf]:"fire-core",[PT]:"fire-core-compat",[kT]:"fire-analytics",[UT]:"fire-analytics-compat",[zT]:"fire-app-check",[LT]:"fire-app-check-compat",[BT]:"fire-auth",[qT]:"fire-auth-compat",[HT]:"fire-rtdb",[FT]:"fire-data-connect",[GT]:"fire-rtdb-compat",[QT]:"fire-fn",[YT]:"fire-fn-compat",[KT]:"fire-iid",[XT]:"fire-iid-compat",[$T]:"fire-fcm",[ZT]:"fire-fcm-compat",[JT]:"fire-perf",[WT]:"fire-perf-compat",[tb]:"fire-rc",[eb]:"fire-rc-compat",[nb]:"fire-gcs",[ib]:"fire-gcs-compat",[sb]:"fire-fst",[ab]:"fire-fst-compat",[rb]:"fire-vertex","fire-js":"fire-js",[lb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Map,cb=new Map,td=new Map;function Dy(r,e){try{r.container.addComponent(e)}catch(i){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function io(r){const e=r.name;if(td.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;td.set(e,r);for(const i of Ju.values())Dy(i,r);for(const i of cb.values())Dy(i,r);return!0}function X_(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function $_(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new G_("app","Firebase",hb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=ob;function J_(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a={name:Wf,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Ds.create("bad-app-name",{appName:String(o)});if(i||(i=B_()),!i)throw Ds.create("no-options");const h=Ju.get(o);if(h){if(Zu(i,h.options)&&Zu(a,h.config))return h;throw Ds.create("duplicate-app",{appName:o})}const d=new _T(o);for(const y of td.values())d.addComponent(y);const g=new fb(i,a,d);return Ju.set(o,g),g}function W_(r=Wf){const e=Ju.get(r);if(!e&&r===Wf&&B_())return J_();if(!e)throw Ds.create("no-app",{appName:r});return e}function Ns(r,e,i){let a=ub[r]??r;i&&(a+=`-${i}`);const o=a.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(d.join(" "));return}io(new Ia(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebase-heartbeat-database",mb=1,so="firebase-heartbeat-store";let Hf=null;function tv(){return Hf||(Hf=IT(db,mb,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(so)}catch(i){console.warn(i)}}}}).catch(r=>{throw Ds.create("idb-open",{originalErrorMessage:r.message})})),Hf}async function pb(r){try{const i=(await tv()).transaction(so),a=await i.objectStore(so).get(ev(r));return await i.done,a}catch(e){if(e instanceof Ir)Bi.warn(e.message);else{const i=Ds.create("idb-get",{originalErrorMessage:e?.message});Bi.warn(i.message)}}}async function Ny(r,e){try{const a=(await tv()).transaction(so,"readwrite");await a.objectStore(so).put(e,ev(r)),await a.done}catch(i){if(i instanceof Ir)Bi.warn(i.message);else{const a=Ds.create("idb-set",{originalErrorMessage:i?.message});Bi.warn(a.message)}}}function ev(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=1024,yb=30;class _b{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Eb(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Iy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>yb){const o=Tb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Bi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Iy(),{heartbeatsToSend:i,unsentEntries:a}=vb(this._heartbeatsCache.heartbeats),o=$u(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Bi.warn(e),""}}}function Iy(){return new Date().toISOString().substring(0,10)}function vb(r,e=gb){const i=[];let a=r.slice();for(const o of r){const h=i.find(d=>d.agent===o.agent);if(h){if(h.dates.push(o.date),My(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),My(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class Eb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cT()?hT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await pb(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function My(r){return $u(JSON.stringify({version:2,heartbeats:r})).length}function Tb(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(r){io(new Ia("platform-logger",e=>new OT(e),"PRIVATE")),io(new Ia("heartbeat",e=>new _b(e),"PRIVATE")),Ns(Jf,Cy,r),Ns(Jf,Cy,"esm2020"),Ns("fire-js","")}bb("");var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,nv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function R(){}R.prototype=S.prototype,N.F=S.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(V,D,O){for(var w=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)w[gt-2]=arguments[gt];return S.prototype[D].apply(V,w)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,R){R||(R=0);const V=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)V[D]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(D=0;D<16;++D)V[D]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=N.g[0],R=N.g[1],D=N.g[2];let O=N.g[3],w;w=S+(O^R&(D^O))+V[0]+3614090360&4294967295,S=R+(w<<7&4294967295|w>>>25),w=O+(D^S&(R^D))+V[1]+3905402710&4294967295,O=S+(w<<12&4294967295|w>>>20),w=D+(R^O&(S^R))+V[2]+606105819&4294967295,D=O+(w<<17&4294967295|w>>>15),w=R+(S^D&(O^S))+V[3]+3250441966&4294967295,R=D+(w<<22&4294967295|w>>>10),w=S+(O^R&(D^O))+V[4]+4118548399&4294967295,S=R+(w<<7&4294967295|w>>>25),w=O+(D^S&(R^D))+V[5]+1200080426&4294967295,O=S+(w<<12&4294967295|w>>>20),w=D+(R^O&(S^R))+V[6]+2821735955&4294967295,D=O+(w<<17&4294967295|w>>>15),w=R+(S^D&(O^S))+V[7]+4249261313&4294967295,R=D+(w<<22&4294967295|w>>>10),w=S+(O^R&(D^O))+V[8]+1770035416&4294967295,S=R+(w<<7&4294967295|w>>>25),w=O+(D^S&(R^D))+V[9]+2336552879&4294967295,O=S+(w<<12&4294967295|w>>>20),w=D+(R^O&(S^R))+V[10]+4294925233&4294967295,D=O+(w<<17&4294967295|w>>>15),w=R+(S^D&(O^S))+V[11]+2304563134&4294967295,R=D+(w<<22&4294967295|w>>>10),w=S+(O^R&(D^O))+V[12]+1804603682&4294967295,S=R+(w<<7&4294967295|w>>>25),w=O+(D^S&(R^D))+V[13]+4254626195&4294967295,O=S+(w<<12&4294967295|w>>>20),w=D+(R^O&(S^R))+V[14]+2792965006&4294967295,D=O+(w<<17&4294967295|w>>>15),w=R+(S^D&(O^S))+V[15]+1236535329&4294967295,R=D+(w<<22&4294967295|w>>>10),w=S+(D^O&(R^D))+V[1]+4129170786&4294967295,S=R+(w<<5&4294967295|w>>>27),w=O+(R^D&(S^R))+V[6]+3225465664&4294967295,O=S+(w<<9&4294967295|w>>>23),w=D+(S^R&(O^S))+V[11]+643717713&4294967295,D=O+(w<<14&4294967295|w>>>18),w=R+(O^S&(D^O))+V[0]+3921069994&4294967295,R=D+(w<<20&4294967295|w>>>12),w=S+(D^O&(R^D))+V[5]+3593408605&4294967295,S=R+(w<<5&4294967295|w>>>27),w=O+(R^D&(S^R))+V[10]+38016083&4294967295,O=S+(w<<9&4294967295|w>>>23),w=D+(S^R&(O^S))+V[15]+3634488961&4294967295,D=O+(w<<14&4294967295|w>>>18),w=R+(O^S&(D^O))+V[4]+3889429448&4294967295,R=D+(w<<20&4294967295|w>>>12),w=S+(D^O&(R^D))+V[9]+568446438&4294967295,S=R+(w<<5&4294967295|w>>>27),w=O+(R^D&(S^R))+V[14]+3275163606&4294967295,O=S+(w<<9&4294967295|w>>>23),w=D+(S^R&(O^S))+V[3]+4107603335&4294967295,D=O+(w<<14&4294967295|w>>>18),w=R+(O^S&(D^O))+V[8]+1163531501&4294967295,R=D+(w<<20&4294967295|w>>>12),w=S+(D^O&(R^D))+V[13]+2850285829&4294967295,S=R+(w<<5&4294967295|w>>>27),w=O+(R^D&(S^R))+V[2]+4243563512&4294967295,O=S+(w<<9&4294967295|w>>>23),w=D+(S^R&(O^S))+V[7]+1735328473&4294967295,D=O+(w<<14&4294967295|w>>>18),w=R+(O^S&(D^O))+V[12]+2368359562&4294967295,R=D+(w<<20&4294967295|w>>>12),w=S+(R^D^O)+V[5]+4294588738&4294967295,S=R+(w<<4&4294967295|w>>>28),w=O+(S^R^D)+V[8]+2272392833&4294967295,O=S+(w<<11&4294967295|w>>>21),w=D+(O^S^R)+V[11]+1839030562&4294967295,D=O+(w<<16&4294967295|w>>>16),w=R+(D^O^S)+V[14]+4259657740&4294967295,R=D+(w<<23&4294967295|w>>>9),w=S+(R^D^O)+V[1]+2763975236&4294967295,S=R+(w<<4&4294967295|w>>>28),w=O+(S^R^D)+V[4]+1272893353&4294967295,O=S+(w<<11&4294967295|w>>>21),w=D+(O^S^R)+V[7]+4139469664&4294967295,D=O+(w<<16&4294967295|w>>>16),w=R+(D^O^S)+V[10]+3200236656&4294967295,R=D+(w<<23&4294967295|w>>>9),w=S+(R^D^O)+V[13]+681279174&4294967295,S=R+(w<<4&4294967295|w>>>28),w=O+(S^R^D)+V[0]+3936430074&4294967295,O=S+(w<<11&4294967295|w>>>21),w=D+(O^S^R)+V[3]+3572445317&4294967295,D=O+(w<<16&4294967295|w>>>16),w=R+(D^O^S)+V[6]+76029189&4294967295,R=D+(w<<23&4294967295|w>>>9),w=S+(R^D^O)+V[9]+3654602809&4294967295,S=R+(w<<4&4294967295|w>>>28),w=O+(S^R^D)+V[12]+3873151461&4294967295,O=S+(w<<11&4294967295|w>>>21),w=D+(O^S^R)+V[15]+530742520&4294967295,D=O+(w<<16&4294967295|w>>>16),w=R+(D^O^S)+V[2]+3299628645&4294967295,R=D+(w<<23&4294967295|w>>>9),w=S+(D^(R|~O))+V[0]+4096336452&4294967295,S=R+(w<<6&4294967295|w>>>26),w=O+(R^(S|~D))+V[7]+1126891415&4294967295,O=S+(w<<10&4294967295|w>>>22),w=D+(S^(O|~R))+V[14]+2878612391&4294967295,D=O+(w<<15&4294967295|w>>>17),w=R+(O^(D|~S))+V[5]+4237533241&4294967295,R=D+(w<<21&4294967295|w>>>11),w=S+(D^(R|~O))+V[12]+1700485571&4294967295,S=R+(w<<6&4294967295|w>>>26),w=O+(R^(S|~D))+V[3]+2399980690&4294967295,O=S+(w<<10&4294967295|w>>>22),w=D+(S^(O|~R))+V[10]+4293915773&4294967295,D=O+(w<<15&4294967295|w>>>17),w=R+(O^(D|~S))+V[1]+2240044497&4294967295,R=D+(w<<21&4294967295|w>>>11),w=S+(D^(R|~O))+V[8]+1873313359&4294967295,S=R+(w<<6&4294967295|w>>>26),w=O+(R^(S|~D))+V[15]+4264355552&4294967295,O=S+(w<<10&4294967295|w>>>22),w=D+(S^(O|~R))+V[6]+2734768916&4294967295,D=O+(w<<15&4294967295|w>>>17),w=R+(O^(D|~S))+V[13]+1309151649&4294967295,R=D+(w<<21&4294967295|w>>>11),w=S+(D^(R|~O))+V[4]+4149444226&4294967295,S=R+(w<<6&4294967295|w>>>26),w=O+(R^(S|~D))+V[11]+3174756917&4294967295,O=S+(w<<10&4294967295|w>>>22),w=D+(S^(O|~R))+V[2]+718787259&4294967295,D=O+(w<<15&4294967295|w>>>17),w=R+(O^(D|~S))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+O&4294967295}a.prototype.v=function(N,S){S===void 0&&(S=N.length);const R=S-this.blockSize,V=this.C;let D=this.h,O=0;for(;O<S;){if(D==0)for(;O<=R;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<S;)if(V[D++]=N.charCodeAt(O++),D==this.blockSize){o(this,V),D=0;break}}else for(;O<S;)if(V[D++]=N[O++],D==this.blockSize){o(this,V),D=0;break}}this.h=D,this.o+=S},a.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)N[S++]=this.g[R]>>>V&255;return N};function h(N,S){var R=g;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=S(N)}function d(N,S){this.h=S;const R=[];let V=!0;for(let D=N.length-1;D>=0;D--){const O=N[D]|0;V&&O==S||(R[D]=O,V=!1)}this.g=R}var g={};function y(N){return-128<=N&&N<128?h(N,function(S){return new d([S|0],S<0?-1:0)}):new d([N|0],N<0?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return C;if(N<0)return X(_(-N));const S=[];let R=1;for(let V=0;N>=R;V++)S[V]=N/R|0,R*=4294967296;return new d(S,0)}function b(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return X(b(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=_(Math.pow(S,8));let V=C;for(let O=0;O<N.length;O+=8){var D=Math.min(8,N.length-O);const w=parseInt(N.substring(O,O+D),S);D<8?(D=_(Math.pow(S,D)),V=V.j(D).add(_(w))):(V=V.j(R),V=V.add(_(w)))}return V}var C=y(0),I=y(1),L=y(16777216);r=d.prototype,r.m=function(){if(ot(this))return-X(this).m();let N=0,S=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);N+=(V>=0?V:4294967296+V)*S,S*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(z(this))return"0";if(ot(this))return"-"+X(this).toString(N);const S=_(Math.pow(N,6));var R=this;let V="";for(;;){const D=dt(R,S).g;R=ut(R,D.j(S));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=D,z(R))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function z(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function ot(N){return N.h==-1}r.l=function(N){return N=ut(this,N),ot(N)?-1:z(N)?0:1};function X(N){const S=N.g.length,R=[];for(let V=0;V<S;V++)R[V]=~N.g[V];return new d(R,~N.h).add(I)}r.abs=function(){return ot(this)?X(this):this},r.add=function(N){const S=Math.max(this.g.length,N.g.length),R=[];let V=0;for(let D=0;D<=S;D++){let O=V+(this.i(D)&65535)+(N.i(D)&65535),w=(O>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);V=w>>>16,O&=65535,w&=65535,R[D]=w<<16|O}return new d(R,R[R.length-1]&-2147483648?-1:0)};function ut(N,S){return N.add(X(S))}r.j=function(N){if(z(this)||z(N))return C;if(ot(this))return ot(N)?X(this).j(X(N)):X(X(this).j(N));if(ot(N))return X(this.j(X(N)));if(this.l(L)<0&&N.l(L)<0)return _(this.m()*N.m());const S=this.g.length+N.g.length,R=[];for(var V=0;V<2*S;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<N.g.length;D++){const O=this.i(V)>>>16,w=this.i(V)&65535,gt=N.i(D)>>>16,nt=N.i(D)&65535;R[2*V+2*D]+=w*nt,et(R,2*V+2*D),R[2*V+2*D+1]+=O*nt,et(R,2*V+2*D+1),R[2*V+2*D+1]+=w*gt,et(R,2*V+2*D+1),R[2*V+2*D+2]+=O*gt,et(R,2*V+2*D+2)}for(N=0;N<S;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=S;N<2*S;N++)R[N]=0;return new d(R,0)};function et(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function ht(N,S){this.g=N,this.h=S}function dt(N,S){if(z(S))throw Error("division by zero");if(z(N))return new ht(C,C);if(ot(N))return S=dt(X(N),S),new ht(X(S.g),X(S.h));if(ot(S))return S=dt(N,X(S)),new ht(X(S.g),S.h);if(N.g.length>30){if(ot(N)||ot(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,V=S;V.l(N)<=0;)R=ct(R),V=ct(V);var D=it(R,1),O=it(V,1);for(V=it(V,2),R=it(R,2);!z(V);){var w=O.add(V);w.l(N)<=0&&(D=D.add(R),O=w),V=it(V,1),R=it(R,1)}return S=ut(N,D.j(S)),new ht(D,S)}for(D=C;N.l(S)>=0;){for(R=Math.max(1,Math.floor(N.m()/S.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=_(R),w=O.j(S);ot(w)||w.l(N)>0;)R-=V,O=_(R),w=O.j(S);z(O)&&(O=I),D=D.add(O),N=ut(N,w)}return new ht(D,N)}r.B=function(N){return dt(this,N).h},r.and=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<S;V++)R[V]=this.i(V)&N.i(V);return new d(R,this.h&N.h)},r.or=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<S;V++)R[V]=this.i(V)|N.i(V);return new d(R,this.h|N.h)},r.xor=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<S;V++)R[V]=this.i(V)^N.i(V);return new d(R,this.h^N.h)};function ct(N){const S=N.g.length+1,R=[];for(let V=0;V<S;V++)R[V]=N.i(V)<<1|N.i(V-1)>>>31;return new d(R,N.h)}function it(N,S){const R=S>>5;S%=32;const V=N.g.length-R,D=[];for(let O=0;O<V;O++)D[O]=S>0?N.i(O+R)>>>S|N.i(O+R+1)<<32-S:N.i(O+R);return new d(D,N.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,nv=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=b,Is=d}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iv,Kl,sv,Hu,ed,rv,av,lv;(function(){var r,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var v=a;u=u.split(".");for(var A=0;A<u.length-1;A++){var q=u[A];if(!(q in v))break t;v=v[q]}u=u[u.length-1],A=v[u],m=m(A),m!=A&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&v.push([A,m[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,v){return u.call.apply(u.bind,arguments)}function _(u,m,v){return _=y,_.apply(null,arguments)}function b(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function C(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,q,$){for(var pt=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)pt[Mt-2]=arguments[Mt];return m.prototype[q].apply(A,pt)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const m=u.length;if(m>0){const v=Array(m);for(let A=0;A<m;A++)v[A]=u[A];return v}return[]}function z(u,m){for(let A=1;A<arguments.length;A++){const q=arguments[A];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=u.length||0;const $=q.length||0;u.length=v+$;for(let pt=0;pt<$;pt++)u[v+pt]=q[pt]}else u.push(q)}}class ot{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(u){d.setTimeout(()=>{throw u},0)}function ut(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class et{constructor(){this.h=this.g=null}add(m,v){const A=ht.get();A.set(m,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ht=new ot(()=>new dt,u=>u.reset());class dt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,it=!1,N=new et,S=()=>{const u=Promise.resolve(void 0);ct=()=>{u.then(R)}};function R(){for(var u;u=ut();){try{u.h.call(u.g)}catch(v){X(v)}var m=ht;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}it=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function gt(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}C(gt,D),gt.prototype.init=function(u,m){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&gt.Z.h.call(this)},gt.prototype.h=function(){gt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),P=0;function J(u,m,v,A,q){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!A,this.ha=q,this.key=++P,this.da=this.fa=!1}function H(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Z(u,m,v){for(const A in u)m.call(v,u[A],A,u)}function x(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function U(u){const m={};for(const v in u)m[v]=u[v];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,m){let v,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(v in A)u[v]=A[v];for(let $=0;$<K.length;$++)v=K[$],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function mt(u){this.src=u,this.g={},this.h=0}mt.prototype.add=function(u,m,v,A,q){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const pt=W(u,m,A,q);return pt>-1?(m=u[pt],v||(m.fa=!1)):(m=new J(m,this.src,$,!!A,q),m.fa=v,u.push(m)),m};function rt(u,m){const v=m.type;if(v in u.g){var A=u.g[v],q=Array.prototype.indexOf.call(A,m,void 0),$;($=q>=0)&&Array.prototype.splice.call(A,q,1),$&&(H(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function W(u,m,v,A){for(let q=0;q<u.length;++q){const $=u[q];if(!$.da&&$.listener==m&&$.capture==!!v&&$.ha==A)return q}return-1}var Et="closure_lm_"+(Math.random()*1e6|0),_t={};function bt(u,m,v,A,q){if(Array.isArray(m)){for(let $=0;$<m.length;$++)bt(u,m[$],v,A,q);return null}return v=_o(v),u&&u[nt]?u.J(m,v,g(A)?!!A.capture:!1,q):kt(u,m,v,!1,A,q)}function kt(u,m,v,A,q,$){if(!m)throw Error("Invalid event type");const pt=g(q)?!!q.capture:!!q;let Mt=zs(u);if(Mt||(u[Et]=Mt=new mt(u)),v=Mt.add(m,v,A,pt,$),v.proxy)return v;if(A=Lt(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)O||(q=pt),q===void 0&&(q=!1),u.addEventListener(m.toString(),A,q);else if(u.attachEvent)u.attachEvent(Ot(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Lt(){function u(v){return m.call(u.src,u.listener,v)}const m=vi;return u}function Yt(u,m,v,A,q){if(Array.isArray(m))for(var $=0;$<m.length;$++)Yt(u,m[$],v,A,q);else A=g(A)?!!A.capture:!!A,v=_o(v),u&&u[nt]?(u=u.i,$=String(m).toString(),$ in u.g&&(m=u.g[$],v=W(m,v,A,q),v>-1&&(H(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[$],u.h--)))):u&&(u=zs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=W(m,v,A,q)),(v=u>-1?m[u]:null)&&Nt(v))}function Nt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[nt])rt(m.i,u);else{var v=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(v,A,u.capture):m.detachEvent?m.detachEvent(Ot(v),A):m.addListener&&m.removeListener&&m.removeListener(A),(v=zs(m))?(rt(v,u),v.h==0&&(v.src=null,m[Et]=null)):H(u)}}}function Ot(u){return u in _t?_t[u]:_t[u]="on"+u}function vi(u,m){if(u.da)u=!0;else{m=new gt(m,this);const v=u.listener,A=u.ha||u.src;u.fa&&Nt(u),u=v.call(A,m)}return u}function zs(u){return u=u[Et],u instanceof mt?u:null}var Ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function _o(u){return typeof u=="function"?u:(u[Ye]||(u[Ye]=function(m){return u.handleEvent(m)}),u[Ye])}function we(){V.call(this),this.i=new mt(this),this.M=this,this.G=null}C(we,V),we.prototype[nt]=!0,we.prototype.removeEventListener=function(u,m,v,A){Yt(this,u,m,v,A)};function Oe(u,m){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var q=m;m=new D(A,u),Q(m,q)}q=!0;let $,pt;if(v)for(pt=v.length-1;pt>=0;pt--)$=m.g=v[pt],q=Ei($,A,!0,m)&&q;if($=m.g=u,q=Ei($,A,!0,m)&&q,q=Ei($,A,!1,m)&&q,v)for(pt=0;pt<v.length;pt++)$=m.g=v[pt],q=Ei($,A,!1,m)&&q}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let A=0;A<v.length;A++)H(v[A]);delete u.g[m],u.h--}}this.G=null},we.prototype.J=function(u,m,v,A){return this.i.add(String(u),m,!1,v,A)},we.prototype.K=function(u,m,v,A){return this.i.add(String(u),m,!0,v,A)};function Ei(u,m,v,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let q=!0;for(let $=0;$<m.length;++$){const pt=m[$];if(pt&&!pt.da&&pt.capture==v){const Mt=pt.listener,le=pt.ha||pt.src;pt.fa&&rt(u.i,pt),q=Mt.call(le,A)!==!1&&q}}return q&&!A.defaultPrevented}function jc(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function qa(u){u.g=jc(()=>{u.g=null,u.i&&(u.i=!1,qa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Pc extends V{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:qa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(u){V.call(this),this.h=u,this.g={}}C(Bs,V);var Fi=[];function Ke(u){Z(u.g,function(m,v){this.g.hasOwnProperty(v)&&Nt(m)},u),u.g={}}Bs.prototype.N=function(){Bs.Z.N.call(this),Ke(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=d.JSON.stringify,nn=d.JSON.parse,Uc=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function vo(){}function Eo(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gi(){D.call(this,"d")}C(Gi,D);function Pn(){D.call(this,"c")}C(Pn,D);var Tn={},Qi=null;function Pr(){return Qi=Qi||new we}Tn.Ia="serverreachability";function Ha(u){D.call(this,Tn.Ia,u)}C(Ha,D);function Yi(u){const m=Pr();Oe(m,new Ha(m))}Tn.STAT_EVENT="statevent";function Ur(u,m){D.call(this,Tn.STAT_EVENT,u),this.stat=m}C(Ur,D);function ge(u){const m=Pr();Oe(m,new Ur(m,u))}Tn.Ja="timingevent";function To(u,m){D.call(this,Tn.Ja,u),this.size=m}C(To,D);function Ki(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Xi(){this.g=!0}Xi.prototype.ua=function(){this.g=!1};function Fa(u,m,v,A,q,$){u.info(function(){if(u.g)if($){var pt="",Mt=$.split("&");for(let Zt=0;Zt<Mt.length;Zt++){var le=Mt[Zt].split("=");if(le.length>1){const ve=le[0];le=le[1];const fn=ve.split("_");pt=fn.length>=2&&fn[1]=="type"?pt+(ve+"="+le+"&"):pt+(ve+"=redacted&")}}}else pt=null;else pt=$;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+m+`
`+v+`
`+pt})}function Ga(u,m,v,A,q,$,pt){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+m+`
`+v+`
`+$+" "+pt})}function Ti(u,m,v,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Xn(u,v)+(A?" "+A:"")})}function kc(u,m){u.info(function(){return"TIMEOUT: "+m})}Xi.prototype.info=function(){};function Xn(u,m){if(!u.g)return m;if(!m)return null;try{const $=JSON.parse(m);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var v=$[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let pt=1;pt<A.length;pt++)A[pt]=""}}}}return En($)}catch{return m}}var ye={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ze={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bi;function qs(){}C(qs,vo),qs.prototype.g=function(){return new XMLHttpRequest},bi=new qs;function Hs(u){return encodeURIComponent(String(u))}function Lc(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function Un(u,m,v,A){this.j=u,this.i=m,this.l=v,this.S=A||1,this.V=new Bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $i}function $i(){this.i=null,this.g="",this.h=!1}var kr={},$n={};function Zn(u,m,v){u.M=1,u.A=Ai(he(m)),u.u=v,u.R=!0,Zi(u,null)}function Zi(u,m){u.F=Date.now(),Fs(u),u.B=he(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),xo(v.i,"t",A),u.C=0,v=u.j.L,u.h=new $i,u.g=Kr(u.j,v?m:null,!u.u),u.P>0&&(u.O=new Pc(_(u.Y,u,u.g),u.P)),m=u.V,v=u.g,A=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Fi[0]=q.toString()),q=Fi);for(let $=0;$<q.length;$++){const pt=bt(v,q[$],A||m.handleEvent,!1,m.h||m);if(!pt)break;m.g[pt.key]=pt}m=u.J?U(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Yi(),Fa(u.i,u.v,u.B,u.l,u.S,u.u)}Un.prototype.ba=function(u){u=u.target;const m=this.O;m&&Xe(u)==3?m.j():this.Y(u)},Un.prototype.Y=function(u){try{if(u==this.g)t:{const Mt=Xe(this.g),le=this.g.ya(),Zt=this.g.ca();if(!(Mt<3)&&(Mt!=3||this.g&&(this.h.h||this.g.la()||er(this.g)))){this.K||Mt!=4||le==7||(le==8||Zt<=0?Yi(3):Yi(2)),Wn(this);var m=this.g.ca();this.X=m;var v=Ji(this);if(this.o=m==200,Ga(this.i,this.v,this.B,this.l,this.S,Mt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(A)){var $=A;break e}}$=null}if(u=$)Ti(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lr(this,u);else{this.o=!1,this.m=3,ge(12),ti(this),Gs(this);break t}}if(this.R){u=!0;let ve;for(;!this.K&&this.C<v.length;)if(ve=bo(this,v),ve==$n){Mt==4&&(this.m=4,ge(14),u=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(ve==kr){this.m=4,ge(15),Ti(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Ti(this.i,this.l,ve,null),Lr(this,ve);if(_e(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||v.length!=0||this.h.h||(this.m=1,ge(16),u=!1),this.o=this.o&&u,!u)Ti(this.i,this.l,v,"[Invalid Chunked Response]"),ti(this),Gs(this);else if(v.length>0&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.aa&&!pt.P&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),el(pt),pt.P=!0,ge(11))}}else Ti(this.i,this.l,v,null),Lr(this,v);Mt==4&&ti(this),this.o&&!this.K&&(Mt==4?nl(this.j,this):(this.o=!1,Fs(this)))}else nr(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,ge(12)):(this.m=0,ge(13)),ti(this),Gs(this)}}}catch{}finally{}};function Ji(u){if(!_e(u))return u.g.la();const m=er(u.g);if(m==="")return"";let v="";const A=m.length,q=Xe(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ti(u),Gs(u),"";u.h.i=new d.TextDecoder}for(let $=0;$<A;$++)u.h.h=!0,v+=u.h.i.decode(m[$],{stream:!(q&&$==A-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function _e(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function bo(u,m){var v=u.C,A=m.indexOf(`
`,v);return A==-1?$n:(v=Number(m.substring(v,A)),isNaN(v)?kr:(A+=1,A+v>m.length?$n:(m=m.slice(A,A+v),u.C=A+v,m)))}Un.prototype.cancel=function(){this.K=!0,ti(this)};function Fs(u){u.T=Date.now()+u.H,Jn(u,u.H)}function Jn(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ki(_(u.aa,u),m)}function Wn(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Un.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kc(this.i,this.B),this.M!=2&&(Yi(),ge(17)),ti(this),this.m=2,Gs(this)):Jn(this,this.T-u)};function Gs(u){u.j.I==0||u.K||nl(u.j,u)}function ti(u){Wn(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ke(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Lr(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||Ks(v.h,u))){if(!u.L&&Ks(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Yr(v),ei(v);else break t;tl(v),ge(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ki(_(v.Va,v),6e3));bn(v.h)<=1&&v.ta&&(v.ta=void 0)}else wi(v,11)}else if((u.L||v.g==u)&&Yr(v),!w(m))for(q=v.Ba.g.parse(m),m=0;m<q.length;m++){let Zt=q[m];const ve=Zt[0];if(!(ve<=v.K))if(v.K=ve,Zt=Zt[1],v.I==2)if(Zt[0]=="c"){v.M=Zt[1],v.ba=Zt[2];const fn=Zt[3];fn!=null&&(v.ka=fn,v.j.info("VER="+v.ka));const ni=Zt[4];ni!=null&&(v.za=ni,v.j.info("SVER="+v.za));const zn=Zt[5];zn!=null&&typeof zn=="number"&&zn>0&&(A=1.5*zn,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Bn=u.g;if(Bn){const qn=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qn){var $=A.h;$.g||qn.indexOf("spdy")==-1&&qn.indexOf("quic")==-1&&qn.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(zr($,$.h),$.h=null))}if(A.G){const sl=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(A.wa=sl,te(A.J,A.G,sl))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var pt=u;if(A.na=Oo(A,A.L?A.ba:null,A.W),pt.L){Si(A.h,pt);var Mt=pt,le=A.O;le&&(Mt.H=le),Mt.D&&(Wn(Mt),Fs(Mt)),A.g=pt}else No(A);v.i.length>0&&ar(v)}else Zt[0]!="stop"&&Zt[0]!="close"||wi(v,7);else v.I==3&&(Zt[0]=="stop"||Zt[0]=="close"?Zt[0]=="stop"?wi(v,7):sr(v):Zt[0]!="noop"&&v.l&&v.l.qa(Zt),v.A=0)}}Yi(4)}catch{}}var zc=class{constructor(u,m){this.g=u,this.map=m}};function Qs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ys(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bn(u){return u.h?1:u.g?u.g.size:0}function Ks(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function zr(u,m){u.g?u.g.add(m):u.h=m}function Si(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Qs.prototype.cancel=function(){if(this.i=Br(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Br(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return L(u.i)}var qr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bc(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let q,$=null;A>=0?(q=u[v].substring(0,A),$=u[v].substring(A+1)):q=u[v],m(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function kn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof kn?(this.l=u.l,Wi(this,u.j),this.o=u.o,this.g=u.g,Xs(this,u.u),this.h=u.h,ts(this,Ro(u.i)),this.m=u.m):u&&(m=String(u).match(qr))?(this.l=!1,Wi(this,m[1]||"",!0),this.o=$s(m[2]||""),this.g=$s(m[3]||"",!0),Xs(this,m[4]),this.h=$s(m[5]||"",!0),ts(this,m[6]||"",!0),this.m=$s(m[7]||"")):(this.l=!1,this.i=new Sn(null,this.l))}kn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(je(m,Ya,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(je(m,Ya,!0),"@"),u.push(Hs(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(je(v,v.charAt(0)=="/"?es:Ka,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",je(v,Ao)),u.join("")},kn.prototype.resolve=function(u){const m=he(this);let v=!!u.j;v?Wi(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var A=u.h;if(v)Xs(m,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=m.h.lastIndexOf("/");q!=-1&&(A=m.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let pt=0;pt<q.length;){const Mt=q[pt++];Mt=="."?A&&pt==q.length&&$.push(""):Mt==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&pt==q.length&&$.push("")):($.push(Mt),A=!0)}A=$.join("/")}else A=q}return v?m.h=A:v=u.i.toString()!=="",v?ts(m,Ro(u.i)):v=!!u.m,v&&(m.m=u.m),m};function he(u){return new kn(u)}function Wi(u,m,v){u.j=v?$s(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Xs(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ts(u,m,v){m instanceof Sn?(u.i=m,Za(u.i,u.l)):(v||(m=je(m,So)),u.i=new Sn(m,u.l))}function te(u,m,v){u.i.set(m,v)}function Ai(u){return te(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function $s(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function je(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Qa),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Qa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ya=/[#\/\?@]/g,Ka=/[#\?:]/g,es=/[#\?]/g,So=/[#\?@]/g,Ao=/#/g;function Sn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function xi(u){u.g||(u.g=new Map,u.h=0,u.i&&Bc(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Sn.prototype,r.add=function(u,m){xi(this),this.i=null,u=Ln(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Xa(u,m){xi(u),m=Ln(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function $a(u,m){return xi(u),m=Ln(u,m),u.g.has(m)}r.forEach=function(u,m){xi(this),this.g.forEach(function(v,A){v.forEach(function(q){u.call(m,q,A,this)},this)},this)};function Hr(u,m){xi(u);let v=[];if(typeof m=="string")$a(u,m)&&(v=v.concat(u.g.get(Ln(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}r.set=function(u,m){return xi(this),this.i=null,u=Ln(this,u),$a(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=Hr(this,u),u.length>0?String(u[0]):m):m};function xo(u,m,v){Xa(u,m),v.length>0&&(u.i=null,u.g.set(Ln(u,m),L(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var v=m[A];const q=Hs(v);v=Hr(this,v);for(let $=0;$<v.length;$++){let pt=q;v[$]!==""&&(pt+="="+Hs(v[$])),u.push(pt)}}return this.i=u.join("&")};function Ro(u){const m=new Sn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Ln(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Za(u,m){m&&!u.j&&(xi(u),u.i=null,u.g.forEach(function(v,A){const q=A.toLowerCase();A!=q&&(Xa(this,A),xo(this,q,v))},u)),u.j=m}function Ja(u,m){const v=new Xi;if(d.Image){const A=new Image;A.onload=b(sn,v,"TestLoadImage: loaded",!0,m,A),A.onerror=b(sn,v,"TestLoadImage: error",!1,m,A),A.onabort=b(sn,v,"TestLoadImage: abort",!1,m,A),A.ontimeout=b(sn,v,"TestLoadImage: timeout",!1,m,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function ns(u,m){const v=new Xi,A=new AbortController,q=setTimeout(()=>{A.abort(),sn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then($=>{clearTimeout(q),$.ok?sn(v,"TestPingServer: ok",!0,m):sn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(q),sn(v,"TestPingServer: error",!1,m)})}function sn(u,m,v,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(v)}catch{}}function wo(){this.g=new Uc}function Zs(u){this.i=u.Sb||null,this.h=u.ab||!1}C(Zs,vo),Zs.prototype.g=function(){return new Js(this.i,this.h)};function Js(u,m){we.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(Js,we),r=Js.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ri(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rn(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;is(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function is(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?rn(this):Ri(this),this.readyState==3&&is(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,rn(this))},r.Na=function(u){this.g&&(this.response=u,rn(this))},r.ga=function(){this.g&&rn(this)};function rn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ri(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ss(u){let m="";return Z(u,function(v,A){m+=A,m+=":",m+=v,m+=`\r
`}),m}function An(u,m,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=ss(v),typeof u=="string"?v!=null&&Hs(v):te(u,m,v))}function re(u){we.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(re,we);var Fr=/^https?$/i,Co=["POST","PUT"];r=re.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bi.g(),this.g.onreadystatechange=I(_(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){Ws(this,$);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)v.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())v.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),q=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Co,m,void 0)>=0)||A||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,pt]of v)this.g.setRequestHeader($,pt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){Ws(this,$)}};function Ws(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,tr(u),Ce(u)}function tr(u){u.A||(u.A=!0,Oe(u,"complete"),Oe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Oe(this,"complete"),Oe(this,"abort"),Ce(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ce(this,!0)),re.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Wa(this):this.Xa())},r.Xa=function(){Wa(this)};function Wa(u){if(u.h&&typeof h<"u"){if(u.v&&Xe(u)==4)setTimeout(u.Ca.bind(u),0);else if(Oe(u,"readystatechange"),Xe(u)==4){u.h=!1;try{const $=u.ca();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var v;if(!(v=m)){var A;if(A=$===0){let pt=String(u.D).match(qr)[1]||null;!pt&&d.self&&d.self.location&&(pt=d.self.location.protocol.slice(0,-1)),A=!Fr.test(pt?pt.toLowerCase():"")}v=A}if(v)Oe(u,"complete"),Oe(u,"success");else{u.o=6;try{var q=Xe(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",tr(u)}}finally{Ce(u)}}}}function Ce(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||Oe(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Xe(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Xe(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),nn(m)}};function er(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function nr(u){const m={};u=(u.g&&Xe(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(w(u[A]))continue;var v=Lc(u[A]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=m[q]||[];m[q]=$,$.push(v)}x(m,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ir(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Gr(u){this.za=0,this.i=[],this.j=new Xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ir("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ir("baseRetryDelayMs",5e3,u),this.Za=ir("retryDelaySeedMs",1e4,u),this.Ta=ir("forwardChannelMaxRetries",2,u),this.va=ir("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Qs(u&&u.concurrentRequestLimit),this.Ba=new wo,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Gr.prototype,r.ka=8,r.I=1,r.connect=function(u,m,v,A){ge(0),this.W=u,this.H=m||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Oo(this,null,this.W),ar(this)};function sr(u){if(rr(u),u.I==3){var m=u.V++,v=he(u.J);if(te(v,"SID",u.M),te(v,"RID",m),te(v,"TYPE","terminate"),lr(u,v),m=new Un(u,u.j,m),m.M=2,m.A=Ai(he(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=Kr(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Fs(m)}Vo(u)}function ei(u){u.g&&(el(u),u.g.cancel(),u.g=null)}function rr(u){ei(u),u.v&&(d.clearTimeout(u.v),u.v=null),Yr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ar(u){if(!Ys(u.h)&&!u.m){u.m=!0;var m=u.Ea;ct||S(),it||(ct(),it=!0),N.add(m,u),u.D=0}}function qc(u,m){return bn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ki(_(u.Ea,u,m),Mo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new Un(this,this.j,u);let $=this.o;if(this.U&&($?($=U($),Q($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)t:{for(var m=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=v;break t}if(m===4096||v===this.i.length-1){m=v+1;break t}}m=1e3}else m=1e3;m=Qr(this,q,m),v=he(this.J),te(v,"RID",u),te(v,"CVER",22),this.G&&te(v,"X-HTTP-Session-Id",this.G),lr(this,v),$&&(this.R?m="headers="+Hs(ss($))+"&"+m:this.u&&An(v,this.u,$)),zr(this.h,q),this.Ra&&te(v,"TYPE","init"),this.S?(te(v,"$req",m),te(v,"SID","null"),q.U=!0,Zn(q,v,null)):Zn(q,v,m),this.I=2}}else this.I==3&&(u?Do(this,u):this.i.length==0||Ys(this.h)||Do(this))};function Do(u,m){var v;m?v=m.l:v=u.V++;const A=he(u.J);te(A,"SID",u.M),te(A,"RID",v),te(A,"AID",u.K),lr(u,A),u.u&&u.o&&An(A,u.u,u.o),v=new Un(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Qr(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),zr(u.h,v),Zn(v,A,m)}function lr(u,m){u.H&&Z(u.H,function(v,A){te(m,A,v)}),u.l&&Z({},function(v,A){te(m,A,v)})}function Qr(u,m,v){v=Math.min(u.i.length,v);const A=u.l?_(u.l.Ka,u.l,u):null;t:{var q=u.i;let Mt=-1;for(;;){const le=["count="+v];Mt==-1?v>0?(Mt=q[0].g,le.push("ofs="+Mt)):Mt=0:le.push("ofs="+Mt);let Zt=!0;for(let ve=0;ve<v;ve++){var $=q[ve].g;const fn=q[ve].map;if($-=Mt,$<0)Mt=Math.max(0,q[ve].g-100),Zt=!1;else try{$="req"+$+"_"||"";try{var pt=fn instanceof Map?fn:Object.entries(fn);for(const[ni,zn]of pt){let Bn=zn;g(zn)&&(Bn=En(zn)),le.push($+ni+"="+encodeURIComponent(Bn))}}catch(ni){throw le.push($+"type="+encodeURIComponent("_badmap")),ni}}catch{A&&A(fn)}}if(Zt){pt=le.join("&");break t}}pt=void 0}return u=u.i.splice(0,v),m.G=u,pt}function No(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ct||S(),it||(ct(),it=!0),N.add(m,u),u.A=0}}function tl(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ki(_(u.Da,u),Mo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ki(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ge(10),ei(this),Io(this))};function el(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Io(u){u.g=new Un(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=he(u.na);te(m,"RID","rpc"),te(m,"SID",u.M),te(m,"AID",u.K),te(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&te(m,"TO",u.ia),te(m,"TYPE","xmlhttp"),lr(u,m),u.u&&u.o&&An(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Ai(he(m)),v.u=null,v.R=!0,Zi(v,u)}r.Va=function(){this.C!=null&&(this.C=null,ei(this),tl(this),ge(19))};function Yr(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function nl(u,m){var v=null;if(u.g==m){Yr(u),el(u),u.g=null;var A=2}else if(Ks(u.h,m))v=m.G,Si(u.h,m),A=1;else return;if(u.I!=0){if(m.o)if(A==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var q=u.D;A=Pr(),Oe(A,new To(A,v)),ar(u)}else No(u);else if(q=m.m,q==3||q==0&&m.X>0||!(A==1&&qc(u,m)||A==2&&tl(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),q){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Mo(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var v=_(u.bb,u),A=u.Ua;const q=!A;A=new kn(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Wi(A,"https"),Ai(A),q?Ja(A.toString(),v):ns(A.toString(),v)}else ge(2);u.I=0,u.l&&u.l.pa(m),Vo(u),rr(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function Vo(u){if(u.I=0,u.ja=[],u.l){const m=Br(u.h);(m.length!=0||u.i.length!=0)&&(z(u.ja,m),z(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Oo(u,m,v){var A=v instanceof kn?he(v):new kn(v);if(A.g!="")m&&(A.g=m+"."+A.g),Xs(A,A.u);else{var q=d.location;A=q.protocol,m=m?m+"."+q.hostname:q.hostname,q=+q.port;const $=new kn(null);A&&Wi($,A),m&&($.g=m),q&&Xs($,q),v&&($.h=v),A=$}return v=u.G,m=u.wa,v&&m&&te(A,v,m),te(A,"VER",u.ka),lr(u,A),A}function Kr(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new re(new Zs({ab:v})):new re(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function jo(){}r=jo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xr(){}Xr.prototype.g=function(u,m){return new an(u,m)};function an(u,m){we.call(this),this.g=new Gr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!w(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new rs(this)}C(an,we),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){sr(this.g)},an.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=En(u),u=v);m.i.push(new zc(m.Ya++,u)),m.I==3&&ar(m)},an.prototype.N=function(){this.g.l=null,delete this.j,sr(this.g),delete this.g,an.Z.N.call(this)};function il(u){Gi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const v in m){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}C(il,Gi);function Po(){Pn.call(this),this.status=1}C(Po,Pn);function rs(u){this.g=u}C(rs,jo),rs.prototype.ra=function(){Oe(this.g,"a")},rs.prototype.qa=function(u){Oe(this.g,new il(u))},rs.prototype.pa=function(u){Oe(this.g,new Po)},rs.prototype.oa=function(){Oe(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,lv=function(){return new Xr},av=function(){return Pr()},rv=Tn,ed={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,Hu=ye,ze.COMPLETE="complete",sv=ze,Eo.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",we.prototype.listen=we.prototype.J,Kl=Eo,re.prototype.listenOnce=re.prototype.K,re.prototype.getLastError=re.prototype.Ha,re.prototype.getLastErrorCode=re.prototype.ya,re.prototype.getStatus=re.prototype.ca,re.prototype.getResponseJson=re.prototype.La,re.prototype.getResponseText=re.prototype.la,re.prototype.send=re.prototype.ea,re.prototype.setWithCredentials=re.prototype.Fa,iv=re}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const Oy="@firebase/firestore",jy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Q_("@firebase/firestore");function Aa(){return Dr.logLevel}function yt(r,...e){if(Dr.logLevel<=Qt.DEBUG){const i=e.map(Td);Dr.debug(`Firestore (${ka}): ${r}`,...i)}}function qi(r,...e){if(Dr.logLevel<=Qt.ERROR){const i=e.map(Td);Dr.error(`Firestore (${ka}): ${r}`,...i)}}function Ma(r,...e){if(Dr.logLevel<=Qt.WARN){const i=e.map(Td);Dr.warn(`Firestore (${ka}): ${r}`,...i)}}function Td(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(r,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,ov(r,a,i)}function ov(r,e,i){let a=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw qi(a),new Error(a)}function $t(r,e,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,r||ov(e,o,a)}function Vt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends Ir{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(We.UNAUTHENTICATED)))}shutdown(){}}class Ab{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class xb{constructor(e){this.t=e,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){$t(this.o===void 0,42304);let a=this.i;const o=y=>this.i!==a?(a=this.i,i(y)):Promise.resolve();let h=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new xr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=h;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new xr)}}),0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?($t(typeof a.accessToken=="string",31837,{l:a}),new uv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $t(e===null||typeof e=="string",2055,{h:e}),new We(e)}}class Rb{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=We.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wb{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new Rb(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(We.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Py{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cb{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){$t(this.o===void 0,3512);const a=h=>{h.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,yt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>a(h)))};const o=h=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>o(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Py(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?($t(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Py(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=Db(40);for(let h=0;h<o.length;++h)a.length<20&&o[h]<i&&(a+=e.charAt(o[h]%62))}return a}}function qt(r,e){return r<e?-1:r>e?1:0}function nd(r,e){const i=Math.min(r.length,e.length);for(let a=0;a<i;a++){const o=r.charAt(a),h=e.charAt(a);if(o!==h)return Ff(o)===Ff(h)?qt(o,h):Ff(o)?1:-1}return qt(r.length,e.length)}const Nb=55296,Ib=57343;function Ff(r){const e=r.charCodeAt(0);return e>=Nb&&e<=Ib}function Va(r,e,i){return r.length===e.length&&r.every(((a,o)=>i(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="__name__";class oi{constructor(e,i,a){i===void 0?i=0:i>e.length&&Ct(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&Ct(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const h=oi.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return qt(e.length,i.length)}static compareSegments(e,i){const a=oi.isNumericId(e),o=oi.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?oi.extractNumericId(e).compare(oi.extractNumericId(i)):nd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class oe extends oi{construct(e,i,a){return new oe(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new St(ft.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((o=>o.length>0)))}return new oe(i)}static emptyPath(){return new oe([])}}const Mb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends oi{construct(e,i,a){return new Ge(e,i,a)}static isValidIdentifier(e){return Mb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Uy}static keyField(){return new Ge([Uy])}static fromServerFormat(e){const i=[];let a="",o=0;const h=()=>{if(a.length===0)throw new St(ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new St(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new St(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=y,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(h(),o++)}if(h(),d)throw new St(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(i)}static emptyPath(){return new Ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.path=e}static fromPath(e){return new xt(oe.fromString(e))}static fromName(e){return new xt(oe.fromString(e).popFirst(5))}static empty(){return new xt(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return oe.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xt(new oe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(r,e,i){if(!i)throw new St(ft.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Vb(r,e,i,a){if(e===!0&&a===!0)throw new St(ft.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function ky(r){if(!xt.isDocumentKey(r))throw new St(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ly(r){if(xt.isDocumentKey(r))throw new St(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function hv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Sd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ct(12329,{type:typeof r})}function Rr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new St(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Sd(r);throw new St(ft.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r,e){const i={typeString:r};return e&&(i.value=e),i}function fo(r,e){if(!hv(r))throw new St(ft.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const o=e[a].typeString,h="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const d=r[a];if(o&&typeof d!==o){i=`JSON field '${a}' must be a ${o}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${a}' field to equal '${h.value}'`;break}}if(i)throw new St(ft.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=-62135596800,By=1e6;class ue{static now(){return ue.fromMillis(Date.now())}static fromDate(e){return ue.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*By);return new ue(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new St(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new St(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<zy)throw new St(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/By}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fo(e,ue._jsonSchema))return new ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ue._jsonSchemaVersion="firestore/timestamp/1.0",ue._jsonSchema={type:Re("string",ue._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{static fromTimestamp(e){return new It(e)}static min(){return new It(new ue(0,0))}static max(){return new It(new ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;function Ob(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=It.fromTimestamp(a===1e9?new ue(i+1,0):new ue(i,a));return new Vs(o,xt.empty(),e)}function jb(r){return new Vs(r.readTime,r.key,ro)}class Vs{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new Vs(It.min(),xt.empty(),ro)}static max(){return new Vs(It.max(),xt.empty(),ro)}}function Pb(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=xt.comparator(r.documentKey,e.documentKey),i!==0?i:qt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(r){if(r.code!==ft.FAILED_PRECONDITION||r.message!==Ub)throw r;yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new lt(((a,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,o)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof lt?i:lt.resolve(i)}catch(i){return lt.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):lt.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):lt.reject(i)}static resolve(e){return new lt(((i,a)=>{i(e)}))}static reject(e){return new lt(((i,a)=>{a(e)}))}static waitFor(e){return new lt(((i,a)=>{let o=0,h=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++h,d&&h===o&&i()}),(y=>a(y)))})),d=!0,h===o&&i()}))}static or(e){let i=lt.resolve(!1);for(const a of e)i=i.next((o=>o?lt.resolve(o):a()));return i}static forEach(e,i){const a=[];return e.forEach(((o,h)=>{a.push(i.call(this,o,h))})),this.waitFor(a)}static mapArray(e,i){return new lt(((a,o)=>{const h=e.length,d=new Array(h);let g=0;for(let y=0;y<h;y++){const _=y;i(e[_]).next((b=>{d[_]=b,++g,g===h&&a(d)}),(b=>o(b)))}}))}static doWhile(e,i){return new lt(((a,o)=>{const h=()=>{e()===!0?i().next((()=>{h()}),o):a()};h()}))}}function Lb(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function za(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=-1;function pc(r){return r==null}function Wu(r){return r===0&&1/r==-1/0}function zb(r){return typeof r=="number"&&Number.isInteger(r)&&!Wu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="";function Bb(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=qy(e)),e=qb(r.get(i),e);return qy(e)}function qb(r,e){let i=e;const a=r.length;for(let o=0;o<a;o++){const h=r.charAt(o);switch(h){case"\0":i+="";break;case fv:i+="";break;default:i+=h}}return i}function qy(r){return r+fv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function Mr(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function dv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e,i){this.comparator=e,this.root=i||Fe.EMPTY}insert(e,i){return new de(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(e){return new de(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fe{constructor(e,i,a,o,h){this.key=e,this.value=i,this.color=a??Fe.RED,this.left=o??Fe.EMPTY,this.right=h??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,h){return new Fe(e??this.key,i??this.value,a??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const h=a(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,a),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return Fe.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ct(27949);return e+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(e,i,a,o,h){return this}insert(e,i,a){return new Fe(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new de(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Ve(this.comparator);return i.data=e,i}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new Qn([])}unionWith(e){let i=new Ve(Ge.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new Qn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new mv("Invalid base64 string: "+h):h}})(e);return new Qe(i)}static fromUint8Array(e){const i=(function(o){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);return h})(e);return new Qe(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const Hb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(r){if($t(!!r,39018),typeof r=="string"){let e=0;const i=Hb.exec(r);if($t(!!i,46558,{timestamp:r}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:be(r.seconds),nanos:be(r.nanos)}}function be(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function js(r){return typeof r=="string"?Qe.fromBase64String(r):Qe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="server_timestamp",gv="__type__",yv="__previous_value__",_v="__local_write_time__";function xd(r){return(r?.mapValue?.fields||{})[gv]?.stringValue===pv}function gc(r){const e=r.mapValue.fields[yv];return xd(e)?gc(e):e}function ao(r){const e=Os(r.mapValue.fields[_v].timestampValue);return new ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,i,a,o,h,d,g,y,_,b){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=b}}const tc="(default)";class lo{constructor(e,i){this.projectId=e,this.database=i||tc}static empty(){return new lo("","")}get isDefaultDatabase(){return this.database===tc}isEqual(e){return e instanceof lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="__type__",Gb="__max__",Lu={mapValue:{}},Ev="__vector__",ec="value";function Ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?xd(r)?4:Yb(r)?9007199254740991:Qb(r)?10:11:Ct(28295,{value:r})}function pi(r,e){if(r===e)return!0;const i=Ps(r);if(i!==Ps(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ao(r).isEqual(ao(e));case 3:return(function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const d=Os(o.timestampValue),g=Os(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,h){return js(o.bytesValue).isEqual(js(h.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,h){return be(o.geoPointValue.latitude)===be(h.geoPointValue.latitude)&&be(o.geoPointValue.longitude)===be(h.geoPointValue.longitude)})(r,e);case 2:return(function(o,h){if("integerValue"in o&&"integerValue"in h)return be(o.integerValue)===be(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const d=be(o.doubleValue),g=be(h.doubleValue);return d===g?Wu(d)===Wu(g):isNaN(d)&&isNaN(g)}return!1})(r,e);case 9:return Va(r.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return(function(o,h){const d=o.mapValue.fields||{},g=h.mapValue.fields||{};if(Hy(d)!==Hy(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!pi(d[y],g[y])))return!1;return!0})(r,e);default:return Ct(52216,{left:r})}}function oo(r,e){return(r.values||[]).find((i=>pi(i,e)))!==void 0}function Oa(r,e){if(r===e)return 0;const i=Ps(r),a=Ps(e);if(i!==a)return qt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return qt(r.booleanValue,e.booleanValue);case 2:return(function(h,d){const g=be(h.integerValue||h.doubleValue),y=be(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(r,e);case 3:return Gy(r.timestampValue,e.timestampValue);case 4:return Gy(ao(r),ao(e));case 5:return nd(r.stringValue,e.stringValue);case 6:return(function(h,d){const g=js(h),y=js(d);return g.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(h,d){const g=h.split("/"),y=d.split("/");for(let _=0;_<g.length&&_<y.length;_++){const b=qt(g[_],y[_]);if(b!==0)return b}return qt(g.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(h,d){const g=qt(be(h.latitude),be(d.latitude));return g!==0?g:qt(be(h.longitude),be(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Qy(r.arrayValue,e.arrayValue);case 10:return(function(h,d){const g=h.fields||{},y=d.fields||{},_=g[ec]?.arrayValue,b=y[ec]?.arrayValue,C=qt(_?.values?.length||0,b?.values?.length||0);return C!==0?C:Qy(_,b)})(r.mapValue,e.mapValue);case 11:return(function(h,d){if(h===Lu.mapValue&&d===Lu.mapValue)return 0;if(h===Lu.mapValue)return 1;if(d===Lu.mapValue)return-1;const g=h.fields||{},y=Object.keys(g),_=d.fields||{},b=Object.keys(_);y.sort(),b.sort();for(let C=0;C<y.length&&C<b.length;++C){const I=nd(y[C],b[C]);if(I!==0)return I;const L=Oa(g[y[C]],_[b[C]]);if(L!==0)return L}return qt(y.length,b.length)})(r.mapValue,e.mapValue);default:throw Ct(23264,{he:i})}}function Gy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qt(r,e);const i=Os(r),a=Os(e),o=qt(i.seconds,a.seconds);return o!==0?o:qt(i.nanos,a.nanos)}function Qy(r,e){const i=r.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const h=Oa(i[o],a[o]);if(h)return h}return qt(i.length,a.length)}function ja(r){return id(r)}function id(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const a=Os(i);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return js(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return xt.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let a="[",o=!0;for(const h of i.values||[])o?o=!1:a+=",",a+=id(h);return a+"]"})(r.arrayValue):"mapValue"in r?(function(i){const a=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const d of a)h?h=!1:o+=",",o+=`${d}:${id(i.fields[d])}`;return o+"}"})(r.mapValue):Ct(61005,{value:r})}function Fu(r){switch(Ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gc(r);return e?16+Fu(e):16;case 5:return 2*r.stringValue.length;case 6:return js(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,h)=>o+Fu(h)),0)})(r.arrayValue);case 10:case 11:return(function(a){let o=0;return Mr(a.fields,((h,d)=>{o+=h.length+Fu(d)})),o})(r.mapValue);default:throw Ct(13486,{value:r})}}function sd(r){return!!r&&"integerValue"in r}function Rd(r){return!!r&&"arrayValue"in r}function Yy(r){return!!r&&"nullValue"in r}function Ky(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Gu(r){return!!r&&"mapValue"in r}function Qb(r){return(r?.mapValue?.fields||{})[vv]?.stringValue===Ev}function Wl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Mr(r.mapValue.fields,((i,a)=>e.mapValue.fields[i]=Wl(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Wl(r.arrayValue.values[i]);return e}return{...r}}function Yb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Gb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Gu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(i)}setAll(e){let i=Ge.emptyPath(),a={},o=[];e.forEach(((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,a,o),a={},o=[],i=g.popLast()}d?a[g.lastSegment()]=Wl(d):o.push(g.lastSegment())}));const h=this.getFieldsMap(i);this.applyChanges(h,a,o)}delete(e){const i=this.field(e.popLast());Gu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Gu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){Mr(i,((o,h)=>e[o]=h));for(const o of a)delete e[o]}clone(){return new Vn(Wl(this.value))}}function Tv(r){const e=[];return Mr(r.fields,((i,a)=>{const o=new Ge([i]);if(Gu(a)){const h=Tv(a.mapValue).fields;if(h.length===0)e.push(o);else for(const d of h)e.push(o.child(d))}else e.push(o)})),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,i,a,o,h,d,g){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(e){return new tn(e,0,It.min(),It.min(),It.min(),Vn.empty(),0)}static newFoundDocument(e,i,a,o){return new tn(e,1,i,It.min(),a,o,0)}static newNoDocument(e,i){return new tn(e,2,i,It.min(),It.min(),Vn.empty(),0)}static newUnknownDocument(e,i){return new tn(e,3,i,It.min(),It.min(),Vn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,i){this.position=e,this.inclusive=i}}function Xy(r,e,i){let a=0;for(let o=0;o<r.position.length;o++){const h=e[o],d=r.position[o];if(h.field.isKeyField()?a=xt.comparator(xt.fromName(d.referenceValue),i.key):a=Oa(d,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function $y(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!pi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,i="asc"){this.field=e,this.dir=i}}function Kb(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{}class Ie extends bv{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new $b(e,i,a):i==="array-contains"?new Wb(e,a):i==="in"?new tS(e,a):i==="not-in"?new eS(e,a):i==="array-contains-any"?new nS(e,a):new Ie(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new Zb(e,a):new Jb(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Oa(i,this.value)):i!==null&&Ps(this.value)===Ps(i)&&this.matchesComparison(Oa(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends bv{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new gi(e,i)}matches(e){return Sv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sv(r){return r.op==="and"}function Av(r){return Xb(r)&&Sv(r)}function Xb(r){for(const e of r.filters)if(e instanceof gi)return!1;return!0}function rd(r){if(r instanceof Ie)return r.field.canonicalString()+r.op.toString()+ja(r.value);if(Av(r))return r.filters.map((e=>rd(e))).join(",");{const e=r.filters.map((i=>rd(i))).join(",");return`${r.op}(${e})`}}function xv(r,e){return r instanceof Ie?(function(a,o){return o instanceof Ie&&a.op===o.op&&a.field.isEqual(o.field)&&pi(a.value,o.value)})(r,e):r instanceof gi?(function(a,o){return o instanceof gi&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((h,d,g)=>h&&xv(d,o.filters[g])),!0):!1})(r,e):void Ct(19439)}function Rv(r){return r instanceof Ie?(function(i){return`${i.field.canonicalString()} ${i.op} ${ja(i.value)}`})(r):r instanceof gi?(function(i){return i.op.toString()+" {"+i.getFilters().map(Rv).join(" ,")+"}"})(r):"Filter"}class $b extends Ie{constructor(e,i,a){super(e,i,a),this.key=xt.fromName(a.referenceValue)}matches(e){const i=xt.comparator(e.key,this.key);return this.matchesComparison(i)}}class Zb extends Ie{constructor(e,i){super(e,"in",i),this.keys=wv("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class Jb extends Ie{constructor(e,i){super(e,"not-in",i),this.keys=wv("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function wv(r,e){return(e.arrayValue?.values||[]).map((i=>xt.fromName(i.referenceValue)))}class Wb extends Ie{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Rd(i)&&oo(i.arrayValue,this.value)}}class tS extends Ie{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&oo(this.value.arrayValue,i)}}class eS extends Ie{constructor(e,i){super(e,"not-in",i)}matches(e){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!oo(this.value.arrayValue,i)}}class nS extends Ie{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Rd(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>oo(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,i=null,a=[],o=[],h=null,d=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=h,this.startAt=d,this.endAt=g,this.Te=null}}function Zy(r,e=null,i=[],a=[],o=null,h=null,d=null){return new iS(r,e,i,a,o,h,d)}function wd(r){const e=Vt(r);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>rd(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(h){return h.field.canonicalString()+h.dir})(a))).join(","),pc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>ja(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>ja(a))).join(",")),e.Te=i}return e.Te}function Cd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Kb(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!xv(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!$y(r.startAt,e.startAt)&&$y(r.endAt,e.endAt)}function ad(r){return xt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,i=null,a=[],o=[],h=null,d="F",g=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sS(r,e,i,a,o,h,d,g){return new yc(r,e,i,a,o,h,d,g)}function Dd(r){return new yc(r)}function Jy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function rS(r){return r.collectionGroup!==null}function to(r){const e=Vt(r);if(e.Ie===null){e.Ie=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ve(Ge.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new ic(h,a))})),i.has(Ge.keyField().canonicalString())||e.Ie.push(new ic(Ge.keyField(),a))}return e.Ie}function ci(r){const e=Vt(r);return e.Ee||(e.Ee=aS(e,to(r))),e.Ee}function aS(r,e){if(r.limitType==="F")return Zy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const h=o.dir==="desc"?"asc":"desc";return new ic(o.field,h)}));const i=r.endAt?new nc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new nc(r.startAt.position,r.startAt.inclusive):null;return Zy(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function ld(r,e,i){return new yc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function _c(r,e){return Cd(ci(r),ci(e))&&r.limitType===e.limitType}function Cv(r){return`${wd(ci(r))}|lt:${r.limitType}`}function xa(r){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((o=>Rv(o))).join(", ")}]`),pc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((o=>ja(o))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((o=>ja(o))).join(",")),`Target(${a})`})(ci(r))}; limitType=${r.limitType})`}function vc(r,e){return e.isFoundDocument()&&(function(a,o){const h=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):xt.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)})(r,e)&&(function(a,o){for(const h of to(a))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0})(r,e)&&(function(a,o){for(const h of a.filters)if(!h.matches(o))return!1;return!0})(r,e)&&(function(a,o){return!(a.startAt&&!(function(d,g,y){const _=Xy(d,g,y);return d.inclusive?_<=0:_<0})(a.startAt,to(a),o)||a.endAt&&!(function(d,g,y){const _=Xy(d,g,y);return d.inclusive?_>=0:_>0})(a.endAt,to(a),o))})(r,e)}function lS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Dv(r){return(e,i)=>{let a=!1;for(const o of to(r)){const h=oS(o,e,i);if(h!==0)return h;a=a||o.field.isKeyField()}return 0}}function oS(r,e,i){const a=r.field.isKeyField()?xt.comparator(e.key,i.key):(function(h,d,g){const y=d.data.field(h),_=g.data.field(h);return y!==null&&_!==null?Oa(y,_):Ct(42886)})(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Ct(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,h]of a)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,((i,a)=>{for(const[o,h]of a)e(o,h)}))}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=new de(xt.comparator);function Hi(){return uS}const Nv=new de(xt.comparator);function Xl(...r){let e=Nv;for(const i of r)e=e.insert(i.key,i);return e}function Iv(r){let e=Nv;return r.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function Ar(){return eo()}function Mv(){return eo()}function eo(){return new Vr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const cS=new de(xt.comparator),hS=new Ve(xt.comparator);function Ht(...r){let e=hS;for(const i of r)e=e.add(i);return e}const fS=new Ve(qt);function dS(){return fS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function Vv(r){return{integerValue:""+r}}function mS(r,e){return zb(e)?Vv(e):Nd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this._=void 0}}function pS(r,e,i){return r instanceof sc?(function(o,h){const d={fields:{[gv]:{stringValue:pv},[_v]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&xd(h)&&(h=gc(h)),h&&(d.fields[yv]=h),{mapValue:d}})(i,e):r instanceof uo?jv(r,e):r instanceof co?Pv(r,e):(function(o,h){const d=Ov(o,h),g=Wy(d)+Wy(o.Ae);return sd(d)&&sd(o.Ae)?Vv(g):Nd(o.serializer,g)})(r,e)}function gS(r,e,i){return r instanceof uo?jv(r,e):r instanceof co?Pv(r,e):i}function Ov(r,e){return r instanceof rc?(function(a){return sd(a)||(function(h){return!!h&&"doubleValue"in h})(a)})(e)?e:{integerValue:0}:null}class sc extends Ec{}class uo extends Ec{constructor(e){super(),this.elements=e}}function jv(r,e){const i=Uv(e);for(const a of r.elements)i.some((o=>pi(o,a)))||i.push(a);return{arrayValue:{values:i}}}class co extends Ec{constructor(e){super(),this.elements=e}}function Pv(r,e){let i=Uv(e);for(const a of r.elements)i=i.filter((o=>!pi(o,a)));return{arrayValue:{values:i}}}class rc extends Ec{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function Wy(r){return be(r.integerValue||r.doubleValue)}function Uv(r){return Rd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function yS(r,e){return r.field.isEqual(e.field)&&(function(a,o){return a instanceof uo&&o instanceof uo||a instanceof co&&o instanceof co?Va(a.elements,o.elements,pi):a instanceof rc&&o instanceof rc?pi(a.Ae,o.Ae):a instanceof sc&&o instanceof sc})(r.transform,e.transform)}class _S{constructor(e,i){this.version=e,this.transformResults=i}}class hi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Tc{}function kv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Id(r.key,hi.none()):new mo(r.key,r.data,hi.none());{const i=r.data,a=Vn.empty();let o=new Ve(Ge.comparator);for(let h of e.fields)if(!o.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?a.delete(h):a.set(h,d),o=o.add(h)}return new Or(r.key,a,new Qn(o.toArray()),hi.none())}}function vS(r,e,i){r instanceof mo?(function(o,h,d){const g=o.value.clone(),y=e_(o.fieldTransforms,h,d.transformResults);g.setAll(y),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,i):r instanceof Or?(function(o,h,d){if(!Qu(o.precondition,h))return void h.convertToUnknownDocument(d.version);const g=e_(o.fieldTransforms,h,d.transformResults),y=h.data;y.setAll(Lv(o)),y.setAll(g),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,i):(function(o,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,i)}function no(r,e,i,a){return r instanceof mo?(function(h,d,g,y){if(!Qu(h.precondition,d))return g;const _=h.value.clone(),b=n_(h.fieldTransforms,y,d);return _.setAll(b),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,e,i,a):r instanceof Or?(function(h,d,g,y){if(!Qu(h.precondition,d))return g;const _=n_(h.fieldTransforms,y,d),b=d.data;return b.setAll(Lv(h)),b.setAll(_),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((C=>C.field)))})(r,e,i,a):(function(h,d,g){return Qu(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,e,i)}function ES(r,e){let i=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),h=Ov(a.transform,o||null);h!=null&&(i===null&&(i=Vn.empty()),i.set(a.field,h))}return i||null}function t_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Va(a,o,((h,d)=>yS(h,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class mo extends Tc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Or extends Tc{constructor(e,i,a,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Lv(r){const e=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}})),e}function e_(r,e,i){const a=new Map;$t(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let o=0;o<i.length;o++){const h=r[o],d=h.transform,g=e.data.field(h.field);a.set(h.field,gS(d,g,i[o]))}return a}function n_(r,e,i){const a=new Map;for(const o of r){const h=o.transform,d=i.data.field(o.field);a.set(o.field,pS(h,d,e))}return a}class Id extends Tc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TS extends Tc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&vS(h,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=no(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=no(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=Mv();return this.mutations.forEach((o=>{const h=e.get(o.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(o.key)?null:g;const y=kv(d,g);y!==null&&a.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(It.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Ht())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,((i,a)=>t_(i,a)))&&Va(this.baseMutations,e.baseMutations,((i,a)=>t_(i,a)))}}class Md{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){$t(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return cS})();const h=e.mutations;for(let d=0;d<h.length;d++)o=o.insert(h[d].key,a[d].version);return new Md(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe,Gt;function xS(r){switch(r){case ft.OK:return Ct(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return Ct(15467,{code:r})}}function zv(r){if(r===void 0)return qi("GRPC error has no .code"),ft.UNKNOWN;switch(r){case xe.OK:return ft.OK;case xe.CANCELLED:return ft.CANCELLED;case xe.UNKNOWN:return ft.UNKNOWN;case xe.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case xe.INTERNAL:return ft.INTERNAL;case xe.UNAVAILABLE:return ft.UNAVAILABLE;case xe.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case xe.NOT_FOUND:return ft.NOT_FOUND;case xe.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case xe.ABORTED:return ft.ABORTED;case xe.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case xe.DATA_LOSS:return ft.DATA_LOSS;default:return Ct(39323,{code:r})}}(Gt=xe||(xe={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new Is([4294967295,4294967295],0);function i_(r){const e=RS().encode(r),i=new nv;return i.update(e),new Uint8Array(i.digest())}function s_(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Is([i,a],0),new Is([o,h],0)]}class Vd{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new $l(`Invalid padding: ${i}`);if(a<0)throw new $l(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new $l(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=Is.fromNumber(this.ge)}ye(e,i,a){let o=e.add(i.multiply(Is.fromNumber(a)));return o.compare(wS)===1&&(o=new Is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=i_(e),[a,o]=s_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(a,o,h);if(!this.we(d))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new Vd(h,o,i);return a.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const i=i_(e),[a,o]=s_(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(a,o,h);this.Se(d)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,i,a,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,po.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new bc(It.min(),o,new de(qt),Hi(),Ht())}}class po{constructor(e,i,a,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new po(a,i,Ht(),Ht(),Ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,i,a,o){this.be=e,this.removedTargetIds=i,this.key=a,this.De=o}}class Bv{constructor(e,i){this.targetId=e,this.Ce=i}}class qv{constructor(e,i,a=Qe.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class r_{constructor(){this.ve=0,this.Fe=a_(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ht(),i=Ht(),a=Ht();return this.Fe.forEach(((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:Ct(38017,{changeType:h})}})),new po(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=a_()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.Je=zu(),this.He=zu(),this.Ye=new de(qt)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:Ct(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,o)=>{this.rt(o)&&i(o)}))}st(e){const i=e.targetId,a=e.Ce.count,o=this.ot(i);if(o){const h=o.target;if(ad(h))if(a===0){const d=new xt(h.path);this.et(i,d,tn.newNoDocument(d,It.min()))}else $t(a===1,20013,{expectedCount:a});else{const d=this._t(i);if(d!==a){const g=this.ut(e),y=g?this.ct(g,e,d):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:h=0}=i;let d,g;try{d=js(a).toUint8Array()}catch(y){if(y instanceof mv)return Ma("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Vd(d,o,h)}catch(y){return Ma(y instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let o=0;return a.forEach((h=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.et(i,h,null),o++)})),o}Tt(e){const i=new Map;this.ze.forEach(((h,d)=>{const g=this.ot(d);if(g){if(h.current&&ad(g.target)){const y=new xt(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,tn.newNoDocument(y,e))}h.Be&&(i.set(d,h.ke()),h.qe())}}));let a=Ht();this.He.forEach(((h,d)=>{let g=!0;d.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(h))})),this.je.forEach(((h,d)=>d.setReadTime(e)));const o=new bc(e,i,this.Ye,this.je,a);return this.je=Hi(),this.Je=zu(),this.He=zu(),this.Ye=new de(qt),o}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new r_,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Ve(qt),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Ve(qt),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||yt("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new r_),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function zu(){return new de(xt.comparator)}function a_(){return new de(xt.comparator)}const DS={asc:"ASCENDING",desc:"DESCENDING"},NS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IS={and:"AND",or:"OR"};class MS{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function od(r,e){return r.useProto3Json||pc(e)?e:{value:e}}function ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function VS(r,e){return ac(r,e.toTimestamp())}function fi(r){return $t(!!r,49232),It.fromTimestamp((function(i){const a=Os(i);return new ue(a.seconds,a.nanos)})(r))}function Od(r,e){return ud(r,e).canonicalString()}function ud(r,e){const i=(function(o){return new oe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?i:i.child(e)}function Fv(r){const e=oe.fromString(r);return $t(Xv(e),10190,{key:e.toString()}),e}function cd(r,e){return Od(r.databaseId,e.path)}function Gf(r,e){const i=Fv(e);if(i.get(1)!==r.databaseId.projectId)throw new St(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new St(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new xt(Qv(i))}function Gv(r,e){return Od(r.databaseId,e)}function OS(r){const e=Fv(r);return e.length===4?oe.emptyPath():Qv(e)}function hd(r){return new oe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Qv(r){return $t(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function l_(r,e,i){return{name:cd(r,e),fields:i.value.mapValue.fields}}function jS(r,e){let i;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ct(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=(function(_,b){return _.useProto3Json?($t(b===void 0||typeof b=="string",58123),Qe.fromBase64String(b||"")):($t(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Qe.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(_){const b=_.code===void 0?ft.UNKNOWN:zv(_.code);return new St(b,_.message||"")})(d);i=new qv(a,o,h,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Gf(r,a.document.name),h=fi(a.document.updateTime),d=a.document.createTime?fi(a.document.createTime):It.min(),g=new Vn({mapValue:{fields:a.document.fields}}),y=tn.newFoundDocument(o,h,d,g),_=a.targetIds||[],b=a.removedTargetIds||[];i=new Yu(_,b,y.key,y)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Gf(r,a.document),h=a.readTime?fi(a.readTime):It.min(),d=tn.newNoDocument(o,h),g=a.removedTargetIds||[];i=new Yu([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Gf(r,a.document),h=a.removedTargetIds||[];i=new Yu([],h,o,null)}else{if(!("filter"in e))return Ct(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:h}=a,d=new AS(o,h),g=a.targetId;i=new Bv(g,d)}}return i}function PS(r,e){let i;if(e instanceof mo)i={update:l_(r,e.key,e.value)};else if(e instanceof Id)i={delete:cd(r,e.key)};else if(e instanceof Or)i={update:l_(r,e.key,e.data),updateMask:GS(e.fieldMask)};else{if(!(e instanceof TS))return Ct(16599,{Vt:e.type});i={verify:cd(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(h,d){const g=d.transform;if(g instanceof sc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof uo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof co)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof rc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ct(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(o,h){return h.updateTime!==void 0?{updateTime:VS(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ct(27497)})(r,e.precondition)),i}function US(r,e){return r&&r.length>0?($t(e!==void 0,14353),r.map((i=>(function(o,h){let d=o.updateTime?fi(o.updateTime):fi(h);return d.isEqual(It.min())&&(d=fi(h)),new _S(d,o.transformResults||[])})(i,e)))):[]}function kS(r,e){return{documents:[Gv(r,e.path)]}}function LS(r,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=Gv(r,o);const h=(function(_){if(_.length!==0)return Kv(gi.create(_,"and"))})(e.filters);h&&(i.structuredQuery.where=h);const d=(function(_){if(_.length!==0)return _.map((b=>(function(I){return{field:Ra(I.field),direction:qS(I.dir)}})(b)))})(e.orderBy);d&&(i.structuredQuery.orderBy=d);const g=od(r,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:i,parent:o}}function zS(r){let e=OS(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){$t(a===1,65062);const b=i.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let h=[];i.where&&(h=(function(C){const I=Yv(C);return I instanceof gi&&Av(I)?I.getFilters():[I]})(i.where));let d=[];i.orderBy&&(d=(function(C){return C.map((I=>(function(z){return new ic(wa(z.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(I)))})(i.orderBy));let g=null;i.limit&&(g=(function(C){let I;return I=typeof C=="object"?C.value:C,pc(I)?null:I})(i.limit));let y=null;i.startAt&&(y=(function(C){const I=!!C.before,L=C.values||[];return new nc(L,I)})(i.startAt));let _=null;return i.endAt&&(_=(function(C){const I=!C.before,L=C.values||[];return new nc(L,I)})(i.endAt)),sS(e,o,d,h,g,"F",y,_)}function BS(r,e){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:o})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Yv(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=wa(i.unaryFilter.field);return Ie.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=wa(i.unaryFilter.field);return Ie.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=wa(i.unaryFilter.field);return Ie.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=wa(i.unaryFilter.field);return Ie.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Ie.create(wa(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return gi.create(i.compositeFilter.filters.map((a=>Yv(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}})(i.compositeFilter.op))})(r):Ct(30097,{filter:r})}function qS(r){return DS[r]}function HS(r){return NS[r]}function FS(r){return IS[r]}function Ra(r){return{fieldPath:r.canonicalString()}}function wa(r){return Ge.fromServerFormat(r.fieldPath)}function Kv(r){return r instanceof Ie?(function(i){if(i.op==="=="){if(Ky(i.value))return{unaryFilter:{field:Ra(i.field),op:"IS_NAN"}};if(Yy(i.value))return{unaryFilter:{field:Ra(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Ky(i.value))return{unaryFilter:{field:Ra(i.field),op:"IS_NOT_NAN"}};if(Yy(i.value))return{unaryFilter:{field:Ra(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(i.field),op:HS(i.op),value:i.value}}})(r):r instanceof gi?(function(i){const a=i.getFilters().map((o=>Kv(o)));return a.length===1?a[0]:{compositeFilter:{op:FS(i.op),filters:a}}})(r):Ct(54877,{filter:r})}function GS(r){const e=[];return r.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Xv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,i,a,o,h=It.min(),d=It.min(),g=Qe.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.yt=e}}function YS(r){const e=zS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.Cn=new XS}addToCollectionParentIndex(e,i){return this.Cn.add(i),lt.resolve()}getCollectionParents(e,i){return lt.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return lt.resolve()}deleteFieldIndex(e,i){return lt.resolve()}deleteAllFieldIndexes(e){return lt.resolve()}createTargetIndexes(e,i){return lt.resolve()}getDocumentsMatchingTarget(e,i){return lt.resolve(null)}getIndexType(e,i){return lt.resolve(0)}getFieldIndexes(e,i){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,i){return lt.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,i){return lt.resolve(Vs.min())}updateCollectionGroup(e,i,a){return lt.resolve()}updateIndexEntries(e,i){return lt.resolve()}}class XS{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new Ve(oe.comparator),h=!o.has(a);return this.index[i]=o.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Ve(oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$v=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn($v,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pa(0)}static cr(){return new Pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="LruGarbageCollector",$S=1048576;function c_([r,e],[i,a]){const o=qt(r,i);return o===0?qt(e,a):o}class ZS{constructor(e){this.Ir=e,this.buffer=new Ve(c_),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();c_(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class JS{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){yt(u_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){za(i)?yt(u_,"Ignoring IndexedDB error during garbage collection: ",i):await La(i)}await this.Vr(3e5)}))}}class WS{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return lt.resolve(mc.ce);const a=new ZS(i);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(o_)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o_):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,o,h,d,g,y,_;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),o=this.params.maximumSequenceNumbersToCollect):o=C,d=Date.now(),this.nthSequenceNumber(e,o)))).next((C=>(a=C,g=Date.now(),this.removeTargets(e,a,i)))).next((C=>(h=C,y=Date.now(),this.removeOrphanedDocuments(e,a)))).next((C=>(_=Date.now(),Aa()<=Qt.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${h} targets in `+(y-g)+`ms
	Removed ${C} documents in `+(_-y)+`ms
Total Duration: ${_-b}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:C}))))}}function tA(r,e){return new WS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.changes=new Vr((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?lt.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,i)))).next((o=>(a!==null&&no(a.mutation,o,Qn.empty(),ue.now()),o)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,Ht()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=Ht()){const o=Ar();return this.populateOverlays(e,o,i).next((()=>this.computeViews(e,i,o,a).next((h=>{let d=Xl();return h.forEach(((g,y)=>{d=d.insert(g,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,i){const a=Ar();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,Ht())))}populateOverlays(e,i,a){const o=[];return a.forEach((h=>{i.has(h)||o.push(h)})),this.documentOverlayCache.getOverlays(e,o).next((h=>{h.forEach(((d,g)=>{i.set(d,g)}))}))}computeViews(e,i,a,o){let h=Hi();const d=eo(),g=(function(){return eo()})();return i.forEach(((y,_)=>{const b=a.get(_.key);o.has(_.key)&&(b===void 0||b.mutation instanceof Or)?h=h.insert(_.key,_):b!==void 0?(d.set(_.key,b.mutation.getFieldMask()),no(b.mutation,_,b.mutation.getFieldMask(),ue.now())):d.set(_.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,h).next((y=>(y.forEach(((_,b)=>d.set(_,b))),i.forEach(((_,b)=>g.set(_,new nA(b,d.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,i){const a=eo();let o=new de(((d,g)=>d-g)),h=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((d=>{for(const g of d)g.keys().forEach((y=>{const _=i.get(y);if(_===null)return;let b=a.get(y)||Qn.empty();b=g.applyToLocalView(_,b),a.set(y,b);const C=(o.get(g.batchId)||Ht()).add(y);o=o.insert(g.batchId,C)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,b=y.value,C=Mv();b.forEach((I=>{if(!h.has(I)){const L=kv(i.get(I),a.get(I));L!==null&&C.set(I,L),h=h.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,C))}return lt.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,o){return(function(d){return xt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):rS(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next((h=>{const d=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-h.size):lt.resolve(Ar());let g=ro,y=h;return d.next((_=>lt.forEach(_,((b,C)=>(g<C.largestBatchId&&(g=C.largestBatchId),h.get(b)?lt.resolve():this.remoteDocumentCache.getEntry(e,b).next((I=>{y=y.insert(b,I)}))))).next((()=>this.populateOverlays(e,_,h))).next((()=>this.computeViews(e,y,_,Ht()))).next((b=>({batchId:g,changes:Iv(b)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new xt(i)).next((a=>{let o=Xl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const h=i.collectionGroup;let d=Xl();return this.indexManager.getCollectionParents(e,h).next((g=>lt.forEach(g,(y=>{const _=(function(C,I){return new yc(I,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(i,y.child(h));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((b=>{b.forEach(((C,I)=>{d=d.insert(C,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,i,a,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,o)))).next((d=>{h.forEach(((y,_)=>{const b=_.getKey();d.get(b)===null&&(d=d.insert(b,tn.newInvalidDocument(b)))}));let g=Xl();return d.forEach(((y,_)=>{const b=h.get(y);b!==void 0&&no(b.mutation,_,Qn.empty(),ue.now()),vc(i,_)&&(g=g.insert(y,_))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return lt.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:fi(o.createTime)}})(i)),lt.resolve()}getNamedQuery(e,i){return lt.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:YS(o.bundledQuery),readTime:fi(o.readTime)}})(i)),lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.overlays=new de(xt.comparator),this.qr=new Map}getOverlay(e,i){return lt.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Ar();return lt.forEach(i,(o=>this.getOverlay(e,o).next((h=>{h!==null&&a.set(o,h)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((o,h)=>{this.St(e,i,h)})),lt.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(a)),lt.resolve()}getOverlaysForCollection(e,i,a){const o=Ar(),h=i.length+1,d=new xt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===h&&y.largestBatchId>a&&o.set(y.getKey(),y)}return lt.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let h=new de(((_,b)=>_-b));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>a){let b=h.get(_.largestBatchId);b===null&&(b=Ar(),h=h.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const g=Ar(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,b)=>g.set(_,b))),!(g.size()>=o)););return lt.resolve(g)}St(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new SS(i,a));let h=this.qr.get(i);h===void 0&&(h=Ht(),this.qr.set(i,h)),this.qr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return lt.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this.Qr=new Ve(Le.$r),this.Ur=new Ve(Le.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new Le(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new Le(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new xt(new oe([])),a=new Le(i,e),o=new Le(i,e+1),h=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),h.push(d.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new xt(new oe([])),a=new Le(i,e),o=new Le(i,e+1);let h=Ht();return this.Ur.forEachInRange([a,o],(d=>{h=h.add(d.key)})),h}containsKey(e){const i=new Le(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class Le{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return xt.comparator(e.key,i.key)||qt(e.Yr,i.Yr)}static Kr(e,i){return qt(e.Yr,i.Yr)||xt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(Le.$r)}checkEmpty(e){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new bS(h,i,a,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Le(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return lt.resolve(d)}lookupMutationBatch(e,i){return lt.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.ei(a),h=o<0?0:o;return lt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?Ad:this.tr-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new Le(i,0),o=new Le(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([a,o],(d=>{const g=this.Xr(d.Yr);h.push(g)})),lt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Ve(qt);return i.forEach((o=>{const h=new Le(o,0),d=new Le(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],(g=>{a=a.add(g.Yr)}))})),lt.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let h=a;xt.isDocumentKey(h)||(h=h.child(""));const d=new Le(new xt(h),0);let g=new Ve(qt);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(g=g.add(y.Yr)),!0)}),d),lt.resolve(this.ti(g))}ti(e){const i=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&i.push(o)})),i}removeMutationBatch(e,i){$t(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return lt.forEach(i.mutations,(o=>{const h=new Le(o.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new Le(i,0),o=this.Zr.firstAfterOrEqual(a);return lt.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,lt.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.ri=e,this.docs=(function(){return new de(xt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),h=o?o.size:0,d=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return lt.resolve(a?a.document.mutableCopy():tn.newInvalidDocument(i))}getEntries(e,i){let a=Hi();return i.forEach((o=>{const h=this.docs.get(o);a=a.insert(o,h?h.document.mutableCopy():tn.newInvalidDocument(o))})),lt.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let h=Hi();const d=i.path,g=new xt(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:b}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||Pb(jb(b),a)<=0||(o.has(b.key)||vc(i,b))&&(h=h.insert(b.key,b.mutableCopy()))}return lt.resolve(h)}getAllFromCollectionGroup(e,i,a,o){Ct(9500)}ii(e,i){return lt.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new uA(this)}getSize(e){return lt.resolve(this.size)}}class uA extends eA{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),lt.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.persistence=e,this.si=new Vr((i=>wd(i)),Cd),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.oi=0,this._i=new jd,this.targetCount=0,this.ai=Pa.ur()}forEachTarget(e,i){return this.si.forEach(((a,o)=>i(o))),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),lt.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Pa(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,lt.resolve()}updateTargetData(e,i){return this.Pr(i),lt.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,i,a){let o=0;const h=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),lt.waitFor(h).next((()=>o))}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return lt.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),lt.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach((d=>{h.push(o.markPotentiallyOrphaned(e,d))})),lt.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),lt.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return lt.resolve(a)}containsKey(e,i){return lt.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,i){this.ui={},this.overlays={},this.ci=new mc(0),this.li=!1,this.li=!0,this.hi=new aA,this.referenceDelegate=e(this),this.Pi=new cA(this),this.indexManager=new KS,this.remoteDocumentCache=(function(o){return new oA(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new QS(i),this.Ii=new sA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new rA,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new lA(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){yt("MemoryPersistence","Starting transaction:",e);const o=new hA(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((h=>this.referenceDelegate.di(o).next((()=>h)))).toPromise().then((h=>(o.raiseOnCommittedEvent(),h)))}Ai(e,i){return lt.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class hA extends kb{constructor(e){super(),this.currentSequenceNumber=e}}class Pd{constructor(e){this.persistence=e,this.Ri=new jd,this.Vi=null}static mi(e){return new Pd(e)}get fi(){if(this.Vi)return this.Vi;throw Ct(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),lt.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),lt.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),lt.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((o=>{o.forEach((h=>this.fi.add(h.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.fi,(a=>{const o=xt.fromPath(a);return this.gi(e,o).next((h=>{h||i.removeEntry(o,It.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return lt.or([()=>lt.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class lc{constructor(e,i){this.persistence=e,this.pi=new Vr((a=>Bb(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=tA(this,i)}static mi(e,i){return new lc(e,i)}Ei(){}di(e){return lt.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((o=>a+o))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return lt.forEach(this.pi,((a,o)=>this.br(e,a,o).next((h=>h?lt.resolve():i(o)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,i).next((g=>{g||(a++,h.removeEntry(d,It.min()))})))).next((()=>h.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),lt.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),lt.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),lt.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),lt.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Fu(e.data.value)),i}br(e,i,a){return lt.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.pi.get(i);return lt.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=o}static As(e,i){let a=Ht(),o=Ht();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new Ud(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uT()?8:Lb(lT())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,o){const h={result:null};return this.ys(e,i).next((d=>{h.result=d})).next((()=>{if(!h.result)return this.ws(e,i,o,a).next((d=>{h.result=d}))})).next((()=>{if(h.result)return;const d=new fA;return this.Ss(e,i,d).next((g=>{if(h.result=g,this.Vs)return this.bs(e,i,d,g.size)}))})).next((()=>h.result))}bs(e,i,a,o){return a.documentReadCount<this.fs?(Aa()<=Qt.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",xa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),lt.resolve()):(Aa()<=Qt.DEBUG&&yt("QueryEngine","Query:",xa(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Aa()<=Qt.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",xa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(i))):lt.resolve())}ys(e,i){if(Jy(i))return lt.resolve(null);let a=ci(i);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=ld(i,null,"F"),a=ci(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((h=>{const d=Ht(...h);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,a).next((y=>{const _=this.Ds(i,g);return this.Cs(i,_,d,y.readTime)?this.ys(e,ld(i,null,"F")):this.vs(e,_,i,y)}))))})))))}ws(e,i,a,o){return Jy(i)||o.isEqual(It.min())?lt.resolve(null):this.ps.getDocuments(e,a).next((h=>{const d=this.Ds(i,h);return this.Cs(i,d,a,o)?lt.resolve(null):(Aa()<=Qt.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xa(i)),this.vs(e,d,i,Ob(o,ro)).next((g=>g)))}))}Ds(e,i){let a=new Ve(Dv(e));return i.forEach(((o,h)=>{vc(e,h)&&(a=a.add(h))})),a}Cs(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,i,a){return Aa()<=Qt.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",xa(i)),this.ps.getDocumentsMatchingQuery(e,i,Vs.min(),a)}vs(e,i,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((h=>(i.forEach((d=>{h=h.insert(d.key,d)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="LocalStore",mA=3e8;class pA{constructor(e,i,a,o){this.persistence=e,this.Fs=i,this.serializer=o,this.Ms=new de(qt),this.xs=new Vr((h=>wd(h)),Cd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function gA(r,e,i,a){return new pA(r,e,i,a)}async function Jv(r,e){const i=Vt(r);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next((h=>(o=h,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((h=>{const d=[],g=[];let y=Ht();for(const _ of o){d.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}for(const _ of h){g.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}return i.localDocuments.getDocuments(a,y).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:g})))}))}))}function yA(r,e){const i=Vt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,_,b){const C=_.batch,I=C.keys();let L=lt.resolve();return I.forEach((z=>{L=L.next((()=>b.getEntry(y,z))).next((ot=>{const X=_.docVersions.get(z);$t(X!==null,48541),ot.version.compareTo(X)<0&&(C.applyToRemoteDocument(ot,_),ot.isValidDocument()&&(ot.setReadTime(_.commitVersion),b.addEntry(ot)))}))})),L.next((()=>g.mutationQueue.removeMutationBatch(y,C)))})(i,a,e,h).next((()=>h.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let y=Ht();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y})(e)))).next((()=>i.localDocuments.getDocuments(a,o)))}))}function Wv(r){const e=Vt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function _A(r,e){const i=Vt(r),a=e.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const g=[];e.targetChanges.forEach(((b,C)=>{const I=o.get(C);if(!I)return;g.push(i.Pi.removeMatchingKeys(h,b.removedDocuments,C).next((()=>i.Pi.addMatchingKeys(h,b.addedDocuments,C))));let L=I.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(C)!==null?L=L.withResumeToken(Qe.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,a)),o=o.insert(C,L),(function(ot,X,ut){return ot.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-ot.snapshotVersion.toMicroseconds()>=mA?!0:ut.addedDocuments.size+ut.modifiedDocuments.size+ut.removedDocuments.size>0})(I,L,b)&&g.push(i.Pi.updateTargetData(h,L))}));let y=Hi(),_=Ht();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,b))})),g.push(vA(h,d,e.documentUpdates).next((b=>{y=b.ks,_=b.qs}))),!a.isEqual(It.min())){const b=i.Pi.getLastRemoteSnapshotVersion(h).next((C=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,a)));g.push(b)}return lt.waitFor(g).next((()=>d.apply(h))).next((()=>i.localDocuments.getLocalViewOfDocuments(h,y,_))).next((()=>y))})).then((h=>(i.Ms=o,h)))}function vA(r,e,i){let a=Ht(),o=Ht();return i.forEach((h=>a=a.add(h))),e.getEntries(r,a).next((h=>{let d=Hi();return i.forEach(((g,y)=>{const _=h.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(It.min())?(e.removeEntry(g,y.readTime),d=d.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),d=d.insert(g,y)):yt(kd,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)})),{ks:d,qs:o}}))}function EA(r,e){const i=Vt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Ad),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function TA(r,e){const i=Vt(r);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return i.Pi.getTargetData(a,e).next((h=>h?(o=h,lt.resolve(o)):i.Pi.allocateTargetId(a).next((d=>(o=new ws(e,d,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=i.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function fd(r,e,i){const a=Vt(r),o=a.Ms.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!za(d))throw d;yt(kd,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function h_(r,e,i){const a=Vt(r);let o=It.min(),h=Ht();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,_,b){const C=Vt(y),I=C.xs.get(b);return I!==void 0?lt.resolve(C.Ms.get(I)):C.Pi.getTargetData(_,b)})(a,d,ci(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((y=>{h=y}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,i?o:It.min(),i?h:Ht()))).next((g=>(bA(a,lS(e),g),{documents:g,Qs:h})))))}function bA(r,e,i){let a=r.Os.get(e)||It.min();i.forEach(((o,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)})),r.Os.set(e,a)}class f_{constructor(){this.activeTargetIds=dS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SA{constructor(){this.Mo=new f_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new f_,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="ConnectivityMonitor";class m_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yt(d_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){yt(d_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function dd(){return Bu===null?Bu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="RestConnection",xA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===tc?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,i,a,o,h){const d=dd(),g=this.zo(e,i.toUriEncodedString());yt(Qf,`Sending RPC '${e}' ${d}:`,g,a);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,h);const{host:_}=new URL(g),b=dc(_);return this.Jo(e,g,y,a,b).then((C=>(yt(Qf,`Received RPC '${e}' ${d}: `,C),C)),(C=>{throw Ma(Qf,`RPC '${e}' ${d} failed with error: `,C,"url: ",g,"request:",a),C}))}Ho(e,i,a,o,h,d){return this.Go(e,i,a,o,h)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ka})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,h)=>e[h]=o)),a&&a.headers.forEach(((o,h)=>e[h]=o))}zo(e,i){const a=xA[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class CA extends RA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,o,h){const d=dd();return new Promise(((g,y)=>{const _=new iv;_.setWithCredentials(!0),_.listenOnce(sv.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Hu.NO_ERROR:const C=_.getResponseJson();yt(Je,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(C)),g(C);break;case Hu.TIMEOUT:yt(Je,`RPC '${e}' ${d} timed out`),y(new St(ft.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:const I=_.getStatus();if(yt(Je,`RPC '${e}' ${d} failed with status:`,I,"response text:",_.getResponseText()),I>0){let L=_.getResponseJson();Array.isArray(L)&&(L=L[0]);const z=L?.error;if(z&&z.status&&z.message){const ot=(function(ut){const et=ut.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(et)>=0?et:ft.UNKNOWN})(z.status);y(new St(ot,z.message))}else y(new St(ft.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new St(ft.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{yt(Je,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);yt(Je,`RPC '${e}' ${d} sending request:`,o),_.send(i,"POST",b,a,15)}))}T_(e,i,a){const o=dd(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=lv(),g=av(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,a),y.encodeInitMessageHeaders=!0;const b=h.join("");yt(Je,`Creating RPC '${e}' stream ${o}: ${b}`,y);const C=d.createWebChannel(b,y);this.I_(C);let I=!1,L=!1;const z=new wA({Yo:X=>{L?yt(Je,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(I||(yt(Je,`Opening RPC '${e}' stream ${o} transport.`),C.open(),I=!0),yt(Je,`RPC '${e}' stream ${o} sending:`,X),C.send(X))},Zo:()=>C.close()}),ot=(X,ut,et)=>{X.listen(ut,(ht=>{try{et(ht)}catch(dt){setTimeout((()=>{throw dt}),0)}}))};return ot(C,Kl.EventType.OPEN,(()=>{L||(yt(Je,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),ot(C,Kl.EventType.CLOSE,(()=>{L||(L=!0,yt(Je,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(C))})),ot(C,Kl.EventType.ERROR,(X=>{L||(L=!0,Ma(Je,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),z.a_(new St(ft.UNAVAILABLE,"The operation could not be completed")))})),ot(C,Kl.EventType.MESSAGE,(X=>{if(!L){const ut=X.data[0];$t(!!ut,16349);const et=ut,ht=et?.error||et[0]?.error;if(ht){yt(Je,`RPC '${e}' stream ${o} received error:`,ht);const dt=ht.status;let ct=(function(S){const R=xe[S];if(R!==void 0)return zv(R)})(dt),it=ht.message;ct===void 0&&(ct=ft.INTERNAL,it="Unknown error status: "+dt+" with message "+ht.message),L=!0,z.a_(new St(ct,it)),C.close()}else yt(Je,`RPC '${e}' stream ${o} received:`,ut),z.u_(ut)}})),ot(g,rv.STAT_EVENT,(X=>{X.stat===ed.PROXY?yt(Je,`RPC '${e}' stream ${o} detected buffering proxy`):X.stat===ed.NOPROXY&&yt(Je,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(r){return new MS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,i,a=1e3,o=1.5,h=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=o,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-a);o>0&&yt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="PersistentStream";class e0{constructor(e,i,a,o,h,d,g,y){this.Mi=e,this.S_=a,this.b_=o,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new t0(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===ft.RESOURCE_EXHAUSTED?(qi(i.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===i&&this.G_(a,o)}),(a=>{e((()=>{const o=new St(ft.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return yt(p_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(yt(p_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DA extends e0{constructor(e,i,a,o,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=jS(this.serializer,e),a=(function(h){if(!("targetChange"in h))return It.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?It.min():d.readTime?fi(d.readTime):It.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=hd(this.serializer),i.addTarget=(function(h,d){let g;const y=d.target;if(g=ad(y)?{documents:kS(h,y)}:{query:LS(h,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=Hv(h,d.resumeToken);const _=od(h,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(It.min())>0){g.readTime=ac(h,d.snapshotVersion.toTimestamp());const _=od(h,d.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const a=BS(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=hd(this.serializer),i.removeTarget=e,this.q_(i)}}class NA extends e0{constructor(e,i,a,o,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return $t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=US(e.writeResults,e.commitTime),a=fi(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=hd(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>PS(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{}class MA extends IA{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new St(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Go(e,ud(i,a),o,h,d))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new St(ft.UNKNOWN,h.toString())}))}Ho(e,i,a,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,ud(i,a),o,d,g,h))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new St(ft.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VA{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qi(i),this.aa=!1):yt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="RemoteStore";class OA{constructor(e,i,a,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{jr(this)&&(yt(Nr,"Restarting streams for network reachability change."),await(async function(y){const _=Vt(y);_.Ea.add(4),await go(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Ac(_)})(this))}))})),this.Ra=new VA(a,o)}}async function Ac(r){if(jr(r))for(const e of r.da)await e(!0)}async function go(r){for(const e of r.da)await e(!1)}function n0(r,e){const i=Vt(r);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),qd(i)?Bd(i):Ba(i).O_()&&zd(i,e))}function Ld(r,e){const i=Vt(r),a=Ba(i);i.Ia.delete(e),a.O_()&&i0(i,e),i.Ia.size===0&&(a.O_()?a.L_():jr(i)&&i.Ra.set("Unknown"))}function zd(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Ba(r).Y_(e)}function i0(r,e){r.Va.Ue(e),Ba(r).Z_(e)}function Bd(r){r.Va=new CS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ba(r).start(),r.Ra.ua()}function qd(r){return jr(r)&&!Ba(r).x_()&&r.Ia.size>0}function jr(r){return Vt(r).Ea.size===0}function s0(r){r.Va=void 0}async function jA(r){r.Ra.set("Online")}async function PA(r){r.Ia.forEach(((e,i)=>{zd(r,e)}))}async function UA(r,e){s0(r),qd(r)?(r.Ra.ha(e),Bd(r)):r.Ra.set("Unknown")}async function kA(r,e,i){if(r.Ra.set("Online"),e instanceof qv&&e.state===2&&e.cause)try{await(async function(o,h){const d=h.cause;for(const g of h.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(r,e)}catch(a){yt(Nr,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await oc(r,a)}else if(e instanceof Yu?r.Va.Ze(e):e instanceof Bv?r.Va.st(e):r.Va.tt(e),!i.isEqual(It.min()))try{const a=await Wv(r.localStore);i.compareTo(a)>=0&&await(function(h,d){const g=h.Va.Tt(d);return g.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const b=h.Ia.get(_);b&&h.Ia.set(_,b.withResumeToken(y.resumeToken,d))}})),g.targetMismatches.forEach(((y,_)=>{const b=h.Ia.get(y);if(!b)return;h.Ia.set(y,b.withResumeToken(Qe.EMPTY_BYTE_STRING,b.snapshotVersion)),i0(h,y);const C=new ws(b.target,y,_,b.sequenceNumber);zd(h,C)})),h.remoteSyncer.applyRemoteEvent(g)})(r,i)}catch(a){yt(Nr,"Failed to raise snapshot:",a),await oc(r,a)}}async function oc(r,e,i){if(!za(e))throw e;r.Ea.add(1),await go(r),r.Ra.set("Offline"),i||(i=()=>Wv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{yt(Nr,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Ac(r)}))}function r0(r,e){return e().catch((i=>oc(r,i,e)))}async function xc(r){const e=Vt(r),i=Us(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ad;for(;LA(e);)try{const o=await EA(e.localStore,a);if(o===null){e.Ta.length===0&&i.L_();break}a=o.batchId,zA(e,o)}catch(o){await oc(e,o)}a0(e)&&l0(e)}function LA(r){return jr(r)&&r.Ta.length<10}function zA(r,e){r.Ta.push(e);const i=Us(r);i.O_()&&i.X_&&i.ea(e.mutations)}function a0(r){return jr(r)&&!Us(r).x_()&&r.Ta.length>0}function l0(r){Us(r).start()}async function BA(r){Us(r).ra()}async function qA(r){const e=Us(r);for(const i of r.Ta)e.ea(i.mutations)}async function HA(r,e,i){const a=r.Ta.shift(),o=Md.from(a,e,i);await r0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await xc(r)}async function FA(r,e){e&&Us(r).X_&&await(async function(a,o){if((function(d){return xS(d)&&d!==ft.ABORTED})(o.code)){const h=a.Ta.shift();Us(a).B_(),await r0(a,(()=>a.remoteSyncer.rejectFailedWrite(h.batchId,o))),await xc(a)}})(r,e),a0(r)&&l0(r)}async function g_(r,e){const i=Vt(r);i.asyncQueue.verifyOperationInProgress(),yt(Nr,"RemoteStore received new credentials");const a=jr(i);i.Ea.add(3),await go(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Ac(i)}async function GA(r,e){const i=Vt(r);e?(i.Ea.delete(2),await Ac(i)):e||(i.Ea.add(2),await go(i),i.Ra.set("Unknown"))}function Ba(r){return r.ma||(r.ma=(function(i,a,o){const h=Vt(i);return h.sa(),new DA(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(r.datastore,r.asyncQueue,{Xo:jA.bind(null,r),t_:PA.bind(null,r),r_:UA.bind(null,r),H_:kA.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),qd(r)?Bd(r):r.Ra.set("Unknown")):(await r.ma.stop(),s0(r))}))),r.ma}function Us(r){return r.fa||(r.fa=(function(i,a,o){const h=Vt(i);return h.sa(),new NA(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:BA.bind(null,r),r_:FA.bind(null,r),ta:qA.bind(null,r),na:HA.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await xc(r)):(await r.fa.stop(),r.Ta.length>0&&(yt(Nr,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,i,a,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=h,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,h){const d=Date.now()+a,g=new Hd(e,i,d,o,h);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fd(r,e){if(qi("AsyncQueue",`${e}: ${r}`),za(r))return new St(ft.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||xt.comparator(i.key,a.key):(i,a)=>xt.comparator(i.key,a.key),this.keyedMap=Xl(),this.sortedSet=new de(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new Da;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.ga=new de(xt.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Ct(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class Ua{constructor(e,i,a,o,h,d,g,y,_){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,i,a,o,h){const d=[];return i.forEach((g=>{d.push({type:0,doc:g})})),new Ua(e,i,Da.emptySet(i),d,a,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class YA{constructor(){this.queries=__(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const o=Vt(i),h=o.queries;o.queries=__(),h.forEach(((d,g)=>{for(const y of g.Sa)y.onError(a)}))})(this,new St(ft.ABORTED,"Firestore shutting down"))}}function __(){return new Vr((r=>Cv(r)),_c)}async function KA(r,e){const i=Vt(r);let a=3;const o=e.query;let h=i.queries.get(o);h?!h.ba()&&e.Da()&&(a=2):(h=new QA,a=e.Da()?0:1);try{switch(a){case 0:h.wa=await i.onListen(o,!0);break;case 1:h.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const g=Fd(d,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(g)}i.queries.set(o,h),h.Sa.push(e),e.va(i.onlineState),h.wa&&e.Fa(h.wa)&&Gd(i)}async function XA(r,e){const i=Vt(r),a=e.query;let o=3;const h=i.queries.get(a);if(h){const d=h.Sa.indexOf(e);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?o=e.Da()?0:1:!h.ba()&&e.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function $A(r,e){const i=Vt(r);let a=!1;for(const o of e){const h=o.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Fa(o)&&(a=!0);d.wa=o}}a&&Gd(i)}function ZA(r,e,i){const a=Vt(r),o=a.queries.get(e);if(o)for(const h of o.Sa)h.onError(i);a.queries.delete(e)}function Gd(r){r.Ca.forEach((e=>{e.next()}))}var md,v_;(v_=md||(md={})).Ma="default",v_.Cache="cache";class JA{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ua(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==md.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.key=e}}class u0{constructor(e){this.key=e}}class WA{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ht(),this.mutatedKeys=Ht(),this.eu=Dv(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new y_,o=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,C)=>{const I=o.get(b),L=vc(this.query,C)?C:null,z=!!I&&this.mutatedKeys.has(I.key),ot=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let X=!1;I&&L?I.data.isEqual(L.data)?z!==ot&&(a.track({type:3,doc:L}),X=!0):this.su(I,L)||(a.track({type:2,doc:L}),X=!0,(y&&this.eu(L,y)>0||_&&this.eu(L,_)<0)&&(g=!0)):!I&&L?(a.track({type:0,doc:L}),X=!0):I&&!L&&(a.track({type:1,doc:I}),X=!0,(y||_)&&(g=!0)),X&&(L?(d=d.add(L),h=ot?h.add(b):h.delete(b)):(d=d.delete(b),h=h.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),h=h.delete(b.key),a.track({type:1,doc:b})}return{tu:d,iu:a,Cs:g,mutatedKeys:h}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,C)=>(function(L,z){const ot=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Rt:X})}};return ot(L)-ot(z)})(b.type,C.type)||this.eu(b.doc,C.doc))),this.ou(a),o=o??!1;const g=i&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new Ua(this.query,e.tu,h,d,e.mutatedKeys,y===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new y_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ht(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new u0(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new o0(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=Ht();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return Ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qd="SyncEngine";class tx{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class ex{constructor(e){this.key=e,this.hu=!1}}class nx{constructor(e,i,a,o,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Vr((g=>Cv(g)),_c),this.Iu=new Map,this.Eu=new Set,this.du=new de(xt.comparator),this.Au=new Map,this.Ru=new jd,this.Vu={},this.mu=new Map,this.fu=Pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ix(r,e,i=!0){const a=p0(r);let o;const h=a.Tu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.lu()):o=await c0(a,e,i,!0),o}async function sx(r,e){const i=p0(r);await c0(i,e,!0,!1)}async function c0(r,e,i,a){const o=await TA(r.localStore,ci(e)),h=o.targetId,d=r.sharedClientState.addLocalQueryTarget(h,i);let g;return a&&(g=await rx(r,e,h,d==="current",o.resumeToken)),r.isPrimaryClient&&i&&n0(r.remoteStore,o),g}async function rx(r,e,i,a,o){r.pu=(C,I,L)=>(async function(ot,X,ut,et){let ht=X.view.ru(ut);ht.Cs&&(ht=await h_(ot.localStore,X.query,!1).then((({documents:N})=>X.view.ru(N,ht))));const dt=et&&et.targetChanges.get(X.targetId),ct=et&&et.targetMismatches.get(X.targetId)!=null,it=X.view.applyChanges(ht,ot.isPrimaryClient,dt,ct);return T_(ot,X.targetId,it.au),it.snapshot})(r,C,I,L);const h=await h_(r.localStore,e,!0),d=new WA(e,h.Qs),g=d.ru(h.documents),y=po.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",o),_=d.applyChanges(g,r.isPrimaryClient,y);T_(r,i,_.au);const b=new tx(e,i,d);return r.Tu.set(e,b),r.Iu.has(i)?r.Iu.get(i).push(e):r.Iu.set(i,[e]),_.snapshot}async function ax(r,e,i){const a=Vt(r),o=a.Tu.get(e),h=a.Iu.get(o.targetId);if(h.length>1)return a.Iu.set(o.targetId,h.filter((d=>!_c(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await fd(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Ld(a.remoteStore,o.targetId),pd(a,o.targetId)})).catch(La)):(pd(a,o.targetId),await fd(a.localStore,o.targetId,!0))}async function lx(r,e){const i=Vt(r),a=i.Tu.get(e),o=i.Iu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Ld(i.remoteStore,a.targetId))}async function ox(r,e,i){const a=px(r);try{const o=await(function(d,g){const y=Vt(d),_=ue.now(),b=g.reduce(((L,z)=>L.add(z.key)),Ht());let C,I;return y.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let z=Hi(),ot=Ht();return y.Ns.getEntries(L,b).next((X=>{z=X,z.forEach(((ut,et)=>{et.isValidDocument()||(ot=ot.add(ut))}))})).next((()=>y.localDocuments.getOverlayedDocuments(L,z))).next((X=>{C=X;const ut=[];for(const et of g){const ht=ES(et,C.get(et.key).overlayedDocument);ht!=null&&ut.push(new Or(et.key,ht,Tv(ht.value.mapValue),hi.exists(!0)))}return y.mutationQueue.addMutationBatch(L,_,ut,g)})).next((X=>{I=X;const ut=X.applyToLocalDocumentSet(C,ot);return y.documentOverlayCache.saveOverlays(L,X.batchId,ut)}))})).then((()=>({batchId:I.batchId,changes:Iv(C)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,g,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new de(qt)),_=_.insert(g,y),d.Vu[d.currentUser.toKey()]=_})(a,o.batchId,i),await yo(a,o.changes),await xc(a.remoteStore)}catch(o){const h=Fd(o,"Failed to persist write");i.reject(h)}}async function h0(r,e){const i=Vt(r);try{const a=await _A(i.localStore,e);e.targetChanges.forEach(((o,h)=>{const d=i.Au.get(h);d&&($t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?$t(d.hu,14607):o.removedDocuments.size>0&&($t(d.hu,42227),d.hu=!1))})),await yo(i,a,e)}catch(a){await La(a)}}function E_(r,e,i){const a=Vt(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.Tu.forEach(((h,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const y=Vt(d);y.onlineState=g;let _=!1;y.queries.forEach(((b,C)=>{for(const I of C.Sa)I.va(g)&&(_=!0)})),_&&Gd(y)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function ux(r,e,i){const a=Vt(r);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Au.get(e),h=o&&o.key;if(h){let d=new de(xt.comparator);d=d.insert(h,tn.newNoDocument(h,It.min()));const g=Ht().add(h),y=new bc(It.min(),new Map,new de(qt),d,g);await h0(a,y),a.du=a.du.remove(h),a.Au.delete(e),Yd(a)}else await fd(a.localStore,e,!1).then((()=>pd(a,e,i))).catch(La)}async function cx(r,e){const i=Vt(r),a=e.batch.batchId;try{const o=await yA(i.localStore,e);d0(i,a,null),f0(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await yo(i,o)}catch(o){await La(o)}}async function hx(r,e,i){const a=Vt(r);try{const o=await(function(d,g){const y=Vt(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let b;return y.mutationQueue.lookupMutationBatch(_,g).next((C=>($t(C!==null,37113),b=C.keys(),y.mutationQueue.removeMutationBatch(_,C)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,b,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b))).next((()=>y.localDocuments.getDocuments(_,b)))}))})(a.localStore,e);d0(a,e,i),f0(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await yo(a,o)}catch(o){await La(o)}}function f0(r,e){(r.mu.get(e)||[]).forEach((i=>{i.resolve()})),r.mu.delete(e)}function d0(r,e,i){const a=Vt(r);let o=a.Vu[a.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function pd(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),i&&r.Pu.yu(a,i);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||m0(r,a)}))}function m0(r,e){r.Eu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(Ld(r.remoteStore,i),r.du=r.du.remove(e),r.Au.delete(i),Yd(r))}function T_(r,e,i){for(const a of i)a instanceof o0?(r.Ru.addReference(a.key,e),fx(r,a)):a instanceof u0?(yt(Qd,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||m0(r,a.key)):Ct(19791,{wu:a})}function fx(r,e){const i=e.key,a=i.path.canonicalString();r.du.get(i)||r.Eu.has(a)||(yt(Qd,"New document in limbo: "+i),r.Eu.add(a),Yd(r))}function Yd(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const i=new xt(oe.fromString(e)),a=r.fu.next();r.Au.set(a,new ex(i)),r.du=r.du.insert(i,a),n0(r.remoteStore,new ws(ci(Dd(i.path)),a,"TargetPurposeLimboResolution",mc.ce))}}async function yo(r,e,i){const a=Vt(r),o=[],h=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,y)=>{d.push(a.pu(y,e,i).then((_=>{if((_||i)&&a.isPrimaryClient){const b=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;a.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(_){o.push(_);const b=Ud.As(y.targetId,_);h.push(b)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(y,_){const b=Vt(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>lt.forEach(_,(I=>lt.forEach(I.Es,(L=>b.persistence.referenceDelegate.addReference(C,I.targetId,L))).next((()=>lt.forEach(I.ds,(L=>b.persistence.referenceDelegate.removeReference(C,I.targetId,L)))))))))}catch(C){if(!za(C))throw C;yt(kd,"Failed to update sequence numbers: "+C)}for(const C of _){const I=C.targetId;if(!C.fromCache){const L=b.Ms.get(I),z=L.snapshotVersion,ot=L.withLastLimboFreeSnapshotVersion(z);b.Ms=b.Ms.insert(I,ot)}}})(a.localStore,h))}async function dx(r,e){const i=Vt(r);if(!i.currentUser.isEqual(e)){yt(Qd,"User change. New user:",e.toKey());const a=await Jv(i.localStore,e);i.currentUser=e,(function(h,d){h.mu.forEach((g=>{g.forEach((y=>{y.reject(new St(ft.CANCELLED,d))}))})),h.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await yo(i,a.Ls)}}function mx(r,e){const i=Vt(r),a=i.Au.get(e);if(a&&a.hu)return Ht().add(a.key);{let o=Ht();const h=i.Iu.get(e);if(!h)return o;for(const d of h){const g=i.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function p0(r){const e=Vt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ux.bind(null,e),e.Pu.H_=$A.bind(null,e.eventManager),e.Pu.yu=ZA.bind(null,e.eventManager),e}function px(r){const e=Vt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hx.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return gA(this.persistence,new dA,e.initialUser,this.serializer)}Cu(e){return new Zv(Pd.mi,this.serializer)}Du(e){return new SA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class gx extends uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){$t(this.persistence.referenceDelegate instanceof lc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new JS(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Zv((a=>lc.mi(a,i)),this.serializer)}}class gd{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>E_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=dx.bind(null,this.syncEngine),await GA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YA})()}createDatastore(e){const i=Sc(e.databaseInfo.databaseId),a=(function(h){return new CA(h)})(e.databaseInfo);return(function(h,d,g,y){return new MA(h,d,g,y)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,o,h,d,g){return new OA(a,o,h,d,g)})(this.localStore,this.datastore,e.asyncQueue,(i=>E_(this.syncEngine,i,0)),(function(){return m_.v()?new m_:new AA})())}createSyncEngine(e,i){return(function(o,h,d,g,y,_,b){const C=new nx(o,h,d,g,y,_);return b&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Vt(i);yt(Nr,"RemoteStore shutting down."),a.Ea.add(5),await go(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gd.provider={build:()=>new gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class _x{constructor(e,i,a,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=We.UNAUTHENTICATED,this.clientId=bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,(async d=>{yt(ks,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(yt(ks,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=Fd(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Kf(r,e){r.asyncQueue.verifyOperationInProgress(),yt(ks,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener((async o=>{a.isEqual(o)||(await Jv(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function b_(r,e){r.asyncQueue.verifyOperationInProgress();const i=await vx(r);yt(ks,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener((a=>g_(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,o)=>g_(e.remoteStore,o))),r._onlineComponents=e}async function vx(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){yt(ks,"Using user provided OfflineComponentProvider");try{await Kf(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ft.FAILED_PRECONDITION||o.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;Ma("Error using user provided cache. Falling back to memory cache: "+i),await Kf(r,new uc)}}else yt(ks,"Using default OfflineComponentProvider"),await Kf(r,new gx(void 0));return r._offlineComponents}async function g0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(yt(ks,"Using user provided OnlineComponentProvider"),await b_(r,r._uninitializedComponentsProvider._online)):(yt(ks,"Using default OnlineComponentProvider"),await b_(r,new gd))),r._onlineComponents}function Ex(r){return g0(r).then((e=>e.syncEngine))}async function S_(r){const e=await g0(r),i=e.eventManager;return i.onListen=ix.bind(null,e.syncEngine),i.onUnlisten=ax.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=sx.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=lx.bind(null,e.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="firestore.googleapis.com",x_=!0;class R_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new St(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_0,this.ssl=x_}else this.host=e.host,this.ssl=e.ssl??x_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$v;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$S)throw new St(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y0(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new St(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new St(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new St(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rc{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new St(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Sb;switch(a.type){case"firstParty":return new wb(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new St(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=A_.get(i);a&&(yt("ComponentProvider","Removing Datastore"),A_.delete(i),a.terminate())})(this),Promise.resolve()}}function Tx(r,e,i,a={}){r=Rr(r,Rc);const o=dc(e),h=r._getSettings(),d={...h,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${i}`;o&&(q_(`https://${g}`),F_("Firestore",!0)),h.host!==_0&&h.host!==g&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...h,host:g,ssl:o,emulatorOptions:a};if(!Zu(y,d)&&(r._setSettings(y),a.mockUserToken)){let _,b;if(typeof a.mockUserToken=="string")_=a.mockUserToken,b=We.MOCK_USER;else{_=H_(a.mockUserToken,r._app?.options.projectId);const C=a.mockUserToken.sub||a.mockUserToken.user_id;if(!C)throw new St(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new We(C)}r._authCredentials=new Ab(new uv(_,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class Me{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Me(this.firestore,e,this._key)}toJSON(){return{type:Me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(fo(i,Me._jsonSchema))return new Me(e,a||null,new xt(oe.fromString(i.referencePath)))}}Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:Re("string",Me._jsonSchemaVersion),referencePath:Re("string")};class Ms extends wc{constructor(e,i,a){super(e,i,Dd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new xt(e))}withConverter(e){return new Ms(this.firestore,e,this._path)}}function Cc(r,e,...i){if(r=Cr(r),cv("collection","path",e),r instanceof Rc){const a=oe.fromString(e,...i);return Ly(a),new Ms(r,null,a)}{if(!(r instanceof Me||r instanceof Ms))throw new St(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(oe.fromString(e,...i));return Ly(a),new Ms(r.firestore,null,a)}}function jn(r,e,...i){if(r=Cr(r),arguments.length===1&&(e=bd.newId()),cv("doc","path",e),r instanceof Rc){const a=oe.fromString(e,...i);return ky(a),new Me(r,null,new xt(a))}{if(!(r instanceof Me||r instanceof Ms))throw new St(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(oe.fromString(e,...i));return ky(a),new Me(r.firestore,r instanceof Ms?r.converter:null,new xt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="AsyncQueue";class C_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new t0(this,"async_queue_retry"),this._c=()=>{const a=Yf();a&&yt(w_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=Yf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Yf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!za(e))throw e;yt(w_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,qi("INTERNAL UNHANDLED ERROR: ",D_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const o=Hd.createAndSchedule(this,e,i,a,(h=>this.hc(h)));return this.tc.push(o),o}uc(){this.nc&&Ct(47125,{Pc:D_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function D_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(r){return(function(i,a){if(typeof i!="object"||i===null)return!1;const o=i;for(const h of a)if(h in o&&typeof o[h]=="function")return!0;return!1})(r,["next","error","complete"])}class ho extends Rc{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new C_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C_(e),this._firestoreClient=void 0,await e}}}function bx(r,e){const i=typeof r=="object"?r:W_(),a=typeof r=="string"?r:tc,o=X_(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const h=z_("firestore");h&&Tx(o,...h)}return o}function v0(r){if(r._terminated)throw new St(ft.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Sx(r),r._firestoreClient}function Sx(r){const e=r._freezeSettings(),i=(function(o,h,d,g){return new Fb(o,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,y0(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new _x(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(o){const h=o?._online.build();return{_offline:o?._offline.build(h),_online:h}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Qe.fromBase64String(e))}catch(i){throw new St(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new On(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fo(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:Re("string",On._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new St(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new St(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new St(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(fo(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Re("string",di._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==o[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fo(e,mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new mi(e.vectorValues);throw new St(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Re("string",mi._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=/^__.*__$/;class xx{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,i,this.fieldTransforms):new mo(e,this.data,i,this.fieldTransforms)}}function T0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ac:r})}}class Xd{constructor(e,i,a,o,h,d){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(T0(this.Ac)&&Ax.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Rx{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Sc(e)}Cc(e,i,a,o=!1){return new Xd({Ac:e,methodName:i,Dc:a,path:Ge.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wx(r){const e=r._freezeSettings(),i=Sc(r._databaseId);return new Rx(r._databaseId,!!e.ignoreUndefinedProperties,i)}function Cx(r,e,i,a,o,h={}){const d=r.Cc(h.merge||h.mergeFields?2:0,e,i,o);x0("Data must be an object, but it was:",d,a);const g=S0(a,d);let y,_;if(h.merge)y=new Qn(d.fieldMask),_=d.fieldTransforms;else if(h.mergeFields){const b=[];for(const C of h.mergeFields){const I=Dx(e,C,i);if(!d.contains(I))throw new St(ft.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Ix(b,I)||b.push(I)}y=new Qn(b),_=d.fieldTransforms.filter((C=>y.covers(C.field)))}else y=null,_=d.fieldTransforms;return new xx(new Vn(g),y,_)}function b0(r,e){if(A0(r=Cr(r)))return x0("Unsupported field value:",e,r),S0(r,e);if(r instanceof E0)return(function(a,o){if(!T0(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(o);h&&o.fieldTransforms.push(h)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const h=[];let d=0;for(const g of a){let y=b0(g,o.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),d++}return{arrayValue:{values:h}}})(r,e)}return(function(a,o){if((a=Cr(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return mS(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=ue.fromDate(a);return{timestampValue:ac(o.serializer,h)}}if(a instanceof ue){const h=new ue(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:ac(o.serializer,h)}}if(a instanceof di)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof On)return{bytesValue:Hv(o.serializer,a._byteString)};if(a instanceof Me){const h=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(h))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Od(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof mi)return(function(d,g){return{mapValue:{fields:{[vv]:{stringValue:Ev},[ec]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return Nd(g.serializer,_)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Sd(a)}`)})(r,e)}function S0(r,e){const i={};return dv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(r,((a,o)=>{const h=b0(o,e.mc(a));h!=null&&(i[a]=h)})),{mapValue:{fields:i}}}function A0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ue||r instanceof di||r instanceof On||r instanceof Me||r instanceof E0||r instanceof mi)}function x0(r,e,i){if(!A0(i)||!hv(i)){const a=Sd(i);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function Dx(r,e,i){if((e=Cr(e))instanceof Kd)return e._internalPath;if(typeof e=="string")return R0(r,e);throw cc("Field path arguments must be of type string or ",r,!1,void 0,i)}const Nx=new RegExp("[~\\*/\\[\\]]");function R0(r,e,i){if(e.search(Nx)>=0)throw cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Kd(...e.split("."))._internalPath}catch{throw cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function cc(r,e,i,a,o){const h=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(h||d)&&(y+=" (found",h&&(y+=` in field ${a}`),d&&(y+=` in document ${o}`),y+=")"),new St(ft.INVALID_ARGUMENT,g+r+y)}function Ix(r,e){return r.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,i,a,o,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(C0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Mx extends w0{data(){return super.data()}}function C0(r,e){return typeof e=="string"?R0(r,e):e instanceof Kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new St(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ox{convertValue(e,i="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return Mr(e,((o,h)=>{a[o]=this.convertValue(h,i)})),a}convertVectorValue(e){const i=e.fields?.[ec].arrayValue?.values?.map((a=>be(a.doubleValue)));return new mi(i)}convertGeoPoint(e){return new di(be(e.latitude),be(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=gc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(ao(e));default:return null}}convertTimestamp(e){const i=Os(e);return new ue(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=oe.fromString(e);$t(Xv(a),9688,{name:e});const o=new lo(a.get(1),a.get(3)),h=new xt(a.popFirst(5));return o.isEqual(i)||qi(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(r,e,i){let a;return a=r?r.toFirestore(e):e,a}class Zl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wr extends w0{constructor(e,i,a,o,h,d){super(e,i,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(C0("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=wr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",wr._jsonSchema={type:Re("string",wr._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class Ku extends wr{data(e={}){return super.data(e)}}class Na{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new Ku(this._firestore,this._userDataWriter,a.key,a,new Zl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new St(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,h){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const y=new Ku(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Zl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>h||g.type!==3)).map((g=>{const y=new Ku(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Zl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,b=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:Px(g.type),doc:y,oldIndex:_,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Na._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],o=[];return this.docs.forEach((h=>{h._document!==null&&(i.push(h._document),a.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),o.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Px(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:r})}}Na._jsonSchemaVersion="firestore/querySnapshot/1.0",Na._jsonSchema={type:Re("string",Na._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class D0 extends Ox{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,i)}}function Ls(r,e,i){r=Rr(r,Me);const a=Rr(r.firestore,ho),o=jx(r.converter,e);return N0(a,[Cx(wx(a),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,hi.none())])}function Dc(r){return N0(Rr(r.firestore,ho),[new Id(r._key,hi.none())])}function Nc(r,...e){r=Cr(r);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||N_(e[a])||(i=e[a++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(N_(e[a])){const y=e[a];e[a]=y.next?.bind(y),e[a+1]=y.error?.bind(y),e[a+2]=y.complete?.bind(y)}let h,d,g;if(r instanceof Me)d=Rr(r.firestore,ho),g=Dd(r._key.path),h={next:y=>{e[a]&&e[a](Ux(d,r,y))},error:e[a+1],complete:e[a+2]};else{const y=Rr(r,wc);d=Rr(y.firestore,ho),g=y._query;const _=new D0(d);h={next:b=>{e[a]&&e[a](new Na(d,_,y,b))},error:e[a+1],complete:e[a+2]},Vx(r._query)}return(function(_,b,C,I){const L=new yx(I),z=new JA(b,L,C);return _.asyncQueue.enqueueAndForget((async()=>KA(await S_(_),z))),()=>{L.Nu(),_.asyncQueue.enqueueAndForget((async()=>XA(await S_(_),z)))}})(v0(d),g,o,h)}function N0(r,e){return(function(a,o){const h=new xr;return a.asyncQueue.enqueueAndForget((async()=>ox(await Ex(a),o,h))),h.promise})(v0(r),e)}function Ux(r,e,i){const a=i.docs.get(e._key),o=new D0(r);return new wr(r,o,e._key,a,new Zl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(o){ka=o})(Z_),io(new Ia("firestore",((a,{instanceIdentifier:o,options:h})=>{const d=a.getProvider("app").getImmediate(),g=new ho(new xb(a.getProvider("auth-internal")),new Cb(d,a.getProvider("app-check-internal")),(function(_,b){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new St(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lo(_.options.projectId,b)})(d,o),d);return h={useFetchStreams:i,...h},g._setSettings(h),g}),"PUBLIC").setMultipleInstances(!0)),Ns(Oy,jy,e),Ns(Oy,jy,"esm2020")})();var kx="firebase",Lx="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns(kx,Lx,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firebasestorage.googleapis.com",zx="storageBucket",Bx=120*1e3,qx=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Ir{constructor(e,i,a=0){super(Xf(e),`Firebase Storage: ${i} (${Xf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_i.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yi||(yi={}));function Xf(r){return"storage/"+r}function Hx(){const r="An unknown error occurred, please check the error payload for server response.";return new _i(yi.UNKNOWN,r)}function Fx(){return new _i(yi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gx(){return new _i(yi.CANCELED,"User canceled the upload/download.")}function Qx(r){return new _i(yi.INVALID_URL,"Invalid URL '"+r+"'.")}function Yx(r){return new _i(yi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function I_(r){return new _i(yi.INVALID_ARGUMENT,r)}function M0(){return new _i(yi.APP_DELETED,"The Firebase app was deleted.")}function Kx(r){return new _i(yi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let a;try{a=Yn.makeFromUrl(e,i)}catch{return new Yn(e,"")}if(a.path==="")return a;throw Yx(e)}static makeFromUrl(e,i){let a=null;const o="([A-Za-z0-9.\\-_]+)";function h(dt){dt.path.charAt(dt.path.length-1)==="/"&&(dt.path_=dt.path_.slice(0,-1))}const d="(/(.*))?$",g=new RegExp("^gs://"+o+d,"i"),y={bucket:1,path:3};function _(dt){dt.path_=decodeURIComponent(dt.path)}const b="v[A-Za-z0-9_]+",C=i.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",L=new RegExp(`^https?://${C}/${b}/b/${o}/o${I}`,"i"),z={bucket:1,path:3},ot=i===I0?"(?:storage.googleapis.com|storage.cloud.google.com)":i,X="([^?#]*)",ut=new RegExp(`^https?://${ot}/${o}/${X}`,"i"),ht=[{regex:g,indices:y,postModify:h},{regex:L,indices:z,postModify:_},{regex:ut,indices:{bucket:1,path:2},postModify:_}];for(let dt=0;dt<ht.length;dt++){const ct=ht[dt],it=ct.regex.exec(e);if(it){const N=it[ct.indices.bucket];let S=it[ct.indices.path];S||(S=""),a=new Yn(N,S),ct.postModify(a);break}}if(a==null)throw Qx(e);return a}}class Xx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(r,e,i){let a=1,o=null,h=null,d=!1,g=0;function y(){return g===2}let _=!1;function b(...X){_||(_=!0,e.apply(null,X))}function C(X){o=setTimeout(()=>{o=null,r(L,y())},X)}function I(){h&&clearTimeout(h)}function L(X,...ut){if(_){I();return}if(X){I(),b.call(null,X,...ut);return}if(y()||d){I(),b.call(null,X,...ut);return}a<64&&(a*=2);let ht;g===1?(g=2,ht=0):ht=(a+Math.random())*1e3,C(ht)}let z=!1;function ot(X){z||(z=!0,I(),!_&&(o!==null?(X||(g=2),clearTimeout(o),C(0)):X||(g=1)))}return C(0),h=setTimeout(()=>{d=!0,ot(!0)},i),ot}function Zx(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(r){return r!==void 0}function M_(r,e,i,a){if(a<e)throw I_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>i)throw I_(`Invalid value for '${r}'. Expected ${i} or less.`)}function Wx(r){const e=encodeURIComponent;let i="?";for(const a in r)if(r.hasOwnProperty(a)){const o=e(a)+"="+e(r[a]);i=i+o+"&"}return i=i.slice(0,-1),i}var hc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(hc||(hc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(r,e){const i=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,h=e.indexOf(r)!==-1;return i||o||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,i,a,o,h,d,g,y,_,b,C,I=!0,L=!1){this.url_=e,this.method_=i,this.headers_=a,this.body_=o,this.successCodes_=h,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=y,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=C,this.retry=I,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,ot)=>{this.resolve_=z,this.reject_=ot,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new qu(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const d=g=>{const y=g.loaded,_=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,_)};this.progressCallback_!==null&&h.addUploadProgressListener(d),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(d),this.pendingConnection_=null;const g=h.getErrorCode()===hc.NO_ERROR,y=h.getStatus();if(!g||t2(y,this.additionalRetryCodes_)&&this.retry){const b=h.getErrorCode()===hc.ABORT;a(!1,new qu(!1,null,b));return}const _=this.successCodes_.indexOf(y)!==-1;a(!0,new qu(_,h))})},i=(a,o)=>{const h=this.resolve_,d=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(g,g.getResponse());Jx(y)?h(y):h()}catch(y){d(y)}else if(g!==null){const y=Hx();y.serverResponse=g.getErrorText(),this.errorCallback_?d(this.errorCallback_(g,y)):d(y)}else if(o.canceled){const y=this.appDelete_?M0():Gx();d(y)}else{const y=Fx();d(y)}};this.canceled_?i(!1,new qu(!1,null,!0)):this.backoffId_=$x(e,i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Zx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qu{constructor(e,i,a){this.wasSuccessCode=e,this.connection=i,this.canceled=!!a}}function n2(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function i2(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function s2(r,e){e&&(r["X-Firebase-GMPID"]=e)}function r2(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function a2(r,e,i,a,o,h,d=!0,g=!1){const y=Wx(r.urlParams),_=r.url+y,b=Object.assign({},r.headers);return s2(b,e),n2(b,i),i2(b,h),r2(b,a),new e2(_,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function o2(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,i){this._service=e,i instanceof Yn?this._location=i:this._location=Yn.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new fc(e,i)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o2(this._location.path)}get storage(){return this._service}get parent(){const e=l2(this._location.path);if(e===null)return null;const i=new Yn(this._location.bucket,e);return new fc(this._service,i)}_throwIfRoot(e){if(this._location.path==="")throw Kx(e)}}function V_(r,e){const i=e?.[zx];return i==null?null:Yn.makeFromBucketSpec(i,r)}function u2(r,e,i,a={}){r.host=`${e}:${i}`;const o=dc(e);o&&(q_(`https://${r.host}/b`),F_("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:h}=a;h&&(r._overrideAuthToken=typeof h=="string"?h:H_(h,r.app.options.projectId))}class c2{constructor(e,i,a,o,h,d=!1){this.app=e,this._authProvider=i,this._appCheckProvider=a,this._url=o,this._firebaseVersion=h,this._isUsingEmulator=d,this._bucket=null,this._host=I0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bx,this._maxUploadRetryTime=qx,this._requests=new Set,o!=null?this._bucket=Yn.makeFromBucketSpec(o,this._host):this._bucket=V_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=V_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){M_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){M_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const i=await e.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if($_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fc(this,e)}_makeRequest(e,i,a,o,h=!0){if(this._deleted)return new Xx(M0());{const d=a2(e,this._appId,a,o,i,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,i){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,i,a,o).getPromise()}}const O_="@firebase/storage",j_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="storage";function h2(r=W_(),e){r=Cr(r);const a=X_(r,V0).getImmediate({identifier:e}),o=z_("storage");return o&&f2(a,...o),a}function f2(r,e,i,a={}){u2(r,e,i,a)}function d2(r,{instanceIdentifier:e}){const i=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new c2(i,a,o,e,Z_)}function m2(){io(new Ia(V0,d2,"PUBLIC").setMultipleInstances(!0)),Ns(O_,j_,""),Ns(O_,j_,"esm2020")}m2();const p2={apiKey:"AIzaSyAZBf9fUWZoXnYJyBvBGEvpiu7DbHkG5Iw",authDomain:"crm-ver2.firebaseapp.com",projectId:"crm-ver2",storageBucket:"crm-ver2.firebasestorage.app",messagingSenderId:"993359540287",appId:"1:993359540287:web:43ad484af7c6616780088a"},O0=J_(p2),en=bx(O0);h2(O0);const Ic="customers",Mc="activities",Vc="meetings",Oc="propertySelections",g2=async r=>{try{const e=r.map(i=>Ls(jn(en,Ic,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving customers:",e)}},Xu=async r=>{try{await Ls(jn(en,Ic,r.id),r)}catch(e){console.error("Error saving customer:",e)}},j0=async r=>{try{await Dc(jn(en,Ic,r))}catch(e){console.error("Error deleting customer:",e)}},P0=r=>Nc(Cc(en,Ic),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in customers subscription:",e)}),y2=async r=>{try{const e=r.map(i=>Ls(jn(en,Mc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving activities:",e)}},U0=async r=>{try{await Ls(jn(en,Mc,r.id),r)}catch(e){console.error("Error saving activity:",e)}},k0=async r=>{try{await Dc(jn(en,Mc,r))}catch(e){console.error("Error deleting activity:",e)}},L0=r=>Nc(Cc(en,Mc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in activities subscription:",e)}),_2=async r=>{try{const e=r.map(i=>Ls(jn(en,Vc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving meetings:",e)}},z0=async r=>{try{await Ls(jn(en,Vc,r.id),r)}catch(e){console.error("Error saving meeting:",e)}},B0=async r=>{try{await Dc(jn(en,Vc,r))}catch(e){console.error("Error deleting meeting:",e)}},q0=r=>Nc(Cc(en,Vc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in meetings subscription:",e)}),v2=async r=>{try{const e=r.map(i=>Ls(jn(en,Oc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving property selections:",e)}},H0=async r=>{try{await Ls(jn(en,Oc,r.id),r)}catch(e){console.error("Error saving property selection:",e)}},F0=async r=>{try{await Dc(jn(en,Oc,r))}catch(e){console.error("Error deleting property selection:",e)}},G0=r=>Nc(Cc(en,Oc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));r(i)},e=>{console.error("Error in property selections subscription:",e)}),E2=Object.freeze(Object.defineProperty({__proto__:null,deleteActivity:k0,deleteCustomer:j0,deleteMeeting:B0,deletePropertySelection:F0,saveActivities:y2,saveActivity:U0,saveCustomer:Xu,saveCustomers:g2,saveMeeting:z0,saveMeetings:_2,savePropertySelection:H0,savePropertySelections:v2,subscribeToActivities:L0,subscribeToCustomers:P0,subscribeToMeetings:q0,subscribeToPropertySelections:G0},Symbol.toStringTag,{value:"Module"}));new Date().toISOString(),new Date().toISOString(),new Date().toISOString();function T2(){const[r,e]=Tt.useState([]),[i,a]=Tt.useState([]),[o,h]=Tt.useState([]),[d,g]=Tt.useState([]),[y,_]=Tt.useState(null),[b,C]=Tt.useState(!1),[I,L]=Tt.useState(null),[z,ot]=Tt.useState("전체"),[X,ut]=Tt.useState(null),[et,ht]=Tt.useState(!1),dt=Tt.useRef(null);Tt.useEffect(()=>{const rt=P0(bt=>{e(bt)}),W=L0(bt=>{a(bt)}),Et=q0(bt=>{h(bt)}),_t=G0(bt=>{g(bt)});return()=>{rt(),W(),Et(),_t()}},[]),Tt.useEffect(()=>{if(r.length===0||o.length===0)return;const rt=new Date;rt.setHours(0,0,0,0),r.forEach(W=>{o.filter(bt=>bt.customerId===W.id).some(bt=>{const kt=new Date(bt.date);return kt.setHours(0,0,0,0),kt<rt})&&W.status==="신규"&&Xu({...W,status:"진행중"})})},[r,o]);const ct=rt=>{ot(rt),ut(null)},it=rt=>{ut(rt)},N=rt=>{y===rt.id?_(null):_(rt.id)},S=(rt=null)=>{L(rt),C(!0),rt&&rt.id===y&&_(null)},R=()=>{C(!1),L(null)},V=async rt=>{await Xu(rt)},D=async rt=>{const W={...rt,isFavorite:!rt.isFavorite};await Xu(W)},O=async rt=>{confirm(`"${rt.name}" 고객을 정말 삭제하시겠습니까?`)&&(await j0(rt.id),y===rt.id&&_(null))},w=async rt=>{await U0(rt)},gt=async rt=>{confirm("정말 이 활동을 삭제하시겠습니까?")&&await k0(rt)},nt=async rt=>{await z0(rt)},P=async rt=>{confirm("정말 이 미팅을 삭제하시겠습니까?")&&await B0(rt)},J=async rt=>{await H0(rt)},H=async rt=>{confirm("정말 이 매물선정을 삭제하시겠습니까?")&&await F0(rt)},Z=()=>{const rt={customers:r,activities:i,meetings:o,propertySelections:d},W=new Blob([JSON.stringify(rt,null,2)],{type:"application/json"}),Et=URL.createObjectURL(W),_t=document.createElement("a");_t.href=Et,_t.download=`customer-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_t),_t.click(),document.body.removeChild(_t),URL.revokeObjectURL(Et)},x=async rt=>{const W=rt.target.files[0];if(!W)return;const Et=new FileReader;Et.onload=async _t=>{try{const bt=JSON.parse(_t.target.result);if(bt&&Array.isArray(bt.customers)&&Array.isArray(bt.activities)){const{saveCustomers:kt,saveActivities:Lt,saveMeetings:Yt,savePropertySelections:Nt}=await IE(async()=>{const{saveCustomers:Ot,saveActivities:vi,saveMeetings:zs,savePropertySelections:Ye}=await Promise.resolve().then(()=>E2);return{saveCustomers:Ot,saveActivities:vi,saveMeetings:zs,savePropertySelections:Ye}},void 0);await kt(bt.customers||[]),await Lt(bt.activities||[]),await Yt(bt.meetings||[]),await Nt(bt.propertySelections||[]),alert("데이터가 성공적으로 복원되었습니다.")}else throw new Error("잘못된 파일 형식입니다.")}catch(bt){alert(`복원 실패: ${bt.message}`)}},Et.readAsText(W),rt.target.value=null},U=rt=>{const W=i.filter(_t=>_t.customerId===rt);if(W.length===0)return null;const Et=W.sort((_t,bt)=>new Date(bt.date)-new Date(_t.date));return new Date(Et[0].date)},K=rt=>({전체:"등록된 모든 고객을 표시합니다",신규:"상태가 신규로 설정된 고객들을 표시합니다",진행중:"상태가 진행중으로 설정된 고객들을 표시합니다",장기관리고객:"장기적으로 관리 중인 고객들을 표시합니다",보류:"상태가 보류로 설정된 고객들을 표시합니다",집중고객:"즐겨찾기로 표시된 고객들을 집중적으로 관리하기 위해 표시합니다",오늘미팅:"오늘 일정이 확정된 미팅이 있는 고객들을 표시합니다",미팅일확정:"오늘 이후로 미팅이 예정된 고객들을 표시합니다",오늘연락:"오늘 활동 기록(전화, 문자, 방문 등)이 있는 고객들을 표시합니다",어제연락:"어제 활동 기록(전화, 문자, 방문 등)이 있는 고객들을 표시합니다",연락할고객:"어제와 오늘 모두 활동 기록이 없는 고객들입니다 (보류 상태 제외). 마지막 연락일이 오래된 순으로 정렬됩니다"})[rt]||"",Q=(()=>{const rt=new Date;rt.setHours(0,0,0,0);let W=r.filter(Et=>{if(z==="집중고객")return Et.isFavorite;if(z==="장기관리고객")return Et.status==="장기관리고객";if(z==="오늘미팅")return o.filter(Lt=>Lt.customerId===Et.id).some(Lt=>{const Yt=new Date(Lt.date);return Yt.setHours(0,0,0,0),Yt.getTime()===rt.getTime()});if(z==="미팅일확정")return o.filter(Lt=>Lt.customerId===Et.id).some(Lt=>{const Yt=new Date(Lt.date);return Yt.setHours(0,0,0,0),Yt>rt});if(z==="오늘연락")return i.filter(Lt=>Lt.customerId===Et.id).some(Lt=>{const Yt=new Date(Lt.date);return Yt.setHours(0,0,0,0),Yt.getTime()===rt.getTime()});if(z==="어제연락")return i.filter(Lt=>Lt.customerId===Et.id).some(Lt=>{const Yt=new Date(Lt.date);Yt.setHours(0,0,0,0);const Nt=new Date(rt);return Nt.setDate(Nt.getDate()-1),Yt.getTime()===Nt.getTime()});if(z==="연락할고객"){if(Et.status==="보류")return!1;const kt=i.filter(Nt=>Nt.customerId===Et.id),Lt=new Date(rt),Yt=new Date(rt);return Yt.setDate(Yt.getDate()-1),!kt.some(Nt=>{const Ot=new Date(Nt.date);return Ot.setHours(0,0,0,0),Ot.getTime()===Lt.getTime()||Ot.getTime()===Yt.getTime()})}const _t=z==="전체"||Et.status===z,bt=!X||Et.progress===X;return _t&&bt});return z==="오늘미팅"?W.sort((Et,_t)=>{const bt=o.filter(Nt=>{const Ot=new Date(Nt.date);return Ot.setHours(0,0,0,0),Nt.customerId===Et.id&&Ot.getTime()===rt.getTime()}),kt=o.filter(Nt=>{const Ot=new Date(Nt.date);return Ot.setHours(0,0,0,0),Nt.customerId===_t.id&&Ot.getTime()===rt.getTime()});if(bt.length===0)return 1;if(kt.length===0)return-1;const Lt=new Date(bt[0].date).getTime(),Yt=new Date(kt[0].date).getTime();return Lt-Yt}):z==="미팅일확정"?W.sort((Et,_t)=>{const bt=o.filter(Nt=>{const Ot=new Date(Nt.date);return Ot.setHours(0,0,0,0),Nt.customerId===Et.id&&Ot>rt}),kt=o.filter(Nt=>{const Ot=new Date(Nt.date);return Ot.setHours(0,0,0,0),Nt.customerId===_t.id&&Ot>rt});if(bt.length===0)return 1;if(kt.length===0)return-1;const Lt=bt.sort((Nt,Ot)=>new Date(Nt.date)-new Date(Ot.date))[0],Yt=kt.sort((Nt,Ot)=>new Date(Nt.date)-new Date(Ot.date))[0];return new Date(Lt.date)-new Date(Yt.date)}):z==="오늘연락"?W.sort((Et,_t)=>{const bt=i.filter(Nt=>Nt.customerId===Et.id&&new Date(Nt.date).toDateString()===rt.toDateString()),kt=i.filter(Nt=>Nt.customerId===_t.id&&new Date(Nt.date).toDateString()===rt.toDateString());if(bt.length===0)return 1;if(kt.length===0)return-1;const Lt=bt.sort((Nt,Ot)=>new Date(Ot.date)-new Date(Nt.date))[0],Yt=kt.sort((Nt,Ot)=>new Date(Ot.date)-new Date(Nt.date))[0];return new Date(Yt.date)-new Date(Lt.date)}):z==="어제연락"?W.sort((Et,_t)=>{const bt=new Date(rt);bt.setDate(bt.getDate()-1);const kt=i.filter(Ot=>Ot.customerId===Et.id&&new Date(Ot.date).toDateString()===bt.toDateString()),Lt=i.filter(Ot=>Ot.customerId===_t.id&&new Date(Ot.date).toDateString()===bt.toDateString());if(kt.length===0)return 1;if(Lt.length===0)return-1;const Yt=kt.sort((Ot,vi)=>new Date(vi.date)-new Date(Ot.date))[0],Nt=Lt.sort((Ot,vi)=>new Date(vi.date)-new Date(Ot.date))[0];return new Date(Nt.date)-new Date(Yt.date)}):z==="연락할고객"&&W.sort((Et,_t)=>{const bt=U(Et.id),kt=U(_t.id);return bt?kt?bt-kt:-1:1}),W})(),mt=r.find(rt=>rt.id===y);return p.jsxs("div",{className:"app-container",children:[et&&p.jsx("div",{className:"mobile-overlay",onClick:()=>ht(!1)}),p.jsx(VE,{activeFilter:z,onFilterChange:ct,customers:r,meetings:o,activities:i,isMobileOpen:et,onMobileClose:()=>ht(!1)}),p.jsxs("div",{className:"main-content",children:[p.jsxs("header",{className:"main-header",children:[p.jsx("button",{className:"hamburger-btn",onClick:()=>ht(!0),children:"☰"}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[p.jsx("h1",{children:"고객 목록"}),z!=="전체"&&p.jsxs("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:["필터: ",z," - ",K(z)]})]}),p.jsxs("div",{className:"header-actions",children:[p.jsx("button",{onClick:()=>S(),className:"btn-primary",children:"+ 고객 추가"}),p.jsx("button",{onClick:Z,className:"btn-secondary",children:"백업"}),p.jsx("button",{onClick:()=>dt.current?.click(),className:"btn-secondary",children:"복원"}),p.jsx("input",{type:"file",ref:dt,onChange:x,style:{display:"none"},accept:".json"})]})]}),p.jsx("main",{className:"table-container",children:p.jsx(OE,{customers:Q,onSelectCustomer:N,onEdit:S,onDelete:O,selectedCustomerId:y,activeFilter:z,activeProgressFilter:X,onProgressFilterChange:it,allCustomers:r,onFavoriteCustomer:D})})]}),p.jsx(YE,{selectedCustomer:mt,onClose:()=>_(null),onEditCustomer:S,onUpdateCustomer:V,onDeleteCustomer:O,activities:i,onSaveActivity:w,onDeleteActivity:gt,meetings:o,onSaveMeeting:nt,onDeleteMeeting:P,propertySelections:d,onSavePropertySelection:J,onDeletePropertySelection:H}),p.jsx(UE,{isOpen:b,onClose:R,onSave:V,editData:I})]})}CE.createRoot(document.getElementById("root")).render(p.jsx(Tt.StrictMode,{children:p.jsx(T2,{})}));
