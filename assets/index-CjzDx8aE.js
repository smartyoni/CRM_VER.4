(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();function wx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var kf={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function Cx(){if(cy)return Jl;cy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,h){var p=null;if(h!==void 0&&(p=""+h),o.key!==void 0&&(p=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:s,type:a,key:p,ref:o!==void 0?o:null,props:h}}return Jl.Fragment=e,Jl.jsx=i,Jl.jsxs=i,Jl}var hy;function Rx(){return hy||(hy=1,kf.exports=Cx()),kf.exports}var f=Rx(),Pf={exports:{}},Yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function Dx(){if(fy)return Yt;fy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.iterator;function V(I){return I===null||typeof I!="object"?null:(I=C&&I[C]||I["@@iterator"],typeof I=="function"?I:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,J={};function k(I,$,z){this.props=I,this.context=$,this.refs=J,this.updater=z||L}k.prototype.isReactComponent={},k.prototype.setState=function(I,$){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,$,"setState")},k.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function H(){}H.prototype=k.prototype;function rt(I,$,z){this.props=I,this.context=$,this.refs=J,this.updater=z||L}var at=rt.prototype=new H;at.constructor=rt,q(at,k.prototype),at.isPureReactComponent=!0;var ft=Array.isArray,et={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function N(I,$,z,U,W,ot){return z=ot.ref,{$$typeof:s,type:I,key:$,ref:z!==void 0?z:null,props:ot}}function w(I,$){return N(I.type,$,void 0,void 0,void 0,I.props)}function T(I){return typeof I=="object"&&I!==null&&I.$$typeof===s}function j(I){var $={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(z){return $[z]})}var D=/\/+/g;function R(I,$){return typeof I=="object"&&I!==null&&I.key!=null?j(""+I.key):$.toString(36)}function S(){}function mt(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(S,S):(I.status="pending",I.then(function($){I.status==="pending"&&(I.status="fulfilled",I.value=$)},function($){I.status==="pending"&&(I.status="rejected",I.reason=$)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function xt(I,$,z,U,W){var ot=typeof I;(ot==="undefined"||ot==="boolean")&&(I=null);var G=!1;if(I===null)G=!0;else switch(ot){case"bigint":case"string":case"number":G=!0;break;case"object":switch(I.$$typeof){case s:case e:G=!0;break;case b:return G=I._init,xt(G(I._payload),$,z,U,W)}}if(G)return W=W(I),G=U===""?"."+R(I,0):U,ft(W)?(z="",G!=null&&(z=G.replace(D,"$&/")+"/"),xt(W,$,z,"",function(Ct){return Ct})):W!=null&&(T(W)&&(W=w(W,z+(W.key==null||I&&I.key===W.key?"":(""+W.key).replace(D,"$&/")+"/")+G)),$.push(W)),1;G=0;var yt=U===""?".":U+":";if(ft(I))for(var gt=0;gt<I.length;gt++)U=I[gt],ot=yt+R(U,gt),G+=xt(U,$,z,ot,W);else if(gt=V(I),typeof gt=="function")for(I=gt.call(I),gt=0;!(U=I.next()).done;)U=U.value,ot=yt+R(U,gt++),G+=xt(U,$,z,ot,W);else if(ot==="object"){if(typeof I.then=="function")return xt(mt(I),$,z,U,W);throw $=String(I),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return G}function O(I,$,z){if(I==null)return I;var U=[],W=0;return xt(I,U,"","",function(ot){return $.call(z,ot,W++)}),U}function nt(I){if(I._status===-1){var $=I._result;$=$(),$.then(function(z){(I._status===0||I._status===-1)&&(I._status=1,I._result=z)},function(z){(I._status===0||I._status===-1)&&(I._status=2,I._result=z)}),I._status===-1&&(I._status=0,I._result=$)}if(I._status===1)return I._result.default;throw I._result}var ht=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function vt(){}return Yt.Children={map:O,forEach:function(I,$,z){O(I,function(){$.apply(this,arguments)},z)},count:function(I){var $=0;return O(I,function(){$++}),$},toArray:function(I){return O(I,function($){return $})||[]},only:function(I){if(!T(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Yt.Component=k,Yt.Fragment=i,Yt.Profiler=o,Yt.PureComponent=rt,Yt.StrictMode=a,Yt.Suspense=v,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return et.H.useMemoCache(I)}},Yt.cache=function(I){return function(){return I.apply(null,arguments)}},Yt.cloneElement=function(I,$,z){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var U=q({},I.props),W=I.key,ot=void 0;if($!=null)for(G in $.ref!==void 0&&(ot=void 0),$.key!==void 0&&(W=""+$.key),$)!K.call($,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&$.ref===void 0||(U[G]=$[G]);var G=arguments.length-2;if(G===1)U.children=z;else if(1<G){for(var yt=Array(G),gt=0;gt<G;gt++)yt[gt]=arguments[gt+2];U.children=yt}return N(I.type,W,void 0,void 0,ot,U)},Yt.createContext=function(I){return I={$$typeof:p,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:h,_context:I},I},Yt.createElement=function(I,$,z){var U,W={},ot=null;if($!=null)for(U in $.key!==void 0&&(ot=""+$.key),$)K.call($,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(W[U]=$[U]);var G=arguments.length-2;if(G===1)W.children=z;else if(1<G){for(var yt=Array(G),gt=0;gt<G;gt++)yt[gt]=arguments[gt+2];W.children=yt}if(I&&I.defaultProps)for(U in G=I.defaultProps,G)W[U]===void 0&&(W[U]=G[U]);return N(I,ot,void 0,void 0,null,W)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(I){return{$$typeof:g,render:I}},Yt.isValidElement=T,Yt.lazy=function(I){return{$$typeof:b,_payload:{_status:-1,_result:I},_init:nt}},Yt.memo=function(I,$){return{$$typeof:y,type:I,compare:$===void 0?null:$}},Yt.startTransition=function(I){var $=et.T,z={};et.T=z;try{var U=I(),W=et.S;W!==null&&W(z,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(vt,ht)}catch(ot){ht(ot)}finally{et.T=$}},Yt.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()},Yt.use=function(I){return et.H.use(I)},Yt.useActionState=function(I,$,z){return et.H.useActionState(I,$,z)},Yt.useCallback=function(I,$){return et.H.useCallback(I,$)},Yt.useContext=function(I){return et.H.useContext(I)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(I,$){return et.H.useDeferredValue(I,$)},Yt.useEffect=function(I,$,z){var U=et.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return U.useEffect(I,$)},Yt.useId=function(){return et.H.useId()},Yt.useImperativeHandle=function(I,$,z){return et.H.useImperativeHandle(I,$,z)},Yt.useInsertionEffect=function(I,$){return et.H.useInsertionEffect(I,$)},Yt.useLayoutEffect=function(I,$){return et.H.useLayoutEffect(I,$)},Yt.useMemo=function(I,$){return et.H.useMemo(I,$)},Yt.useOptimistic=function(I,$){return et.H.useOptimistic(I,$)},Yt.useReducer=function(I,$,z){return et.H.useReducer(I,$,z)},Yt.useRef=function(I){return et.H.useRef(I)},Yt.useState=function(I){return et.H.useState(I)},Yt.useSyncExternalStore=function(I,$,z){return et.H.useSyncExternalStore(I,$,z)},Yt.useTransition=function(){return et.H.useTransition()},Yt.version="19.1.1",Yt}var dy;function _d(){return dy||(dy=1,Pf.exports=Dx()),Pf.exports}var pt=_d();const Nx=wx(pt);var Uf={exports:{}},to={},zf={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function jx(){return py||(py=1,(function(s){function e(O,nt){var ht=O.length;O.push(nt);t:for(;0<ht;){var vt=ht-1>>>1,I=O[vt];if(0<o(I,nt))O[vt]=nt,O[ht]=I,ht=vt;else break t}}function i(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var nt=O[0],ht=O.pop();if(ht!==nt){O[0]=ht;t:for(var vt=0,I=O.length,$=I>>>1;vt<$;){var z=2*(vt+1)-1,U=O[z],W=z+1,ot=O[W];if(0>o(U,ht))W<I&&0>o(ot,U)?(O[vt]=ot,O[W]=ht,vt=W):(O[vt]=U,O[z]=ht,vt=z);else if(W<I&&0>o(ot,ht))O[vt]=ot,O[W]=ht,vt=W;else break t}}return nt}function o(O,nt){var ht=O.sortIndex-nt.sortIndex;return ht!==0?ht:O.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var p=Date,g=p.now();s.unstable_now=function(){return p.now()-g}}var v=[],y=[],b=1,C=null,V=3,L=!1,q=!1,J=!1,k=!1,H=typeof setTimeout=="function"?setTimeout:null,rt=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function ft(O){for(var nt=i(y);nt!==null;){if(nt.callback===null)a(y);else if(nt.startTime<=O)a(y),nt.sortIndex=nt.expirationTime,e(v,nt);else break;nt=i(y)}}function et(O){if(J=!1,ft(O),!q)if(i(v)!==null)q=!0,K||(K=!0,R());else{var nt=i(y);nt!==null&&xt(et,nt.startTime-O)}}var K=!1,N=-1,w=5,T=-1;function j(){return k?!0:!(s.unstable_now()-T<w)}function D(){if(k=!1,K){var O=s.unstable_now();T=O;var nt=!0;try{t:{q=!1,J&&(J=!1,rt(N),N=-1),L=!0;var ht=V;try{e:{for(ft(O),C=i(v);C!==null&&!(C.expirationTime>O&&j());){var vt=C.callback;if(typeof vt=="function"){C.callback=null,V=C.priorityLevel;var I=vt(C.expirationTime<=O);if(O=s.unstable_now(),typeof I=="function"){C.callback=I,ft(O),nt=!0;break e}C===i(v)&&a(v),ft(O)}else a(v);C=i(v)}if(C!==null)nt=!0;else{var $=i(y);$!==null&&xt(et,$.startTime-O),nt=!1}}break t}finally{C=null,V=ht,L=!1}nt=void 0}}finally{nt?R():K=!1}}}var R;if(typeof at=="function")R=function(){at(D)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,mt=S.port2;S.port1.onmessage=D,R=function(){mt.postMessage(null)}}else R=function(){H(D,0)};function xt(O,nt){N=H(function(){O(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(O){O.callback=null},s.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<O?Math.floor(1e3/O):5},s.unstable_getCurrentPriorityLevel=function(){return V},s.unstable_next=function(O){switch(V){case 1:case 2:case 3:var nt=3;break;default:nt=V}var ht=V;V=nt;try{return O()}finally{V=ht}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(O,nt){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ht=V;V=O;try{return nt()}finally{V=ht}},s.unstable_scheduleCallback=function(O,nt,ht){var vt=s.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?vt+ht:vt):ht=vt,O){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ht+I,O={id:b++,callback:nt,priorityLevel:O,startTime:ht,expirationTime:I,sortIndex:-1},ht>vt?(O.sortIndex=ht,e(y,O),i(v)===null&&O===i(y)&&(J?(rt(N),N=-1):J=!0,xt(et,ht-vt))):(O.sortIndex=I,e(v,O),q||L||(q=!0,K||(K=!0,R()))),O},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(O){var nt=V;return function(){var ht=V;V=nt;try{return O.apply(this,arguments)}finally{V=ht}}}})(Lf)),Lf}var my;function Ix(){return my||(my=1,zf.exports=jx()),zf.exports}var Bf={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function Mx(){if(gy)return dn;gy=1;var s=_d();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(v,y,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:C==null?null:""+C,children:v,containerInfo:y,implementation:b}}var p=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,dn.createPortal=function(v,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return h(v,y,null,b)},dn.flushSync=function(v){var y=p.T,b=a.p;try{if(p.T=null,a.p=2,v)return v()}finally{p.T=y,a.p=b,a.d.f()}},dn.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(v,y))},dn.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},dn.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var b=y.as,C=g(b,y.crossOrigin),V=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?a.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:C,integrity:V,fetchPriority:L}):b==="script"&&a.d.X(v,{crossOrigin:C,integrity:V,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dn.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);a.d.M(v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(v)},dn.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,C=g(b,y.crossOrigin);a.d.L(v,b,{crossOrigin:C,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dn.preloadModule=function(v,y){if(typeof v=="string")if(y){var b=g(y.as,y.crossOrigin);a.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(v)},dn.requestFormReset=function(v){a.d.r(v)},dn.unstable_batchedUpdates=function(v,y){return v(y)},dn.useFormState=function(v,y,b){return p.H.useFormState(v,y,b)},dn.useFormStatus=function(){return p.H.useHostTransitionStatus()},dn.version="19.1.1",dn}var yy;function Vx(){if(yy)return Bf.exports;yy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Bf.exports=Mx(),Bf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function Ox(){if(vy)return to;vy=1;var s=Ix(),e=_d(),i=Vx();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function p(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(a(188))}function v(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var r=t,l=n;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){r=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return g(c),t;if(d===l)return g(c),n;d=d.sibling}throw Error(a(188))}if(r.return!==l.return)r=c,l=d;else{for(var x=!1,E=c.child;E;){if(E===r){x=!0,r=c,l=d;break}if(E===l){x=!0,l=c,r=d;break}E=E.sibling}if(!x){for(E=d.child;E;){if(E===r){x=!0,r=d,l=c;break}if(E===l){x=!0,l=d,r=c;break}E=E.sibling}if(!x)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:n}function y(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=y(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,C=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),rt=Symbol.for("react.consumer"),at=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var S=Symbol.for("react.client.reference");function mt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===S?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case k:return"Profiler";case J:return"StrictMode";case et:return"Suspense";case K:return"SuspenseList";case T:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case at:return(t.displayName||"Context")+".Provider";case rt:return(t._context.displayName||"Context")+".Consumer";case ft:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:mt(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return mt(t(n))}catch{}}return null}var xt=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},vt=[],I=-1;function $(t){return{current:t}}function z(t){0>I||(t.current=vt[I],vt[I]=null,I--)}function U(t,n){I++,vt[I]=t.current,t.current=n}var W=$(null),ot=$(null),G=$(null),yt=$(null);function gt(t,n){switch(U(G,n),U(ot,t),U(W,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ug(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ug(n),t=zg(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}z(W),U(W,t)}function Ct(){z(W),z(ot),z(G)}function Qt(t){t.memoizedState!==null&&U(yt,t);var n=W.current,r=zg(n,t.type);n!==r&&(U(ot,t),U(W,r))}function te(t){ot.current===t&&(z(W),z(ot)),yt.current===t&&(z(yt),Kl._currentValue=ht)}var ze=Object.prototype.hasOwnProperty,Ge=s.unstable_scheduleCallback,oe=s.unstable_cancelCallback,Bt=s.unstable_shouldYield,En=s.unstable_requestPaint,je=s.unstable_now,oi=s.unstable_getCurrentPriorityLevel,ve=s.unstable_ImmediatePriority,Ae=s.unstable_UserBlockingPriority,Tn=s.unstable_NormalPriority,Zr=s.unstable_LowPriority,bt=s.unstable_IdlePriority,wt=s.log,Tt=s.unstable_setDisableYieldValue,Nt=null,it=null;function Vt(t){if(typeof wt=="function"&&Tt(t),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Nt,t)}catch{}}var jt=Math.clz32?Math.clz32:Pt,$t=Math.log,Et=Math.LN2;function Pt(t){return t>>>=0,t===0?32:31-($t(t)/Et|0)|0}var qt=256,Zt=4194304;function It(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function zt(t,n,r){var l=t.pendingLanes;if(l===0)return 0;var c=0,d=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?c=It(l):(x&=E,x!==0?c=It(x):r||(r=E&~t,r!==0&&(c=It(r))))):(E=l&~d,E!==0?c=It(E):x!==0?c=It(x):r||(r=l&~t,r!==0&&(c=It(r)))),c===0?0:n!==0&&n!==c&&(n&d)===0&&(d=c&-c,r=n&-n,d>=r||d===32&&(r&4194048)!==0)?n:c}function Sn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function rr(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var t=qt;return qt<<=1,(qt&4194048)===0&&(qt=256),t}function ui(){var t=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),t}function sr(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Ie(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ro(t,n,r,l,c,d){var x=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,M=t.expirationTimes,Q=t.hiddenUpdates;for(r=x&~r;0<r;){var st=31-jt(r),ut=1<<st;E[st]=0,M[st]=-1;var X=Q[st];if(X!==null)for(Q[st]=null,st=0;st<X.length;st++){var Z=X[st];Z!==null&&(Z.lane&=-536870913)}r&=~ut}l!==0&&ar(t,l,0),d!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=d&~(x&~n))}function ar(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-jt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|r&4194090}function lr(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var l=31-jt(r),c=1<<l;c&n|t[l]&n&&(t[l]|=n),r&=~c}}function Za(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Wa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oi(){var t=nt.p;return t!==0?t:(t=window.event,t===void 0?32:ry(t.type))}function Lc(t,n){var r=nt.p;try{return nt.p=t,n()}finally{nt.p=r}}var ci=Math.random().toString(36).slice(2),Me="__reactFiber$"+ci,rn="__reactProps$"+ci,ki="__reactContainer$"+ci,Jr="__reactEvents$"+ci,ts="__reactListeners$"+ci,Bc="__reactHandles$"+ci,Zn="__reactResources$"+ci,or="__reactMarker$"+ci;function Qs(t){delete t[Me],delete t[rn],delete t[Jr],delete t[ts],delete t[Bc]}function hi(t){var n=t[Me];if(n)return n;for(var r=t.parentNode;r;){if(n=r[ki]||r[Me]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Hg(t);t!==null;){if(r=t[Me])return r;t=Hg(t)}return n}t=r,r=t.parentNode}return null}function fi(t){if(t=t[Me]||t[ki]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function ur(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function cr(t){var n=t[Zn];return n||(n=t[Zn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ve(t){t[or]=!0}var Do=new Set,es={};function di(t,n){pi(t,n),pi(t+"Capture",n)}function pi(t,n){for(es[t]=n,t=0;t<n.length;t++)Do.add(n[t])}var ns=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mi={},Ks={};function qc(t){return ze.call(Ks,t)?!0:ze.call(mi,t)?!1:ns.test(t)?Ks[t]=!0:(mi[t]=!0,!1)}function is(t,n,r){if(qc(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function rs(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Pn(t,n,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+l)}}var ss,Xs;function Pi(t){if(ss===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);ss=n&&n[1]||"",Xs=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ss+t+Xs}var $s=!1;function Zs(t,n){if(!t||$s)return"";$s=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(Z){var X=Z}Reflect.construct(t,[],ut)}else{try{ut.call()}catch(Z){X=Z}t.call(ut.prototype)}}else{try{throw Error()}catch(Z){X=Z}(ut=t())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),x=d[0],E=d[1];if(x&&E){var M=x.split(`
`),Q=E.split(`
`);for(c=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;c<Q.length&&!Q[c].includes("DetermineComponentFrameRoot");)c++;if(l===M.length||c===Q.length)for(l=M.length-1,c=Q.length-1;1<=l&&0<=c&&M[l]!==Q[c];)c--;for(;1<=l&&0<=c;l--,c--)if(M[l]!==Q[c]){if(l!==1||c!==1)do if(l--,c--,0>c||M[l]!==Q[c]){var st=`
`+M[l].replace(" at new "," at ");return t.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",t.displayName)),st}while(1<=l&&0<=c);break}}}finally{$s=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Pi(r):""}function Hc(t){switch(t.tag){case 26:case 27:case 5:return Pi(t.type);case 16:return Pi("Lazy");case 13:return Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 15:return Zs(t.type,!1);case 11:return Zs(t.type.render,!1);case 1:return Zs(t.type,!0);case 31:return Pi("Activity");default:return""}}function Wn(t){try{var n="";do n+=Hc(t),t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function we(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function as(t){var n=hr(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(x){l=""+x,d.call(this,x)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function fr(t){t._valueTracker||(t._valueTracker=as(t))}function de(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return t&&(l=hr(t)?t.checked?"true":"false":t.value),t=l,t!==r?(n.setValue(t),!0):!1}function Ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ls=/[\n"\\]/g;function We(t){return t.replace(ls,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ja(t,n,r,l,c,d,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+we(n)):t.value!==""+we(n)&&(t.value=""+we(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?el(t,x,we(n)):r!=null?el(t,x,we(r)):l!=null&&t.removeAttribute("value"),c==null&&d!=null&&(t.defaultChecked=!!d),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+we(E):t.removeAttribute("name")}function tl(t,n,r,l,c,d,x,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;r=r!=null?""+we(r):"",n=n!=null?""+we(n):r,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x)}function el(t,n,r){n==="number"&&Ui(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function dr(t,n,r,l){if(t=t.options,n){n={};for(var c=0;c<r.length;c++)n["$"+r[c]]=!0;for(r=0;r<t.length;r++)c=n.hasOwnProperty("$"+t[r].value),t[r].selected!==c&&(t[r].selected=c),c&&l&&(t[r].defaultSelected=!0)}else{for(r=""+we(r),n=null,c=0;c<t.length;c++){if(t[c].value===r){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function No(t,n,r){if(n!=null&&(n=""+we(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+we(r):""}function jo(t,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(a(92));if(xt(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=we(n),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l)}function Un(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var zi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(t,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,r):typeof r!="number"||r===0||zi.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function il(t,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&r[c]!==l&&nl(t,c,l)}else for(var d in n)n.hasOwnProperty(d)&&nl(t,d,n[d])}function Ws(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jn(t){return Mo.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var rl=null;function sl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pr=null,yn=null;function Vo(t){var n=fi(t);if(n&&(t=n.stateNode)){var r=t[rn]||null;t:switch(t=n.stateNode,n.type){case"input":if(Ja(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+We(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==t&&l.form===t.form){var c=l[rn]||null;if(!c)throw Error(a(90));Ja(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===t.form&&de(l)}break t;case"textarea":No(t,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&dr(t,!!r.multiple,n,!1)}}}var os=!1;function us(t,n,r){if(os)return t(n,r);os=!0;try{var l=t(n);return l}finally{if(os=!1,(pr!==null||yn!==null)&&(Tu(),pr&&(n=pr,t=yn,yn=pr=null,Vo(n),t)))for(n=0;n<t.length;n++)Vo(t[n])}}function mr(t,n){var r=t.stateNode;if(r===null)return null;var l=r[rn]||null;if(l===null)return null;r=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Li=!1;if(vn)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){Li=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{Li=!1}var zn=null,_e=null,Js=null;function Oo(){if(Js)return Js;var t,n=_e,r=n.length,l,c="value"in zn?zn.value:zn.textContent,d=c.length;for(t=0;t<r&&n[t]===c[t];t++);var x=r-t;for(l=1;l<=x&&n[r-l]===c[d-l];l++);return Js=c.slice(t,1<l?1-l:void 0)}function cs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function hs(){return!0}function al(){return!1}function Ye(t){function n(r,l,c,d,x){this._reactName=r,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?hs:al,this.isPropagationStopped=al,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),n}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=Ye(hn),ds=b({},hn,{view:0,detail:0}),ps=Ye(ds),ta,ms,gi,gs=b({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ia,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gi&&(gi&&t.type==="mousemove"?(ta=t.screenX-gi.screenX,ms=t.screenY-gi.screenY):ms=ta=0,gi=t),ta)},movementY:function(t){return"movementY"in t?t.movementY:ms}}),ys=Ye(gs),Fc=b({},gs,{dataTransfer:0}),ko=Ye(Fc),vs=b({},ds,{relatedTarget:0}),ea=Ye(vs),Po=b({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),ll=Ye(Po),ol=b({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uo=Ye(ol),na=b({},hn,{data:0}),ul=Ye(na),zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Lo[t])?!!n[t]:!1}function ia(){return Bo}var qo=b({},ds,{key:function(t){if(t.key){var n=zo[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=cs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ia,charCode:function(t){return t.type==="keypress"?cs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ra=Ye(qo),_n=b({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Ye(_n),Ho=b({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ia}),yr=Ye(Ho),u=b({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Ye(u),_=b({},gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Ye(_),Y=b({},hn,{newState:0,oldState:0}),tt=Ye(Y),_t=[9,13,27,32],Ft=vn&&"CompositionEvent"in window,be=null;vn&&"documentMode"in document&&(be=document.documentMode);var ce=vn&&"TextEvent"in window&&!be,Oe=vn&&(!Ft||be&&8<be&&11>=be),Dn=" ",yi=!1;function ti(t,n){switch(t){case"keyup":return _t.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ei(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ni=!1;function hl(t,n){switch(t){case"compositionend":return ei(n);case"keypress":return n.which!==32?null:(yi=!0,Dn);case"textInput":return t=n.data,t===Dn&&yi?null:t;default:return null}}function J_(t,n){if(ni)return t==="compositionend"||!Ft&&ti(t,n)?(t=Oo(),Js=_e=zn=null,ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Oe&&n.locale!=="ko"?null:n.data;default:return null}}var t1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!t1[t.type]:n==="textarea"}function Jd(t,n,r,l){pr?yn?yn.push(l):yn=[l]:pr=l,n=Du(n,"onChange"),0<n.length&&(r=new fs("onChange","change",null,r,l),t.push({event:r,listeners:n}))}var fl=null,dl=null;function e1(t){Mg(t,0)}function Fo(t){var n=ur(t);if(de(n))return t}function tp(t,n){if(t==="change")return n}var ep=!1;if(vn){var Gc;if(vn){var Yc="oninput"in document;if(!Yc){var np=document.createElement("div");np.setAttribute("oninput","return;"),Yc=typeof np.oninput=="function"}Gc=Yc}else Gc=!1;ep=Gc&&(!document.documentMode||9<document.documentMode)}function ip(){fl&&(fl.detachEvent("onpropertychange",rp),dl=fl=null)}function rp(t){if(t.propertyName==="value"&&Fo(dl)){var n=[];Jd(n,dl,t,sl(t)),us(e1,n)}}function n1(t,n,r){t==="focusin"?(ip(),fl=n,dl=r,fl.attachEvent("onpropertychange",rp)):t==="focusout"&&ip()}function i1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fo(dl)}function r1(t,n){if(t==="click")return Fo(n)}function s1(t,n){if(t==="input"||t==="change")return Fo(n)}function a1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Nn=typeof Object.is=="function"?Object.is:a1;function pl(t,n){if(Nn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var c=r[l];if(!ze.call(n,c)||!Nn(t[c],n[c]))return!1}return!0}function sp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ap(t,n){var r=sp(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=n&&l>=n)return{node:r,offset:n-t};t=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=sp(r)}}function lp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?lp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function op(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ui(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=Ui(t.document)}return n}function Qc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var l1=vn&&"documentMode"in document&&11>=document.documentMode,sa=null,Kc=null,ml=null,Xc=!1;function up(t,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xc||sa==null||sa!==Ui(l)||(l=sa,"selectionStart"in l&&Qc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ml&&pl(ml,l)||(ml=l,l=Du(Kc,"onSelect"),0<l.length&&(n=new fs("onSelect","select",null,n,r),t.push({event:n,listeners:l}),n.target=sa)))}function _s(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var aa={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},$c={},cp={};vn&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function xs(t){if($c[t])return $c[t];if(!aa[t])return t;var n=aa[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in cp)return $c[t]=n[r];return t}var hp=xs("animationend"),fp=xs("animationiteration"),dp=xs("animationstart"),o1=xs("transitionrun"),u1=xs("transitionstart"),c1=xs("transitioncancel"),pp=xs("transitionend"),mp=new Map,Zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zc.push("scrollEnd");function ii(t,n){mp.set(t,n),di(n,[t])}var gp=new WeakMap;function Ln(t,n){if(typeof t=="object"&&t!==null){var r=gp.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Wn(n)},gp.set(t,n),n)}return{value:t,source:n,stack:Wn(n)}}var Bn=[],la=0,Wc=0;function Go(){for(var t=la,n=Wc=la=0;n<t;){var r=Bn[n];Bn[n++]=null;var l=Bn[n];Bn[n++]=null;var c=Bn[n];Bn[n++]=null;var d=Bn[n];if(Bn[n++]=null,l!==null&&c!==null){var x=l.pending;x===null?c.next=c:(c.next=x.next,x.next=c),l.pending=c}d!==0&&yp(r,c,d)}}function Yo(t,n,r,l){Bn[la++]=t,Bn[la++]=n,Bn[la++]=r,Bn[la++]=l,Wc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Jc(t,n,r,l){return Yo(t,n,r,l),Qo(t)}function oa(t,n){return Yo(t,null,null,n),Qo(t)}function yp(t,n,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var c=!1,d=t.return;d!==null;)d.childLanes|=r,l=d.alternate,l!==null&&(l.childLanes|=r),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(c=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,c&&n!==null&&(c=31-jt(r),t=d.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=r|536870912),d):null}function Qo(t){if(50<Ll)throw Ll=0,af=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var ua={};function h1(t,n,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,n,r,l){return new h1(t,n,r,l)}function th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qi(t,n){var r=t.alternate;return r===null?(r=jn(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function vp(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Ko(t,n,r,l,c,d){var x=0;if(l=t,typeof t=="function")th(t)&&(x=1);else if(typeof t=="string")x=dx(t,r,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case T:return t=jn(31,r,n,c),t.elementType=T,t.lanes=d,t;case q:return bs(r.children,c,d,n);case J:x=8,c|=24;break;case k:return t=jn(12,r,n,c|2),t.elementType=k,t.lanes=d,t;case et:return t=jn(13,r,n,c),t.elementType=et,t.lanes=d,t;case K:return t=jn(19,r,n,c),t.elementType=K,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H:case at:x=10;break t;case rt:x=9;break t;case ft:x=11;break t;case N:x=14;break t;case w:x=16,l=null;break t}x=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=jn(x,r,n,c),n.elementType=t,n.type=l,n.lanes=d,n}function bs(t,n,r,l){return t=jn(7,t,l,n),t.lanes=r,t}function eh(t,n,r){return t=jn(6,t,null,n),t.lanes=r,t}function nh(t,n,r){return n=jn(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ca=[],ha=0,Xo=null,$o=0,qn=[],Hn=0,Es=null,Hi=1,Fi="";function Ts(t,n){ca[ha++]=$o,ca[ha++]=Xo,Xo=t,$o=n}function _p(t,n,r){qn[Hn++]=Hi,qn[Hn++]=Fi,qn[Hn++]=Es,Es=t;var l=Hi;t=Fi;var c=32-jt(l)-1;l&=~(1<<c),r+=1;var d=32-jt(n)+c;if(30<d){var x=c-c%5;d=(l&(1<<x)-1).toString(32),l>>=x,c-=x,Hi=1<<32-jt(n)+c|r<<c|l,Fi=d+t}else Hi=1<<d|r<<c|l,Fi=t}function ih(t){t.return!==null&&(Ts(t,1),_p(t,1,0))}function rh(t){for(;t===Xo;)Xo=ca[--ha],ca[ha]=null,$o=ca[--ha],ca[ha]=null;for(;t===Es;)Es=qn[--Hn],qn[Hn]=null,Fi=qn[--Hn],qn[Hn]=null,Hi=qn[--Hn],qn[Hn]=null}var xn=null,De=null,le=!1,Ss=null,vi=!1,sh=Error(a(519));function As(t){var n=Error(a(418,""));throw vl(Ln(n,t)),sh}function xp(t){var n=t.stateNode,r=t.type,l=t.memoizedProps;switch(n[Me]=t,n[rn]=l,r){case"dialog":Jt("cancel",n),Jt("close",n);break;case"iframe":case"object":case"embed":Jt("load",n);break;case"video":case"audio":for(r=0;r<ql.length;r++)Jt(ql[r],n);break;case"source":Jt("error",n);break;case"img":case"image":case"link":Jt("error",n),Jt("load",n);break;case"details":Jt("toggle",n);break;case"input":Jt("invalid",n),tl(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),fr(n);break;case"select":Jt("invalid",n);break;case"textarea":Jt("invalid",n),jo(n,l.value,l.defaultValue,l.children),fr(n)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||Pg(n.textContent,r)?(l.popover!=null&&(Jt("beforetoggle",n),Jt("toggle",n)),l.onScroll!=null&&Jt("scroll",n),l.onScrollEnd!=null&&Jt("scrollend",n),l.onClick!=null&&(n.onclick=Nu),n=!0):n=!1,n||As(t)}function bp(t){for(xn=t.return;xn;)switch(xn.tag){case 5:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:xn=xn.return}}function gl(t){if(t!==xn)return!1;if(!le)return bp(t),le=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Ef(t.type,t.memoizedProps)),r=!r),r&&De&&As(t),bp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(n===0){De=si(t.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;t=t.nextSibling}De=null}}else n===27?(n=De,Mr(t.type)?(t=wf,wf=null,De=t):De=n):De=xn?si(t.stateNode.nextSibling):null;return!0}function yl(){De=xn=null,le=!1}function Ep(){var t=Ss;return t!==null&&(Cn===null?Cn=t:Cn.push.apply(Cn,t),Ss=null),t}function vl(t){Ss===null?Ss=[t]:Ss.push(t)}var ah=$(null),ws=null,Gi=null;function vr(t,n,r){U(ah,n._currentValue),n._currentValue=r}function Yi(t){t._currentValue=ah.current,z(ah)}function lh(t,n,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===r)break;t=t.return}}function oh(t,n,r,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var d=c.dependencies;if(d!==null){var x=c.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=c;for(var M=0;M<n.length;M++)if(E.context===n[M]){d.lanes|=r,E=d.alternate,E!==null&&(E.lanes|=r),lh(d.return,r,t),l||(x=null);break t}d=E.next}}else if(c.tag===18){if(x=c.return,x===null)throw Error(a(341));x.lanes|=r,d=x.alternate,d!==null&&(d.lanes|=r),lh(x,r,t),x=null}else x=c.child;if(x!==null)x.return=c;else for(x=c;x!==null;){if(x===t){x=null;break}if(c=x.sibling,c!==null){c.return=x.return,x=c;break}x=x.return}c=x}}function _l(t,n,r,l){t=null;for(var c=n,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var x=c.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var E=c.type;Nn(c.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(c===yt.current){if(x=c.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Kl):t=[Kl])}c=c.return}t!==null&&oh(n,t,r,l),n.flags|=262144}function Zo(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cs(t){ws=t,Gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return Tp(ws,t)}function Wo(t,n){return ws===null&&Cs(t),Tp(t,n)}function Tp(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Gi===null){if(t===null)throw Error(a(308));Gi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Gi=Gi.next=n;return r}var f1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},d1=s.unstable_scheduleCallback,p1=s.unstable_NormalPriority,Qe={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uh(){return{controller:new f1,data:new Map,refCount:0}}function xl(t){t.refCount--,t.refCount===0&&d1(p1,function(){t.controller.abort()})}var bl=null,ch=0,fa=0,da=null;function m1(t,n){if(bl===null){var r=bl=[];ch=0,fa=df(),da={status:"pending",value:void 0,then:function(l){r.push(l)}}}return ch++,n.then(Sp,Sp),n}function Sp(){if(--ch===0&&bl!==null){da!==null&&(da.status="fulfilled");var t=bl;bl=null,fa=0,da=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function g1(t,n){var r=[],l={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<r.length;c++)(0,r[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),l}var Ap=O.S;O.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&m1(t,n),Ap!==null&&Ap(t,n)};var Rs=$(null);function hh(){var t=Rs.current;return t!==null?t:xe.pooledCache}function Jo(t,n){n===null?U(Rs,Rs.current):U(Rs,n.pool)}function wp(){var t=hh();return t===null?null:{parent:Qe._currentValue,pool:t}}var El=Error(a(460)),Cp=Error(a(474)),tu=Error(a(542)),fh={then:function(){}};function Rp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function eu(){}function Dp(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(eu,eu),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jp(t),t;default:if(typeof n.status=="string")n.then(eu,eu);else{if(t=xe,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,jp(t),t}throw Tl=n,El}}var Tl=null;function Np(){if(Tl===null)throw Error(a(459));var t=Tl;return Tl=null,t}function jp(t){if(t===El||t===tu)throw Error(a(483))}var _r=!1;function dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function br(t,n,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(he&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=Qo(t),yp(t,null,r),n}return Yo(t,l,n,r),Qo(t)}function Sl(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,r|=l,n.lanes=r,lr(t,r)}}function mh(t,n){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var x={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?c=d=x:d=d.next=x,r=r.next}while(r!==null);d===null?c=d=n:d=d.next=n}else c=d=n;r={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var gh=!1;function Al(){if(gh){var t=da;if(t!==null)throw t}}function wl(t,n,r,l){gh=!1;var c=t.updateQueue;_r=!1;var d=c.firstBaseUpdate,x=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var M=E,Q=M.next;M.next=null,x===null?d=Q:x.next=Q,x=M;var st=t.alternate;st!==null&&(st=st.updateQueue,E=st.lastBaseUpdate,E!==x&&(E===null?st.firstBaseUpdate=Q:E.next=Q,st.lastBaseUpdate=M))}if(d!==null){var ut=c.baseState;x=0,st=Q=M=null,E=d;do{var X=E.lane&-536870913,Z=X!==E.lane;if(Z?(ie&X)===X:(l&X)===X){X!==0&&X===fa&&(gh=!0),st!==null&&(st=st.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Lt=t,Ot=E;X=n;var ge=r;switch(Ot.tag){case 1:if(Lt=Ot.payload,typeof Lt=="function"){ut=Lt.call(ge,ut,X);break t}ut=Lt;break t;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Ot.payload,X=typeof Lt=="function"?Lt.call(ge,ut,X):Lt,X==null)break t;ut=b({},ut,X);break t;case 2:_r=!0}}X=E.callback,X!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=c.callbacks,Z===null?c.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},st===null?(Q=st=Z,M=ut):st=st.next=Z,x|=X;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;Z=E,E=Z.next,Z.next=null,c.lastBaseUpdate=Z,c.shared.pending=null}}while(!0);st===null&&(M=ut),c.baseState=M,c.firstBaseUpdate=Q,c.lastBaseUpdate=st,d===null&&(c.shared.lanes=0),Dr|=x,t.lanes=x,t.memoizedState=ut}}function Ip(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Mp(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Ip(r[t],n)}var pa=$(null),nu=$(0);function Vp(t,n){t=Ji,U(nu,t),U(pa,n),Ji=t|n.baseLanes}function yh(){U(nu,Ji),U(pa,pa.current)}function vh(){Ji=nu.current,z(pa),z(nu)}var Er=0,Kt=null,pe=null,Le=null,iu=!1,ma=!1,Ds=!1,ru=0,Cl=0,ga=null,y1=0;function ke(){throw Error(a(321))}function _h(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Nn(t[r],n[r]))return!1;return!0}function xh(t,n,r,l,c,d){return Er=d,Kt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=t===null||t.memoizedState===null?ym:vm,Ds=!1,d=r(l,c),Ds=!1,ma&&(d=kp(n,r,l,c)),Op(t),d}function Op(t){O.H=cu;var n=pe!==null&&pe.next!==null;if(Er=0,Le=pe=Kt=null,iu=!1,Cl=0,ga=null,n)throw Error(a(300));t===null||Je||(t=t.dependencies,t!==null&&Zo(t)&&(Je=!0))}function kp(t,n,r,l){Kt=t;var c=0;do{if(ma&&(ga=null),Cl=0,ma=!1,25<=c)throw Error(a(301));if(c+=1,Le=pe=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}O.H=S1,d=n(r,l)}while(ma);return d}function v1(){var t=O.H,n=t.useState()[0];return n=typeof n.then=="function"?Rl(n):n,t=t.useState()[0],(pe!==null?pe.memoizedState:null)!==t&&(Kt.flags|=1024),n}function bh(){var t=ru!==0;return ru=0,t}function Eh(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function Th(t){if(iu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}iu=!1}Er=0,Le=pe=Kt=null,ma=!1,Cl=ru=0,ga=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Kt.memoizedState=Le=t:Le=Le.next=t,Le}function Be(){if(pe===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var n=Le===null?Kt.memoizedState:Le.next;if(n!==null)Le=n,pe=t;else{if(t===null)throw Kt.alternate===null?Error(a(467)):Error(a(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Le===null?Kt.memoizedState=Le=t:Le=Le.next=t}return Le}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(t){var n=Cl;return Cl+=1,ga===null&&(ga=[]),t=Dp(ga,t,n),n=Kt,(Le===null?n.memoizedState:Le.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?ym:vm),t}function su(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Rl(t);if(t.$$typeof===at)return fn(t)}throw Error(a(438,String(t)))}function Ah(t){var n=null,r=Kt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=Kt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Sh(),Kt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),l=0;l<t;l++)r[l]=j;return n.index++,r}function Qi(t,n){return typeof n=="function"?n(t):n}function au(t){var n=Be();return wh(n,pe,t)}function wh(t,n,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var c=t.baseQueue,d=l.pending;if(d!==null){if(c!==null){var x=c.next;c.next=d.next,d.next=x}n.baseQueue=c=d,l.pending=null}if(d=t.baseState,c===null)t.memoizedState=d;else{n=c.next;var E=x=null,M=null,Q=n,st=!1;do{var ut=Q.lane&-536870913;if(ut!==Q.lane?(ie&ut)===ut:(Er&ut)===ut){var X=Q.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ut===fa&&(st=!0);else if((Er&X)===X){Q=Q.next,X===fa&&(st=!0);continue}else ut={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(E=M=ut,x=d):M=M.next=ut,Kt.lanes|=X,Dr|=X;ut=Q.action,Ds&&r(d,ut),d=Q.hasEagerState?Q.eagerState:r(d,ut)}else X={lane:ut,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(E=M=X,x=d):M=M.next=X,Kt.lanes|=ut,Dr|=ut;Q=Q.next}while(Q!==null&&Q!==n);if(M===null?x=d:M.next=E,!Nn(d,t.memoizedState)&&(Je=!0,st&&(r=da,r!==null)))throw r;t.memoizedState=d,t.baseState=x,t.baseQueue=M,l.lastRenderedState=d}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ch(t){var n=Be(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,c=r.pending,d=n.memoizedState;if(c!==null){r.pending=null;var x=c=c.next;do d=t(d,x.action),x=x.next;while(x!==c);Nn(d,n.memoizedState)||(Je=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),r.lastRenderedState=d}return[d,l]}function Pp(t,n,r){var l=Kt,c=Be(),d=le;if(d){if(r===void 0)throw Error(a(407));r=r()}else r=n();var x=!Nn((pe||c).memoizedState,r);x&&(c.memoizedState=r,Je=!0),c=c.queue;var E=Lp.bind(null,l,c,t);if(Dl(2048,8,E,[t]),c.getSnapshot!==n||x||Le!==null&&Le.memoizedState.tag&1){if(l.flags|=2048,ya(9,lu(),zp.bind(null,l,c,r,n),null),xe===null)throw Error(a(349));d||(Er&124)!==0||Up(l,n,r)}return r}function Up(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=Kt.updateQueue,n===null?(n=Sh(),Kt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function zp(t,n,r,l){n.value=r,n.getSnapshot=l,Bp(n)&&qp(t)}function Lp(t,n,r){return r(function(){Bp(n)&&qp(t)})}function Bp(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Nn(t,r)}catch{return!0}}function qp(t){var n=oa(t,2);n!==null&&kn(n,t,2)}function Rh(t){var n=An();if(typeof t=="function"){var r=t;if(t=r(),Ds){Vt(!0);try{r()}finally{Vt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:t},n}function Hp(t,n,r,l){return t.baseState=r,wh(t,pe,typeof l=="function"?l:Qi)}function _1(t,n,r,l,c){if(uu(t))throw Error(a(485));if(t=n.action,t!==null){var d={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){d.listeners.push(x)}};O.T!==null?r(!0):d.isTransition=!1,l(d),r=n.pending,r===null?(d.next=n.pending=d,Fp(n,d)):(d.next=r.next,n.pending=r.next=d)}}function Fp(t,n){var r=n.action,l=n.payload,c=t.state;if(n.isTransition){var d=O.T,x={};O.T=x;try{var E=r(c,l),M=O.S;M!==null&&M(x,E),Gp(t,n,E)}catch(Q){Dh(t,n,Q)}finally{O.T=d}}else try{d=r(c,l),Gp(t,n,d)}catch(Q){Dh(t,n,Q)}}function Gp(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Yp(t,n,l)},function(l){return Dh(t,n,l)}):Yp(t,n,r)}function Yp(t,n,r){n.status="fulfilled",n.value=r,Qp(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Fp(t,r)))}function Dh(t,n,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,Qp(n),n=n.next;while(n!==l)}t.action=null}function Qp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Kp(t,n){return n}function Xp(t,n){if(le){var r=xe.formState;if(r!==null){t:{var l=Kt;if(le){if(De){e:{for(var c=De,d=vi;c.nodeType!==8;){if(!d){c=null;break e}if(c=si(c.nextSibling),c===null){c=null;break e}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){De=si(c.nextSibling),l=c.data==="F!";break t}}As(l)}l=!1}l&&(n=r[0])}}return r=An(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kp,lastRenderedState:n},r.queue=l,r=pm.bind(null,Kt,l),l.dispatch=r,l=Rh(!1),d=Vh.bind(null,Kt,!1,l.queue),l=An(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,r=_1.bind(null,Kt,c,d,r),c.dispatch=r,l.memoizedState=t,[n,r,!1]}function $p(t){var n=Be();return Zp(n,pe,t)}function Zp(t,n,r){if(n=wh(t,n,Kp)[0],t=au(Qi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Rl(n)}catch(x){throw x===El?tu:x}else l=n;n=Be();var c=n.queue,d=c.dispatch;return r!==n.memoizedState&&(Kt.flags|=2048,ya(9,lu(),x1.bind(null,c,r),null)),[l,d,t]}function x1(t,n){t.action=n}function Wp(t){var n=Be(),r=pe;if(r!==null)return Zp(n,r,t);Be(),n=n.memoizedState,r=Be();var l=r.queue.dispatch;return r.memoizedState=t,[n,l,!1]}function ya(t,n,r,l){return t={tag:t,create:r,deps:l,inst:n,next:null},n=Kt.updateQueue,n===null&&(n=Sh(),Kt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,n.lastEffect=t),t}function lu(){return{destroy:void 0,resource:void 0}}function Jp(){return Be().memoizedState}function ou(t,n,r,l){var c=An();l=l===void 0?null:l,Kt.flags|=t,c.memoizedState=ya(1|n,lu(),r,l)}function Dl(t,n,r,l){var c=Be();l=l===void 0?null:l;var d=c.memoizedState.inst;pe!==null&&l!==null&&_h(l,pe.memoizedState.deps)?c.memoizedState=ya(n,d,r,l):(Kt.flags|=t,c.memoizedState=ya(1|n,d,r,l))}function tm(t,n){ou(8390656,8,t,n)}function em(t,n){Dl(2048,8,t,n)}function nm(t,n){return Dl(4,2,t,n)}function im(t,n){return Dl(4,4,t,n)}function rm(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function sm(t,n,r){r=r!=null?r.concat([t]):null,Dl(4,4,rm.bind(null,n,t),r)}function Nh(){}function am(t,n){var r=Be();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&_h(n,l[1])?l[0]:(r.memoizedState=[t,n],t)}function lm(t,n){var r=Be();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&_h(n,l[1]))return l[0];if(l=t(),Ds){Vt(!0);try{t()}finally{Vt(!1)}}return r.memoizedState=[l,n],l}function jh(t,n,r){return r===void 0||(Er&1073741824)!==0?t.memoizedState=n:(t.memoizedState=r,t=cg(),Kt.lanes|=t,Dr|=t,r)}function om(t,n,r,l){return Nn(r,n)?r:pa.current!==null?(t=jh(t,r,l),Nn(t,n)||(Je=!0),t):(Er&42)===0?(Je=!0,t.memoizedState=r):(t=cg(),Kt.lanes|=t,Dr|=t,n)}function um(t,n,r,l,c){var d=nt.p;nt.p=d!==0&&8>d?d:8;var x=O.T,E={};O.T=E,Vh(t,!1,n,r);try{var M=c(),Q=O.S;if(Q!==null&&Q(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var st=g1(M,l);Nl(t,n,st,On(t))}else Nl(t,n,l,On(t))}catch(ut){Nl(t,n,{then:function(){},status:"rejected",reason:ut},On())}finally{nt.p=d,O.T=x}}function b1(){}function Ih(t,n,r,l){if(t.tag!==5)throw Error(a(476));var c=cm(t).queue;um(t,c,n,ht,r===null?b1:function(){return hm(t),r(l)})}function cm(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ht},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function hm(t){var n=cm(t).next.queue;Nl(t,n,{},On())}function Mh(){return fn(Kl)}function fm(){return Be().memoizedState}function dm(){return Be().memoizedState}function E1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=On();t=xr(r);var l=br(n,t,r);l!==null&&(kn(l,n,r),Sl(l,n,r)),n={cache:uh()},t.payload=n;return}n=n.return}}function T1(t,n,r){var l=On();r={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},uu(t)?mm(n,r):(r=Jc(t,n,r,l),r!==null&&(kn(r,t,l),gm(r,n,l)))}function pm(t,n,r){var l=On();Nl(t,n,r,l)}function Nl(t,n,r,l){var c={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(uu(t))mm(n,c);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var x=n.lastRenderedState,E=d(x,r);if(c.hasEagerState=!0,c.eagerState=E,Nn(E,x))return Yo(t,n,c,0),xe===null&&Go(),!1}catch{}finally{}if(r=Jc(t,n,c,l),r!==null)return kn(r,t,l),gm(r,n,l),!0}return!1}function Vh(t,n,r,l){if(l={lane:2,revertLane:df(),action:l,hasEagerState:!1,eagerState:null,next:null},uu(t)){if(n)throw Error(a(479))}else n=Jc(t,r,l,2),n!==null&&kn(n,t,2)}function uu(t){var n=t.alternate;return t===Kt||n!==null&&n===Kt}function mm(t,n){ma=iu=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function gm(t,n,r){if((r&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,r|=l,n.lanes=r,lr(t,r)}}var cu={readContext:fn,use:su,useCallback:ke,useContext:ke,useEffect:ke,useImperativeHandle:ke,useLayoutEffect:ke,useInsertionEffect:ke,useMemo:ke,useReducer:ke,useRef:ke,useState:ke,useDebugValue:ke,useDeferredValue:ke,useTransition:ke,useSyncExternalStore:ke,useId:ke,useHostTransitionStatus:ke,useFormState:ke,useActionState:ke,useOptimistic:ke,useMemoCache:ke,useCacheRefresh:ke},ym={readContext:fn,use:su,useCallback:function(t,n){return An().memoizedState=[t,n===void 0?null:n],t},useContext:fn,useEffect:tm,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,ou(4194308,4,rm.bind(null,n,t),r)},useLayoutEffect:function(t,n){return ou(4194308,4,t,n)},useInsertionEffect:function(t,n){ou(4,2,t,n)},useMemo:function(t,n){var r=An();n=n===void 0?null:n;var l=t();if(Ds){Vt(!0);try{t()}finally{Vt(!1)}}return r.memoizedState=[l,n],l},useReducer:function(t,n,r){var l=An();if(r!==void 0){var c=r(n);if(Ds){Vt(!0);try{r(n)}finally{Vt(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=T1.bind(null,Kt,t),[l.memoizedState,t]},useRef:function(t){var n=An();return t={current:t},n.memoizedState=t},useState:function(t){t=Rh(t);var n=t.queue,r=pm.bind(null,Kt,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Nh,useDeferredValue:function(t,n){var r=An();return jh(r,t,n)},useTransition:function(){var t=Rh(!1);return t=um.bind(null,Kt,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var l=Kt,c=An();if(le){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),xe===null)throw Error(a(349));(ie&124)!==0||Up(l,n,r)}c.memoizedState=r;var d={value:r,getSnapshot:n};return c.queue=d,tm(Lp.bind(null,l,d,t),[t]),l.flags|=2048,ya(9,lu(),zp.bind(null,l,d,r,n),null),r},useId:function(){var t=An(),n=xe.identifierPrefix;if(le){var r=Fi,l=Hi;r=(l&~(1<<32-jt(l)-1)).toString(32)+r,n=""+n+"R"+r,r=ru++,0<r&&(n+="H"+r.toString(32)),n+=""}else r=y1++,n=""+n+"r"+r.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:Mh,useFormState:Xp,useActionState:Xp,useOptimistic:function(t){var n=An();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Vh.bind(null,Kt,!0,r),r.dispatch=n,[t,n]},useMemoCache:Ah,useCacheRefresh:function(){return An().memoizedState=E1.bind(null,Kt)}},vm={readContext:fn,use:su,useCallback:am,useContext:fn,useEffect:em,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:im,useMemo:lm,useReducer:au,useRef:Jp,useState:function(){return au(Qi)},useDebugValue:Nh,useDeferredValue:function(t,n){var r=Be();return om(r,pe.memoizedState,t,n)},useTransition:function(){var t=au(Qi)[0],n=Be().memoizedState;return[typeof t=="boolean"?t:Rl(t),n]},useSyncExternalStore:Pp,useId:fm,useHostTransitionStatus:Mh,useFormState:$p,useActionState:$p,useOptimistic:function(t,n){var r=Be();return Hp(r,pe,t,n)},useMemoCache:Ah,useCacheRefresh:dm},S1={readContext:fn,use:su,useCallback:am,useContext:fn,useEffect:em,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:im,useMemo:lm,useReducer:Ch,useRef:Jp,useState:function(){return Ch(Qi)},useDebugValue:Nh,useDeferredValue:function(t,n){var r=Be();return pe===null?jh(r,t,n):om(r,pe.memoizedState,t,n)},useTransition:function(){var t=Ch(Qi)[0],n=Be().memoizedState;return[typeof t=="boolean"?t:Rl(t),n]},useSyncExternalStore:Pp,useId:fm,useHostTransitionStatus:Mh,useFormState:Wp,useActionState:Wp,useOptimistic:function(t,n){var r=Be();return pe!==null?Hp(r,pe,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:dm},va=null,jl=0;function hu(t){var n=jl;return jl+=1,va===null&&(va=[]),Dp(va,t,n)}function Il(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function fu(t,n){throw n.$$typeof===C?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function _m(t){var n=t._init;return n(t._payload)}function xm(t){function n(B,P){if(t){var F=B.deletions;F===null?(B.deletions=[P],B.flags|=16):F.push(P)}}function r(B,P){if(!t)return null;for(;P!==null;)n(B,P),P=P.sibling;return null}function l(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function c(B,P){return B=qi(B,P),B.index=0,B.sibling=null,B}function d(B,P,F){return B.index=F,t?(F=B.alternate,F!==null?(F=F.index,F<P?(B.flags|=67108866,P):F):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function x(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function E(B,P,F,lt){return P===null||P.tag!==6?(P=eh(F,B.mode,lt),P.return=B,P):(P=c(P,F),P.return=B,P)}function M(B,P,F,lt){var At=F.type;return At===q?st(B,P,F.props.children,lt,F.key):P!==null&&(P.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===w&&_m(At)===P.type)?(P=c(P,F.props),Il(P,F),P.return=B,P):(P=Ko(F.type,F.key,F.props,null,B.mode,lt),Il(P,F),P.return=B,P)}function Q(B,P,F,lt){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=nh(F,B.mode,lt),P.return=B,P):(P=c(P,F.children||[]),P.return=B,P)}function st(B,P,F,lt,At){return P===null||P.tag!==7?(P=bs(F,B.mode,lt,At),P.return=B,P):(P=c(P,F),P.return=B,P)}function ut(B,P,F){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=eh(""+P,B.mode,F),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case V:return F=Ko(P.type,P.key,P.props,null,B.mode,F),Il(F,P),F.return=B,F;case L:return P=nh(P,B.mode,F),P.return=B,P;case w:var lt=P._init;return P=lt(P._payload),ut(B,P,F)}if(xt(P)||R(P))return P=bs(P,B.mode,F,null),P.return=B,P;if(typeof P.then=="function")return ut(B,hu(P),F);if(P.$$typeof===at)return ut(B,Wo(B,P),F);fu(B,P)}return null}function X(B,P,F,lt){var At=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return At!==null?null:E(B,P,""+F,lt);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case V:return F.key===At?M(B,P,F,lt):null;case L:return F.key===At?Q(B,P,F,lt):null;case w:return At=F._init,F=At(F._payload),X(B,P,F,lt)}if(xt(F)||R(F))return At!==null?null:st(B,P,F,lt,null);if(typeof F.then=="function")return X(B,P,hu(F),lt);if(F.$$typeof===at)return X(B,P,Wo(B,F),lt);fu(B,F)}return null}function Z(B,P,F,lt,At){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return B=B.get(F)||null,E(P,B,""+lt,At);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case V:return B=B.get(lt.key===null?F:lt.key)||null,M(P,B,lt,At);case L:return B=B.get(lt.key===null?F:lt.key)||null,Q(P,B,lt,At);case w:var Xt=lt._init;return lt=Xt(lt._payload),Z(B,P,F,lt,At)}if(xt(lt)||R(lt))return B=B.get(F)||null,st(P,B,lt,At,null);if(typeof lt.then=="function")return Z(B,P,F,hu(lt),At);if(lt.$$typeof===at)return Z(B,P,F,Wo(P,lt),At);fu(P,lt)}return null}function Lt(B,P,F,lt){for(var At=null,Xt=null,Dt=P,kt=P=0,en=null;Dt!==null&&kt<F.length;kt++){Dt.index>kt?(en=Dt,Dt=null):en=Dt.sibling;var ae=X(B,Dt,F[kt],lt);if(ae===null){Dt===null&&(Dt=en);break}t&&Dt&&ae.alternate===null&&n(B,Dt),P=d(ae,P,kt),Xt===null?At=ae:Xt.sibling=ae,Xt=ae,Dt=en}if(kt===F.length)return r(B,Dt),le&&Ts(B,kt),At;if(Dt===null){for(;kt<F.length;kt++)Dt=ut(B,F[kt],lt),Dt!==null&&(P=d(Dt,P,kt),Xt===null?At=Dt:Xt.sibling=Dt,Xt=Dt);return le&&Ts(B,kt),At}for(Dt=l(Dt);kt<F.length;kt++)en=Z(Dt,B,kt,F[kt],lt),en!==null&&(t&&en.alternate!==null&&Dt.delete(en.key===null?kt:en.key),P=d(en,P,kt),Xt===null?At=en:Xt.sibling=en,Xt=en);return t&&Dt.forEach(function(Ur){return n(B,Ur)}),le&&Ts(B,kt),At}function Ot(B,P,F,lt){if(F==null)throw Error(a(151));for(var At=null,Xt=null,Dt=P,kt=P=0,en=null,ae=F.next();Dt!==null&&!ae.done;kt++,ae=F.next()){Dt.index>kt?(en=Dt,Dt=null):en=Dt.sibling;var Ur=X(B,Dt,ae.value,lt);if(Ur===null){Dt===null&&(Dt=en);break}t&&Dt&&Ur.alternate===null&&n(B,Dt),P=d(Ur,P,kt),Xt===null?At=Ur:Xt.sibling=Ur,Xt=Ur,Dt=en}if(ae.done)return r(B,Dt),le&&Ts(B,kt),At;if(Dt===null){for(;!ae.done;kt++,ae=F.next())ae=ut(B,ae.value,lt),ae!==null&&(P=d(ae,P,kt),Xt===null?At=ae:Xt.sibling=ae,Xt=ae);return le&&Ts(B,kt),At}for(Dt=l(Dt);!ae.done;kt++,ae=F.next())ae=Z(Dt,B,kt,ae.value,lt),ae!==null&&(t&&ae.alternate!==null&&Dt.delete(ae.key===null?kt:ae.key),P=d(ae,P,kt),Xt===null?At=ae:Xt.sibling=ae,Xt=ae);return t&&Dt.forEach(function(Ax){return n(B,Ax)}),le&&Ts(B,kt),At}function ge(B,P,F,lt){if(typeof F=="object"&&F!==null&&F.type===q&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case V:t:{for(var At=F.key;P!==null;){if(P.key===At){if(At=F.type,At===q){if(P.tag===7){r(B,P.sibling),lt=c(P,F.props.children),lt.return=B,B=lt;break t}}else if(P.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===w&&_m(At)===P.type){r(B,P.sibling),lt=c(P,F.props),Il(lt,F),lt.return=B,B=lt;break t}r(B,P);break}else n(B,P);P=P.sibling}F.type===q?(lt=bs(F.props.children,B.mode,lt,F.key),lt.return=B,B=lt):(lt=Ko(F.type,F.key,F.props,null,B.mode,lt),Il(lt,F),lt.return=B,B=lt)}return x(B);case L:t:{for(At=F.key;P!==null;){if(P.key===At)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){r(B,P.sibling),lt=c(P,F.children||[]),lt.return=B,B=lt;break t}else{r(B,P);break}else n(B,P);P=P.sibling}lt=nh(F,B.mode,lt),lt.return=B,B=lt}return x(B);case w:return At=F._init,F=At(F._payload),ge(B,P,F,lt)}if(xt(F))return Lt(B,P,F,lt);if(R(F)){if(At=R(F),typeof At!="function")throw Error(a(150));return F=At.call(F),Ot(B,P,F,lt)}if(typeof F.then=="function")return ge(B,P,hu(F),lt);if(F.$$typeof===at)return ge(B,P,Wo(B,F),lt);fu(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,P!==null&&P.tag===6?(r(B,P.sibling),lt=c(P,F),lt.return=B,B=lt):(r(B,P),lt=eh(F,B.mode,lt),lt.return=B,B=lt),x(B)):r(B,P)}return function(B,P,F,lt){try{jl=0;var At=ge(B,P,F,lt);return va=null,At}catch(Dt){if(Dt===El||Dt===tu)throw Dt;var Xt=jn(29,Dt,null,B.mode);return Xt.lanes=lt,Xt.return=B,Xt}finally{}}}var _a=xm(!0),bm=xm(!1),Fn=$(null),_i=null;function Tr(t){var n=t.alternate;U(Ke,Ke.current&1),U(Fn,t),_i===null&&(n===null||pa.current!==null||n.memoizedState!==null)&&(_i=t)}function Em(t){if(t.tag===22){if(U(Ke,Ke.current),U(Fn,t),_i===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(_i=t)}}else Sr()}function Sr(){U(Ke,Ke.current),U(Fn,Fn.current)}function Ki(t){z(Fn),_i===t&&(_i=null),z(Ke)}var Ke=$(0);function du(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Af(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Oh(t,n,r,l){n=t.memoizedState,r=r(l,n),r=r==null?n:b({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var kh={enqueueSetState:function(t,n,r){t=t._reactInternals;var l=On(),c=xr(l);c.payload=n,r!=null&&(c.callback=r),n=br(t,c,l),n!==null&&(kn(n,t,l),Sl(n,t,l))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var l=On(),c=xr(l);c.tag=1,c.payload=n,r!=null&&(c.callback=r),n=br(t,c,l),n!==null&&(kn(n,t,l),Sl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=On(),l=xr(r);l.tag=2,n!=null&&(l.callback=n),n=br(t,l,r),n!==null&&(kn(n,t,r),Sl(n,t,r))}};function Tm(t,n,r,l,c,d,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,x):n.prototype&&n.prototype.isPureReactComponent?!pl(r,l)||!pl(c,d):!0}function Sm(t,n,r,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==t&&kh.enqueueReplaceState(n,n.state,null)}function Ns(t,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(t=t.defaultProps){r===n&&(r=b({},r));for(var c in t)r[c]===void 0&&(r[c]=t[c])}return r}var pu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Am(t){pu(t)}function wm(t){console.error(t)}function Cm(t){pu(t)}function mu(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Rm(t,n,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ph(t,n,r){return r=xr(r),r.tag=3,r.payload={element:null},r.callback=function(){mu(t,n)},r}function Dm(t){return t=xr(t),t.tag=3,t}function Nm(t,n,r,l){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=l.value;t.payload=function(){return c(d)},t.callback=function(){Rm(n,r,l)}}var x=r.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Rm(n,r,l),typeof c!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function A1(t,n,r,l,c){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&_l(n,r,c,!0),r=Fn.current,r!==null){switch(r.tag){case 13:return _i===null?of():r.alternate===null&&Ne===0&&(Ne=3),r.flags&=-257,r.flags|=65536,r.lanes=c,l===fh?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),cf(t,l,c)),!1;case 22:return r.flags|=65536,l===fh?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),cf(t,l,c)),!1}throw Error(a(435,r.tag))}return cf(t,l,c),of(),!1}if(le)return n=Fn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==sh&&(t=Error(a(422),{cause:l}),vl(Ln(t,r)))):(l!==sh&&(n=Error(a(423),{cause:l}),vl(Ln(n,r))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=Ln(l,r),c=Ph(t.stateNode,l,c),mh(t,c),Ne!==4&&(Ne=2)),!1;var d=Error(a(520),{cause:l});if(d=Ln(d,r),zl===null?zl=[d]:zl.push(d),Ne!==4&&(Ne=2),n===null)return!0;l=Ln(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=c&-c,r.lanes|=t,t=Ph(r.stateNode,l,t),mh(r,t),!1;case 1:if(n=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Nr===null||!Nr.has(d))))return r.flags|=65536,c&=-c,r.lanes|=c,c=Dm(c),Nm(c,t,r,l),mh(r,c),!1}r=r.return}while(r!==null);return!1}var jm=Error(a(461)),Je=!1;function sn(t,n,r,l){n.child=t===null?bm(n,null,r,l):_a(n,t.child,r,l)}function Im(t,n,r,l,c){r=r.render;var d=n.ref;if("ref"in l){var x={};for(var E in l)E!=="ref"&&(x[E]=l[E])}else x=l;return Cs(n),l=xh(t,n,r,x,d,c),E=bh(),t!==null&&!Je?(Eh(t,n,c),Xi(t,n,c)):(le&&E&&ih(n),n.flags|=1,sn(t,n,l,c),n.child)}function Mm(t,n,r,l,c){if(t===null){var d=r.type;return typeof d=="function"&&!th(d)&&d.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=d,Vm(t,n,d,l,c)):(t=Ko(r.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!Gh(t,c)){var x=d.memoizedProps;if(r=r.compare,r=r!==null?r:pl,r(x,l)&&t.ref===n.ref)return Xi(t,n,c)}return n.flags|=1,t=qi(d,l),t.ref=n.ref,t.return=n,n.child=t}function Vm(t,n,r,l,c){if(t!==null){var d=t.memoizedProps;if(pl(d,l)&&t.ref===n.ref)if(Je=!1,n.pendingProps=l=d,Gh(t,c))(t.flags&131072)!==0&&(Je=!0);else return n.lanes=t.lanes,Xi(t,n,c)}return Uh(t,n,r,l,c)}function Om(t,n,r){var l=n.pendingProps,c=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=d!==null?d.baseLanes|r:r,t!==null){for(c=n.child=t.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;n.childLanes=d&~l}else n.childLanes=0,n.child=null;return km(t,n,l,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Jo(n,d!==null?d.cachePool:null),d!==null?Vp(n,d):yh(),Em(n);else return n.lanes=n.childLanes=536870912,km(t,n,d!==null?d.baseLanes|r:r,r)}else d!==null?(Jo(n,d.cachePool),Vp(n,d),Sr(),n.memoizedState=null):(t!==null&&Jo(n,null),yh(),Sr());return sn(t,n,c,r),n.child}function km(t,n,r,l){var c=hh();return c=c===null?null:{parent:Qe._currentValue,pool:c},n.memoizedState={baseLanes:r,cachePool:c},t!==null&&Jo(n,null),yh(),Em(n),t!==null&&_l(t,n,l,!0),null}function gu(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Uh(t,n,r,l,c){return Cs(n),r=xh(t,n,r,l,void 0,c),l=bh(),t!==null&&!Je?(Eh(t,n,c),Xi(t,n,c)):(le&&l&&ih(n),n.flags|=1,sn(t,n,r,c),n.child)}function Pm(t,n,r,l,c,d){return Cs(n),n.updateQueue=null,r=kp(n,l,r,c),Op(t),l=bh(),t!==null&&!Je?(Eh(t,n,d),Xi(t,n,d)):(le&&l&&ih(n),n.flags|=1,sn(t,n,r,d),n.child)}function Um(t,n,r,l,c){if(Cs(n),n.stateNode===null){var d=ua,x=r.contextType;typeof x=="object"&&x!==null&&(d=fn(x)),d=new r(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=kh,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},dh(n),x=r.contextType,d.context=typeof x=="object"&&x!==null?fn(x):ua,d.state=n.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Oh(n,r,x,l),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(x=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),x!==d.state&&kh.enqueueReplaceState(d,d.state,null),wl(n,l,d,c),Al(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){d=n.stateNode;var E=n.memoizedProps,M=Ns(r,E);d.props=M;var Q=d.context,st=r.contextType;x=ua,typeof st=="object"&&st!==null&&(x=fn(st));var ut=r.getDerivedStateFromProps;st=typeof ut=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,st||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||Q!==x)&&Sm(n,d,l,x),_r=!1;var X=n.memoizedState;d.state=X,wl(n,l,d,c),Al(),Q=n.memoizedState,E||X!==Q||_r?(typeof ut=="function"&&(Oh(n,r,ut,l),Q=n.memoizedState),(M=_r||Tm(n,r,M,l,X,Q,x))?(st||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=Q),d.props=l,d.state=Q,d.context=x,l=M):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,ph(t,n),x=n.memoizedProps,st=Ns(r,x),d.props=st,ut=n.pendingProps,X=d.context,Q=r.contextType,M=ua,typeof Q=="object"&&Q!==null&&(M=fn(Q)),E=r.getDerivedStateFromProps,(Q=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x!==ut||X!==M)&&Sm(n,d,l,M),_r=!1,X=n.memoizedState,d.state=X,wl(n,l,d,c),Al();var Z=n.memoizedState;x!==ut||X!==Z||_r||t!==null&&t.dependencies!==null&&Zo(t.dependencies)?(typeof E=="function"&&(Oh(n,r,E,l),Z=n.memoizedState),(st=_r||Tm(n,r,st,l,X,Z,M)||t!==null&&t.dependencies!==null&&Zo(t.dependencies))?(Q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Z,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Z,M)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Z),d.props=l,d.state=Z,d.context=M,l=st):(typeof d.componentDidUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),l=!1)}return d=l,gu(t,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&l?(n.child=_a(n,t.child,null,c),n.child=_a(n,null,r,c)):sn(t,n,r,c),n.memoizedState=d.state,t=n.child):t=Xi(t,n,c),t}function zm(t,n,r,l){return yl(),n.flags|=256,sn(t,n,r,l),n.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lh(t){return{baseLanes:t,cachePool:wp()}}function Bh(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Gn),t}function Lm(t,n,r){var l=n.pendingProps,c=!1,d=(n.flags&128)!==0,x;if((x=d)||(x=t!==null&&t.memoizedState===null?!1:(Ke.current&2)!==0),x&&(c=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(le){if(c?Tr(n):Sr(),le){var E=De,M;if(M=E){t:{for(M=E,E=vi;M.nodeType!==8;){if(!E){E=null;break t}if(M=si(M.nextSibling),M===null){E=null;break t}}E=M}E!==null?(n.memoizedState={dehydrated:E,treeContext:Es!==null?{id:Hi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},M=jn(18,null,null,0),M.stateNode=E,M.return=n,n.child=M,xn=n,De=null,M=!0):M=!1}M||As(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Af(E)?n.lanes=32:n.lanes=536870912,null;Ki(n)}return E=l.children,l=l.fallback,c?(Sr(),c=n.mode,E=yu({mode:"hidden",children:E},c),l=bs(l,c,r,null),E.return=n,l.return=n,E.sibling=l,n.child=E,c=n.child,c.memoizedState=Lh(r),c.childLanes=Bh(t,x,r),n.memoizedState=zh,l):(Tr(n),qh(n,E))}if(M=t.memoizedState,M!==null&&(E=M.dehydrated,E!==null)){if(d)n.flags&256?(Tr(n),n.flags&=-257,n=Hh(t,n,r)):n.memoizedState!==null?(Sr(),n.child=t.child,n.flags|=128,n=null):(Sr(),c=l.fallback,E=n.mode,l=yu({mode:"visible",children:l.children},E),c=bs(c,E,r,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,_a(n,t.child,null,r),l=n.child,l.memoizedState=Lh(r),l.childLanes=Bh(t,x,r),n.memoizedState=zh,n=c);else if(Tr(n),Af(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var Q=x.dgst;x=Q,l=Error(a(419)),l.stack="",l.digest=x,vl({value:l,source:null,stack:null}),n=Hh(t,n,r)}else if(Je||_l(t,n,r,!1),x=(r&t.childLanes)!==0,Je||x){if(x=xe,x!==null&&(l=r&-r,l=(l&42)!==0?1:Za(l),l=(l&(x.suspendedLanes|r))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,oa(t,l),kn(x,t,l),jm;E.data==="$?"||of(),n=Hh(t,n,r)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=M.treeContext,De=si(E.nextSibling),xn=n,le=!0,Ss=null,vi=!1,t!==null&&(qn[Hn++]=Hi,qn[Hn++]=Fi,qn[Hn++]=Es,Hi=t.id,Fi=t.overflow,Es=n),n=qh(n,l.children),n.flags|=4096);return n}return c?(Sr(),c=l.fallback,E=n.mode,M=t.child,Q=M.sibling,l=qi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,Q!==null?c=qi(Q,c):(c=bs(c,E,r,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,E=t.child.memoizedState,E===null?E=Lh(r):(M=E.cachePool,M!==null?(Q=Qe._currentValue,M=M.parent!==Q?{parent:Q,pool:Q}:M):M=wp(),E={baseLanes:E.baseLanes|r,cachePool:M}),c.memoizedState=E,c.childLanes=Bh(t,x,r),n.memoizedState=zh,l):(Tr(n),r=t.child,t=r.sibling,r=qi(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=r,n.memoizedState=null,r)}function qh(t,n){return n=yu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function yu(t,n){return t=jn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Hh(t,n,r){return _a(n,t.child,null,r),t=qh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Bm(t,n,r){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),lh(t.return,n,r)}function Fh(t,n,r,l,c){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:c}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=r,d.tailMode=c)}function qm(t,n,r){var l=n.pendingProps,c=l.revealOrder,d=l.tail;if(sn(t,n,l.children,r),l=Ke.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bm(t,r,n);else if(t.tag===19)Bm(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(U(Ke,l),c){case"forwards":for(r=n.child,c=null;r!==null;)t=r.alternate,t!==null&&du(t)===null&&(c=r),r=r.sibling;r=c,r===null?(c=n.child,n.child=null):(c=r.sibling,r.sibling=null),Fh(n,!1,c,r,d);break;case"backwards":for(r=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&du(t)===null){n.child=c;break}t=c.sibling,c.sibling=r,r=c,c=t}Fh(n,!0,r,null,d);break;case"together":Fh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Xi(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Dr|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(_l(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,r=qi(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=qi(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Gh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Zo(t)))}function w1(t,n,r){switch(n.tag){case 3:gt(n,n.stateNode.containerInfo),vr(n,Qe,t.memoizedState.cache),yl();break;case 27:case 5:Qt(n);break;case 4:gt(n,n.stateNode.containerInfo);break;case 10:vr(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Tr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Lm(t,n,r):(Tr(n),t=Xi(t,n,r),t!==null?t.sibling:null);Tr(n);break;case 19:var c=(t.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(_l(t,n,r,!1),l=(r&n.childLanes)!==0),c){if(l)return qm(t,n,r);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),U(Ke,Ke.current),l)break;return null;case 22:case 23:return n.lanes=0,Om(t,n,r);case 24:vr(n,Qe,t.memoizedState.cache)}return Xi(t,n,r)}function Hm(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Je=!0;else{if(!Gh(t,r)&&(n.flags&128)===0)return Je=!1,w1(t,n,r);Je=(t.flags&131072)!==0}else Je=!1,le&&(n.flags&1048576)!==0&&_p(n,$o,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")th(l)?(t=Ns(l,t),n.tag=1,n=Um(null,n,l,t,r)):(n.tag=0,n=Uh(null,n,l,t,r));else{if(l!=null){if(c=l.$$typeof,c===ft){n.tag=11,n=Im(null,n,l,t,r);break t}else if(c===N){n.tag=14,n=Mm(null,n,l,t,r);break t}}throw n=mt(l)||l,Error(a(306,n,""))}}return n;case 0:return Uh(t,n,n.type,n.pendingProps,r);case 1:return l=n.type,c=Ns(l,n.pendingProps),Um(t,n,l,c,r);case 3:t:{if(gt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var d=n.memoizedState;c=d.element,ph(t,n),wl(n,l,null,r);var x=n.memoizedState;if(l=x.cache,vr(n,Qe,l),l!==d.cache&&oh(n,[Qe],r,!0),Al(),l=x.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=zm(t,n,l,r);break t}else if(l!==c){c=Ln(Error(a(424)),n),vl(c),n=zm(t,n,l,r);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(De=si(t.firstChild),xn=n,le=!0,Ss=null,vi=!0,r=bm(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(yl(),l===c){n=Xi(t,n,r);break t}sn(t,n,l,r)}n=n.child}return n;case 26:return gu(t,n),t===null?(r=Qg(n.type,null,n.pendingProps,null))?n.memoizedState=r:le||(r=n.type,t=n.pendingProps,l=ju(G.current).createElement(r),l[Me]=n,l[rn]=t,ln(l,r,t),Ve(l),n.stateNode=l):n.memoizedState=Qg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Qt(n),t===null&&le&&(l=n.stateNode=Fg(n.type,n.pendingProps,G.current),xn=n,vi=!0,c=De,Mr(n.type)?(wf=c,De=si(l.firstChild)):De=c),sn(t,n,n.pendingProps.children,r),gu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&le&&((c=l=De)&&(l=tx(l,n.type,n.pendingProps,vi),l!==null?(n.stateNode=l,xn=n,De=si(l.firstChild),vi=!1,c=!0):c=!1),c||As(n)),Qt(n),c=n.type,d=n.pendingProps,x=t!==null?t.memoizedProps:null,l=d.children,Ef(c,d)?l=null:x!==null&&Ef(c,x)&&(n.flags|=32),n.memoizedState!==null&&(c=xh(t,n,v1,null,null,r),Kl._currentValue=c),gu(t,n),sn(t,n,l,r),n.child;case 6:return t===null&&le&&((t=r=De)&&(r=ex(r,n.pendingProps,vi),r!==null?(n.stateNode=r,xn=n,De=null,t=!0):t=!1),t||As(n)),null;case 13:return Lm(t,n,r);case 4:return gt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=_a(n,null,l,r):sn(t,n,l,r),n.child;case 11:return Im(t,n,n.type,n.pendingProps,r);case 7:return sn(t,n,n.pendingProps,r),n.child;case 8:return sn(t,n,n.pendingProps.children,r),n.child;case 12:return sn(t,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,vr(n,n.type,l.value),sn(t,n,l.children,r),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,Cs(n),c=fn(c),l=l(c),n.flags|=1,sn(t,n,l,r),n.child;case 14:return Mm(t,n,n.type,n.pendingProps,r);case 15:return Vm(t,n,n.type,n.pendingProps,r);case 19:return qm(t,n,r);case 31:return l=n.pendingProps,r=n.mode,l={mode:l.mode,children:l.children},t===null?(r=yu(l,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=qi(t.child,l),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Om(t,n,r);case 24:return Cs(n),l=fn(Qe),t===null?(c=hh(),c===null&&(c=xe,d=uh(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=r),c=d),n.memoizedState={parent:l,cache:c},dh(n),vr(n,Qe,c)):((t.lanes&r)!==0&&(ph(t,n),wl(n,null,null,r),Al()),c=t.memoizedState,d=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),vr(n,Qe,l)):(l=d.cache,vr(n,Qe,l),l!==c.cache&&oh(n,[Qe],r,!0))),sn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function $i(t){t.flags|=4}function Fm(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wg(n)){if(n=Fn.current,n!==null&&((ie&4194048)===ie?_i!==null:(ie&62914560)!==ie&&(ie&536870912)===0||n!==_i))throw Tl=fh,Cp;t.flags|=8192}}function vu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?ui():536870912,t.lanes|=n,Ta|=n)}function Ml(t,n){if(!le)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ce(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(n)for(var c=t.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=r,n}function C1(t,n,r){var l=n.pendingProps;switch(rh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(n),null;case 1:return Ce(n),null;case 3:return r=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Yi(Qe),Ct(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gl(n)?$i(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ep())),Ce(n),null;case 26:return r=n.memoizedState,t===null?($i(n),r!==null?(Ce(n),Fm(n,r)):(Ce(n),n.flags&=-16777217)):r?r!==t.memoizedState?($i(n),Ce(n),Fm(n,r)):(Ce(n),n.flags&=-16777217):(t.memoizedProps!==l&&$i(n),Ce(n),n.flags&=-16777217),null;case 27:te(n),r=G.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&$i(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ce(n),null}t=W.current,gl(n)?xp(n):(t=Fg(c,l,r),n.stateNode=t,$i(n))}return Ce(n),null;case 5:if(te(n),r=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&$i(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ce(n),null}if(t=W.current,gl(n))xp(n);else{switch(c=ju(G.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(r,{is:l.is}):c.createElement(r)}}t[Me]=n,t[rn]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(ln(t,r,l),r){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&$i(n)}}return Ce(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&$i(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=G.current,gl(n)){if(t=n.stateNode,r=n.memoizedProps,l=null,c=xn,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[Me]=n,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Pg(t.nodeValue,r)),t||As(n)}else t=ju(t).createTextNode(l),t[Me]=n,n.stateNode=t}return Ce(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=gl(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[Me]=n}else yl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ce(n),c=!1}else c=Ep(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Ki(n),n):(Ki(n),null)}if(Ki(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=l!==null,t=t!==null&&t.memoizedState!==null,r){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048)}return r!==t&&r&&(n.child.flags|=8192),vu(n,n.updateQueue),Ce(n),null;case 4:return Ct(),t===null&&yf(n.stateNode.containerInfo),Ce(n),null;case 10:return Yi(n.type),Ce(n),null;case 19:if(z(Ke),c=n.memoizedState,c===null)return Ce(n),null;if(l=(n.flags&128)!==0,d=c.rendering,d===null)if(l)Ml(c,!1);else{if(Ne!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=du(t),d!==null){for(n.flags|=128,Ml(c,!1),t=d.updateQueue,n.updateQueue=t,vu(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)vp(r,t),r=r.sibling;return U(Ke,Ke.current&1|2),n.child}t=t.sibling}c.tail!==null&&je()>bu&&(n.flags|=128,l=!0,Ml(c,!1),n.lanes=4194304)}else{if(!l)if(t=du(d),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,vu(n,t),Ml(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!le)return Ce(n),null}else 2*je()-c.renderingStartTime>bu&&r!==536870912&&(n.flags|=128,l=!0,Ml(c,!1),n.lanes=4194304);c.isBackwards?(d.sibling=n.child,n.child=d):(t=c.last,t!==null?t.sibling=d:n.child=d,c.last=d)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=je(),n.sibling=null,t=Ke.current,U(Ke,l?t&1|2:t&1),n):(Ce(n),null);case 22:case 23:return Ki(n),vh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&(Ce(n),n.subtreeFlags&6&&(n.flags|=8192)):Ce(n),r=n.updateQueue,r!==null&&vu(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),t!==null&&z(Rs),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Yi(Qe),Ce(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function R1(t,n){switch(rh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Yi(Qe),Ct(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return te(n),null;case 13:if(Ki(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));yl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return z(Ke),null;case 4:return Ct(),null;case 10:return Yi(n.type),null;case 22:case 23:return Ki(n),vh(),t!==null&&z(Rs),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Yi(Qe),null;case 25:return null;default:return null}}function Gm(t,n){switch(rh(n),n.tag){case 3:Yi(Qe),Ct();break;case 26:case 27:case 5:te(n);break;case 4:Ct();break;case 13:Ki(n);break;case 19:z(Ke);break;case 10:Yi(n.type);break;case 22:case 23:Ki(n),vh(),t!==null&&z(Rs);break;case 24:Yi(Qe)}}function Vl(t,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var c=l.next;r=c;do{if((r.tag&t)===t){l=void 0;var d=r.create,x=r.inst;l=d(),x.destroy=l}r=r.next}while(r!==c)}}catch(E){ye(n,n.return,E)}}function Ar(t,n,r){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&t)===t){var x=l.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,c=n;var M=r,Q=E;try{Q()}catch(st){ye(c,M,st)}}}l=l.next}while(l!==d)}}catch(st){ye(n,n.return,st)}}function Ym(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Mp(n,r)}catch(l){ye(t,t.return,l)}}}function Qm(t,n,r){r.props=Ns(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){ye(t,n,l)}}function Ol(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(c){ye(t,n,c)}}function xi(t,n){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(c){ye(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){ye(t,n,c)}else r.current=null}function Km(t){var n=t.type,r=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(c){ye(t,t.return,c)}}function Yh(t,n,r){try{var l=t.stateNode;X1(l,t.type,r,n),l[rn]=n}catch(c){ye(t,t.return,c)}}function Xm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Mr(t.type)||t.tag===4}function Qh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Xm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Mr(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kh(t,n,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Nu));else if(l!==4&&(l===27&&Mr(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Kh(t,n,r),t=t.sibling;t!==null;)Kh(t,n,r),t=t.sibling}function _u(t,n,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(l!==4&&(l===27&&Mr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(_u(t,n,r),t=t.sibling;t!==null;)_u(t,n,r),t=t.sibling}function $m(t){var n=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);ln(n,l,r),n[Me]=t,n[rn]=r}catch(d){ye(t,t.return,d)}}var Zi=!1,Pe=!1,Xh=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,tn=null;function D1(t,n){if(t=t.containerInfo,xf=Pu,t=op(t),Qc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break t}var x=0,E=-1,M=-1,Q=0,st=0,ut=t,X=null;e:for(;;){for(var Z;ut!==r||c!==0&&ut.nodeType!==3||(E=x+c),ut!==d||l!==0&&ut.nodeType!==3||(M=x+l),ut.nodeType===3&&(x+=ut.nodeValue.length),(Z=ut.firstChild)!==null;)X=ut,ut=Z;for(;;){if(ut===t)break e;if(X===r&&++Q===c&&(E=x),X===d&&++st===l&&(M=x),(Z=ut.nextSibling)!==null)break;ut=X,X=ut.parentNode}ut=Z}r=E===-1||M===-1?null:{start:E,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(bf={focusedElem:t,selectionRange:r},Pu=!1,tn=n;tn!==null;)if(n=tn,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,tn=t;else for(;tn!==null;){switch(n=tn,d=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,r=n,c=d.memoizedProps,d=d.memoizedState,l=r.stateNode;try{var Lt=Ns(r.type,c,r.elementType===r.type);t=l.getSnapshotBeforeUpdate(Lt,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ot){ye(r,r.return,Ot)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)Sf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Sf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,tn=t;break}tn=n.return}}function Wm(t,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:wr(t,r),l&4&&Vl(5,r);break;case 1:if(wr(t,r),l&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(x){ye(r,r.return,x)}else{var c=Ns(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){ye(r,r.return,x)}}l&64&&Ym(r),l&512&&Ol(r,r.return);break;case 3:if(wr(t,r),l&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Mp(t,n)}catch(x){ye(r,r.return,x)}}break;case 27:n===null&&l&4&&$m(r);case 26:case 5:wr(t,r),n===null&&l&4&&Km(r),l&512&&Ol(r,r.return);break;case 12:wr(t,r);break;case 13:wr(t,r),l&4&&eg(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=U1.bind(null,r),nx(t,r))));break;case 22:if(l=r.memoizedState!==null||Zi,!l){n=n!==null&&n.memoizedState!==null||Pe,c=Zi;var d=Pe;Zi=l,(Pe=n)&&!d?Cr(t,r,(r.subtreeFlags&8772)!==0):wr(t,r),Zi=c,Pe=d}break;case 30:break;default:wr(t,r)}}function Jm(t){var n=t.alternate;n!==null&&(t.alternate=null,Jm(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Qs(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Se=null,wn=!1;function Wi(t,n,r){for(r=r.child;r!==null;)tg(t,n,r),r=r.sibling}function tg(t,n,r){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Nt,r)}catch{}switch(r.tag){case 26:Pe||xi(r,n),Wi(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Pe||xi(r,n);var l=Se,c=wn;Mr(r.type)&&(Se=r.stateNode,wn=!1),Wi(t,n,r),Fl(r.stateNode),Se=l,wn=c;break;case 5:Pe||xi(r,n);case 6:if(l=Se,c=wn,Se=null,Wi(t,n,r),Se=l,wn=c,Se!==null)if(wn)try{(Se.nodeType===9?Se.body:Se.nodeName==="HTML"?Se.ownerDocument.body:Se).removeChild(r.stateNode)}catch(d){ye(r,n,d)}else try{Se.removeChild(r.stateNode)}catch(d){ye(r,n,d)}break;case 18:Se!==null&&(wn?(t=Se,qg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Wl(t)):qg(Se,r.stateNode));break;case 4:l=Se,c=wn,Se=r.stateNode.containerInfo,wn=!0,Wi(t,n,r),Se=l,wn=c;break;case 0:case 11:case 14:case 15:Pe||Ar(2,r,n),Pe||Ar(4,r,n),Wi(t,n,r);break;case 1:Pe||(xi(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Qm(r,n,l)),Wi(t,n,r);break;case 21:Wi(t,n,r);break;case 22:Pe=(l=Pe)||r.memoizedState!==null,Wi(t,n,r),Pe=l;break;default:Wi(t,n,r)}}function eg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Wl(t)}catch(r){ye(n,n.return,r)}}function N1(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Zm),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Zm),n;default:throw Error(a(435,t.tag))}}function $h(t,n){var r=N1(t);n.forEach(function(l){var c=z1.bind(null,t,l);r.has(l)||(r.add(l),l.then(c,c))})}function In(t,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var c=r[l],d=t,x=n,E=x;t:for(;E!==null;){switch(E.tag){case 27:if(Mr(E.type)){Se=E.stateNode,wn=!1;break t}break;case 5:Se=E.stateNode,wn=!1;break t;case 3:case 4:Se=E.stateNode.containerInfo,wn=!0;break t}E=E.return}if(Se===null)throw Error(a(160));tg(d,x,c),Se=null,wn=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ng(n,t),n=n.sibling}var ri=null;function ng(t,n){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:In(n,t),Mn(t),l&4&&(Ar(3,t,t.return),Vl(3,t),Ar(5,t,t.return));break;case 1:In(n,t),Mn(t),l&512&&(Pe||r===null||xi(r,r.return)),l&64&&Zi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var c=ri;if(In(n,t),Mn(t),l&512&&(Pe||r===null||xi(r,r.return)),l&4){var d=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){t:{l=t.type,r=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":d=c.getElementsByTagName("title")[0],(!d||d[or]||d[Me]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(l),c.head.insertBefore(d,c.querySelector("head > title"))),ln(d,l,r),d[Me]=t,Ve(d),l=d;break t;case"link":var x=$g("link","href",c).get(l+(r.href||""));if(x){for(var E=0;E<x.length;E++)if(d=x[E],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){x.splice(E,1);break e}}d=c.createElement(l),ln(d,l,r),c.head.appendChild(d);break;case"meta":if(x=$g("meta","content",c).get(l+(r.content||""))){for(E=0;E<x.length;E++)if(d=x[E],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){x.splice(E,1);break e}}d=c.createElement(l),ln(d,l,r),c.head.appendChild(d);break;default:throw Error(a(468,l))}d[Me]=t,Ve(d),l=d}t.stateNode=l}else Zg(c,t.type,t.stateNode);else t.stateNode=Xg(c,l,t.memoizedProps);else d!==l?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,l===null?Zg(c,t.type,t.stateNode):Xg(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Yh(t,t.memoizedProps,r.memoizedProps)}break;case 27:In(n,t),Mn(t),l&512&&(Pe||r===null||xi(r,r.return)),r!==null&&l&4&&Yh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(In(n,t),Mn(t),l&512&&(Pe||r===null||xi(r,r.return)),t.flags&32){c=t.stateNode;try{Un(c,"")}catch(Z){ye(t,t.return,Z)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,Yh(t,c,r!==null?r.memoizedProps:c)),l&1024&&(Xh=!0);break;case 6:if(In(n,t),Mn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(Z){ye(t,t.return,Z)}}break;case 3:if(Vu=null,c=ri,ri=Iu(n.containerInfo),In(n,t),ri=c,Mn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Wl(n.containerInfo)}catch(Z){ye(t,t.return,Z)}Xh&&(Xh=!1,ig(t));break;case 4:l=ri,ri=Iu(t.stateNode.containerInfo),In(n,t),Mn(t),ri=l;break;case 12:In(n,t),Mn(t);break;case 13:In(n,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(nf=je()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$h(t,l)));break;case 22:c=t.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,Q=Zi,st=Pe;if(Zi=Q||c,Pe=st||M,In(n,t),Pe=st,Zi=Q,Mn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(r===null||M||Zi||Pe||js(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){M=r=n;try{if(d=M.stateNode,c)x=d.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=M.stateNode;var ut=M.memoizedProps.style,X=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Z){ye(M,M.return,Z)}}}else if(n.tag===6){if(r===null){M=n;try{M.stateNode.nodeValue=c?"":M.memoizedProps}catch(Z){ye(M,M.return,Z)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,$h(t,r))));break;case 19:In(n,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$h(t,l)));break;case 30:break;case 21:break;default:In(n,t),Mn(t)}}function Mn(t){var n=t.flags;if(n&2){try{for(var r,l=t.return;l!==null;){if(Xm(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var c=r.stateNode,d=Qh(t);_u(t,d,c);break;case 5:var x=r.stateNode;r.flags&32&&(Un(x,""),r.flags&=-33);var E=Qh(t);_u(t,E,x);break;case 3:case 4:var M=r.stateNode.containerInfo,Q=Qh(t);Kh(t,Q,M);break;default:throw Error(a(161))}}catch(st){ye(t,t.return,st)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function ig(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;ig(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function wr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Wm(t,n.alternate,n),n=n.sibling}function js(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Ar(4,n,n.return),js(n);break;case 1:xi(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Qm(n,n.return,r),js(n);break;case 27:Fl(n.stateNode);case 26:case 5:xi(n,n.return),js(n);break;case 22:n.memoizedState===null&&js(n);break;case 30:js(n);break;default:js(n)}t=t.sibling}}function Cr(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,d=n,x=d.flags;switch(d.tag){case 0:case 11:case 15:Cr(c,d,r),Vl(4,d);break;case 1:if(Cr(c,d,r),l=d,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Q){ye(l,l.return,Q)}if(l=d,c=l.updateQueue,c!==null){var E=l.stateNode;try{var M=c.shared.hiddenCallbacks;if(M!==null)for(c.shared.hiddenCallbacks=null,c=0;c<M.length;c++)Ip(M[c],E)}catch(Q){ye(l,l.return,Q)}}r&&x&64&&Ym(d),Ol(d,d.return);break;case 27:$m(d);case 26:case 5:Cr(c,d,r),r&&l===null&&x&4&&Km(d),Ol(d,d.return);break;case 12:Cr(c,d,r);break;case 13:Cr(c,d,r),r&&x&4&&eg(c,d);break;case 22:d.memoizedState===null&&Cr(c,d,r),Ol(d,d.return);break;case 30:break;default:Cr(c,d,r)}n=n.sibling}}function Zh(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&xl(r))}function Wh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&xl(t))}function bi(t,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)rg(t,n,r,l),n=n.sibling}function rg(t,n,r,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:bi(t,n,r,l),c&2048&&Vl(9,n);break;case 1:bi(t,n,r,l);break;case 3:bi(t,n,r,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&xl(t)));break;case 12:if(c&2048){bi(t,n,r,l),t=n.stateNode;try{var d=n.memoizedProps,x=d.id,E=d.onPostCommit;typeof E=="function"&&E(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){ye(n,n.return,M)}}else bi(t,n,r,l);break;case 13:bi(t,n,r,l);break;case 23:break;case 22:d=n.stateNode,x=n.alternate,n.memoizedState!==null?d._visibility&2?bi(t,n,r,l):kl(t,n):d._visibility&2?bi(t,n,r,l):(d._visibility|=2,xa(t,n,r,l,(n.subtreeFlags&10256)!==0)),c&2048&&Zh(x,n);break;case 24:bi(t,n,r,l),c&2048&&Wh(n.alternate,n);break;default:bi(t,n,r,l)}}function xa(t,n,r,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=t,x=n,E=r,M=l,Q=x.flags;switch(x.tag){case 0:case 11:case 15:xa(d,x,E,M,c),Vl(8,x);break;case 23:break;case 22:var st=x.stateNode;x.memoizedState!==null?st._visibility&2?xa(d,x,E,M,c):kl(d,x):(st._visibility|=2,xa(d,x,E,M,c)),c&&Q&2048&&Zh(x.alternate,x);break;case 24:xa(d,x,E,M,c),c&&Q&2048&&Wh(x.alternate,x);break;default:xa(d,x,E,M,c)}n=n.sibling}}function kl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,l=n,c=l.flags;switch(l.tag){case 22:kl(r,l),c&2048&&Zh(l.alternate,l);break;case 24:kl(r,l),c&2048&&Wh(l.alternate,l);break;default:kl(r,l)}n=n.sibling}}var Pl=8192;function ba(t){if(t.subtreeFlags&Pl)for(t=t.child;t!==null;)sg(t),t=t.sibling}function sg(t){switch(t.tag){case 26:ba(t),t.flags&Pl&&t.memoizedState!==null&&mx(ri,t.memoizedState,t.memoizedProps);break;case 5:ba(t);break;case 3:case 4:var n=ri;ri=Iu(t.stateNode.containerInfo),ba(t),ri=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Pl,Pl=16777216,ba(t),Pl=n):ba(t));break;default:ba(t)}}function ag(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ul(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];tn=l,og(l,t)}ag(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lg(t),t=t.sibling}function lg(t){switch(t.tag){case 0:case 11:case 15:Ul(t),t.flags&2048&&Ar(9,t,t.return);break;case 3:Ul(t);break;case 12:Ul(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,xu(t)):Ul(t);break;default:Ul(t)}}function xu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];tn=l,og(l,t)}ag(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Ar(8,n,n.return),xu(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,xu(n));break;default:xu(n)}t=t.sibling}}function og(t,n){for(;tn!==null;){var r=tn;switch(r.tag){case 0:case 11:case 15:Ar(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:xl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,tn=l;else t:for(r=t;tn!==null;){l=tn;var c=l.sibling,d=l.return;if(Jm(l),l===r){tn=null;break t}if(c!==null){c.return=d,tn=c;break t}tn=d}}}var j1={getCacheForType:function(t){var n=fn(Qe),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r}},I1=typeof WeakMap=="function"?WeakMap:Map,he=0,xe=null,Wt=null,ie=0,fe=0,Vn=null,Rr=!1,Ea=!1,Jh=!1,Ji=0,Ne=0,Dr=0,Is=0,tf=0,Gn=0,Ta=0,zl=null,Cn=null,ef=!1,nf=0,bu=1/0,Eu=null,Nr=null,an=0,jr=null,Sa=null,Aa=0,rf=0,sf=null,ug=null,Ll=0,af=null;function On(){if((he&2)!==0&&ie!==0)return ie&-ie;if(O.T!==null){var t=fa;return t!==0?t:df()}return Oi()}function cg(){Gn===0&&(Gn=(ie&536870912)===0||le?Wr():536870912);var t=Fn.current;return t!==null&&(t.flags|=32),Gn}function kn(t,n,r){(t===xe&&(fe===2||fe===9)||t.cancelPendingCommit!==null)&&(wa(t,0),Ir(t,ie,Gn,!1)),Ie(t,r),((he&2)===0||t!==xe)&&(t===xe&&((he&2)===0&&(Is|=r),Ne===4&&Ir(t,ie,Gn,!1)),Ei(t))}function hg(t,n,r){if((he&6)!==0)throw Error(a(327));var l=!r&&(n&124)===0&&(n&t.expiredLanes)===0||Sn(t,n),c=l?O1(t,n):uf(t,n,!0),d=l;do{if(c===0){Ea&&!l&&Ir(t,n,0,!1);break}else{if(r=t.current.alternate,d&&!M1(r)){c=uf(t,n,!1),d=!1;continue}if(c===2){if(d=n,t.errorRecoveryDisabledLanes&d)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;t:{var E=t;c=zl;var M=E.current.memoizedState.isDehydrated;if(M&&(wa(E,x).flags|=256),x=uf(E,x,!1),x!==2){if(Jh&&!M){E.errorRecoveryDisabledLanes|=d,Is|=d,c=4;break t}d=Cn,Cn=c,d!==null&&(Cn===null?Cn=d:Cn.push.apply(Cn,d))}c=x}if(d=!1,c!==2)continue}}if(c===1){wa(t,0),Ir(t,n,0,!0);break}t:{switch(l=t,d=c,d){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Ir(l,n,Gn,!Rr);break t;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=nf+300-je(),10<c)){if(Ir(l,n,Gn,!Rr),zt(l,0,!0)!==0)break t;l.timeoutHandle=Lg(fg.bind(null,l,r,Cn,Eu,ef,n,Gn,Is,Ta,Rr,d,2,-0,0),c);break t}fg(l,r,Cn,Eu,ef,n,Gn,Is,Ta,Rr,d,0,-0,0)}}break}while(!0);Ei(t)}function fg(t,n,r,l,c,d,x,E,M,Q,st,ut,X,Z){if(t.timeoutHandle=-1,ut=n.subtreeFlags,(ut&8192||(ut&16785408)===16785408)&&(Ql={stylesheets:null,count:0,unsuspend:px},sg(n),ut=gx(),ut!==null)){t.cancelPendingCommit=ut(_g.bind(null,t,n,d,r,l,c,x,E,M,st,1,X,Z)),Ir(t,d,x,!Q);return}_g(t,n,d,r,l,c,x,E,M)}function M1(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var c=r[l],d=c.getSnapshot;c=c.value;try{if(!Nn(d(),c))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ir(t,n,r,l){n&=~tf,n&=~Is,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var d=31-jt(c),x=1<<d;l[d]=-1,c&=~x}r!==0&&ar(t,r,n)}function Tu(){return(he&6)===0?(Bl(0),!1):!0}function lf(){if(Wt!==null){if(fe===0)var t=Wt.return;else t=Wt,Gi=ws=null,Th(t),va=null,jl=0,t=Wt;for(;t!==null;)Gm(t.alternate,t),t=t.return;Wt=null}}function wa(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Z1(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),lf(),xe=t,Wt=r=qi(t.current,null),ie=n,fe=0,Vn=null,Rr=!1,Ea=Sn(t,n),Jh=!1,Ta=Gn=tf=Is=Dr=Ne=0,Cn=zl=null,ef=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-jt(l),d=1<<c;n|=t[c],l&=~d}return Ji=n,Go(),r}function dg(t,n){Kt=null,O.H=cu,n===El||n===tu?(n=Np(),fe=3):n===Cp?(n=Np(),fe=4):fe=n===jm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Vn=n,Wt===null&&(Ne=1,mu(t,Ln(n,t.current)))}function pg(){var t=O.H;return O.H=cu,t===null?cu:t}function mg(){var t=O.A;return O.A=j1,t}function of(){Ne=4,Rr||(ie&4194048)!==ie&&Fn.current!==null||(Ea=!0),(Dr&134217727)===0&&(Is&134217727)===0||xe===null||Ir(xe,ie,Gn,!1)}function uf(t,n,r){var l=he;he|=2;var c=pg(),d=mg();(xe!==t||ie!==n)&&(Eu=null,wa(t,n)),n=!1;var x=Ne;t:do try{if(fe!==0&&Wt!==null){var E=Wt,M=Vn;switch(fe){case 8:lf(),x=6;break t;case 3:case 2:case 9:case 6:Fn.current===null&&(n=!0);var Q=fe;if(fe=0,Vn=null,Ca(t,E,M,Q),r&&Ea){x=0;break t}break;default:Q=fe,fe=0,Vn=null,Ca(t,E,M,Q)}}V1(),x=Ne;break}catch(st){dg(t,st)}while(!0);return n&&t.shellSuspendCounter++,Gi=ws=null,he=l,O.H=c,O.A=d,Wt===null&&(xe=null,ie=0,Go()),x}function V1(){for(;Wt!==null;)gg(Wt)}function O1(t,n){var r=he;he|=2;var l=pg(),c=mg();xe!==t||ie!==n?(Eu=null,bu=je()+500,wa(t,n)):Ea=Sn(t,n);t:do try{if(fe!==0&&Wt!==null){n=Wt;var d=Vn;e:switch(fe){case 1:fe=0,Vn=null,Ca(t,n,d,1);break;case 2:case 9:if(Rp(d)){fe=0,Vn=null,yg(n);break}n=function(){fe!==2&&fe!==9||xe!==t||(fe=7),Ei(t)},d.then(n,n);break t;case 3:fe=7;break t;case 4:fe=5;break t;case 7:Rp(d)?(fe=0,Vn=null,yg(n)):(fe=0,Vn=null,Ca(t,n,d,7));break;case 5:var x=null;switch(Wt.tag){case 26:x=Wt.memoizedState;case 5:case 27:var E=Wt;if(!x||Wg(x)){fe=0,Vn=null;var M=E.sibling;if(M!==null)Wt=M;else{var Q=E.return;Q!==null?(Wt=Q,Su(Q)):Wt=null}break e}}fe=0,Vn=null,Ca(t,n,d,5);break;case 6:fe=0,Vn=null,Ca(t,n,d,6);break;case 8:lf(),Ne=6;break t;default:throw Error(a(462))}}k1();break}catch(st){dg(t,st)}while(!0);return Gi=ws=null,O.H=l,O.A=c,he=r,Wt!==null?0:(xe=null,ie=0,Go(),Ne)}function k1(){for(;Wt!==null&&!Bt();)gg(Wt)}function gg(t){var n=Hm(t.alternate,t,Ji);t.memoizedProps=t.pendingProps,n===null?Su(t):Wt=n}function yg(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=Pm(r,n,n.pendingProps,n.type,void 0,ie);break;case 11:n=Pm(r,n,n.pendingProps,n.type.render,n.ref,ie);break;case 5:Th(n);default:Gm(r,n),n=Wt=vp(n,Ji),n=Hm(r,n,Ji)}t.memoizedProps=t.pendingProps,n===null?Su(t):Wt=n}function Ca(t,n,r,l){Gi=ws=null,Th(n),va=null,jl=0;var c=n.return;try{if(A1(t,c,n,r,ie)){Ne=1,mu(t,Ln(r,t.current)),Wt=null;return}}catch(d){if(c!==null)throw Wt=c,d;Ne=1,mu(t,Ln(r,t.current)),Wt=null;return}n.flags&32768?(le||l===1?t=!0:Ea||(ie&536870912)!==0?t=!1:(Rr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Fn.current,l!==null&&l.tag===13&&(l.flags|=16384))),vg(n,t)):Su(n)}function Su(t){var n=t;do{if((n.flags&32768)!==0){vg(n,Rr);return}t=n.return;var r=C1(n.alternate,n,Ji);if(r!==null){Wt=r;return}if(n=n.sibling,n!==null){Wt=n;return}Wt=n=t}while(n!==null);Ne===0&&(Ne=5)}function vg(t,n){do{var r=R1(t.alternate,t);if(r!==null){r.flags&=32767,Wt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){Wt=t;return}Wt=t=r}while(t!==null);Ne=6,Wt=null}function _g(t,n,r,l,c,d,x,E,M){t.cancelPendingCommit=null;do Au();while(an!==0);if((he&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(d=n.lanes|n.childLanes,d|=Wc,Ro(t,r,d,x,E,M),t===xe&&(Wt=xe=null,ie=0),Sa=n,jr=t,Aa=r,rf=d,sf=c,ug=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,L1(Tn,function(){return Sg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,c=nt.p,nt.p=2,x=he,he|=4;try{D1(t,n,r)}finally{he=x,nt.p=c,O.T=l}}an=1,xg(),bg(),Eg()}}function xg(){if(an===1){an=0;var t=jr,n=Sa,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=O.T,O.T=null;var l=nt.p;nt.p=2;var c=he;he|=4;try{ng(n,t);var d=bf,x=op(t.containerInfo),E=d.focusedElem,M=d.selectionRange;if(x!==E&&E&&E.ownerDocument&&lp(E.ownerDocument.documentElement,E)){if(M!==null&&Qc(E)){var Q=M.start,st=M.end;if(st===void 0&&(st=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(st,E.value.length);else{var ut=E.ownerDocument||document,X=ut&&ut.defaultView||window;if(X.getSelection){var Z=X.getSelection(),Lt=E.textContent.length,Ot=Math.min(M.start,Lt),ge=M.end===void 0?Ot:Math.min(M.end,Lt);!Z.extend&&Ot>ge&&(x=ge,ge=Ot,Ot=x);var B=ap(E,Ot),P=ap(E,ge);if(B&&P&&(Z.rangeCount!==1||Z.anchorNode!==B.node||Z.anchorOffset!==B.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var F=ut.createRange();F.setStart(B.node,B.offset),Z.removeAllRanges(),Ot>ge?(Z.addRange(F),Z.extend(P.node,P.offset)):(F.setEnd(P.node,P.offset),Z.addRange(F))}}}}for(ut=[],Z=E;Z=Z.parentNode;)Z.nodeType===1&&ut.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ut.length;E++){var lt=ut[E];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}Pu=!!xf,bf=xf=null}finally{he=c,nt.p=l,O.T=r}}t.current=n,an=2}}function bg(){if(an===2){an=0;var t=jr,n=Sa,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=O.T,O.T=null;var l=nt.p;nt.p=2;var c=he;he|=4;try{Wm(t,n.alternate,n)}finally{he=c,nt.p=l,O.T=r}}an=3}}function Eg(){if(an===4||an===3){an=0,En();var t=jr,n=Sa,r=Aa,l=ug;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?an=5:(an=0,Sa=jr=null,Tg(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(Nr=null),Wa(r),n=n.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Nt,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=O.T,c=nt.p,nt.p=2,O.T=null;try{for(var d=t.onRecoverableError,x=0;x<l.length;x++){var E=l[x];d(E.value,{componentStack:E.stack})}}finally{O.T=n,nt.p=c}}(Aa&3)!==0&&Au(),Ei(t),c=t.pendingLanes,(r&4194090)!==0&&(c&42)!==0?t===af?Ll++:(Ll=0,af=t):Ll=0,Bl(0)}}function Tg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,xl(n)))}function Au(t){return xg(),bg(),Eg(),Sg()}function Sg(){if(an!==5)return!1;var t=jr,n=rf;rf=0;var r=Wa(Aa),l=O.T,c=nt.p;try{nt.p=32>r?32:r,O.T=null,r=sf,sf=null;var d=jr,x=Aa;if(an=0,Sa=jr=null,Aa=0,(he&6)!==0)throw Error(a(331));var E=he;if(he|=4,lg(d.current),rg(d,d.current,x,r),he=E,Bl(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Nt,d)}catch{}return!0}finally{nt.p=c,O.T=l,Tg(t,n)}}function Ag(t,n,r){n=Ln(r,n),n=Ph(t.stateNode,n,2),t=br(t,n,2),t!==null&&(Ie(t,2),Ei(t))}function ye(t,n,r){if(t.tag===3)Ag(t,t,r);else for(;n!==null;){if(n.tag===3){Ag(n,t,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Nr===null||!Nr.has(l))){t=Ln(r,t),r=Dm(2),l=br(n,r,2),l!==null&&(Nm(r,l,n,t),Ie(l,2),Ei(l));break}}n=n.return}}function cf(t,n,r){var l=t.pingCache;if(l===null){l=t.pingCache=new I1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(r)||(Jh=!0,c.add(r),t=P1.bind(null,t,n,r),n.then(t,t))}function P1(t,n,r){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,xe===t&&(ie&r)===r&&(Ne===4||Ne===3&&(ie&62914560)===ie&&300>je()-nf?(he&2)===0&&wa(t,0):tf|=r,Ta===ie&&(Ta=0)),Ei(t)}function wg(t,n){n===0&&(n=ui()),t=oa(t,n),t!==null&&(Ie(t,n),Ei(t))}function U1(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),wg(t,r)}function z1(t,n){var r=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(r=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),wg(t,r)}function L1(t,n){return Ge(t,n)}var wu=null,Ra=null,hf=!1,Cu=!1,ff=!1,Ms=0;function Ei(t){t!==Ra&&t.next===null&&(Ra===null?wu=Ra=t:Ra=Ra.next=t),Cu=!0,hf||(hf=!0,q1())}function Bl(t,n){if(!ff&&Cu){ff=!0;do for(var r=!1,l=wu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var d=0;else{var x=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-jt(42|t)+1)-1,d&=c&~(x&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,Ng(l,d))}else d=ie,d=zt(l,l===xe?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Sn(l,d)||(r=!0,Ng(l,d));l=l.next}while(r);ff=!1}}function B1(){Cg()}function Cg(){Cu=hf=!1;var t=0;Ms!==0&&($1()&&(t=Ms),Ms=0);for(var n=je(),r=null,l=wu;l!==null;){var c=l.next,d=Rg(l,n);d===0?(l.next=null,r===null?wu=c:r.next=c,c===null&&(Ra=r)):(r=l,(t!==0||(d&3)!==0)&&(Cu=!0)),l=c}Bl(t)}function Rg(t,n){for(var r=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var x=31-jt(d),E=1<<x,M=c[x];M===-1?((E&r)===0||(E&l)!==0)&&(c[x]=rr(E,n)):M<=n&&(t.expiredLanes|=E),d&=~E}if(n=xe,r=ie,r=zt(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===n&&(fe===2||fe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&oe(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Sn(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(l!==null&&oe(l),Wa(r)){case 2:case 8:r=Ae;break;case 32:r=Tn;break;case 268435456:r=bt;break;default:r=Tn}return l=Dg.bind(null,t),r=Ge(r,l),t.callbackPriority=n,t.callbackNode=r,n}return l!==null&&l!==null&&oe(l),t.callbackPriority=2,t.callbackNode=null,2}function Dg(t,n){if(an!==0&&an!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Au()&&t.callbackNode!==r)return null;var l=ie;return l=zt(t,t===xe?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(hg(t,l,n),Rg(t,je()),t.callbackNode!=null&&t.callbackNode===r?Dg.bind(null,t):null)}function Ng(t,n){if(Au())return null;hg(t,n,!0)}function q1(){W1(function(){(he&6)!==0?Ge(ve,B1):Cg()})}function df(){return Ms===0&&(Ms=Wr()),Ms}function jg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Jn(""+t)}function Ig(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function H1(t,n,r,l,c){if(n==="submit"&&r&&r.stateNode===c){var d=jg((c[rn]||null).action),x=l.submitter;x&&(n=(n=x[rn]||null)?jg(n.formAction):x.getAttribute("formAction"),n!==null&&(d=n,x=null));var E=new fs("action","action",null,l,c);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ms!==0){var M=x?Ig(c,x):new FormData(c);Ih(r,{pending:!0,data:M,method:c.method,action:d},null,M)}}else typeof d=="function"&&(E.preventDefault(),M=x?Ig(c,x):new FormData(c),Ih(r,{pending:!0,data:M,method:c.method,action:d},d,M))},currentTarget:c}]})}}for(var pf=0;pf<Zc.length;pf++){var mf=Zc[pf],F1=mf.toLowerCase(),G1=mf[0].toUpperCase()+mf.slice(1);ii(F1,"on"+G1)}ii(hp,"onAnimationEnd"),ii(fp,"onAnimationIteration"),ii(dp,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(o1,"onTransitionRun"),ii(u1,"onTransitionStart"),ii(c1,"onTransitionCancel"),ii(pp,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function Mg(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],c=l.event;l=l.listeners;t:{var d=void 0;if(n)for(var x=l.length-1;0<=x;x--){var E=l[x],M=E.instance,Q=E.currentTarget;if(E=E.listener,M!==d&&c.isPropagationStopped())break t;d=E,c.currentTarget=Q;try{d(c)}catch(st){pu(st)}c.currentTarget=null,d=M}else for(x=0;x<l.length;x++){if(E=l[x],M=E.instance,Q=E.currentTarget,E=E.listener,M!==d&&c.isPropagationStopped())break t;d=E,c.currentTarget=Q;try{d(c)}catch(st){pu(st)}c.currentTarget=null,d=M}}}}function Jt(t,n){var r=n[Jr];r===void 0&&(r=n[Jr]=new Set);var l=t+"__bubble";r.has(l)||(Vg(n,t,2,!1),r.add(l))}function gf(t,n,r){var l=0;n&&(l|=4),Vg(r,t,l,n)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function yf(t){if(!t[Ru]){t[Ru]=!0,Do.forEach(function(r){r!=="selectionchange"&&(Y1.has(r)||gf(r,!1,t),gf(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ru]||(n[Ru]=!0,gf("selectionchange",!1,n))}}function Vg(t,n,r,l){switch(ry(n)){case 2:var c=_x;break;case 8:c=xx;break;default:c=jf}r=c.bind(null,n,r,t),c=void 0,!Li||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,r,{capture:!0,passive:c}):t.addEventListener(n,r,!0):c!==void 0?t.addEventListener(n,r,{passive:c}):t.addEventListener(n,r,!1)}function vf(t,n,r,l,c){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var E=l.stateNode.containerInfo;if(E===c)break;if(x===4)for(x=l.return;x!==null;){var M=x.tag;if((M===3||M===4)&&x.stateNode.containerInfo===c)return;x=x.return}for(;E!==null;){if(x=hi(E),x===null)return;if(M=x.tag,M===5||M===6||M===26||M===27){l=d=x;continue t}E=E.parentNode}}l=l.return}us(function(){var Q=d,st=sl(r),ut=[];t:{var X=mp.get(t);if(X!==void 0){var Z=fs,Lt=t;switch(t){case"keypress":if(cs(r)===0)break t;case"keydown":case"keyup":Z=ra;break;case"focusin":Lt="focus",Z=ea;break;case"focusout":Lt="blur",Z=ea;break;case"beforeblur":case"afterblur":Z=ea;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=yr;break;case hp:case fp:case dp:Z=ll;break;case pp:Z=m;break;case"scroll":case"scrollend":Z=ps;break;case"wheel":Z=A;break;case"copy":case"cut":case"paste":Z=Uo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=cl;break;case"toggle":case"beforetoggle":Z=tt}var Ot=(n&4)!==0,ge=!Ot&&(t==="scroll"||t==="scrollend"),B=Ot?X!==null?X+"Capture":null:X;Ot=[];for(var P=Q,F;P!==null;){var lt=P;if(F=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||F===null||B===null||(lt=mr(P,B),lt!=null&&Ot.push(Hl(P,lt,F))),ge)break;P=P.return}0<Ot.length&&(X=new Z(X,Lt,null,r,st),ut.push({event:X,listeners:Ot}))}}if((n&7)===0){t:{if(X=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",X&&r!==rl&&(Lt=r.relatedTarget||r.fromElement)&&(hi(Lt)||Lt[ki]))break t;if((Z||X)&&(X=st.window===st?st:(X=st.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(Lt=r.relatedTarget||r.toElement,Z=Q,Lt=Lt?hi(Lt):null,Lt!==null&&(ge=h(Lt),Ot=Lt.tag,Lt!==ge||Ot!==5&&Ot!==27&&Ot!==6)&&(Lt=null)):(Z=null,Lt=Q),Z!==Lt)){if(Ot=ys,lt="onMouseLeave",B="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Ot=cl,lt="onPointerLeave",B="onPointerEnter",P="pointer"),ge=Z==null?X:ur(Z),F=Lt==null?X:ur(Lt),X=new Ot(lt,P+"leave",Z,r,st),X.target=ge,X.relatedTarget=F,lt=null,hi(st)===Q&&(Ot=new Ot(B,P+"enter",Lt,r,st),Ot.target=F,Ot.relatedTarget=ge,lt=Ot),ge=lt,Z&&Lt)e:{for(Ot=Z,B=Lt,P=0,F=Ot;F;F=Da(F))P++;for(F=0,lt=B;lt;lt=Da(lt))F++;for(;0<P-F;)Ot=Da(Ot),P--;for(;0<F-P;)B=Da(B),F--;for(;P--;){if(Ot===B||B!==null&&Ot===B.alternate)break e;Ot=Da(Ot),B=Da(B)}Ot=null}else Ot=null;Z!==null&&Og(ut,X,Z,Ot,!1),Lt!==null&&ge!==null&&Og(ut,ge,Lt,Ot,!0)}}t:{if(X=Q?ur(Q):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var At=tp;else if(Wd(X))if(ep)At=s1;else{At=i1;var Xt=n1}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Ws(Q.elementType)&&(At=tp):At=r1;if(At&&(At=At(t,Q))){Jd(ut,At,r,st);break t}Xt&&Xt(t,X,Q),t==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&el(X,"number",X.value)}switch(Xt=Q?ur(Q):window,t){case"focusin":(Wd(Xt)||Xt.contentEditable==="true")&&(sa=Xt,Kc=Q,ml=null);break;case"focusout":ml=Kc=sa=null;break;case"mousedown":Xc=!0;break;case"contextmenu":case"mouseup":case"dragend":Xc=!1,up(ut,r,st);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":up(ut,r,st)}var Dt;if(Ft)t:{switch(t){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else ni?ti(t,r)&&(kt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(kt="onCompositionStart");kt&&(Oe&&r.locale!=="ko"&&(ni||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ni&&(Dt=Oo()):(zn=st,_e="value"in zn?zn.value:zn.textContent,ni=!0)),Xt=Du(Q,kt),0<Xt.length&&(kt=new ul(kt,t,null,r,st),ut.push({event:kt,listeners:Xt}),Dt?kt.data=Dt:(Dt=ei(r),Dt!==null&&(kt.data=Dt)))),(Dt=ce?hl(t,r):J_(t,r))&&(kt=Du(Q,"onBeforeInput"),0<kt.length&&(Xt=new ul("onBeforeInput","beforeinput",null,r,st),ut.push({event:Xt,listeners:kt}),Xt.data=Dt)),H1(ut,t,Q,r,st)}Mg(ut,n)})}function Hl(t,n,r){return{instance:t,listener:n,currentTarget:r}}function Du(t,n){for(var r=n+"Capture",l=[];t!==null;){var c=t,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=mr(t,r),c!=null&&l.unshift(Hl(t,c,d)),c=mr(t,n),c!=null&&l.push(Hl(t,c,d))),t.tag===3)return l;t=t.return}return[]}function Da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Og(t,n,r,l,c){for(var d=n._reactName,x=[];r!==null&&r!==l;){var E=r,M=E.alternate,Q=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||Q===null||(M=Q,c?(Q=mr(r,d),Q!=null&&x.unshift(Hl(r,Q,M))):c||(Q=mr(r,d),Q!=null&&x.push(Hl(r,Q,M)))),r=r.return}x.length!==0&&t.push({event:n,listeners:x})}var Q1=/\r\n?/g,K1=/\u0000|\uFFFD/g;function kg(t){return(typeof t=="string"?t:""+t).replace(Q1,`
`).replace(K1,"")}function Pg(t,n){return n=kg(n),kg(t)===n}function Nu(){}function me(t,n,r,l,c,d){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Un(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Un(t,""+l);break;case"className":rs(t,"class",l);break;case"tabIndex":rs(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(t,r,l);break;case"style":il(t,l,d);break;case"data":if(n!=="object"){rs(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Jn(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(n!=="input"&&me(t,n,"name",c.name,c,null),me(t,n,"formEncType",c.formEncType,c,null),me(t,n,"formMethod",c.formMethod,c,null),me(t,n,"formTarget",c.formTarget,c,null)):(me(t,n,"encType",c.encType,c,null),me(t,n,"method",c.method,c,null),me(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Jn(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Nu);break;case"onScroll":l!=null&&Jt("scroll",t);break;case"onScrollEnd":l!=null&&Jt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=Jn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":Jt("beforetoggle",t),Jt("toggle",t),is(t,"popover",l);break;case"xlinkActuate":Pn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":is(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Io.get(r)||r,is(t,r,l))}}function _f(t,n,r,l,c,d){switch(r){case"style":il(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Un(t,l):(typeof l=="number"||typeof l=="bigint")&&Un(t,""+l);break;case"onScroll":l!=null&&Jt("scroll",t);break;case"onScrollEnd":l!=null&&Jt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Nu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!es.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),n=r.slice(2,c?r.length-7:void 0),d=t[rn]||null,d=d!=null?d[r]:null,typeof d=="function"&&t.removeEventListener(n,d,c),typeof l=="function")){typeof d!="function"&&d!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,l,c);break t}r in t?t[r]=l:l===!0?t.setAttribute(r,""):is(t,r,l)}}}function ln(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jt("error",t),Jt("load",t);var l=!1,c=!1,d;for(d in r)if(r.hasOwnProperty(d)){var x=r[d];if(x!=null)switch(d){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:me(t,n,d,x,r,null)}}c&&me(t,n,"srcSet",r.srcSet,r,null),l&&me(t,n,"src",r.src,r,null);return;case"input":Jt("invalid",t);var E=d=x=c=null,M=null,Q=null;for(l in r)if(r.hasOwnProperty(l)){var st=r[l];if(st!=null)switch(l){case"name":c=st;break;case"type":x=st;break;case"checked":M=st;break;case"defaultChecked":Q=st;break;case"value":d=st;break;case"defaultValue":E=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(a(137,n));break;default:me(t,n,l,st,r,null)}}tl(t,d,E,M,Q,x,c,!1),fr(t);return;case"select":Jt("invalid",t),l=x=d=null;for(c in r)if(r.hasOwnProperty(c)&&(E=r[c],E!=null))switch(c){case"value":d=E;break;case"defaultValue":x=E;break;case"multiple":l=E;default:me(t,n,c,E,r,null)}n=d,r=x,t.multiple=!!l,n!=null?dr(t,!!l,n,!1):r!=null&&dr(t,!!l,r,!0);return;case"textarea":Jt("invalid",t),d=c=l=null;for(x in r)if(r.hasOwnProperty(x)&&(E=r[x],E!=null))switch(x){case"value":l=E;break;case"defaultValue":c=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:me(t,n,x,E,r,null)}jo(t,l,c,d),fr(t);return;case"option":for(M in r)if(r.hasOwnProperty(M)&&(l=r[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:me(t,n,M,l,r,null)}return;case"dialog":Jt("beforetoggle",t),Jt("toggle",t),Jt("cancel",t),Jt("close",t);break;case"iframe":case"object":Jt("load",t);break;case"video":case"audio":for(l=0;l<ql.length;l++)Jt(ql[l],t);break;case"image":Jt("error",t),Jt("load",t);break;case"details":Jt("toggle",t);break;case"embed":case"source":case"link":Jt("error",t),Jt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in r)if(r.hasOwnProperty(Q)&&(l=r[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:me(t,n,Q,l,r,null)}return;default:if(Ws(n)){for(st in r)r.hasOwnProperty(st)&&(l=r[st],l!==void 0&&_f(t,n,st,l,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(l=r[E],l!=null&&me(t,n,E,l,r,null))}function X1(t,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,x=null,E=null,M=null,Q=null,st=null;for(Z in r){var ut=r[Z];if(r.hasOwnProperty(Z)&&ut!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=ut;default:l.hasOwnProperty(Z)||me(t,n,Z,null,l,ut)}}for(var X in l){var Z=l[X];if(ut=r[X],l.hasOwnProperty(X)&&(Z!=null||ut!=null))switch(X){case"type":d=Z;break;case"name":c=Z;break;case"checked":Q=Z;break;case"defaultChecked":st=Z;break;case"value":x=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,n));break;default:Z!==ut&&me(t,n,X,Z,l,ut)}}Ja(t,x,E,M,Q,st,d,c);return;case"select":Z=x=E=X=null;for(d in r)if(M=r[d],r.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":Z=M;default:l.hasOwnProperty(d)||me(t,n,d,null,l,M)}for(c in l)if(d=l[c],M=r[c],l.hasOwnProperty(c)&&(d!=null||M!=null))switch(c){case"value":X=d;break;case"defaultValue":E=d;break;case"multiple":x=d;default:d!==M&&me(t,n,c,d,l,M)}n=E,r=x,l=Z,X!=null?dr(t,!!r,X,!1):!!l!=!!r&&(n!=null?dr(t,!!r,n,!0):dr(t,!!r,r?[]:"",!1));return;case"textarea":Z=X=null;for(E in r)if(c=r[E],r.hasOwnProperty(E)&&c!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:me(t,n,E,null,l,c)}for(x in l)if(c=l[x],d=r[x],l.hasOwnProperty(x)&&(c!=null||d!=null))switch(x){case"value":X=c;break;case"defaultValue":Z=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==d&&me(t,n,x,c,l,d)}No(t,X,Z);return;case"option":for(var Lt in r)if(X=r[Lt],r.hasOwnProperty(Lt)&&X!=null&&!l.hasOwnProperty(Lt))switch(Lt){case"selected":t.selected=!1;break;default:me(t,n,Lt,null,l,X)}for(M in l)if(X=l[M],Z=r[M],l.hasOwnProperty(M)&&X!==Z&&(X!=null||Z!=null))switch(M){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:me(t,n,M,X,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in r)X=r[Ot],r.hasOwnProperty(Ot)&&X!=null&&!l.hasOwnProperty(Ot)&&me(t,n,Ot,null,l,X);for(Q in l)if(X=l[Q],Z=r[Q],l.hasOwnProperty(Q)&&X!==Z&&(X!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:me(t,n,Q,X,l,Z)}return;default:if(Ws(n)){for(var ge in r)X=r[ge],r.hasOwnProperty(ge)&&X!==void 0&&!l.hasOwnProperty(ge)&&_f(t,n,ge,void 0,l,X);for(st in l)X=l[st],Z=r[st],!l.hasOwnProperty(st)||X===Z||X===void 0&&Z===void 0||_f(t,n,st,X,l,Z);return}}for(var B in r)X=r[B],r.hasOwnProperty(B)&&X!=null&&!l.hasOwnProperty(B)&&me(t,n,B,null,l,X);for(ut in l)X=l[ut],Z=r[ut],!l.hasOwnProperty(ut)||X===Z||X==null&&Z==null||me(t,n,ut,X,l,Z)}var xf=null,bf=null;function ju(t){return t.nodeType===9?t:t.ownerDocument}function Ug(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zg(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ef(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Tf=null;function $1(){var t=window.event;return t&&t.type==="popstate"?t===Tf?!1:(Tf=t,!0):(Tf=null,!1)}var Lg=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,W1=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(t){return Bg.resolve(null).then(t).catch(J1)}:Lg;function J1(t){setTimeout(function(){throw t})}function Mr(t){return t==="head"}function qg(t,n){var r=n,l=0,c=0;do{var d=r.nextSibling;if(t.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(0<l&&8>l){r=l;var x=t.ownerDocument;if(r&1&&Fl(x.documentElement),r&2&&Fl(x.body),r&4)for(r=x.head,Fl(r),x=r.firstChild;x;){var E=x.nextSibling,M=x.nodeName;x[or]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&x.rel.toLowerCase()==="stylesheet"||r.removeChild(x),x=E}}if(c===0){t.removeChild(d),Wl(n);return}c--}else r==="$"||r==="$?"||r==="$!"?c++:l=r.charCodeAt(0)-48;else l=0;r=d}while(r);Wl(n)}function Sf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Sf(r),Qs(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function tx(t,n,r,l){for(;t.nodeType===1;){var c=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[or])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function ex(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=si(t.nextSibling),t===null))return null;return t}function Af(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function nx(t,n){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function si(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var wf=null;function Hg(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}function Fg(t,n,r){switch(n=ju(r),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Fl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Qs(t)}var Yn=new Map,Gg=new Set;function Iu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var tr=nt.d;nt.d={f:ix,r:rx,D:sx,C:ax,L:lx,m:ox,X:cx,S:ux,M:hx};function ix(){var t=tr.f(),n=Tu();return t||n}function rx(t){var n=fi(t);n!==null&&n.tag===5&&n.type==="form"?hm(n):tr.r(t)}var Na=typeof document>"u"?null:document;function Yg(t,n,r){var l=Na;if(l&&typeof n=="string"&&n){var c=We(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),Gg.has(c)||(Gg.add(c),t={rel:t,crossOrigin:r,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),ln(n,"link",t),Ve(n),l.head.appendChild(n)))}}function sx(t){tr.D(t),Yg("dns-prefetch",t,null)}function ax(t,n){tr.C(t,n),Yg("preconnect",t,n)}function lx(t,n,r){tr.L(t,n,r);var l=Na;if(l&&t&&n){var c='link[rel="preload"][as="'+We(n)+'"]';n==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+We(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+We(r.imageSizes)+'"]')):c+='[href="'+We(t)+'"]';var d=c;switch(n){case"style":d=ja(t);break;case"script":d=Ia(t)}Yn.has(d)||(t=b({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Yn.set(d,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Gl(d))||n==="script"&&l.querySelector(Yl(d))||(n=l.createElement("link"),ln(n,"link",t),Ve(n),l.head.appendChild(n)))}}function ox(t,n){tr.m(t,n);var r=Na;if(r&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+We(l)+'"][href="'+We(t)+'"]',d=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ia(t)}if(!Yn.has(d)&&(t=b({rel:"modulepreload",href:t},n),Yn.set(d,t),r.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Yl(d)))return}l=r.createElement("link"),ln(l,"link",t),Ve(l),r.head.appendChild(l)}}}function ux(t,n,r){tr.S(t,n,r);var l=Na;if(l&&t){var c=cr(l).hoistableStyles,d=ja(t);n=n||"default";var x=c.get(d);if(!x){var E={loading:0,preload:null};if(x=l.querySelector(Gl(d)))E.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Yn.get(d))&&Cf(t,r);var M=x=l.createElement("link");Ve(M),ln(M,"link",t),M._p=new Promise(function(Q,st){M.onload=Q,M.onerror=st}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Mu(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:E},c.set(d,x)}}}function cx(t,n){tr.X(t,n);var r=Na;if(r&&t){var l=cr(r).hoistableScripts,c=Ia(t),d=l.get(c);d||(d=r.querySelector(Yl(c)),d||(t=b({src:t,async:!0},n),(n=Yn.get(c))&&Rf(t,n),d=r.createElement("script"),Ve(d),ln(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function hx(t,n){tr.M(t,n);var r=Na;if(r&&t){var l=cr(r).hoistableScripts,c=Ia(t),d=l.get(c);d||(d=r.querySelector(Yl(c)),d||(t=b({src:t,async:!0,type:"module"},n),(n=Yn.get(c))&&Rf(t,n),d=r.createElement("script"),Ve(d),ln(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Qg(t,n,r,l){var c=(c=G.current)?Iu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=ja(r.href),r=cr(c).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=ja(r.href);var d=cr(c).hoistableStyles,x=d.get(t);if(x||(c=c.ownerDocument||c,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,x),(d=c.querySelector(Gl(t)))&&!d._p&&(x.instance=d,x.state.loading=5),Yn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Yn.set(t,r),d||fx(c,t,r,x.state))),n&&l===null)throw Error(a(528,""));return x}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ia(r),r=cr(c).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ja(t){return'href="'+We(t)+'"'}function Gl(t){return'link[rel="stylesheet"]['+t+"]"}function Kg(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function fx(t,n,r,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),ln(n,"link",r),Ve(n),t.head.appendChild(n))}function Ia(t){return'[src="'+We(t)+'"]'}function Yl(t){return"script[async]"+t}function Xg(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+We(r.href)+'"]');if(l)return n.instance=l,Ve(l),l;var c=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ve(l),ln(l,"style",c),Mu(l,r.precedence,t),n.instance=l;case"stylesheet":c=ja(r.href);var d=t.querySelector(Gl(c));if(d)return n.state.loading|=4,n.instance=d,Ve(d),d;l=Kg(r),(c=Yn.get(c))&&Cf(l,c),d=(t.ownerDocument||t).createElement("link"),Ve(d);var x=d;return x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),ln(d,"link",l),n.state.loading|=4,Mu(d,r.precedence,t),n.instance=d;case"script":return d=Ia(r.src),(c=t.querySelector(Yl(d)))?(n.instance=c,Ve(c),c):(l=r,(c=Yn.get(d))&&(l=b({},r),Rf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),Ve(c),ln(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Mu(l,r.precedence,t));return n.instance}function Mu(t,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,d=c,x=0;x<l.length;x++){var E=l[x];if(E.dataset.precedence===n)d=E;else if(d!==c)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Cf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Rf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Vu=null;function $g(t,n,r){if(Vu===null){var l=new Map,c=Vu=new Map;c.set(r,l)}else c=Vu,l=c.get(r),l||(l=new Map,c.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),c=0;c<r.length;c++){var d=r[c];if(!(d[or]||d[Me]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var x=d.getAttribute(n)||"";x=t+x;var E=l.get(x);E?E.push(d):l.set(x,[d])}}return l}function Zg(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function dx(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Wg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ql=null;function px(){}function mx(t,n,r){if(Ql===null)throw Error(a(475));var l=Ql;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=ja(r.href),d=t.querySelector(Gl(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Ou.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=d,Ve(d);return}d=t.ownerDocument||t,r=Kg(r),(c=Yn.get(c))&&Cf(r,c),d=d.createElement("link"),Ve(d);var x=d;x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),ln(d,"link",r),n.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Ou.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function gx(){if(Ql===null)throw Error(a(475));var t=Ql;return t.stylesheets&&t.count===0&&Df(t,t.stylesheets),0<t.count?function(n){var r=setTimeout(function(){if(t.stylesheets&&Df(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r)}}:null}function Ou(){if(this.count--,this.count===0){if(this.stylesheets)Df(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ku=null;function Df(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ku=new Map,n.forEach(yx,t),ku=null,Ou.call(t))}function yx(t,n){if(!(n.state.loading&4)){var r=ku.get(t);if(r)var l=r.get(null);else{r=new Map,ku.set(t,r);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var x=c[d];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(r.set(x.dataset.precedence,x),l=x)}l&&r.set(null,l)}c=n.instance,x=c.getAttribute("data-precedence"),d=r.get(x)||l,d===l&&r.set(null,c),r.set(x,c),this.count++,l=Ou.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),d?d.parentNode.insertBefore(c,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Kl={$$typeof:at,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function vx(t,n,r,l,c,d,x,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Jg(t,n,r,l,c,d,x,E,M,Q,st,ut){return t=new vx(t,n,r,x,E,M,Q,ut),n=1,d===!0&&(n|=24),d=jn(3,null,null,n),t.current=d,d.stateNode=t,n=uh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:r,cache:n},dh(d),t}function ty(t){return t?(t=ua,t):ua}function ey(t,n,r,l,c,d){c=ty(c),l.context===null?l.context=c:l.pendingContext=c,l=xr(n),l.payload={element:r},d=d===void 0?null:d,d!==null&&(l.callback=d),r=br(t,l,n),r!==null&&(kn(r,t,n),Sl(r,t,n))}function ny(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Nf(t,n){ny(t,n),(t=t.alternate)&&ny(t,n)}function iy(t){if(t.tag===13){var n=oa(t,67108864);n!==null&&kn(n,t,67108864),Nf(t,67108864)}}var Pu=!0;function _x(t,n,r,l){var c=O.T;O.T=null;var d=nt.p;try{nt.p=2,jf(t,n,r,l)}finally{nt.p=d,O.T=c}}function xx(t,n,r,l){var c=O.T;O.T=null;var d=nt.p;try{nt.p=8,jf(t,n,r,l)}finally{nt.p=d,O.T=c}}function jf(t,n,r,l){if(Pu){var c=If(l);if(c===null)vf(t,n,l,Uu,r),sy(t,l);else if(Ex(c,t,n,r,l))l.stopPropagation();else if(sy(t,l),n&4&&-1<bx.indexOf(t)){for(;c!==null;){var d=fi(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var x=It(d.pendingLanes);if(x!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var M=1<<31-jt(x);E.entanglements[1]|=M,x&=~M}Ei(d),(he&6)===0&&(bu=je()+500,Bl(0))}}break;case 13:E=oa(d,2),E!==null&&kn(E,d,2),Tu(),Nf(d,2)}if(d=If(l),d===null&&vf(t,n,l,Uu,r),d===c)break;c=d}c!==null&&l.stopPropagation()}else vf(t,n,l,null,r)}}function If(t){return t=sl(t),Mf(t)}var Uu=null;function Mf(t){if(Uu=null,t=hi(t),t!==null){var n=h(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=p(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Uu=t,null}function ry(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oi()){case ve:return 2;case Ae:return 8;case Tn:case Zr:return 32;case bt:return 268435456;default:return 32}default:return 32}}var Vf=!1,Vr=null,Or=null,kr=null,Xl=new Map,$l=new Map,Pr=[],bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sy(t,n){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Xl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(n.pointerId)}}function Zl(t,n,r,l,c,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},n!==null&&(n=fi(n),n!==null&&iy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function Ex(t,n,r,l,c){switch(n){case"focusin":return Vr=Zl(Vr,t,n,r,l,c),!0;case"dragenter":return Or=Zl(Or,t,n,r,l,c),!0;case"mouseover":return kr=Zl(kr,t,n,r,l,c),!0;case"pointerover":var d=c.pointerId;return Xl.set(d,Zl(Xl.get(d)||null,t,n,r,l,c)),!0;case"gotpointercapture":return d=c.pointerId,$l.set(d,Zl($l.get(d)||null,t,n,r,l,c)),!0}return!1}function ay(t){var n=hi(t.target);if(n!==null){var r=h(n);if(r!==null){if(n=r.tag,n===13){if(n=p(r),n!==null){t.blockedOn=n,Lc(t.priority,function(){if(r.tag===13){var l=On();l=Za(l);var c=oa(r,l);c!==null&&kn(c,r,l),Nf(r,l)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=If(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);rl=l,r.target.dispatchEvent(l),rl=null}else return n=fi(r),n!==null&&iy(n),t.blockedOn=r,!1;n.shift()}return!0}function ly(t,n,r){zu(t)&&r.delete(n)}function Tx(){Vf=!1,Vr!==null&&zu(Vr)&&(Vr=null),Or!==null&&zu(Or)&&(Or=null),kr!==null&&zu(kr)&&(kr=null),Xl.forEach(ly),$l.forEach(ly)}function Lu(t,n){t.blockedOn===n&&(t.blockedOn=null,Vf||(Vf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Tx)))}var Bu=null;function oy(t){Bu!==t&&(Bu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Bu===t&&(Bu=null);for(var n=0;n<t.length;n+=3){var r=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(Mf(l||r)===null)continue;break}var d=fi(r);d!==null&&(t.splice(n,3),n-=3,Ih(d,{pending:!0,data:c,method:r.method,action:l},l,c))}}))}function Wl(t){function n(M){return Lu(M,t)}Vr!==null&&Lu(Vr,t),Or!==null&&Lu(Or,t),kr!==null&&Lu(kr,t),Xl.forEach(n),$l.forEach(n);for(var r=0;r<Pr.length;r++){var l=Pr[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Pr.length&&(r=Pr[0],r.blockedOn===null);)ay(r),r.blockedOn===null&&Pr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var c=r[l],d=r[l+1],x=c[rn]||null;if(typeof d=="function")x||oy(r);else if(x){var E=null;if(d&&d.hasAttribute("formAction")){if(c=d,x=d[rn]||null)E=x.formAction;else if(Mf(c)!==null)continue}else E=x.action;typeof E=="function"?r[l+1]=E:(r.splice(l,3),l-=3),oy(r)}}}function Of(t){this._internalRoot=t}qu.prototype.render=Of.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,l=On();ey(r,l,t,n,null,null)},qu.prototype.unmount=Of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ey(t.current,2,null,t,null,null),Tu(),n[ki]=null}};function qu(t){this._internalRoot=t}qu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Oi();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Pr.length&&n!==0&&n<Pr[r].priority;r++);Pr.splice(r,0,t),r===0&&ay(t)}};var uy=e.version;if(uy!=="19.1.1")throw Error(a(527,uy,"19.1.1"));nt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=v(n),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Sx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Nt=Hu.inject(Sx),it=Hu}catch{}}return to.createRoot=function(t,n){if(!o(t))throw Error(a(299));var r=!1,l="",c=Am,d=wm,x=Cm,E=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Jg(t,1,!1,null,null,r,l,c,d,x,E,null),t[ki]=n.current,yf(t),new Of(n)},to.hydrateRoot=function(t,n,r){if(!o(t))throw Error(a(299));var l=!1,c="",d=Am,x=wm,E=Cm,M=null,Q=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(M=r.unstable_transitionCallbacks),r.formState!==void 0&&(Q=r.formState)),n=Jg(t,1,!0,n,r??null,l,c,d,x,E,M,Q),n.context=ty(null),r=n.current,l=On(),l=Za(l),c=xr(l),c.callback=null,br(r,c,l),r=l,n.current.lanes=r,Ie(n,r),Ei(n),t[ki]=n.current,yf(t),new qu(n)},to.version="19.1.1",to}var _y;function kx(){if(_y)return Uf.exports;_y=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Uf.exports=Ox(),Uf.exports}var Px=kx();const Ux="modulepreload",zx=function(s){return"/CRM_VER.4/"+s},xy={},Lx=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let y=function(b){return Promise.all(b.map(C=>Promise.resolve(C).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};var p=y;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),v=g?.nonce||g?.getAttribute("nonce");o=y(i.map(b=>{if(b=zx(b),b in xy)return;xy[b]=!0;const C=b.endsWith(".css"),V=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${V}`))return;const L=document.createElement("link");if(L.rel=C?"stylesheet":Ux,C||(L.as="script"),L.crossOrigin="",L.href=b,v&&L.setAttribute("nonce",v),document.head.appendChild(L),C)return new Promise((q,J)=>{L.addEventListener("load",q),L.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${b}`)))})}))}function h(g){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=g,window.dispatchEvent(v),!v.defaultPrevented)throw g}return o.then(g=>{for(const v of g||[])v.status==="rejected"&&h(v.reason);return e().catch(h)})},by=["","","","","",""],Ey=["","","","","","",""],Bx=["","","",""],z0=["","","",""],Kn=["","","","",""],qx=({activeTab:s,activeFilter:e,onFilterChange:i,customers:a,meetings:o,activities:h,properties:p,isMobileOpen:g,onMobileClose:v})=>{const[y,b]=pt.useState(!1),C=J=>{if(s===""){const k=new Date;return k.setHours(0,0,0,0),J===""?a.length:J===""?a.filter(H=>H.isFavorite).length:J===""?a.filter(H=>o.filter(at=>at.customerId===H.id).some(at=>{const ft=new Date(at.date);return ft.setHours(0,0,0,0),ft.getTime()===k.getTime()})).length:J===""?a.filter(H=>o.filter(at=>at.customerId===H.id).some(at=>{const ft=new Date(at.date);return ft.setHours(0,0,0,0),ft>k})).length:J===""?a.filter(H=>{const rt=h.filter(at=>at.customerId===H.id);return rt.length===0?!1:rt.some(at=>!(at.followUps||[]).some(et=>et.author===""))}).length:a.filter(H=>H.status===J).length}else return J===""?p.length:p.filter(k=>k.category===J).length},L=s===""?["","","","","","","",""]:(()=>{const J=new Set(p.map(k=>k.category).filter(Boolean));return["",...Array.from(J).sort()]})(),q=J=>{i(J),v()};return f.jsxs("aside",{className:`filter-sidebar ${y?"collapsed":""} ${g?"mobile-open":""}`,children:[f.jsxs("div",{className:"filter-header",children:[!y&&f.jsx("h4",{children:""}),f.jsx("button",{onClick:()=>b(!y),className:"btn-close desktop-only",children:y?"":""}),f.jsx("button",{onClick:v,className:"btn-close mobile-only",children:""})]}),!y&&f.jsx("ul",{className:"filter-list",children:L.map(J=>f.jsxs("li",{className:`filter-item ${e===J?"active":""}`,onClick:()=>q(J),children:[f.jsx("span",{children:J}),f.jsx("span",{className:"count-badge",children:C(J)})]},J))})]})},Hx=({customers:s,onSelectCustomer:e,onEdit:i,onDelete:a,selectedCustomerId:o,activeFilter:h,activeProgressFilter:p,onProgressFilterChange:g,allCustomers:v,onFavoriteCustomer:y,activities:b,meetings:C})=>{const[V,L]=pt.useState(""),[q,J]=pt.useState({visible:!1,x:0,y:0,selectedCustomer:null}),[k,H]=pt.useState({key:"createdAt",direction:"desc"}),rt=pt.useMemo(()=>[...s.filter(W=>W.name.toLowerCase().includes(V.toLowerCase())||W.phone.includes(V))].sort((W,ot)=>{if(W.status===""&&ot.status!=="")return 1;if(W.status!==""&&ot.status==="")return-1;if(W.status===""&&ot.status!=="")return 1;if(W.status!==""&&ot.status===""||W.isFavorite&&!ot.isFavorite)return-1;if(!W.isFavorite&&ot.isFavorite)return 1;if(k.key==="latestActivityDate"){const Qt=b.filter(oe=>oe.customerId===W.id).sort((oe,Bt)=>new Date(Bt.date)-new Date(oe.date)),te=b.filter(oe=>oe.customerId===ot.id).sort((oe,Bt)=>new Date(Bt.date)-new Date(oe.date)),ze=Qt.length>0?new Date(Qt[0].date):new Date(0),Ge=te.length>0?new Date(te[0].date):new Date(0);return k.direction==="asc"?ze-Ge:Ge-ze}if(k.key==="latestMeetingDate"){const Qt=C.filter(oe=>oe.customerId===W.id).sort((oe,Bt)=>new Date(Bt.date)-new Date(oe.date)),te=C.filter(oe=>oe.customerId===ot.id).sort((oe,Bt)=>new Date(Bt.date)-new Date(oe.date)),ze=Qt.length>0?new Date(Qt[0].date):new Date(0),Ge=te.length>0?new Date(te[0].date):new Date(0);return k.direction==="asc"?ze-Ge:Ge-ze}const G=W[k.key],yt=ot[k.key];if(G==null&&yt==null)return 0;if(G==null)return 1;if(yt==null)return-1;if(k.key==="hopefulDeposit"||k.key==="hopefulMonthlyRent"){const Qt=Number(G)||0,te=Number(yt)||0;return k.direction==="asc"?Qt-te:te-Qt}const gt=String(G).toLowerCase(),Ct=String(yt).toLowerCase();return gt<Ct?k.direction==="asc"?-1:1:gt>Ct?k.direction==="asc"?1:-1:0}),[s,V,k,b,C]),at=(z,U)=>{z.preventDefault(),J({visible:!0,x:z.pageX,y:z.pageY,selectedCustomer:U})},ft=()=>{J({...q,visible:!1})},et=()=>{q.selectedCustomer&&y(q.selectedCustomer),ft()},K=z=>v.filter(U=>(h===""||U.status===h)&&U.progress===z).length,N=h===""||h==="",w=z=>{H(U=>({key:z,direction:U.key===z&&U.direction==="asc"?"desc":"asc"}))},T=z=>k.key!==z?" ":k.direction==="asc"?" ":" ",j=(z,U)=>{const W=new Date,ot=new Date(z);return W.getFullYear()===ot.getFullYear()&&W.getMonth()===ot.getMonth()&&W.getDate()===ot.getDate()?"rgba(156, 39, 176, 0.12)":U%2===0?"rgba(67, 160, 71, 0.12)":"rgba(229, 57, 53, 0.12)"},D=z=>{if(!z)return"";const U=new Date(z),W=U.getMonth()+1,ot=U.getDate();return`${W}${ot}`},R=z=>{const U=b.filter(gt=>gt.customerId===z).sort((gt,Ct)=>new Date(Ct.date)-new Date(gt.date));if(U.length===0)return"";const W=U[0],ot=new Date(W.date),G=ot.getMonth()+1,yt=ot.getDate();return`${G}${yt}`},S=z=>{const U=b.filter(G=>G.customerId===z).sort((G,yt)=>new Date(yt.date)-new Date(G.date));if(U.length===0)return"-";const ot=U[0].content||"-";return ot.length>30?ot.substring(0,30)+"...":ot},mt=z=>{const U=C.filter(Qt=>Qt.customerId===z).sort((Qt,te)=>new Date(te.date)-new Date(Qt.date));if(U.length===0)return"-";const W=U[0],ot=new Date(W.date),G=ot.getMonth()+1,yt=ot.getDate(),gt=new Date;return gt.getFullYear()===ot.getFullYear()&&gt.getMonth()===ot.getMonth()&&gt.getDate()===ot.getDate()?{text:"**",isToday:!0}:{text:`${G}${yt}`,isToday:!1}},xt=z=>{const U=C.filter(yt=>yt.customerId===z);if(U.length===0)return"-";const W=new Date;W.setHours(0,0,0,0);const ot=U.filter(yt=>{const gt=new Date(yt.date);return gt.setHours(0,0,0,0),gt>=W}),G=U.filter(yt=>{const gt=new Date(yt.date);return gt.setHours(0,0,0,0),gt<W});return`${ot.length}/${G.length}`},O=z=>{const U=b.filter(gt=>gt.customerId===z).sort((gt,Ct)=>new Date(Ct.date)-new Date(gt.date));if(U.length===0)return"#e53935";const W=U[0],ot=new Date,G=new Date(W.date),yt=Math.floor((ot-G)/(1e3*60*60*24));return ot.getFullYear()===G.getFullYear()&&ot.getMonth()===G.getMonth()&&ot.getDate()===G.getDate()?"#ff0000":yt>=1&&yt<=3?"#0000ff":yt>=4&&yt<=7?"#ff9800":yt>=8?"#999999":"inherit"},nt=z=>{const U=D(z);return rt.filter(W=>D(W.createdAt)===U).length},ht=(z,U)=>{if(U>0){const G=rt[U-1];if(D(z.createdAt)===D(G.createdAt))return 0}const W=D(z.createdAt);let ot=1;for(let G=U+1;G<rt.length&&D(rt[G].createdAt)===W;G++)ot++;return ot},vt=(z,U)=>{const W=new Date;if(W.getFullYear()===new Date(z.createdAt).getFullYear()&&W.getMonth()===new Date(z.createdAt).getMonth()&&W.getDate()===new Date(z.createdAt).getDate())return-1;let G=0,yt=null;for(let gt=0;gt<=U;gt++)if(!(W.getFullYear()===new Date(rt[gt].createdAt).getFullYear()&&W.getMonth()===new Date(rt[gt].createdAt).getMonth()&&W.getDate()===new Date(rt[gt].createdAt).getDate())){const Qt=D(rt[gt].createdAt);yt===null?(yt=Qt,G=0):yt!==Qt&&(yt=Qt,G++)}return G},I=z=>z%2===0?"#fafafa":"#f0f4ff",$=(z,U)=>{if(U===0)return{};const W=D(z.createdAt);return D(rt[U-1].createdAt)!==W?{borderTop:"12px solid white"}:{}};return f.jsxs("div",{className:"table-container",onClick:ft,children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("input",{type:"text",placeholder:",  ...",value:V,onChange:z=>L(z.target.value),style:{width:"100%",padding:"8px"}})}),f.jsxs("div",{style:{display:"flex",gap:"30px",marginBottom:"15px",fontSize:"13px",alignItems:"center",flexWrap:"wrap"},children:[f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[f.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:":"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(156, 39, 176, 0.12)",border:"1px solid rgba(156, 39, 176, 0.3)",borderRadius:"3px"}}),f.jsx("span",{children:""})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(229, 57, 53, 0.12)",border:"1px solid rgba(229, 57, 53, 0.3)",borderRadius:"3px"}}),f.jsx("span",{children:" ()"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"rgba(67, 160, 71, 0.12)",border:"1px solid rgba(67, 160, 71, 0.3)",borderRadius:"3px"}}),f.jsx("span",{children:" ()"})]})]}),f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[f.jsx("span",{style:{fontWeight:"bold",color:"#555"},children:":"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#ff0000",borderRadius:"3px"}}),f.jsx("span",{children:""})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#0000ff",borderRadius:"3px"}}),f.jsx("span",{children:"1~3"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#ff9800",borderRadius:"3px"}}),f.jsx("span",{children:"4~7"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#999999",borderRadius:"3px"}}),f.jsx("span",{children:"8 "})]})]})]}),N&&f.jsxs("div",{className:"progress-tabs",style:{marginBottom:"15px"},children:[f.jsxs("button",{className:`progress-tab ${p?"":"active"}`,onClick:()=>g(null),children:[" (",v.filter(z=>h===""||z.status===h).length,")"]}),z0.map(z=>f.jsxs("button",{className:`progress-tab ${p===z?"active":""} progress-${z}`,onClick:()=>g(z),children:[z," (",K(z),")"]},z))]}),f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsxs("th",{onClick:()=>w("createdAt"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("createdAt")]}),f.jsxs("th",{onClick:()=>w("name"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("name")]}),f.jsx("th",{children:""}),f.jsxs("th",{onClick:()=>w("latestActivityDate"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("latestActivityDate")]}),f.jsx("th",{children:""}),f.jsxs("th",{onClick:()=>w("latestMeetingDate"),style:{cursor:"pointer",userSelect:"none"},title:" ",children:["",T("latestMeetingDate")]}),f.jsx("th",{children:""})]})}),f.jsx("tbody",{children:rt.map((z,U)=>{const W=ht(z,U),ot=vt(z,U),G=$(z,U);return f.jsxs("tr",{className:o===z.id?"selected":"",onClick:()=>e(z),onContextMenu:yt=>at(yt,z),style:{backgroundColor:z.status===""?"#f0f0f0":z.status===""?"#fff3e0":z.isFavorite?"rgba(156, 39, 176, 0.15)":j(z.createdAt,ot),borderLeft:z.isFavorite?"3px solid #9C27B0":"none",boxShadow:z.isFavorite?"0 2px 4px rgba(156, 39, 176, 0.3)":"none",...G},children:[W>0&&f.jsxs("td",{rowSpan:W,style:{verticalAlign:"middle",textAlign:"center",backgroundColor:I(ot),fontWeight:"500"},children:[D(z.createdAt),"(",nt(z.createdAt),")"]}),f.jsxs("td",{className:"customer-name",title:z.name,children:[z.isFavorite&&f.jsx("span",{style:{marginRight:"6px",color:"#9C27B0"},children:""}),z.name]}),f.jsx("td",{children:f.jsx("a",{href:`sms:${z.phone}`,children:z.phone})}),f.jsx("td",{style:{color:O(z.id),fontWeight:O(z.id)!=="inherit"?"bold":"normal"},children:R(z.id)}),f.jsx("td",{title:S(z.id)!=="-"?S(z.id):"",children:S(z.id)}),f.jsx("td",{style:{color:mt(z.id)!=="-"&&mt(z.id).isToday?"#ff0000":"inherit",fontWeight:mt(z.id)!=="-"&&mt(z.id).isToday?"bold":"normal"},children:mt(z.id)==="-"?"-":mt(z.id).text}),f.jsx("td",{children:xt(z.id)})]},z.id)})})]}),q.visible&&f.jsx("div",{style:{top:q.y,left:q.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:f.jsx("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:et,children:q.selectedCustomer?.isFavorite?"  ":"  "})})})]})},Fx=({properties:s,onSelectProperty:e,onEdit:i,onDelete:a,selectedPropertyId:o})=>{const[h,p]=pt.useState(""),[g,v]=pt.useState({visible:!1,x:0,y:0,selectedProperty:null}),[y,b]=pt.useState({key:"createdAt",direction:"desc"}),C=pt.useMemo(()=>[...s.filter(N=>N.buildingName.toLowerCase().includes(h.toLowerCase())||N.ownerName.toLowerCase().includes(h.toLowerCase())||N.ownerPhone.includes(h))].sort((N,w)=>{const T=N[y.key],j=w[y.key];if(T==null&&j==null)return 0;if(T==null)return 1;if(j==null)return-1;if(y.key==="price"){const S=Number(T)||0,mt=Number(j)||0;return y.direction==="asc"?S-mt:mt-S}if(y.key==="createdAt"||y.key==="moveInDate"){const S=new Date(T),mt=new Date(j);return y.direction==="asc"?S-mt:mt-S}const D=String(T).toLowerCase(),R=String(j).toLowerCase();return D<R?y.direction==="asc"?-1:1:D>R?y.direction==="asc"?1:-1:0}),[s,h,y]),V=(et,K)=>{et.preventDefault(),v({visible:!0,x:et.pageX,y:et.pageY,selectedProperty:K})},L=()=>{v({...g,visible:!1})},q=()=>{g.selectedProperty&&i(g.selectedProperty),L()},J=()=>{g.selectedProperty&&a(g.selectedProperty),L()},k=et=>{b(K=>({key:et,direction:K.key===et&&K.direction==="asc"?"desc":"asc"}))},H=et=>`${et.buildingName}${et.roomNumber?` ${et.roomNumber}`:""}`,rt=et=>et?`${Number(et).toLocaleString()}`:"-",at=(et,K)=>{if(K)return"#e3f2fd";if(!et)return"transparent";const N=new Date(et),w=new Date,T=N.getFullYear(),j=N.getMonth(),D=w.getFullYear(),R=w.getMonth(),S=(D-T)*12+(R-j);return S===0?"#ffebee":S===1?"#e3f2fd":S>=2&&S<=4?"#fff9c4":"transparent"},ft=({column:et,label:K})=>f.jsxs("th",{onClick:()=>k(et),style:{cursor:"pointer",userSelect:"none"},children:[K,y.key===et&&f.jsx("span",{style:{marginLeft:"8px"},children:y.direction==="asc"?"":""})]});return f.jsxs("div",{className:"property-table-wrapper",style:{padding:"15px",height:"100%",display:"flex",flexDirection:"column"},children:[f.jsxs("div",{style:{marginBottom:"15px",display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",placeholder:", ,  ...",value:h,onChange:et=>p(et.target.value),style:{padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",flex:1,fontSize:"14px"}}),h&&f.jsx("button",{onClick:()=>p(""),style:{padding:"8px 12px",backgroundColor:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer"},children:""})]}),f.jsx("div",{style:{flex:1,overflowY:"auto"},children:C.length>0?f.jsxs("table",{className:"customer-table",onClick:L,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx(ft,{column:"createdAt",label:""}),f.jsx(ft,{column:"propertyType",label:""}),f.jsx(ft,{column:"category",label:""}),f.jsx("th",{style:{width:"200px"},children:""}),f.jsx(ft,{column:"price",label:""}),f.jsx(ft,{column:"moveInDate",label:""}),f.jsx(ft,{column:"ownerName",label:""}),f.jsx(ft,{column:"ownerPhone",label:""}),f.jsx(ft,{column:"tenantPhone",label:""})]})}),f.jsx("tbody",{children:C.map(et=>f.jsxs("tr",{onClick:()=>e(et),onContextMenu:K=>V(K,et),style:{cursor:"pointer",backgroundColor:at(et.createdAt,o===et.id),fontWeight:o===et.id?"bold":"normal"},children:[f.jsx("td",{style:{fontSize:"13px"},children:et.createdAt?et.createdAt.slice(0,10):"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.propertyType||"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.category||"-"}),f.jsx("td",{style:{fontSize:"13px",fontWeight:"bold"},children:H(et)}),f.jsx("td",{style:{fontSize:"13px",textAlign:"right"},children:rt(et.price)}),f.jsx("td",{style:{fontSize:"13px"},children:et.moveInDate?et.moveInDate.slice(0,10):"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.ownerName||"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.ownerPhone||"-"}),f.jsx("td",{style:{fontSize:"13px"},children:et.tenantPhone||"-"})]},et.id))})]}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:h?"  ":"  "})}),g.visible&&f.jsx("div",{style:{position:"fixed",top:g.y,left:g.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"5px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:100,padding:0},children:f.jsxs("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:[f.jsx("li",{onClick:q,style:{padding:"8px 16px",cursor:"pointer",borderBottom:"1px solid #f0f0f0"},onMouseEnter:et=>et.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:et=>et.currentTarget.style.backgroundColor="transparent",children:""}),f.jsx("li",{onClick:J,style:{padding:"8px 16px",cursor:"pointer",color:"#e74c3c"},onMouseEnter:et=>et.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:et=>et.currentTarget.style.backgroundColor="transparent",children:""}),f.jsx("li",{onClick:L,style:{padding:"8px 16px",cursor:"pointer"},onMouseEnter:et=>et.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:et=>et.currentTarget.style.backgroundColor="transparent",children:""})]})})]})},Gx=s=>!s.name||s.name.trim()===""?(alert("   ."),!1):s.phone&&!Yx(s.phone)?(alert(" 010-xxxx-xxxx  ."),!1):!0,Yx=s=>s?/^010-\d{4}-\d{4}$/.test(s):!0,Si=()=>"_"+Math.random().toString(36).substr(2,9),L0=s=>{if(!s)return"";try{return new Date(s).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date-time:",s,e),""}},Qx=({isOpen:s,onClose:e,onSave:i,editData:a})=>{const o=()=>({id:a?.id||null,name:a?.name||"",phone:a?.phone||"",source:a?.source||by[0],propertyType:a?.propertyType||Ey[0],preferredArea:a?.preferredArea||"",hopefulDeposit:a?.hopefulDeposit||"",hopefulMonthlyRent:a?.hopefulMonthlyRent||"",moveInDate:a?.moveInDate||"",memo:a?.memo||"",status:a?.status||"",progress:a?.progress||"",createdAt:a?.createdAt||new Date().toISOString()}),[h,p]=pt.useState(o());if(pt.useEffect(()=>{p(o())},[a,s]),!s)return null;const g=b=>{const{name:C,value:V}=b.target;p(L=>({...L,[C]:V}))},v=b=>{let C=b.target.value.replace(/[^0-9]/g,"");C.length>3&&C.length<=7?C=`${C.slice(0,3)}-${C.slice(3)}`:C.length>7&&(C=`${C.slice(0,3)}-${C.slice(3,7)}-${C.slice(7,11)}`),p(V=>({...V,phone:C}))},y=()=>{const b={...h,id:h.id||Si(),hopefulDeposit:parseInt(h.hopefulDeposit,10)||0,hopefulMonthlyRent:parseInt(h.hopefulMonthlyRent,10)||0};Gx(b)&&(i(b),e())};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",paddingBottom:"10px"},children:[f.jsx("h3",{children:a?" ":" "}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"source",value:h.source,onChange:g,style:{fontSize:"14px"},children:by.map(b=>f.jsx("option",{value:b,children:b},b))}),f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"propertyType",value:h.propertyType,onChange:g,style:{fontSize:"14px"},children:Ey.map(b=>f.jsx("option",{value:b,children:b},b))}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" *"}),f.jsx("input",{type:"text",name:"name",value:h.name,onChange:g,placeholder:"  ",required:!0})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:v,placeholder:"010-xxxx-xxxx"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"date",name:"moveInDate",value:h.moveInDate,onChange:g})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" ()"}),f.jsx("input",{type:"number",name:"hopefulDeposit",value:h.hopefulDeposit,onChange:g})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" ()"}),f.jsx("input",{type:"number",name:"hopefulMonthlyRent",value:h.hopefulMonthlyRent,onChange:g})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"   "}),f.jsx("textarea",{name:"preferredArea",value:h.preferredArea,onChange:g,rows:"2"})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:e,className:"btn-secondary",children:""}),f.jsx("button",{onClick:y,className:"btn-primary",children:""})]})]})})},Kx=({isOpen:s,onClose:e,onSave:i,editData:a})=>{const o=["",""],h=["","","","",""],p=()=>({id:a?.id||null,createdAt:a?.createdAt||new Date().toISOString(),propertyType:a?.propertyType||o[0],category:a?.category||h[0],buildingName:a?.buildingName||"",roomNumber:a?.roomNumber||"",price:a?.price||"",moveInDate:a?.moveInDate||"",ownerName:a?.ownerName||"",ownerPhone:a?.ownerPhone||"",leaseInfo:a?.leaseInfo||"",tenantPhone:a?.tenantPhone||"",memo:a?.memo||""}),[g,v]=pt.useState(p()),[y,b]=pt.useState("");if(pt.useEffect(()=>{v(p())},[a,s]),!s)return null;const C=k=>{const{name:H,value:rt}=k.target;v(at=>({...at,[H]:rt}))},V=(k,H)=>{let rt=k.target.value.replace(/[^0-9]/g,"");rt.length>3&&rt.length<=7?rt=`${rt.slice(0,3)}-${rt.slice(3)}`:rt.length>7&&(rt=`${rt.slice(0,3)}-${rt.slice(3,7)}-${rt.slice(7,11)}`),v(at=>({...at,[H]:rt}))},L=()=>{if(!g.buildingName.trim()){alert(" .");return}const k={...g,id:g.id||Si(),price:parseInt(g.price,10)||0,createdAt:g.createdAt||new Date().toISOString()};i(k),e()},q=k=>{const{name:H,value:rt}=k.target;v(at=>({...at,[H]:rt}))},J=()=>{try{const k=y.split(`
`).map(D=>D.trim()).filter(D=>D),H=["","","()","","","","","",""],rt=D=>{const R=k.findIndex(S=>S===D);if(R!==-1&&R+1<k.length){const S=k[R+1];return H.includes(S)?"":S}return""},at={},ft=rt(""),et=ft.match(/^(.+?)\s+(\d+)/);et?(at.buildingName=et[1].trim(),at.roomNumber=et[2].trim()):(at.buildingName=ft,at.roomNumber="");const K=rt("");at.price=K.replace(/[^0-9]/g,"")||"";const w=rt("()").match(/(\d{2})\/(\d{2})\/(\d{4})/);w&&(at.moveInDate=`${w[3]}-${w[1]}-${w[2]}`);const T=rt("");at.ownerName=T,at.ownerPhone=rt(""),at.tenantPhone=rt("");const j=k.findIndex(D=>D==="");j!==-1&&(at.memo=k.slice(j+1).join(`
`).trim()),v(D=>({...D,...at,createdAt:new Date().toISOString()})),alert(" !"),b("")}catch(k){alert("   : "+k.message)}};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",paddingBottom:"10px"},children:[f.jsx("h3",{children:a?" ":" "}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"propertyType",value:g.propertyType,onChange:C,style:{fontSize:"14px"},children:o.map(k=>f.jsx("option",{value:k,children:k},k))}),f.jsx("label",{style:{fontSize:"14px",marginBottom:0},children:""}),f.jsx("select",{name:"category",value:g.category,onChange:C,style:{fontSize:"14px"},children:h.map(k=>f.jsx("option",{value:k,children:k},k))}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"   (  )"}),f.jsx("textarea",{placeholder:"   ...",value:y,onChange:k=>b(k.target.value),rows:"8",style:{fontSize:"12px",fontFamily:"monospace",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",resize:"vertical"}}),f.jsx("button",{type:"button",onClick:J,className:"btn-primary",style:{marginTop:"8px",width:"100%",backgroundColor:"#FF6B9D",padding:"10px"},children:"   "})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" *"}),f.jsx("input",{type:"text",name:"buildingName",value:g.buildingName,onChange:C,placeholder:" ",required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",name:"roomNumber",value:g.roomNumber,onChange:C,placeholder:" "})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" ()"}),f.jsx("input",{type:"number",name:"price",value:g.price,onChange:C,placeholder:" "})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"date",name:"moveInDate",value:g.moveInDate,onChange:q})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",name:"ownerName",value:g.ownerName,onChange:C,placeholder:" "})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"tel",name:"ownerPhone",value:g.ownerPhone,onChange:k=>V(k,"ownerPhone"),placeholder:"010-xxxx-xxxx"})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",name:"leaseInfo",value:g.leaseInfo,onChange:C,placeholder:"  "})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"tel",name:"tenantPhone",value:g.tenantPhone,onChange:k=>V(k,"tenantPhone"),placeholder:"010-xxxx-xxxx"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("textarea",{name:"memo",value:g.memo,onChange:C,rows:"3",placeholder:" "})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:e,className:"btn-secondary",children:""}),f.jsx("button",{onClick:L,className:"btn-primary",children:""})]})]})})},Xx=({customer:s,onUpdateCustomer:e,activities:i=[],meetings:a=[],onTabChange:o})=>{if(!s)return null;const h=i.filter(q=>q.customerId===s.id).sort((q,J)=>new Date(J.date)-new Date(q.date)),p=a.filter(q=>q.customerId===s.id).sort((q,J)=>new Date(J.date)-new Date(q.date)),g=h.length>0?h[0]:null,v=p.slice(0,3),y=()=>!g||!g.followUps?[]:[...g.followUps].sort((q,J)=>new Date(J.date)-new Date(q.date)),b=p.find(q=>new Date(q.date)>new Date),C=q=>{const k=new Date().toISOString().slice(0,10);return q.slice(0,10)===k},V=()=>{if(!s.createdAt)return null;const q=new Date(s.createdAt),k=new Date-q;return Math.floor(k/(1e3*60*60*24))},L=()=>{if(p.length===0)return null;const q=p[0],J=new Date(q.date),k=new Date,H=new Date(J.getFullYear(),J.getMonth(),J.getDate()),rt=new Date(k.getFullYear(),k.getMonth(),k.getDate()),at=H-rt,ft=Math.floor(at/(1e3*60*60*24));return ft>0?{type:"upcoming",days:ft}:ft===0?{type:"today",days:0}:{type:"past",days:Math.abs(ft)}};return f.jsx("div",{className:"basic-info-container",children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px",margin:"15px"},children:[f.jsxs("div",{onClick:()=>o&&o(" "),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:q=>{q.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",q.currentTarget.style.transform="translateY(0)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[f.jsx("span",{style:{fontSize:"20px"},children:""}),f.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:" "}),V()!==null&&f.jsxs("span",{style:{fontSize:"12px",color:"#fff",backgroundColor:"#9c27b0",padding:"2px 8px",borderRadius:"12px",fontWeight:"bold",marginLeft:"auto"},children:["+",V(),""]})]}),f.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:[" ",f.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:h.length})," ",h.length>0&&f.jsxs("span",{style:{color:"#888",marginLeft:"8px"},children:["(: ",h[0].date,")"]})]}),g?f.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.6",flex:1,overflowY:"auto"},children:[f.jsxs("div",{style:{padding:"10px",backgroundColor:C(g.date)?"rgba(211, 47, 47, 0.05)":"#f9f9f9",borderRadius:"4px",marginBottom:"10px",borderLeft:C(g.date)?"3px solid #d32f2f":"3px solid #2196F3"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[f.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:C(g.date)?"#d32f2f":"#2196F3",backgroundColor:C(g.date)?"rgba(211, 47, 47, 0.1)":"#e3f2fd",padding:"2px 8px",borderRadius:"3px"},children:""}),f.jsx("span",{style:{fontSize:"11px",color:C(g.date)?"#d32f2f":"#999"},children:g.date})]}),f.jsx("p",{style:{margin:"0",fontSize:"12px",color:C(g.date)?"#d32f2f":"#333",fontWeight:C(g.date)?"bold":"normal",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:g.content})]}),y().length>0&&f.jsxs("div",{style:{borderTop:"1px solid #e0e0e0",paddingTop:"10px"},children:[f.jsxs("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#7f8c8d",marginBottom:"8px"},children:["  (",y().length,")"]}),f.jsx("div",{style:{maxHeight:"150px",overflowY:"auto"},children:y().map((q,J)=>{let k,H,rt;return q.author===""?(k="#2196F3",H="#e3f2fd",rt="#2196F3"):q.author===""?(k="#9c27b0",H="#f3e5f5",rt="#9c27b0"):(k="#ff9800",H="#fff3e0",rt="#ff9800"),f.jsxs("div",{style:{padding:"8px",backgroundColor:"#f8f9fa",borderLeft:`3px solid ${rt}`,marginBottom:"6px",borderRadius:"3px",fontSize:"11px"},children:[f.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"4px",alignItems:"center"},children:[f.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:k,backgroundColor:H,padding:"1px 6px",borderRadius:"2px"},children:q.author||""}),f.jsx("span",{style:{fontSize:"10px",color:"#999"},children:q.date?q.date.slice(5,10):""})]}),f.jsx("p",{style:{margin:0,fontSize:"11px",color:"#333",whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:"60px",overflow:"hidden"},children:q.content})]},J)})})]})]}):f.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:" "})]}),f.jsxs("div",{onClick:()=>o&&o(" "),style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",minHeight:"250px",display:"flex",flexDirection:"column"},onMouseEnter:q=>{q.currentTarget.style.boxShadow="0 4px 12px rgba(33, 150, 243, 0.15)",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)",q.currentTarget.style.transform="translateY(0)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[f.jsx("span",{style:{fontSize:"20px"},children:""}),f.jsx("h5",{style:{margin:0,color:"#2196F3",fontWeight:"bold"},children:" "}),L()&&f.jsxs("span",{style:{fontSize:"12px",color:"#fff",backgroundColor:"#9c27b0",padding:"2px 8px",borderRadius:"12px",fontWeight:"bold",marginLeft:"auto"},children:[L().type==="upcoming"&&`${L().days} `,L().type==="today"&&"",L().type==="past"&&`+${L().days}`]})]}),f.jsxs("div",{style:{fontSize:"13px",color:"#666",marginBottom:"10px"},children:[" ",f.jsx("span",{style:{fontWeight:"bold",color:"#2196F3"},children:p.length})," ",b&&f.jsxs("span",{style:{color:"#16a085",marginLeft:"8px",fontWeight:"bold"},children:["(: ",b.date.slice(0,10),")"]})]}),v.length>0?f.jsx("div",{style:{fontSize:"12px",lineHeight:"1.6"},children:v.map((q,J)=>{const k=C(q.date);return f.jsxs("div",{style:{padding:"6px 0",borderTop:J>0?"1px solid #f0f0f0":"none",color:k?"#d32f2f":"#555",fontWeight:k?"bold":"normal",backgroundColor:k?"rgba(211, 47, 47, 0.05)":"transparent",paddingLeft:k?"8px":"0px",borderRadius:k?"4px":"0px"},children:[f.jsx("span",{style:{color:k?"#d32f2f":"#999",marginRight:"4px"},children:q.date.slice(0,10)}),f.jsxs("span",{style:{color:k?"#d32f2f":"#2196F3",fontWeight:"bold"},children:[q.properties?.length||0," "]})]},J)})}):f.jsx("div",{style:{fontSize:"12px",color:"#999",textAlign:"center",padding:"8px"},children:" "})]})]})})},$x=({customer:s,onUpdateCustomer:e})=>{const[i,a]=pt.useState(!1),[o,h]=pt.useState(()=>{const y=s?.memo||"",b=s?.preferredArea||"";return y&&!b?y:y&&b?`${b}

${y}`:b});if(!s)return null;pt.useEffect(()=>{const y=s.memo||"",b=s.preferredArea||"";h(y&&!b?y:y&&b?`${b}

${y}`:b),a(!1)},[s.id]);const p=()=>{e({...s,preferredArea:o,memo:""}),a(!1)},g=()=>{const y=s.memo||"",b=s.preferredArea||"";h(y&&!b?y:y&&b?`${b}

${y}`:b),a(!1)},v=y=>{y.key==="Enter"&&y.ctrlKey?p():y.key==="Escape"&&g()};return f.jsxs("div",{className:"info-section",style:{padding:"15px",backgroundColor:"#ffffff",border:"2px solid #ff69b4",borderRadius:"8px",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",marginBottom:"12px",flexWrap:"wrap"},children:[f.jsx("h4",{style:{margin:0,color:"#ff1493",borderBottom:"2px solid #ff69b4",paddingBottom:"2px"},children:" "}),f.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:"#000000",borderBottom:"2px solid #000000",paddingBottom:"2px"},children:s.name})]}),f.jsxs("div",{className:"info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"15px"},children:[f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold",color:"#2196F3"},children:f.jsx("a",{href:`sms:${s.phone}`,style:{color:"#2196F3",textDecoration:"none",cursor:"pointer"},children:s.phone})})]}),f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold"},children:s.moveInDate})]}),f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold"},children:s.hopefulDeposit?`${s.hopefulDeposit}`:"-"})]}),f.jsxs("div",{style:{padding:"8px",backgroundColor:"white",borderRadius:"4px"},children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:""}),f.jsx("p",{style:{margin:0,fontWeight:"bold"},children:s.hopefulMonthlyRent?`${s.hopefulMonthlyRent}`:"-"})]})]}),f.jsxs("div",{style:{borderTop:"1px solid #f0f0f0",paddingTop:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[f.jsx("h5",{style:{margin:0,color:"#ff1493",fontSize:"13px",fontWeight:"600"},children:"   "}),i&&f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:p,style:{padding:"4px 10px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px",fontWeight:"bold",whiteSpace:"nowrap"},children:""}),f.jsx("button",{onClick:g,style:{padding:"4px 10px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px",fontWeight:"bold",whiteSpace:"nowrap"},children:""})]})]}),i?f.jsx("textarea",{value:o,onChange:y=>h(y.target.value),onKeyDown:v,placeholder:", ,    ... (Ctrl+Enter , Esc )",style:{width:"100%",minHeight:"60px",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontFamily:"inherit",fontSize:"13px",resize:"vertical"},autoFocus:!0}):f.jsx("div",{onClick:()=>a(!0),style:{cursor:"pointer",padding:"8px",borderRadius:"4px",backgroundColor:"#fafafa",minHeight:"30px",display:"flex",alignItems:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",transition:"background-color 0.2s",fontSize:"13px",color:o?"#333":"#999"},onMouseEnter:y=>y.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:y=>y.currentTarget.style.backgroundColor="#fafafa",children:o||"( )"})]})]})},Zx=({customerId:s,activities:e,onSaveActivity:i,onDeleteActivity:a})=>{const[o,h]=pt.useState(!1),[p,g]=pt.useState(null),[v,y]=pt.useState(null),[b,C]=pt.useState({visible:!1,x:0,y:0,selectedActivity:null}),V=e.filter(T=>T.customerId===s).sort((T,j)=>new Date(j.date)-new Date(T.date)),L=T=>{i(T),h(!1),g(null)},q=(T,j)=>{T.preventDefault(),C({visible:!0,x:T.pageX,y:T.pageY,selectedActivity:j})},J=()=>{C({...b,visible:!1})},k=()=>{b.selectedActivity&&g(b.selectedActivity),J()},H=()=>{b.selectedActivity&&a(b.selectedActivity.id),J()},rt=T=>{if(!T)return"";if(T.includes(" ")){const j=T.split(" "),D=j[0].slice(5),R=j[1];return`${D} ${R}`}return T.length===10?T.slice(5,10):T},at=T=>T.followUps&&T.followUps.length>0?[...T.followUps].sort((D,R)=>new Date(R.date)-new Date(D.date))[0].content:"",ft=T=>{const D=new Date().toISOString().slice(0,10);return T.slice(0,10)===D},et=(T,j=50)=>T?T.length>j?T.slice(0,j)+"...":T:"-",K=({activity:T,onClose:j})=>{const[D,R]=pt.useState(T.followUps||[]),[S,mt]=pt.useState(null),[xt,O]=pt.useState(""),[nt,ht]=pt.useState(""),[vt,I]=pt.useState(null),$=()=>{if(!xt.trim())return;const G={id:Si(),date:new Date().toISOString(),content:xt,author:nt,createdAt:new Date().toISOString()},yt=[...D,G],gt={...T,followUps:yt};L(gt),R(yt),O(""),ht("")},z=G=>{G.key==="Enter"&&G.ctrlKey&&$()},U=G=>{if(confirm("   ?")){const yt=D.filter(Ct=>Ct.id!==G),gt={...T,followUps:yt};L(gt),R(yt)}},W=(G,yt)=>{const gt=D.map(Qt=>Qt.id===G?{...Qt,content:yt}:Qt),Ct={...T,followUps:gt};L(Ct),R(gt),mt(null)},ot=[...D].sort((G,yt)=>new Date(yt.date)-new Date(G.date));return f.jsx("div",{className:"modal-overlay",onClick:j,children:f.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),style:{maxWidth:"700px"},children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("h3",{style:{margin:0},children:" "}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[f.jsx("span",{style:{fontSize:"16px",color:"#2c3e50",fontWeight:"500"},children:T.date}),f.jsx("button",{className:"btn-close",onClick:j,children:""})]})]}),f.jsxs("div",{style:{padding:"20px 0"},children:[f.jsx("div",{style:{marginBottom:"25px"},children:f.jsx("p",{style:{margin:0,fontSize:"16px",whiteSpace:"pre-line",lineHeight:"1.6",fontWeight:"bold"},children:T.content})}),f.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px",marginBottom:"25px"},children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["   (",D.length,")"]})}),f.jsxs("div",{style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"5px",padding:"10px",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx("input",{type:"radio",name:"author",value:"",checked:nt==="",onChange:G=>ht(G.target.value),style:{cursor:"pointer"}}),f.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:nt===""?"#2196F3":"#999",padding:"4px 10px",backgroundColor:nt===""?"#e3f2fd":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:""})]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx("input",{type:"radio",name:"author",value:"",checked:nt==="",onChange:G=>ht(G.target.value),style:{cursor:"pointer"}}),f.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:nt===""?"#9c27b0":"#999",padding:"4px 10px",backgroundColor:nt===""?"#f3e5f5":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:""})]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[f.jsx("input",{type:"radio",name:"author",value:"",checked:nt==="",onChange:G=>ht(G.target.value),style:{cursor:"pointer"}}),f.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:nt===""?"#ff9800":"#999",padding:"4px 10px",backgroundColor:nt===""?"#fff3e0":"#f5f5f5",borderRadius:"4px",transition:"all 0.2s"},children:""})]})]}),f.jsx("textarea",{value:xt,onChange:G=>O(G.target.value),onKeyDown:z,placeholder:"  ... (Ctrl+Enter )",style:{width:"100%",padding:"8px",minHeight:"60px",border:"none",outline:"none",resize:"vertical",fontFamily:"inherit"}}),f.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"8px"},children:[f.jsx("button",{onClick:$,className:"btn-primary",style:{fontSize:"12px",padding:"6px 16px"},children:""}),f.jsx("button",{onClick:()=>{O(""),ht("")},style:{fontSize:"12px",padding:"6px 16px",backgroundColor:"#f5f5f5",color:"#666",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:""})]})]}),ot.length>0?ot.map(G=>{let yt,gt,Ct;G.author===""?(yt="#2196F3",gt="#e3f2fd",Ct="#2196F3"):G.author===""?(yt="#9c27b0",gt="#f3e5f5",Ct="#9c27b0"):(yt="#ff9800",gt="#fff3e0",Ct="#ff9800");const Qt=G.author===""?"":G.author;return f.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"5px",marginBottom:"10px",borderLeft:`3px solid ${Ct}`},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:yt,backgroundColor:gt,padding:"2px 8px",borderRadius:"3px"},children:Qt||""}),f.jsx("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:L0(G.date)})]}),f.jsxs("div",{style:{display:"flex",gap:"5px"},children:[f.jsx("button",{onClick:()=>mt(G.id),style:{fontSize:"11px",padding:"3px 8px"},children:""}),f.jsx("button",{onClick:()=>U(G.id),className:"btn-secondary",style:{fontSize:"11px",padding:"3px 8px"},children:""})]})]}),S===G.id?f.jsx("div",{children:f.jsx("textarea",{defaultValue:G.content,onBlur:te=>W(G.id,te.target.value),style:{width:"100%",padding:"8px",minHeight:"60px"},autoFocus:!0})}):f.jsx("p",{style:{margin:0,fontSize:"14px",whiteSpace:"pre-line",lineHeight:"1.5"},children:G.content})]},G.id)}):f.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"  ."})]}),T.images&&T.images.length>0&&f.jsxs("div",{style:{borderTop:"2px solid #e0e0e0",paddingTop:"20px"},children:[f.jsxs("strong",{style:{color:"#7f8c8d",fontSize:"14px"},children:["  (",T.images.length,")"]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px",marginTop:"10px"},children:T.images.map((G,yt)=>f.jsx("div",{style:{position:"relative"},children:f.jsx("img",{src:G.url,alt:`  ${yt+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"5px",cursor:"pointer",border:"1px solid #e0e0e0"},onClick:()=>I(G.url)})},yt))})]}),vt&&f.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},onClick:()=>I(null),children:[f.jsx("img",{src:vt,alt:" ",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain"},onClick:G=>G.stopPropagation()}),f.jsx("button",{onClick:()=>I(null),style:{position:"absolute",top:"20px",right:"20px",background:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"24px",cursor:"pointer",color:"#333"},children:""})]})]}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between"},children:[f.jsx("button",{onClick:()=>{confirm("  ?")&&(a(T.id),j())},className:"btn-secondary",style:{backgroundColor:"#f44336"},children:""}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:j,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>{g(T),j()},className:"btn-primary",children:""})]})]})]})})},N=({activity:T,onCancel:j})=>{const D=()=>{if(T&&T.date)return T.date;const $=new Date,z=$.getFullYear(),U=String($.getMonth()+1).padStart(2,"0"),W=String($.getDate()).padStart(2,"0"),ot=String($.getHours()).padStart(2,"0"),G=String($.getMinutes()).padStart(2,"0");return`${z}-${U}-${W} ${ot}:${G}`},[R,S]=pt.useState(T||{date:D(),content:"",images:[]}),[mt,xt]=pt.useState(!1),O=$=>{const{name:z,value:U}=$.target;S(W=>({...W,[z]:U}))},nt=$=>new Promise((z,U)=>{const W=new FileReader;W.onload=()=>z(W.result),W.onerror=U,W.readAsDataURL($)}),ht=async $=>{const z=Array.from($.target.files);if(z.length===0)return;xt(!0);const U=[];for(const W of z){if(!W.type.startsWith("image/")){alert("   .");continue}if(W.size>1024*1024){alert(`${W.name}() 1MB .    .`);continue}try{const ot=await nt(W);U.push({url:ot,name:W.name})}catch(ot){console.error("  :",ot),alert("  .")}}S(W=>({...W,images:[...W.images||[],...U]})),xt(!1),$.target.value=""},vt=$=>{S(z=>({...z,images:z.images.filter((U,W)=>W!==$)}))},I=()=>{const $={...R,id:R.id||Si(),customerId:s,date:R.date};L($)};return f.jsx("div",{className:"modal-overlay",onClick:j,children:f.jsxs("div",{className:"modal-content",onClick:$=>$.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("h3",{style:{margin:0},children:" "}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("input",{type:"text",name:"date",value:R.date,onChange:O,placeholder:"YYYY-MM-DD HH:mm",style:{padding:"6px 8px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",width:"160px"}}),f.jsx("button",{className:"btn-close",onClick:j,children:""})]})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1",display:"none"},children:[f.jsx("label",{children:" *"}),f.jsx("input",{type:"date",name:"date",value:R.date,onChange:O})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:"  *"}),f.jsx("textarea",{name:"content",value:R.content,onChange:O,placeholder:`   
:  ,  3 `})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:" "}),f.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,onChange:ht,disabled:mt}),mt&&f.jsx("p",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:" ..."}),R.images&&R.images.length>0&&f.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",marginTop:"10px"},children:R.images.map(($,z)=>f.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[f.jsx("img",{src:$.url,alt:` ${z+1}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}),f.jsx("button",{type:"button",onClick:()=>vt(z),style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",cursor:"pointer",padding:0},children:""})]},z))})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:j,className:"btn-secondary",children:""}),f.jsx("button",{onClick:I,className:"btn-primary",disabled:mt,children:""})]})]})})},w=v?V.find(T=>T.id===v.id):null;return f.jsxs("div",{className:"activity-tab",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!o&&!p&&f.jsx("button",{onClick:()=>h(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+  "})}),o&&f.jsx(N,{onCancel:()=>h(!1)}),p?f.jsx(N,{activity:p,onCancel:()=>g(null)}):V.length>0?f.jsx("div",{onClick:J,children:f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{style:{width:"80px"},children:""}),f.jsx("th",{style:{width:"360px"},children:" "}),f.jsx("th",{style:{width:"720px"},children:""})]})}),f.jsx("tbody",{children:V.map(T=>{const j=ft(T.date);return f.jsxs("tr",{onContextMenu:D=>q(D,T),style:{cursor:"context-menu",backgroundColor:j?"rgba(211, 47, 47, 0.08)":"transparent",color:j?"#d32f2f":"inherit",fontWeight:j?"bold":"normal"},children:[f.jsx("td",{style:{fontSize:"13px",color:j?"#d32f2f":"inherit"},children:rt(T.date)}),f.jsxs("td",{onClick:()=>y(T),style:{cursor:"pointer",fontSize:"13px",width:"360px",maxWidth:"360px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:j?"#d32f2f":"inherit"},title:T.content,children:[et(T.content||"",30),T.followUps&&T.followUps.length>0&&f.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:j?"#d32f2f":"#7f8c8d"},children:["",T.followUps.length]}),T.images&&T.images.length>0&&f.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",color:j?"#d32f2f":"#7f8c8d"},children:["",T.images.length]})]}),f.jsx("td",{onClick:()=>y(T),style:{cursor:"pointer",fontSize:"13px",width:"720px",maxWidth:"720px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:j?"#d32f2f":"inherit"},title:at(T),children:T.followUps&&T.followUps.length>0&&(()=>{const D=T.followUps[T.followUps.length-1];let R,S;return D.author===""?(R="#2196F3",S="#e3f2fd"):D.author===""?(R="#9c27b0",S="#f3e5f5"):(R="#ff9800",S="#fff3e0"),f.jsxs(f.Fragment,{children:[f.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:R,backgroundColor:S,padding:"2px 6px",borderRadius:"3px",marginRight:"6px"},children:D.author||""}),f.jsxs("span",{style:{fontSize:"12px",color:j?"#d32f2f":"#7f8c8d"},children:["(",T.followUps.length,")"]})]})})()})]},T.id)})})]})}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."}),w&&f.jsx(K,{activity:w,onClose:()=>y(null)}),b.visible&&f.jsx("div",{style:{top:b.y,left:b.x,position:"absolute",zIndex:100,background:"white",border:"1px solid #ccc",borderRadius:"5px",padding:"5px"},children:f.jsxs("ul",{style:{listStyle:"none",margin:0,padding:"5px"},children:[f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:k,children:""}),f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:H,children:""}),f.jsx("li",{style:{padding:"8px",cursor:"pointer"},onClick:J,children:""})]})})]})},Wx=s=>{if(!s)return"";const e=s.split(`
`).filter(i=>i.trim()!=="");return e.length>=2?e[1].trim():""},Jx=s=>{if(!s)return"";const e=s.split(`
`).filter(i=>i.trim()!=="");return e.length>=7?e[6].trim():""},xd=s=>{if(!s)return"";const e=s.split(`
`);let i=-1;for(let a=0;a<e.length;a++)if(e[a].match(/.*|/)){i=a;break}if(i>=0&&i<e.length-1)for(let a=i+1;a<Math.min(i+10,e.length);a++){const o=e[a];if(o.match(/||/i))continue;const h=/(\s*\s*\s*|)\s*([\d\-]+)/,p=o.match(h);if(p)return p[2].trim().split(",")[0].trim()}return""},tb=s=>{if(!s)return"";const e=s.split(`
`).filter(i=>i.trim()!=="");return e.length>0?e[0].trim():""},eb=s=>{if(!s)return"";const e=s.split(`
`);for(let i=0;i<e.length;i++)if(e[i].includes("")&&i+1<e.length){const a=e[i+1].trim();if(a&&!a.includes("")&&!a.includes(""))return a}return""},nb=s=>{if(!s)return"";const e=/([\d\-,\s]+)(?:|$)/,i=s.match(e);if(i){const a=i[1].trim(),o=a.match(/(02[-\s]?\d{3,4}[-\s]?\d{4})/);if(o)return o[1].replace(/\s/g,"");const h=a.match(/(\d{2,3}[-\s]?\d{3,4}[-\s]?\d{4})/);if(h)return h[1].replace(/\s/g,"");const p=a.match(/(010[-\s]?\d{4}[-\s]?\d{4})/);if(p)return p[1].replace(/\s/g,"")}return""},Pa=(s,e="TEN")=>{if(!s)return{propertyName:"",agencyName:"",contactNumber:""};const i=s.split(`
`).filter(o=>o.trim()!=="");if(i.some(o=>o.includes(":"))){let o="",h="",p="";for(const g of i)if(g.includes(":")){const v=g.match(/:\s*(.+?)\(/);v&&(o=v[1].trim())}else if(g.includes(":"))h=g.replace(":","").trim();else if(g.includes(":")&&!g.match(/\b(|fax|FAX|||)\b/i)){const v=g.match(/:\s*([\d\-]+)/);v&&(p=v[1].trim())}return{propertyName:o,agencyName:h,contactNumber:p}}else return e===""?{propertyName:tb(s),agencyName:eb(s),contactNumber:nb(s)}:{propertyName:Wx(s),agencyName:Jx(s),contactNumber:xd(s)}},ib=s=>s.includes("/")||s.includes("/")||s.includes(""),rb=s=>{let e=" ",i="";const a=s.split(`
`).filter(K=>K.trim());if(a.length>0){const N=a[0].trim().replace(/\s*\d+\s*(||)?.*$/,"").trim();N&&(i=` : ${N}`)}let o="";const h=s.match(/(||)(\d+)\/(\d+)|(\d+)/);if(h)if(h[1]===""&&h[2]&&h[3]){const K=h[2],N=h[3];o=` : ${K}/${N}`}else h[1]===""&&h[2]?o=` : ${h[2]}`:h[1]===""&&h[2]&&(o=` : ${h[2]}`);let p="";const g=s.match(/\/\s*([\d.]+)\/([\d.]+)/),v=s.match(/\/\s*(\d+)\/(\d+)/);if(g&&v){const K=parseFloat(g[1]),N=parseFloat(g[2]),w=Math.min(K,N),T=v[1],j=v[2],D=(w/3.3).toFixed(1);p=` : ${w} (${D})/${T},${j}`}let y="";const b=a[0]?.match(/(\d+)/),C=s.match(/\/\s*([^/]+)\/(\d+)/);if(b&&C){const K=b[1],N=C[1].trim();y=` /: ${K}/${N}`}let V="",L=[];const q=s.match(/\s*(.+?)(?=\/|||$)/);if(q){const K=q[1].trim();K&&L.push(K)}const J=s.match(/\s*(.+?)(?=|$)/);if(J){const K=J[1].trim();K&&L.push(K)}const k=s.match(/\s*(.+?)(?=|$)/);if(k){const K=k[1].trim();K&&L.push(K)}L.length>0&&(V=` : ${L.join(" | ")}`);let H="",rt=s.match(/\s*(.+?)/);rt||(rt=s.match(/[]*\s*(.+?)/)),rt&&(H=` : ${rt[1].trim()}`);let at="";const ft=xd(s);return ft&&(at=` : ${ft}`),[e,i,o,p,y,V,H,at].filter(K=>K!=="").join(`
`)},sb=s=>{let e=" ",i="";const a=s.match(/\s*\s*\s*(.+?)(?=|$)/s),o=s.match(/\s*\s*\s*(.+?)(?=|\s*|$)/);if(a&&o){const K=a[1].trim().split(`
`)[0].trim(),N=o[1].trim().split(/\s+/)[0];i=` : ${K}(${N})`}else a&&(i=` : ${a[1].trim().split(`
`)[0].trim()}`);let h="",p=s.match(/\s*\s*\s*\s*([0-9,]+)/),g=s.match(/\s*\s*\s*([0-9,]+)/);if(p||(p=s.match(/\s*\s*\s*([0-9,]+)/)),g||(g=s.match(/\s*\s*([0-9,]+)/)),p&&g){const K=p[1].trim(),N=g[1].trim();h=` : ${K}/${N}`}let v="";const y=s.match(/[\s(]*([0-9.]+)[\s)]*[\s]*([0-9.]*)/);let b=null;if(y){const K=parseFloat(y[1]);if(y[2]&&y[2].trim()){const N=parseFloat(y[2].trim());b=Math.min(K,N)}else b=K}const C=s.match(/\s*\s*(\d+)/),V=s.match(/\s*\s*\s*(\d+)/);if(b!==null){const K=C?C[1].trim():"0",N=V?V[1].trim():"0",w=(b/3.3).toFixed(1);v=` : ${b} (${w})/${K},${N}`}let L="",q=s.match(/(\d+)\s*\[(\d+)\s*\/\s*(\d+)\]/);if(q){const K=q[1],N=q[2];L=` /: ${K}/${N}`}else if(q=s.match(/(\d+)\s*\[([^\]]+)\]/),q){const K=q[1],N=q[2].trim();L=` /: ${K}/${N}`}let J="";const k=s.match(/\s*(.+?)(?=|||$)/s);if(k){const K=k[1].trim().replace(/\s+/g," ");K&&(J=` : ${K}`)}let H="",rt=s.match(/(.+?.*?)/);rt||(rt=s.match(/(.+?)/)),rt&&(H=` : ${rt[1].trim()}`);let at="";const ft=xd(s);return ft&&(at=` : ${ft}`),[e,i,h,v,L,J,H,at].filter(K=>K!=="").join(`
`)},Ty=s=>s?ib(s)?rb(s):sb(s):"",ab=({customerId:s,customerName:e,meetings:i,onSaveMeeting:a,onDeleteMeeting:o,initialProperties:h,onClearInitialProperties:p})=>{const[g,v]=pt.useState(!1),[y,b]=pt.useState(null),[C,V]=pt.useState(null),[L,q]=pt.useState(null);pt.useEffect(()=>{h&&h.length>0&&(q(h),v(!0),p&&p())},[h,p]);const J=R=>{const mt=new Date().toISOString().slice(0,10);return R.slice(0,10)===mt},k=i.filter(R=>R.customerId===s),H=({onCancel:R,meetingData:S,initialPropertiesData:mt})=>{const xt=()=>{if(S){const G=S.date||new Date().toISOString().slice(0,16);return{...S,date:G.slice(0,10),time:S.time||G.slice(11,16)}}return{date:new Date().toISOString().slice(0,10),time:"12:00",properties:mt||[]}},[O,nt]=pt.useState(xt()),[ht,vt]=pt.useState(!1),[I,$]=pt.useState(null),z=G=>{nt({...O,[G.target.name]:G.target.value})},U=G=>{if(confirm("   ?")){const yt=O.properties.filter((gt,Ct)=>Ct!==G);nt({...O,properties:yt})}},W=()=>{const G={...O,id:O.id||Si(),customerId:s,date:`${O.date}T${O.time}:00`};a(G),v(!1),b(null),R()},ot=({onClose:G,propertyToEdit:yt,editIndex:gt})=>{const[Ct,Qt]=pt.useState(yt||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",customerResponse:"",photos:["",""],status:Kn[0]}),[te,ze]=pt.useState("TEN"),Ge=Bt=>{const En=Bt.target.value,{propertyName:je,agencyName:oi,contactNumber:ve}=Pa(En,te);Qt({...Ct,info:En,roomName:je||Ct.roomName,agency:oi||Ct.agency,agencyPhone:ve||Ct.agencyPhone})},oe=()=>{if(gt!=null){const Bt=[...O.properties];Bt[gt]={...Ct},nt({...O,properties:Bt})}else nt({...O,properties:[...O.properties,{...Ct,id:Si()}]});G()};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:Bt=>Bt.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:gt!=null?" ":" "}),f.jsx("button",{className:"btn-close",onClick:G,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[f.jsx("label",{style:{margin:0},children:" (  )"}),f.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[f.jsx("button",{onClick:()=>ze("TEN"),style:{padding:"6px 14px",backgroundColor:te==="TEN"?"#2196F3":"transparent",color:te==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:Bt=>{te!=="TEN"&&(Bt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:Bt=>{te!=="TEN"&&(Bt.target.style.backgroundColor="transparent")},children:"TEN"}),f.jsx("button",{onClick:()=>ze(""),style:{padding:"6px 14px",backgroundColor:te===""?"#2196F3":"transparent",color:te===""?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:Bt=>{te!==""&&(Bt.target.style.backgroundColor="#e0e0e0")},onMouseLeave:Bt=>{te!==""&&(Bt.target.style.backgroundColor="transparent")},children:""})]})]}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:Ct.info,onChange:Ge}),f.jsx("p",{className:"form-hint",children:te==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Ct.roomName,onChange:Bt=>Qt({...Ct,roomName:Bt.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Ct.agencyPhone,onChange:Bt=>Qt({...Ct,agencyPhone:Bt.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"time",value:Ct.visitTime,onChange:Bt=>Qt({...Ct,visitTime:Bt.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:Ct.status,onChange:Bt=>Qt({...Ct,status:Bt.target.value}),children:Kn.map(Bt=>f.jsx("option",{value:Bt,children:Bt},Bt))})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:Ct.agency,onChange:Bt=>Qt({...Ct,agency:Bt.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:G,className:"btn-secondary",children:""}),f.jsx("button",{onClick:oe,className:"btn-primary",children:gt!=null?"":""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:["  - ",e?e.slice(0,30):""]}),f.jsx("button",{className:"btn-close",onClick:R,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" "}),f.jsx("input",{type:"date",name:"date",value:O.date,onChange:z})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:" "}),f.jsx("input",{type:"time",name:"time",value:O.time,onChange:z})]})]}),f.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:" "}),O.properties.length===0?f.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"  ."}):O.properties.map((G,yt)=>f.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",G.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${G.status}`,value:G.status,onChange:gt=>{const Ct=[...O.properties];Ct[yt]={...Ct[yt],status:gt.target.value},nt({...O,properties:Ct})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Kn.map(gt=>f.jsx("option",{value:gt,children:gt},gt))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),f.jsx("div",{className:"property-info-content",children:G.info})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",G.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",G.agencyPhone?f.jsx("a",{href:`sms:${G.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:G.agencyPhone}):""]}),f.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["",f.jsx("input",{type:"time",value:G.visitTime||"",onChange:gt=>{const Ct=[...O.properties];Ct[yt]={...Ct[yt],visitTime:gt.target.value},nt({...O,properties:Ct})},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>{$(yt),vt(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>U(yt),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},G.id||yt)),f.jsx("div",{style:{textAlign:"center",margin:"20px 0",borderTop:"1px dashed #ccc",paddingTop:"20px"},children:f.jsx("button",{onClick:()=>{$(null),vt(!0)},className:"btn-primary",children:"+  "})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:R,className:"btn-secondary",children:""}),f.jsx("button",{onClick:W,className:"btn-primary",children:""})]}),ht&&f.jsx(ot,{onClose:()=>{vt(!1),$(null)},propertyToEdit:I!==null?O.properties[I]:null,editIndex:I})]})})},rt=(R,S)=>{if(!R)return"";const mt=new Date(R),xt=mt.getMonth()+1,O=mt.getDate(),nt=mt.getHours();return`${xt}${O} ${nt} (${S})`},at=R=>{if(!R)return"";let S=R.trim();S=S.replace(/[\u{1F300}-\u{1F9FF}]/gu,"").trim(),S=S.replace(/[]/g,"").trim(),S=S.replace(/[^\w\s-()]/g,"").trim();let xt=S.split("(")[0].trim();return xt=xt.replace(/||||||||||||||||/g,"").trim(),xt=xt.replace(/[-]+[]/g,"").trim(),xt=xt.replace(/[-]+[]/g,"").trim(),xt=xt.replace(/\b\d+(-\d+)?\b/g,"").trim(),xt=xt.replace(/\s+/g," ").trim(),xt?xt.length>5?xt.substring(0,5)+"...":xt:"-"},ft=R=>!R||R.length===0?"-":R.map(mt=>at(mt.roomName)).filter(mt=>mt).join(", ")||"-",[et,K]=pt.useState(null),[N,w]=pt.useState(null),T=(R,S)=>{R.preventDefault(),w(S),K({x:R.clientX,y:R.clientY})},j=()=>{K(null),w(null)},D=({meeting:R,onClose:S})=>{const[mt,xt]=pt.useState(null),[O,nt]=pt.useState(!1),[ht,vt]=pt.useState(null),[I,$]=pt.useState(""),[z,U]=pt.useState(null),[W,ot]=pt.useState(""),G=Nx.useRef({}),yt=R.properties?R.properties.map((bt,wt)=>({prop:bt,originalIndex:wt})).sort((bt,wt)=>bt.prop.visitTime?wt.prop.visitTime?bt.prop.visitTime.localeCompare(wt.prop.visitTime):-1:1):[],gt=bt=>{xt(bt),nt(!0)},Ct=bt=>{if(confirm("  ?")){const wt=R.properties.filter((Nt,it)=>it!==bt),Tt={...R,properties:wt};a(Tt),V(Tt)}},Qt=bt=>{vt(bt),$(R.properties[bt].info||"")},te=bt=>{if(ht===bt){const wt=[...R.properties];wt[bt]={...wt[bt],info:I};const Tt={...R,properties:wt};a(Tt),V(Tt),vt(null),$("")}},ze=()=>{vt(null),$("")},Ge=(bt,wt)=>{bt.key==="Enter"&&bt.ctrlKey?te(wt):bt.key==="Escape"&&ze()},oe=bt=>{U(bt),ot(R.properties[bt].customerResponse||"")},Bt=bt=>{if(z===bt){const wt=[...R.properties];wt[bt]={...wt[bt],customerResponse:W};const Tt={...R,properties:wt};a(Tt),V(Tt),U(null),ot("")}},En=()=>{U(null),ot("")},je=(bt,wt)=>{bt.key==="Enter"&&bt.ctrlKey?Bt(wt):bt.key==="Escape"&&En()},oi=(bt,wt,Tt)=>{const Nt=bt.target.files?.[0];if(!Nt)return;const it=new FileReader;it.onload=Vt=>{const jt=Vt.target?.result,$t=[...R.properties],Et=$t[wt].photos||["",""];Et[Tt]=jt,$t[wt]={...$t[wt],photos:Et};const Pt={...R,properties:$t};a(Pt),V(Pt)},it.readAsDataURL(Nt)},ve=(bt,wt)=>{const Tt=[...R.properties],Nt=Tt[bt].photos||["",""];Nt[wt]="",Tt[bt]={...Tt[bt],photos:Nt};const it={...R,properties:Tt};a(it),V(it)},Ae=bt=>{const wt=R.properties[bt]?.photos?.findIndex(Tt=>!Tt);if(wt!==-1&&wt!==void 0){const Tt=`photo-${bt}-${wt}`;G.current[Tt]?.click()}else alert(" 2   .")},Tn=(bt,wt)=>{const Tt=[...R.properties];wt!=null?Tt[wt]=bt:Tt.push({...bt,id:Si()});const Nt={...R,properties:Tt};a(Nt),V(Nt),nt(!1),xt(null)},Zr=({propertyToEdit:bt,editIndex:wt,onClose:Tt})=>{const[Nt,it]=pt.useState(bt||{roomName:"",visitTime:"",agency:"",agencyPhone:"",info:"",customerResponse:"",photos:["",""],status:Kn[0]}),[Vt,jt]=pt.useState("TEN"),$t=Et=>{const Pt=Et.target.value,{propertyName:qt,agencyName:Zt,contactNumber:It}=Pa(Pt,Vt);it({...Nt,info:Pt,roomName:qt||Nt.roomName,agency:Zt||Nt.agency,agencyPhone:It||Nt.agencyPhone})};return f.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:f.jsxs("div",{className:"modal-content",onClick:Et=>Et.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:" "}),f.jsx("button",{className:"btn-close",onClick:Tt,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[f.jsx("label",{style:{margin:0},children:" (  )"}),f.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[f.jsx("button",{onClick:()=>jt("TEN"),style:{padding:"6px 14px",backgroundColor:Vt==="TEN"?"#2196F3":"transparent",color:Vt==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:Et=>{Vt!=="TEN"&&(Et.target.style.backgroundColor="#e0e0e0")},onMouseLeave:Et=>{Vt!=="TEN"&&(Et.target.style.backgroundColor="transparent")},children:"TEN"}),f.jsx("button",{onClick:()=>jt(""),style:{padding:"6px 14px",backgroundColor:Vt===""?"#2196F3":"transparent",color:Vt===""?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:Et=>{Vt!==""&&(Et.target.style.backgroundColor="#e0e0e0")},onMouseLeave:Et=>{Vt!==""&&(Et.target.style.backgroundColor="transparent")},children:""})]})]}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:Nt.info,onChange:$t}),f.jsx("p",{className:"form-hint",children:Vt==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Nt.roomName,onChange:Et=>it({...Nt,roomName:Et.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:Nt.agencyPhone,onChange:Et=>it({...Nt,agencyPhone:Et.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"time",value:Nt.visitTime,onChange:Et=>it({...Nt,visitTime:Et.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:Nt.status,onChange:Et=>it({...Nt,status:Et.target.value}),children:Kn.map(Et=>f.jsx("option",{value:Et,children:Et},Et))})]}),f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:Nt.agency,onChange:Et=>it({...Nt,agency:Et.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:Tt,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>Tn(Nt,wt),className:"btn-primary",children:""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:bt=>bt.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:["  - ",L0(R.date)]}),f.jsx("button",{className:"btn-close",onClick:S,children:""})]}),f.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:yt.length>0?yt.map(({prop:bt,originalIndex:wt})=>f.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",bt.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${bt.status}`,value:bt.status,onChange:Tt=>{const Nt=[...R.properties];Nt[wt]={...Nt[wt],status:Tt.target.value};const it={...R,properties:Nt};a(it),V(it)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Kn.map(Tt=>f.jsx("option",{value:Tt,children:Tt},Tt))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),ht===wt?f.jsxs("div",{style:{padding:"8px",backgroundColor:"#fff8f0",borderRadius:"4px",border:"1px solid #FF6B9D"},children:[f.jsx("textarea",{value:I,onChange:Tt=>$(Tt.target.value),onKeyDown:Tt=>Ge(Tt,wt),onBlur:()=>te(wt),autoFocus:!0,style:{width:"100%",minHeight:"200px",padding:"8px",border:"1px solid #FF6B9D",borderRadius:"4px",fontSize:"13px",fontFamily:"inherit",resize:"vertical"}}),f.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>te(wt),style:{padding:"4px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "}),f.jsx("button",{onClick:ze,style:{padding:"4px 12px",backgroundColor:"#999",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "})]})]}):f.jsx("div",{className:"property-info-content",onDoubleClick:()=>Qt(wt),style:{padding:"8px",backgroundColor:"#f9f9f9",borderRadius:"4px",cursor:"pointer",border:"1px solid transparent",transition:"all 0.2s ease"},onMouseEnter:Tt=>{Tt.currentTarget.style.backgroundColor="#f0f0f0",Tt.currentTarget.style.border="1px solid #e0e0e0"},onMouseLeave:Tt=>{Tt.currentTarget.style.backgroundColor="#f9f9f9",Tt.currentTarget.style.border="1px solid transparent"},children:bt.info||"()"})]}),f.jsxs("div",{style:{padding:"10px 0",borderTop:"1px solid #e0e0e0",borderBottom:"1px solid #e0e0e0"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:" "}),z===wt?f.jsxs("div",{style:{padding:"8px",backgroundColor:"#fff8f0",borderRadius:"4px",border:"1px solid #FF6B9D"},children:[f.jsx("textarea",{value:W,onChange:Tt=>ot(Tt.target.value),onKeyDown:Tt=>je(Tt,wt),onBlur:()=>Bt(wt),autoFocus:!0,style:{width:"100%",minHeight:"100px",padding:"8px",border:"1px solid #FF6B9D",borderRadius:"4px",fontSize:"13px",fontFamily:"inherit",resize:"vertical"}}),f.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>Bt(wt),style:{padding:"4px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "}),f.jsx("button",{onClick:En,style:{padding:"4px 12px",backgroundColor:"#999",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:" "})]})]}):f.jsx("div",{onDoubleClick:()=>oe(wt),style:{padding:"8px",backgroundColor:"#f9f9f9",borderRadius:"4px",cursor:"pointer",border:"1px solid transparent",transition:"all 0.2s ease",minHeight:"20px",fontSize:"13px",color:"#333",lineHeight:"1.5",whiteSpace:"pre-wrap"},onMouseEnter:Tt=>{Tt.currentTarget.style.backgroundColor="#f0f0f0",Tt.currentTarget.style.border="1px solid #e0e0e0"},onMouseLeave:Tt=>{Tt.currentTarget.style.backgroundColor="#f9f9f9",Tt.currentTarget.style.border="1px solid transparent"},children:bt.customerResponse||"(  )"})]}),bt.photos&&bt.photos.some(Tt=>Tt)&&f.jsxs("div",{style:{padding:"10px 0",borderTop:"1px solid #e0e0e0",borderBottom:"1px solid #e0e0e0"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px",fontWeight:"600"},children:" "}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:bt.photos.map((Tt,Nt)=>f.jsx("div",{style:{position:"relative"},children:Tt?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:Tt,alt:` ${Nt+1}`,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"4px"}}),f.jsx("button",{onClick:()=>ve(wt,Nt),style:{position:"absolute",top:"4px",right:"4px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}):null},Nt))})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",bt.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",bt.agencyPhone?f.jsx("a",{href:`sms:${bt.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:bt.agencyPhone}):""]}),f.jsxs("span",{className:"property-detail",style:{display:"flex",alignItems:"center",gap:"5px"},children:["",f.jsx("input",{type:"time",value:bt.visitTime||"",onChange:Tt=>{const Nt=[...R.properties];Nt[wt]={...Nt[wt],visitTime:Tt.target.value};const it={...R,properties:Nt};a(it),V(it)},style:{border:"1px solid #e0e0e0",padding:"2px 5px",borderRadius:"3px",fontSize:"13px",cursor:"pointer"}}),""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end",alignItems:"center"},children:[f.jsx("button",{onClick:()=>Ae(wt),style:{backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:" /",children:" "}),bt.photos&&bt.photos.map((Tt,Nt)=>f.jsx("input",{type:"file",accept:"image/*",ref:it=>{it&&(G.current[`photo-${wt}-${Nt}`]=it)},onChange:it=>oi(it,wt,Nt),style:{display:"none"}},`photo-${wt}-${Nt}`)),f.jsx("button",{onClick:()=>gt(wt),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>Ct(wt),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},bt.id)):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."})}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{onClick:S,className:"btn-primary",children:""})}),O&&f.jsx(Zr,{propertyToEdit:mt!==null?R.properties[mt]:null,editIndex:mt,onClose:()=>{nt(!1),xt(null)}})]})})};return f.jsxs("div",{className:"meeting-tab",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!y&&f.jsx("button",{onClick:()=>v(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+  "})}),g&&f.jsx(H,{onCancel:()=>{v(!1),q(null)},initialPropertiesData:L}),y?f.jsx(H,{meetingData:y,onCancel:()=>b(null)},y.id):k.length>0?f.jsxs(f.Fragment,{children:[f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:""}),f.jsx("th",{children:""})]})}),f.jsx("tbody",{children:k.map(R=>{const S=J(R.date);return f.jsxs("tr",{style:{backgroundColor:S?"rgba(211, 47, 47, 0.08)":"transparent",color:S?"#d32f2f":"inherit",fontWeight:S?"bold":"normal",cursor:"context-menu"},onContextMenu:mt=>T(mt,R),children:[f.jsx("td",{style:{color:S?"#d32f2f":"inherit"},children:rt(R.date,R.properties?.length||0)}),f.jsx("td",{onClick:()=>V(R),style:{cursor:"pointer",color:S?"#d32f2f":"var(--primary-blue)",textDecoration:"underline",fontWeight:S?"bold":"normal"},children:ft(R.properties)})]},R.id)})})]}),et&&N&&f.jsxs("div",{className:"context-menu",style:{position:"fixed",top:et.y,left:et.x,zIndex:1e3},children:[f.jsx("button",{className:"context-menu-item",onClick:()=>{b(N),j()},children:""}),f.jsx("button",{className:"context-menu-item delete",onClick:()=>{o(N.id),j()},children:""})]}),et&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:j})]}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."}),C&&f.jsx(D,{meeting:C,onClose:()=>V(null)})]})},lb=({customerId:s,customerName:e,propertySelections:i,onSavePropertySelection:a,onDeletePropertySelection:o,onTabChange:h,onCreateMeetingFromSelection:p})=>{const[g,v]=pt.useState(!1),[y,b]=pt.useState(null),[C,V]=pt.useState(null),L=i.filter(H=>H.customerId===s).sort((H,rt)=>new Date(rt.createdAt)-new Date(H.createdAt)),q=({onCancel:H,selectionData:rt})=>{const at=()=>rt?{...rt}:{properties:[]},[ft,et]=pt.useState(at()),[K,N]=pt.useState(!1),[w,T]=pt.useState(null),j=S=>{if(confirm("   ?")){const mt=ft.properties.filter((xt,O)=>O!==S);et({...ft,properties:mt})}},D=()=>{const S={...ft,id:ft.id||Si(),customerId:s,createdAt:ft.createdAt||new Date().toISOString()};a(S),v(!1),b(null),H()},R=({onClose:S,propertyToEdit:mt,editIndex:xt})=>{const[O,nt]=pt.useState(mt||{roomName:"",agency:"",agencyPhone:"",info:"",status:Kn[0]}),[ht,vt]=pt.useState("TEN"),I=U=>{const W=U.target.value,{propertyName:ot,agencyName:G,contactNumber:yt}=Pa(W,ht);nt({...O,info:W,roomName:ot||O.roomName,agency:G||O.agency,agencyPhone:yt||O.agencyPhone})},$=()=>{const U=O.info,W=Ty(U);if(!W){alert("     .  .");return}const ot={...O,info:W},{propertyName:G,agencyName:yt,contactNumber:gt}=Pa(W);ot.roomName=G||O.roomName,ot.agency=yt||O.agency,ot.agencyPhone=gt||O.agencyPhone,nt(ot)},z=()=>{if(xt!=null){const U=[...ft.properties];U[xt]={...O},et({...ft,properties:U})}else et({...ft,properties:[...ft.properties,{...O,id:Si()}]});S()};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:xt!=null?" ":" "}),f.jsx("button",{className:"btn-close",onClick:S,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[f.jsx("label",{style:{margin:0},children:" (  )"}),f.jsxs("div",{style:{display:"flex",gap:"0",backgroundColor:"#f0f0f0",borderRadius:"6px",padding:"2px"},children:[f.jsx("button",{onClick:()=>vt("TEN"),style:{padding:"6px 14px",backgroundColor:ht==="TEN"?"#2196F3":"transparent",color:ht==="TEN"?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:U=>{ht!=="TEN"&&(U.target.style.backgroundColor="#e0e0e0")},onMouseLeave:U=>{ht!=="TEN"&&(U.target.style.backgroundColor="transparent")},children:"TEN"}),f.jsx("button",{onClick:()=>vt(""),style:{padding:"6px 14px",backgroundColor:ht===""?"#2196F3":"transparent",color:ht===""?"white":"#666",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:U=>{ht!==""&&(U.target.style.backgroundColor="#e0e0e0")},onMouseLeave:U=>{ht!==""&&(U.target.style.backgroundColor="transparent")},children:""})]})]}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:O.info,onChange:I}),f.jsx("button",{type:"button",onClick:$,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:U=>U.target.style.backgroundColor="#F57C00",onMouseLeave:U=>U.target.style.backgroundColor="#FF9800",children:"   "}),f.jsx("p",{className:"form-hint",children:ht==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:O.roomName,onChange:U=>nt({...O,roomName:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:O.status,onChange:U=>nt({...O,status:U.target.value}),children:Kn.map(U=>f.jsx("option",{value:U,children:U},U))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:O.agency,onChange:U=>nt({...O,agency:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:O.agencyPhone,onChange:U=>nt({...O,agencyPhone:U.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:S,className:"btn-secondary",children:""}),f.jsx("button",{onClick:z,className:"btn-primary",children:xt!=null?"":""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:[" - ",e?e.slice(0,30):""]}),f.jsx("button",{className:"btn-close",onClick:H,children:""})]}),f.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:" "}),ft.properties.length===0?f.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"  ."}):ft.properties.map((S,mt)=>f.jsxs("div",{className:"property-card",style:{marginBottom:"10px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",S.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${S.status}`,value:S.status,onChange:xt=>{const O=[...ft.properties];O[mt]={...O[mt],status:xt.target.value},et({...ft,properties:O})},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Kn.map(xt=>f.jsx("option",{value:xt,children:xt},xt))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),f.jsx("div",{className:"property-info-content",children:S.info})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",S.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",S.agencyPhone?f.jsx("a",{href:`sms:${S.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:S.agencyPhone}):""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>{T(mt),N(!0)},className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>j(mt),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},S.id||mt)),f.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px",marginTop:"20px",borderTop:"1px solid #e0e0e0",paddingTop:"15px"},children:[f.jsx("button",{onClick:H,className:"btn-secondary",children:""}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginLeft:"auto"},children:[f.jsx("button",{onClick:()=>{T(null),N(!0)},style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:S=>S.target.style.backgroundColor="#1976D2",onMouseLeave:S=>S.target.style.backgroundColor="#2196F3",children:"+  "}),f.jsx("button",{onClick:D,className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold"},children:""})]})]}),K&&f.jsx(R,{onClose:()=>{N(!1),T(null)},propertyToEdit:w!==null?ft.properties[w]:null,editIndex:w})]})})},J=H=>H?new Date(H).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"",k=({selection:H,onClose:rt})=>{const[at,ft]=pt.useState(null),[et,K]=pt.useState(!1),[N,w]=pt.useState(!1),T=O=>O.map(nt=>{const ht=nt.info.split(`
`).filter(vt=>vt.trim());return ht.length>1&&(ht.length>6&&ht.splice(6,1),ht.length>0&&ht.pop()),ht.join(`
`)}).join(`

`),j=()=>{if(H.properties.length===0){alert("  .");return}p(H.properties),rt()},D=O=>{ft(O),K(!0)},R=O=>{if(confirm("  ?")){const nt=H.properties.filter((vt,I)=>I!==O),ht={...H,properties:nt};a(ht),V(ht)}},S=(O,nt)=>{const ht=[...H.properties];nt!=null?ht[nt]=O:ht.push({...O,id:Si()});const vt={...H,properties:ht};a(vt),V(vt),K(!1),ft(null)},mt=({propertyToEdit:O,editIndex:nt,onClose:ht})=>{const[vt,I]=pt.useState(O||{roomName:"",agency:"",agencyPhone:"",info:"",status:Kn[0]}),$=U=>{const W=U.target.value,{propertyName:ot,agencyName:G,contactNumber:yt}=Pa(W);I({...vt,info:W,roomName:ot||vt.roomName,agency:G||vt.agency,agencyPhone:yt||vt.agencyPhone})},z=()=>{const U=vt.info,W=Ty(U);if(!W){alert("     .  .");return}const ot={...vt,info:W},{propertyName:G,agencyName:yt,contactNumber:gt}=Pa(W);ot.roomName=G||vt.roomName,ot.agency=yt||vt.agency,ot.agencyPhone=gt||vt.agencyPhone,I(ot)};return f.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:f.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:" "}),f.jsx("button",{className:"btn-close",onClick:ht,children:""})]}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[f.jsx("label",{children:" (  )"}),f.jsx("textarea",{className:"large",placeholder:`  
2    
7    
    `,value:vt.info,onChange:$}),f.jsx("button",{type:"button",onClick:z,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"10px",transition:"all 0.2s",display:"block"},onMouseEnter:U=>U.target.style.backgroundColor="#F57C00",onMouseLeave:U=>U.target.style.backgroundColor="#FF9800",children:"   "}),f.jsx("p",{className:"form-hint",children:source==="TEN"?"   2  , 7  ,     .":"     ,   ,      ."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:vt.roomName,onChange:U=>I({...vt,roomName:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("select",{value:vt.status,onChange:U=>I({...vt,status:U.target.value}),children:Kn.map(U=>f.jsx("option",{value:U,children:U},U))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",value:vt.agency,onChange:U=>I({...vt,agency:U.target.value})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:""}),f.jsx("input",{type:"text",placeholder:"   ",value:vt.agencyPhone,onChange:U=>I({...vt,agencyPhone:U.target.value})})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:ht,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>S(vt,nt),className:"btn-primary",children:""})]})]})})},xt=({onClose:O})=>{const[nt,ht]=pt.useState(T(H.properties)),[vt,I]=pt.useState(!1),$=async()=>{try{await navigator.clipboard.writeText(nt),alert("  !")}catch(z){alert(" : "+z.message)}};return f.jsx("div",{className:"modal-overlay",style:{zIndex:1100},children:f.jsxs("div",{className:"modal-content",onClick:z=>z.stopPropagation(),style:{maxWidth:"800px"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:"  "}),f.jsx("button",{className:"btn-close",onClick:O,children:""})]}),f.jsx("div",{style:{padding:"20px"},children:vt?f.jsx("textarea",{value:nt,onChange:z=>ht(z.target.value),style:{width:"100%",minHeight:"400px",padding:"12px",fontSize:"14px",lineHeight:"1.6",border:"1px solid #e0e0e0",borderRadius:"4px",fontFamily:"monospace",resize:"vertical"}}):f.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",fontSize:"14px",lineHeight:"1.6",maxHeight:"400px",overflowY:"auto",border:"1px solid #e0e0e0"},children:nt})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:O,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>I(!vt),className:"btn-primary",style:{marginLeft:"10px"},children:vt?"":""}),f.jsx("button",{onClick:$,className:"btn-primary",style:{marginLeft:"10px"},children:""})]})]})})};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h3",{children:["  - ",J(H.createdAt)]}),f.jsx("button",{className:"btn-close",onClick:rt,children:""})]}),f.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto",padding:"10px 0"},children:H.properties&&H.properties.length>0?H.properties.map((O,nt)=>f.jsxs("div",{className:"property-card",style:{marginBottom:"15px"},children:[f.jsxs("div",{className:"property-card-header",children:[f.jsxs("div",{className:"property-room-name",children:[" ",O.roomName||""]}),f.jsx("select",{className:`property-status-badge status-${O.status}`,value:O.status,onChange:ht=>{const vt=[...H.properties];vt[nt]={...vt[nt],status:ht.target.value};const I={...H,properties:vt};a(I),V(I)},style:{cursor:"pointer",border:"none",fontWeight:"bold"},children:Kn.map(ht=>f.jsx("option",{value:ht,children:ht},ht))})]}),f.jsxs("div",{className:"property-card-body",children:[f.jsx("div",{className:"property-info-label",children:" "}),f.jsx("div",{className:"property-info-content",children:O.info})]}),f.jsxs("div",{className:"property-card-footer",children:[f.jsxs("span",{className:"property-detail",children:[" ",O.agency]}),f.jsxs("span",{className:"property-detail",children:[" ",O.agencyPhone?f.jsx("a",{href:`sms:${O.agencyPhone}`,style:{color:"inherit",textDecoration:"underline"},children:O.agencyPhone}):""]})]}),f.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:()=>D(nt),className:"btn-primary",style:{fontSize:"12px",padding:"6px 12px"},children:""}),f.jsx("button",{onClick:()=>R(nt),className:"btn-secondary",style:{fontSize:"12px",padding:"6px 12px"},children:""})]})]},O.id)):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."})}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("button",{onClick:rt,className:"btn-primary",children:""}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>w(!0),disabled:!H.properties||H.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:!H.properties||H.properties.length===0?"not-allowed":"pointer",opacity:!H.properties||H.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:O=>{H.properties&&H.properties.length>0&&(O.target.style.backgroundColor="#d32f2f")},onMouseLeave:O=>{H.properties&&H.properties.length>0&&(O.target.style.backgroundColor="#f44336")},children:"  "}),f.jsx("button",{onClick:j,disabled:!H.properties||H.properties.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:!H.properties||H.properties.length===0?"not-allowed":"pointer",opacity:!H.properties||H.properties.length===0?.5:1,transition:"all 0.2s"},onMouseEnter:O=>{H.properties&&H.properties.length>0&&(O.target.style.backgroundColor="#7B1FA2")},onMouseLeave:O=>{H.properties&&H.properties.length>0&&(O.target.style.backgroundColor="#9C27B0")},children:" "})]})]}),N&&f.jsx(xt,{onClose:()=>w(!1)}),et&&f.jsx(mt,{propertyToEdit:at!==null?H.properties[at]:null,editIndex:at,onClose:()=>{K(!1),ft(null)}})]})})};return f.jsxs("div",{className:"meeting-tab",children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:!g&&!y&&f.jsx("button",{onClick:()=>v(!0),className:"btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:"+ "})}),g&&f.jsx(q,{onCancel:()=>v(!1)}),y?f.jsx(q,{selectionData:y,onCancel:()=>b(null)},y.id):L.length>0?f.jsxs("table",{className:"customer-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:""}),f.jsx("th",{children:""}),f.jsx("th",{children:""})]})}),f.jsx("tbody",{children:L.map(H=>f.jsxs("tr",{children:[f.jsx("td",{children:J(H.createdAt)}),f.jsxs("td",{onClick:()=>V(H),style:{cursor:"pointer",color:"var(--primary-blue)",textDecoration:"underline"},children:[H.properties?.length||0," "]}),f.jsxs("td",{children:[f.jsx("button",{onClick:()=>b(H),style:{fontSize:"12px",padding:"4px 8px",marginRight:"5px"},children:""}),f.jsx("button",{onClick:()=>o(H.id),className:"btn-secondary",style:{fontSize:"12px",padding:"4px 8px"},children:""})]})]},H.id))})]}):f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:"  ."}),C&&f.jsx(k,{selection:C,onClose:()=>V(null)})]})},ob=({selectedCustomer:s,onClose:e,onEditCustomer:i,onUpdateCustomer:a,onDeleteCustomer:o,activities:h,onSaveActivity:p,onDeleteActivity:g,meetings:v,onSaveMeeting:y,onDeleteMeeting:b,propertySelections:C,onSavePropertySelection:V,onDeletePropertySelection:L})=>{const[q,J]=pt.useState(""),[k,H]=pt.useState(null);pt.useEffect(()=>{s&&(J(""),H(null))},[s?.id]);const rt=!!s,at=K=>{const N={...s,status:K,progress:K===""?null:s.progress};a(N)},ft=K=>{const N={...s,progress:K};a(N)},et=K=>{const N=K.map(w=>({...w,visitTime:""}));H(N),J(" ")};return f.jsx("aside",{className:`detail-panel ${rt?"open":""}`,children:rt&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"panel-header",children:[f.jsxs("div",{children:[f.jsx("h3",{children:" "}),f.jsxs("span",{className:"created-date",children:[": ",new Date(s.createdAt).toLocaleDateString()]})]}),f.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[f.jsx("button",{onClick:K=>{K.stopPropagation(),i(s)},className:"btn-primary",style:{padding:"8px 16px"},children:""}),f.jsx("button",{onClick:K=>{K.stopPropagation(),o(s)},className:"btn-secondary",style:{padding:"8px 16px"},children:""}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]})]}),f.jsx("div",{style:{padding:"15px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f8f9fa"},children:f.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap"},children:[f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:""}),f.jsx("div",{style:{display:"flex",gap:"5px"},children:Bx.map(K=>f.jsx("button",{type:"button",onClick:()=>at(K),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:s.status===K?"#4CAF50":"white",color:s.status===K?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:K},K))})]}),(s.status===""||s.status==="")&&f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("label",{style:{fontSize:"14px",marginBottom:0,minWidth:"60px",fontWeight:"bold"},children:""}),f.jsx("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:z0.map(K=>f.jsx("button",{type:"button",onClick:()=>ft(K),style:{fontSize:"13px",padding:"5px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:s.progress===K?"#2196F3":"white",color:s.progress===K?"white":"#333",cursor:"pointer",transition:"all 0.2s"},children:K},K))})]})]})}),f.jsxs("div",{className:"panel-content",children:[f.jsx("div",{style:{display:"flex",gap:"4px",padding:"12px 15px",backgroundColor:"#e3f2fd",borderRadius:"8px",marginBottom:"15px",border:"1px solid #bbdefb"},children:[""," "," ",""].map((K,N)=>f.jsx("button",{onClick:()=>J(K),style:{flex:1,padding:"10px 16px",fontSize:"14px",fontWeight:"700",border:"none",borderRadius:"6px",backgroundColor:q===K?"white":"transparent",color:"#1a1a1a",cursor:"pointer",transition:"all 0.2s ease",boxShadow:q===K?"0 2px 8px rgba(33, 150, 243, 0.15)":"none",border:q===K?"1px solid #e0e0e0":"1px solid transparent"},onMouseEnter:w=>{q!==K&&(w.target.style.backgroundColor="#f9f9f9")},onMouseLeave:w=>{q!==K&&(w.target.style.backgroundColor="transparent")},children:K},K))}),f.jsx($x,{customer:s,onUpdateCustomer:a}),f.jsxs("div",{className:"tab-content",children:[q===""&&f.jsx(Xx,{customer:s,onUpdateCustomer:a,activities:h,meetings:v,onTabChange:J}),q===" "&&f.jsx(Zx,{customerId:s.id,activities:h,onSaveActivity:p,onDeleteActivity:g}),q===" "&&f.jsx(ab,{customerId:s.id,customerName:s.name,meetings:v,onSaveMeeting:y,onDeleteMeeting:b,initialProperties:k,onClearInitialProperties:()=>H(null)}),q===""&&f.jsx(lb,{customerId:s.id,customerName:s.name,propertySelections:C,onSavePropertySelection:V,onDeletePropertySelection:L,onTabChange:J,onCreateMeetingFromSelection:et})]})]})]})})},ub=({selectedProperty:s,onClose:e,onEditProperty:i,onUpdateProperty:a,onDeleteProperty:o})=>{const[h,p]=pt.useState(null),[g,v]=pt.useState(""),[y,b]=pt.useState(null);if(pt.useEffect(()=>{s&&b(s)},[s]),!s)return null;const C=H=>H?`${Number(H).toLocaleString()} `:"-",V=(H,rt)=>{p(H),v(rt||"")},L=async()=>{if(h&&y){const H={...y,[h]:g};b(H),await a(H),p(null)}},q=()=>{p(null),v("")},J=H=>{H.key==="Enter"?L():H.key==="Escape"&&q()},k=(H,rt,at,ft="text",et={})=>{const K=h===H,N=H==="price"?C(at):H==="createdAt"||H==="moveInDate"?at?at.slice(0,10):"-":at||"-";return f.jsxs("div",{style:{padding:"8px",backgroundColor:K?"#fff8f0":"#f9f9f9",borderRadius:"4px",cursor:"pointer",border:K?"1px solid #ff1493":"1px solid transparent",transition:"all 0.2s ease"},onDoubleClick:()=>V(H,at),children:[f.jsx("span",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px",fontWeight:"600"},children:rt}),K?f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[ft==="textarea"?f.jsx("textarea",{autoFocus:!0,value:g,onChange:w=>v(w.target.value),onKeyDown:J,onBlur:L,style:{flex:1,padding:"6px",border:"1px solid #ff1493",borderRadius:"3px",fontSize:"13px",fontFamily:"inherit",minHeight:"60px",resize:"vertical"}}):f.jsx("input",{autoFocus:!0,type:ft,value:g,onChange:w=>v(w.target.value),onKeyDown:J,onBlur:L,style:{flex:1,padding:"6px",border:"1px solid #ff1493",borderRadius:"3px",fontSize:"13px",fontFamily:"inherit"}}),f.jsx("button",{onClick:L,style:{padding:"4px 8px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:""}),f.jsx("button",{onClick:q,style:{padding:"4px 8px",backgroundColor:"#999",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:""})]}):f.jsx("p",{style:{margin:0,fontWeight:"bold",fontSize:"13px",color:H==="price"?"#2196F3":"#333"},children:N})]})};return f.jsxs("div",{className:"customer-detail-panel",style:{position:"fixed",right:0,top:0,height:"100vh",width:"800px",backgroundColor:"#fff",borderLeft:"1px solid #e0e0e0",boxShadow:"-2px 0 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",zIndex:50,overflowY:"auto"},children:[f.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"bold",color:"#2c3e50"},children:s.buildingName}),f.jsxs("p",{style:{margin:0,fontSize:"13px",color:"#7f8c8d"},children:[s.category,"  ",s.propertyType]})]}),f.jsx("button",{onClick:e,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#999",padding:"0 10px"},children:""})]}),f.jsxs("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:[f.jsx("div",{style:{fontSize:"12px",color:"#999",marginBottom:"15px",fontStyle:"italic"},children:"     "}),f.jsxs("div",{style:{marginBottom:"25px"},children:[f.jsx("h4",{style:{margin:"0 0 12px 0",color:"#ff1493",fontSize:"14px",fontWeight:"bold"},children:" "}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[k("roomNumber","",y?.roomNumber),k("price","",y?.price,"number"),k("createdAt","",y?.createdAt,"date"),k("moveInDate","",y?.moveInDate,"date")]})]}),f.jsxs("div",{style:{marginBottom:"25px"},children:[f.jsx("h4",{style:{margin:"0 0 12px 0",color:"#ff1493",fontSize:"14px",fontWeight:"bold"},children:" "}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[k("ownerName","",y?.ownerName),k("ownerPhone","",y?.ownerPhone,"tel")]})]}),f.jsxs("div",{style:{marginBottom:"25px"},children:[f.jsx("h4",{style:{margin:"0 0 12px 0",color:"#ff1493",fontSize:"14px",fontWeight:"bold"},children:" "}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[k("leaseInfo","",y?.leaseInfo),k("tenantPhone","",y?.tenantPhone,"tel")]}),f.jsx("div",{style:{marginBottom:"12px"},children:k("memo","",y?.memo,"textarea")})]})]}),f.jsxs("div",{style:{padding:"15px 20px",borderTop:"1px solid #e0e0e0",backgroundColor:"#f9f9f9",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[f.jsx("button",{onClick:e,className:"btn-secondary",style:{padding:"8px 16px",fontSize:"13px"},children:""}),f.jsx("button",{onClick:()=>i(s),className:"btn-primary",style:{padding:"8px 16px",fontSize:"13px"},children:" "}),f.jsx("button",{onClick:()=>{confirm("  ?")&&o(s)},style:{padding:"8px 16px",fontSize:"13px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:""})]})]})},cb=s=>{const e=s.trim().split(`
`);if(e.length<2)throw new Error("CSV    .");const i=Sy(e[0]),a={createdAt:["","created_at","createdAt",""],buildingName:["","building_name","buildingName"],roomNumber:["","room_number","roomNumber"],propertyType:["","property_type","propertyType",""],category:["","category"],price:["","price",""],moveInDate:["","move_in_date","moveInDate",""],ownerName:["","owner_name","ownerName"],ownerPhone:["","owner_phone","ownerPhone",""],leaseInfo:["","lease_info","leaseInfo"],tenantPhone:["","tenant_phone","tenantPhone",""],memo:["","memo",""]},o={};if(Object.entries(a).forEach(([p,g])=>{const v=i.findIndex(y=>g.includes(y.trim()));v!==-1&&(o[p]=v)}),o.buildingName===void 0)throw new Error('  ""   .');const h=[];for(let p=1;p<e.length;p++){const g=e[p].trim();if(g)try{const v=Sy(g);let y=Qn(v,o.createdAt,""),b;if(y.trim()){const V=new Date(y.trim());b=V.toString()==="Invalid Date"?new Date().toISOString():V.toISOString()}else b=new Date().toISOString();const C={id:hb(),createdAt:b,buildingName:Qn(v,o.buildingName,""),roomNumber:Qn(v,o.roomNumber,""),propertyType:Qn(v,o.propertyType,""),category:Qn(v,o.category,""),price:parseInt(Qn(v,o.price,"0"),10)||0,moveInDate:Qn(v,o.moveInDate,""),ownerName:Qn(v,o.ownerName,""),ownerPhone:Qn(v,o.ownerPhone,""),leaseInfo:Qn(v,o.leaseInfo,""),tenantPhone:Qn(v,o.tenantPhone,""),memo:Qn(v,o.memo,"")};C.buildingName.trim()&&h.push(C)}catch(v){console.warn(`CSV  ${p+1}  :`,v.message)}}if(h.length===0)throw new Error("     .");return h},Sy=s=>{const e=[];let i="",a=!1;for(let o=0;o<s.length;o++){const h=s[o],p=s[o+1];h==='"'?a&&p==='"'?(i+='"',o++):a=!a:h===","&&!a?(e.push(i.trim()),i=""):i+=h}return e.push(i.trim()),e},Qn=(s,e,i)=>e===void 0||e===-1||s[e]===void 0?i:s[e].trim()||i,hb=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,fb=({onImport:s,onClose:e})=>{const i=pt.useRef(null),[a,o]=pt.useState(!1),[h,p]=pt.useState(""),[g,v]=pt.useState(null),y=async C=>{const V=C.target.files[0];if(V){p(""),o(!0),v(null);try{const L=await V.text(),q=cb(L);v({total:q.length,preview:q.slice(0,3),all:q})}catch(L){p(`  : ${L.message}`)}finally{o(!1)}}},b=async()=>{if(g){o(!0);try{await s(g.all),alert(`${g.total}   .`),e()}catch(C){p(` : ${C.message}`)}finally{o(!1)}}};return f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"modal-content",style:{maxWidth:"700px",maxHeight:"90vh"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:"  CSV "}),f.jsx("button",{onClick:e,className:"btn-close",children:""})]}),f.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"15px"},children:[f.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"12px",borderRadius:"4px",fontSize:"13px",color:"#1565c0"},children:[f.jsx("strong",{children:"CSV  :"}),f.jsx("br",{}),"    ( ): , , , , , , , , , , "]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"CSV  "}),f.jsx("input",{type:"file",ref:i,onChange:y,accept:".csv",disabled:a,style:{padding:"8px",border:"2px solid #ddd",borderRadius:"4px",width:"100%",cursor:"pointer"}})]}),h&&f.jsxs("div",{style:{backgroundColor:"#ffebee",padding:"12px",borderRadius:"4px",color:"#c62828",fontSize:"13px",border:"1px solid #ef5350"},children:[" ",h]}),g&&f.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px"},children:[f.jsxs("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#2196F3"},children:[" ",g.total,"    "]}),f.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"12px",maxHeight:"200px",overflowY:"auto"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""}),f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""}),f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""}),f.jsx("th",{style:{padding:"6px",textAlign:"left"},children:""})]})}),f.jsx("tbody",{children:g.preview.map((C,V)=>f.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[f.jsx("td",{style:{padding:"6px"},children:C.buildingName}),f.jsx("td",{style:{padding:"6px"},children:C.roomNumber||"-"}),f.jsx("td",{style:{padding:"6px"},children:C.propertyType}),f.jsx("td",{style:{padding:"6px",textAlign:"right"},children:C.price?`${C.price}`:"-"})]},V))})]})}),g.total>3&&f.jsxs("div",{style:{fontSize:"12px",color:"#999",fontStyle:"italic"},children:["...  ",g.total-3,""]})]}),a&&f.jsx("div",{style:{textAlign:"center",color:"#999"},children:" ..."})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{onClick:e,disabled:a,className:"btn-secondary",children:""}),f.jsx("button",{onClick:b,disabled:!g||a,className:"btn-primary",style:{opacity:!g||a?.6:1,cursor:!g||a?"not-allowed":"pointer"},children:a?" ...":" "})]})]})})},db=()=>{};var Ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=function(s){const e=[];let i=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},pb=function(s){const e=[];let i=0,a=0;for(;i<s.length;){const o=s[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const h=s[i++];e[a++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=s[i++],p=s[i++],g=s[i++],v=((o&7)<<18|(h&63)<<12|(p&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(v>>10)),e[a++]=String.fromCharCode(56320+(v&1023))}else{const h=s[i++],p=s[i++];e[a++]=String.fromCharCode((o&15)<<12|(h&63)<<6|p&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const h=s[o],p=o+1<s.length,g=p?s[o+1]:0,v=o+2<s.length,y=v?s[o+2]:0,b=h>>2,C=(h&3)<<4|g>>4;let V=(g&15)<<2|y>>6,L=y&63;v||(L=64,p||(V=64)),a.push(i[b],i[C],i[V],i[L])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(B0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):pb(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const h=i[s.charAt(o++)],g=o<s.length?i[s.charAt(o)]:0;++o;const y=o<s.length?i[s.charAt(o)]:64;++o;const C=o<s.length?i[s.charAt(o)]:64;if(++o,h==null||g==null||y==null||C==null)throw new mb;const V=h<<2|g>>4;if(a.push(V),y!==64){const L=g<<4&240|y>>2;if(a.push(L),C!==64){const q=y<<6&192|C;a.push(q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class mb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gb=function(s){const e=B0(s);return q0.encodeByteArray(e,!0)},ic=function(s){return gb(s).replace(/\./g,"")},yb=function(s){try{return q0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=()=>vb().__FIREBASE_DEFAULTS__,xb=()=>{if(typeof process>"u"||typeof Ay>"u")return;const s=Ay.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},bb=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&yb(s[1]);return e&&JSON.parse(e)},bd=()=>{try{return db()||_b()||xb()||bb()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Eb=s=>bd()?.emulatorHosts?.[s],H0=s=>{const e=Eb(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},F0=()=>bd()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,h=s.sub||s.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ic(JSON.stringify(i)),ic(JSON.stringify(p)),""].join(".")}const so={};function Sb(){const s={prod:[],emulator:[]};for(const e of Object.keys(so))so[e]?s.emulator.push(e):s.prod.push(e);return s}function Ab(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let wy=!1;function Q0(s,e){if(typeof window>"u"||typeof document>"u"||!xc(window.location.host)||so[s]===e||so[s]||wy)return;so[s]=e;function i(V){return`__firebase__banner__${V}`}const a="__firebase__banner",h=Sb().prod.length>0;function p(){const V=document.getElementById(a);V&&V.remove()}function g(V){V.style.display="flex",V.style.background="#7faaf0",V.style.position="fixed",V.style.bottom="5px",V.style.left="5px",V.style.padding=".5em",V.style.borderRadius="5px",V.style.alignItems="center"}function v(V,L){V.setAttribute("width","24"),V.setAttribute("id",L),V.setAttribute("height","24"),V.setAttribute("viewBox","0 0 24 24"),V.setAttribute("fill","none"),V.style.marginLeft="-6px"}function y(){const V=document.createElement("span");return V.style.cursor="pointer",V.style.marginLeft="16px",V.style.fontSize="24px",V.innerHTML=" &times;",V.onclick=()=>{wy=!0,p()},V}function b(V,L){V.setAttribute("id",L),V.innerText="Learn more",V.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",V.setAttribute("target","__blank"),V.style.paddingLeft="5px",V.style.textDecoration="underline"}function C(){const V=Ab(a),L=i("text"),q=document.getElementById(L)||document.createElement("span"),J=i("learnmore"),k=document.getElementById(J)||document.createElement("a"),H=i("preprendIcon"),rt=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(V.created){const at=V.element;g(at),b(k,J);const ft=y();v(rt,H),at.append(rt,q,k,ft),document.body.appendChild(at)}h?(q.innerText="Preview backend disconnected.",rt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(rt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cb(){const s=bd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rb(){return!Cb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Db(){try{return typeof indexedDB=="object"}catch{return!1}}function Nb(){return new Promise((s,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="FirebaseError";class qs extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=jb,Object.setPrototypeOf(this,qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K0.prototype.create)}}class K0{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],p=h?Ib(h,a):"Error",g=`${this.serviceName}: ${p} (${o}).`;return new qs(o,g,a)}}function Ib(s,e){return s.replace(Mb,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Mb=/\{\$([^}]+)}/g;function rc(s,e){if(s===e)return!0;const i=Object.keys(s),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const h=s[o],p=e[o];if(Cy(h)&&Cy(p)){if(!rc(h,p))return!1}else if(h!==p)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function Cy(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(s){return s&&s._delegate?s._delegate:s}class La{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new Tb;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kb(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});a.resolve(h)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,p]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);a===g&&p.resolve(o)}return o}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const h=this.instances.get(a);return h&&e(h,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Ob(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ob(s){return s===Vs?void 0:s}function kb(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new Vb(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(se||(se={}));const Ub={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},zb=se.INFO,Lb={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},Bb=(s,e,...i)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=Lb[e];if(o)console[o](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X0{constructor(e){this.name=e,this._logLevel=zb,this._logHandler=Bb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ub[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const qb=(s,e)=>e.some(i=>s instanceof i);let Ry,Dy;function Hb(){return Ry||(Ry=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fb(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $0=new WeakMap,Wf=new WeakMap,Z0=new WeakMap,qf=new WeakMap,Ed=new WeakMap;function Gb(s){const e=new Promise((i,a)=>{const o=()=>{s.removeEventListener("success",h),s.removeEventListener("error",p)},h=()=>{i(Lr(s.result)),o()},p=()=>{a(s.error),o()};s.addEventListener("success",h),s.addEventListener("error",p)});return e.then(i=>{i instanceof IDBCursor&&$0.set(i,s)}).catch(()=>{}),Ed.set(e,s),e}function Yb(s){if(Wf.has(s))return;const e=new Promise((i,a)=>{const o=()=>{s.removeEventListener("complete",h),s.removeEventListener("error",p),s.removeEventListener("abort",p)},h=()=>{i(),o()},p=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",h),s.addEventListener("error",p),s.addEventListener("abort",p)});Wf.set(s,e)}let Jf={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return Wf.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Z0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Lr(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Qb(s){Jf=s(Jf)}function Kb(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=s.call(Hf(this),e,...i);return Z0.set(a,e.sort?e.sort():[e]),Lr(a)}:Fb().includes(s)?function(...e){return s.apply(Hf(this),e),Lr($0.get(this))}:function(...e){return Lr(s.apply(Hf(this),e))}}function Xb(s){return typeof s=="function"?Kb(s):(s instanceof IDBTransaction&&Yb(s),qb(s,Hb())?new Proxy(s,Jf):s)}function Lr(s){if(s instanceof IDBRequest)return Gb(s);if(qf.has(s))return qf.get(s);const e=Xb(s);return e!==s&&(qf.set(s,e),Ed.set(e,s)),e}const Hf=s=>Ed.get(s);function $b(s,e,{blocked:i,upgrade:a,blocking:o,terminated:h}={}){const p=indexedDB.open(s,e),g=Lr(p);return a&&p.addEventListener("upgradeneeded",v=>{a(Lr(p.result),v.oldVersion,v.newVersion,Lr(p.transaction),v)}),i&&p.addEventListener("blocked",v=>i(v.oldVersion,v.newVersion,v)),g.then(v=>{h&&v.addEventListener("close",()=>h()),o&&v.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const Zb=["get","getKey","getAll","getAllKeys","count"],Wb=["put","add","delete","clear"],Ff=new Map;function Ny(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ff.get(e))return Ff.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=Wb.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||Zb.includes(i)))return;const h=async function(p,...g){const v=this.transaction(p,o?"readwrite":"readonly");let y=v.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[i](...g),o&&v.done]))[0]};return Ff.set(e,h),h}Qb(s=>({...s,get:(e,i,a)=>Ny(e,i)||s.get(e,i,a),has:(e,i)=>!!Ny(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(tE(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function tE(s){return s.getComponent()?.type==="VERSION"}const td="@firebase/app",jy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new X0("@firebase/app"),eE="@firebase/app-compat",nE="@firebase/analytics-compat",iE="@firebase/analytics",rE="@firebase/app-check-compat",sE="@firebase/app-check",aE="@firebase/auth",lE="@firebase/auth-compat",oE="@firebase/database",uE="@firebase/data-connect",cE="@firebase/database-compat",hE="@firebase/functions",fE="@firebase/functions-compat",dE="@firebase/installations",pE="@firebase/installations-compat",mE="@firebase/messaging",gE="@firebase/messaging-compat",yE="@firebase/performance",vE="@firebase/performance-compat",_E="@firebase/remote-config",xE="@firebase/remote-config-compat",bE="@firebase/storage",EE="@firebase/storage-compat",TE="@firebase/firestore",SE="@firebase/ai",AE="@firebase/firestore-compat",wE="firebase",CE="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]",RE={[td]:"fire-core",[eE]:"fire-core-compat",[iE]:"fire-analytics",[nE]:"fire-analytics-compat",[sE]:"fire-app-check",[rE]:"fire-app-check-compat",[aE]:"fire-auth",[lE]:"fire-auth-compat",[oE]:"fire-rtdb",[uE]:"fire-data-connect",[cE]:"fire-rtdb-compat",[hE]:"fire-fn",[fE]:"fire-fn-compat",[dE]:"fire-iid",[pE]:"fire-iid-compat",[mE]:"fire-fcm",[gE]:"fire-fcm-compat",[yE]:"fire-perf",[vE]:"fire-perf-compat",[_E]:"fire-rc",[xE]:"fire-rc-compat",[bE]:"fire-gcs",[EE]:"fire-gcs-compat",[TE]:"fire-fst",[AE]:"fire-fst-compat",[SE]:"fire-vertex","fire-js":"fire-js",[wE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map,DE=new Map,nd=new Map;function Iy(s,e){try{s.container.addComponent(e)}catch(i){er.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function co(s){const e=s.name;if(nd.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;nd.set(e,s);for(const i of sc.values())Iy(i,s);for(const i of DE.values())Iy(i,s);return!0}function W0(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function J0(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new K0("app","Firebase",NE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new La("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=CE;function ev(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const a={name:ed,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Br.create("bad-app-name",{appName:String(o)});if(i||(i=F0()),!i)throw Br.create("no-options");const h=sc.get(o);if(h){if(rc(i,h.options)&&rc(a,h.config))return h;throw Br.create("duplicate-app",{appName:o})}const p=new Pb(o);for(const v of nd.values())p.addComponent(v);const g=new jE(i,a,p);return sc.set(o,g),g}function nv(s=ed){const e=sc.get(s);if(!e&&s===ed&&F0())return ev();if(!e)throw Br.create("no-app",{appName:s});return e}function qr(s,e,i){let a=RE[s]??s;i&&(a+=`-${i}`);const o=a.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const p=[`Unable to register library "${a}" with version "${e}":`];o&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(p.join(" "));return}co(new La(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="firebase-heartbeat-database",ME=1,ho="firebase-heartbeat-store";let Gf=null;function iv(){return Gf||(Gf=$b(IE,ME,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ho)}catch(i){console.warn(i)}}}}).catch(s=>{throw Br.create("idb-open",{originalErrorMessage:s.message})})),Gf}async function VE(s){try{const i=(await iv()).transaction(ho),a=await i.objectStore(ho).get(rv(s));return await i.done,a}catch(e){if(e instanceof qs)er.warn(e.message);else{const i=Br.create("idb-get",{originalErrorMessage:e?.message});er.warn(i.message)}}}async function My(s,e){try{const a=(await iv()).transaction(ho,"readwrite");await a.objectStore(ho).put(e,rv(s)),await a.done}catch(i){if(i instanceof qs)er.warn(i.message);else{const a=Br.create("idb-set",{originalErrorMessage:i?.message});er.warn(a.message)}}}function rv(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=1024,kE=30;class PE{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new zE(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Vy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>kE){const o=LE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vy(),{heartbeatsToSend:i,unsentEntries:a}=UE(this._heartbeatsCache.heartbeats),o=ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return er.warn(e),""}}}function Vy(){return new Date().toISOString().substring(0,10)}function UE(s,e=OE){const i=[];let a=s.slice();for(const o of s){const h=i.find(p=>p.agent===o.agent);if(h){if(h.dates.push(o.date),Oy(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Oy(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class zE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Db()?Nb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await VE(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Oy(s){return ic(JSON.stringify({version:2,heartbeats:s})).length}function LE(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(s){co(new La("platform-logger",e=>new Jb(e),"PRIVATE")),co(new La("heartbeat",e=>new PE(e),"PRIVATE")),qr(td,jy,s),qr(td,jy,"esm2020"),qr("fire-js","")}BE("");var ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,sv;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function T(){}T.prototype=w.prototype,N.F=w.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(j,D,R){for(var S=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)S[mt-2]=arguments[mt];return w.prototype[D].apply(j,S)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,w,T){T||(T=0);const j=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)j[D]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(D=0;D<16;++D)j[D]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=N.g[0],T=N.g[1],D=N.g[2];let R=N.g[3],S;S=w+(R^T&(D^R))+j[0]+3614090360&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[1]+3905402710&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[2]+606105819&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[3]+3250441966&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(R^T&(D^R))+j[4]+4118548399&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[5]+1200080426&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[6]+2821735955&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[7]+4249261313&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(R^T&(D^R))+j[8]+1770035416&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[9]+2336552879&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[10]+4294925233&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[11]+2304563134&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(R^T&(D^R))+j[12]+1804603682&4294967295,w=T+(S<<7&4294967295|S>>>25),S=R+(D^w&(T^D))+j[13]+4254626195&4294967295,R=w+(S<<12&4294967295|S>>>20),S=D+(T^R&(w^T))+j[14]+2792965006&4294967295,D=R+(S<<17&4294967295|S>>>15),S=T+(w^D&(R^w))+j[15]+1236535329&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(D^R&(T^D))+j[1]+4129170786&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[6]+3225465664&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[11]+643717713&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[0]+3921069994&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^R&(T^D))+j[5]+3593408605&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[10]+38016083&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[15]+3634488961&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[4]+3889429448&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^R&(T^D))+j[9]+568446438&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[14]+3275163606&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[3]+4107603335&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[8]+1163531501&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^R&(T^D))+j[13]+2850285829&4294967295,w=T+(S<<5&4294967295|S>>>27),S=R+(T^D&(w^T))+j[2]+4243563512&4294967295,R=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(R^w))+j[7]+1735328473&4294967295,D=R+(S<<14&4294967295|S>>>18),S=T+(R^w&(D^R))+j[12]+2368359562&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(T^D^R)+j[5]+4294588738&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[8]+2272392833&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[11]+1839030562&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[14]+4259657740&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^R)+j[1]+2763975236&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[4]+1272893353&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[7]+4139469664&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[10]+3200236656&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^R)+j[13]+681279174&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[0]+3936430074&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[3]+3572445317&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[6]+76029189&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^R)+j[9]+3654602809&4294967295,w=T+(S<<4&4294967295|S>>>28),S=R+(w^T^D)+j[12]+3873151461&4294967295,R=w+(S<<11&4294967295|S>>>21),S=D+(R^w^T)+j[15]+530742520&4294967295,D=R+(S<<16&4294967295|S>>>16),S=T+(D^R^w)+j[2]+3299628645&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(D^(T|~R))+j[0]+4096336452&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[7]+1126891415&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[14]+2878612391&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[5]+4237533241&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~R))+j[12]+1700485571&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[3]+2399980690&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[10]+4293915773&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[1]+2240044497&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~R))+j[8]+1873313359&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[15]+4264355552&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[6]+2734768916&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[13]+1309151649&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~R))+j[4]+4149444226&4294967295,w=T+(S<<6&4294967295|S>>>26),S=R+(T^(w|~D))+j[11]+3174756917&4294967295,R=w+(S<<10&4294967295|S>>>22),S=D+(w^(R|~T))+j[2]+718787259&4294967295,D=R+(S<<15&4294967295|S>>>17),S=T+(R^(D|~w))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+R&4294967295}a.prototype.v=function(N,w){w===void 0&&(w=N.length);const T=w-this.blockSize,j=this.C;let D=this.h,R=0;for(;R<w;){if(D==0)for(;R<=T;)o(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<w;)if(j[D++]=N.charCodeAt(R++),D==this.blockSize){o(this,j),D=0;break}}else for(;R<w;)if(j[D++]=N[R++],D==this.blockSize){o(this,j),D=0;break}}this.h=D,this.o+=w},a.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,T=0;T<4;++T)for(let j=0;j<32;j+=8)N[w++]=this.g[T]>>>j&255;return N};function h(N,w){var T=g;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=w(N)}function p(N,w){this.h=w;const T=[];let j=!0;for(let D=N.length-1;D>=0;D--){const R=N[D]|0;j&&R==w||(T[D]=R,j=!1)}this.g=T}var g={};function v(N){return-128<=N&&N<128?h(N,function(w){return new p([w|0],w<0?-1:0)}):new p([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return C;if(N<0)return k(y(-N));const w=[];let T=1;for(let j=0;N>=T;j++)w[j]=N/T|0,T*=4294967296;return new p(w,0)}function b(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return k(b(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=y(Math.pow(w,8));let j=C;for(let R=0;R<N.length;R+=8){var D=Math.min(8,N.length-R);const S=parseInt(N.substring(R,R+D),w);D<8?(D=y(Math.pow(w,D)),j=j.j(D).add(y(S))):(j=j.j(T),j=j.add(y(S)))}return j}var C=v(0),V=v(1),L=v(16777216);s=p.prototype,s.m=function(){if(J(this))return-k(this).m();let N=0,w=1;for(let T=0;T<this.g.length;T++){const j=this.i(T);N+=(j>=0?j:4294967296+j)*w,w*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(J(this))return"-"+k(this).toString(N);const w=y(Math.pow(N,6));var T=this;let j="";for(;;){const D=ft(T,w).g;T=H(T,D.j(w));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=D,q(T))return R+j;for(;R.length<6;)R="0"+R;j=R+j}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function J(N){return N.h==-1}s.l=function(N){return N=H(this,N),J(N)?-1:q(N)?0:1};function k(N){const w=N.g.length,T=[];for(let j=0;j<w;j++)T[j]=~N.g[j];return new p(T,~N.h).add(V)}s.abs=function(){return J(this)?k(this):this},s.add=function(N){const w=Math.max(this.g.length,N.g.length),T=[];let j=0;for(let D=0;D<=w;D++){let R=j+(this.i(D)&65535)+(N.i(D)&65535),S=(R>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);j=S>>>16,R&=65535,S&=65535,T[D]=S<<16|R}return new p(T,T[T.length-1]&-2147483648?-1:0)};function H(N,w){return N.add(k(w))}s.j=function(N){if(q(this)||q(N))return C;if(J(this))return J(N)?k(this).j(k(N)):k(k(this).j(N));if(J(N))return k(this.j(k(N)));if(this.l(L)<0&&N.l(L)<0)return y(this.m()*N.m());const w=this.g.length+N.g.length,T=[];for(var j=0;j<2*w;j++)T[j]=0;for(j=0;j<this.g.length;j++)for(let D=0;D<N.g.length;D++){const R=this.i(j)>>>16,S=this.i(j)&65535,mt=N.i(D)>>>16,xt=N.i(D)&65535;T[2*j+2*D]+=S*xt,rt(T,2*j+2*D),T[2*j+2*D+1]+=R*xt,rt(T,2*j+2*D+1),T[2*j+2*D+1]+=S*mt,rt(T,2*j+2*D+1),T[2*j+2*D+2]+=R*mt,rt(T,2*j+2*D+2)}for(N=0;N<w;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=w;N<2*w;N++)T[N]=0;return new p(T,0)};function rt(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function at(N,w){this.g=N,this.h=w}function ft(N,w){if(q(w))throw Error("division by zero");if(q(N))return new at(C,C);if(J(N))return w=ft(k(N),w),new at(k(w.g),k(w.h));if(J(w))return w=ft(N,k(w)),new at(k(w.g),w.h);if(N.g.length>30){if(J(N)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var T=V,j=w;j.l(N)<=0;)T=et(T),j=et(j);var D=K(T,1),R=K(j,1);for(j=K(j,2),T=K(T,2);!q(j);){var S=R.add(j);S.l(N)<=0&&(D=D.add(T),R=S),j=K(j,1),T=K(T,1)}return w=H(N,D.j(w)),new at(D,w)}for(D=C;N.l(w)>=0;){for(T=Math.max(1,Math.floor(N.m()/w.m())),j=Math.ceil(Math.log(T)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),R=y(T),S=R.j(w);J(S)||S.l(N)>0;)T-=j,R=y(T),S=R.j(w);q(R)&&(R=V),D=D.add(R),N=H(N,S)}return new at(D,N)}s.B=function(N){return ft(this,N).h},s.and=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let j=0;j<w;j++)T[j]=this.i(j)&N.i(j);return new p(T,this.h&N.h)},s.or=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let j=0;j<w;j++)T[j]=this.i(j)|N.i(j);return new p(T,this.h|N.h)},s.xor=function(N){const w=Math.max(this.g.length,N.g.length),T=[];for(let j=0;j<w;j++)T[j]=this.i(j)^N.i(j);return new p(T,this.h^N.h)};function et(N){const w=N.g.length+1,T=[];for(let j=0;j<w;j++)T[j]=N.i(j)<<1|N.i(j-1)>>>31;return new p(T,N.h)}function K(N,w){const T=w>>5;w%=32;const j=N.g.length-T,D=[];for(let R=0;R<j;R++)D[R]=w>0?N.i(R+T)>>>w|N.i(R+T+1)<<32-w:N.i(R+T);return new p(D,N.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,sv=a,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=y,p.fromString=b,Hr=p}).apply(typeof ky<"u"?ky:typeof self<"u"?self:typeof window<"u"?window:{});var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var av,eo,lv,$u,id,ov,uv,cv;(function(){var s,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fu=="object"&&Fu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var _=a;u=u.split(".");for(var A=0;A<u.length-1;A++){var Y=u[A];if(!(Y in _))break t;_=_[Y]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&_.push([A,m[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=v,y.apply(null,arguments)}function b(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function C(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(A,Y,tt){for(var _t=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)_t[Ft-2]=arguments[Ft];return m.prototype[Y].apply(A,_t)}}var V=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const m=u.length;if(m>0){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function q(u,m){for(let A=1;A<arguments.length;A++){const Y=arguments[A];var _=typeof Y;if(_=_!="object"?_:Y?Array.isArray(Y)?"array":_:"null",_=="array"||_=="object"&&typeof Y.length=="number"){_=u.length||0;const tt=Y.length||0;u.length=_+tt;for(let _t=0;_t<tt;_t++)u[_+_t]=Y[_t]}else u.push(Y)}}class J{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(u){p.setTimeout(()=>{throw u},0)}function H(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class rt{constructor(){this.h=this.g=null}add(m,_){const A=at.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var at=new J(()=>new ft,u=>u.reset());class ft{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let et,K=!1,N=new rt,w=()=>{const u=Promise.resolve(void 0);et=()=>{u.then(T)}};function T(){for(var u;u=H();){try{u.h.call(u.g)}catch(_){k(_)}var m=at;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}K=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function S(u){return/^[\s\xa0]*$/.test(u)}function mt(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}C(mt,D),mt.prototype.init=function(u,m){const _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&mt.Z.h.call(this)},mt.prototype.h=function(){mt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),O=0;function nt(u,m,_,A,Y){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=Y,this.key=++O,this.da=this.fa=!1}function ht(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function I(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function $(u){const m={};for(const _ in u)m[_]=u[_];return m}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(u,m){let _,A;for(let Y=1;Y<arguments.length;Y++){A=arguments[Y];for(_ in A)u[_]=A[_];for(let tt=0;tt<z.length;tt++)_=z[tt],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function W(u){this.src=u,this.g={},this.h=0}W.prototype.add=function(u,m,_,A,Y){const tt=u.toString();u=this.g[tt],u||(u=this.g[tt]=[],this.h++);const _t=G(u,m,A,Y);return _t>-1?(m=u[_t],_||(m.fa=!1)):(m=new nt(m,this.src,tt,!!A,Y),m.fa=_,u.push(m)),m};function ot(u,m){const _=m.type;if(_ in u.g){var A=u.g[_],Y=Array.prototype.indexOf.call(A,m,void 0),tt;(tt=Y>=0)&&Array.prototype.splice.call(A,Y,1),tt&&(ht(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function G(u,m,_,A){for(let Y=0;Y<u.length;++Y){const tt=u[Y];if(!tt.da&&tt.listener==m&&tt.capture==!!_&&tt.ha==A)return Y}return-1}var yt="closure_lm_"+(Math.random()*1e6|0),gt={};function Ct(u,m,_,A,Y){if(Array.isArray(m)){for(let tt=0;tt<m.length;tt++)Ct(u,m[tt],_,A,Y);return null}return _=oi(_),u&&u[xt]?u.J(m,_,g(A)?!!A.capture:!1,Y):Qt(u,m,_,!1,A,Y)}function Qt(u,m,_,A,Y,tt){if(!m)throw Error("Invalid event type");const _t=g(Y)?!!Y.capture:!!Y;let Ft=En(u);if(Ft||(u[yt]=Ft=new W(u)),_=Ft.add(m,_,A,_t,tt),_.proxy)return _;if(A=te(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)R||(Y=_t),Y===void 0&&(Y=!1),u.addEventListener(m.toString(),A,Y);else if(u.attachEvent)u.attachEvent(oe(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function te(){function u(_){return m.call(u.src,u.listener,_)}const m=Bt;return u}function ze(u,m,_,A,Y){if(Array.isArray(m))for(var tt=0;tt<m.length;tt++)ze(u,m[tt],_,A,Y);else A=g(A)?!!A.capture:!!A,_=oi(_),u&&u[xt]?(u=u.i,tt=String(m).toString(),tt in u.g&&(m=u.g[tt],_=G(m,_,A,Y),_>-1&&(ht(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[tt],u.h--)))):u&&(u=En(u))&&(m=u.g[m.toString()],u=-1,m&&(u=G(m,_,A,Y)),(_=u>-1?m[u]:null)&&Ge(_))}function Ge(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[xt])ot(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(oe(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=En(m))?(ot(_,u),_.h==0&&(_.src=null,m[yt]=null)):ht(u)}}}function oe(u){return u in gt?gt[u]:gt[u]="on"+u}function Bt(u,m){if(u.da)u=!0;else{m=new mt(m,this);const _=u.listener,A=u.ha||u.src;u.fa&&Ge(u),u=_.call(A,m)}return u}function En(u){return u=u[yt],u instanceof W?u:null}var je="__closure_events_fn_"+(Math.random()*1e9>>>0);function oi(u){return typeof u=="function"?u:(u[je]||(u[je]=function(m){return u.handleEvent(m)}),u[je])}function ve(){j.call(this),this.i=new W(this),this.M=this,this.G=null}C(ve,j),ve.prototype[xt]=!0,ve.prototype.removeEventListener=function(u,m,_,A){ze(this,u,m,_,A)};function Ae(u,m){var _,A=u.G;if(A)for(_=[];A;A=A.G)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var Y=m;m=new D(A,u),U(m,Y)}Y=!0;let tt,_t;if(_)for(_t=_.length-1;_t>=0;_t--)tt=m.g=_[_t],Y=Tn(tt,A,!0,m)&&Y;if(tt=m.g=u,Y=Tn(tt,A,!0,m)&&Y,Y=Tn(tt,A,!1,m)&&Y,_)for(_t=0;_t<_.length;_t++)tt=m.g=_[_t],Y=Tn(tt,A,!1,m)&&Y}ve.prototype.N=function(){if(ve.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let A=0;A<_.length;A++)ht(_[A]);delete u.g[m],u.h--}}this.G=null},ve.prototype.J=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},ve.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function Tn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let Y=!0;for(let tt=0;tt<m.length;++tt){const _t=m[tt];if(_t&&!_t.da&&_t.capture==_){const Ft=_t.listener,be=_t.ha||_t.src;_t.fa&&ot(u.i,_t),Y=Ft.call(be,A)!==!1&&Y}}return Y&&!A.defaultPrevented}function Zr(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:p.setTimeout(u,m||0)}function bt(u){u.g=Zr(()=>{u.g=null,u.i&&(u.i=!1,bt(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class wt extends j{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:bt(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tt(u){j.call(this),this.h=u,this.g={}}C(Tt,j);var Nt=[];function it(u){vt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Ge(m)},u),u.g={}}Tt.prototype.N=function(){Tt.Z.N.call(this),it(this)},Tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vt=p.JSON.stringify,jt=p.JSON.parse,$t=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Et(){}function Pt(){}var qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){D.call(this,"d")}C(Zt,D);function It(){D.call(this,"c")}C(It,D);var zt={},Sn=null;function rr(){return Sn=Sn||new ve}zt.Ia="serverreachability";function Wr(u){D.call(this,zt.Ia,u)}C(Wr,D);function ui(u){const m=rr();Ae(m,new Wr(m))}zt.STAT_EVENT="statevent";function sr(u,m){D.call(this,zt.STAT_EVENT,u),this.stat=m}C(sr,D);function Ie(u){const m=rr();Ae(m,new sr(m,u))}zt.Ja="timingevent";function Ro(u,m){D.call(this,zt.Ja,u),this.size=m}C(Ro,D);function ar(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function lr(){this.g=!0}lr.prototype.ua=function(){this.g=!1};function Za(u,m,_,A,Y,tt){u.info(function(){if(u.g)if(tt){var _t="",Ft=tt.split("&");for(let ce=0;ce<Ft.length;ce++){var be=Ft[ce].split("=");if(be.length>1){const Oe=be[0];be=be[1];const Dn=Oe.split("_");_t=Dn.length>=2&&Dn[1]=="type"?_t+(Oe+"="+be+"&"):_t+(Oe+"=redacted&")}}}else _t=null;else _t=tt;return"XMLHTTP REQ ("+A+") [attempt "+Y+"]: "+m+`
`+_+`
`+_t})}function Wa(u,m,_,A,Y,tt,_t){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Y+"]: "+m+`
`+_+`
`+tt+" "+_t})}function Oi(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ci(u,_)+(A?" "+A:"")})}function Lc(u,m){u.info(function(){return"TIMEOUT: "+m})}lr.prototype.info=function(){};function ci(u,m){if(!u.g)return m;if(!m)return null;try{const tt=JSON.parse(m);if(tt){for(u=0;u<tt.length;u++)if(Array.isArray(tt[u])){var _=tt[u];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var Y=A[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let _t=1;_t<A.length;_t++)A[_t]=""}}}}return Vt(tt)}catch{return m}}var Me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ki;function Jr(){}C(Jr,Et),Jr.prototype.g=function(){return new XMLHttpRequest},ki=new Jr;function ts(u){return encodeURIComponent(String(u))}function Bc(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Zn(u,m,_,A){this.j=u,this.i=m,this.l=_,this.S=A||1,this.V=new Tt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new or}function or(){this.i=null,this.g="",this.h=!1}var Qs={},hi={};function fi(u,m,_){u.M=1,u.A=Ui(we(m)),u.u=_,u.R=!0,ur(u,null)}function ur(u,m){u.F=Date.now(),es(u),u.B=we(u.A);var _=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Io(_.i,"t",A),u.C=0,_=u.j.L,u.h=new or,u.g=ia(u.j,_?m:null,!u.u),u.P>0&&(u.O=new wt(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,A=u.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Nt[0]=Y.toString()),Y=Nt);for(let tt=0;tt<Y.length;tt++){const _t=Ct(_,Y[tt],A||m.handleEvent,!1,m.h||m);if(!_t)break;m.g[_t.key]=_t}m=u.J?$(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),ui(),Za(u.i,u.v,u.B,u.l,u.S,u.u)}Zn.prototype.ba=function(u){u=u.target;const m=this.O;m&&hn(u)==3?m.j():this.Y(u)},Zn.prototype.Y=function(u){try{if(u==this.g)t:{const Ft=hn(this.g),be=this.g.ya(),ce=this.g.ca();if(!(Ft<3)&&(Ft!=3||this.g&&(this.h.h||this.g.la()||fs(this.g)))){this.K||Ft!=4||be==7||(be==8||ce<=0?ui(3):ui(2)),pi(this);var m=this.g.ca();this.X=m;var _=cr(this);if(this.o=m==200,Wa(this.i,this.v,this.B,this.l,this.S,Ft,m),this.o){if(this.U&&!this.L){e:{if(this.g){var A,Y=this.g;if((A=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(A)){var tt=A;break e}}tt=null}if(u=tt)Oi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ks(this,u);else{this.o=!1,this.m=3,Ie(12),mi(this),ns(this);break t}}if(this.R){u=!0;let Oe;for(;!this.K&&this.C<_.length;)if(Oe=Do(this,_),Oe==hi){Ft==4&&(this.m=4,Ie(14),u=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==Qs){this.m=4,Ie(15),Oi(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Oi(this.i,this.l,Oe,null),Ks(this,Oe);if(Ve(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||_.length!=0||this.h.h||(this.m=1,Ie(16),u=!1),this.o=this.o&&u,!u)Oi(this.i,this.l,_,"[Invalid Chunked Response]"),mi(this),ns(this);else if(_.length>0&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.aa&&!_t.P&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ol(_t),_t.P=!0,Ie(11))}}else Oi(this.i,this.l,_,null),Ks(this,_);Ft==4&&mi(this),this.o&&!this.K&&(Ft==4?ul(this.j,this):(this.o=!1,es(this)))}else ds(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),mi(this),ns(this)}}}catch{}finally{}};function cr(u){if(!Ve(u))return u.g.la();const m=fs(u.g);if(m==="")return"";let _="";const A=m.length,Y=hn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return mi(u),ns(u),"";u.h.i=new p.TextDecoder}for(let tt=0;tt<A;tt++)u.h.h=!0,_+=u.h.i.decode(m[tt],{stream:!(Y&&tt==A-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Ve(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Do(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?hi:(_=Number(m.substring(_,A)),isNaN(_)?Qs:(A+=1,A+_>m.length?hi:(m=m.slice(A,A+_),u.C=A+_,m)))}Zn.prototype.cancel=function(){this.K=!0,mi(this)};function es(u){u.T=Date.now()+u.H,di(u,u.H)}function di(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ar(y(u.aa,u),m)}function pi(u){u.D&&(p.clearTimeout(u.D),u.D=null)}Zn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Lc(this.i,this.B),this.M!=2&&(ui(),Ie(17)),mi(this),this.m=2,ns(this)):di(this,this.T-u)};function ns(u){u.j.I==0||u.K||ul(u.j,u)}function mi(u){pi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,it(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ks(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ss(_.h,u))){if(!u.L&&ss(_.h,u)&&_.I==3){try{var A=_.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Y=A;if(Y[0]==0){t:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)na(_),gi(_);else break t;ll(_),Ie(18)}}else _.xa=Y[1],0<_.xa-_.K&&Y[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ar(y(_.Va,_),6e3));Pn(_.h)<=1&&_.ta&&(_.ta=void 0)}else Bi(_,11)}else if((u.L||_.g==u)&&na(_),!S(m))for(Y=_.Ba.g.parse(m),m=0;m<Y.length;m++){let ce=Y[m];const Oe=ce[0];if(!(Oe<=_.K))if(_.K=Oe,ce=ce[1],_.I==2)if(ce[0]=="c"){_.M=ce[1],_.ba=ce[2];const Dn=ce[3];Dn!=null&&(_.ka=Dn,_.j.info("VER="+_.ka));const yi=ce[4];yi!=null&&(_.za=yi,_.j.info("SVER="+_.za));const ti=ce[5];ti!=null&&typeof ti=="number"&&ti>0&&(A=1.5*ti,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const ei=u.g;if(ei){const ni=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var tt=A.h;tt.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(Xs(tt,tt.h),tt.h=null))}if(A.G){const hl=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(A.wa=hl,de(A.J,A.G,hl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var _t=u;if(A.na=Bo(A,A.L?A.ba:null,A.W),_t.L){Pi(A.h,_t);var Ft=_t,be=A.O;be&&(Ft.H=be),Ft.D&&(pi(Ft),es(Ft)),A.g=_t}else Po(A);_.i.length>0&&ys(_)}else ce[0]!="stop"&&ce[0]!="close"||Bi(_,7);else _.I==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Bi(_,7):ms(_):ce[0]!="noop"&&_.l&&_.l.qa(ce),_.A=0)}}ui(4)}catch{}}var qc=class{constructor(u,m){this.g=u,this.map=m}};function is(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pn(u){return u.h?1:u.g?u.g.size:0}function ss(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Xs(u,m){u.g?u.g.add(m):u.h=m}function Pi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}is.prototype.cancel=function(){if(this.i=$s(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $s(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return L(u.i)}var Zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hc(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const A=u[_].indexOf("=");let Y,tt=null;A>=0?(Y=u[_].substring(0,A),tt=u[_].substring(A+1)):Y=u[_],m(Y,tt?decodeURIComponent(tt.replace(/\+/g," ")):"")}}}function Wn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Wn?(this.l=u.l,hr(this,u.j),this.o=u.o,this.g=u.g,as(this,u.u),this.h=u.h,fr(this,Mo(u.i)),this.m=u.m):u&&(m=String(u).match(Zs))?(this.l=!1,hr(this,m[1]||"",!0),this.o=ls(m[2]||""),this.g=ls(m[3]||"",!0),as(this,m[4]),this.h=ls(m[5]||"",!0),fr(this,m[6]||"",!0),this.m=ls(m[7]||"")):(this.l=!1,this.i=new Un(null,this.l))}Wn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(We(m,tl,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(We(m,tl,!0),"@"),u.push(ts(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(We(_,_.charAt(0)=="/"?dr:el,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",We(_,jo)),u.join("")},Wn.prototype.resolve=function(u){const m=we(this);let _=!!u.j;_?hr(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var A=u.h;if(_)as(m,u.u);else if(_=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var Y=m.h.lastIndexOf("/");Y!=-1&&(A=m.h.slice(0,Y+1)+A)}if(Y=A,Y==".."||Y==".")A="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){A=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const tt=[];for(let _t=0;_t<Y.length;){const Ft=Y[_t++];Ft=="."?A&&_t==Y.length&&tt.push(""):Ft==".."?((tt.length>1||tt.length==1&&tt[0]!="")&&tt.pop(),A&&_t==Y.length&&tt.push("")):(tt.push(Ft),A=!0)}A=tt.join("/")}else A=Y}return _?m.h=A:_=u.i.toString()!=="",_?fr(m,Mo(u.i)):_=!!u.m,_&&(m.m=u.m),m};function we(u){return new Wn(u)}function hr(u,m,_){u.j=_?ls(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function as(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function fr(u,m,_){m instanceof Un?(u.i=m,rl(u.i,u.l)):(_||(m=We(m,No)),u.i=new Un(m,u.l))}function de(u,m,_){u.i.set(m,_)}function Ui(u){return de(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ls(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function We(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ja),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ja(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var tl=/[#\/\?@]/g,el=/[#\?:]/g,dr=/[#\?]/g,No=/[#\?@]/g,jo=/#/g;function Un(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function zi(u){u.g||(u.g=new Map,u.h=0,u.i&&Hc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}s=Un.prototype,s.add=function(u,m){zi(this),this.i=null,u=Jn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function nl(u,m){zi(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function il(u,m){return zi(u),m=Jn(u,m),u.g.has(m)}s.forEach=function(u,m){zi(this),this.g.forEach(function(_,A){_.forEach(function(Y){u.call(m,Y,A,this)},this)},this)};function Ws(u,m){zi(u);let _=[];if(typeof m=="string")il(u,m)&&(_=_.concat(u.g.get(Jn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}s.set=function(u,m){return zi(this),this.i=null,u=Jn(this,u),il(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=Ws(this,u),u.length>0?String(u[0]):m):m};function Io(u,m,_){nl(u,m),_.length>0&&(u.i=null,u.g.set(Jn(u,m),L(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var _=m[A];const Y=ts(_);_=Ws(this,_);for(let tt=0;tt<_.length;tt++){let _t=Y;_[tt]!==""&&(_t+="="+ts(_[tt])),u.push(_t)}}return this.i=u.join("&")};function Mo(u){const m=new Un;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function rl(u,m){m&&!u.j&&(zi(u),u.i=null,u.g.forEach(function(_,A){const Y=A.toLowerCase();A!=Y&&(nl(this,A),Io(this,Y,_))},u)),u.j=m}function sl(u,m){const _=new lr;if(p.Image){const A=new Image;A.onload=b(yn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=b(yn,_,"TestLoadImage: error",!1,m,A),A.onabort=b(yn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=b(yn,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function pr(u,m){const _=new lr,A=new AbortController,Y=setTimeout(()=>{A.abort(),yn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(tt=>{clearTimeout(Y),tt.ok?yn(_,"TestPingServer: ok",!0,m):yn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(Y),yn(_,"TestPingServer: error",!1,m)})}function yn(u,m,_,A,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),A(_)}catch{}}function Vo(){this.g=new $t}function os(u){this.i=u.Sb||null,this.h=u.ab||!1}C(os,Et),os.prototype.g=function(){return new us(this.i,this.h)};function us(u,m){ve.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(us,ve),s=us.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Li(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||p).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vn(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function mr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?vn(this):Li(this),this.readyState==3&&mr(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,vn(this))},s.Na=function(u){this.g&&(this.response=u,vn(this))},s.ga=function(){this.g&&vn(this)};function vn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Li(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Li(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gr(u){let m="";return vt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function zn(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=gr(_),typeof u=="string"?_!=null&&ts(_):de(u,m,_))}function _e(u){ve.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(_e,ve);var Js=/^https?$/i,Oo=["POST","PUT"];s=_e.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ki.g(),this.g.onreadystatechange=V(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(tt){cs(this,tt);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Y in A)_.set(Y,A[Y]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const tt of A.keys())_.set(tt,A.get(tt));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(tt=>tt.toLowerCase()=="content-type"),Y=p.FormData&&u instanceof p.FormData,!(Array.prototype.indexOf.call(Oo,m,void 0)>=0)||A||Y||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,_t]of _)this.g.setRequestHeader(tt,_t);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(tt){cs(this,tt)}};function cs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,hs(u),Ye(u)}function hs(u){u.A||(u.A=!0,Ae(u,"complete"),Ae(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ae(this,"complete"),Ae(this,"abort"),Ye(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ye(this,!0)),_e.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?al(this):this.Xa())},s.Xa=function(){al(this)};function al(u){if(u.h&&typeof h<"u"){if(u.v&&hn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ae(u,"readystatechange"),hn(u)==4){u.h=!1;try{const tt=u.ca();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=tt===0){let _t=String(u.D).match(Zs)[1]||null;!_t&&p.self&&p.self.location&&(_t=p.self.location.protocol.slice(0,-1)),A=!Js.test(_t?_t.toLowerCase():"")}_=A}if(_)Ae(u,"complete"),Ae(u,"success");else{u.o=6;try{var Y=hn(u)>2?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.ca()+"]",hs(u)}}finally{Ye(u)}}}}function Ye(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||Ae(u,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function hn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return hn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),jt(m)}};function fs(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ds(u){const m={};u=(u.g&&hn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(S(u[A]))continue;var _=Bc(u[A]);const Y=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const tt=m[Y]||[];m[Y]=tt,tt.push(_)}I(m,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ta(u){this.za=0,this.i=[],this.j=new lr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ps("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ps("baseRetryDelayMs",5e3,u),this.Za=ps("retryDelaySeedMs",1e4,u),this.Ta=ps("forwardChannelMaxRetries",2,u),this.va=ps("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new is(u&&u.concurrentRequestLimit),this.Ba=new Vo,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ta.prototype,s.ka=8,s.I=1,s.connect=function(u,m,_,A){Ie(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=Bo(this,null,this.W),ys(this)};function ms(u){if(gs(u),u.I==3){var m=u.V++,_=we(u.J);if(de(_,"SID",u.M),de(_,"RID",m),de(_,"TYPE","terminate"),vs(u,_),m=new Zn(u,u.j,m),m.M=2,m.A=Ui(we(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.A,_=!0),_||(m.g=ia(m.j,null),m.g.ea(m.A)),m.F=Date.now(),es(m)}Lo(u)}function gi(u){u.g&&(ol(u),u.g.cancel(),u.g=null)}function gs(u){gi(u),u.v&&(p.clearTimeout(u.v),u.v=null),na(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&p.clearTimeout(u.m),u.m=null)}function ys(u){if(!rs(u.h)&&!u.m){u.m=!0;var m=u.Ea;et||w(),K||(et(),K=!0),N.add(m,u),u.D=0}}function Fc(u,m){return Pn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ar(y(u.Ea,u,m),zo(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const Y=new Zn(this,this.j,u);let tt=this.o;if(this.U&&(tt?(tt=$(tt),U(tt,this.U)):tt=this.U),this.u!==null||this.R||(Y.J=tt,tt=null),this.S)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=ea(this,Y,m),_=we(this.J),de(_,"RID",u),de(_,"CVER",22),this.G&&de(_,"X-HTTP-Session-Id",this.G),vs(this,_),tt&&(this.R?m="headers="+ts(gr(tt))+"&"+m:this.u&&zn(_,this.u,tt)),Xs(this.h,Y),this.Ra&&de(_,"TYPE","init"),this.S?(de(_,"$req",m),de(_,"SID","null"),Y.U=!0,fi(Y,_,null)):fi(Y,_,m),this.I=2}}else this.I==3&&(u?ko(this,u):this.i.length==0||rs(this.h)||ko(this))};function ko(u,m){var _;m?_=m.l:_=u.V++;const A=we(u.J);de(A,"SID",u.M),de(A,"RID",_),de(A,"AID",u.K),vs(u,A),u.u&&u.o&&zn(A,u.u,u.o),_=new Zn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ea(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Xs(u.h,_),fi(_,A,m)}function vs(u,m){u.H&&vt(u.H,function(_,A){de(m,A,_)}),u.l&&vt({},function(_,A){de(m,A,_)})}function ea(u,m,_){_=Math.min(u.i.length,_);const A=u.l?y(u.l.Ka,u.l,u):null;t:{var Y=u.i;let Ft=-1;for(;;){const be=["count="+_];Ft==-1?_>0?(Ft=Y[0].g,be.push("ofs="+Ft)):Ft=0:be.push("ofs="+Ft);let ce=!0;for(let Oe=0;Oe<_;Oe++){var tt=Y[Oe].g;const Dn=Y[Oe].map;if(tt-=Ft,tt<0)Ft=Math.max(0,Y[Oe].g-100),ce=!1;else try{tt="req"+tt+"_"||"";try{var _t=Dn instanceof Map?Dn:Object.entries(Dn);for(const[yi,ti]of _t){let ei=ti;g(ti)&&(ei=Vt(ti)),be.push(tt+yi+"="+encodeURIComponent(ei))}}catch(yi){throw be.push(tt+"type="+encodeURIComponent("_badmap")),yi}}catch{A&&A(Dn)}}if(ce){_t=be.join("&");break t}}_t=void 0}return u=u.i.splice(0,_),m.G=u,_t}function Po(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;et||w(),K||(et(),K=!0),N.add(m,u),u.A=0}}function ll(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ar(y(u.Da,u),zo(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Uo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ar(y(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),gi(this),Uo(this))};function ol(u){u.B!=null&&(p.clearTimeout(u.B),u.B=null)}function Uo(u){u.g=new Zn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=we(u.na);de(m,"RID","rpc"),de(m,"SID",u.M),de(m,"AID",u.K),de(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&de(m,"TO",u.ia),de(m,"TYPE","xmlhttp"),vs(u,m),u.u&&u.o&&zn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ui(we(m)),_.u=null,_.R=!0,ur(_,u)}s.Va=function(){this.C!=null&&(this.C=null,gi(this),ll(this),Ie(19))};function na(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function ul(u,m){var _=null;if(u.g==m){na(u),ol(u),u.g=null;var A=2}else if(ss(u.h,m))_=m.G,Pi(u.h,m),A=1;else return;if(u.I!=0){if(m.o)if(A==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var Y=u.D;A=rr(),Ae(A,new Ro(A,_)),ys(u)}else Po(u);else if(Y=m.m,Y==3||Y==0&&m.X>0||!(A==1&&Fc(u,m)||A==2&&ll(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),Y){case 1:Bi(u,5);break;case 4:Bi(u,10);break;case 3:Bi(u,6);break;default:Bi(u,2)}}}function zo(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function Bi(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),A=u.Ua;const Y=!A;A=new Wn(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||hr(A,"https"),Ui(A),Y?sl(A.toString(),_):pr(A.toString(),_)}else Ie(2);u.I=0,u.l&&u.l.pa(m),Lo(u),gs(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function Lo(u){if(u.I=0,u.ja=[],u.l){const m=$s(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ja,m),q(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Bo(u,m,_){var A=_ instanceof Wn?we(_):new Wn(_);if(A.g!="")m&&(A.g=m+"."+A.g),as(A,A.u);else{var Y=p.location;A=Y.protocol,m=m?m+"."+Y.hostname:Y.hostname,Y=+Y.port;const tt=new Wn(null);A&&hr(tt,A),m&&(tt.g=m),Y&&as(tt,Y),_&&(tt.h=_),A=tt}return _=u.G,m=u.wa,_&&m&&de(A,_,m),de(A,"VER",u.ka),vs(u,A),A}function ia(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new _e(new os({ab:_})):new _e(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function qo(){}s=qo.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ra(){}ra.prototype.g=function(u,m){return new _n(u,m)};function _n(u,m){ve.call(this),this.g=new ta(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!S(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!S(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new yr(this)}C(_n,ve),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ms(this.g)},_n.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Vt(u),u=_);m.i.push(new qc(m.Ya++,u)),m.I==3&&ys(m)},_n.prototype.N=function(){this.g.l=null,delete this.j,ms(this.g),delete this.g,_n.Z.N.call(this)};function cl(u){Zt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}C(cl,Zt);function Ho(){It.call(this),this.status=1}C(Ho,It);function yr(u){this.g=u}C(yr,qo),yr.prototype.ra=function(){Ae(this.g,"a")},yr.prototype.qa=function(u){Ae(this.g,new cl(u))},yr.prototype.pa=function(u){Ae(this.g,new Ho)},yr.prototype.oa=function(){Ae(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,cv=function(){return new ra},uv=function(){return rr()},ov=zt,id={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,$u=Me,rn.COMPLETE="complete",lv=rn,Pt.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",ve.prototype.listen=ve.prototype.J,eo=Pt,_e.prototype.listenOnce=_e.prototype.K,_e.prototype.getLastError=_e.prototype.Ha,_e.prototype.getLastErrorCode=_e.prototype.ya,_e.prototype.getStatus=_e.prototype.ca,_e.prototype.getResponseJson=_e.prototype.La,_e.prototype.getResponseText=_e.prototype.la,_e.prototype.send=_e.prototype.ea,_e.prototype.setWithCredentials=_e.prototype.Fa,av=_e}).apply(typeof Fu<"u"?Fu:typeof self<"u"?self:typeof window<"u"?window:{});const Py="@firebase/firestore",Uy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new X0("@firebase/firestore");function Ma(){return Ls.logLevel}function St(s,...e){if(Ls.logLevel<=se.DEBUG){const i=e.map(Td);Ls.debug(`Firestore (${Qa}): ${s}`,...i)}}function nr(s,...e){if(Ls.logLevel<=se.ERROR){const i=e.map(Td);Ls.error(`Firestore (${Qa}): ${s}`,...i)}}function Ba(s,...e){if(Ls.logLevel<=se.WARN){const i=e.map(Td);Ls.warn(`Firestore (${Qa}): ${s}`,...i)}}function Td(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(s,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,hv(s,a,i)}function hv(s,e,i){let a=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw nr(a),new Error(a)}function ue(s,e,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,s||hv(e,o,a)}function Gt(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends qs{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(mn.UNAUTHENTICATED)))}shutdown(){}}class HE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class FE{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){ue(this.o===void 0,42304);let a=this.i;const o=v=>this.i!==a?(a=this.i,i(v)):Promise.resolve();let h=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new ks,e.enqueueRetryable((()=>o(this.currentUser)))};const p=()=>{const v=h;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},g=v=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new ks)}}),0),p()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ue(typeof a.accessToken=="string",31837,{l:a}),new fv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class GE{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YE{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new GE(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QE{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,J0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){ue(this.o===void 0,3512);const a=h=>{h.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,St("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>a(h)))};const o=h=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>o(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(ue(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new zy(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=KE(40);for(let h=0;h<o.length;++h)a.length<20&&o[h]<i&&(a+=e.charAt(o[h]%62))}return a}}function ee(s,e){return s<e?-1:s>e?1:0}function rd(s,e){const i=Math.min(s.length,e.length);for(let a=0;a<i;a++){const o=s.charAt(a),h=e.charAt(a);if(o!==h)return Yf(o)===Yf(h)?ee(o,h):Yf(o)?1:-1}return ee(s.length,e.length)}const XE=55296,$E=57343;function Yf(s){const e=s.charCodeAt(0);return e>=XE&&e<=$E}function qa(s,e,i){return s.length===e.length&&s.every(((a,o)=>i(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="__name__";class Ti{constructor(e,i,a){i===void 0?i=0:i>e.length&&Ut(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&Ut(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const h=Ti.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return ee(e.length,i.length)}static compareSegments(e,i){const a=Ti.isNumericId(e),o=Ti.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?Ti.extractNumericId(e).compare(Ti.extractNumericId(i)):rd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class Ee extends Ti{construct(e,i,a){return new Ee(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((o=>o.length>0)))}return new Ee(i)}static emptyPath(){return new Ee([])}}const ZE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Ti{construct(e,i,a){return new un(e,i,a)}static isValidIdentifier(e){return ZE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ly}static keyField(){return new un([Ly])}static fromServerFormat(e){const i=[];let a="",o=0;const h=()=>{if(a.length===0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let p=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Rt(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Rt(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=v,o+=2}else g==="`"?(p=!p,o++):g!=="."||p?(a+=g,o++):(h(),o++)}if(h(),p)throw new Rt(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(i)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Ee.fromString(e))}static fromName(e){return new Mt(Ee.fromString(e).popFirst(5))}static empty(){return new Mt(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Ee.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(s,e,i){if(!i)throw new Rt(dt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function WE(s,e,i,a){if(e===!0&&a===!0)throw new Rt(dt.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function By(s){if(!Mt.isDocumentKey(s))throw new Rt(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function qy(s){if(Mt.isDocumentKey(s))throw new Rt(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function pv(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ad(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ut(12329,{type:typeof s})}function Ps(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Rt(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Ad(s);throw new Rt(dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(s,e){const i={typeString:s};return e&&(i.value=e),i}function xo(s,e){if(!pv(s))throw new Rt(dt.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const o=e[a].typeString,h="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){i=`JSON missing required field: '${a}'`;break}const p=s[a];if(o&&typeof p!==o){i=`JSON field '${a}' must be a ${o}.`;break}if(h!==void 0&&p!==h.value){i=`Expected '${a}' field to equal '${h.value}'`;break}}if(i)throw new Rt(dt.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-62135596800,Fy=1e6;class Te{static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Fy);return new Te(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Hy)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fy}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xo(e,Te._jsonSchema))return new Te(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:He("string",Te._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new Te(0,0))}static max(){return new Ht(new Te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function JE(s,e){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Ht.fromTimestamp(a===1e9?new Te(i+1,0):new Te(i,a));return new Gr(o,Mt.empty(),e)}function tT(s){return new Gr(s.readTime,s.key,fo)}class Gr{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new Gr(Ht.min(),Mt.empty(),fo)}static max(){return new Gr(Ht.max(),Mt.empty(),fo)}}function eT(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=Mt.comparator(s.documentKey,e.documentKey),i!==0?i:ee(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(s){if(s.code!==dt.FAILED_PRECONDITION||s.message!==nT)throw s;St("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ct(((a,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,o)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof ct?i:ct.resolve(i)}catch(i){return ct.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):ct.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):ct.reject(i)}static resolve(e){return new ct(((i,a)=>{i(e)}))}static reject(e){return new ct(((i,a)=>{a(e)}))}static waitFor(e){return new ct(((i,a)=>{let o=0,h=0,p=!1;e.forEach((g=>{++o,g.next((()=>{++h,p&&h===o&&i()}),(v=>a(v)))})),p=!0,h===o&&i()}))}static or(e){let i=ct.resolve(!1);for(const a of e)i=i.next((o=>o?ct.resolve(o):a()));return i}static forEach(e,i){const a=[];return e.forEach(((o,h)=>{a.push(i.call(this,o,h))})),this.waitFor(a)}static mapArray(e,i){return new ct(((a,o)=>{const h=e.length,p=new Array(h);let g=0;for(let v=0;v<h;v++){const y=v;i(e[y]).next((b=>{p[y]=b,++g,g===h&&a(p)}),(b=>o(b)))}}))}static doWhile(e,i){return new ct(((a,o)=>{const h=()=>{e()===!0?i().next((()=>{h()}),o):a()};h()}))}}function rT(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Xa(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=-1;function Ec(s){return s==null}function ac(s){return s===0&&1/s==-1/0}function sT(s){return typeof s=="number"&&Number.isInteger(s)&&!ac(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="";function aT(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=Gy(e)),e=lT(s.get(i),e);return Gy(e)}function lT(s,e){let i=e;const a=s.length;for(let o=0;o<a;o++){const h=s.charAt(o);switch(h){case"\0":i+="";break;case mv:i+="";break;default:i+=h}}return i}function Gy(s){return s+mv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Hs(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function gv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,i){this.comparator=e,this.root=i||on.EMPTY}insert(e,i){return new Re(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,i,a,o,h){this.key=e,this.value=i,this.color=a??on.RED,this.left=o??on.EMPTY,this.right=h??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,h){return new on(e??this.key,i??this.value,a??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const h=a(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,a),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return on.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ut(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ut(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ut(57766)}get value(){throw Ut(16141)}get color(){throw Ut(16727)}get left(){throw Ut(29726)}get right(){throw Ut(36894)}copy(e,i,a,o,h){return this}insert(e,i,a){return new on(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Qy(this.data.getIterator())}getIteratorFrom(e){return new Qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Ze(this.comparator);return i.data=e,i}}class Qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new ai([])}unionWith(e){let i=new Ze(un.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new ai(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new yv("Invalid base64 string: "+h):h}})(e);return new cn(i)}static fromUint8Array(e){const i=(function(o){let h="";for(let p=0;p<o.length;++p)h+=String.fromCharCode(o[p]);return h})(e);return new cn(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const oT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(s){if(ue(!!s,39018),typeof s=="string"){let e=0;const i=oT.exec(s);if(ue(!!i,46558,{timestamp:s}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ue(s.seconds),nanos:Ue(s.nanos)}}function Ue(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Qr(s){return typeof s=="string"?cn.fromBase64String(s):cn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="server_timestamp",_v="__type__",xv="__previous_value__",bv="__local_write_time__";function Cd(s){return(s?.mapValue?.fields||{})[_v]?.stringValue===vv}function Tc(s){const e=s.mapValue.fields[xv];return Cd(e)?Tc(e):e}function po(s){const e=Yr(s.mapValue.fields[bv].timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,i,a,o,h,p,g,v,y,b){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=b}}const lc="(default)";class mo{constructor(e,i){this.projectId=e,this.database=i||lc}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===lc}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="__type__",cT="__max__",Yu={mapValue:{}},Tv="__vector__",oc="value";function Kr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cd(s)?4:fT(s)?9007199254740991:hT(s)?10:11:Ut(28295,{value:s})}function Ni(s,e){if(s===e)return!0;const i=Kr(s);if(i!==Kr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return po(s).isEqual(po(e));case 3:return(function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const p=Yr(o.timestampValue),g=Yr(h.timestampValue);return p.seconds===g.seconds&&p.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,h){return Qr(o.bytesValue).isEqual(Qr(h.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,h){return Ue(o.geoPointValue.latitude)===Ue(h.geoPointValue.latitude)&&Ue(o.geoPointValue.longitude)===Ue(h.geoPointValue.longitude)})(s,e);case 2:return(function(o,h){if("integerValue"in o&&"integerValue"in h)return Ue(o.integerValue)===Ue(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const p=Ue(o.doubleValue),g=Ue(h.doubleValue);return p===g?ac(p)===ac(g):isNaN(p)&&isNaN(g)}return!1})(s,e);case 9:return qa(s.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return(function(o,h){const p=o.mapValue.fields||{},g=h.mapValue.fields||{};if(Yy(p)!==Yy(g))return!1;for(const v in p)if(p.hasOwnProperty(v)&&(g[v]===void 0||!Ni(p[v],g[v])))return!1;return!0})(s,e);default:return Ut(52216,{left:s})}}function go(s,e){return(s.values||[]).find((i=>Ni(i,e)))!==void 0}function Ha(s,e){if(s===e)return 0;const i=Kr(s),a=Kr(e);if(i!==a)return ee(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return ee(s.booleanValue,e.booleanValue);case 2:return(function(h,p){const g=Ue(h.integerValue||h.doubleValue),v=Ue(p.integerValue||p.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(s,e);case 3:return Ky(s.timestampValue,e.timestampValue);case 4:return Ky(po(s),po(e));case 5:return rd(s.stringValue,e.stringValue);case 6:return(function(h,p){const g=Qr(h),v=Qr(p);return g.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(h,p){const g=h.split("/"),v=p.split("/");for(let y=0;y<g.length&&y<v.length;y++){const b=ee(g[y],v[y]);if(b!==0)return b}return ee(g.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(h,p){const g=ee(Ue(h.latitude),Ue(p.latitude));return g!==0?g:ee(Ue(h.longitude),Ue(p.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Xy(s.arrayValue,e.arrayValue);case 10:return(function(h,p){const g=h.fields||{},v=p.fields||{},y=g[oc]?.arrayValue,b=v[oc]?.arrayValue,C=ee(y?.values?.length||0,b?.values?.length||0);return C!==0?C:Xy(y,b)})(s.mapValue,e.mapValue);case 11:return(function(h,p){if(h===Yu.mapValue&&p===Yu.mapValue)return 0;if(h===Yu.mapValue)return 1;if(p===Yu.mapValue)return-1;const g=h.fields||{},v=Object.keys(g),y=p.fields||{},b=Object.keys(y);v.sort(),b.sort();for(let C=0;C<v.length&&C<b.length;++C){const V=rd(v[C],b[C]);if(V!==0)return V;const L=Ha(g[v[C]],y[b[C]]);if(L!==0)return L}return ee(v.length,b.length)})(s.mapValue,e.mapValue);default:throw Ut(23264,{he:i})}}function Ky(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ee(s,e);const i=Yr(s),a=Yr(e),o=ee(i.seconds,a.seconds);return o!==0?o:ee(i.nanos,a.nanos)}function Xy(s,e){const i=s.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const h=Ha(i[o],a[o]);if(h)return h}return ee(i.length,a.length)}function Fa(s){return sd(s)}function sd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const a=Yr(i);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Qr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return Mt.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let a="[",o=!0;for(const h of i.values||[])o?o=!1:a+=",",a+=sd(h);return a+"]"})(s.arrayValue):"mapValue"in s?(function(i){const a=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const p of a)h?h=!1:o+=",",o+=`${p}:${sd(i.fields[p])}`;return o+"}"})(s.mapValue):Ut(61005,{value:s})}function Zu(s){switch(Kr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tc(s);return e?16+Zu(e):16;case 5:return 2*s.stringValue.length;case 6:return Qr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,h)=>o+Zu(h)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Hs(a.fields,((h,p)=>{o+=h.length+Zu(p)})),o})(s.mapValue);default:throw Ut(13486,{value:s})}}function ad(s){return!!s&&"integerValue"in s}function Rd(s){return!!s&&"arrayValue"in s}function $y(s){return!!s&&"nullValue"in s}function Zy(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Wu(s){return!!s&&"mapValue"in s}function hT(s){return(s?.mapValue?.fields||{})[Ev]?.stringValue===Tv}function ao(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Hs(s.mapValue.fields,((i,a)=>e.mapValue.fields[i]=ao(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=ao(s.arrayValue.values[i]);return e}return{...s}}function fT(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===cT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Wu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(i)}setAll(e){let i=un.emptyPath(),a={},o=[];e.forEach(((p,g)=>{if(!i.isImmediateParentOf(g)){const v=this.getFieldsMap(i);this.applyChanges(v,a,o),a={},o=[],i=g.popLast()}p?a[g.lastSegment()]=ao(p):o.push(g.lastSegment())}));const h=this.getFieldsMap(i);this.applyChanges(h,a,o)}delete(e){const i=this.field(e.popLast());Wu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Wu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){Hs(i,((o,h)=>e[o]=h));for(const o of a)delete e[o]}clone(){return new Xn(ao(this.value))}}function Sv(s){const e=[];return Hs(s.fields,((i,a)=>{const o=new un([i]);if(Wu(a)){const h=Sv(a.mapValue).fields;if(h.length===0)e.push(o);else for(const p of h)e.push(o.child(p))}else e.push(o)})),new ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,i,a,o,h,p,g){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=h,this.data=p,this.documentState=g}static newInvalidDocument(e){return new gn(e,0,Ht.min(),Ht.min(),Ht.min(),Xn.empty(),0)}static newFoundDocument(e,i,a,o){return new gn(e,1,i,Ht.min(),a,o,0)}static newNoDocument(e,i){return new gn(e,2,i,Ht.min(),Ht.min(),Xn.empty(),0)}static newUnknownDocument(e,i){return new gn(e,3,i,Ht.min(),Ht.min(),Xn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,i){this.position=e,this.inclusive=i}}function Wy(s,e,i){let a=0;for(let o=0;o<s.position.length;o++){const h=e[o],p=s.position[o];if(h.field.isKeyField()?a=Mt.comparator(Mt.fromName(p.referenceValue),i.key):a=Ha(p,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function Jy(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Ni(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,i="asc"){this.field=e,this.dir=i}}function dT(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{}class Xe extends Av{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new mT(e,i,a):i==="array-contains"?new vT(e,a):i==="in"?new _T(e,a):i==="not-in"?new xT(e,a):i==="array-contains-any"?new bT(e,a):new Xe(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new gT(e,a):new yT(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Ha(i,this.value)):i!==null&&Kr(this.value)===Kr(i)&&this.matchesComparison(Ha(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ji extends Av{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new ji(e,i)}matches(e){return wv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wv(s){return s.op==="and"}function Cv(s){return pT(s)&&wv(s)}function pT(s){for(const e of s.filters)if(e instanceof ji)return!1;return!0}function ld(s){if(s instanceof Xe)return s.field.canonicalString()+s.op.toString()+Fa(s.value);if(Cv(s))return s.filters.map((e=>ld(e))).join(",");{const e=s.filters.map((i=>ld(i))).join(",");return`${s.op}(${e})`}}function Rv(s,e){return s instanceof Xe?(function(a,o){return o instanceof Xe&&a.op===o.op&&a.field.isEqual(o.field)&&Ni(a.value,o.value)})(s,e):s instanceof ji?(function(a,o){return o instanceof ji&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((h,p,g)=>h&&Rv(p,o.filters[g])),!0):!1})(s,e):void Ut(19439)}function Dv(s){return s instanceof Xe?(function(i){return`${i.field.canonicalString()} ${i.op} ${Fa(i.value)}`})(s):s instanceof ji?(function(i){return i.op.toString()+" {"+i.getFilters().map(Dv).join(" ,")+"}"})(s):"Filter"}class mT extends Xe{constructor(e,i,a){super(e,i,a),this.key=Mt.fromName(a.referenceValue)}matches(e){const i=Mt.comparator(e.key,this.key);return this.matchesComparison(i)}}class gT extends Xe{constructor(e,i){super(e,"in",i),this.keys=Nv("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class yT extends Xe{constructor(e,i){super(e,"not-in",i),this.keys=Nv("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function Nv(s,e){return(e.arrayValue?.values||[]).map((i=>Mt.fromName(i.referenceValue)))}class vT extends Xe{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Rd(i)&&go(i.arrayValue,this.value)}}class _T extends Xe{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&go(this.value.arrayValue,i)}}class xT extends Xe{constructor(e,i){super(e,"not-in",i)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!go(this.value.arrayValue,i)}}class bT extends Xe{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Rd(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>go(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,i=null,a=[],o=[],h=null,p=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=h,this.startAt=p,this.endAt=g,this.Te=null}}function t0(s,e=null,i=[],a=[],o=null,h=null,p=null){return new ET(s,e,i,a,o,h,p)}function Dd(s){const e=Gt(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>ld(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(h){return h.field.canonicalString()+h.dir})(a))).join(","),Ec(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>Fa(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>Fa(a))).join(",")),e.Te=i}return e.Te}function Nd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!dT(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!Rv(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Jy(s.startAt,e.startAt)&&Jy(s.endAt,e.endAt)}function od(s){return Mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,i=null,a=[],o=[],h=null,p="F",g=null,v=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=h,this.limitType=p,this.startAt=g,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TT(s,e,i,a,o,h,p,g){return new Sc(s,e,i,a,o,h,p,g)}function jd(s){return new Sc(s)}function e0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function ST(s){return s.collectionGroup!==null}function lo(s){const e=Gt(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let g=new Ze(un.comparator);return p.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new cc(h,a))})),i.has(un.keyField().canonicalString())||e.Ie.push(new cc(un.keyField(),a))}return e.Ie}function Ai(s){const e=Gt(s);return e.Ee||(e.Ee=AT(e,lo(s))),e.Ee}function AT(s,e){if(s.limitType==="F")return t0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const h=o.dir==="desc"?"asc":"desc";return new cc(o.field,h)}));const i=s.endAt?new uc(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new uc(s.startAt.position,s.startAt.inclusive):null;return t0(s.path,s.collectionGroup,e,s.filters,s.limit,i,a)}}function ud(s,e,i){return new Sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Ac(s,e){return Nd(Ai(s),Ai(e))&&s.limitType===e.limitType}function jv(s){return`${Dd(Ai(s))}|lt:${s.limitType}`}function Va(s){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((o=>Dv(o))).join(", ")}]`),Ec(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((o=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(o))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((o=>Fa(o))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((o=>Fa(o))).join(",")),`Target(${a})`})(Ai(s))}; limitType=${s.limitType})`}function wc(s,e){return e.isFoundDocument()&&(function(a,o){const h=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):Mt.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)})(s,e)&&(function(a,o){for(const h of lo(a))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const h of a.filters)if(!h.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(p,g,v){const y=Wy(p,g,v);return p.inclusive?y<=0:y<0})(a.startAt,lo(a),o)||a.endAt&&!(function(p,g,v){const y=Wy(p,g,v);return p.inclusive?y>=0:y>0})(a.endAt,lo(a),o))})(s,e)}function wT(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Iv(s){return(e,i)=>{let a=!1;for(const o of lo(s)){const h=CT(o,e,i);if(h!==0)return h;a=a||o.field.isKeyField()}return 0}}function CT(s,e,i){const a=s.field.isKeyField()?Mt.comparator(e.key,i.key):(function(h,p,g){const v=p.data.field(h),y=g.data.field(h);return v!==null&&y!==null?Ha(v,y):Ut(42886)})(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ut(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,h]of a)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,((i,a)=>{for(const[o,h]of a)e(o,h)}))}isEmpty(){return gv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Re(Mt.comparator);function ir(){return RT}const Mv=new Re(Mt.comparator);function no(...s){let e=Mv;for(const i of s)e=e.insert(i.key,i);return e}function Vv(s){let e=Mv;return s.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function Os(){return oo()}function Ov(){return oo()}function oo(){return new Fs((s=>s.toString()),((s,e)=>s.isEqual(e)))}const DT=new Re(Mt.comparator),NT=new Ze(Mt.comparator);function ne(...s){let e=NT;for(const i of s)e=e.add(i);return e}const jT=new Ze(ee);function IT(){return jT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function kv(s){return{integerValue:""+s}}function MT(s,e){return sT(e)?kv(e):Id(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this._=void 0}}function VT(s,e,i){return s instanceof hc?(function(o,h){const p={fields:{[_v]:{stringValue:vv},[bv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&Cd(h)&&(h=Tc(h)),h&&(p.fields[xv]=h),{mapValue:p}})(i,e):s instanceof yo?Uv(s,e):s instanceof vo?zv(s,e):(function(o,h){const p=Pv(o,h),g=n0(p)+n0(o.Ae);return ad(p)&&ad(o.Ae)?kv(g):Id(o.serializer,g)})(s,e)}function OT(s,e,i){return s instanceof yo?Uv(s,e):s instanceof vo?zv(s,e):i}function Pv(s,e){return s instanceof fc?(function(a){return ad(a)||(function(h){return!!h&&"doubleValue"in h})(a)})(e)?e:{integerValue:0}:null}class hc extends Cc{}class yo extends Cc{constructor(e){super(),this.elements=e}}function Uv(s,e){const i=Lv(e);for(const a of s.elements)i.some((o=>Ni(o,a)))||i.push(a);return{arrayValue:{values:i}}}class vo extends Cc{constructor(e){super(),this.elements=e}}function zv(s,e){let i=Lv(e);for(const a of s.elements)i=i.filter((o=>!Ni(o,a)));return{arrayValue:{values:i}}}class fc extends Cc{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function n0(s){return Ue(s.integerValue||s.doubleValue)}function Lv(s){return Rd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function kT(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof yo&&o instanceof yo||a instanceof vo&&o instanceof vo?qa(a.elements,o.elements,Ni):a instanceof fc&&o instanceof fc?Ni(a.Ae,o.Ae):a instanceof hc&&o instanceof hc})(s.transform,e.transform)}class PT{constructor(e,i){this.version=e,this.transformResults=i}}class wi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Rc{}function Bv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Md(s.key,wi.none()):new bo(s.key,s.data,wi.none());{const i=s.data,a=Xn.empty();let o=new Ze(un.comparator);for(let h of e.fields)if(!o.has(h)){let p=i.field(h);p===null&&h.length>1&&(h=h.popLast(),p=i.field(h)),p===null?a.delete(h):a.set(h,p),o=o.add(h)}return new Gs(s.key,a,new ai(o.toArray()),wi.none())}}function UT(s,e,i){s instanceof bo?(function(o,h,p){const g=o.value.clone(),v=r0(o.fieldTransforms,h,p.transformResults);g.setAll(v),h.convertToFoundDocument(p.version,g).setHasCommittedMutations()})(s,e,i):s instanceof Gs?(function(o,h,p){if(!Ju(o.precondition,h))return void h.convertToUnknownDocument(p.version);const g=r0(o.fieldTransforms,h,p.transformResults),v=h.data;v.setAll(qv(o)),v.setAll(g),h.convertToFoundDocument(p.version,v).setHasCommittedMutations()})(s,e,i):(function(o,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,i)}function uo(s,e,i,a){return s instanceof bo?(function(h,p,g,v){if(!Ju(h.precondition,p))return g;const y=h.value.clone(),b=s0(h.fieldTransforms,v,p);return y.setAll(b),p.convertToFoundDocument(p.version,y).setHasLocalMutations(),null})(s,e,i,a):s instanceof Gs?(function(h,p,g,v){if(!Ju(h.precondition,p))return g;const y=s0(h.fieldTransforms,v,p),b=p.data;return b.setAll(qv(h)),b.setAll(y),p.convertToFoundDocument(p.version,b).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((C=>C.field)))})(s,e,i,a):(function(h,p,g){return Ju(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):g})(s,e,i)}function zT(s,e){let i=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),h=Pv(a.transform,o||null);h!=null&&(i===null&&(i=Xn.empty()),i.set(a.field,h))}return i||null}function i0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&qa(a,o,((h,p)=>kT(h,p)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class bo extends Rc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gs extends Rc{constructor(e,i,a,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function qv(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}})),e}function r0(s,e,i){const a=new Map;ue(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let o=0;o<i.length;o++){const h=s[o],p=h.transform,g=e.data.field(h.field);a.set(h.field,OT(p,g,i[o]))}return a}function s0(s,e,i){const a=new Map;for(const o of s){const h=o.transform,p=i.data.field(o.field);a.set(o.field,VT(h,p,e))}return a}class Md extends Rc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends Rc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&UT(h,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=uo(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=uo(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=Ov();return this.mutations.forEach((o=>{const h=e.get(o.key),p=h.overlayedDocument;let g=this.applyToLocalView(p,h.mutatedFields);g=i.has(o.key)?null:g;const v=Bv(p,g);v!==null&&a.set(o.key,v),p.isValidDocument()||p.convertToNoDocument(Ht.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),ne())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,((i,a)=>i0(i,a)))&&qa(this.baseMutations,e.baseMutations,((i,a)=>i0(i,a)))}}class Vd{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){ue(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return DT})();const h=e.mutations;for(let p=0;p<h.length;p++)o=o.insert(h[p].key,a[p].version);return new Vd(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,re;function FT(s){switch(s){case dt.OK:return Ut(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Ut(15467,{code:s})}}function Hv(s){if(s===void 0)return nr("GRPC error has no .code"),dt.UNKNOWN;switch(s){case qe.OK:return dt.OK;case qe.CANCELLED:return dt.CANCELLED;case qe.UNKNOWN:return dt.UNKNOWN;case qe.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case qe.INTERNAL:return dt.INTERNAL;case qe.UNAVAILABLE:return dt.UNAVAILABLE;case qe.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case qe.NOT_FOUND:return dt.NOT_FOUND;case qe.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case qe.ABORTED:return dt.ABORTED;case qe.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case qe.DATA_LOSS:return dt.DATA_LOSS;default:return Ut(39323,{code:s})}}(re=qe||(qe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Hr([4294967295,4294967295],0);function a0(s){const e=GT().encode(s),i=new sv;return i.update(e),new Uint8Array(i.digest())}function l0(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Hr([i,a],0),new Hr([o,h],0)]}class Od{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new io(`Invalid padding: ${i}`);if(a<0)throw new io(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new io(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=Hr.fromNumber(this.ge)}ye(e,i,a){let o=e.add(i.multiply(Hr.fromNumber(a)));return o.compare(YT)===1&&(o=new Hr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=a0(e),[a,o]=l0(i);for(let h=0;h<this.hashCount;h++){const p=this.ye(a,o,h);if(!this.we(p))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),p=new Od(h,o,i);return a.forEach((g=>p.insert(g))),p}insert(e){if(this.ge===0)return;const i=a0(e),[a,o]=l0(i);for(let h=0;h<this.hashCount;h++){const p=this.ye(a,o,h);this.Se(p)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,i,a,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,Eo.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Dc(Ht.min(),o,new Re(ee),ir(),ne())}}class Eo{constructor(e,i,a,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new Eo(a,i,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,i,a,o){this.be=e,this.removedTargetIds=i,this.key=a,this.De=o}}class Fv{constructor(e,i){this.targetId=e,this.Ce=i}}class Gv{constructor(e,i,a=cn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class o0{constructor(){this.ve=0,this.Fe=u0(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ne(),i=ne(),a=ne();return this.Fe.forEach(((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:Ut(38017,{changeType:h})}})),new Eo(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=u0()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QT{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=Qu(),this.He=Qu(),this.Ye=new Re(ee)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:Ut(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,o)=>{this.rt(o)&&i(o)}))}st(e){const i=e.targetId,a=e.Ce.count,o=this.ot(i);if(o){const h=o.target;if(od(h))if(a===0){const p=new Mt(h.path);this.et(i,p,gn.newNoDocument(p,Ht.min()))}else ue(a===1,20013,{expectedCount:a});else{const p=this._t(i);if(p!==a){const g=this.ut(e),v=g?this.ct(g,e,p):1;if(v!==0){this.it(i);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:h=0}=i;let p,g;try{p=Qr(a).toUint8Array()}catch(v){if(v instanceof yv)return Ba("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Od(p,o,h)}catch(v){return Ba(v instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.ge===0?null:g}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let o=0;return a.forEach((h=>{const p=this.Ge.ht(),g=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.et(i,h,null),o++)})),o}Tt(e){const i=new Map;this.ze.forEach(((h,p)=>{const g=this.ot(p);if(g){if(h.current&&od(g.target)){const v=new Mt(g.target.path);this.It(v).has(p)||this.Et(p,v)||this.et(p,v,gn.newNoDocument(v,e))}h.Be&&(i.set(p,h.ke()),h.qe())}}));let a=ne();this.He.forEach(((h,p)=>{let g=!0;p.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(e)));const o=new Dc(e,i,this.Ye,this.je,a);return this.je=ir(),this.Je=Qu(),this.He=Qu(),this.Ye=new Re(ee),o}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new o0,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Ze(ee),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Ze(ee),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||St("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new o0),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function Qu(){return new Re(Mt.comparator)}function u0(){return new Re(Mt.comparator)}const KT={asc:"ASCENDING",desc:"DESCENDING"},XT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$T={and:"AND",or:"OR"};class ZT{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function cd(s,e){return s.useProto3Json||Ec(e)?e:{value:e}}function dc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function WT(s,e){return dc(s,e.toTimestamp())}function Ci(s){return ue(!!s,49232),Ht.fromTimestamp((function(i){const a=Yr(i);return new Te(a.seconds,a.nanos)})(s))}function kd(s,e){return hd(s,e).canonicalString()}function hd(s,e){const i=(function(o){return new Ee(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?i:i.child(e)}function Qv(s){const e=Ee.fromString(s);return ue(Wv(e),10190,{key:e.toString()}),e}function fd(s,e){return kd(s.databaseId,e.path)}function Qf(s,e){const i=Qv(e);if(i.get(1)!==s.databaseId.projectId)throw new Rt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new Rt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Mt(Xv(i))}function Kv(s,e){return kd(s.databaseId,e)}function JT(s){const e=Qv(s);return e.length===4?Ee.emptyPath():Xv(e)}function dd(s){return new Ee(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Xv(s){return ue(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function c0(s,e,i){return{name:fd(s,e),fields:i.value.mapValue.fields}}function tS(s,e){let i;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ut(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=(function(y,b){return y.useProto3Json?(ue(b===void 0||typeof b=="string",58123),cn.fromBase64String(b||"")):(ue(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),cn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),p=e.targetChange.cause,g=p&&(function(y){const b=y.code===void 0?dt.UNKNOWN:Hv(y.code);return new Rt(b,y.message||"")})(p);i=new Gv(a,o,h,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Qf(s,a.document.name),h=Ci(a.document.updateTime),p=a.document.createTime?Ci(a.document.createTime):Ht.min(),g=new Xn({mapValue:{fields:a.document.fields}}),v=gn.newFoundDocument(o,h,p,g),y=a.targetIds||[],b=a.removedTargetIds||[];i=new tc(y,b,v.key,v)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Qf(s,a.document),h=a.readTime?Ci(a.readTime):Ht.min(),p=gn.newNoDocument(o,h),g=a.removedTargetIds||[];i=new tc([],g,p.key,p)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Qf(s,a.document),h=a.removedTargetIds||[];i=new tc([],h,o,null)}else{if(!("filter"in e))return Ut(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:h}=a,p=new HT(o,h),g=a.targetId;i=new Fv(g,p)}}return i}function eS(s,e){let i;if(e instanceof bo)i={update:c0(s,e.key,e.value)};else if(e instanceof Md)i={delete:fd(s,e.key)};else if(e instanceof Gs)i={update:c0(s,e.key,e.data),updateMask:cS(e.fieldMask)};else{if(!(e instanceof LT))return Ut(16599,{Vt:e.type});i={verify:fd(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(h,p){const g=p.transform;if(g instanceof hc)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof yo)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof vo)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof fc)return{fieldPath:p.field.canonicalString(),increment:g.Ae};throw Ut(20930,{transform:p.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(o,h){return h.updateTime!==void 0?{updateTime:WT(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ut(27497)})(s,e.precondition)),i}function nS(s,e){return s&&s.length>0?(ue(e!==void 0,14353),s.map((i=>(function(o,h){let p=o.updateTime?Ci(o.updateTime):Ci(h);return p.isEqual(Ht.min())&&(p=Ci(h)),new PT(p,o.transformResults||[])})(i,e)))):[]}function iS(s,e){return{documents:[Kv(s,e.path)]}}function rS(s,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=Kv(s,o);const h=(function(y){if(y.length!==0)return Zv(ji.create(y,"and"))})(e.filters);h&&(i.structuredQuery.where=h);const p=(function(y){if(y.length!==0)return y.map((b=>(function(V){return{field:Oa(V.field),direction:lS(V.dir)}})(b)))})(e.orderBy);p&&(i.structuredQuery.orderBy=p);const g=cd(s,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:i,parent:o}}function sS(s){let e=JT(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){ue(a===1,65062);const b=i.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let h=[];i.where&&(h=(function(C){const V=$v(C);return V instanceof ji&&Cv(V)?V.getFilters():[V]})(i.where));let p=[];i.orderBy&&(p=(function(C){return C.map((V=>(function(q){return new cc(ka(q.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(V)))})(i.orderBy));let g=null;i.limit&&(g=(function(C){let V;return V=typeof C=="object"?C.value:C,Ec(V)?null:V})(i.limit));let v=null;i.startAt&&(v=(function(C){const V=!!C.before,L=C.values||[];return new uc(L,V)})(i.startAt));let y=null;return i.endAt&&(y=(function(C){const V=!C.before,L=C.values||[];return new uc(L,V)})(i.endAt)),TT(e,o,p,h,g,"F",v,y)}function aS(s,e){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ut(28987,{purpose:o})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function $v(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=ka(i.unaryFilter.field);return Xe.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=ka(i.unaryFilter.field);return Xe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=ka(i.unaryFilter.field);return Xe.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=ka(i.unaryFilter.field);return Xe.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ut(61313);default:return Ut(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Xe.create(ka(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ut(58110);default:return Ut(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return ji.create(i.compositeFilter.filters.map((a=>$v(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ut(1026)}})(i.compositeFilter.op))})(s):Ut(30097,{filter:s})}function lS(s){return KT[s]}function oS(s){return XT[s]}function uS(s){return $T[s]}function Oa(s){return{fieldPath:s.canonicalString()}}function ka(s){return un.fromServerFormat(s.fieldPath)}function Zv(s){return s instanceof Xe?(function(i){if(i.op==="=="){if(Zy(i.value))return{unaryFilter:{field:Oa(i.field),op:"IS_NAN"}};if($y(i.value))return{unaryFilter:{field:Oa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Zy(i.value))return{unaryFilter:{field:Oa(i.field),op:"IS_NOT_NAN"}};if($y(i.value))return{unaryFilter:{field:Oa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(i.field),op:oS(i.op),value:i.value}}})(s):s instanceof ji?(function(i){const a=i.getFilters().map((o=>Zv(o)));return a.length===1?a[0]:{compositeFilter:{op:uS(i.op),filters:a}}})(s):Ut(54877,{filter:s})}function cS(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Wv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,i,a,o,h=Ht.min(),p=Ht.min(),g=cn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.yt=e}}function fS(s){const e=sS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Cn=new pS}addToCollectionParentIndex(e,i){return this.Cn.add(i),ct.resolve()}getCollectionParents(e,i){return ct.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return ct.resolve()}deleteFieldIndex(e,i){return ct.resolve()}deleteAllFieldIndexes(e){return ct.resolve()}createTargetIndexes(e,i){return ct.resolve()}getDocumentsMatchingTarget(e,i){return ct.resolve(null)}getIndexType(e,i){return ct.resolve(0)}getFieldIndexes(e,i){return ct.resolve([])}getNextCollectionGroupToUpdate(e){return ct.resolve(null)}getMinOffset(e,i){return ct.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,i){return ct.resolve(Gr.min())}updateCollectionGroup(e,i,a){return ct.resolve()}updateIndexEntries(e,i){return ct.resolve()}}class pS{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new Ze(Ee.comparator),h=!o.has(a);return this.index[i]=o.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Ze(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jv=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(Jv,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ga(0)}static cr(){return new Ga(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="LruGarbageCollector",mS=1048576;function d0([s,e],[i,a]){const o=ee(s,i);return o===0?ee(e,a):o}class gS{constructor(e){this.Ir=e,this.buffer=new Ze(d0),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();d0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class yS{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){St(f0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Xa(i)?St(f0,"Ignoring IndexedDB error during garbage collection: ",i):await Ka(i)}await this.Vr(3e5)}))}}class vS{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return ct.resolve(bc.ce);const a=new gS(i);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(St("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(h0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h0):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,o,h,p,g,v,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),o=this.params.maximumSequenceNumbersToCollect):o=C,p=Date.now(),this.nthSequenceNumber(e,o)))).next((C=>(a=C,g=Date.now(),this.removeTargets(e,a,i)))).next((C=>(h=C,v=Date.now(),this.removeOrphanedDocuments(e,a)))).next((C=>(y=Date.now(),Ma()<=se.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-b}ms
	Determined least recently used ${o} in `+(g-p)+`ms
	Removed ${h} targets in `+(v-g)+`ms
	Removed ${C} documents in `+(y-v)+`ms
Total Duration: ${y-b}ms`),ct.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:C}))))}}function _S(s,e){return new vS(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.changes=new Fs((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?ct.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,i)))).next((o=>(a!==null&&uo(a.mutation,o,ai.empty(),Te.now()),o)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,ne()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=ne()){const o=Os();return this.populateOverlays(e,o,i).next((()=>this.computeViews(e,i,o,a).next((h=>{let p=no();return h.forEach(((g,v)=>{p=p.insert(g,v.overlayedDocument)})),p}))))}getOverlayedDocuments(e,i){const a=Os();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,ne())))}populateOverlays(e,i,a){const o=[];return a.forEach((h=>{i.has(h)||o.push(h)})),this.documentOverlayCache.getOverlays(e,o).next((h=>{h.forEach(((p,g)=>{i.set(p,g)}))}))}computeViews(e,i,a,o){let h=ir();const p=oo(),g=(function(){return oo()})();return i.forEach(((v,y)=>{const b=a.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof Gs)?h=h.insert(y.key,y):b!==void 0?(p.set(y.key,b.mutation.getFieldMask()),uo(b.mutation,y,b.mutation.getFieldMask(),Te.now())):p.set(y.key,ai.empty())})),this.recalculateAndSaveOverlays(e,h).next((v=>(v.forEach(((y,b)=>p.set(y,b))),i.forEach(((y,b)=>g.set(y,new bS(b,p.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,i){const a=oo();let o=new Re(((p,g)=>p-g)),h=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((p=>{for(const g of p)g.keys().forEach((v=>{const y=i.get(v);if(y===null)return;let b=a.get(v)||ai.empty();b=g.applyToLocalView(y,b),a.set(v,b);const C=(o.get(g.batchId)||ne()).add(v);o=o.insert(g.batchId,C)}))})).next((()=>{const p=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),y=v.key,b=v.value,C=Ov();b.forEach((V=>{if(!h.has(V)){const L=Bv(i.get(V),a.get(V));L!==null&&C.set(V,L),h=h.add(V)}})),p.push(this.documentOverlayCache.saveOverlays(e,y,C))}return ct.waitFor(p)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,o){return(function(p){return Mt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):ST(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next((h=>{const p=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-h.size):ct.resolve(Os());let g=fo,v=h;return p.next((y=>ct.forEach(y,((b,C)=>(g<C.largestBatchId&&(g=C.largestBatchId),h.get(b)?ct.resolve():this.remoteDocumentCache.getEntry(e,b).next((V=>{v=v.insert(b,V)}))))).next((()=>this.populateOverlays(e,y,h))).next((()=>this.computeViews(e,v,y,ne()))).next((b=>({batchId:g,changes:Vv(b)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Mt(i)).next((a=>{let o=no();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const h=i.collectionGroup;let p=no();return this.indexManager.getCollectionParents(e,h).next((g=>ct.forEach(g,(v=>{const y=(function(C,V){return new Sc(V,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(i,v.child(h));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((b=>{b.forEach(((C,V)=>{p=p.insert(C,V)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,i,a,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,o)))).next((p=>{h.forEach(((v,y)=>{const b=y.getKey();p.get(b)===null&&(p=p.insert(b,gn.newInvalidDocument(b)))}));let g=no();return p.forEach(((v,y)=>{const b=h.get(v);b!==void 0&&uo(b.mutation,y,ai.empty(),Te.now()),wc(i,y)&&(g=g.insert(v,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return ct.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:Ci(o.createTime)}})(i)),ct.resolve()}getNamedQuery(e,i){return ct.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:fS(o.bundledQuery),readTime:Ci(o.readTime)}})(i)),ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.overlays=new Re(Mt.comparator),this.qr=new Map}getOverlay(e,i){return ct.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Os();return ct.forEach(i,(o=>this.getOverlay(e,o).next((h=>{h!==null&&a.set(o,h)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((o,h)=>{this.St(e,i,h)})),ct.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(a)),ct.resolve()}getOverlaysForCollection(e,i,a){const o=Os(),h=i.length+1,p=new Mt(i.child("")),g=this.overlays.getIteratorFrom(p);for(;g.hasNext();){const v=g.getNext().value,y=v.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===h&&v.largestBatchId>a&&o.set(v.getKey(),v)}return ct.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let h=new Re(((y,b)=>y-b));const p=this.overlays.getIterator();for(;p.hasNext();){const y=p.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>a){let b=h.get(y.largestBatchId);b===null&&(b=Os(),h=h.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=Os(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,b)=>g.set(y,b))),!(g.size()>=o)););return ct.resolve(g)}St(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const p=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,p)}this.overlays=this.overlays.insert(a.key,new qT(i,a));let h=this.qr.get(i);h===void 0&&(h=ne(),this.qr.set(i,h)),this.qr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ct.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this.Qr=new Ze(nn.$r),this.Ur=new Ze(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new nn(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new nn(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new Mt(new Ee([])),a=new nn(i,e),o=new nn(i,e+1),h=[];return this.Ur.forEachInRange([a,o],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Mt(new Ee([])),a=new nn(i,e),o=new nn(i,e+1);let h=ne();return this.Ur.forEachInRange([a,o],(p=>{h=h.add(p.key)})),h}containsKey(e){const i=new nn(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class nn{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Mt.comparator(e.key,i.key)||ee(e.Yr,i.Yr)}static Kr(e,i){return ee(e.Yr,i.Yr)||Mt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(nn.$r)}checkEmpty(e){return ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new BT(h,i,a,o);this.mutationQueue.push(p);for(const g of o)this.Zr=this.Zr.add(new nn(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ct.resolve(p)}lookupMutationBatch(e,i){return ct.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.ei(a),h=o<0?0:o;return ct.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(this.mutationQueue.length===0?wd:this.tr-1)}getAllMutationBatches(e){return ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new nn(i,0),o=new nn(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([a,o],(p=>{const g=this.Xr(p.Yr);h.push(g)})),ct.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Ze(ee);return i.forEach((o=>{const h=new nn(o,0),p=new nn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(g=>{a=a.add(g.Yr)}))})),ct.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let h=a;Mt.isDocumentKey(h)||(h=h.child(""));const p=new nn(new Mt(h),0);let g=new Ze(ee);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(g=g.add(v.Yr)),!0)}),p),ct.resolve(this.ti(g))}ti(e){const i=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&i.push(o)})),i}removeMutationBatch(e,i){ue(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ct.forEach(i.mutations,(o=>{const h=new nn(o.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new nn(i,0),o=this.Zr.firstAfterOrEqual(a);return ct.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ct.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.ri=e,this.docs=(function(){return new Re(Mt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),h=o?o.size:0,p=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ct.resolve(a?a.document.mutableCopy():gn.newInvalidDocument(i))}getEntries(e,i){let a=ir();return i.forEach((o=>{const h=this.docs.get(o);a=a.insert(o,h?h.document.mutableCopy():gn.newInvalidDocument(o))})),ct.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let h=ir();const p=i.path,g=new Mt(p.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:y,value:{document:b}}=v.getNext();if(!p.isPrefixOf(y.path))break;y.path.length>p.length+1||eT(tT(b),a)<=0||(o.has(b.key)||wc(i,b))&&(h=h.insert(b.key,b.mutableCopy()))}return ct.resolve(h)}getAllFromCollectionGroup(e,i,a,o){Ut(9500)}ii(e,i){return ct.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new RS(this)}getSize(e){return ct.resolve(this.size)}}class RS extends xS{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ct.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.persistence=e,this.si=new Fs((i=>Dd(i)),Nd),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.oi=0,this._i=new Pd,this.targetCount=0,this.ai=Ga.ur()}forEachTarget(e,i){return this.si.forEach(((a,o)=>i(o))),ct.resolve()}getLastRemoteSnapshotVersion(e){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ct.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),ct.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Ga(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,ct.resolve()}updateTargetData(e,i){return this.Pr(i),ct.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,ct.resolve()}removeTargets(e,i,a){let o=0;const h=[];return this.si.forEach(((p,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ct.waitFor(h).next((()=>o))}getTargetCount(e){return ct.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return ct.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),ct.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach((p=>{h.push(o.markPotentiallyOrphaned(e,p))})),ct.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),ct.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return ct.resolve(a)}containsKey(e,i){return ct.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,i){this.ui={},this.overlays={},this.ci=new bc(0),this.li=!1,this.li=!0,this.hi=new AS,this.referenceDelegate=e(this),this.Pi=new DS(this),this.indexManager=new dS,this.remoteDocumentCache=(function(o){return new CS(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new hS(i),this.Ii=new TS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new SS,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new wS(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){St("MemoryPersistence","Starting transaction:",e);const o=new NS(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((h=>this.referenceDelegate.di(o).next((()=>h)))).toPromise().then((h=>(o.raiseOnCommittedEvent(),h)))}Ai(e,i){return ct.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class NS extends iT{constructor(e){super(),this.currentSequenceNumber=e}}class Ud{constructor(e){this.persistence=e,this.Ri=new Pd,this.Vi=null}static mi(e){return new Ud(e)}get fi(){if(this.Vi)return this.Vi;throw Ut(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),ct.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),ct.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),ct.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((o=>{o.forEach((h=>this.fi.add(h.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.fi,(a=>{const o=Mt.fromPath(a);return this.gi(e,o).next((h=>{h||i.removeEntry(o,Ht.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return ct.or([()=>ct.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class pc{constructor(e,i){this.persistence=e,this.pi=new Fs((a=>aT(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=_S(this,i)}static mi(e,i){return new pc(e,i)}Ei(){}di(e){return ct.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((o=>a+o))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return ct.forEach(this.pi,((a,o)=>this.br(e,a,o).next((h=>h?ct.resolve():i(o)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.ii(e,(p=>this.br(e,p,i).next((g=>{g||(a++,h.removeEntry(p,Ht.min()))})))).next((()=>h.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),ct.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ct.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ct.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),ct.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Zu(e.data.value)),i}br(e,i,a){return ct.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.pi.get(i);return ct.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=o}static As(e,i){let a=ne(),o=ne();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new zd(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Rb()?8:rT(wb())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,o){const h={result:null};return this.ys(e,i).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(e,i,o,a).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new jS;return this.Ss(e,i,p).next((g=>{if(h.result=g,this.Vs)return this.bs(e,i,p,g.size)}))})).next((()=>h.result))}bs(e,i,a,o){return a.documentReadCount<this.fs?(Ma()<=se.DEBUG&&St("QueryEngine","SDK will not create cache indexes for query:",Va(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ct.resolve()):(Ma()<=se.DEBUG&&St("QueryEngine","Query:",Va(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Ma()<=se.DEBUG&&St("QueryEngine","The SDK decides to create cache indexes for query:",Va(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(i))):ct.resolve())}ys(e,i){if(e0(i))return ct.resolve(null);let a=Ai(i);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=ud(i,null,"F"),a=Ai(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((h=>{const p=ne(...h);return this.ps.getDocuments(e,p).next((g=>this.indexManager.getMinOffset(e,a).next((v=>{const y=this.Ds(i,g);return this.Cs(i,y,p,v.readTime)?this.ys(e,ud(i,null,"F")):this.vs(e,y,i,v)}))))})))))}ws(e,i,a,o){return e0(i)||o.isEqual(Ht.min())?ct.resolve(null):this.ps.getDocuments(e,a).next((h=>{const p=this.Ds(i,h);return this.Cs(i,p,a,o)?ct.resolve(null):(Ma()<=se.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Va(i)),this.vs(e,p,i,JE(o,fo)).next((g=>g)))}))}Ds(e,i){let a=new Ze(Iv(e));return i.forEach(((o,h)=>{wc(e,h)&&(a=a.add(h))})),a}Cs(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,i,a){return Ma()<=se.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",Va(i)),this.ps.getDocumentsMatchingQuery(e,i,Gr.min(),a)}vs(e,i,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((h=>(i.forEach((p=>{h=h.insert(p.key,p)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="LocalStore",MS=3e8;class VS{constructor(e,i,a,o){this.persistence=e,this.Fs=i,this.serializer=o,this.Ms=new Re(ee),this.xs=new Fs((h=>Dd(h)),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ES(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function OS(s,e,i,a){return new VS(s,e,i,a)}async function e_(s,e){const i=Gt(s);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next((h=>(o=h,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((h=>{const p=[],g=[];let v=ne();for(const y of o){p.push(y.batchId);for(const b of y.mutations)v=v.add(b.key)}for(const y of h){g.push(y.batchId);for(const b of y.mutations)v=v.add(b.key)}return i.localDocuments.getDocuments(a,v).next((y=>({Ls:y,removedBatchIds:p,addedBatchIds:g})))}))}))}function kS(s,e){const i=Gt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,v,y,b){const C=y.batch,V=C.keys();let L=ct.resolve();return V.forEach((q=>{L=L.next((()=>b.getEntry(v,q))).next((J=>{const k=y.docVersions.get(q);ue(k!==null,48541),J.version.compareTo(k)<0&&(C.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),b.addEntry(J)))}))})),L.next((()=>g.mutationQueue.removeMutationBatch(v,C)))})(i,a,e,h).next((()=>h.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let v=ne();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(v=v.add(g.batch.mutations[y].key));return v})(e)))).next((()=>i.localDocuments.getDocuments(a,o)))}))}function n_(s){const e=Gt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function PS(s,e){const i=Gt(s),a=e.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const g=[];e.targetChanges.forEach(((b,C)=>{const V=o.get(C);if(!V)return;g.push(i.Pi.removeMatchingKeys(h,b.removedDocuments,C).next((()=>i.Pi.addMatchingKeys(h,b.addedDocuments,C))));let L=V.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(C)!==null?L=L.withResumeToken(cn.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,a)),o=o.insert(C,L),(function(J,k,H){return J.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=MS?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(V,L,b)&&g.push(i.Pi.updateTargetData(h,L))}));let v=ir(),y=ne();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,b))})),g.push(US(h,p,e.documentUpdates).next((b=>{v=b.ks,y=b.qs}))),!a.isEqual(Ht.min())){const b=i.Pi.getLastRemoteSnapshotVersion(h).next((C=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,a)));g.push(b)}return ct.waitFor(g).next((()=>p.apply(h))).next((()=>i.localDocuments.getLocalViewOfDocuments(h,v,y))).next((()=>v))})).then((h=>(i.Ms=o,h)))}function US(s,e,i){let a=ne(),o=ne();return i.forEach((h=>a=a.add(h))),e.getEntries(s,a).next((h=>{let p=ir();return i.forEach(((g,v)=>{const y=h.get(g);v.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(Ht.min())?(e.removeEntry(g,v.readTime),p=p.insert(g,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),p=p.insert(g,v)):St(Ld,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",v.version)})),{ks:p,qs:o}}))}function zS(s,e){const i=Gt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=wd),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function LS(s,e){const i=Gt(s);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return i.Pi.getTargetData(a,e).next((h=>h?(o=h,ct.resolve(o)):i.Pi.allocateTargetId(a).next((p=>(o=new zr(e,p,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=i.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function pd(s,e,i){const a=Gt(s),o=a.Ms.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,(p=>a.persistence.referenceDelegate.removeTarget(p,o)))}catch(p){if(!Xa(p))throw p;St(Ld,`Failed to update sequence numbers for target ${e}: ${p}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function p0(s,e,i){const a=Gt(s);let o=Ht.min(),h=ne();return a.persistence.runTransaction("Execute query","readwrite",(p=>(function(v,y,b){const C=Gt(v),V=C.xs.get(b);return V!==void 0?ct.resolve(C.Ms.get(V)):C.Pi.getTargetData(y,b)})(a,p,Ai(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(p,g.targetId).next((v=>{h=v}))})).next((()=>a.Fs.getDocumentsMatchingQuery(p,e,i?o:Ht.min(),i?h:ne()))).next((g=>(BS(a,wT(e),g),{documents:g,Qs:h})))))}function BS(s,e,i){let a=s.Os.get(e)||Ht.min();i.forEach(((o,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)})),s.Os.set(e,a)}class m0{constructor(){this.activeTargetIds=IT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qS{constructor(){this.Mo=new m0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new m0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="ConnectivityMonitor";class y0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){St(g0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){St(g0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=null;function md(){return Ku===null?Ku=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ku++,"0x"+Ku.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="RestConnection",FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===lc?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,i,a,o,h){const p=md(),g=this.zo(e,i.toUriEncodedString());St(Kf,`Sending RPC '${e}' ${p}:`,g,a);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,h);const{host:y}=new URL(g),b=xc(y);return this.Jo(e,g,v,a,b).then((C=>(St(Kf,`Received RPC '${e}' ${p}: `,C),C)),(C=>{throw Ba(Kf,`RPC '${e}' ${p} failed with error: `,C,"url: ",g,"request:",a),C}))}Ho(e,i,a,o,h,p){return this.Go(e,i,a,o,h)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,h)=>e[h]=o)),a&&a.headers.forEach(((o,h)=>e[h]=o))}zo(e,i){const a=FS[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class QS extends GS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,o,h){const p=md();return new Promise(((g,v)=>{const y=new av;y.setWithCredentials(!0),y.listenOnce(lv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case $u.NO_ERROR:const C=y.getResponseJson();St(pn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(C)),g(C);break;case $u.TIMEOUT:St(pn,`RPC '${e}' ${p} timed out`),v(new Rt(dt.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const V=y.getStatus();if(St(pn,`RPC '${e}' ${p} failed with status:`,V,"response text:",y.getResponseText()),V>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const q=L?.error;if(q&&q.status&&q.message){const J=(function(H){const rt=H.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(rt)>=0?rt:dt.UNKNOWN})(q.status);v(new Rt(J,q.message))}else v(new Rt(dt.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new Rt(dt.UNAVAILABLE,"Connection failed."));break;default:Ut(9055,{l_:e,streamId:p,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{St(pn,`RPC '${e}' ${p} completed.`)}}));const b=JSON.stringify(o);St(pn,`RPC '${e}' ${p} sending request:`,o),y.send(i,"POST",b,a,15)}))}T_(e,i,a){const o=md(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=cv(),g=uv(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,i,a),v.encodeInitMessageHeaders=!0;const b=h.join("");St(pn,`Creating RPC '${e}' stream ${o}: ${b}`,v);const C=p.createWebChannel(b,v);this.I_(C);let V=!1,L=!1;const q=new YS({Yo:k=>{L?St(pn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(V||(St(pn,`Opening RPC '${e}' stream ${o} transport.`),C.open(),V=!0),St(pn,`RPC '${e}' stream ${o} sending:`,k),C.send(k))},Zo:()=>C.close()}),J=(k,H,rt)=>{k.listen(H,(at=>{try{rt(at)}catch(ft){setTimeout((()=>{throw ft}),0)}}))};return J(C,eo.EventType.OPEN,(()=>{L||(St(pn,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),J(C,eo.EventType.CLOSE,(()=>{L||(L=!0,St(pn,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(C))})),J(C,eo.EventType.ERROR,(k=>{L||(L=!0,Ba(pn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),q.a_(new Rt(dt.UNAVAILABLE,"The operation could not be completed")))})),J(C,eo.EventType.MESSAGE,(k=>{if(!L){const H=k.data[0];ue(!!H,16349);const rt=H,at=rt?.error||rt[0]?.error;if(at){St(pn,`RPC '${e}' stream ${o} received error:`,at);const ft=at.status;let et=(function(w){const T=qe[w];if(T!==void 0)return Hv(T)})(ft),K=at.message;et===void 0&&(et=dt.INTERNAL,K="Unknown error status: "+ft+" with message "+at.message),L=!0,q.a_(new Rt(et,K)),C.close()}else St(pn,`RPC '${e}' stream ${o} received:`,H),q.u_(H)}})),J(g,ov.STAT_EVENT,(k=>{k.stat===id.PROXY?St(pn,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===id.NOPROXY&&St(pn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(s){return new ZT(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,i,a=1e3,o=1.5,h=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=o,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-a);o>0&&St("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="PersistentStream";class r_{constructor(e,i,a,o,h,p,g,v){this.Mi=e,this.S_=a,this.b_=o,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new i_(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===dt.RESOURCE_EXHAUSTED?(nr(i.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===i&&this.G_(a,o)}),(a=>{e((()=>{const o=new Rt(dt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return St(v0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(St(v0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KS extends r_{constructor(e,i,a,o,h,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,p),this.serializer=h}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=tS(this.serializer,e),a=(function(h){if(!("targetChange"in h))return Ht.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?Ht.min():p.readTime?Ci(p.readTime):Ht.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=dd(this.serializer),i.addTarget=(function(h,p){let g;const v=p.target;if(g=od(v)?{documents:iS(h,v)}:{query:rS(h,v).ft},g.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){g.resumeToken=Yv(h,p.resumeToken);const y=cd(h,p.expectedCount);y!==null&&(g.expectedCount=y)}else if(p.snapshotVersion.compareTo(Ht.min())>0){g.readTime=dc(h,p.snapshotVersion.toTimestamp());const y=cd(h,p.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const a=aS(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=dd(this.serializer),i.removeTarget=e,this.q_(i)}}class XS extends r_{constructor(e,i,a,o,h,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=nS(e.writeResults,e.commitTime),a=Ci(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=dd(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>eS(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{}class ZS extends $S{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Rt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(e,hd(i,a),o,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Rt(dt.UNKNOWN,h.toString())}))}Ho(e,i,a,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,g])=>this.connection.Ho(e,hd(i,a),o,p,g,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Rt(dt.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WS{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(i),this.aa=!1):St("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class JS{constructor(e,i,a,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{a.enqueueAndForget((async()=>{Ys(this)&&(St(Bs,"Restarting streams for network reachability change."),await(async function(v){const y=Gt(v);y.Ea.add(4),await To(y),y.Ra.set("Unknown"),y.Ea.delete(4),await jc(y)})(this))}))})),this.Ra=new WS(a,o)}}async function jc(s){if(Ys(s))for(const e of s.da)await e(!0)}async function To(s){for(const e of s.da)await e(!1)}function s_(s,e){const i=Gt(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),Fd(i)?Hd(i):$a(i).O_()&&qd(i,e))}function Bd(s,e){const i=Gt(s),a=$a(i);i.Ia.delete(e),a.O_()&&a_(i,e),i.Ia.size===0&&(a.O_()?a.L_():Ys(i)&&i.Ra.set("Unknown"))}function qd(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ht.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}$a(s).Y_(e)}function a_(s,e){s.Va.Ue(e),$a(s).Z_(e)}function Hd(s){s.Va=new QT({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),$a(s).start(),s.Ra.ua()}function Fd(s){return Ys(s)&&!$a(s).x_()&&s.Ia.size>0}function Ys(s){return Gt(s).Ea.size===0}function l_(s){s.Va=void 0}async function tA(s){s.Ra.set("Online")}async function eA(s){s.Ia.forEach(((e,i)=>{qd(s,e)}))}async function nA(s,e){l_(s),Fd(s)?(s.Ra.ha(e),Hd(s)):s.Ra.set("Unknown")}async function iA(s,e,i){if(s.Ra.set("Online"),e instanceof Gv&&e.state===2&&e.cause)try{await(async function(o,h){const p=h.cause;for(const g of h.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,p),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){St(Bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await mc(s,a)}else if(e instanceof tc?s.Va.Ze(e):e instanceof Fv?s.Va.st(e):s.Va.tt(e),!i.isEqual(Ht.min()))try{const a=await n_(s.localStore);i.compareTo(a)>=0&&await(function(h,p){const g=h.Va.Tt(p);return g.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const b=h.Ia.get(y);b&&h.Ia.set(y,b.withResumeToken(v.resumeToken,p))}})),g.targetMismatches.forEach(((v,y)=>{const b=h.Ia.get(v);if(!b)return;h.Ia.set(v,b.withResumeToken(cn.EMPTY_BYTE_STRING,b.snapshotVersion)),a_(h,v);const C=new zr(b.target,v,y,b.sequenceNumber);qd(h,C)})),h.remoteSyncer.applyRemoteEvent(g)})(s,i)}catch(a){St(Bs,"Failed to raise snapshot:",a),await mc(s,a)}}async function mc(s,e,i){if(!Xa(e))throw e;s.Ea.add(1),await To(s),s.Ra.set("Offline"),i||(i=()=>n_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{St(Bs,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await jc(s)}))}function o_(s,e){return e().catch((i=>mc(s,i,e)))}async function Ic(s){const e=Gt(s),i=Xr(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wd;for(;rA(e);)try{const o=await zS(e.localStore,a);if(o===null){e.Ta.length===0&&i.L_();break}a=o.batchId,sA(e,o)}catch(o){await mc(e,o)}u_(e)&&c_(e)}function rA(s){return Ys(s)&&s.Ta.length<10}function sA(s,e){s.Ta.push(e);const i=Xr(s);i.O_()&&i.X_&&i.ea(e.mutations)}function u_(s){return Ys(s)&&!Xr(s).x_()&&s.Ta.length>0}function c_(s){Xr(s).start()}async function aA(s){Xr(s).ra()}async function lA(s){const e=Xr(s);for(const i of s.Ta)e.ea(i.mutations)}async function oA(s,e,i){const a=s.Ta.shift(),o=Vd.from(a,e,i);await o_(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Ic(s)}async function uA(s,e){e&&Xr(s).X_&&await(async function(a,o){if((function(p){return FT(p)&&p!==dt.ABORTED})(o.code)){const h=a.Ta.shift();Xr(a).B_(),await o_(a,(()=>a.remoteSyncer.rejectFailedWrite(h.batchId,o))),await Ic(a)}})(s,e),u_(s)&&c_(s)}async function _0(s,e){const i=Gt(s);i.asyncQueue.verifyOperationInProgress(),St(Bs,"RemoteStore received new credentials");const a=Ys(i);i.Ea.add(3),await To(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await jc(i)}async function cA(s,e){const i=Gt(s);e?(i.Ea.delete(2),await jc(i)):e||(i.Ea.add(2),await To(i),i.Ra.set("Unknown"))}function $a(s){return s.ma||(s.ma=(function(i,a,o){const h=Gt(i);return h.sa(),new KS(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(s.datastore,s.asyncQueue,{Xo:tA.bind(null,s),t_:eA.bind(null,s),r_:nA.bind(null,s),H_:iA.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Fd(s)?Hd(s):s.Ra.set("Unknown")):(await s.ma.stop(),l_(s))}))),s.ma}function Xr(s){return s.fa||(s.fa=(function(i,a,o){const h=Gt(i);return h.sa(),new XS(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:aA.bind(null,s),r_:uA.bind(null,s),ta:lA.bind(null,s),na:oA.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ic(s)):(await s.fa.stop(),s.Ta.length>0&&(St(Bs,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,i,a,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=h,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,h){const p=Date.now()+a,g=new Gd(e,i,p,o,h);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(s,e){if(nr("AsyncQueue",`${e}: ${s}`),Xa(s))return new Rt(dt.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{static emptySet(e){return new Ua(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Mt.comparator(i.key,a.key):(i,a)=>Mt.comparator(i.key,a.key),this.keyedMap=no(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Ua)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new Ua;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.ga=new Re(Mt.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Ut(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class Ya{constructor(e,i,a,o,h,p,g,v,y){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,i,a,o,h){const p=[];return i.forEach((g=>{p.push({type:0,doc:g})})),new Ya(e,i,Ua.emptySet(i),p,a,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class fA{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const o=Gt(i),h=o.queries;o.queries=b0(),h.forEach(((p,g)=>{for(const v of g.Sa)v.onError(a)}))})(this,new Rt(dt.ABORTED,"Firestore shutting down"))}}function b0(){return new Fs((s=>jv(s)),Ac)}async function dA(s,e){const i=Gt(s);let a=3;const o=e.query;let h=i.queries.get(o);h?!h.ba()&&e.Da()&&(a=2):(h=new hA,a=e.Da()?0:1);try{switch(a){case 0:h.wa=await i.onListen(o,!0);break;case 1:h.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(p){const g=Yd(p,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(g)}i.queries.set(o,h),h.Sa.push(e),e.va(i.onlineState),h.wa&&e.Fa(h.wa)&&Qd(i)}async function pA(s,e){const i=Gt(s),a=e.query;let o=3;const h=i.queries.get(a);if(h){const p=h.Sa.indexOf(e);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?o=e.Da()?0:1:!h.ba()&&e.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function mA(s,e){const i=Gt(s);let a=!1;for(const o of e){const h=o.query,p=i.queries.get(h);if(p){for(const g of p.Sa)g.Fa(o)&&(a=!0);p.wa=o}}a&&Qd(i)}function gA(s,e,i){const a=Gt(s),o=a.queries.get(e);if(o)for(const h of o.Sa)h.onError(i);a.queries.delete(e)}function Qd(s){s.Ca.forEach((e=>{e.next()}))}var gd,E0;(E0=gd||(gd={})).Ma="default",E0.Cache="cache";class yA{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ya(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.key=e}}class f_{constructor(e){this.key=e}}class vA{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ne(),this.mutatedKeys=ne(),this.eu=Iv(e),this.tu=new Ua(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new x0,o=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,p=o,g=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,C)=>{const V=o.get(b),L=wc(this.query,C)?C:null,q=!!V&&this.mutatedKeys.has(V.key),J=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let k=!1;V&&L?V.data.isEqual(L.data)?q!==J&&(a.track({type:3,doc:L}),k=!0):this.su(V,L)||(a.track({type:2,doc:L}),k=!0,(v&&this.eu(L,v)>0||y&&this.eu(L,y)<0)&&(g=!0)):!V&&L?(a.track({type:0,doc:L}),k=!0):V&&!L&&(a.track({type:1,doc:V}),k=!0,(v||y)&&(g=!0)),k&&(L?(p=p.add(L),h=J?h.add(b):h.delete(b)):(p=p.delete(b),h=h.delete(b)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const b=this.query.limitType==="F"?p.last():p.first();p=p.delete(b.key),h=h.delete(b.key),a.track({type:1,doc:b})}return{tu:p,iu:a,Cs:g,mutatedKeys:h}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((b,C)=>(function(L,q){const J=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ut(20277,{Rt:k})}};return J(L)-J(q)})(b.type,C.type)||this.eu(b.doc,C.doc))),this.ou(a),o=o??!1;const g=i&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,y=v!==this.Za;return this.Za=v,p.length!==0||y?{snapshot:new Ya(this.query,e.tu,h,p,e.mutatedKeys,v===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new x0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ne(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new f_(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new h_(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=ne();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return Ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kd="SyncEngine";class _A{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class xA{constructor(e){this.key=e,this.hu=!1}}class bA{constructor(e,i,a,o,h,p){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Fs((g=>jv(g)),Ac),this.Iu=new Map,this.Eu=new Set,this.du=new Re(Mt.comparator),this.Au=new Map,this.Ru=new Pd,this.Vu={},this.mu=new Map,this.fu=Ga.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EA(s,e,i=!0){const a=v_(s);let o;const h=a.Tu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.lu()):o=await d_(a,e,i,!0),o}async function TA(s,e){const i=v_(s);await d_(i,e,!0,!1)}async function d_(s,e,i,a){const o=await LS(s.localStore,Ai(e)),h=o.targetId,p=s.sharedClientState.addLocalQueryTarget(h,i);let g;return a&&(g=await SA(s,e,h,p==="current",o.resumeToken)),s.isPrimaryClient&&i&&s_(s.remoteStore,o),g}async function SA(s,e,i,a,o){s.pu=(C,V,L)=>(async function(J,k,H,rt){let at=k.view.ru(H);at.Cs&&(at=await p0(J.localStore,k.query,!1).then((({documents:N})=>k.view.ru(N,at))));const ft=rt&&rt.targetChanges.get(k.targetId),et=rt&&rt.targetMismatches.get(k.targetId)!=null,K=k.view.applyChanges(at,J.isPrimaryClient,ft,et);return S0(J,k.targetId,K.au),K.snapshot})(s,C,V,L);const h=await p0(s.localStore,e,!0),p=new vA(e,h.Qs),g=p.ru(h.documents),v=Eo.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",o),y=p.applyChanges(g,s.isPrimaryClient,v);S0(s,i,y.au);const b=new _A(e,i,p);return s.Tu.set(e,b),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),y.snapshot}async function AA(s,e,i){const a=Gt(s),o=a.Tu.get(e),h=a.Iu.get(o.targetId);if(h.length>1)return a.Iu.set(o.targetId,h.filter((p=>!Ac(p,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await pd(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Bd(a.remoteStore,o.targetId),yd(a,o.targetId)})).catch(Ka)):(yd(a,o.targetId),await pd(a.localStore,o.targetId,!0))}async function wA(s,e){const i=Gt(s),a=i.Tu.get(e),o=i.Iu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Bd(i.remoteStore,a.targetId))}async function CA(s,e,i){const a=VA(s);try{const o=await(function(p,g){const v=Gt(p),y=Te.now(),b=g.reduce(((L,q)=>L.add(q.key)),ne());let C,V;return v.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let q=ir(),J=ne();return v.Ns.getEntries(L,b).next((k=>{q=k,q.forEach(((H,rt)=>{rt.isValidDocument()||(J=J.add(H))}))})).next((()=>v.localDocuments.getOverlayedDocuments(L,q))).next((k=>{C=k;const H=[];for(const rt of g){const at=zT(rt,C.get(rt.key).overlayedDocument);at!=null&&H.push(new Gs(rt.key,at,Sv(at.value.mapValue),wi.exists(!0)))}return v.mutationQueue.addMutationBatch(L,y,H,g)})).next((k=>{V=k;const H=k.applyToLocalDocumentSet(C,J);return v.documentOverlayCache.saveOverlays(L,k.batchId,H)}))})).then((()=>({batchId:V.batchId,changes:Vv(C)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(p,g,v){let y=p.Vu[p.currentUser.toKey()];y||(y=new Re(ee)),y=y.insert(g,v),p.Vu[p.currentUser.toKey()]=y})(a,o.batchId,i),await So(a,o.changes),await Ic(a.remoteStore)}catch(o){const h=Yd(o,"Failed to persist write");i.reject(h)}}async function p_(s,e){const i=Gt(s);try{const a=await PS(i.localStore,e);e.targetChanges.forEach(((o,h)=>{const p=i.Au.get(h);p&&(ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?p.hu=!0:o.modifiedDocuments.size>0?ue(p.hu,14607):o.removedDocuments.size>0&&(ue(p.hu,42227),p.hu=!1))})),await So(i,a,e)}catch(a){await Ka(a)}}function T0(s,e,i){const a=Gt(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.Tu.forEach(((h,p)=>{const g=p.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(p,g){const v=Gt(p);v.onlineState=g;let y=!1;v.queries.forEach(((b,C)=>{for(const V of C.Sa)V.va(g)&&(y=!0)})),y&&Qd(v)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function RA(s,e,i){const a=Gt(s);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Au.get(e),h=o&&o.key;if(h){let p=new Re(Mt.comparator);p=p.insert(h,gn.newNoDocument(h,Ht.min()));const g=ne().add(h),v=new Dc(Ht.min(),new Map,new Re(ee),p,g);await p_(a,v),a.du=a.du.remove(h),a.Au.delete(e),Xd(a)}else await pd(a.localStore,e,!1).then((()=>yd(a,e,i))).catch(Ka)}async function DA(s,e){const i=Gt(s),a=e.batch.batchId;try{const o=await kS(i.localStore,e);g_(i,a,null),m_(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await So(i,o)}catch(o){await Ka(o)}}async function NA(s,e,i){const a=Gt(s);try{const o=await(function(p,g){const v=Gt(p);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return v.mutationQueue.lookupMutationBatch(y,g).next((C=>(ue(C!==null,37113),b=C.keys(),v.mutationQueue.removeMutationBatch(y,C)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,b,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>v.localDocuments.getDocuments(y,b)))}))})(a.localStore,e);g_(a,e,i),m_(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await So(a,o)}catch(o){await Ka(o)}}function m_(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function g_(s,e,i){const a=Gt(s);let o=a.Vu[a.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function yd(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),i&&s.Pu.yu(a,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||y_(s,a)}))}function y_(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(Bd(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),Xd(s))}function S0(s,e,i){for(const a of i)a instanceof h_?(s.Ru.addReference(a.key,e),jA(s,a)):a instanceof f_?(St(Kd,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||y_(s,a.key)):Ut(19791,{wu:a})}function jA(s,e){const i=e.key,a=i.path.canonicalString();s.du.get(i)||s.Eu.has(a)||(St(Kd,"New document in limbo: "+i),s.Eu.add(a),Xd(s))}function Xd(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new Mt(Ee.fromString(e)),a=s.fu.next();s.Au.set(a,new xA(i)),s.du=s.du.insert(i,a),s_(s.remoteStore,new zr(Ai(jd(i.path)),a,"TargetPurposeLimboResolution",bc.ce))}}async function So(s,e,i){const a=Gt(s),o=[],h=[],p=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,v)=>{p.push(a.pu(v,e,i).then((y=>{if((y||i)&&a.isPrimaryClient){const b=y?!y.fromCache:i?.targetChanges.get(v.targetId)?.current;a.sharedClientState.updateQueryState(v.targetId,b?"current":"not-current")}if(y){o.push(y);const b=zd.As(v.targetId,y);h.push(b)}})))})),await Promise.all(p),a.Pu.H_(o),await(async function(v,y){const b=Gt(v);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>ct.forEach(y,(V=>ct.forEach(V.Es,(L=>b.persistence.referenceDelegate.addReference(C,V.targetId,L))).next((()=>ct.forEach(V.ds,(L=>b.persistence.referenceDelegate.removeReference(C,V.targetId,L)))))))))}catch(C){if(!Xa(C))throw C;St(Ld,"Failed to update sequence numbers: "+C)}for(const C of y){const V=C.targetId;if(!C.fromCache){const L=b.Ms.get(V),q=L.snapshotVersion,J=L.withLastLimboFreeSnapshotVersion(q);b.Ms=b.Ms.insert(V,J)}}})(a.localStore,h))}async function IA(s,e){const i=Gt(s);if(!i.currentUser.isEqual(e)){St(Kd,"User change. New user:",e.toKey());const a=await e_(i.localStore,e);i.currentUser=e,(function(h,p){h.mu.forEach((g=>{g.forEach((v=>{v.reject(new Rt(dt.CANCELLED,p))}))})),h.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await So(i,a.Ls)}}function MA(s,e){const i=Gt(s),a=i.Au.get(e);if(a&&a.hu)return ne().add(a.key);{let o=ne();const h=i.Iu.get(e);if(!h)return o;for(const p of h){const g=i.Tu.get(p);o=o.unionWith(g.view.nu)}return o}}function v_(s){const e=Gt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=p_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RA.bind(null,e),e.Pu.H_=mA.bind(null,e.eventManager),e.Pu.yu=gA.bind(null,e.eventManager),e}function VA(s){const e=Gt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NA.bind(null,e),e}class gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return OS(this.persistence,new IS,e.initialUser,this.serializer)}Cu(e){return new t_(Ud.mi,this.serializer)}Du(e){return new qS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gc.provider={build:()=>new gc};class OA extends gc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){ue(this.persistence.referenceDelegate instanceof pc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new yS(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new t_((a=>pc.mi(a,i)),this.serializer)}}class vd{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>T0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=IA.bind(null,this.syncEngine),await cA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fA})()}createDatastore(e){const i=Nc(e.databaseInfo.databaseId),a=(function(h){return new QS(h)})(e.databaseInfo);return(function(h,p,g,v){return new ZS(h,p,g,v)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,o,h,p,g){return new JS(a,o,h,p,g)})(this.localStore,this.datastore,e.asyncQueue,(i=>T0(this.syncEngine,i,0)),(function(){return y0.v()?new y0:new HS})())}createSyncEngine(e,i){return(function(o,h,p,g,v,y,b){const C=new bA(o,h,p,g,v,y);return b&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Gt(i);St(Bs,"RemoteStore shutting down."),a.Ea.add(5),await To(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vd.provider={build:()=>new vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class PA{constructor(e,i,a,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=Sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,(async p=>{St($r,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(a,(p=>(St($r,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=Yd(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function $f(s,e){s.asyncQueue.verifyOperationInProgress(),St($r,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await e_(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function A0(s,e){s.asyncQueue.verifyOperationInProgress();const i=await UA(s);St($r,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((a=>_0(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>_0(e.remoteStore,o))),s._onlineComponents=e}async function UA(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){St($r,"Using user provided OfflineComponentProvider");try{await $f(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(o){return o.name==="FirebaseError"?o.code===dt.FAILED_PRECONDITION||o.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;Ba("Error using user provided cache. Falling back to memory cache: "+i),await $f(s,new gc)}}else St($r,"Using default OfflineComponentProvider"),await $f(s,new OA(void 0));return s._offlineComponents}async function __(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(St($r,"Using user provided OnlineComponentProvider"),await A0(s,s._uninitializedComponentsProvider._online)):(St($r,"Using default OnlineComponentProvider"),await A0(s,new vd))),s._onlineComponents}function zA(s){return __(s).then((e=>e.syncEngine))}async function w0(s){const e=await __(s),i=e.eventManager;return i.onListen=EA.bind(null,e.syncEngine),i.onUnlisten=AA.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=TA.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=wA.bind(null,e.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="firestore.googleapis.com",R0=!0;class D0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Rt(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b_,this.ssl=R0}else this.host=e.host,this.ssl=e.ssl??R0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mS)throw new Rt(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x_(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Rt(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new qE;switch(a.type){case"firstParty":return new YE(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Rt(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=C0.get(i);a&&(St("ComponentProvider","Removing Datastore"),C0.delete(i),a.terminate())})(this),Promise.resolve()}}function LA(s,e,i,a={}){s=Ps(s,Mc);const o=xc(e),h=s._getSettings(),p={...h,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${i}`;o&&(G0(`https://${g}`),Q0("Firestore",!0)),h.host!==b_&&h.host!==g&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:g,ssl:o,emulatorOptions:a};if(!rc(v,p)&&(s._setSettings(v),a.mockUserToken)){let y,b;if(typeof a.mockUserToken=="string")y=a.mockUserToken,b=mn.MOCK_USER;else{y=Y0(a.mockUserToken,s._app?.options.projectId);const C=a.mockUserToken.sub||a.mockUserToken.user_id;if(!C)throw new Rt(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new mn(C)}s._authCredentials=new HE(new fv(y,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Vc(this.firestore,e,this._query)}}class $e{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(xo(i,$e._jsonSchema))return new $e(e,a||null,new Mt(Ee.fromString(i.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:He("string",$e._jsonSchemaVersion),referencePath:He("string")};class Fr extends Vc{constructor(e,i,a){super(e,i,jd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Mt(e))}withConverter(e){return new Fr(this.firestore,e,this._path)}}function Ao(s,e,...i){if(s=zs(s),dv("collection","path",e),s instanceof Mc){const a=Ee.fromString(e,...i);return qy(a),new Fr(s,null,a)}{if(!(s instanceof $e||s instanceof Fr))throw new Rt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ee.fromString(e,...i));return qy(a),new Fr(s.firestore,null,a)}}function bn(s,e,...i){if(s=zs(s),arguments.length===1&&(e=Sd.newId()),dv("doc","path",e),s instanceof Mc){const a=Ee.fromString(e,...i);return By(a),new $e(s,null,new Mt(a))}{if(!(s instanceof $e||s instanceof Fr))throw new Rt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ee.fromString(e,...i));return By(a),new $e(s.firestore,s instanceof Fr?s.converter:null,new Mt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="AsyncQueue";class j0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new i_(this,"async_queue_retry"),this._c=()=>{const a=Xf();a&&St(N0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=Xf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Xf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xa(e))throw e;St(N0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",I0(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const o=Gd.createAndSchedule(this,e,i,a,(h=>this.hc(h)));return this.tc.push(o),o}uc(){this.nc&&Ut(47125,{Pc:I0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function I0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(s){return(function(i,a){if(typeof i!="object"||i===null)return!1;const o=i;for(const h of a)if(h in o&&typeof o[h]=="function")return!0;return!1})(s,["next","error","complete"])}class _o extends Mc{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new j0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j0(e),this._firestoreClient=void 0,await e}}}function BA(s,e){const i=typeof s=="object"?s:nv(),a=typeof s=="string"?s:lc,o=W0(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const h=H0("firestore");h&&LA(o,...h)}return o}function E_(s){if(s._terminated)throw new Rt(dt.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||qA(s),s._firestoreClient}function qA(s){const e=s._freezeSettings(),i=(function(o,h,p,g){return new uT(o,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,x_(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new PA(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(o){const h=o?._online.build();return{_offline:o?._offline.build(h),_online:h}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(cn.fromBase64String(e))}catch(i){throw new Rt(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new $n(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xo(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:He("string",$n._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new Rt(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new Rt(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new Rt(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(xo(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:He("string",Ri._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==o[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xo(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Di(e.vectorValues);throw new Rt(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:He("string",Di._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=/^__.*__$/;class FA{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,i,this.fieldTransforms):new bo(e,this.data,i,this.fieldTransforms)}}function S_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ut(40011,{Ac:s})}}class Zd{constructor(e,i,a,o,h,p){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(S_(this.Ac)&&HA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GA{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Nc(e)}Cc(e,i,a,o=!1){return new Zd({Ac:e,methodName:i,Dc:a,path:un.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function YA(s){const e=s._freezeSettings(),i=Nc(s._databaseId);return new GA(s._databaseId,!!e.ignoreUndefinedProperties,i)}function QA(s,e,i,a,o,h={}){const p=s.Cc(h.merge||h.mergeFields?2:0,e,i,o);R_("Data must be an object, but it was:",p,a);const g=w_(a,p);let v,y;if(h.merge)v=new ai(p.fieldMask),y=p.fieldTransforms;else if(h.mergeFields){const b=[];for(const C of h.mergeFields){const V=KA(e,C,i);if(!p.contains(V))throw new Rt(dt.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);$A(b,V)||b.push(V)}v=new ai(b),y=p.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,y=p.fieldTransforms;return new FA(new Xn(g),v,y)}function A_(s,e){if(C_(s=zs(s)))return R_("Unsupported field value:",e,s),w_(s,e);if(s instanceof T_)return(function(a,o){if(!S_(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(o);h&&o.fieldTransforms.push(h)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const h=[];let p=0;for(const g of a){let v=A_(g,o.wc(p));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),p++}return{arrayValue:{values:h}}})(s,e)}return(function(a,o){if((a=zs(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return MT(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=Te.fromDate(a);return{timestampValue:dc(o.serializer,h)}}if(a instanceof Te){const h=new Te(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:dc(o.serializer,h)}}if(a instanceof Ri)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof $n)return{bytesValue:Yv(o.serializer,a._byteString)};if(a instanceof $e){const h=o.databaseId,p=a.firestore._databaseId;if(!p.isEqual(h))throw o.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:kd(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Di)return(function(p,g){return{mapValue:{fields:{[Ev]:{stringValue:Tv},[oc]:{arrayValue:{values:p.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Id(g.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Ad(a)}`)})(s,e)}function w_(s,e){const i={};return gv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(s,((a,o)=>{const h=A_(o,e.mc(a));h!=null&&(i[a]=h)})),{mapValue:{fields:i}}}function C_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Te||s instanceof Ri||s instanceof $n||s instanceof $e||s instanceof T_||s instanceof Di)}function R_(s,e,i){if(!C_(i)||!pv(i)){const a=Ad(i);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function KA(s,e,i){if((e=zs(e))instanceof $d)return e._internalPath;if(typeof e=="string")return D_(s,e);throw yc("Field path arguments must be of type string or ",s,!1,void 0,i)}const XA=new RegExp("[~\\*/\\[\\]]");function D_(s,e,i){if(e.search(XA)>=0)throw yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new $d(...e.split("."))._internalPath}catch{throw yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function yc(s,e,i,a,o){const h=a&&!a.isEmpty(),p=o!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(h||p)&&(v+=" (found",h&&(v+=` in field ${a}`),p&&(v+=` in document ${o}`),v+=")"),new Rt(dt.INVALID_ARGUMENT,g+s+v)}function $A(s,e){return s.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,i,a,o,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(j_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class ZA extends N_{data(){return super.data()}}function j_(s,e){return typeof e=="string"?D_(s,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Rt(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JA{convertValue(e,i="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Ut(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return Hs(e,((o,h)=>{a[o]=this.convertValue(h,i)})),a}convertVectorValue(e){const i=e.fields?.[oc].arrayValue?.values?.map((a=>Ue(a.doubleValue)));return new Di(i)}convertGeoPoint(e){return new Ri(Ue(e.latitude),Ue(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=Tc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(po(e));default:return null}}convertTimestamp(e){const i=Yr(e);return new Te(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=Ee.fromString(e);ue(Wv(a),9688,{name:e});const o=new mo(a.get(1),a.get(3)),h=new Mt(a.popFirst(5));return o.isEqual(i)||nr(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(s,e,i){let a;return a=s?s.toFirestore(e):e,a}class ro{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Us extends N_{constructor(e,i,a,o,h,p){super(e,i,a,o,p),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(j_("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Us._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:He("string",Us._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class ec extends Us{data(e={}){return super.data(e)}}class za{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new ro(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new ec(this._firestore,this._userDataWriter,a.key,a,new ro(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Rt(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,h){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map((g=>{const v=new ec(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ro(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:p++}}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>h||g.type!==3)).map((g=>{const v=new ec(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ro(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return g.type!==0&&(y=p.indexOf(g.doc.key),p=p.delete(g.doc.key)),g.type!==1&&(p=p.add(g.doc),b=p.indexOf(g.doc.key)),{type:e2(g.type),doc:v,oldIndex:y,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],o=[];return this.docs.forEach((h=>{h._document!==null&&(i.push(h._document),a.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),o.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ut(61501,{type:s})}}za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:He("string",za._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class I_ extends JA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,i)}}function Mi(s,e,i){s=Ps(s,$e);const a=Ps(s.firestore,_o),o=t2(s.converter,e);return M_(a,[QA(YA(a),"setDoc",s._key,o,s.converter!==null,i).toMutation(s._key,wi.none())])}function wo(s){return M_(Ps(s.firestore,_o),[new Md(s._key,wi.none())])}function Co(s,...e){s=zs(s);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||M0(e[a])||(i=e[a++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(M0(e[a])){const v=e[a];e[a]=v.next?.bind(v),e[a+1]=v.error?.bind(v),e[a+2]=v.complete?.bind(v)}let h,p,g;if(s instanceof $e)p=Ps(s.firestore,_o),g=jd(s._key.path),h={next:v=>{e[a]&&e[a](n2(p,s,v))},error:e[a+1],complete:e[a+2]};else{const v=Ps(s,Vc);p=Ps(v.firestore,_o),g=v._query;const y=new I_(p);h={next:b=>{e[a]&&e[a](new za(p,y,v,b))},error:e[a+1],complete:e[a+2]},WA(s._query)}return(function(y,b,C,V){const L=new kA(V),q=new yA(b,L,C);return y.asyncQueue.enqueueAndForget((async()=>dA(await w0(y),q))),()=>{L.Nu(),y.asyncQueue.enqueueAndForget((async()=>pA(await w0(y),q)))}})(E_(p),g,o,h)}function M_(s,e){return(function(a,o){const h=new ks;return a.asyncQueue.enqueueAndForget((async()=>CA(await zA(a),o,h))),h.promise})(E_(s),e)}function n2(s,e,i){const a=i.docs.get(e._key),o=new I_(s);return new Us(s,o,e._key,a,new ro(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(o){Qa=o})(tv),co(new La("firestore",((a,{instanceIdentifier:o,options:h})=>{const p=a.getProvider("app").getImmediate(),g=new _o(new FE(a.getProvider("auth-internal")),new QE(p,a.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Rt(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(y.options.projectId,b)})(p,o),p);return h={useFetchStreams:i,...h},g._setSettings(h),g}),"PUBLIC").setMultipleInstances(!0)),qr(Py,Uy,e),qr(Py,Uy,"esm2020")})();var i2="firebase",r2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(i2,r2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="firebasestorage.googleapis.com",s2="storageBucket",a2=120*1e3,l2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends qs{constructor(e,i,a=0){super(Zf(e),`Firebase Storage: ${i} (${Zf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ii;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ii||(Ii={}));function Zf(s){return"storage/"+s}function o2(){const s="An unknown error occurred, please check the error payload for server response.";return new Vi(Ii.UNKNOWN,s)}function u2(){return new Vi(Ii.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c2(){return new Vi(Ii.CANCELED,"User canceled the upload/download.")}function h2(s){return new Vi(Ii.INVALID_URL,"Invalid URL '"+s+"'.")}function f2(s){return new Vi(Ii.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function V0(s){return new Vi(Ii.INVALID_ARGUMENT,s)}function O_(){return new Vi(Ii.APP_DELETED,"The Firebase app was deleted.")}function d2(s){return new Vi(Ii.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let a;try{a=li.makeFromUrl(e,i)}catch{return new li(e,"")}if(a.path==="")return a;throw f2(e)}static makeFromUrl(e,i){let a=null;const o="([A-Za-z0-9.\\-_]+)";function h(ft){ft.path.charAt(ft.path.length-1)==="/"&&(ft.path_=ft.path_.slice(0,-1))}const p="(/(.*))?$",g=new RegExp("^gs://"+o+p,"i"),v={bucket:1,path:3};function y(ft){ft.path_=decodeURIComponent(ft.path)}const b="v[A-Za-z0-9_]+",C=i.replace(/[.]/g,"\\."),V="(/([^?#]*).*)?$",L=new RegExp(`^https?://${C}/${b}/b/${o}/o${V}`,"i"),q={bucket:1,path:3},J=i===V_?"(?:storage.googleapis.com|storage.cloud.google.com)":i,k="([^?#]*)",H=new RegExp(`^https?://${J}/${o}/${k}`,"i"),at=[{regex:g,indices:v,postModify:h},{regex:L,indices:q,postModify:y},{regex:H,indices:{bucket:1,path:2},postModify:y}];for(let ft=0;ft<at.length;ft++){const et=at[ft],K=et.regex.exec(e);if(K){const N=K[et.indices.bucket];let w=K[et.indices.path];w||(w=""),a=new li(N,w),et.postModify(a);break}}if(a==null)throw h2(e);return a}}class p2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(s,e,i){let a=1,o=null,h=null,p=!1,g=0;function v(){return g===2}let y=!1;function b(...k){y||(y=!0,e.apply(null,k))}function C(k){o=setTimeout(()=>{o=null,s(L,v())},k)}function V(){h&&clearTimeout(h)}function L(k,...H){if(y){V();return}if(k){V(),b.call(null,k,...H);return}if(v()||p){V(),b.call(null,k,...H);return}a<64&&(a*=2);let at;g===1?(g=2,at=0):at=(a+Math.random())*1e3,C(at)}let q=!1;function J(k){q||(q=!0,V(),!y&&(o!==null?(k||(g=2),clearTimeout(o),C(0)):k||(g=1)))}return C(0),h=setTimeout(()=>{p=!0,J(!0)},i),J}function g2(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(s){return s!==void 0}function O0(s,e,i,a){if(a<e)throw V0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>i)throw V0(`Invalid value for '${s}'. Expected ${i} or less.`)}function v2(s){const e=encodeURIComponent;let i="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);i=i+o+"&"}return i=i.slice(0,-1),i}var vc;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(vc||(vc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(s,e){const i=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,h=e.indexOf(s)!==-1;return i||o||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,i,a,o,h,p,g,v,y,b,C,V=!0,L=!1){this.url_=e,this.method_=i,this.headers_=a,this.body_=o,this.successCodes_=h,this.additionalRetryCodes_=p,this.callback_=g,this.errorCallback_=v,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=C,this.retry=V,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,J)=>{this.resolve_=q,this.reject_=J,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Xu(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const p=g=>{const v=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,y)};this.progressCallback_!==null&&h.addUploadProgressListener(p),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(p),this.pendingConnection_=null;const g=h.getErrorCode()===vc.NO_ERROR,v=h.getStatus();if(!g||_2(v,this.additionalRetryCodes_)&&this.retry){const b=h.getErrorCode()===vc.ABORT;a(!1,new Xu(!1,null,b));return}const y=this.successCodes_.indexOf(v)!==-1;a(!0,new Xu(y,h))})},i=(a,o)=>{const h=this.resolve_,p=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const v=this.callback_(g,g.getResponse());y2(v)?h(v):h()}catch(v){p(v)}else if(g!==null){const v=o2();v.serverResponse=g.getErrorText(),this.errorCallback_?p(this.errorCallback_(g,v)):p(v)}else if(o.canceled){const v=this.appDelete_?O_():c2();p(v)}else{const v=u2();p(v)}};this.canceled_?i(!1,new Xu(!1,null,!0)):this.backoffId_=m2(e,i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xu{constructor(e,i,a){this.wasSuccessCode=e,this.connection=i,this.canceled=!!a}}function b2(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function E2(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T2(s,e){e&&(s["X-Firebase-GMPID"]=e)}function S2(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function A2(s,e,i,a,o,h,p=!0,g=!1){const v=v2(s.urlParams),y=s.url+v,b=Object.assign({},s.headers);return T2(b,e),b2(b,i),E2(b,h),S2(b,a),new x2(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,p,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function C2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,i){this._service=e,i instanceof li?this._location=i:this._location=li.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new _c(e,i)}get root(){const e=new li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C2(this._location.path)}get storage(){return this._service}get parent(){const e=w2(this._location.path);if(e===null)return null;const i=new li(this._location.bucket,e);return new _c(this._service,i)}_throwIfRoot(e){if(this._location.path==="")throw d2(e)}}function k0(s,e){const i=e?.[s2];return i==null?null:li.makeFromBucketSpec(i,s)}function R2(s,e,i,a={}){s.host=`${e}:${i}`;const o=xc(e);o&&(G0(`https://${s.host}/b`),Q0("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:h}=a;h&&(s._overrideAuthToken=typeof h=="string"?h:Y0(h,s.app.options.projectId))}class D2{constructor(e,i,a,o,h,p=!1){this.app=e,this._authProvider=i,this._appCheckProvider=a,this._url=o,this._firebaseVersion=h,this._isUsingEmulator=p,this._bucket=null,this._host=V_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a2,this._maxUploadRetryTime=l2,this._requests=new Set,o!=null?this._bucket=li.makeFromBucketSpec(o,this._host):this._bucket=k0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=li.makeFromBucketSpec(this._url,e):this._bucket=k0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const i=await e.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if(J0(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _c(this,e)}_makeRequest(e,i,a,o,h=!0){if(this._deleted)return new p2(O_());{const p=A2(e,this._appId,a,o,i,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(p),p.getPromise().then(()=>this._requests.delete(p),()=>this._requests.delete(p)),p}}async makeRequestWithTokens(e,i){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,i,a,o).getPromise()}}const P0="@firebase/storage",U0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="storage";function N2(s=nv(),e){s=zs(s);const a=W0(s,k_).getImmediate({identifier:e}),o=H0("storage");return o&&j2(a,...o),a}function j2(s,e,i,a={}){R2(s,e,i,a)}function I2(s,{instanceIdentifier:e}){const i=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new D2(i,a,o,e,tv)}function M2(){co(new La(k_,I2,"PUBLIC").setMultipleInstances(!0)),qr(P0,U0,""),qr(P0,U0,"esm2020")}M2();const V2={apiKey:"AIzaSyAZBf9fUWZoXnYJyBvBGEvpiu7DbHkG5Iw",authDomain:"crm-ver2.firebaseapp.com",projectId:"crm-ver2",storageBucket:"crm-ver2.firebasestorage.app",messagingSenderId:"993359540287",appId:"1:993359540287:web:43ad484af7c6616780088a"},P_=ev(V2),Fe=BA(P_);N2(P_);const Oc="customers",kc="activities",Pc="meetings",Uc="propertySelections",zc="properties",O2=async s=>{try{const e=s.map(i=>Mi(bn(Fe,Oc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving customers:",e)}},nc=async s=>{try{await Mi(bn(Fe,Oc,s.id),s)}catch(e){console.error("Error saving customer:",e)}},U_=async s=>{try{await wo(bn(Fe,Oc,s))}catch(e){console.error("Error deleting customer:",e)}},z_=s=>Co(Ao(Fe,Oc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in customers subscription:",e)}),k2=async s=>{try{const e=s.map(i=>Mi(bn(Fe,kc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving activities:",e)}},L_=async s=>{try{await Mi(bn(Fe,kc,s.id),s)}catch(e){console.error("Error saving activity:",e)}},B_=async s=>{try{await wo(bn(Fe,kc,s))}catch(e){console.error("Error deleting activity:",e)}},q_=s=>Co(Ao(Fe,kc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in activities subscription:",e)}),P2=async s=>{try{const e=s.map(i=>Mi(bn(Fe,Pc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving meetings:",e)}},H_=async s=>{try{await Mi(bn(Fe,Pc,s.id),s)}catch(e){console.error("Error saving meeting:",e)}},F_=async s=>{try{await wo(bn(Fe,Pc,s))}catch(e){console.error("Error deleting meeting:",e)}},G_=s=>Co(Ao(Fe,Pc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in meetings subscription:",e)}),U2=async s=>{try{const e=s.map(i=>Mi(bn(Fe,Uc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving property selections:",e)}},Y_=async s=>{try{await Mi(bn(Fe,Uc,s.id),s)}catch(e){console.error("Error saving property selection:",e)}},Q_=async s=>{try{await wo(bn(Fe,Uc,s))}catch(e){console.error("Error deleting property selection:",e)}},K_=s=>Co(Ao(Fe,Uc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in property selections subscription:",e)}),X_=async s=>{try{const e=s.map(i=>Mi(bn(Fe,zc,i.id),i));await Promise.all(e)}catch(e){console.error("Error saving properties:",e)}},$_=async s=>{try{await Mi(bn(Fe,zc,s.id),s)}catch(e){console.error("Error saving property:",e)}},Z_=async s=>{try{await wo(bn(Fe,zc,s))}catch(e){console.error("Error deleting property:",e)}},W_=s=>Co(Ao(Fe,zc),e=>{const i=e.docs.map(a=>({id:a.id,...a.data()}));s(i)},e=>{console.error("Error in properties subscription:",e)}),z2=Object.freeze(Object.defineProperty({__proto__:null,deleteActivity:B_,deleteCustomer:U_,deleteMeeting:F_,deleteProperty:Z_,deletePropertySelection:Q_,saveActivities:k2,saveActivity:L_,saveCustomer:nc,saveCustomers:O2,saveMeeting:H_,saveMeetings:P2,saveProperties:X_,saveProperty:$_,savePropertySelection:Y_,savePropertySelections:U2,subscribeToActivities:q_,subscribeToCustomers:z_,subscribeToMeetings:G_,subscribeToProperties:W_,subscribeToPropertySelections:K_},Symbol.toStringTag,{value:"Module"}));new Date().toISOString(),new Date().toISOString(),new Date().toISOString();function L2(){const[s,e]=pt.useState([]),[i,a]=pt.useState([]),[o,h]=pt.useState([]),[p,g]=pt.useState([]),[v,y]=pt.useState([]),[b,C]=pt.useState(null),[V,L]=pt.useState(null),[q,J]=pt.useState(!1),[k,H]=pt.useState(!1),[rt,at]=pt.useState(null),[ft,et]=pt.useState(null),[K,N]=pt.useState(""),[w,T]=pt.useState(""),[j,D]=pt.useState(null),[R,S]=pt.useState(!1),[mt,xt]=pt.useState(""),[O,nt]=pt.useState(!1),ht=pt.useRef(null);pt.useEffect(()=>{const it=z_(Pt=>{e(Pt)}),Vt=q_(Pt=>{a(Pt)}),jt=G_(Pt=>{h(Pt)}),$t=K_(Pt=>{g(Pt)}),Et=W_(Pt=>{y(Pt)});return()=>{it(),Vt(),jt(),$t(),Et()}},[]),pt.useEffect(()=>{if(s.length===0||o.length===0)return;const it=new Date;it.setHours(0,0,0,0),s.forEach(Vt=>{o.filter(Et=>Et.customerId===Vt.id).some(Et=>{const Pt=new Date(Et.date);return Pt.setHours(0,0,0,0),Pt<it})&&Vt.status===""&&nc({...Vt,status:""})})},[s,o]);const vt=it=>{mt===""?(N(it),D(null)):T(it)},I=it=>{D(it)},$=it=>{b===it.id?C(null):C(it.id)},z=(it=null)=>{at(it),J(!0),it&&it.id===b&&C(null)},U=()=>{J(!1),at(null)},W=async it=>{await nc(it)},ot=async it=>{const Vt={...it,isFavorite:!it.isFavorite};await nc(Vt)},G=async it=>{confirm(`"${it.name}"   ?`)&&(await U_(it.id),b===it.id&&C(null))},yt=async it=>{await L_(it)},gt=async it=>{confirm("   ?")&&await B_(it)},Ct=async it=>{await H_(it)},Qt=async it=>{confirm("   ?")&&await F_(it)},te=async it=>{await Y_(it)},ze=async it=>{confirm("   ?")&&await Q_(it)},Ge=it=>{V===it.id?L(null):L(it.id)},oe=(it=null)=>{et(it),H(!0),it&&it.id===V&&L(null)},Bt=()=>{H(!1),et(null)},En=async it=>{await $_(it)},je=async it=>{confirm(`"${it.buildingName}"   ?`)&&(await Z_(it.id),V===it.id&&L(null))},oi=async it=>{try{await X_(it)}catch(Vt){throw console.error("Error importing properties:",Vt),Vt}},ve=()=>{const it={customers:s,activities:i,meetings:o,propertySelections:p,properties:v},Vt=new Blob([JSON.stringify(it,null,2)],{type:"application/json"}),jt=URL.createObjectURL(Vt),$t=document.createElement("a");$t.href=jt,$t.download=`customer-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild($t),$t.click(),document.body.removeChild($t),URL.revokeObjectURL(jt)},Ae=async it=>{const Vt=it.target.files[0];if(!Vt)return;const jt=new FileReader;jt.onload=async $t=>{try{const Et=JSON.parse($t.target.result);if(Et&&Array.isArray(Et.customers)&&Array.isArray(Et.activities)){const{saveCustomers:Pt,saveActivities:qt,saveMeetings:Zt,savePropertySelections:It,saveProperties:zt}=await Lx(async()=>{const{saveCustomers:Sn,saveActivities:rr,saveMeetings:Wr,savePropertySelections:ui,saveProperties:sr}=await Promise.resolve().then(()=>z2);return{saveCustomers:Sn,saveActivities:rr,saveMeetings:Wr,savePropertySelections:ui,saveProperties:sr}},void 0);await Pt(Et.customers||[]),await qt(Et.activities||[]),await Zt(Et.meetings||[]),await It(Et.propertySelections||[]),await zt(Et.properties||[]),alert("  .")}else throw new Error("  .")}catch(Et){alert(` : ${Et.message}`)}},jt.readAsText(Vt),it.target.value=null},Tn=it=>{const Vt=i.filter($t=>$t.customerId===it);if(Vt.length===0)return null;const jt=Vt.sort(($t,Et)=>new Date(Et.date)-new Date($t.date));return new Date(jt[0].date)},Zr=it=>({:"   ",:"    ",:"    ",:"    ",:"    ",:"      ",:"      ",:"     ",:"  (, ,  )   ",:"  (, ,  )   ",:"       (  ).     "})[it]||"",bt=(()=>{const it=new Date;it.setHours(0,0,0,0);let Vt=s.filter(jt=>{if(K==="")return jt.isFavorite;if(K==="")return jt.status==="";if(K==="")return o.filter(qt=>qt.customerId===jt.id).some(qt=>{const Zt=new Date(qt.date);return Zt.setHours(0,0,0,0),Zt.getTime()===it.getTime()});if(K==="")return o.filter(qt=>qt.customerId===jt.id).some(qt=>{const Zt=new Date(qt.date);return Zt.setHours(0,0,0,0),Zt>it});if(K==="")return i.filter(qt=>qt.customerId===jt.id).some(qt=>{const Zt=new Date(qt.date);return Zt.setHours(0,0,0,0),Zt.getTime()===it.getTime()});if(K==="")return i.filter(qt=>qt.customerId===jt.id).some(qt=>{const Zt=new Date(qt.date);Zt.setHours(0,0,0,0);const It=new Date(it);return It.setDate(It.getDate()-1),Zt.getTime()===It.getTime()});if(K===""){if(jt.status==="")return!1;const Pt=i.filter(It=>It.customerId===jt.id),qt=new Date(it),Zt=new Date(it);return Zt.setDate(Zt.getDate()-1),!Pt.some(It=>{const zt=new Date(It.date);return zt.setHours(0,0,0,0),zt.getTime()===qt.getTime()||zt.getTime()===Zt.getTime()})}if(K===""){const Pt=i.filter(qt=>qt.customerId===jt.id);return Pt.length===0?!1:Pt.some(qt=>!(qt.followUps||[]).some(It=>It.author===""))}const $t=K===""||jt.status===K,Et=!j||jt.progress===j;return $t&&Et});return K===""?Vt.sort((jt,$t)=>{const Et=o.filter(It=>{const zt=new Date(It.date);return zt.setHours(0,0,0,0),It.customerId===jt.id&&zt.getTime()===it.getTime()}),Pt=o.filter(It=>{const zt=new Date(It.date);return zt.setHours(0,0,0,0),It.customerId===$t.id&&zt.getTime()===it.getTime()});if(Et.length===0)return 1;if(Pt.length===0)return-1;const qt=new Date(Et[0].date).getTime(),Zt=new Date(Pt[0].date).getTime();return qt-Zt}):K===""?Vt.sort((jt,$t)=>{const Et=o.filter(It=>{const zt=new Date(It.date);return zt.setHours(0,0,0,0),It.customerId===jt.id&&zt>it}),Pt=o.filter(It=>{const zt=new Date(It.date);return zt.setHours(0,0,0,0),It.customerId===$t.id&&zt>it});if(Et.length===0)return 1;if(Pt.length===0)return-1;const qt=Et.sort((It,zt)=>new Date(It.date)-new Date(zt.date))[0],Zt=Pt.sort((It,zt)=>new Date(It.date)-new Date(zt.date))[0];return new Date(qt.date)-new Date(Zt.date)}):K===""?Vt.sort((jt,$t)=>{const Et=i.filter(It=>It.customerId===jt.id&&new Date(It.date).toDateString()===it.toDateString()),Pt=i.filter(It=>It.customerId===$t.id&&new Date(It.date).toDateString()===it.toDateString());if(Et.length===0)return 1;if(Pt.length===0)return-1;const qt=Et.sort((It,zt)=>new Date(zt.date)-new Date(It.date))[0],Zt=Pt.sort((It,zt)=>new Date(zt.date)-new Date(It.date))[0];return new Date(Zt.date)-new Date(qt.date)}):K===""?Vt.sort((jt,$t)=>{const Et=new Date(it);Et.setDate(Et.getDate()-1);const Pt=i.filter(zt=>zt.customerId===jt.id&&new Date(zt.date).toDateString()===Et.toDateString()),qt=i.filter(zt=>zt.customerId===$t.id&&new Date(zt.date).toDateString()===Et.toDateString());if(Pt.length===0)return 1;if(qt.length===0)return-1;const Zt=Pt.sort((zt,Sn)=>new Date(Sn.date)-new Date(zt.date))[0],It=qt.sort((zt,Sn)=>new Date(Sn.date)-new Date(zt.date))[0];return new Date(It.date)-new Date(Zt.date)}):K===""&&Vt.sort((jt,$t)=>{const Et=Tn(jt.id),Pt=Tn($t.id);return Et?Pt?Et-Pt:-1:1}),Vt})(),wt=w===""?v:v.filter(it=>it.category===w),Tt=s.find(it=>it.id===b),Nt=v.find(it=>it.id===V);return f.jsxs("div",{className:"app-container",style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw"},children:[R&&f.jsx("div",{className:"mobile-overlay",onClick:()=>S(!1)}),f.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[f.jsx(qx,{activeTab:mt,activeFilter:mt===""?K:w,onFilterChange:vt,customers:s,meetings:o,activities:i,properties:v,isMobileOpen:R,onMobileClose:()=>S(!1)}),f.jsxs("div",{className:"main-content",style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[f.jsxs("header",{className:"main-header",children:[f.jsx("button",{className:"hamburger-btn",onClick:()=>S(!0),children:""}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[f.jsx("h1",{children:mt===""?" ":""}),mt===""&&K!==""&&f.jsxs("span",{style:{fontSize:"13px",color:"#7f8c8d"},children:[": ",K," - ",Zr(K)]})]}),f.jsx("div",{className:"header-actions",children:mt===""?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>z(),className:"btn-primary",children:"+  "}),f.jsx("button",{onClick:ve,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>ht.current?.click(),className:"btn-secondary",children:""}),f.jsx("input",{type:"file",ref:ht,onChange:Ae,style:{display:"none"},accept:".json"})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>oe(),className:"btn-primary",children:"+  "}),f.jsx("button",{onClick:()=>nt(!0),className:"btn-secondary",children:"CSV "}),f.jsx("button",{onClick:ve,className:"btn-secondary",children:""}),f.jsx("button",{onClick:()=>ht.current?.click(),className:"btn-secondary",children:""}),f.jsx("input",{type:"file",ref:ht,onChange:Ae,style:{display:"none"},accept:".json"})]})})]}),f.jsx("main",{className:"table-container",style:{flex:1,overflow:"auto"},children:mt===""?f.jsx(Hx,{customers:bt,onSelectCustomer:$,onEdit:z,onDelete:G,selectedCustomerId:b,activeFilter:K,activeProgressFilter:j,onProgressFilterChange:I,allCustomers:s,onFavoriteCustomer:ot,activities:i,meetings:o}):f.jsx(Fx,{properties:wt,onSelectProperty:Ge,onEdit:oe,onDelete:je,selectedPropertyId:V})})]})]}),f.jsxs("div",{className:"tab-bar",style:{display:"flex",borderTop:"2px solid #e0e0e0",backgroundColor:"#f8f8f8",height:"70px",justifyContent:"flex-end",paddingRight:"40px",gap:"60px",alignItems:"center"},children:[f.jsx("button",{onClick:()=>xt(""),style:{padding:"12px 24px",fontSize:"18px",fontWeight:"bold",color:mt===""?"#000":"#888",border:"none",backgroundColor:mt===""?"#fff":"transparent",borderBottom:mt===""?"4px solid #FF6B9D":"4px solid transparent",borderRadius:mt===""?"8px 8px 0 0":"0",cursor:"pointer",transition:"all 0.3s ease",boxShadow:mt===""?"0 -2px 8px rgba(0,0,0,0.08)":"none"},children:" "}),f.jsx("button",{onClick:()=>xt(""),style:{padding:"12px 24px",fontSize:"18px",fontWeight:"bold",color:mt===""?"#000":"#888",border:"none",backgroundColor:mt===""?"#fff":"transparent",borderBottom:mt===""?"4px solid #2196F3":"4px solid transparent",borderRadius:mt===""?"8px 8px 0 0":"0",cursor:"pointer",transition:"all 0.3s ease",boxShadow:mt===""?"0 -2px 8px rgba(0,0,0,0.08)":"none"},children:" "})]}),mt===""&&f.jsxs(f.Fragment,{children:[f.jsx(ob,{selectedCustomer:Tt,onClose:()=>C(null),onEditCustomer:z,onUpdateCustomer:W,onDeleteCustomer:G,activities:i,onSaveActivity:yt,onDeleteActivity:gt,meetings:o,onSaveMeeting:Ct,onDeleteMeeting:Qt,propertySelections:p,onSavePropertySelection:te,onDeletePropertySelection:ze}),f.jsx(Qx,{isOpen:q,onClose:U,onSave:W,editData:rt})]}),mt===""&&f.jsxs(f.Fragment,{children:[f.jsx(ub,{selectedProperty:Nt,onClose:()=>L(null),onEditProperty:oe,onUpdateProperty:En,onDeleteProperty:je}),f.jsx(Kx,{isOpen:k,onClose:Bt,onSave:En,editData:ft}),O&&f.jsx(fb,{onImport:oi,onClose:()=>nt(!1)})]})]})}Px.createRoot(document.getElementById("root")).render(f.jsx(pt.StrictMode,{children:f.jsx(L2,{})}));
