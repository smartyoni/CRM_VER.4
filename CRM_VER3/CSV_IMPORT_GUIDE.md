# 매물장 CSV 임포트 가이드

## 개요
매물장 기능에서 CSV 파일을 통해 대량의 매물 데이터를 한번에 임포트할 수 있습니다.

## CSV 파일 형식

### 필수 열 (반드시 포함되어야 함)
- **건물명** (또는 building_name, buildingName): 매물의 건물명 (필수)

### 선택 열 (자동으로 인식됨)
다음 헤더 중 하나라도 포함되면 자동으로 인식됩니다:

| 데이터 | 가능한 헤더 |
|--------|-----------|
| 호실명 | 호실명, room_number, roomNumber |
| 매물유형 | 매물유형, property_type, propertyType, 유형 |
| 구분 | 구분, category |
| 금액 | 금액, price, 가격 |
| 입주일 | 입주일, move_in_date, moveInDate, 입주시기 |
| 소유자 | 소유자, owner_name, ownerName |
| 소유자번호 | 소유자번호, owner_phone, ownerPhone, 소유자연락처 |
| 임대차정보 | 임대차정보, lease_info, leaseInfo |
| 점주번호 | 점주번호, tenant_phone, tenantPhone, 점주연락처 |
| 메모 | 메모, memo, 비고 |

## 사용 방법

### 1. CSV 파일 준비
```
건물명,호실명,매물유형,구분,금액,입주일,소유자,소유자번호,임대차정보,점주번호,메모
강남 오피스텔,501호,매매,오피스텔,50000,2024-12-01,김철수,010-1234-5678,전월세,010-9876-5432,한강뷰 좋음
서초 상가,2층,임대,상가,30000,2024-11-15,이영희,02-123-4567,3년 임차,010-5555-6666,최신식 인테리어
```

### 2. 매물장 탭에서 "CSV 임포트" 버튼 클릭
- 하단 탭바에서 `🏠 매물장` 클릭
- 헤더의 "CSV 임포트" 버튼 클릭

### 3. CSV 파일 선택
- 파일 선택 input에서 CSV 파일 선택
- 파일이 파싱되고 처음 3개 항목의 미리보기가 표시됨

### 4. 임포트 확인
- 미리보기를 확인하고 "임포트 확인" 버튼 클릭
- 모든 데이터가 Firestore에 저장되고 자동으로 화면에 반영됨

## 주의사항

### CSV 형식
- **인코딩**: UTF-8 (한글 깨짐 방지)
- **구분자**: 쌍따옴표(")로 감싸진 필드는 내부의 쉼표 무시
  ```
  예: "강남구, 역삼동", 501호   → 건물명에 쉼표 포함 가능
  ```

### 데이터 형식
- **금액**: 숫자만 입력 (예: 50000, 30000) - "만원" 단위 자동 적용
- **날짜**: YYYY-MM-DD 형식 (예: 2024-12-01)
- **전화번호**: 자유 형식 (예: 010-1234-5678, 02-123-4567)
- **건물명**: 반드시 입력 (빈 값은 무시됨)

### 기존 데이터
- 임포트된 데이터는 새로운 ID로 추가됨
- 기존 데이터와 중복되지 않음
- 기존 매물을 수정하려면 매물 상세보기에서 "수정" 버튼 사용

## 예시

### 샘플 CSV 파일
`sample_properties.csv` 파일을 참고하세요.

### 모든 열을 포함한 예시
```csv
건물명,호실명,매물유형,구분,금액,입주일,소유자,소유자번호,임대차정보,점주번호,메모
강남 오피스텔,501호,매매,오피스텔,50000,2024-12-01,김철수,010-1234-5678,전월세,010-9876-5432,한강뷰 좋음
서초 상가,2층,임대,상가,30000,2024-11-15,이영희,02-123-4567,3년 임차,010-5555-6666,최신식 인테리어
```

### 필수 열만 포함한 예시
```csv
건물명
강남 오피스텔
서초 상가
송파 아파트
```

## 트러블슈팅

### "CSV 파일이 비어있거나 헤더가 없습니다" 오류
- CSV 파일이 최소 2줄 이상 필요 (헤더 + 최소 1개 데이터행)
- 첫 번째 행이 헤더인지 확인

### "필수 필드 '건물명'을 찾을 수 없습니다" 오류
- CSV 파일의 헤더에 "건물명", "building_name", "buildingName" 중 하나가 있는지 확인

### "유효한 매물 데이터를 찾을 수 없습니다" 오류
- 모든 데이터 행의 건물명이 비어있음
- 건물명이 있는 행이 최소 1개 이상 있는지 확인

### 한글이 깨져서 보입니다
- CSV 파일의 인코딩이 UTF-8인지 확인
- Excel에서 저장할 때: 저장 형식을 "CSV (쉼표로 구분)(*.csv)"로 선택
- 주의: Excel은 기본적으로 CP949(ANSI) 인코딩으로 저장하므로 별도 지정 필요

## 기술 상세

### 파싱 로직
1. 첫 번째 행을 헤더로 인식
2. 헤더의 각 열을 표준 필드와 매핑
3. 데이터 행을 순회하며 각 필드 추출
4. 쌍따옴표 처리로 특수문자 지원

### 유효성 검사
- 건물명 필수 (필수)
- 금액은 자동으로 숫자로 변환
- 빈 필드는 기본값으로 설정:
  - 매물유형 기본값: '매매'
  - 구분 기본값: '오피스텔'
  - 금액 기본값: 0
  - 그 외 필드: 빈 문자열

## 피드백
문제가 발생하면 다음 정보를 함께 제공해주세요:
- CSV 파일 샘플 (민감한 정보는 제거)
- 오류 메시지
- 브라우저 개발자 도구 콘솔 로그
